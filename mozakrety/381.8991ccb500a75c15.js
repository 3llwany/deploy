"use strict";(self.webpackChunkmozakretyNew=self.webpackChunkmozakretyNew||[]).push([[381],{9381:function(K,B,h){h.r(B),h.d(B,{EducationalSetupModule:function(){return Do}});var S=h(3144),U=h(5671),p=h(9966),y=h(9808),I=h(1735),j=h(4330),s=h(3075),t=h(1891),A=h(2290),m=h(2340),L=h(520),N=function(){var n=function(){function o(a){(0,U.Z)(this,o),this.http=a}return(0,S.Z)(o,[{key:"getSubjects",value:function(e){return this.http.post(m.N.apiURL+"Admin/subject",e)}},{key:"getMainSubject",value:function(){return this.http.get(m.N.apiURL+"Admin/getAllSubjects")}},{key:"getSubjectByID",value:function(e){return this.http.get(m.N.apiURL+"Admin/getSubjectByID/"+e)}},{key:"addEditSubject",value:function(e){return this.http.post("".concat(m.N.apiURL,"Admin/EducationalSubject"),e)}},{key:"deleteSubject",value:function(e){return this.http.delete("".concat(m.N.apiURL,"Admin/subject/").concat(e))}},{key:"getTeacherBySubjectAndEduCompId",value:function(e,i){return this.http.get("".concat(m.N.apiURL,"Admin/getTeachersByEduCompID/").concat(e,"/").concat(i))}},{key:"addQuestionSettings",value:function(e,i){return this.http.post("".concat(m.N.apiURL,"Admin/subjectStudentQuestionSettings/").concat(e),i)}},{key:"addTemplateSettings",value:function(e){return this.http.post(m.N.apiURL+"Admin/subjectStudentTemplateSettings/",e)}},{key:"getSubjectStructre",value:function(e){return this.http.get("".concat(m.N.apiURL,"Admin/subjectStructure/").concat(e))}},{key:"getUnits",value:function(e){return this.http.get("".concat(m.N.apiURL,"Admin/returnSearchedUnitsBySubjectId/").concat(e))}},{key:"getUnitById",value:function(e){return this.http.get(m.N.apiURL+"Admin/EditUnitView/"+e)}},{key:"addUpdateUnit",value:function(e){return this.http.post(m.N.apiURL+"Admin/AddSubjectUnitPost",e)}},{key:"deleteUnit",value:function(e){return this.http.post(m.N.apiURL+"Admin/RemoveUnit/"+e,null)}},{key:"getLessons",value:function(e){return this.http.get(m.N.apiURL+"Admin/returnSearchedLessonsByUnitId/"+e)}},{key:"getLessonById",value:function(e){return this.http.get(m.N.apiURL+"Admin/EditLessonView/"+e)}},{key:"addUpdateLesson",value:function(e,i){return this.http.post(m.N.apiURL+"Admin/AddSubjectLessonPost/"+e,i)}},{key:"deleteLesson",value:function(e){return this.http.post(m.N.apiURL+"Admin/RemoveLesson/"+e,null)}},{key:"getTopicsByLessonId",value:function(e,i){return this.http.get("".concat(m.N.apiURL,"Admin/GetTopicsByLessonIdTable/").concat(e,"/").concat(i))}},{key:"getTopicById",value:function(e,i){return this.http.get(m.N.apiURL+"Admin/getTopicById/"+e+"/"+i)}},{key:"addUpdateTopic",value:function(e){return this.http.post(m.N.apiURL+"Admin/SubmitTopic",e)}},{key:"deleteTopic",value:function(e){return this.http.post(m.N.apiURL+"Admin/RemoveTopic/"+e,null)}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.LFG(L.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),G=h(4159),M=h(6256),C=h(6405),D=h(5013),f=h(9224),q=h(7423),R=h(3251),P=h(9814),b=h(7322),O=h(4107),V=h(508),k=h(7531),tt=h(6856),J=h(1069),x=h(8966),H=h(9772),F=h(1195);function st(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function ut(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function dt(n,o){if(1&n&&(t.TgZ(0,"mat-hint",15),t.YNc(1,st,3,3,"span",16),t.YNc(2,ut,3,3,"span",16),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.Name.errors?null:a.FormCtrl.Name.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.Name.errors?null:a.FormCtrl.Name.errors.whiteSpace)}}function ct(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.MustChoosevalue")," "))}function mt(n,o){if(1&n&&(t.TgZ(0,"mat-hint",15),t.YNc(1,ct,3,3,"span",16),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.videoTypeId.errors?null:a.FormCtrl.videoTypeId.errors.required)}}function pt(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function _t(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function ht(n,o){if(1&n&&(t.TgZ(0,"mat-hint",15),t.YNc(1,pt,3,3,"span",16),t.YNc(2,_t,3,3,"span",16),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.Path.errors?null:a.FormCtrl.Path.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.Path.errors?null:a.FormCtrl.Path.errors.whiteSpace)}}function gt(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function ft(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Zt(n,o){if(1&n&&(t.TgZ(0,"mat-hint",15),t.YNc(1,gt,3,3,"span",16),t.YNc(2,ft,3,3,"span",16),t.qZA()),2&n){var a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.SecondaryPath.errors?null:a.FormCtrl.SecondaryPath.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.SecondaryPath.errors?null:a.FormCtrl.SecondaryPath.errors.whiteSpace)}}function vt(n,o){if(1&n&&(t.TgZ(0,"div",2),t.TgZ(1,"mat-form-field",3),t.TgZ(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",17),t.YNc(6,Zt,3,2,"mat-hint",5),t.qZA(),t.qZA()),2&n){var a=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,2,"labels.Link")," - Vimeo"),t.xp6(3),t.Q6J("ngIf",a.FormCtrl.SecondaryPath.invalid&&(a.FormCtrl.SecondaryPath.touched||a.submitted))}}function At(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function bt(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Tt(n,o){if(1&n&&(t.TgZ(0,"mat-hint",15),t.YNc(1,At,3,3,"span",16),t.YNc(2,bt,3,3,"span",16),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.view_percentage.errors?null:a.FormCtrl.view_percentage.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.view_percentage.errors?null:a.FormCtrl.view_percentage.errors.minusNum)}}function Ct(n,o){1&n&&(t.TgZ(0,"td"),t._uU(1,"VideoCipher"),t.qZA())}function It(n,o){1&n&&(t.TgZ(0,"td"),t._uU(1,"Vimeo"),t.qZA())}function yt(n,o){1&n&&(t.TgZ(0,"td"),t._uU(1,"Sprout Video"),t.qZA())}function qt(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"tr",21),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.YNc(3,Ct,2,0,"td",16),t.YNc(4,It,2,0,"td",16),t.YNc(5,yt,2,0,"td",16),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t.TgZ(9,"a",22),t.NdJ("click",function(){var l=t.CHM(a).$implicit;return t.oxw(2).getPartById(l.Id)}),t._UZ(10,"i",23),t.qZA(),t.TgZ(11,"a",24),t.NdJ("click",function(){var l=t.CHM(a).$implicit;return t.oxw(2).openDeleateDialog(l)}),t._UZ(12,"i",25),t.qZA(),t.qZA(),t.qZA()}if(2&n){var e=o.$implicit;t.Q6J("id",e.Id),t.xp6(2),t.Oqu(e.Name),t.xp6(1),t.Q6J("ngIf",1==e.videoTypeId),t.xp6(1),t.Q6J("ngIf",2==e.videoTypeId),t.xp6(1),t.Q6J("ngIf",3==e.videoTypeId),t.xp6(2),t.Oqu(e.view_percentage)}}function xt(n,o){if(1&n&&(t.ynx(0,18),t.TgZ(1,"table",19),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"action"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"tbody"),t.YNc(16,qt,13,6,"tr",20),t.qZA(),t.qZA(),t.BQk()),2&n){var a=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,4,"labels.Name")," "),t.xp6(3),t.Oqu(t.lcZ(9,6,"labels.Type")),t.xp6(3),t.hij(" ",t.lcZ(12,8,"labels.ConfirmViewPercentage")," "),t.xp6(5),t.Q6J("ngForOf",a.parts)}}var St=function(){var n=function(){function o(a,e,i,r,l){(0,U.Z)(this,o),this.fb=a,this.toastr=e,this.SubjectMaterialsService=i,this.spinner=r,this.dialog=l,this.parts=[],this.submitted=!1}return(0,S.Z)(o,[{key:"ngOnInit",value:function(){var e;this.myForm=this.fb.group({materialId:[this.materialId,s.kI.required],Id:[null],videoTypeId:["",s.kI.required],Name:["",[s.kI.required,j.D.whiteSpace]],Path:[""],SecondaryPath:[""],view_percentage:[90,[s.kI.required,j.D.minusNum]]}),(null!=this.materialId||null!=this.materialId)&&(null===(e=this.FormCtrl.materialId)||void 0===e||e.setValue(this.materialId),this.getMaterialParts())}},{key:"ngOnChanges",value:function(){var e;(null!=this.materialId||null!=this.materialId)&&(null===(e=this.FormCtrl.materialId)||void 0===e||e.setValue(this.materialId),this.getMaterialParts())}},{key:"FormCtrl",get:function(){return this.myForm.controls}},{key:"getMaterialParts",value:function(){var e=this;this.spinner.show(),this.SubjectMaterialsService.getMaterialParts(this.materialId).subscribe(function(i){1==i.returnValue&&(e.parts=i.MaterialParts),e.spinner.hide()})}},{key:"getPartById",value:function(e){var i=this;this.spinner.show(),this.SubjectMaterialsService.getPartById(e).subscribe(function(r){i.myForm.patchValue(r.MaterialPart),i.spinner.hide()})}},{key:"addPart",value:function(){var e=this;this.submitted=!0,this.myForm.valid&&(this.spinner.show(),this.SubjectMaterialsService.addPart(this.myForm.value).subscribe(function(i){var r,l,u;1==i.returnValue&&(e.getMaterialParts(),e.myForm.reset(),null===(r=e.FormCtrl.videoTypeId)||void 0===r||r.setValue(""),null===(l=e.FormCtrl.materialId)||void 0===l||l.setValue(e.materialId),null===(u=e.FormCtrl.view_percentage)||void 0===u||u.setValue(90),e.toastr.success(null==e.myForm.controls.Id?"\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u062c\u0632\u0621 \u0627\u0644\u0645\u062d\u0627\u0636\u0631\u0629":"\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u062c\u0632\u0621 \u0627\u0644\u0645\u062d\u0627\u0636\u0631\u0629"),e.submitted=!1),e.spinner.hide()}))}},{key:"deletePart",value:function(e){var i=this;this.spinner.show(),this.SubjectMaterialsService.deletePart(e.Id).subscribe(function(r){if(1==r.returnValue){var l=i.parts.indexOf(e);i.parts.splice(l,1),i.toastr.success("\u062a\u0645 \u0627\u0644\u062d\u0630\u0641"),i.spinner.hide()}})}},{key:"openDeleateDialog",value:function(e){var i=this;this.dialog.open(J.F,{data:{msg:e.Name}}).afterClosed().subscribe(function(r){r&&i.deletePart(e)})}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(s.qu),t.Y36(A._W),t.Y36(G.r),t.Y36(C.t2),t.Y36(x.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-material-parts"]],inputs:{materialId:"materialId"},features:[t.TTD],decls:45,vars:29,consts:[[1,"form-container",3,"formGroup"],[1,"row"],[1,"col-md-6","col-6"],["appearance","legacy"],["matInput","","type","text","formControlName","Name"],["class","text-danger",4,"ngIf"],[1,"col-md-6","col-12"],["formControlName","videoTypeId"],[3,"value"],["matInput","","type","text","formControlName","Path"],["class","col-md-6 col-6",4,"ngIf"],["matInput","","type","number","formControlName","view_percentage"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"disabled","click"],["class","table-responsive",4,"ngIf"],[1,"text-danger"],[4,"ngIf"],["matInput","","type","text","formControlName","SecondaryPath"],[1,"table-responsive"],[1,"table","table-striped","m-0"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],["matTooltip","Edit",1,"success","p-0",3,"click"],[1,"ft-edit-2","font-medium-3","mr-2"],["matTooltip","Delete",1,"danger","p-0",3,"click"],[1,"ft-trash","font-medium-3","mr-2"]],template:function(a,e){1&a&&(t.TgZ(0,"form",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"mat-form-field",3),t.TgZ(4,"mat-label"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"input",4),t.YNc(8,dt,3,2,"mat-hint",5),t.qZA(),t.qZA(),t.TgZ(9,"div",6),t.TgZ(10,"mat-form-field",3),t.TgZ(11,"mat-label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"mat-select",7),t.TgZ(15,"mat-option"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"mat-option",8),t._uU(19,"VideoCipher"),t.qZA(),t.TgZ(20,"mat-option",8),t._uU(21,"Vimeo"),t.qZA(),t.TgZ(22,"mat-option",8),t._uU(23,"SproutVideo"),t.qZA(),t.qZA(),t.YNc(24,mt,2,1,"mat-hint",5),t.qZA(),t.qZA(),t.TgZ(25,"div",2),t.TgZ(26,"mat-form-field",3),t.TgZ(27,"mat-label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",9),t.YNc(31,ht,3,2,"mat-hint",5),t.qZA(),t.qZA(),t.YNc(32,vt,7,4,"div",10),t.TgZ(33,"div",2),t.TgZ(34,"mat-form-field",3),t.TgZ(35,"mat-label"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t._UZ(38,"input",11),t.YNc(39,Tt,3,2,"mat-hint",5),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"mat-card-actions",12),t.TgZ(41,"button",13),t.NdJ("click",function(){return e.addPart()}),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.qZA(),t.YNc(44,xt,17,10,"ng-container",14)),2&a&&(t.Q6J("formGroup",e.myForm),t.xp6(5),t.hij(" ",t.lcZ(6,17,"labels.Name")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrl.Name.invalid&&(e.FormCtrl.Name.touched||e.submitted)),t.xp6(4),t.hij("",t.lcZ(13,19,"labels.Type")," "),t.xp6(4),t.hij(" ",t.lcZ(17,21,"General.Choose"),""),t.xp6(2),t.Q6J("value",1),t.xp6(2),t.Q6J("value",2),t.xp6(2),t.Q6J("value",3),t.xp6(2),t.Q6J("ngIf",e.FormCtrl.videoTypeId.invalid&&(e.FormCtrl.videoTypeId.touched||e.submitted)),t.xp6(4),t.hij(" ",t.lcZ(29,23,"labels.Link")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrl.Path.invalid&&(e.FormCtrl.Path.touched||e.submitted)),t.xp6(1),t.Q6J("ngIf",3==e.FormCtrl.videoTypeId.value),t.xp6(4),t.hij(" ",t.lcZ(37,25,"labels.ConfirmViewPercentage")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrl.view_percentage.invalid&&(e.FormCtrl.view_percentage.touched||e.submitted)),t.xp6(2),t.Q6J("disabled",null==e.FormCtrl.materialId.value||null==e.FormCtrl.materialId.value),t.xp6(1),t.hij(" ",t.lcZ(43,27,"General.Save")," "),t.xp6(2),t.Q6J("ngIf",e.parts.length>0))},directives:[s._Y,s.JL,s.sg,b.KE,b.hX,k.Nt,s.Fj,s.JJ,s.u,y.O5,O.gD,V.ey,s.wV,f.hq,q.lW,b.bx,y.sg,H.gM],pipes:[F.X$],styles:[""]}),n}(),Ut=h(8246);function jt(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Lt(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Ft(n,o){if(1&n&&(t.TgZ(0,"mat-hint",14),t.YNc(1,jt,3,3,"span",15),t.YNc(2,Lt,3,3,"span",15),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.materialName.errors?null:a.FormCtrl.materialName.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.materialName.errors?null:a.FormCtrl.materialName.errors.whiteSpace)}}function Nt(n,o){if(1&n&&(t.TgZ(0,"div",16),t.TgZ(1,"div",17),t._UZ(2,"embed",18),t.ALo(3,"safe"),t.qZA(),t.qZA()),2&n){var a=t.oxw();t.xp6(2),t.Q6J("type",a.type)("src",t.lcZ(3,2,a.Filepath),t.uOi)}}function Mt(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"tr",22),t.TgZ(1,"td"),t.TgZ(2,"a",23),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"td"),t.TgZ(5,"a",24),t.NdJ("click",function(){var l=t.CHM(a).$implicit;return t.oxw(2).openDeleateDialog(l)}),t._UZ(6,"i",25),t.qZA(),t.qZA(),t.qZA()}if(2&n){var e=o.$implicit;t.Q6J("id",e.Id),t.xp6(2),t.Q6J("href",e.file,t.LSH),t.xp6(1),t.Oqu(e.materialName)}}function kt(n,o){if(1&n&&(t.ynx(0,19),t.TgZ(1,"table",20),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"action"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"tbody"),t.YNc(10,Mt,7,3,"tr",21),t.qZA(),t.qZA(),t.BQk()),2&n){var a=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,2,"labels.Name")," "),t.xp6(5),t.Q6J("ngForOf",a.Attaches)}}var wt=function(){var n=function(){function o(a,e,i,r,l){(0,U.Z)(this,o),this.fb=a,this.toastr=e,this.SubjectMaterialsService=i,this.spinner=r,this.dialog=l,this.Attaches=[],this.submitted=!1}return(0,S.Z)(o,[{key:"ngOnInit",value:function(){var e,i;this.myForm=this.fb.group({materialId:[this.materialId,s.kI.required],materialName:["",[s.kI.required,j.D.whiteSpace]],fileBase64:[null,[s.kI.required]]}),(null!=this.materialId||null!=this.materialId)&&(null===(i=null===(e=this.FormCtrl)||void 0===e?void 0:e.materialId)||void 0===i||i.setValue(this.materialId),this.getMaterialAttaches())}},{key:"ngOnChanges",value:function(){var e,i;(null!=this.materialId||null!=this.materialId)&&(null===(i=null===(e=this.FormCtrl)||void 0===e?void 0:e.materialId)||void 0===i||i.setValue(this.materialId),this.getMaterialAttaches())}},{key:"FormCtrl",get:function(){var e;return null===(e=this.myForm)||void 0===e?void 0:e.controls}},{key:"getMaterialAttaches",value:function(){var e=this;this.spinner.show(),this.SubjectMaterialsService.getMaterialAttaches(this.materialId).subscribe(function(i){1==i.returnValue&&(e.Attaches=i.MaterialAttachs),e.spinner.hide()})}},{key:"addAttach",value:function(){var i,e=this;this.submitted=!0,(null===(i=this.FormCtrl.fileBase64)||void 0===i?void 0:i.value)?this.myForm.valid&&(this.spinner.show(),this.SubjectMaterialsService.addAttach({mat_attach:this.myForm.value}).subscribe(function(l){e.myForm.reset(),e.getMaterialAttaches(),e.toastr.success("Attach Added successfully"),e.submitted=!1,e.spinner.hide()})):this.toastr.warning("Must Choose File")}},{key:"deleteAttach",value:function(e){var i=this;this.spinner.show(),this.SubjectMaterialsService.deleteAttach(e.Id).subscribe(function(r){if(1==r.returnValue){var l=i.Attaches.indexOf(e);i.Attaches.splice(l,1),i.toastr.success("\u062a\u0645 \u0627\u0644\u062d\u0630\u0641")}i.spinner.hide()})}},{key:"openDeleateDialog",value:function(e){var i=this;this.dialog.open(J.F,{data:{msg:e.materialName}}).afterClosed().subscribe(function(r){r&&i.deleteAttach(e)})}},{key:"onChange",value:function(e){var i=this,r=e.target.files[0].name,l=e.target.files[0].size,u=e.target.files[0].type,c=e.target.files[0].lastModified,_=e.target.files[0].lastModifiedDate;if(e.target.files){var d=new FileReader;d.readAsDataURL(e.target.files[0]),d.onload=function(g){var v=g.target.result,T={FileAsBase64:v.replace("data:application/pdf;base64,",""),name:r,size:l,type:u,LastModified:c,LastModifiedDate:_};i.Filepath=v,i.type=u,i.FormCtrl.fileBase64.setValue(T)}}}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(s.qu),t.Y36(A._W),t.Y36(G.r),t.Y36(C.t2),t.Y36(x.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-material-files"]],inputs:{materialId:"materialId"},features:[t.TTD],decls:21,vars:14,consts:[[1,"form-container",3,"formGroup"],[1,"row"],[1,"col-md-6","col-6"],["appearance","legacy"],["matInput","","type","text","formControlName","materialName"],["class","text-danger",4,"ngIf"],[1,"col-md-2","col-12"],["type","button","mat-raised-button","",1,"btn","btn-danger",3,"click"],["hidden","","type","file","id","file",3,"change"],["fileInput",""],["class","col-12",4,"ngIf"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"disabled","click"],["class","table-responsive",4,"ngIf"],[1,"text-danger"],[4,"ngIf"],[1,"col-12"],[1,"media"],["width","300","height","300",3,"type","src"],[1,"table-responsive"],[1,"table","table-striped","m-0"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],["target","_blank",3,"href"],["matTooltip","Delete",1,"danger","p-0",3,"click"],[1,"ft-trash","font-medium-3","mr-2"]],template:function(a,e){if(1&a){var i=t.EpF();t.TgZ(0,"form",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"mat-form-field",3),t.TgZ(4,"mat-label"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"input",4),t.YNc(8,Ft,3,2,"mat-hint",5),t.qZA(),t.qZA(),t.TgZ(9,"div",6),t.TgZ(10,"button",7),t.NdJ("click",function(){return t.CHM(i),t.MAs(14).click()}),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"input",8,9),t.NdJ("change",function(l){return e.onChange(l)}),t.qZA(),t.qZA(),t.YNc(15,Nt,4,4,"div",10),t.qZA(),t.qZA(),t.TgZ(16,"mat-card-actions",11),t.TgZ(17,"button",12),t.NdJ("click",function(){return e.addAttach()}),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.qZA(),t.YNc(20,kt,11,4,"ng-container",13)}2&a&&(t.Q6J("formGroup",e.myForm),t.xp6(5),t.hij(" ",t.lcZ(6,8,"labels.Name")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrl.materialName.invalid&&(e.FormCtrl.materialName.touched||e.submitted)),t.xp6(3),t.hij(" ",t.lcZ(12,10,"labels.UploadFile")," "),t.xp6(4),t.Q6J("ngIf",e.Filepath),t.xp6(2),t.Q6J("disabled",null==e.FormCtrl.materialId.value||null==e.FormCtrl.materialId.value),t.xp6(1),t.hij(" ",t.lcZ(19,12,"General.Save")," "),t.xp6(2),t.Q6J("ngIf",e.Attaches.length>0))},directives:[s._Y,s.JL,s.sg,b.KE,b.hX,k.Nt,s.Fj,s.JJ,s.u,y.O5,q.lW,f.hq,b.bx,y.sg,H.gM],pipes:[F.X$,Ut.y],styles:[""]}),n}(),Dt=h(9508);function Yt(n,o){if(1&n&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.exam_ar_name," ")}}function Et(n,o){if(1&n&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.Id),t.xp6(1),t.hij(" ",a.Name," ")}}function Jt(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Pt(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function Qt(n,o){if(1&n&&(t.TgZ(0,"mat-hint",14),t.YNc(1,Jt,3,3,"span",15),t.YNc(2,Pt,3,3,"span",15),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.percentageToPass.errors?null:a.FormCtrl.percentageToPass.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.percentageToPass.errors?null:a.FormCtrl.percentageToPass.errors.minusNum)}}function Gt(n,o){if(1&n&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){var a=t.oxw().$implicit;t.xp6(1),t.AsE(" ",t.lcZ(2,2,"labels.Exam")," - ",a.examDetails.exam_ar_name," ")}}function Bt(n,o){if(1&n&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){var a=t.oxw().$implicit;t.xp6(1),t.AsE(" ",t.lcZ(2,2,"labels.Template")," - ",a.TemplateDetails.Name," ")}}function Ot(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"tr"),t.YNc(1,Gt,3,4,"td",15),t.YNc(2,Bt,3,4,"td",15),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"a",19),t.NdJ("click",function(){var l=t.CHM(a).$implicit;return t.oxw(2).openDeleateDialog(l)}),t._UZ(7,"i",20),t.qZA(),t.qZA(),t.qZA()}if(2&n){var e=o.$implicit;t.xp6(1),t.Q6J("ngIf",null!=e.examId),t.xp6(1),t.Q6J("ngIf",null!=e.templateId),t.xp6(2),t.Oqu(null==e?null:e.percentageToPass)}}function Vt(n,o){if(1&n&&(t.ynx(0,16),t.TgZ(1,"table",17),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"action"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"tbody"),t.YNc(13,Ot,8,3,"tr",18),t.qZA(),t.qZA(),t.BQk()),2&n){var a=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,3,"labels.Exam")," "),t.xp6(3),t.Oqu(t.lcZ(9,5,"labels.percentageToPass")),t.xp6(5),t.Q6J("ngForOf",a.AttachedQuiz)}}var Rt=function(){var n=function(){function o(a,e,i,r,l,u,c,_){var d=this;(0,U.Z)(this,o),this.fb=a,this.route=e,this.toastr=i,this.spinner=r,this.AuthService=l,this.SubjectMaterialsService=u,this.dialog=c,this._formValidationService=_,this.exams=[],this.templates=[],this.submitted=!1,this.noExamerr=!1,this.excludedControls=["materialId"],this.route.queryParamMap.subscribe(function(g){d.subjectId=g.get("subjectId")})}return(0,S.Z)(o,[{key:"ngOnInit",value:function(){var e;this.EduCompId=this.AuthService.getEduCompId(),this.myForm=this.fb.group({materialId:[this.materialId,s.kI.required],examId:[null],templateId:[null],percentageToPass:["",[s.kI.required,j.D.minusNum]]}),(null!=this.materialId||null!=this.materialId)&&(null===(e=this.FormCtrl.materialId)||void 0===e||e.setValue(this.materialId),this.getExamsAndTemplates(),this.getMaterialQuizes())}},{key:"ngOnChanges",value:function(){var e;(null!=this.materialId||null!=this.materialId)&&(null===(e=this.FormCtrl.materialId)||void 0===e||e.setValue(this.materialId),this.getExamsAndTemplates(),this.getMaterialQuizes())}},{key:"FormCtrl",get:function(){return this.myForm.controls}},{key:"getExamsAndTemplates",value:function(){var e=this;this.spinner.show(),this.SubjectMaterialsService.getExamsAndTemplates(this.EduCompId,this.subjectId,this.materialId).subscribe(function(i){e.exams=i.examsList,e.templates=i.templatesList,e.spinner.hide()})}},{key:"getMaterialQuizes",value:function(){var e=this;this.spinner.show(),this.SubjectMaterialsService.getMaterialQuizes(this.materialId).subscribe(function(i){console.log(i),e.AttachedQuiz=i,e.spinner.hide()})}},{key:"addMaterialQuiz",value:function(){var e=this;this.submitted=!0,this.FormCtrl.examId.value||this.FormCtrl.templateId.value?this.myForm.valid&&(this.spinner.show(),this.SubjectMaterialsService.addMaterialQuiz(this.materialId,this.myForm.value).subscribe(function(i){(i.returnValue=1)&&(e._formValidationService.ResetForm(e.myForm,e.excludedControls),e.submitted=!1,e.getMaterialQuizes(),e.toastr.success("Exam Added successfully")),e.spinner.hide()})):this.toastr.warning("Must Choose Exam or Template")}},{key:"deleteMaterialQuiz",value:function(e){var i=this;this.spinner.show(),this.SubjectMaterialsService.deleteMaterialQuiz(e.Id).subscribe(function(r){if(1==r.returnValue){var l=i.AttachedQuiz.indexOf(e);i.AttachedQuiz.splice(l,1),i.toastr.success("\u062a\u0645 \u0627\u0644\u062d\u0630\u0641")}i.spinner.hide()})}},{key:"openDeleateDialog",value:function(e){var r,l,i=this;this.dialog.open(J.F,{data:{msg:(null===(r=e.TemplateDetails)||void 0===r?void 0:r.Name)||(null===(l=e.examDetails)||void 0===l?void 0:l.exam_ar_name)}}).afterClosed().subscribe(function(u){u&&i.deleteMaterialQuiz(e)})}},{key:"examValidator",value:function(){null!=this.myForm.controls.examId.value&&this.myForm.controls.templateId.setValue(null)}},{key:"TemplateValidator",value:function(){null!=this.myForm.controls.templateId.value&&this.myForm.controls.examId.setValue(null)}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(s.qu),t.Y36(I.gz),t.Y36(A._W),t.Y36(C.t2),t.Y36(M.e),t.Y36(G.r),t.Y36(x.uw),t.Y36(Dt.U))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-material-exam"]],inputs:{materialId:"materialId"},features:[t.TTD],decls:34,vars:24,consts:[[1,"form-container",3,"formGroup"],[1,"row"],[1,"col-md-6","col-12"],["appearance","legacy"],["formControlName","examId",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","templateId",3,"selectionChange"],[1,"col-md-6","col-6"],["matInput","","type","number","formControlName","percentageToPass"],["class","text-danger",4,"ngIf"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"disabled","click"],["class","table-responsive",4,"ngIf"],[3,"value"],[1,"text-danger"],[4,"ngIf"],[1,"table-responsive"],[1,"table","table-striped","m-0"],[4,"ngFor","ngForOf"],["matTooltip","Delete",1,"danger","p-0",3,"click"],[1,"ft-trash","font-medium-3","mr-2"]],template:function(a,e){1&a&&(t.TgZ(0,"form",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"mat-form-field",3),t.TgZ(4,"mat-label"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"mat-select",4),t.NdJ("selectionChange",function(){return e.examValidator()}),t.TgZ(8,"mat-option"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.YNc(11,Yt,2,2,"mat-option",5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",2),t.TgZ(13,"mat-form-field",3),t.TgZ(14,"mat-label"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"mat-select",6),t.NdJ("selectionChange",function(){return e.examValidator()}),t.TgZ(18,"mat-option"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.YNc(21,Et,2,2,"mat-option",5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",7),t.TgZ(23,"mat-form-field",3),t.TgZ(24,"mat-label"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t._UZ(27,"input",8),t.YNc(28,Qt,3,2,"mat-hint",9),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"mat-card-actions",10),t.TgZ(30,"button",11),t.NdJ("click",function(){return e.addMaterialQuiz()}),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.qZA(),t.YNc(33,Vt,14,7,"ng-container",12)),2&a&&(t.Q6J("formGroup",e.myForm),t.xp6(5),t.hij("",t.lcZ(6,12,"labels.Exam")," "),t.xp6(4),t.hij(" ",t.lcZ(10,14,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",e.exams),t.xp6(4),t.hij("",t.lcZ(16,16,"labels.Template")," "),t.xp6(4),t.hij(" ",t.lcZ(20,18,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",e.templates),t.xp6(4),t.hij(" ",t.lcZ(26,20,"labels.percentageToPass")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrl.percentageToPass.invalid&&(e.FormCtrl.percentageToPass.touched||e.submitted)),t.xp6(2),t.Q6J("disabled",null==e.FormCtrl.materialId.value||null==e.FormCtrl.materialId.value),t.xp6(1),t.hij(" ",t.lcZ(32,22,"General.Save")," "),t.xp6(2),t.Q6J("ngIf",(null==e.AttachedQuiz?null:e.AttachedQuiz.length)>0))},directives:[s._Y,s.JL,s.sg,b.KE,b.hX,O.gD,s.JJ,s.u,V.ey,y.sg,k.Nt,s.wV,s.Fj,y.O5,f.hq,q.lW,b.bx,H.gM],pipes:[F.X$],styles:[""]}),n}();function zt(n,o){if(1&n&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.teacherUserId),t.xp6(1),t.hij(" ",a.teacher_ar_name," ")}}function $t(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.MustChoosevalue")," "))}function Ht(n,o){if(1&n&&(t.TgZ(0,"mat-hint",44),t.YNc(1,$t,3,3,"span",29),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.teacherUserId.errors?null:a.FormCtrl.teacherUserId.errors.required)}}function Wt(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Xt(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Kt(n,o){if(1&n&&(t.TgZ(0,"mat-hint",44),t.YNc(1,Wt,3,3,"span",29),t.YNc(2,Xt,3,3,"span",29),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.materialName.errors?null:a.FormCtrl.materialName.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.materialName.errors?null:a.FormCtrl.materialName.errors.whiteSpace)}}function te(n,o){if(1&n&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.Id),t.xp6(1),t.hij(" ",a.groupName," ")}}function ee(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.MustChoosevalue")," "))}function ne(n,o){if(1&n&&(t.TgZ(0,"mat-hint",44),t.YNc(1,ee,3,3,"span",29),t.qZA()),2&n){var a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.studentGroupIDs.errors?null:a.FormCtrl.studentGroupIDs.errors.required)}}function ae(n,o){if(1&n&&(t.TgZ(0,"mat-form-field",12),t.TgZ(1,"mat-label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-select",45),t.TgZ(5,"mat-option"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.YNc(8,te,2,2,"mat-option",14),t.qZA(),t.YNc(9,ne,2,1,"mat-hint",15),t.qZA()),2&n){var a=t.oxw();t.xp6(2),t.hij("",t.lcZ(3,4,"labels.Group")," "),t.xp6(4),t.hij(" ",t.lcZ(7,6,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",a.groups),t.xp6(1),t.Q6J("ngIf",a.FormCtrl.studentGroupIDs.invalid&&(a.FormCtrl.studentGroupIDs.touched||a.submitted))}}function ie(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function oe(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function re(n,o){if(1&n&&(t.TgZ(0,"mat-hint",44),t.YNc(1,ie,3,3,"span",29),t.YNc(2,oe,3,3,"span",29),t.qZA()),2&n){var a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.num_views.errors?null:a.FormCtrl.num_views.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.num_views.errors?null:a.FormCtrl.num_views.errors.minusNum)}}function le(n,o){if(1&n&&(t.TgZ(0,"div",16),t.TgZ(1,"mat-form-field",12),t.TgZ(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",46),t.YNc(6,re,3,2,"mat-hint",15),t.qZA(),t.qZA()),2&n){var a=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,2,"labels.NumberViews")," "),t.xp6(3),t.Q6J("ngIf",a.FormCtrl.num_views.invalid&&(a.FormCtrl.num_views.touched||a.submitted))}}function se(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function ue(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function de(n,o){if(1&n&&(t.TgZ(0,"mat-hint",44),t.YNc(1,se,3,3,"span",29),t.YNc(2,ue,3,3,"span",29),t.qZA()),2&n){var a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.address.errors?null:a.FormCtrl.address.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.address.errors?null:a.FormCtrl.address.errors.whiteSpace)}}function ce(n,o){if(1&n&&(t.TgZ(0,"div",16),t.TgZ(1,"mat-form-field",12),t.TgZ(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",47),t.YNc(6,de,3,2,"mat-hint",15),t.qZA(),t.qZA()),2&n){var a=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,2,"labels.Address")," "),t.xp6(3),t.Q6J("ngIf",a.FormCtrl.address.invalid&&(a.FormCtrl.address.touched||a.submitted))}}function me(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1," You must enter a date. "),t.qZA())}function pe(n,o){if(1&n&&(t.TgZ(0,"mat-hint",44),t.YNc(1,me,2,0,"span",29),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.fromDate.errors?null:a.FormCtrl.fromDate.errors.required)}}function _e(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function he(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function ge(n,o){if(1&n&&(t.TgZ(0,"mat-hint",44),t.YNc(1,_e,3,3,"span",29),t.YNc(2,he,3,3,"span",29),t.qZA()),2&n){var a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.materialPrice.errors?null:a.FormCtrl.materialPrice.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.materialPrice.errors?null:a.FormCtrl.materialPrice.errors.minusNum)}}function fe(n,o){if(1&n&&(t.TgZ(0,"div",16),t.TgZ(1,"mat-form-field",12),t.TgZ(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",48),t.YNc(6,ge,3,2,"mat-hint",15),t.qZA(),t.qZA()),2&n){var a=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,2,"labels.Price")," "),t.xp6(3),t.Q6J("ngIf",a.FormCtrl.materialPrice.invalid&&(a.FormCtrl.materialPrice.touched||a.submitted))}}function Ze(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function ve(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Ae(n,o){if(1&n&&(t.TgZ(0,"mat-hint",44),t.YNc(1,Ze,3,3,"span",29),t.YNc(2,ve,3,3,"span",29),t.qZA()),2&n){var a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.codePrice.errors?null:a.FormCtrl.codePrice.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.codePrice.errors?null:a.FormCtrl.codePrice.errors.minusNum)}}function be(n,o){if(1&n&&(t.TgZ(0,"div",16),t.TgZ(1,"mat-form-field",12),t.TgZ(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",49),t.YNc(6,Ae,3,2,"mat-hint",15),t.qZA(),t.qZA()),2&n){var a=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,2,"labels.CodePrice")," "),t.xp6(3),t.Q6J("ngIf",a.FormCtrl.codePrice.invalid&&(a.FormCtrl.codePrice.touched||a.submitted))}}function Te(n,o){1&n&&(t.ynx(0),t.TgZ(1,"div",16),t.TgZ(2,"mat-form-field",12),t.TgZ(3,"mat-label"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"input",50),t.qZA(),t.qZA(),t.TgZ(7,"div",16),t.TgZ(8,"mat-form-field",12),t.TgZ(9,"mat-label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"mat-select",51),t.TgZ(13,"mat-option"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"mat-option",10),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"mat-option",10),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()),2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,7,"labels.Discount")," "),t.xp6(6),t.hij(" ",t.lcZ(11,9,"labels.DiscountType")," "),t.xp6(4),t.hij(" ",t.lcZ(15,11,"General.Choose"),""),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.hij(" ",t.lcZ(18,13,"labels.GeneralDiscount")," "),t.xp6(2),t.Q6J("value",2),t.xp6(1),t.hij(" ",t.lcZ(21,15,"labels.privateDiscount")," "))}function Ce(n,o){if(1&n&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.unit_ar_name," ")}}function Ie(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"div",38),t.TgZ(1,"mat-form-field",12),t.TgZ(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"mat-select",52),t.NdJ("selectionChange",function(){t.CHM(a);var r=t.oxw();return r.returnSearchedLessonsByUnitId(null==r.FormCtrl.unitId?null:r.FormCtrl.unitId.value)}),t.TgZ(6,"mat-option"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.YNc(9,Ce,2,2,"mat-option",14),t.qZA(),t.qZA(),t.qZA()}if(2&n){var e=t.oxw();t.xp6(3),t.hij("",t.lcZ(4,3,"labels.Unit")," "),t.xp6(4),t.hij(" ",t.lcZ(8,5,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",e.units)}}function ye(n,o){if(1&n&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.lesson_ar_name," ")}}function qe(n,o){if(1&n&&(t.TgZ(0,"div",38),t.TgZ(1,"mat-form-field",12),t.TgZ(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"mat-select",53),t.TgZ(6,"mat-option"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.YNc(9,ye,2,2,"mat-option",14),t.qZA(),t.qZA(),t.qZA()),2&n){var a=t.oxw();t.xp6(3),t.hij("",t.lcZ(4,3,"labels.Lesson")," "),t.xp6(4),t.hij(" ",t.lcZ(8,5,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",a.Lessons)}}function xe(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"mat-label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"input",54),t.NdJ("change",function(i){return t.CHM(a),t.oxw().onChange(i)}),t.qZA(),t.qZA()}2&n&&(t.xp6(2),t.hij("",t.lcZ(3,1,"labels.AddMalzama")," "))}var Se=function(o,a){return{functionId:o,parentId:a}},Ue=function(){var n=function(){function o(a,e,i,r,l,u,c,_,d){var g=this;(0,U.Z)(this,o),this.route=a,this.router=e,this.fb=i,this.toastr=r,this.SubjectsService=l,this.SubjectMaterialsService=u,this.authserv=c,this.spinner=_,this.fileService=d,this.submitted=!1,this.Teachers=[],this.getGroupsValue=[],this.route.queryParamMap.subscribe(function(v){g.materialId=v.get("materialId"),g.subjectId=v.get("subjectId"),g.functionId=Number(v.get("functionId")),g.parentId=Number(v.get("parentId")),g.functionId&&g.authserv.getUserRowFunctions(g.functionId).subscribe(function(T){T&&(g.rowFunctions=T)}),g.getSubjectByID(g.subjectId),g.returnSearchedUnitsBySubjectId()})}return(0,S.Z)(o,[{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.branchId=this.authserv.getBranchId(),this.getTeacherByEduCompId(),this.getGroupsByEduCompId(),this.myForm=this.fb.group({subjectId:[this.subjectId,s.kI.required],EditedMaterialId:[this.materialId],teacherUserId:["",s.kI.required],selectedItemType:[1,s.kI.required],selectedItemId:["",s.kI.required],materialName:["",[s.kI.required,j.D.whiteSpace]],onlyCode:[!1,s.kI.required],CustomDiscountApplied:[!1,s.kI.required],CodeIsPurchasable:[!1,s.kI.required],IsOnline:[1,s.kI.required],num_views:[""],attachFile:[null],materialImage:[null],studentGroupIDs:[],address:[""],materialPrice:[""],priceDiscount:[""],codePrice:[""],priceDiscountType:["null",[j.D.minusNum]],fromDate:["",s.kI.required],toDate:[""],unitId:[""],lessonId:[""]}),this.onlyCodeValidators()}},{key:"FormCtrl",get:function(){return this.myForm.controls}},{key:"ngAfterViewInit",value:function(){var e=this;this.authserv.EduCompId.subscribe(function(i){e.EduCompId=i.EduCompId,e.getTeacherByEduCompId(),e.getGroupsByEduCompId()}),this.authserv.branchId.subscribe(function(i){e.branchId=i.branchId}),null!=this.materialId&&this.getMaterialById()}},{key:"addEditMaterial",value:function(){var i,r,l,u,c,_,d,e=this;this.submitted=!0;var v,g=null===(i=this.FormCtrl.selectedItemType)||void 0===i?void 0:i.value;1==g?v=this.subjectId:2==g?v=null===(r=this.FormCtrl.unitId)||void 0===r?void 0:r.value:3==g&&(v=null===(l=this.FormCtrl.lessonId)||void 0===l?void 0:l.value),null===(u=this.FormCtrl.selectedItemId)||void 0===u||u.setValue(v),2!=this.FormCtrl.IsOnline.value||(null===(_=null===(c=this.FormCtrl.studentGroupIDs)||void 0===c?void 0:c.value)||void 0===_?void 0:_.length)?1==this.FormCtrl.IsOnline.value&&(null===(d=this.FormCtrl.num_views)||void 0===d?void 0:d.value)<0?this.toastr.warning("Must Enter number of views"):this.myForm.valid&&(this.spinner.show(),this.SubjectMaterialsService.addEditMaterial(this.EduCompId,this.branchId,this.myForm.value).subscribe(function(T){1==T.returnValue&&(e.toastr.success(null==e.materialId?"\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u062d\u0627\u0636\u0631\u0629":"\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u062d\u0627\u0636\u0631\u0629"),e.submitted=!1,e.materialId=T.Id,e.router.navigate([],{queryParams:{materialId:T.Id},queryParamsHandling:"merge"})),e.spinner.hide()})):this.toastr.warning("Must Choose Group!")}},{key:"getMaterialById",value:function(){var e=this;this.spinner.show(),this.SubjectMaterialsService.getMaterialById(this.subjectId,this.materialId).subscribe(function(i){var r,l;1==i.retunValue&&(e.myForm.patchValue(i.model),null===(r=e.FormCtrl.materialImage)||void 0===r||r.setValue("mozakretyapi".concat(i.model.materialImagePath)),e.materialName=i.model.materialName,e.FormCtrl.CustomDiscountApplied.setValue(i.model.CustomDiscountApplied||!1),2==(null===(l=i.model)||void 0===l?void 0:l.selectedItemType)?e.FormCtrl.unitId.setValue(i.model.selectedItemId):3==i.model.selectedItemType&&e.FormCtrl.lessonId.setValue(i.model.selectedItemId)),e.spinner.hide()})}},{key:"coverPreview",value:function(){var e,i,r,l,u;return null!=(null===(i=null===(e=this.FormCtrl.materialImage)||void 0===e?void 0:e.value)||void 0===i?void 0:i.FileAsBase64)?null===(l=null===(r=this.FormCtrl.materialImage)||void 0===r?void 0:r.value)||void 0===l?void 0:l.FileAsBase64:null===(u=this.FormCtrl.materialImage)||void 0===u?void 0:u.value}},{key:"CoverPhoto",value:function(e){var i=this;this.fileService.uploadFile(e).then(function(r){var l;null===(l=i.FormCtrl.materialImage)||void 0===l||l.setValue(r)})}},{key:"onChange",value:function(e){var i=this;this.fileService.uploadFile(e).then(function(r){var l;null===(l=i.FormCtrl.attachFile)||void 0===l||l.setValue(r)})}},{key:"getGroupsByEduCompId",value:function(){var e=this;this.SubjectMaterialsService.getGroupsByEduCompId(this.EduCompId).subscribe(function(i){1==i.retunValue&&(e.groups=i.lstEduCompGroups)})}},{key:"getSubjectByID",value:function(e){var i=this;this.SubjectsService.getSubjectByID(e).subscribe(function(r){null!=r.subject_id&&(i.subject_ar_name=r.subject_ar_name)})}},{key:"getTeacherByEduCompId",value:function(){var e=this;this.spinner.show(),this.SubjectsService.getTeacherBySubjectAndEduCompId(this.EduCompId,this.subjectId).subscribe(function(i){1==i.retunValue&&(e.Teachers=i.teachers),e.spinner.hide()})}},{key:"returnSearchedUnitsBySubjectId",value:function(){var e=this;this.SubjectMaterialsService.returnSearchedUnitsBySubjectId(this.subjectId).subscribe(function(i){e.units=i})}},{key:"returnSearchedLessonsByUnitId",value:function(e){var i=this;this.SubjectMaterialsService.returnSearchedLessonsByUnitId(e).subscribe(function(r){i.Lessons=r})}},{key:"onlyCodeValidators",value:function(){var e=this.FormCtrl.codePrice.value;0==e&&(this.FormCtrl.codePrice.reset(),this.FormCtrl.codePrice.clearValidators(),this.FormCtrl.materialPrice.setValidators([s.kI.required,j.D.minusNum])),1==e&&(this.FormCtrl.materialPrice.reset(),this.FormCtrl.materialPrice.clearValidators(),this.FormCtrl.codePrice.setValidators([s.kI.required,j.D.minusNum])),this.FormCtrl.materialPrice.updateValueAndValidity(),this.FormCtrl.codePrice.updateValueAndValidity()}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(I.gz),t.Y36(I.F0),t.Y36(s.qu),t.Y36(A._W),t.Y36(N),t.Y36(G.r),t.Y36(M.e),t.Y36(C.t2),t.Y36(D.I))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-material-main-data"]],decls:140,vars:121,consts:[[1,"row"],[1,"col-12"],[1,"content-header"],[1,"card"],["mat-raised-button","",1,"btn","btn-warning","bg-light-warning","float-right",3,"routerLink","queryParams"],["mat-align-tabs","start"],[3,"label"],[1,"form-container",3,"formGroup"],["formControlName","IsOnline",1,"row"],[1,"col-md-3","col-12"],[3,"value"],[1,"col-md-4","col-12"],["appearance","legacy"],["formControlName","teacherUserId"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"col-md-4","col-6"],["matInput","","type","text","formControlName","materialName"],["appearance","legacy",4,"ngIf"],["class","col-md-4 col-6",4,"ngIf"],["matInput","","formControlName","fromDate",3,"matDatepicker"],["matSuffix","",3,"for"],["fromDate",""],["matInput","","formControlName","toDate",3,"matDatepicker"],["toDate",""],["formControlName","onlyCode"],[3,"value","change"],["formControlName","CustomDiscountApplied"],["formControlName","CodeIsPurchasable"],[4,"ngIf"],["formControlName","selectedItemType",1,"row"],["class","col-md-6 col-12",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"col-12","mt-3"],[1,"col-md-2","col-12"],["type","button","mat-raised-button","",1,"btn","btn-danger",3,"click"],["hidden","","type","file","accept","image/*","id","file",3,"change"],["fileInput",""],[1,"col-md-6","col-12"],[1,"media"],["width","269","height","269","alt","avatar",1,"rounded","mr-3",3,"src"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],[3,"materialId"],[1,"text-danger"],["formControlName","studentGroupIDs","multiple",""],["matInput","","type","number","formControlName","num_views"],["matInput","","type","text","formControlName","address"],["matInput","","type","number","formControlName","materialPrice"],["matInput","","type","number","formControlName","codePrice"],["matInput","","type","number","formControlName","priceDiscount"],["formControlName","priceDiscountType"],["formControlName","unitId",3,"selectionChange"],["formControlName","lessonId"],["type","file",1,"form-control",3,"change"]],template:function(a,e){if(1&a){var i=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"mat-card",3),t.TgZ(8,"mat-card-content"),t.TgZ(9,"mat-card-title"),t._uU(10),t.ALo(11,"translate"),t.TgZ(12,"a",4),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.TgZ(15,"mat-tab-group",5),t.TgZ(16,"mat-tab",6),t.ALo(17,"translate"),t.TgZ(18,"form",7),t.TgZ(19,"div",0),t.TgZ(20,"div",1),t.TgZ(21,"mat-radio-group",8),t.TgZ(22,"div",9),t.TgZ(23,"mat-radio-button",10),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.qZA(),t.TgZ(26,"div",9),t.TgZ(27,"mat-radio-button",10),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"div",11),t.TgZ(31,"mat-form-field",12),t.TgZ(32,"mat-label"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"mat-select",13),t.TgZ(36,"mat-option"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.YNc(39,zt,2,2,"mat-option",14),t.qZA(),t.YNc(40,Ht,2,1,"mat-hint",15),t.qZA(),t.qZA(),t.TgZ(41,"div",16),t.TgZ(42,"mat-form-field",12),t.TgZ(43,"mat-label"),t._uU(44),t.ALo(45,"translate"),t.qZA(),t._UZ(46,"input",17),t.YNc(47,Kt,3,2,"mat-hint",15),t.qZA(),t.qZA(),t.TgZ(48,"div",16),t.YNc(49,ae,10,8,"mat-form-field",18),t.qZA(),t.YNc(50,le,7,4,"div",19),t.YNc(51,ce,7,4,"div",19),t.TgZ(52,"div",11),t.TgZ(53,"mat-form-field",12),t.TgZ(54,"mat-label"),t._uU(55),t.ALo(56,"translate"),t.qZA(),t._UZ(57,"input",20),t._UZ(58,"mat-datepicker-toggle",21),t._UZ(59,"mat-datepicker",null,22),t.YNc(61,pe,2,1,"mat-hint",15),t.qZA(),t.qZA(),t.TgZ(62,"div",11),t.TgZ(63,"mat-form-field",12),t.TgZ(64,"mat-label"),t._uU(65),t.ALo(66,"translate"),t.qZA(),t._UZ(67,"input",23),t._UZ(68,"mat-datepicker-toggle",21),t._UZ(69,"mat-datepicker",null,24),t.qZA(),t.qZA(),t.TgZ(71,"div",11),t.TgZ(72,"mat-radio-group",25),t.TgZ(73,"mat-radio-button",26),t.NdJ("change",function(){return e.onlyCodeValidators()}),t._uU(74),t.ALo(75,"translate"),t.qZA(),t.TgZ(76,"mat-radio-button",26),t.NdJ("change",function(){return e.onlyCodeValidators()}),t._uU(77),t.ALo(78,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(79,"div",11),t.TgZ(80,"mat-radio-group",27),t.TgZ(81,"mat-radio-button",10),t._uU(82),t.ALo(83,"translate"),t.qZA(),t.TgZ(84,"mat-radio-button",10),t._uU(85),t.ALo(86,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(87,"div",11),t.TgZ(88,"mat-radio-group",28),t.TgZ(89,"mat-radio-button",10),t._uU(90),t.ALo(91,"translate"),t.qZA(),t.TgZ(92,"mat-radio-button",10),t._uU(93),t.ALo(94,"translate"),t.qZA(),t.qZA(),t.qZA(),t.YNc(95,fe,7,4,"div",19),t.YNc(96,be,7,4,"div",19),t.YNc(97,Te,22,17,"ng-container",29),t.TgZ(98,"div",1),t.TgZ(99,"mat-radio-group",30),t.TgZ(100,"div",11),t.TgZ(101,"mat-radio-button",10),t._uU(102),t.ALo(103,"translate"),t.qZA(),t.qZA(),t.TgZ(104,"div",11),t.TgZ(105,"mat-radio-button",10),t._uU(106),t.ALo(107,"translate"),t.qZA(),t.qZA(),t.TgZ(108,"div",11),t.TgZ(109,"mat-radio-button",10),t._uU(110),t.ALo(111,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(112,Ie,10,7,"div",31),t.YNc(113,qe,10,7,"div",31),t.YNc(114,xe,5,3,"div",32),t.TgZ(115,"mat-card",33),t.TgZ(116,"mat-card-content",0),t.TgZ(117,"div",34),t.TgZ(118,"button",35),t.NdJ("click",function(){return t.CHM(i),t.MAs(122).click()}),t._uU(119),t.ALo(120,"translate"),t.qZA(),t.TgZ(121,"input",36,37),t.NdJ("change",function(c){return e.CoverPhoto(c)}),t.qZA(),t.qZA(),t.TgZ(123,"div",38),t.TgZ(124,"div",39),t._UZ(125,"img",40),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(126,"mat-card-actions",41),t.TgZ(127,"button",42),t.NdJ("click",function(){return e.addEditMaterial()}),t._uU(128),t.ALo(129,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(130,"mat-tab",6),t.ALo(131,"translate"),t._UZ(132,"app-add-material-parts",43),t.qZA(),t.TgZ(133,"mat-tab",6),t.ALo(134,"translate"),t._UZ(135,"app-add-material-files",43),t.qZA(),t.TgZ(136,"mat-tab",6),t.ALo(137,"translate"),t._UZ(138,"app-add-material-exam",43),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(139,"ngx-spinner")}if(2&a){var r=t.MAs(60),l=t.MAs(70);t.xp6(3),t.lnq(" ",t.lcZ(4,64,"Navbar.EducationalSubjects")," - ",t.lcZ(5,66,"labels.Materials")," - ",t.lcZ(6,68,"General.AddMaterial")," "),t.xp6(7),t.lnq(" ",t.lcZ(11,70,"General.AddMaterial")," : ",e.subject_ar_name," - ",e.materialName," "),t.xp6(2),t.MGl("routerLink","/dashboard/educational-setup/subjects/material-search/",e.subjectId,""),t.Q6J("queryParams",t.WLB(118,Se,e.functionId,e.parentId)),t.xp6(1),t.hij(" ",t.lcZ(14,72,"General.Back")," "),t.xp6(3),t.s9C("label",t.lcZ(17,74,"labels.MainData")),t.xp6(2),t.Q6J("formGroup",e.myForm),t.xp6(5),t.Q6J("value",1),t.xp6(1),t.hij(" ",t.lcZ(25,76,"labels.Video")," "),t.xp6(3),t.Q6J("value",2),t.xp6(1),t.hij(" ",t.lcZ(29,78,"labels.Offline")," "),t.xp6(5),t.hij("",t.lcZ(34,80,"labels.Teacher")," "),t.xp6(4),t.hij(" ",t.lcZ(38,82,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",e.Teachers),t.xp6(1),t.Q6J("ngIf",e.FormCtrl.teacherUserId.invalid&&(e.FormCtrl.teacherUserId.touched||e.submitted)),t.xp6(4),t.hij(" ",t.lcZ(45,84,"labels.Name")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrl.materialName.invalid&&(e.FormCtrl.materialName.touched||e.submitted)),t.xp6(2),t.Q6J("ngIf",2==e.FormCtrl.IsOnline.value),t.xp6(1),t.Q6J("ngIf",1==e.FormCtrl.IsOnline.value),t.xp6(1),t.Q6J("ngIf",2==e.FormCtrl.IsOnline.value),t.xp6(4),t.hij(" ",t.lcZ(56,86,"labels.FromDate"),""),t.xp6(2),t.Q6J("matDatepicker",r),t.xp6(1),t.Q6J("for",r),t.xp6(3),t.Q6J("ngIf",e.FormCtrl.fromDate.invalid&&(e.FormCtrl.fromDate.touched||e.submitted)),t.xp6(4),t.hij(" ",t.lcZ(66,88,"labels.ToDate"),""),t.xp6(2),t.Q6J("matDatepicker",l),t.xp6(1),t.Q6J("for",l),t.xp6(5),t.Q6J("value",!0),t.xp6(1),t.hij(" ",t.lcZ(75,90,"labels.onlyCode")," "),t.xp6(2),t.Q6J("value",!1),t.xp6(1),t.hij(" ",t.lcZ(78,92,"labels.CodeAndCredits")," "),t.xp6(4),t.Q6J("value",!0),t.xp6(1),t.hij(" ",t.lcZ(83,94,"labels.CustomDiscountApplied")," "),t.xp6(2),t.Q6J("value",!1),t.xp6(1),t.hij(" ",t.lcZ(86,96,"labels.CustomDiscountNotApplied")," "),t.xp6(4),t.Q6J("value",!0),t.xp6(1),t.hij(" ",t.lcZ(91,98,"labels.CodeIsPurchasable")," "),t.xp6(2),t.Q6J("value",!1),t.xp6(1),t.hij(" ",t.lcZ(94,100,"labels.CodeIsNotPurchasable")," "),t.xp6(2),t.Q6J("ngIf",0==e.FormCtrl.onlyCode.value),t.xp6(1),t.Q6J("ngIf",1==e.FormCtrl.onlyCode.value),t.xp6(1),t.Q6J("ngIf",0==e.FormCtrl.onlyCode.value),t.xp6(4),t.Q6J("value",1),t.xp6(1),t.hij(" ",t.lcZ(103,102,"labels.Subject")," "),t.xp6(3),t.Q6J("value",2),t.xp6(1),t.hij(" ",t.lcZ(107,104,"labels.Unit")," "),t.xp6(3),t.Q6J("value",3),t.xp6(1),t.hij(" ",t.lcZ(111,106,"labels.Lesson")," "),t.xp6(2),t.Q6J("ngIf",2==(null==e.FormCtrl.selectedItemType?null:e.FormCtrl.selectedItemType.value)||3==(null==e.FormCtrl.selectedItemType?null:e.FormCtrl.selectedItemType.value)),t.xp6(1),t.Q6J("ngIf",3==e.FormCtrl.selectedItemType.value),t.xp6(1),t.Q6J("ngIf",1==e.FormCtrl.IsOnline.value),t.xp6(5),t.hij(" ",t.lcZ(120,108,"subjects.CoverPhoto")," "),t.xp6(6),t.Q6J("src",e.coverPreview(),t.LSH),t.xp6(3),t.hij(" ",t.lcZ(129,110,"General.Save")," "),t.xp6(2),t.s9C("label",t.lcZ(131,112,"labels.MaterialParts")),t.xp6(2),t.Q6J("materialId",e.materialId),t.xp6(1),t.s9C("label",t.lcZ(134,114,"labels.MaterialFiles")),t.xp6(2),t.Q6J("materialId",e.materialId),t.xp6(1),t.s9C("label",t.lcZ(137,116,"labels.MaterialExams")),t.xp6(2),t.Q6J("materialId",e.materialId)}},directives:[f.a8,f.dn,f.n5,q.zs,I.yS,R.SP,R.uX,s._Y,s.JL,s.sg,P.VQ,s.JJ,s.u,P.U0,b.KE,b.hX,O.gD,V.ey,y.sg,y.O5,k.Nt,s.Fj,tt.hl,tt.nW,b.R9,tt.Mq,q.lW,f.hq,St,wt,Rt,C.Ro,b.bx,s.wV],pipes:[F.X$],styles:[".mat-radio-button[_ngcontent-%COMP%]{display:block}"]}),n}();function je(n,o){1&n&&(t.TgZ(0,"div",17),t.TgZ(1,"mat-radio-group",18),t.TgZ(2,"div",19),t.TgZ(3,"mat-radio-button",20),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.TgZ(6,"div",19),t.TgZ(7,"mat-radio-button",20),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Q6J("value",!0),t.xp6(1),t.hij(" ",t.lcZ(5,4,"labels.Attended")," "),t.xp6(3),t.Q6J("value",!1),t.xp6(1),t.hij(" ",t.lcZ(9,6,"labels.NotAttended")," "))}function Le(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){return t.CHM(a),t.oxw().resetForm()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Reset")," "))}function Fe(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){return t.CHM(a),t.oxw().searchAttendanceManual()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Search")," "))}function Ne(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){return t.CHM(a),t.oxw().updateAttendanceManual()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Save")," "))}function Me(n,o){if(1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-card",3),t.TgZ(3,"table",22),t.TgZ(4,"thead"),t.TgZ(5,"tr"),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"th"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"th"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"th"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"tbody"),t.TgZ(31,"tr"),t.TgZ(32,"td"),t._uU(33),t.qZA(),t.TgZ(34,"td"),t._uU(35),t.qZA(),t.TgZ(36,"td"),t._uU(37),t.qZA(),t.TgZ(38,"td"),t._uU(39),t.qZA(),t.TgZ(40,"td"),t._uU(41),t.qZA(),t.TgZ(42,"td"),t._uU(43),t.qZA(),t.TgZ(44,"td"),t._uU(45),t.qZA(),t.TgZ(46,"td"),t._uU(47),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){var a=t.oxw();t.xp6(7),t.hij(" ",t.lcZ(8,16,"labels.Name")," "),t.xp6(3),t.Oqu(t.lcZ(11,18,"labels.LectureName")),t.xp6(3),t.Oqu(t.lcZ(14,20,"labels.Group")),t.xp6(3),t.Oqu(t.lcZ(17,22,"labels.Attendance")),t.xp6(3),t.Oqu(t.lcZ(20,24,"labels.Exception")),t.xp6(3),t.Oqu(t.lcZ(23,26,"labels.refundBalance")),t.xp6(3),t.Oqu(t.lcZ(26,28,"Balance.Amount")),t.xp6(3),t.Oqu(t.lcZ(29,30,"labels.Date")),t.xp6(5),t.Oqu(a.studentSearched.username),t.xp6(2),t.Oqu(a.studentSearched.lectureName),t.xp6(2),t.Oqu(a.studentSearched.groupName),t.xp6(2),t.Oqu(a.studentSearched.didAttend),t.xp6(2),t.Oqu(a.studentSearched.isException),t.xp6(2),t.Oqu(a.studentSearched.didRefund),t.xp6(2),t.Oqu(a.studentSearched.amountRefunded),t.xp6(2),t.Oqu(a.studentSearched.dateRefunded)}}var ke=function(o){return{functionId:o}},we=function(){var n=function(){function o(a,e,i,r,l){var u=this;(0,U.Z)(this,o),this.fb=a,this.route=e,this.toastr=i,this.SubjectMaterialsService=r,this.spinner=l,this.studentSearched=null,this.route.queryParamMap.subscribe(function(c){u.subjectId=c.get("subjectId"),u.route.queryParamMap.subscribe(function(_){u.functionId=Number(_.get("functionId"))})}),this.route.paramMap.subscribe(function(c){u.lectureID=c.get("materialId")})}return(0,S.Z)(o,[{key:"ngOnInit",value:function(){this.myForm=this.fb.group({lectureID:[this.lectureID],studentName:[""],studentEmail:[""],studentMobile:[""],studentCode:[""],attendBool:[!0]})}},{key:"searchAttendanceManual",value:function(){var e=this;this.spinner.show(),this.SubjectMaterialsService.searchAttendanceManual(this.myForm.value).subscribe(function(i){var r;e.studentSearched=i.studentSearched,i.studentSearched||e.toastr.info("\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u064a \u0627\u0644\u0637\u0627\u0644\u0628"),e.myForm.controls.studentName.setValue(null===(r=i.studentSearched)||void 0===r?void 0:r.username),e.spinner.hide()})}},{key:"updateAttendanceManual",value:function(){var e=this;this.spinner.show(),this.SubjectMaterialsService.updateAttendanceManual(this.myForm.value).subscribe(function(i){console.log(i),1==i.returnValue?e.toastr.success(i.returnString):e.toastr.error(i.returnString),e.spinner.hide()})}},{key:"resetForm",value:function(){this.myForm.reset(),this.studentSearched=null}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(s.qu),t.Y36(I.gz),t.Y36(A._W),t.Y36(G.r),t.Y36(C.t2))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-manually-attendance"]],decls:50,vars:37,consts:[[1,"row"],[1,"col-12"],[1,"content-header"],[1,"example-card"],["mat-raised-button","",1,"btn","btn-warning","bg-light-warning","float-right",3,"routerLink","queryParams"],[1,"form-container",3,"formGroup"],[1,"row","f-w"],[1,"col-md-6","col-12"],["appearance","legacy"],["matInput","","type","text","formControlName","studentName"],["matInput","","type","text","formControlName","studentEmail"],["matInput","","type","text","formControlName","studentMobile"],["matInput","","type","text","formControlName","studentCode"],["class","col-md-8 col-6",4,"ngIf"],["align","end"],["mat-raised-button","","class","btn btn-primary",3,"click",4,"ngIf"],["class","row",4,"ngIf"],[1,"col-md-8","col-6"],["formControlName","attendBool",1,"row"],[1,"col-md-3","col-12"],[3,"value"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],[1,"table","table-striped","m-0"]],template:function(a,e){1&a&&(t._UZ(0,"ngx-spinner"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"div",2),t._uU(4),t.ALo(5,"translate"),t.ALo(6,"translate"),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",0),t.TgZ(9,"div",1),t.TgZ(10,"mat-card",3),t.TgZ(11,"mat-card-title"),t._uU(12),t.ALo(13,"translate"),t.TgZ(14,"a",4),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA(),t.TgZ(17,"mat-card-content"),t.TgZ(18,"form",5),t.TgZ(19,"div",6),t.TgZ(20,"div",7),t.TgZ(21,"mat-form-field",8),t.TgZ(22,"mat-label"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t._UZ(25,"input",9),t.qZA(),t.qZA(),t.TgZ(26,"div",7),t.TgZ(27,"mat-form-field",8),t.TgZ(28,"mat-label"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t._UZ(31,"input",10),t.qZA(),t.qZA(),t.TgZ(32,"div",7),t.TgZ(33,"mat-form-field",8),t.TgZ(34,"mat-label"),t._uU(35),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"input",11),t.qZA(),t.qZA(),t.TgZ(38,"div",7),t.TgZ(39,"mat-form-field",8),t.TgZ(40,"mat-label"),t._uU(41),t.ALo(42,"translate"),t.qZA(),t._UZ(43,"input",12),t.qZA(),t.qZA(),t.YNc(44,je,10,8,"div",13),t.qZA(),t.qZA(),t.qZA(),t.TgZ(45,"mat-card-actions",14),t.YNc(46,Le,3,3,"button",15),t.YNc(47,Fe,3,3,"button",15),t.YNc(48,Ne,3,3,"button",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(49,Me,48,32,"div",16)),2&a&&(t.xp6(4),t.lnq(" ",t.lcZ(5,17,"Navbar.EducationalSubjects")," - ",t.lcZ(6,19,"labels.Materials")," - ",t.lcZ(7,21,"labels.updateAttendanceManually")," "),t.xp6(8),t.hij(" ",t.lcZ(13,23,"labels.updateAttendanceManually")," "),t.xp6(2),t.MGl("routerLink","/dashboard/educational-setup/subjects/material-search/",e.subjectId,""),t.Q6J("queryParams",t.VKq(35,ke,e.functionId)),t.xp6(1),t.hij(" ",t.lcZ(16,25,"General.Back")," "),t.xp6(3),t.Q6J("formGroup",e.myForm),t.xp6(5),t.Oqu(t.lcZ(24,27,"labels.Name")),t.xp6(6),t.Oqu(t.lcZ(30,29,"labels.Email")),t.xp6(6),t.Oqu(t.lcZ(36,31,"labels.Mobile")),t.xp6(6),t.Oqu(t.lcZ(42,33,"labels.Code")),t.xp6(3),t.Q6J("ngIf",null!=e.studentSearched),t.xp6(2),t.Q6J("ngIf",null!=e.studentSearched),t.xp6(1),t.Q6J("ngIf",null==e.studentSearched),t.xp6(1),t.Q6J("ngIf",null!=e.studentSearched),t.xp6(1),t.Q6J("ngIf",null!=e.studentSearched))},directives:[C.Ro,f.a8,f.n5,q.zs,I.yS,f.dn,s._Y,s.JL,s.sg,b.KE,b.hX,k.Nt,s.Fj,s.JJ,s.u,y.O5,f.hq,P.VQ,P.U0,q.lW],pipes:[F.X$],styles:[""]}),n}(),De=h(7762),Q=h(6087),w=h(4847),Z=h(2075),Y=h(8198);function Ye(n,o){if(1&n&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.teacherUserId),t.xp6(1),t.hij(" ",a.teacher_ar_name," ")}}function Ee(n,o){if(1&n&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.unit_ar_name," ")}}function Je(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"div",36),t.TgZ(1,"mat-form-field",7),t.TgZ(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"mat-select",37),t.NdJ("selectionChange",function(){t.CHM(a);var r=t.oxw();return r.returnSearchedLessonsByUnitId(null==r.FomCtrls.unitId?null:r.FomCtrls.unitId.value)}),t.TgZ(6,"mat-option"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.YNc(9,Ee,2,2,"mat-option",9),t.qZA(),t.qZA(),t.qZA()}if(2&n){var e=t.oxw();t.xp6(3),t.hij("",t.lcZ(4,3,"labels.Unit")," "),t.xp6(4),t.hij(" ",t.lcZ(8,5,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",e.units)}}function Pe(n,o){if(1&n&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.lesson_ar_name," ")}}function Qe(n,o){if(1&n&&(t.TgZ(0,"div",36),t.TgZ(1,"mat-form-field",7),t.TgZ(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"mat-select",38),t.TgZ(6,"mat-option"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.YNc(9,Pe,2,2,"mat-option",9),t.qZA(),t.qZA(),t.qZA()),2&n){var a=t.oxw();t.xp6(3),t.hij("",t.lcZ(4,3,"labels.Lesson")," "),t.xp6(4),t.hij(" ",t.lcZ(8,5,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",a.Lessons)}}function Ge(n,o){1&n&&(t.TgZ(0,"th",39),t._uU(1,"#"),t.qZA())}function Be(n,o){if(1&n&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&n){var a=o.index;t.xp6(1),t.hij(" ",a+1," ")}}function Oe(n,o){1&n&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Name")," "))}function Ve(n,o){if(1&n&&(t.TgZ(0,"td",40),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.hij(" ",a.material_name," ")}}function Re(n,o){1&n&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Price")," "))}function ze(n,o){if(1&n&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.MGl("id","Material-",a.id,""),t.xp6(1),t.hij(" ",a.price," ")}}function $e(n,o){1&n&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Type")," "))}function He(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"i",43),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Video")," "))}function We(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"i",44),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Malzem")," "))}function Xe(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Offline")," "))}function Ke(n,o){if(1&n&&(t.TgZ(0,"td",40),t.YNc(1,He,4,3,"span",42),t.YNc(2,We,4,3,"span",42),t.YNc(3,Xe,3,3,"span",42),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Q6J("ngIf",1==(null==a?null:a.attach_type_id)),t.xp6(1),t.Q6J("ngIf",2==(null==a?null:a.attach_type_id)),t.xp6(1),t.Q6J("ngIf",3==(null==a?null:a.attach_type_id))}}function tn(n,o){1&n&&(t.TgZ(0,"th",39),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.ThePublish")," "))}function en(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"i",45),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Published")," "))}function nn(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.UnPublished")," "))}function an(n,o){if(1&n&&(t.TgZ(0,"td",40),t.YNc(1,en,4,3,"span",42),t.YNc(2,nn,3,3,"span",42),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Q6J("ngIf",null==a?null:a.IsPublish),t.xp6(1),t.Q6J("ngIf",!(null!=a&&a.IsPublish))}}function on(n,o){1&n&&(t.TgZ(0,"th",39),t._uU(1,"actions"),t.qZA())}function rn(n,o){1&n&&(t.TgZ(0,"span"),t._UZ(1,"i",56),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"labels.Publish")," "))}function ln(n,o){1&n&&(t.TgZ(0,"span"),t._UZ(1,"i",57),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"labels.Unpublish")," "))}function sn(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"a",55),t.NdJ("click",function(){t.CHM(a);var r=t.oxw(3).$implicit;return t.oxw().publishMaterial(r.id)}),t.YNc(1,rn,4,3,"span",42),t.YNc(2,ln,4,3,"span",42),t.qZA()}if(2&n){var e=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",!e.IsPublish),t.xp6(1),t.Q6J("ngIf",e.IsPublish)}}var un=function(o,a,e,i){return{subjectId:o,materialId:a,functionId:e,parentId:i}};function dn(n,o){if(1&n&&(t.TgZ(0,"a",58),t._UZ(1,"i",59),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n){var a=t.oxw(3).$implicit,e=t.oxw();t.Q6J("queryParams",t.l5B(4,un,e.subjectId,null==a?null:a.id,e.functionId,e.parentId)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"General.Edit")," ")}}var cn=function(o,a){return{subjectId:o,functionId:a}};function mn(n,o){if(1&n&&(t.TgZ(0,"a",60),t._UZ(1,"i",56),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n){var a=t.oxw(3).$implicit,e=t.oxw();t.MGl("routerLink","/dashboard/educational-setup/subjects/upload-attendance/",a.id,""),t.Q6J("queryParams",t.WLB(5,cn,e.subjectId,e.functionId)),t.xp6(2),t.hij(" ",t.lcZ(3,3,"labels.UploadAttendance")," ")}}function pn(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"a",55),t.NdJ("click",function(){t.CHM(a);var i=t.oxw(3).$implicit;return t.oxw().dawnloadLectureAttendees(i.id)}),t._UZ(1,"i",57),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"labels.DownloadAttendance")," "))}var at=function(o,a){return{functionId:o,subjectId:a}};function _n(n,o){if(1&n&&(t.TgZ(0,"a",60),t._UZ(1,"i",59),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n){var a=t.oxw(3).$implicit,e=t.oxw();t.MGl("routerLink","/dashboard/educational-setup/subjects/manually-attendance/",a.id,""),t.Q6J("queryParams",t.WLB(5,at,e.functionId,e.subjectId)),t.xp6(2),t.hij(" ",t.lcZ(3,3,"labels.updateAttendanceManually")," ")}}function hn(n,o){if(1&n&&(t.TgZ(0,"a",60),t._UZ(1,"i",61),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n){var a=t.oxw(3).$implicit,e=t.oxw();t.MGl("routerLink","/dashboard/educational-setup/subjects/material-points/",a.id,""),t.Q6J("queryParams",t.WLB(5,at,e.functionId,e.subjectId)),t.xp6(2),t.hij(" ",t.lcZ(3,3,"labels.addPoints")," ")}}function gn(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"a",55),t.NdJ("click",function(){t.CHM(a);var i=t.oxw(3).$implicit;return t.oxw().openDeleateDialog(i)}),t._UZ(1,"i",62),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"General.Delete")," "))}function fn(n,o){if(1&n&&(t.ynx(0),t.YNc(1,sn,3,2,"a",52),t.YNc(2,dn,4,9,"a",53),t.YNc(3,mn,4,8,"a",54),t.YNc(4,pn,4,3,"a",52),t.YNc(5,_n,4,8,"a",54),t.YNc(6,hn,4,8,"a",54),t.YNc(7,gn,4,3,"a",52),t.BQk()),2&n){var a=o.$implicit,e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf","publishMaterial"===a.functionName),t.xp6(1),t.Q6J("ngIf","EditMaterial"===a.functionName),t.xp6(1),t.Q6J("ngIf","uploadAttendance"===a.functionName&&!e.IsOnline),t.xp6(1),t.Q6J("ngIf","DownloadAttendance"===a.functionName&&!e.IsOnline),t.xp6(1),t.Q6J("ngIf","updateAttendanceManually"===a.functionName&&!e.IsOnline),t.xp6(1),t.Q6J("ngIf","addMaterialPoints"===a.functionName),t.xp6(1),t.Q6J("ngIf","DeleteMaterial"===a.functionName)}}function Zn(n,o){if(1&n&&(t.TgZ(0,"div",50),t.YNc(1,fn,8,7,"ng-container",51),t.qZA()),2&n){var a=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",a.rowFunctions)}}function vn(n,o){if(1&n&&(t.TgZ(0,"td",40),t.TgZ(1,"div",46),t.TgZ(2,"button",47),t._uU(3," actions "),t._UZ(4,"span",48),t.qZA(),t.YNc(5,Zn,2,1,"div",49),t.qZA(),t.qZA()),2&n){var a=t.oxw();t.xp6(5),t.Q6J("ngIf",a.rowFunctions.length>0)}}function An(n,o){1&n&&t._UZ(0,"tr",63)}function bn(n,o){if(1&n&&t._UZ(0,"tr",64),2&n){var a=o.$implicit;t.ekj("bg-light-info",!(null!=a&&a.IsPublish))}}function Tn(n,o){if(1&n&&(t.TgZ(0,"tr",65),t.TgZ(1,"td",66),t._uU(2),t.qZA(),t.qZA()),2&n){t.oxw();var a=t.MAs(75);t.xp6(2),t.hij(' No data matching the filter "',a.value,'" ')}}var Cn=function(o,a,e){return{subjectId:o,functionId:a,parentId:e}},In=function(o){return{functionId:o}},yn=function(){return[5,10,20]},qn=function(){var n=function(){function o(a,e,i,r,l,u,c,_){var d=this;(0,U.Z)(this,o),this.route=a,this.fb=e,this.toastr=i,this.SubjectsService=r,this.SubjectMaterialsService=l,this.authserv=u,this.spinner=c,this.dialog=_,this.checked=1,this.updatePublish=!1,this.submitted=!1,this.displayedColumns=["#","lecName","price","type","publish","actions"],this.route.paramMap.subscribe(function(g){d.subjectId=g.get("subjectId")}),a.queryParamMap.subscribe(function(g){d.functionId=Number(g.get("functionId")),d.parentId=Number(g.get("parentId")),d.functionId&&d.authserv.getUserRowFunctions(d.functionId).subscribe(function(v){v&&(d.rowFunctions=v)})})}return(0,S.Z)(o,[{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.branchId=this.authserv.getBranchId(),this.myForm=this.fb.group({searchedTeacherId:["",s.kI.required],searchedItemType:[1,s.kI.required],IsOnline:[!0,s.kI.required],subjectId:[this.subjectId],unitId:[""],lessonId:[""]}),this.returnSearchedUnitsBySubjectId(),this.getSubjectByID(this.subjectId),this.getTeacherByEduCompId()}},{key:"LoadAllMaterials",value:function(){var e,i={p:1,searchedItemId:null,searchedItemType:null,searchedTeacherId:null===(e=this.Teachers[0])||void 0===e?void 0:e.teacherUserId,IsOnline:!0,subjectId:this.subjectId};this.SearchForMaterial(i)}},{key:"FomCtrls",get:function(){return this.myForm.controls}},{key:"ngAfterViewInit",value:function(){var e=this;this.authserv.EduCompId.subscribe(function(i){var r;e.EduCompId=i.EduCompId,null===(r=e.FomCtrls)||void 0===r||r.select_Education_Component.setValue(i.EduCompId),e.getTeacherByEduCompId()}),this.authserv.branchId.subscribe(function(i){e.branchId=i.branchId}),this.dataSource&&(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)}},{key:"applyFilter",value:function(e){this.dataSource.filter=e.target.value.trim().toLowerCase()}},{key:"searcheMaterial",value:function(){var e,i,r,l,u,c,_,d,g,v,T,E,z,nt=null===(i=null===(e=this.FomCtrls)||void 0===e?void 0:e.searchedItemType)||void 0===i?void 0:i.value;if(1==nt&&(z=this.subjectId),2==nt&&(z=null===(l=null===(r=this.FomCtrls)||void 0===r?void 0:r.unitId)||void 0===l?void 0:l.value),3==nt&&(z=null===(c=null===(u=this.FomCtrls)||void 0===u?void 0:u.lessonId)||void 0===c?void 0:c.value),null!=z&&""!=z&&""!=(null===(_=this.FomCtrls)||void 0===_?void 0:_.searchedTeacherId.value)){if(this.myForm.valid){this.spinner.show();var Yo={p:1,searchedItemId:z,searchedItemType:null===(g=null===(d=this.FomCtrls)||void 0===d?void 0:d.searchedItemType)||void 0===g?void 0:g.value,searchedTeacherId:null===(v=this.FomCtrls)||void 0===v?void 0:v.searchedTeacherId.value,IsOnline:null===(E=null===(T=this.FomCtrls)||void 0===T?void 0:T.IsOnline)||void 0===E?void 0:E.value,subjectId:this.subjectId};this.SearchForMaterial(Yo)}}else this.toastr.error("\u062a\u0623\u0643\u062f \u0645\u0646 \u0625\u062f\u062e\u0627\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0635\u062d\u064a\u062d\u0629","\u062e\u0637\u0623")}},{key:"SearchForMaterial",value:function(e){var i=this;this.SubjectMaterialsService.searcheMaterial(e).subscribe(function(r){i.materialsList=r,i.dataSource=new Z.by(r),i.spinner.hide()})}},{key:"deleteMaterial",value:function(e){var i=this;this.spinner.show(),this.SubjectMaterialsService.deleteMaterial(e.id).subscribe(function(r){if(1==r.returnValue){var l=i.dataSource.data.findIndex(function(u){return u===e});i.dataSource.data.splice(l,1),i.dataSource.paginator=i.paginator,i.toastr.success("\u062a\u0645 \u0627\u0644\u062d\u0630\u0641")}0==r.returnValue&&i.toastr.error(r.errorMsg,"Error"),i.spinner.hide()})}},{key:"openDeleateDialog",value:function(e){var i=this;this.dialog.open(J.F,{data:{msg:e.material_name}}).afterClosed().subscribe(function(r){r&&i.deleteMaterial(e)})}},{key:"publishMaterial",value:function(e){var i=this;this.spinner.show(),this.SubjectMaterialsService.publishMaterial(e).subscribe(function(r){if(1==r.returnValue){var u,l=(0,De.Z)(i.materialsList);try{for(l.s();!(u=l.n()).done;){var c=u.value;if(c.id===e){c.IsPublish=!c.IsPublish;break}}}catch(_){l.e(_)}finally{l.f()}}else 0==r.returnValue&&i.toastr.error(r.errorMsg);i.spinner.hide()})}},{key:"showVideoByMaterialId",value:function(e){var i=this;this.SubjectMaterialsService.showVideoByMaterialId(e).subscribe(function(r){1==r.returnValue&&(i.showMaterial=r.material.attach_path)})}},{key:"dawnloadLectureAttendees",value:function(e){var i=this;this.spinner.show(),this.SubjectMaterialsService.dawnloadLectureAttendees(e).subscribe(function(r){1==r.returnValue&&window.open(m.N.apiURL.replace("/api/","")+r.path,"_blank"),i.spinner.hide()})}},{key:"getTeacherByEduCompId",value:function(){var e=this;this.spinner.show(),this.SubjectsService.getTeacherBySubjectAndEduCompId(this.EduCompId,this.subjectId).subscribe(function(i){var r;1==i.retunValue&&(e.Teachers=i.teachers,e.FomCtrls.searchedTeacherId.setValue(null===(r=i.teachers[0])||void 0===r?void 0:r.teacherUserId),e.LoadAllMaterials()),e.spinner.hide()})}},{key:"returnSearchedUnitsBySubjectId",value:function(){var e=this;this.SubjectMaterialsService.returnSearchedUnitsBySubjectId(this.subjectId).subscribe(function(i){e.units=i})}},{key:"returnSearchedLessonsByUnitId",value:function(e){var i=this;this.SubjectMaterialsService.returnSearchedLessonsByUnitId(e).subscribe(function(r){i.Lessons=r})}},{key:"getSubjectByID",value:function(e){var i=this;this.SubjectsService.getSubjectByID(e).subscribe(function(r){null!=r.subject_id&&(i.subject_ar_name=r.subject_ar_name)})}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(I.gz),t.Y36(s.qu),t.Y36(A._W),t.Y36(N),t.Y36(G.r),t.Y36(M.e),t.Y36(C.t2),t.Y36(x.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-material-search"]],viewQuery:function(a,e){var i;1&a&&(t.Gf(Q.NW,5),t.Gf(w.YE,5)),2&a&&(t.iGM(i=t.CRH())&&(e.paginator=i.first),t.iGM(i=t.CRH())&&(e.sort=i.first))},decls:100,vars:67,consts:[[1,"row"],[1,"col-12"],[1,"content-header"],["mat-raised-button","","routerLink","/dashboard/educational-setup/subjects/add-material",1,"btn","btn-primary","bg-light-primary","float-right",3,"queryParams"],["mat-raised-button","","routerLink","/dashboard/educational-setup/subjects",1,"btn","btn-warning","bg-light-warning","float-right",3,"queryParams"],[1,"form-container",3,"formGroup"],[1,"col-md-4","col-12"],["appearance","legacy"],["formControlName","searchedTeacherId"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-8","col-6"],["formControlName","searchedItemType",1,"row"],[3,"value"],["formControlName","IsOnline",1,"row"],[3,"value","checked"],["class","col-md-6 col-12",4,"ngIf"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lecName"],["matColumnDef","price"],["mat-cell","",3,"id",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","publish"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"bg-light-info",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize"],[1,"col-md-6","col-12"],["formControlName","unitId",3,"selectionChange"],["formControlName","lessonId"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-cell","",3,"id"],[4,"ngIf"],[1,"ft-play-circle","danger","ml-1"],[1,"fa-book","info","ml-1"],["aria-hidden","true",1,"fa","fa-check-circle","success","ml-1"],["ngbDropdown","",1,"dropdown","btn-group","mr-1","mb-1"],["mat-raised-button","","type","button","ngbDropdownToggle","",1,"btn","btn-primary","bg-light-primary","dropdown-toggle"],[1,"caret"],["ngbDropdownMenu","","class","dropdown-menu","role","menu",4,"ngIf"],["ngbDropdownMenu","","role","menu",1,"dropdown-menu"],[4,"ngFor","ngForOf"],["class","dropdown-item",3,"click",4,"ngIf"],["routerLink","/dashboard/educational-setup/subjects/add-material","class","dropdown-item",3,"queryParams",4,"ngIf"],["class","dropdown-item",3,"routerLink","queryParams",4,"ngIf"],[1,"dropdown-item",3,"click"],[1,"ft-upload","font-medium-3","mr-2"],[1,"ft-download","font-medium-3","mr-2"],["routerLink","/dashboard/educational-setup/subjects/add-material",1,"dropdown-item",3,"queryParams"],[1,"ft-edit-2","font-medium-3","mr-2"],[1,"dropdown-item",3,"routerLink","queryParams"],[1,"icon-present","font-medium-3","mr-2"],[1,"ft-trash","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(a,e){1&a&&(t._UZ(0,"ngx-spinner"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"div",2),t._uU(4),t.ALo(5,"translate"),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",0),t.TgZ(8,"div",1),t.TgZ(9,"mat-card"),t.TgZ(10,"mat-card-title"),t._uU(11),t.ALo(12,"translate"),t.TgZ(13,"a",3),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"a",4),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.qZA(),t.TgZ(19,"mat-card-content"),t.TgZ(20,"div",0),t.TgZ(21,"div",1),t.TgZ(22,"form",5),t.TgZ(23,"div",0),t.TgZ(24,"div",6),t.TgZ(25,"mat-form-field",7),t.TgZ(26,"mat-label"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"mat-select",8),t.TgZ(30,"mat-option"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.YNc(33,Ye,2,2,"mat-option",9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",10),t.TgZ(35,"mat-radio-group",11),t.TgZ(36,"div",6),t.TgZ(37,"mat-radio-button",12),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.qZA(),t.TgZ(40,"div",6),t.TgZ(41,"mat-radio-button",12),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.qZA(),t.TgZ(44,"div",6),t.TgZ(45,"mat-radio-button",12),t._uU(46),t.ALo(47,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(48,"div",10),t.TgZ(49,"mat-radio-group",13),t.TgZ(50,"div",6),t.TgZ(51,"mat-radio-button",14),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.qZA(),t.TgZ(54,"div",6),t.TgZ(55,"mat-radio-button",12),t._uU(56),t.ALo(57,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(58,Je,10,7,"div",15),t.YNc(59,Qe,10,7,"div",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(60,"mat-card-actions",16),t.TgZ(61,"button",17),t.NdJ("click",function(){return e.searcheMaterial()}),t._uU(62),t.ALo(63,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(64,"div",0),t.TgZ(65,"div",1),t.TgZ(66,"mat-card"),t.TgZ(67,"mat-card-title"),t._uU(68),t.ALo(69,"translate"),t.qZA(),t.TgZ(70,"mat-card-content"),t.TgZ(71,"mat-form-field",18),t.TgZ(72,"mat-label"),t._uU(73,"Filter"),t.qZA(),t.TgZ(74,"input",19,20),t.NdJ("keyup",function(r){return e.applyFilter(r)}),t.qZA(),t.qZA(),t.TgZ(76,"div",21),t.TgZ(77,"table",22),t.ynx(78,23),t.YNc(79,Ge,2,0,"th",24),t.YNc(80,Be,2,1,"td",25),t.BQk(),t.ynx(81,26),t.YNc(82,Oe,3,3,"th",24),t.YNc(83,Ve,2,1,"td",25),t.BQk(),t.ynx(84,27),t.YNc(85,Re,3,3,"th",24),t.YNc(86,ze,2,2,"td",28),t.BQk(),t.ynx(87,29),t.YNc(88,$e,3,3,"th",24),t.YNc(89,Ke,4,3,"td",25),t.BQk(),t.ynx(90,30),t.YNc(91,tn,3,3,"th",24),t.YNc(92,an,3,2,"td",25),t.BQk(),t.ynx(93,31),t.YNc(94,on,2,0,"th",24),t.YNc(95,vn,6,1,"td",25),t.BQk(),t.YNc(96,An,1,0,"tr",32),t.YNc(97,bn,1,2,"tr",33),t.YNc(98,Tn,3,1,"tr",34),t.qZA(),t._UZ(99,"mat-paginator",35),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(4),t.AsE(" ",t.lcZ(5,32,"Navbar.EducationalSubjects")," - ",t.lcZ(6,34,"labels.Materials")," "),t.xp6(7),t.hij(" ",t.lcZ(12,36,"General.Search")," "),t.xp6(2),t.Q6J("queryParams",t.kEZ(60,Cn,e.subjectId,e.functionId,e.parentId)),t.xp6(1),t.hij(" ",t.lcZ(15,38,"General.AddMaterial")," "),t.xp6(2),t.Q6J("queryParams",t.VKq(64,In,e.parentId)),t.xp6(1),t.hij(" ",t.lcZ(18,40,"General.Back")," "),t.xp6(5),t.Q6J("formGroup",e.myForm),t.xp6(5),t.hij("",t.lcZ(28,42,"labels.Teacher")," "),t.xp6(4),t.hij(" ",t.lcZ(32,44,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",e.Teachers),t.xp6(4),t.Q6J("value",1),t.xp6(1),t.hij(" ",t.lcZ(39,46,"labels.Subject")," "),t.xp6(3),t.Q6J("value",2),t.xp6(1),t.hij(" ",t.lcZ(43,48,"labels.Unit")," "),t.xp6(3),t.Q6J("value",3),t.xp6(1),t.hij(" ",t.lcZ(47,50,"labels.Lesson")," "),t.xp6(5),t.Q6J("value",!0)("checked",!0),t.xp6(1),t.hij(" ",t.lcZ(53,52,"labels.IsOnline")," "),t.xp6(3),t.Q6J("value",!1),t.xp6(1),t.hij(" ",t.lcZ(57,54,"labels.IsOffline")," "),t.xp6(2),t.Q6J("ngIf",2==(null==e.FomCtrls.searchedItemType?null:e.FomCtrls.searchedItemType.value)||3==(null==e.FomCtrls.searchedItemType?null:e.FomCtrls.searchedItemType.value)),t.xp6(1),t.Q6J("ngIf",3==e.FomCtrls.searchedItemType.value),t.xp6(3),t.hij(" ",t.lcZ(63,56,"General.Search")," "),t.xp6(6),t.hij(" ",t.lcZ(69,58,"Material.Subjects")," "),t.xp6(9),t.Q6J("dataSource",e.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(66,yn))("length",e.totalItems)("pageSize",10))},directives:[C.Ro,f.a8,f.n5,q.zs,I.yS,f.dn,s._Y,s.JL,s.sg,b.KE,b.hX,O.gD,s.JJ,s.u,V.ey,y.sg,P.VQ,P.U0,y.O5,f.hq,q.lW,k.Nt,Z.BZ,w.YE,Z.w1,Z.fO,Z.Dz,Z.as,Z.nj,Z.Ee,Q.NW,Z.ge,w.nU,Z.ev,Y.jt,Y.iD,Y.Vi,Z.XQ,Z.Gk],pipes:[F.X$],styles:[""]}),n}(),W=h(5086),it=h(6471);function xn(n,o){if(1&n&&(t.TgZ(0,"mat-option",29),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.country_id),t.xp6(1),t.hij(" ",a.country_ar_name," ")}}function Sn(n,o){if(1&n&&(t.TgZ(0,"mat-option",29),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.stage_ar_name," ")}}function Un(n,o){if(1&n&&(t.TgZ(0,"mat-option",29),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.Educational_year_ar_name," ")}}function jn(n,o){1&n&&(t.TgZ(0,"th",30),t._uU(1,"#"),t.qZA())}function Ln(n,o){if(1&n&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&n){var a=o.index;t.xp6(1),t.Oqu(a+1)}}function Fn(n,o){1&n&&(t.TgZ(0,"th",30),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Navbar.EducationalStage")," "))}function Nn(n,o){if(1&n&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(a.stage_name)}}function Mn(n,o){1&n&&(t.TgZ(0,"th",30),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.EducationalYear")," "))}function kn(n,o){if(1&n&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(a.educational_year)}}function wn(n,o){1&n&&(t.TgZ(0,"th",30),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.SubjectName")," "))}function Dn(n,o){if(1&n&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(a.subject_ar_name)}}function Yn(n,o){1&n&&(t.TgZ(0,"th",30),t._uU(1,"actions"),t.qZA())}var En=function(o,a){return{functionId:o,parentId:a}};function Jn(n,o){if(1&n&&(t.TgZ(0,"a",40),t._UZ(1,"i",41),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n){var a=t.oxw().$implicit,e=t.oxw(2).$implicit,i=t.oxw();t.MGl("routerLink","/dashboard/educational-setup/subjects/material-search/",null==e?null:e.subject_id,""),t.Q6J("queryParams",t.WLB(5,En,null==a?null:a.Id,i.functionId)),t.xp6(2),t.hij(" ",t.lcZ(3,3,"labels.Materials")," ")}}var Pn=function(o){return{functionId:o}};function Qn(n,o){if(1&n&&(t.TgZ(0,"a",40),t._UZ(1,"i",42),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n){var a=t.oxw(3).$implicit,e=t.oxw();t.MGl("routerLink","/dashboard/educational-setup/subject-structure/",null==a?null:a.subject_id,""),t.Q6J("queryParams",t.VKq(5,Pn,e.functionId)),t.xp6(2),t.hij(" ",t.lcZ(3,3,"labels.SubjectStructure")," ")}}function Gn(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"a",43),t.NdJ("click",function(){t.CHM(a);var i=t.oxw(3).$implicit;return t.oxw().openDeleateDialog(i)}),t._UZ(1,"i",44),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"General.Delete")," "))}function Bn(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Jn,4,8,"a",38),t.YNc(2,Qn,4,7,"a",38),t.YNc(3,Gn,4,3,"a",39),t.BQk()),2&n){var a=o.$implicit;t.xp6(1),t.Q6J("ngIf","Materials"===a.functionName),t.xp6(1),t.Q6J("ngIf","SubjectStructure"===a.functionName),t.xp6(1),t.Q6J("ngIf","Delete"===a.functionName)}}function On(n,o){if(1&n&&(t.TgZ(0,"div",33),t.TgZ(1,"button",34),t._uU(2," actions "),t._UZ(3,"span",35),t.qZA(),t.TgZ(4,"div",36),t.YNc(5,Bn,4,3,"ng-container",37),t.qZA(),t.qZA()),2&n){var a=t.oxw(2);t.xp6(5),t.Q6J("ngForOf",a.rowFunctions)}}function Vn(n,o){if(1&n&&(t.TgZ(0,"td",31),t.YNc(1,On,6,1,"div",32),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.rowFunctions.length>0)}}function Rn(n,o){1&n&&t._UZ(0,"tr",45)}function zn(n,o){1&n&&t._UZ(0,"tr",46)}function $n(n,o){if(1&n&&(t.TgZ(0,"tr",47),t.TgZ(1,"td",48),t._uU(2),t.qZA(),t.qZA()),2&n){t.oxw();var a=t.MAs(62);t.xp6(2),t.hij(' No data matching the filter "',a.value,'" ')}}var Hn=function(){return[10]},Wn=function(){var n=function(){function o(a,e,i,r,l,u,c,_,d){var g=this;(0,U.Z)(this,o),this.fb=a,this.authserv=e,this.SubjectsService=i,this.generlServ=r,this.eduServ=l,this.toaster=u,this.spinner=c,this.route=_,this.dialog=d,this.subjects=[],this.countriesList=[],this.stagesList=[],this.Years=[],this.submitted=!1,this.displayedColumns=["#","stage","year","subject","actions"],_.queryParamMap.subscribe(function(v){g.functionId=Number(v.get("functionId")),g.functionId&&g.authserv.getUserRowFunctions(g.functionId).subscribe(function(T){T&&(g.rowFunctions=T)})})}return(0,S.Z)(o,[{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.branchId=this.authserv.getBranchId(),this.myForm=this.fb.group({select_Education_Component:[this.EduCompId,s.kI.required],countryID:[null],stageID:[null],eduYearID:[null],page:[1]}),this.getAllCountriesList(),this.getSubjects(1)}},{key:"FomCtrls",get:function(){return this.myForm.controls}},{key:"ngAfterViewInit",value:function(){var e=this;this.authserv.EduCompId.subscribe(function(i){var r;e.EduCompId=i.EduCompId,null===(r=e.FomCtrls)||void 0===r||r.select_Education_Component.setValue(i.EduCompId),e.getSubjects(1)}),this.authserv.branchId.subscribe(function(i){e.branchId=i.branchId}),this.dataSource&&(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)}},{key:"applyFilter",value:function(e){this.dataSource.filter=e.target.value.trim().toLowerCase()}},{key:"getSubjects",value:function(e){var r,i=this;"null"!=(null===(r=this.FomCtrls)||void 0===r?void 0:r.select_Education_Component.value)?this.myForm.valid&&(this.spinner.show(),this.FomCtrls.page.setValue(e),this.SubjectsService.getSubjects(this.myForm.value).subscribe(function(l){i.dataSource=new Z.by(l.subjects),i.totalItems=l.TotalItemCount,i.spinner.hide()})):this.toaster.warning("Please Choose Center!")}},{key:"openDeleateDialog",value:function(e){var i=this;this.dialog.open(J.F,{data:{msg:e.subject_ar_name}}).afterClosed().subscribe(function(r){r&&i.deleteSubject(e)})}},{key:"deleteSubject",value:function(e){var i=this;this.spinner.show(),this.SubjectsService.deleteSubject(e.subject_id).subscribe(function(r){if(1==r.returnValue){var l=i.dataSource.data.indexOf(e);i.dataSource.data.splice(l,1),i.toaster.success("\u062a\u0645 \u0627\u0644\u062d\u0630\u0641"),i.spinner.hide()}})}},{key:"getAllCountriesList",value:function(){var e=this;this.generlServ.getAllCountriesList().subscribe(function(i){e.countriesList=i})}},{key:"getEducationalStageByCountryID",value:function(e){var i=this;""!=e&&this.eduServ.getEducationalStageByCountryID(e).subscribe(function(r){i.stagesList=r.eduYearsList})}},{key:"getYearbyStageID",value:function(e){var i=this;""!=e&&this.eduServ.getYearbyStageID(e).subscribe(function(r){i.Years=r.eduYearsList})}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(s.qu),t.Y36(M.e),t.Y36(N),t.Y36(W.m),t.Y36(it.i),t.Y36(A._W),t.Y36(C.t2),t.Y36(I.gz),t.Y36(x.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-subject-index"]],viewQuery:function(a,e){var i;1&a&&(t.Gf(Q.NW,5),t.Gf(w.YE,5)),2&a&&(t.iGM(i=t.CRH())&&(e.paginator=i.first),t.iGM(i=t.CRH())&&(e.sort=i.first))},decls:84,vars:41,consts:[[1,"row"],[1,"col-12"],[1,"content-header"],[1,"container-fluid"],[1,"form-container",3,"formGroup"],[1,"col-md-4","col-12"],["appearance","legacy"],["formControlName","countryID",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","stageID",3,"selectionChange"],["formControlName","eduYearID"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","stage"],["matColumnDef","year"],["matColumnDef","subject"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","page"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","dropdown btn-group mr-1 mb-1","ngbDropdown","",4,"ngIf"],["ngbDropdown","",1,"dropdown","btn-group","mr-1","mb-1"],["mat-raised-button","","type","button","ngbDropdownToggle","",1,"btn","btn-primary","bg-light-primary","dropdown-toggle"],[1,"caret"],["ngbDropdownMenu","","role","menu",1,"dropdown-menu"],[4,"ngFor","ngForOf"],["class","dropdown-item",3,"routerLink","queryParams",4,"ngIf"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"dropdown-item",3,"routerLink","queryParams"],[1,"icon-notebook","font-medium-3","mr-2"],[1,"ft-cpu","font-medium-3","mr-2"],[1,"dropdown-item",3,"click"],[1,"ft-trash","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(a,e){1&a&&(t._UZ(0,"ngx-spinner"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"div",2),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",0),t.TgZ(7,"div",1),t.TgZ(8,"mat-card"),t.TgZ(9,"mat-card-title"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"mat-card-content",3),t.TgZ(13,"div",0),t.TgZ(14,"div",1),t.TgZ(15,"form",4),t.TgZ(16,"div",0),t.TgZ(17,"div",5),t.TgZ(18,"mat-form-field",6),t.TgZ(19,"mat-label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"mat-select",7),t.NdJ("selectionChange",function(){return e.getEducationalStageByCountryID(null==e.FomCtrls||null==e.FomCtrls.countryID?null:e.FomCtrls.countryID.value)}),t.TgZ(23,"mat-option"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.YNc(26,xn,2,2,"mat-option",8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"div",5),t.TgZ(28,"mat-form-field",6),t.TgZ(29,"mat-label"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.TgZ(32,"mat-select",9),t.NdJ("selectionChange",function(){return e.getYearbyStageID(null==e.FomCtrls||null==e.FomCtrls.stageID?null:e.FomCtrls.stageID.value)}),t.TgZ(33,"mat-option"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.YNc(36,Sn,2,2,"mat-option",8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div",5),t.TgZ(38,"mat-form-field",6),t.TgZ(39,"mat-label"),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.TgZ(42,"mat-select",10),t.TgZ(43,"mat-option"),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.YNc(46,Un,2,2,"mat-option",8),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"mat-card-actions",11),t.TgZ(48,"button",12),t.NdJ("click",function(){return e.getSubjects(1)}),t._uU(49),t.ALo(50,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(51,"div",0),t.TgZ(52,"div",1),t.TgZ(53,"mat-card"),t.TgZ(54,"mat-card-title"),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"mat-card-content"),t.TgZ(58,"mat-form-field",13),t.TgZ(59,"mat-label"),t._uU(60,"Filter"),t.qZA(),t.TgZ(61,"input",14,15),t.NdJ("keyup",function(r){return e.applyFilter(r)}),t.qZA(),t.qZA(),t.TgZ(63,"div",16),t.TgZ(64,"table",17),t.ynx(65,18),t.YNc(66,jn,2,0,"th",19),t.YNc(67,Ln,2,1,"td",20),t.BQk(),t.ynx(68,21),t.YNc(69,Fn,3,3,"th",19),t.YNc(70,Nn,2,1,"td",20),t.BQk(),t.ynx(71,22),t.YNc(72,Mn,3,3,"th",19),t.YNc(73,kn,2,1,"td",20),t.BQk(),t.ynx(74,23),t.YNc(75,wn,3,3,"th",19),t.YNc(76,Dn,2,1,"td",20),t.BQk(),t.ynx(77,24),t.YNc(78,Yn,2,0,"th",19),t.YNc(79,Vn,2,1,"td",20),t.BQk(),t.YNc(80,Rn,1,0,"tr",25),t.YNc(81,zn,1,0,"tr",26),t.YNc(82,$n,3,1,"tr",27),t.qZA(),t.TgZ(83,"mat-paginator",28),t.NdJ("page",function(r){return e.getSubjects(r.pageIndex+1)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(4),t.hij(" ",t.lcZ(5,20,"Navbar.EducationalSubjects")," "),t.xp6(6),t.hij(" ",t.lcZ(11,22,"General.Search")," "),t.xp6(5),t.Q6J("formGroup",e.myForm),t.xp6(5),t.hij("",t.lcZ(21,24,"labels.Country")," "),t.xp6(4),t.hij(" ",t.lcZ(25,26,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",e.countriesList),t.xp6(4),t.hij("",t.lcZ(31,28,"Navbar.EducationalStage")," "),t.xp6(4),t.hij(" ",t.lcZ(35,30,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",e.stagesList),t.xp6(4),t.hij(" ",t.lcZ(41,32,"labels.EducationalYear")," "),t.xp6(4),t.hij(" ",t.lcZ(45,34,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",e.Years),t.xp6(3),t.hij(" ",t.lcZ(50,36,"General.Search")," "),t.xp6(6),t.hij(" ",t.lcZ(56,38,"Material.Subjects")," "),t.xp6(9),t.Q6J("dataSource",e.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(40,Hn))("length",e.totalItems)("pageSize",10))},directives:[C.Ro,f.a8,f.n5,f.dn,s._Y,s.JL,s.sg,b.KE,b.hX,O.gD,s.JJ,s.u,V.ey,y.sg,f.hq,q.lW,k.Nt,Z.BZ,w.YE,Z.w1,Z.fO,Z.Dz,Z.as,Z.nj,Z.Ee,Q.NW,Z.ge,w.nU,Z.ev,y.O5,Y.jt,Y.iD,Y.Vi,I.yS,Z.XQ,Z.Gk],pipes:[F.X$],styles:[""]}),n}(),Xn=h(7446),Kn=h(3865);function ta(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1,"#"),t.qZA())}function ea(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.index;t.xp6(1),t.Oqu(a+1)}}function na(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Name")," "))}function aa(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(null==a?null:a.username)}}function ia(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.LectureName")," "))}function oa(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(null==a?null:a.lectureName)}}function ra(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Group")," "))}function la(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(null==a?null:a.groupName)}}function sa(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Attendance")," "))}function ua(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(null==a?null:a.didAttend)}}function da(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Exception")," "))}function ca(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(null==a?null:a.isException)}}function ma(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.refundBalance")," "))}function pa(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(null==a?null:a.didRefund)}}function _a(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Balance.Amount")," "))}function ha(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.hij(" ",null==a?null:a.amountRefunded," ")}}function ga(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Date")," "))}function fa(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.ALo(2,"NewDate"),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,null==a?null:a.dateRefunded)," ")}}function Za(n,o){1&n&&t._UZ(0,"tr",33)}function va(n,o){1&n&&t._UZ(0,"tr",34)}function Aa(n,o){if(1&n&&(t.TgZ(0,"tr",35),t.TgZ(1,"td",36),t._uU(2),t.qZA(),t.qZA()),2&n){t.oxw();var a=t.MAs(43);t.xp6(2),t.hij(' No data matching the filter "',a.value,'" ')}}var ba=function(o){return{functionId:o}},Ta=function(){return[10]},Ca=function(){var n=function(){function o(a,e,i,r,l,u){var c=this;(0,U.Z)(this,o),this.route=a,this.fb=e,this.toastr=i,this.spinner=r,this.SubjectMaterialsService=l,this.SubjectsService=u,this.students=[],this.displayedColumns=["#","name","lecture","group","attendance","outGroup","refundBalance","amount","date"],this.itemsCount=0,this.route.queryParamMap.subscribe(function(_){c.subjectId=_.get("subjectId"),c.functionId=Number(_.get("functionId"))}),this.route.paramMap.subscribe(function(_){c.materialId=_.get("materialId")}),this.getSubjectByID()}return(0,S.Z)(o,[{key:"ngOnInit",value:function(){this.offlineLectureAttendeesTable(1),this.myForm=this.fb.group({attendance:[!0,s.kI.required],uploadedFile:["",s.kI.required]})}},{key:"ngAfterViewInit",value:function(){this.dataSource&&(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)}},{key:"applyFilter",value:function(e){this.dataSource.filter=e.target.value.trim().toLowerCase()}},{key:"UploadStudentAttendance",value:function(){var e=this;this.myForm.controls.uploadedFile.value?(this.spinner.show(),this.SubjectMaterialsService.UploadStudentAttendance(this.materialId,this.myForm.controls.attendance.value,this.myForm.controls.uploadedFile.value).subscribe(function(i){"Success"==i.returnString&&(e.offlineLectureAttendeesTable(1),e.toastr.success("\u062a\u0645 \u0631\u0641\u0639 \u0627\u0644\u062d\u0636\u0648\u0631"),e.myForm.reset()),e.spinner.hide()})):this.toastr.warning("Must Choose File")}},{key:"offlineLectureAttendeesTable",value:function(e){var i=this;this.spinner.show(),this.SubjectMaterialsService.offlineLectureAttendeesTable(this.materialId,e).subscribe(function(r){console.log("offlineLectureAttendeesTable",r),i.dataSource=new Z.by(r.model),i.itemsCount=r.itemsCount,i.spinner.hide()})}},{key:"getSubjectByID",value:function(){var e=this;this.SubjectsService.getSubjectByID(this.subjectId).subscribe(function(i){null!=i.subject_id&&(e.subjectName=i.subject_ar_name)})}},{key:"onChange",value:function(e){var i=this,r=e.target.files[0].name,l=e.target.files[0].size,u=e.target.files[0].type,c=e.target.files[0].lastModified,_=e.target.files[0].lastModifiedDate;if(e.target.files){var d=new FileReader;d.readAsDataURL(e.target.files[0]),d.onload=function(g){var T={FileAsBase64:g.target.result.replace("data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,",""),name:r,size:l,type:u,LastModified:c,LastModifiedDate:_};console.log(T),i.myForm.controls.uploadedFile.setValue(T)}}}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(I.gz),t.Y36(s.qu),t.Y36(A._W),t.Y36(C.t2),t.Y36(G.r),t.Y36(N))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-upload-attendance"]],viewQuery:function(a,e){var i;1&a&&(t.Gf(Q.NW,5),t.Gf(w.YE,5)),2&a&&(t.iGM(i=t.CRH())&&(e.paginator=i.first),t.iGM(i=t.CRH())&&(e.sort=i.first))},decls:77,vars:35,consts:[[1,"row"],[1,"col-12"],[1,"content-header"],["mat-raised-button","",1,"btn","btn-warning","bg-light-warning","float-right",3,"routerLink","queryParams"],[1,"form-container",3,"formGroup"],["accept",".xlsx,.xls","type","file",1,"form-control",3,"change"],["fileInput",""],[1,"col-2"],["formControlName","attendance",3,"value"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","lecture"],["matColumnDef","group"],["matColumnDef","attendance"],["matColumnDef","outGroup"],["matColumnDef","refundBalance"],["matColumnDef","amount"],["matColumnDef","date"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(a,e){1&a&&(t._UZ(0,"ngx-spinner"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"div",2),t._uU(4),t.ALo(5,"translate"),t.ALo(6,"translate"),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",0),t.TgZ(9,"div",1),t.TgZ(10,"mat-card"),t.TgZ(11,"mat-card-title"),t._uU(12),t.ALo(13,"translate"),t.TgZ(14,"a",3),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA(),t.TgZ(17,"mat-card-content"),t.TgZ(18,"div",0),t.TgZ(19,"div",1),t.TgZ(20,"form",4),t.TgZ(21,"div",0),t.TgZ(22,"div",1),t.TgZ(23,"input",5,6),t.NdJ("change",function(r){return e.onChange(r)}),t.qZA(),t.qZA(),t.TgZ(25,"div",7),t.TgZ(26,"mat-checkbox",8),t._uU(27," \u062a\u0633\u062c\u064a\u0644 \u0628\u0627\u0642\u064a \u063a\u064a\u0627\u0628 \u0627\u0644\u0637\u0644\u0627\u0628 \u0645\u0646 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629 \u0627\u0644\u062e\u0627\u0635\u0629 \u0628\u0627\u0644\u062d\u0635\u0629 \u062e\u0627\u0631\u062c \u0627\u0644\u0645\u0644\u0641 \u0631\u0641\u0639 "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"mat-card-actions",9),t.TgZ(29,"button",10),t.NdJ("click",function(){return e.UploadStudentAttendance()}),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"div",0),t.TgZ(33,"div",1),t.TgZ(34,"mat-card"),t.TgZ(35,"mat-card-title"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"mat-card-content"),t.TgZ(39,"mat-form-field",11),t.TgZ(40,"mat-label"),t._uU(41,"Filter"),t.qZA(),t.TgZ(42,"input",12,13),t.NdJ("keyup",function(r){return e.applyFilter(r)}),t.qZA(),t.qZA(),t.TgZ(44,"div",14),t.TgZ(45,"table",15),t.ynx(46,16),t.YNc(47,ta,2,0,"th",17),t.YNc(48,ea,2,1,"td",18),t.BQk(),t.ynx(49,19),t.YNc(50,na,3,3,"th",17),t.YNc(51,aa,2,1,"td",18),t.BQk(),t.ynx(52,20),t.YNc(53,ia,3,3,"th",17),t.YNc(54,oa,2,1,"td",18),t.BQk(),t.ynx(55,21),t.YNc(56,ra,3,3,"th",17),t.YNc(57,la,2,1,"td",18),t.BQk(),t.ynx(58,22),t.YNc(59,sa,3,3,"th",17),t.YNc(60,ua,2,1,"td",18),t.BQk(),t.ynx(61,23),t.YNc(62,da,3,3,"th",17),t.YNc(63,ca,2,1,"td",18),t.BQk(),t.ynx(64,24),t.YNc(65,ma,3,3,"th",17),t.YNc(66,pa,2,1,"td",18),t.BQk(),t.ynx(67,25),t.YNc(68,_a,3,3,"th",17),t.YNc(69,ha,2,1,"td",18),t.BQk(),t.ynx(70,26),t.YNc(71,ga,3,3,"th",17),t.YNc(72,fa,3,3,"td",18),t.BQk(),t.YNc(73,Za,1,0,"tr",27),t.YNc(74,va,1,0,"tr",28),t.YNc(75,Aa,3,1,"tr",29),t.qZA(),t.TgZ(76,"mat-paginator",30),t.NdJ("page",function(r){return e.offlineLectureAttendeesTable(r.pageIndex+1)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(4),t.lnq(" ",t.lcZ(5,18,"Navbar.EducationalSubjects")," - ",t.lcZ(6,20,"labels.Materials")," - ",t.lcZ(7,22,"labels.UploadAttendance")," "),t.xp6(8),t.AsE(" ",t.lcZ(13,24,"labels.UploadAttendance")," - ",e.subjectName," "),t.xp6(2),t.MGl("routerLink","/dashboard/educational-setup/subjects/material-search/",e.subjectId,""),t.Q6J("queryParams",t.VKq(32,ba,e.functionId)),t.xp6(1),t.hij(" ",t.lcZ(16,26,"General.Back")," "),t.xp6(5),t.Q6J("formGroup",e.myForm),t.xp6(6),t.Q6J("value",!0),t.xp6(4),t.hij(" ",t.lcZ(31,28,"General.Upload")," "),t.xp6(6),t.hij(" ",t.lcZ(37,30,"labels.LectureAttendees")," "),t.xp6(9),t.Q6J("dataSource",e.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(34,Ta))("length",e.itemsCount)("pageSize",10))},directives:[C.Ro,f.a8,f.n5,q.zs,I.yS,f.dn,s._Y,s.JL,s.sg,Xn.oG,s.JJ,s.u,f.hq,q.lW,b.KE,b.hX,k.Nt,Z.BZ,w.YE,Z.w1,Z.fO,Z.Dz,Z.as,Z.nj,Z.Ee,Q.NW,Z.ge,w.nU,Z.ev,Z.XQ,Z.Gk],pipes:[F.X$,Kn.H],styles:[".mat-checkbox[_ngcontent-%COMP%]{margin-top:24px!important;display:block!important}"]}),n}(),et=function(){var n=function(){function o(a){(0,U.Z)(this,o),this.http=a}return(0,S.Z)(o,[{key:"addStudyingGroup",value:function(e){return this.http.post("".concat(m.N.apiURL,"studyinggroup/save-studying-groups"),e)}},{key:"getStudentsGroups",value:function(e){return this.http.post("".concat(m.N.apiURL,"studyinggroup/return-studying-groups"),e)}},{key:"getGroupById",value:function(e){return this.http.get("".concat(m.N.apiURL,"studyinggroup/get-group-by-Id/").concat(e))}},{key:"RemoveStudentGroup",value:function(e){return this.http.get("".concat(m.N.apiURL,"studyinggroup/delete-by-Id/").concat(e))}},{key:"searchStudents",value:function(e){return this.http.post("".concat(m.N.apiURL,"studyinggroup/search-student-groups"),e)}},{key:"checkStudent",value:function(e){return this.http.post(m.N.apiURL+"studyinggroup/search-student-in-group",e)}},{key:"addStudent",value:function(e,i){return this.http.get("".concat(m.N.apiURL,"studyinggroup/add-student-groups/").concat(e,"/").concat(i))}},{key:"deleteStudent",value:function(e,i){return this.http.get("".concat(m.N.apiURL,"studyinggroup/remove-student-groups/").concat(e,"/").concat(i))}},{key:"uploadStudentsByExcel",value:function(e){return this.http.post(m.N.apiURL+"studyinggroup/upload-excel-student-groups",e)}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.LFG(L.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),Ia=h(1044);function ya(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.AddGroup")," "))}function qa(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"labels.AddGroup")," - ",a.groupName," ")}}function xa(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Sa(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function Ua(n,o){if(1&n&&(t.TgZ(0,"mat-hint",22),t.YNc(1,xa,3,3,"span",2),t.YNc(2,Sa,3,3,"span",2),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.groupNameCtrl||null==a.groupNameCtrl.errors?null:a.groupNameCtrl.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.groupNameCtrl||null==a.groupNameCtrl.errors?null:a.groupNameCtrl.errors.whiteSpace)}}function ja(n,o){if(1&n&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.teacherUserId),t.xp6(1),t.hij(" ",a.teacher_ar_name," ")}}function La(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.MustChoosevalue")," "))}function Fa(n,o){if(1&n&&(t.TgZ(0,"mat-hint",22),t.YNc(1,La,3,3,"span",2),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.teacherIdCtrl||null==a.teacherIdCtrl.errors?null:a.teacherIdCtrl.errors.required)}}function Na(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Ma(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function ka(n,o){if(1&n&&(t.TgZ(0,"mat-hint",22),t.YNc(1,Na,3,3,"span",2),t.YNc(2,Ma,3,3,"span",2),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.maxLimitCtrl||null==a.maxLimitCtrl.errors?null:a.maxLimitCtrl.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.maxLimitCtrl||null==a.maxLimitCtrl.errors?null:a.maxLimitCtrl.errors.whiteSpace)}}function wa(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){return t.CHM(a),t.oxw(2).OnEdit()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Update")," "))}function Da(n,o){if(1&n&&(t.TgZ(0,"mat-card-actions",20),t.YNc(1,wa,3,3,"button",21),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.groupId>0)}}function Ya(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){return t.CHM(a),t.oxw().addStudyingGroup()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Add")," "))}var Ea=function(o){return{functionId:o}},Ja=function(){var n=function(){function o(a,e,i,r,l,u,c,_){var d=this;(0,U.Z)(this,o),this.fb=a,this.route=e,this.authserv=i,this.router=r,this.msg=l,this.GeneralService=u,this.StudentsGroupsService=c,this.spinner=_,this.groupId=0,this.Teachers=[],this.submitted=!1,this.route.queryParamMap.subscribe(function(g){d.groupId=Number(g.get("groupId")),d.groupId>0&&d.getGroupById(d.groupId),d.functionId=Number(g.get("functionId")),d.functionId&&d.authserv.getUserRowFunctions(d.functionId).subscribe(function(v){v&&(d.rowFunctions=v)})})}return(0,S.Z)(o,[{key:"teacherIdCtrl",get:function(){return this.myForm.get("teacherUserId")}},{key:"groupNameCtrl",get:function(){return this.myForm.get("groupName")}},{key:"maxLimitCtrl",get:function(){return this.myForm.get("maxLimit")}},{key:"subjectIdCtrl",get:function(){return this.myForm.get("subjectId")}},{key:"currentYearCtrl",get:function(){return this.myForm.get("currentYear")}},{key:"IdCtrl",get:function(){return this.myForm.get("Id")}},{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.myForm=this.fb.group({Id:"",groupName:["",s.kI.required],teacherUserId:["",s.kI.required],subjectId:["",s.kI.required],maxLimit:["",s.kI.required],currentYear:[1,s.kI.required],EducompId:this.EduCompId,Publish:[1],IsHidden:[0]}),this.getTeachersByEducompId()}},{key:"ngAfterViewInit",value:function(){var e=this;this.authserv.EduCompId.subscribe(function(i){e.EduCompId=i.EduCompId,e.getTeachersByEducompId()})}},{key:"getGroupById",value:function(e){var i=this;this.StudentsGroupsService.getGroupById(e).subscribe(function(r){var l,u,c,_;null===(l=i.teacherIdCtrl)||void 0===l||l.setValue(r.teacherId),i.groupId=r.Id,i.IdCtrl.setValue(r.Id),i.groupName=null==r?void 0:r.Name,null===(u=i.groupNameCtrl)||void 0===u||u.setValue(r.Name),null===(c=i.maxLimitCtrl)||void 0===c||c.setValue(r.maxLimit),null===(_=i.currentYearCtrl)||void 0===_||_.setValue(r.currentYear),i.subjectIdCtrl.setValue(String(null==r?void 0:r.subjectId))})}},{key:"addStudyingGroup",value:function(){var e=this;this.submitted=!0,this.myForm.valid&&(this.spinner.show(),this.StudentsGroupsService.addStudyingGroup(this.myForm.value).subscribe(function(r){console.log("group added",r),1==r.returnValue?e.msg.success("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629"):e.msg.error(r.returnString),e.spinner.hide()}))}},{key:"OnEdit",value:function(){var e=this;this.myForm.valid&&(this.groupId>0&&this.myForm.controls.Id.setValue(this.groupId),this.spinner.show(),this.StudentsGroupsService.addStudyingGroup(this.myForm.value).subscribe(function(i){1==i.returnValue&&(e.msg.success("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629 "),e.submitted=!1),e.spinner.hide()}))}},{key:"getTeachersByEducompId",value:function(){var e=this;this.GeneralService.getTeachersByEducompId(this.EduCompId).subscribe(function(i){var r;e.Teachers=i.lstTeachers,e.myForm.controls.teacherUserId.setValue(null===(r=i.lstTeachers[0])||void 0===r?void 0:r.teacherUserId)})}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(s.qu),t.Y36(I.gz),t.Y36(M.e),t.Y36(I.F0),t.Y36(A._W),t.Y36(W.m),t.Y36(et),t.Y36(C.t2))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-student-group"]],decls:59,vars:41,consts:[[1,"row"],[1,"col-12"],[4,"ngIf"],["mat-raised-button","","routerLink","../student-group",1,"btn","btn-info","bg-light-info","float-right",3,"queryParams"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["appearance","legacy"],["matInput","","formControlName","groupName"],["class","danger",4,"ngIf"],["formControlName","teacherUserId"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"subjectControl","teacherIdControl","submitted"],["matInput","","type","number","formControlName","maxLimit"],[1,"col-md-12","col-12"],["formControlName","currentYear",1,"row"],[1,"col-4"],[3,"value"],["align","end",4,"ngIf"],["align","end"],["mat-raised-button","","class","btn btn-primary",3,"click",4,"ngIf"],[1,"danger"],["mat-raised-button","",1,"btn","btn-primary",3,"click"]],template:function(a,e){1&a&&(t._UZ(0,"ngx-spinner"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"mat-card"),t.TgZ(4,"mat-card-title"),t.YNc(5,ya,3,3,"span",2),t.YNc(6,qa,3,4,"span",2),t.TgZ(7,"a",3),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.qZA(),t.TgZ(10,"mat-card-content",4),t.TgZ(11,"div",0),t.TgZ(12,"div",1),t.TgZ(13,"form",5),t.TgZ(14,"div",0),t.TgZ(15,"div",6),t.TgZ(16,"mat-form-field",7),t.TgZ(17,"mat-label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"input",8),t.YNc(21,Ua,3,2,"mat-hint",9),t.qZA(),t.qZA(),t.TgZ(22,"div",6),t.TgZ(23,"mat-form-field",7),t.TgZ(24,"mat-label"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"mat-select",10),t.TgZ(28,"mat-option",11),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.YNc(31,ja,2,2,"mat-option",12),t.qZA(),t.YNc(32,Fa,2,1,"mat-hint",9),t.qZA(),t.qZA(),t.TgZ(33,"div",6),t._UZ(34,"app-subjects-by-teacherid",13),t.qZA(),t.TgZ(35,"div",6),t.TgZ(36,"mat-form-field",7),t.TgZ(37,"mat-label"),t._uU(38),t.ALo(39,"translate"),t.qZA(),t._UZ(40,"input",14),t.YNc(41,ka,3,2,"mat-hint",9),t.qZA(),t.qZA(),t.TgZ(42,"div",15),t.TgZ(43,"div"),t.TgZ(44,"mat-label"),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"mat-radio-group",16),t.TgZ(48,"div",17),t.TgZ(49,"mat-radio-button",18),t._uU(50),t.ALo(51,"translate"),t.qZA(),t.qZA(),t.TgZ(52,"div",17),t.TgZ(53,"mat-radio-button",18),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(56,Da,2,1,"mat-card-actions",19),t.TgZ(57,"mat-card-actions",20),t.YNc(58,Ya,3,3,"button",21),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(5),t.Q6J("ngIf",0==e.groupId),t.xp6(1),t.Q6J("ngIf",e.groupId>0),t.xp6(1),t.Q6J("queryParams",t.VKq(39,Ea,e.functionId)),t.xp6(1),t.hij(" ",t.lcZ(9,23,"General.Back")," "),t.xp6(5),t.Q6J("formGroup",e.myForm),t.xp6(5),t.Oqu(t.lcZ(19,25,"labels.GroupName")),t.xp6(3),t.Q6J("ngIf",(null==e.groupNameCtrl?null:e.groupNameCtrl.invalid)&&((null==e.groupNameCtrl?null:e.groupNameCtrl.touched)||e.submitted)),t.xp6(4),t.Oqu(t.lcZ(26,27,"Material.Teacher")),t.xp6(4),t.Oqu(t.lcZ(30,29,"Material.Teacher")),t.xp6(2),t.Q6J("ngForOf",e.Teachers),t.xp6(1),t.Q6J("ngIf",(null==e.teacherIdCtrl?null:e.teacherIdCtrl.invalid)&&((null==e.teacherIdCtrl?null:e.teacherIdCtrl.touched)||e.submitted)),t.xp6(2),t.Q6J("subjectControl",e.subjectIdCtrl)("teacherIdControl",e.teacherIdCtrl)("submitted",e.submitted),t.xp6(4),t.Oqu(t.lcZ(39,31,"labels.MaxLimit")),t.xp6(3),t.Q6J("ngIf",(null==e.maxLimitCtrl?null:e.maxLimitCtrl.invalid)&&((null==e.maxLimitCtrl?null:e.maxLimitCtrl.touched)||e.submitted)),t.xp6(4),t.hij(" ",t.lcZ(46,33,"labels.EducationalYear")," "),t.xp6(4),t.Q6J("value",1),t.xp6(1),t.hij(" ",t.lcZ(51,35,"labels.CurrentYear")," "),t.xp6(3),t.Q6J("value",0),t.xp6(1),t.hij("",t.lcZ(55,37,"labels.NextYear")," "),t.xp6(2),t.Q6J("ngIf",e.groupId>0),t.xp6(2),t.Q6J("ngIf",0==e.groupId))},directives:[C.Ro,f.a8,f.n5,y.O5,q.zs,I.yS,f.dn,s._Y,s.JL,s.sg,b.KE,b.hX,k.Nt,s.Fj,s.JJ,s.u,O.gD,V.ey,y.sg,Ia.I,s.wV,P.VQ,P.U0,f.hq,b.bx,q.lW],pipes:[F.X$],styles:[""]}),n}();function Pa(n,o){if(1&n&&(t.TgZ(0,"mat-option",17),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.teacherUserId),t.xp6(1),t.hij(" ",a.teacher_ar_name," ")}}function Qa(n,o){1&n&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Name")," "))}function Ga(n,o){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(a.Name)}}function Ba(n,o){1&n&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Teacher")," "))}function Oa(n,o){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(a.Teacher)}}function Va(n,o){1&n&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Materials")," "))}function Ra(n,o){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(a.Subject)}}function za(n,o){1&n&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.MaxLimit")," "))}function $a(n,o){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(a.maxLimit)}}function Ha(n,o){1&n&&t._UZ(0,"th",34)}var ot=function(o,a){return{groupId:o,functionId:a}};function Wa(n,o){if(1&n&&(t.TgZ(0,"a",43),t._UZ(1,"i",44),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n){var a=t.oxw(2).$implicit,e=t.oxw();t.Q6J("queryParams",t.WLB(4,ot,a.Id,e.functionId)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"labels.AssignStudentToGroup")," ")}}function Xa(n,o){if(1&n&&(t.TgZ(0,"a",45),t._UZ(1,"i",44),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n){var a=t.oxw(2).$implicit,e=t.oxw();t.Q6J("queryParams",t.WLB(4,ot,a.Id,e.functionId)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"General.Edit")," ")}}function Ka(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(a);var i=t.oxw(2).$implicit;return t.oxw().openDeleateDialog(i)}),t._UZ(1,"i",47),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"General.Delete")," "))}function ti(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Wa,4,7,"a",40),t.YNc(2,Xa,4,7,"a",41),t.YNc(3,Ka,4,3,"a",42),t.BQk()),2&n){var a=o.$implicit;t.xp6(1),t.Q6J("ngIf","AssignStudentToGroup"===a.functionName),t.xp6(1),t.Q6J("ngIf","Edit"===a.functionName),t.xp6(1),t.Q6J("ngIf","Delete"===a.functionName)}}function ei(n,o){if(1&n&&(t.TgZ(0,"td",35),t.TgZ(1,"div",36),t.TgZ(2,"button",37),t._uU(3," actions "),t.qZA(),t.TgZ(4,"div",38),t.YNc(5,ti,4,3,"ng-container",39),t.qZA(),t.qZA(),t.qZA()),2&n){var a=t.oxw();t.xp6(5),t.Q6J("ngForOf",a.rowFunctions)}}function ni(n,o){1&n&&t._UZ(0,"tr",48)}function ai(n,o){1&n&&t._UZ(0,"tr",49)}function ii(n,o){if(1&n&&(t.TgZ(0,"tr",50),t.TgZ(1,"td",51),t._uU(2),t.qZA(),t.qZA()),2&n){t.oxw();var a=t.MAs(61);t.xp6(2),t.hij(' No data matching the filter "',a.value,'" ')}}var oi=function(o){return{functionId:o}},ri=function(){return[10]},li=function(){var n=function(){function o(a,e,i,r,l,u,c,_){var d=this;(0,U.Z)(this,o),this.route=a,this.fb=e,this.StudentsGroupsService=i,this.toastr=r,this.authserv=l,this.dialog=u,this.GeneralService=c,this.spinner=_,this.p=1,this.maxSize=9,this.Teachers=[],this.groups=[],this.displayedColumns=["name","teacher","material","maxno","actions"],a.queryParamMap.subscribe(function(g){d.functionId=Number(g.get("functionId")),d.functionId&&d.authserv.getUserRowFunctions(d.functionId).subscribe(function(v){v&&(d.rowFunctions=v)})})}return(0,S.Z)(o,[{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.myForm=this.fb.group({nameQuery:[""],teacherUserId:[""],EduCompId:[this.EduCompId],currentYear:[1],page:[""]}),this.getTeachersByEducompId(),this.getStudentsGroups(1)}},{key:"EduCompIdCtrl",get:function(){return this.myForm.get("EduCompId")}},{key:"applyFilter",value:function(e){this.dataSource.filter=e.target.value.trim().toLowerCase()}},{key:"ngAfterViewInit",value:function(){var e=this;this.authserv.EduCompId.subscribe(function(i){e.EduCompId=i.EduCompId,e.EduCompIdCtrl.setValue(i.EduCompId),e.getStudentsGroups(1),e.getTeachersByEducompId()}),this.authserv.branchId.subscribe(function(i){e.getStudentsGroups(1),e.getTeachersByEducompId()}),this.dataSource&&(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)}},{key:"getStudentsGroups",value:function(e){var r,i=this;null===(r=this.myForm.controls.page)||void 0===r||r.setValue(e),this.p=e,this.spinner.show(),this.StudentsGroupsService.getStudentsGroups(this.myForm.value).subscribe(function(l){i.groups=l.List,i.dataSource=new Z.by(l.List),i.itemsCount=l.TotalItemCount,i.spinner.hide()})}},{key:"removeGroup",value:function(e){var i=this;this.StudentsGroupsService.RemoveStudentGroup(e.Id).subscribe(function(r){if(r){var l=i.dataSource.data.findIndex(function(u){return u.Id==e.Id});i.dataSource.data.splice(l,1),i.dataSource.paginator=i.paginator,i.dataSource.sort=i.sort,i.toastr.success("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629")}})}},{key:"openDeleateDialog",value:function(e){var i=this;this.dialog.open(J.F,{data:{msg:e.Name}}).afterClosed().subscribe(function(r){r&&i.removeGroup(e)})}},{key:"getTeachersByEducompId",value:function(){var e=this;this.GeneralService.getTeachersByEducompId(this.EduCompId).subscribe(function(i){var r;e.Teachers=i.lstTeachers,e.myForm.controls.teacherUserId.setValue(null===(r=i.lstTeachers[0])||void 0===r?void 0:r.teacherUserId)})}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(I.gz),t.Y36(s.qu),t.Y36(et),t.Y36(A._W),t.Y36(M.e),t.Y36(x.uw),t.Y36(W.m),t.Y36(C.t2))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-student-group-index"]],viewQuery:function(a,e){var i;1&a&&(t.Gf(Q.NW,5),t.Gf(w.YE,5)),2&a&&(t.iGM(i=t.CRH())&&(e.paginator=i.first),t.iGM(i=t.CRH())&&(e.sort=i.first))},decls:83,vars:44,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","","routerLink","../add-group",1,"btn","btn-info","bg-light-info","float-right",3,"queryParams"],[1,"fa","fa-plus-square"],["mat-raised-button","",1,"btn","btn-info","float-right",3,"click"],[1,"fa","fa-search"],[1,"container-fluid"],[1,"form-container",3,"formGroup"],[1,"col-md-6","col-12"],["appearance","legacy"],["formControlName","teacherUserId"],["value",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","nameQuery"],[1,"col-md-12","col-12"],["formControlName","currentYear",1,"row"],[1,"col-4"],[3,"value"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","teacher"],["matColumnDef","material"],["matColumnDef","maxno"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["ngbDropdown","",1,"d-inline-block"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-outline-primary"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],[4,"ngFor","ngForOf"],["ngbDropdownItem","","routerLink","../assign-student-to-group",3,"queryParams",4,"ngIf"],["ngbDropdownItem","","routerLink","../add-group",3,"queryParams",4,"ngIf"],["ngbDropdownItem","",3,"click",4,"ngIf"],["ngbDropdownItem","","routerLink","../assign-student-to-group",3,"queryParams"],[1,"fa","fa-edit","mr-2"],["ngbDropdownItem","","routerLink","../add-group",3,"queryParams"],["ngbDropdownItem","",3,"click"],[1,"fa","fa-times","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(a,e){1&a&&(t._UZ(0,"ngx-spinner"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"mat-card"),t.TgZ(4,"mat-card-title"),t._uU(5),t.ALo(6,"translate"),t.TgZ(7,"a",2),t._UZ(8,"i",3),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"a",4),t.NdJ("click",function(){return e.getStudentsGroups(1)}),t._UZ(12,"i",5),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.TgZ(15,"mat-card-content",6),t.TgZ(16,"div",0),t.TgZ(17,"div",1),t.TgZ(18,"form",7),t.TgZ(19,"div",0),t.TgZ(20,"div",8),t.TgZ(21,"mat-form-field",9),t.TgZ(22,"mat-label"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"mat-select",10),t.TgZ(26,"mat-option",11),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.YNc(29,Pa,2,2,"mat-option",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"div",8),t.TgZ(31,"mat-form-field",9),t.TgZ(32,"mat-label"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t._UZ(35,"input",13),t.qZA(),t.qZA(),t.TgZ(36,"div",14),t.TgZ(37,"div"),t.TgZ(38,"mat-label"),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"mat-radio-group",15),t.TgZ(42,"div",16),t.TgZ(43,"mat-radio-button",17),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.qZA(),t.TgZ(46,"div",16),t.TgZ(47,"mat-radio-button",17),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",0),t.TgZ(51,"div",1),t.TgZ(52,"mat-card"),t.TgZ(53,"mat-card-title"),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"mat-card-content"),t.TgZ(57,"mat-form-field",18),t.TgZ(58,"mat-label"),t._uU(59,"Filter"),t.qZA(),t.TgZ(60,"input",19,20),t.NdJ("keyup",function(r){return e.applyFilter(r)}),t.qZA(),t.qZA(),t.TgZ(62,"div",21),t.TgZ(63,"table",22),t.ynx(64,23),t.YNc(65,Qa,3,3,"th",24),t.YNc(66,Ga,2,1,"td",25),t.BQk(),t.ynx(67,26),t.YNc(68,Ba,3,3,"th",24),t.YNc(69,Oa,2,1,"td",25),t.BQk(),t.ynx(70,27),t.YNc(71,Va,3,3,"th",24),t.YNc(72,Ra,2,1,"td",25),t.BQk(),t.ynx(73,28),t.YNc(74,za,3,3,"th",24),t.YNc(75,$a,2,1,"td",25),t.BQk(),t.ynx(76,29),t.YNc(77,Ha,1,0,"th",24),t.YNc(78,ei,6,1,"td",25),t.BQk(),t.YNc(79,ni,1,0,"tr",30),t.YNc(80,ai,1,0,"tr",31),t.YNc(81,ii,3,1,"tr",32),t.qZA(),t.TgZ(82,"mat-paginator",33),t.NdJ("page",function(r){return e.getStudentsGroups(r.pageIndex+1)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(5),t.hij(" ",t.lcZ(6,21,"General.Search")," "),t.xp6(2),t.Q6J("queryParams",t.VKq(41,oi,e.functionId)),t.xp6(2),t.hij(" ",t.lcZ(10,23,"General.Add")," "),t.xp6(4),t.hij(" ",t.lcZ(14,25,"General.Search")," "),t.xp6(5),t.Q6J("formGroup",e.myForm),t.xp6(5),t.hij(" ",t.lcZ(24,27,"Material.Teacher")," "),t.xp6(4),t.hij(" ",t.lcZ(28,29,"Material.Teacher"),""),t.xp6(2),t.Q6J("ngForOf",e.Teachers),t.xp6(4),t.hij(" ",t.lcZ(34,31,"labels.Name")," "),t.xp6(6),t.hij(" ",t.lcZ(40,33,"labels.EducationalYear")," "),t.xp6(4),t.Q6J("value",1),t.xp6(1),t.hij(" ",t.lcZ(45,35,"labels.CurrentYear")," "),t.xp6(3),t.Q6J("value",0),t.xp6(1),t.hij("",t.lcZ(49,37,"labels.NextYear")," "),t.xp6(6),t.hij(" ",t.lcZ(55,39,"Material.Groups")," "),t.xp6(9),t.Q6J("dataSource",e.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(43,ri))("length",e.itemsCount)("pageSize",10))},directives:[C.Ro,f.a8,f.n5,q.zs,I.yS,f.dn,s._Y,s.JL,s.sg,b.KE,b.hX,O.gD,s.JJ,s.u,V.ey,y.sg,k.Nt,s.Fj,P.VQ,P.U0,Z.BZ,w.YE,Z.w1,Z.fO,Z.Dz,Z.as,Z.nj,Z.Ee,Q.NW,Z.ge,w.nU,Z.ev,Y.jt,Y.iD,Y.Vi,y.O5,Y.TH,Z.XQ,Z.Gk],pipes:[F.X$],styles:[""]}),n}(),X=h(5245);function si(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Name")," "))}function ui(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(a.Name)}}function di(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Email")," "))}function ci(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(a.Email)}}function mi(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.MobileNo")," "))}function pi(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(a.Mobile)}}function _i(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1,"actions"),t.qZA())}function hi(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"td",32),t.TgZ(1,"button",33),t.NdJ("click",function(){var r=t.CHM(a).$implicit;return t.oxw().openDeleateDialog(r)}),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA(),t.qZA(),t.qZA()}}function gi(n,o){1&n&&t._UZ(0,"tr",34)}function fi(n,o){1&n&&t._UZ(0,"tr",35)}function Zi(n,o){if(1&n&&(t.TgZ(0,"tr",36),t.TgZ(1,"td",37),t._uU(2),t.qZA(),t.qZA()),2&n){t.oxw();var a=t.MAs(53);t.xp6(2),t.hij(' No data matching the filter "',a.value,'" ')}}var vi=function(o){return{functionId:o}},Ai=function(){return[10]},bi=function(){var n=function(){function o(a,e,i,r,l,u,c,_){var d=this;(0,U.Z)(this,o),this.route=a,this.authserv=e,this.router=i,this.fb=r,this.StudentsGroupsService=l,this.toastr=u,this.dialog=c,this.spinner=_,this.groupId=0,this.p=1,this.groupMaxCount=0,this.groupCount=0,this.ExcelFile=null,this.students=[],this.displayedColumns=["Name","Email","Mobile","actions"],this.route.queryParamMap.subscribe(function(g){d.groupId=Number(g.get("groupId")),d.functionId=Number(g.get("functionId")),d.functionId&&d.authserv.getUserRowFunctions(d.functionId).subscribe(function(v){v&&(d.rowFunctions=v)})})}return(0,S.Z)(o,[{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.myForm=this.fb.group({page:[1],groupId:[this.groupId],EduCompId:[this.EduCompId],emailQuery:[""],mobileQuery:[""]}),this.searchStudents(1)}},{key:"EduCompIdCtrl",get:function(){return this.myForm.get("EduCompId")}},{key:"groupIdCtrl",get:function(){return this.myForm.get("groupId")}},{key:"ngAfterViewInit",value:function(){var e=this;this.authserv.EduCompId.subscribe(function(i){e.EduCompId=i.EduCompId,e.EduCompIdCtrl.setValue(i.EduCompId),e.searchStudents(1)}),this.authserv.branchId.subscribe(function(i){e.searchStudents(1)}),this.dataSource&&(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)}},{key:"applyFilter",value:function(e){this.dataSource.filter=e.target.value.trim().toLowerCase()}},{key:"searchStudents",value:function(e){var r,i=this;null===(r=this.myForm.controls.page)||void 0===r||r.setValue(e),this.p=e,this.spinner.show(),this.p=e,this.StudentsGroupsService.searchStudents(this.myForm.value).subscribe(function(l){i.students=l.List,i.dataSource=new Z.by(l.List),i.groupCount=l.Count,console.log("Count",l.Count),i.spinner.hide()})}},{key:"addStudent",value:function(){var e=this;this.spinner.show(),console.log("form values add",this.myForm.value),this.StudentsGroupsService.checkStudent(this.myForm.value).subscribe(function(i){var r;i.InGroup?e.toastr.info("\u0647\u0630\u0627 \u0627\u0644\u0637\u0627\u0644\u0628 \u0645\u0648\u062c\u0648\u062f \u0645\u0633\u0628\u0642\u0627\u064e \u062f\u0627\u062e\u0644 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629"):(e.spinner.show(),e.StudentsGroupsService.addStudent(null===(r=i.student)||void 0===r?void 0:r.userId,e.groupId).subscribe(function(l){"Student already exists in a group with the same teacher and subject"==l.returnString?e.toastr.info("\u0647\u0630\u0627 \u0627\u0644\u0637\u0627\u0644\u0628 \u0645\u0648\u062c\u0648\u062f \u0645\u0633\u0628\u0642\u0627\u064e \u062f\u0627\u062e\u0644 \u0645\u062c\u0645\u0648\u0639\u0629 \u0644\u0646\u0641\u0633 \u0627\u0644\u0645\u0627\u062f\u0629 \u0648\u0646\u0641\u0633 \u0627\u0644\u0645\u062f\u0631\u0633"):(e.toastr.success("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0637\u0627\u0644\u0628 \u0628\u0646\u062c\u0627\u062d"),e.searchStudents(1)),e.spinner.hide()}))})}},{key:"openDeleateDialog",value:function(e){var i=this;this.dialog.open(J.F,{data:{msg:e.Name}}).afterClosed().subscribe(function(r){r&&i.deleteStudent(e)})}},{key:"deleteStudent",value:function(e){var i=this;this.spinner.show(),this.StudentsGroupsService.deleteStudent(e.userId,this.groupId).subscribe(function(r){if(1==r.returnValue){var l=i.dataSource.data.findIndex(function(u){return e});i.dataSource.data.splice(l,1),i.dataSource.paginator=i.paginator,i.toastr.success("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0637\u0627\u0644\u0628 \u0645\u0646 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629")}else i.toastr.warning(r);i.spinner.hide()})}},{key:"uploadStudentsByExcel",value:function(){var e=this;null==this.ExcelFile?this.toastr.info("\u064a\u062c\u0628 \u0625\u0631\u0641\u0627\u0642 Excel File"):(this.spinner.show(),this.StudentsGroupsService.uploadStudentsByExcel({ExcelFile:this.ExcelFile,groupId:this.groupId}).subscribe(function(i){1==i.returnValue?e.toastr.success("\u062a\u0645 \u0631\u0641\u0639 \u0627\u0644\u0645\u0644\u0641 \u0628\u0646\u062c\u0627\u062d "):console.log("ExcelFile",i),e.spinner.hide()}))}},{key:"onChange",value:function(e){var i=this,r=e.target.files[0].name,l=e.target.files[0].size,u=e.target.files[0].type,c=e.target.files[0].lastModified,_=e.target.files[0].lastModifiedDate;if(e.target.files){var d=new FileReader;d.readAsDataURL(e.target.files[0]),d.onload=function(g){var T={FileAsBase64:g.target.result.replace("data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,",""),name:r,size:l,type:u,LastModified:c,LastModifiedDate:_};i.ExcelFile=T}}}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(I.gz),t.Y36(M.e),t.Y36(I.F0),t.Y36(s.qu),t.Y36(et),t.Y36(A._W),t.Y36(x.uw),t.Y36(C.t2))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-assign-student-to-group"]],viewQuery:function(a,e){var i;1&a&&(t.Gf(Q.NW,5),t.Gf(w.YE,5)),2&a&&(t.iGM(i=t.CRH())&&(e.paginator=i.first),t.iGM(i=t.CRH())&&(e.sort=i.first))},decls:72,vars:35,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","","routerLink","../student-group",1,"btn","btn-info","bg-light-info","float-right",3,"queryParams"],["mat-raised-button","",1,"btn","btn-warning","float-right",3,"click"],[1,"fa","fa-search"],["mat-raised-button","",1,"btn","btn-info","float-right",3,"click"],[1,"fa","fa-plus-square"],[1,"container-fluid"],[1,"form-container",3,"formGroup"],[1,"col-md-6","col-12"],["appearance","legacy"],["matInput","","type","text","formControlName","emailQuery"],["matInput","","type","text","formControlName","mobileQuery"],["type","file","name","uploadedFile",1,"file-upload",3,"change"],["type","button",1,"btn","btn-primary","pull-left","ad-qus","font-dro",3,"click"],[1,"fa","fa-upload"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","Name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Email"],["matColumnDef","Mobile"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-mini-fab","","color","warn","matTooltip","delete student",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(a,e){1&a&&(t._UZ(0,"ngx-spinner"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"mat-card"),t.TgZ(4,"mat-card-title"),t._uU(5),t.ALo(6,"translate"),t.TgZ(7,"a",2),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"a",3),t.NdJ("click",function(){return e.searchStudents(1)}),t._uU(11),t.ALo(12,"translate"),t._UZ(13,"i",4),t.qZA(),t.TgZ(14,"a",5),t.NdJ("click",function(){return e.addStudent()}),t._uU(15),t.ALo(16,"translate"),t._UZ(17,"i",6),t.qZA(),t.qZA(),t.TgZ(18,"mat-card-content",7),t.TgZ(19,"div",0),t.TgZ(20,"div",1),t.TgZ(21,"form",8),t.TgZ(22,"div",0),t.TgZ(23,"div",9),t.TgZ(24,"mat-form-field",10),t.TgZ(25,"mat-label"),t._uU(26),t.ALo(27,"translate"),t.qZA(),t._UZ(28,"input",11),t.qZA(),t.qZA(),t.TgZ(29,"div",9),t.TgZ(30,"mat-form-field",10),t.TgZ(31,"mat-label"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t._UZ(34,"input",12),t.qZA(),t.qZA(),t.TgZ(35,"div",9),t.TgZ(36,"mat-label"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"input",13),t.NdJ("change",function(r){return e.onChange(r)}),t.qZA(),t.qZA(),t.TgZ(40,"div",9),t.TgZ(41,"button",14),t.NdJ("click",function(){return e.uploadStudentsByExcel()}),t._UZ(42,"i",15),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(45,"div",0),t.TgZ(46,"div",1),t.TgZ(47,"mat-card"),t.TgZ(48,"mat-card-content"),t.TgZ(49,"mat-form-field",16),t.TgZ(50,"mat-label"),t._uU(51,"Filter"),t.qZA(),t.TgZ(52,"input",17,18),t.NdJ("keyup",function(r){return e.applyFilter(r)}),t.qZA(),t.qZA(),t.TgZ(54,"div",19),t.TgZ(55,"table",20),t.ynx(56,21),t.YNc(57,si,3,3,"th",22),t.YNc(58,ui,2,1,"td",23),t.BQk(),t.ynx(59,24),t.YNc(60,di,3,3,"th",22),t.YNc(61,ci,2,1,"td",23),t.BQk(),t.ynx(62,25),t.YNc(63,mi,3,3,"th",22),t.YNc(64,pi,2,1,"td",23),t.BQk(),t.ynx(65,26),t.YNc(66,_i,2,0,"th",22),t.YNc(67,hi,4,0,"td",23),t.BQk(),t.YNc(68,gi,1,0,"tr",27),t.YNc(69,fi,1,0,"tr",28),t.YNc(70,Zi,3,1,"tr",29),t.qZA(),t.TgZ(71,"mat-paginator",30),t.NdJ("page",function(r){return e.searchStudents(r.pageIndex+1)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(5),t.hij(" ",t.lcZ(6,16,"labels.AssignStudentToGroup")," "),t.xp6(2),t.Q6J("queryParams",t.VKq(32,vi,e.functionId)),t.xp6(1),t.hij(" ",t.lcZ(9,18,"General.Back")," "),t.xp6(3),t.hij(" ",t.lcZ(12,20,"General.Search")," "),t.xp6(4),t.hij(" ",t.lcZ(16,22,"General.Add")," "),t.xp6(6),t.Q6J("formGroup",e.myForm),t.xp6(5),t.hij(" ",t.lcZ(27,24,"labels.Email")," "),t.xp6(6),t.hij(" ",t.lcZ(33,26,"labels.MobileNo")," "),t.xp6(5),t.hij(" ",t.lcZ(38,28,"labels.ExcelSheet")," "),t.xp6(6),t.hij(" ",t.lcZ(44,30,"General.Upload")," "),t.xp6(12),t.Q6J("dataSource",e.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(34,Ai))("length",e.groupCount)("pageSize",10))},directives:[C.Ro,f.a8,f.n5,q.zs,I.yS,f.dn,s._Y,s.JL,s.sg,b.KE,b.hX,k.Nt,s.Fj,s.JJ,s.u,Z.BZ,w.YE,Z.w1,Z.fO,Z.Dz,Z.as,Z.nj,Z.Ee,Q.NW,Z.ge,w.nU,Z.ev,q.lW,H.gM,X.Hw,Z.XQ,Z.Gk],pipes:[F.X$],styles:[""]}),n}(),Ti=h(2397),rt=h(226);function Ci(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1," You must enter a value. "),t.qZA())}function Ii(n,o){if(1&n&&(t.TgZ(0,"mat-hint",15),t.YNc(1,Ci,2,0,"span",16),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==a.FormCtrl.attendancevalue.errors?null:a.FormCtrl.attendancevalue.errors.required)||(null==a.FormCtrl.attendancevalue.errors?null:a.FormCtrl.attendancevalue.errors.minusNum))}}function yi(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1," You must enter a value. "),t.qZA())}function qi(n,o){if(1&n&&(t.TgZ(0,"mat-hint",15),t.YNc(1,yi,2,0,"span",16),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==a.FormCtrl.absencevalue.errors?null:a.FormCtrl.absencevalue.errors.required)||(null==a.FormCtrl.absencevalue.errors?null:a.FormCtrl.absencevalue.errors.minusNum))}}function xi(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"button",17),t.NdJ("click",function(){var l=t.CHM(a).$implicit;return t.oxw().DeleateLecturePointDialog(l)}),t.TgZ(7,"mat-icon"),t._uU(8,"delete"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){var e=o.$implicit;t.xp6(2),t.Oqu(e.AttendanceValue),t.xp6(2),t.Oqu(e.AbsenceValue)}}function Si(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"pagination-controls",18),t.NdJ("pageChange",function(r){t.CHM(a);var l=t.oxw();return l.LecturePage=r,l.getLectureCustomPoints(r)}),t.qZA()}if(2&n){var e=t.oxw();t.Q6J("maxSize",e.maxSize)}}var Ui=function(o){return{functionId:o}},ji=function(o,a){return{itemsPerPage:5,currentPage:o,totalItems:a}},Li=function(){var n=function(){function o(a,e,i,r,l,u){var c=this;(0,U.Z)(this,o),this.route=a,this.fb=e,this.toastr=i,this.PointsService=r,this.dialog=l,this.spinner=u,this.submitted=!1,this.p=1,this.maxSize=9,this.route.queryParamMap.subscribe(function(_){c.subjectId=_.get("subjectId")}),this.route.paramMap.subscribe(function(_){c.materialId=_.get("materialId")}),this.route.queryParamMap.subscribe(function(_){c.subjectId=_.get("subjectId"),c.route.queryParamMap.subscribe(function(d){c.functionId=Number(d.get("functionId"))})})}return(0,S.Z)(o,[{key:"ngOnInit",value:function(){this.getLectureCustomPoints(1),this.myForm=this.fb.group({itemId:[this.materialId,s.kI.required],ByQuestion:[!1,s.kI.required],questionAttempt:[!0,s.kI.required],value:[0,[s.kI.required,j.D.minusNum]],questionAttempts:[0,[j.D.minusNum]],attendancevalue:["",[s.kI.required,j.D.minusNum]],absencevalue:["",[s.kI.required,j.D.minusNum]]}),this.changeQuestionAttemptsValidation(!0)}},{key:"FormCtrl",get:function(){return this.myForm.controls}},{key:"addLectureCustomPoint",value:function(){var i,r,l,u,c,_,d,e=this;this.submitted=!0;var g={itemId:null===(i=this.FormCtrl)||void 0===i?void 0:i.itemId.value,ByQuestion:null===(r=this.FormCtrl)||void 0===r?void 0:r.ByQuestion.value,absencevalue:null===(l=this.FormCtrl)||void 0===l?void 0:l.absencevalue.value,attendancevalue:null===(u=this.FormCtrl)||void 0===u?void 0:u.attendancevalue.value,questionAttempts:null===(c=this.FormCtrl)||void 0===c?void 0:c.questionAttempts.value,questionAttempt:null===(_=this.FormCtrl)||void 0===_?void 0:_.questionAttempt.value,value:null===(d=this.FormCtrl)||void 0===d?void 0:d.value.value};this.myForm.valid&&(this.spinner.show(),this.PointsService.addLectureCustomPoint(g).subscribe(function(v){var T,E;1==v.returnValue&&(e.getLectureCustomPoints(1),e.toastr.success("\u062a\u0645 \u0625\u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u0646\u0642\u0627\u0637"),e.submitted=!1,e.myForm.reset(),null===(T=e.FormCtrl)||void 0===T||T.ByQuestion.setValue(!0),null===(E=e.FormCtrl)||void 0===E||E.questionAttempt.setValue(!0)),e.spinner.hide()}))}},{key:"getLectureCustomPoints",value:function(e){var i=this;this.spinner.show(),this.PointsService.getLectureCustomPoints(e,this.materialId).subscribe(function(r){1==r.returnValue&&(i.itemsCount=r.itemsCount,i.Points=r.points),i.spinner.hide()})}},{key:"deleteLectureCustomPoint",value:function(e){var i=this;this.spinner.show(),this.PointsService.deleteLectureCustomPoint(e.Id).subscribe(function(r){if(1==r.returnValue){var l=i.Points.findIndex(function(u){return u===e});i.Points.splice(l,1),i.toastr.success("\u062a\u0645 \u0627\u0644\u062d\u0630\u0641")}i.spinner.hide()})}},{key:"DeleateLecturePointDialog",value:function(e){var i=this;this.dialog.open(J.F,{data:{msg:"".concat(e.Value,": points")}}).afterClosed().subscribe(function(r){r&&i.deleteLectureCustomPoint(e)})}},{key:"track",value:function(e,i){return i.Id}},{key:"changeQuestionAttemptsValidation",value:function(e){1==e&&this.myForm.controls.questionAttempts.setValidators([s.kI.required,j.D.minusNum]),0==e&&(this.myForm.controls.questionAttempts.reset(),this.myForm.controls.questionAttempts.clearValidators()),this.FormCtrl.questionAttempts.updateValueAndValidity()}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(I.gz),t.Y36(s.qu),t.Y36(A._W),t.Y36(Ti.q),t.Y36(x.uw),t.Y36(C.t2))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-material-custome-points"]],decls:47,vars:37,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","",1,"btn","btn-warning","bg-light-warning","float-right",3,"routerLink","queryParams"],[1,"container-fluid"],[3,"formGroup"],[1,"col-lg-4","col-12"],["appearance","legacy"],["matInput","","type","number","formControlName","attendancevalue"],["class","text-danger",4,"ngIf"],["matInput","","type","number","formControlName","absencevalue"],["align","end"],["mat-raised-button","","type","button",1,"btn","btn-primary",3,"click"],[1,"table"],[4,"ngFor","ngForOf","ngForTrackBy"],["dir","ltr","previousLabel","","nextLabel","",3,"maxSize","pageChange",4,"ngIf"],[1,"text-danger"],[4,"ngIf"],["mat-mini-fab","","color","warn",3,"click"],["dir","ltr","previousLabel","","nextLabel","",3,"maxSize","pageChange"]],template:function(a,e){1&a&&(t._UZ(0,"ngx-spinner"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"mat-card"),t.TgZ(4,"mat-card-title"),t._uU(5),t.ALo(6,"translate"),t.TgZ(7,"a",2),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.qZA(),t.TgZ(10,"mat-card-content",3),t.TgZ(11,"form",4),t.TgZ(12,"div",0),t.TgZ(13,"div",5),t.TgZ(14,"mat-form-field",6),t.TgZ(15,"mat-label"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._UZ(18,"input",7),t.YNc(19,Ii,2,1,"mat-hint",8),t.qZA(),t.qZA(),t.TgZ(20,"div",5),t.TgZ(21,"mat-form-field",6),t.TgZ(22,"mat-label"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t._UZ(25,"input",9),t.YNc(26,qi,2,1,"mat-hint",8),t.qZA(),t.qZA(),t.qZA(),t.TgZ(27,"mat-card-actions",10),t.TgZ(28,"button",11),t.NdJ("click",function(){return e.addLectureCustomPoint()}),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.qZA(),t.qZA(),t.ynx(31),t.TgZ(32,"table",12),t.TgZ(33,"thead"),t.TgZ(34,"tr"),t.TgZ(35,"th"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"th"),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"th"),t._uU(42,"actions"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(43,"tbody"),t.YNc(44,xi,9,2,"tr",13),t.ALo(45,"paginate"),t.qZA(),t.YNc(46,Si,1,1,"pagination-controls",14),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(5),t.hij(" ",t.lcZ(6,15,"labels.LecturePoints")," "),t.xp6(2),t.MGl("routerLink","/dashboard/educational-setup/subjects/material-search/",e.subjectId,""),t.Q6J("queryParams",t.VKq(32,Ui,e.functionId)),t.xp6(1),t.hij(" ",t.lcZ(9,17,"General.Back")," "),t.xp6(3),t.Q6J("formGroup",e.myForm),t.xp6(5),t.hij(" ",t.lcZ(17,19,"labels.AttendancePoints")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrl.attendancevalue.invalid&&(e.FormCtrl.attendancevalue.touched||e.submitted)),t.xp6(4),t.hij(" ",t.lcZ(24,21,"labels.AbsencePoints")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrl.absencevalue.invalid&&(e.FormCtrl.absencevalue.touched||e.submitted)),t.xp6(3),t.hij(" ",t.lcZ(30,23,"General.Add")," "),t.xp6(7),t.hij(" ",t.lcZ(37,25,"labels.AttendancePoints")," "),t.xp6(3),t.hij(" ",t.lcZ(40,27,"labels.AbsencePoints")," "),t.xp6(5),t.Q6J("ngForOf",t.xi3(45,29,e.Points,t.WLB(34,ji,e.p,e.itemsCount)))("ngForTrackBy",e.track),t.xp6(2),t.Q6J("ngIf",(null==e.Points?null:e.Points.length)>5))},directives:[C.Ro,f.a8,f.n5,q.zs,I.yS,f.dn,s._Y,s.JL,s.sg,b.KE,b.hX,k.Nt,s.wV,s.Fj,s.JJ,s.u,y.O5,f.hq,q.lW,y.sg,b.bx,X.Hw,p.LS,rt.Lv],pipes:[F.X$,p._s],styles:[""]}),n}(),$=h(9430);function Fi(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"subjects.AddLesson")," "))}function Ni(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"subjects.UpdateLesson")," - ",a.lesson_name," ")}}function Mi(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function ki(n,o){if(1&n&&(t.TgZ(0,"mat-hint",21),t.YNc(1,Mi,3,3,"span",1),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrls.thumbnailPic.errors?null:a.FormCtrls.thumbnailPic.errors.required)}}function wi(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Di(n,o){if(1&n&&(t.TgZ(0,"mat-hint",21),t.YNc(1,wi,3,3,"span",1),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==a.FormCtrls.lesson_ar_name.errors?null:a.FormCtrls.lesson_ar_name.errors.required)&&(null==a.FormCtrls.lesson_ar_name.errors?null:a.FormCtrls.lesson_ar_name.errors.whiteSpace))}}function Yi(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Ei(n,o){if(1&n&&(t.TgZ(0,"mat-hint",21),t.YNc(1,Yi,3,3,"span",1),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==a.FormCtrls.lesson_en_name.errors?null:a.FormCtrls.lesson_en_name.errors.required)&&(null==a.FormCtrls.lesson_en_name.errors?null:a.FormCtrls.lesson_en_name.errors.whiteSpace))}}function Ji(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){return t.CHM(a),t.oxw().addUpdateLesson()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Add")," "))}function Pi(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){return t.CHM(a),t.oxw().addUpdateLesson()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Update")," "))}var lt=function(){var n=function(){function o(a,e,i,r,l,u,c){(0,U.Z)(this,o),this.fb=a,this.msg=e,this.route=i,this.spinner=r,this.SubjectsService=l,this.data=u,this.dialogRef=c,this.submitted=!1,this.coverPath="https://via.placeholder.com/150",this.unitId=u.unitId,this.lessonId=u.lesson.id,this.lessonId>0&&this.getLessonById()}return(0,S.Z)(o,[{key:"ngOnInit",value:function(){this.myForm=this.fb.group({id:[this.lessonId],lesson_ar_name:["",[s.kI.required,j.D.whiteSpace]],lesson_en_name:["",[s.kI.required,j.D.whiteSpace]],lessonDescription:[""],thumbnailPic:[null,s.kI.required]})}},{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"getLessonById",value:function(){var e=this;this.spinner.show(),this.SubjectsService.getLessonById(this.lessonId).subscribe(function(i){var r;i.addedLesson&&(e.myForm.patchValue(i.addedLesson),e.lesson_name=i.addedLesson.lesson_ar_name,e.coverPath="mozakretyapi".concat(null===(r=i.addedLesson.lessonThumb)||void 0===r?void 0:r.attach_path),e.spinner.hide())})}},{key:"addUpdateLesson",value:function(){var i,r,l,u,c,e=this;this.submitted=!0;var _={},d={};d.id=null===(i=this.FormCtrls.id)||void 0===i?void 0:i.value,d.lesson_ar_name=null===(r=this.FormCtrls.lesson_ar_name)||void 0===r?void 0:r.value,d.lesson_en_name=null===(l=this.FormCtrls.lesson_en_name)||void 0===l?void 0:l.value,d.lessonDescription=null===(u=this.FormCtrls.lessonDescription)||void 0===u?void 0:u.value,d.thumbnailPic=null===(c=this.FormCtrls.thumbnailPic)||void 0===c?void 0:c.value,_.addedLesson=d,this.myForm.valid&&(this.spinner.show(),this.SubjectsService.addUpdateLesson(this.unitId,_).subscribe(function(g){g&&(e.dialogRef.close(g),e.spinner.hide(),e.msg.success(0==e.lessonId?"General.AddSuccessfully":"General.UpdeteSuccessfully"))}))}},{key:"onChange",value:function(e){var i=this,r=e.target.files[0].name,l=e.target.files[0].size,u=e.target.files[0].type,c=e.target.files[0].lastModified,_=e.target.files[0].lastModifiedDate;if(e.target.files){var d=new FileReader;d.readAsDataURL(e.target.files[0]),d.onload=function(g){var v=g.target.result,T={FileAsBase64:v,name:r,size:l,type:u,LastModified:c,LastModifiedDate:_};i.coverPath=v,i.FormCtrls.thumbnailPic.setValue(T)}}}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(s.qu),t.Y36($.K),t.Y36(I.gz),t.Y36(C.t2),t.Y36(N),t.Y36(x.WI),t.Y36(x.so))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-lesson"]],decls:44,vars:25,consts:[["mat-dialog-title","",1,"primary-color"],[4,"ngIf"],["mat-dialog-content",""],[3,"formGroup"],[1,"row"],[1,"col-9"],[1,"media"],["width","70","height","70","alt","avatar",1,"rounded","mr-3",3,"src"],[1,"col-3"],["type","button","mat-raised-button","",1,"btn","btn-danger",3,"click"],["hidden","","type","file","accept","image/*","id","file","formControlName","thumbnailPic",3,"change"],["fileInput",""],["class","danger",4,"ngIf"],[1,"col-12"],["appearance","legacy"],["matInput","","type","text","formControlName","lesson_ar_name"],["matInput","","type","text","formControlName","lesson_en_name"],["matInput","","formControlName","lessonDescription"],["mat-dialog-actions",""],["mat-raised-button","",1,"btn","btn-danger","float-right",3,"mat-dialog-close"],["mat-raised-button","","cdkFocusInitial","","class","btn btn-primary float-right",3,"click",4,"ngIf"],[1,"danger"],["mat-raised-button","","cdkFocusInitial","",1,"btn","btn-primary","float-right",3,"click"]],template:function(a,e){if(1&a){var i=t.EpF();t.TgZ(0,"h1",0),t.YNc(1,Fi,3,3,"span",1),t.YNc(2,Ni,3,4,"span",1),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"form",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t._UZ(8,"img",7),t.qZA(),t.qZA(),t.TgZ(9,"div",8),t.TgZ(10,"button",9),t.NdJ("click",function(){return t.CHM(i),t.MAs(14).click()}),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"input",10,11),t.NdJ("change",function(l){return e.onChange(l)}),t.qZA(),t.YNc(15,ki,2,1,"mat-hint",12),t.qZA(),t.TgZ(16,"div",13),t.TgZ(17,"mat-form-field",14),t.TgZ(18,"mat-label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",15),t.YNc(22,Di,2,1,"mat-hint",12),t.qZA(),t.qZA(),t.TgZ(23,"div",13),t.TgZ(24,"mat-form-field",14),t.TgZ(25,"mat-label"),t._uU(26),t.ALo(27,"translate"),t.qZA(),t._UZ(28,"input",16),t.YNc(29,Ei,2,1,"mat-hint",12),t.qZA(),t.qZA(),t.TgZ(30,"div",13),t.TgZ(31,"mat-form-field",14),t.TgZ(32,"mat-label"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"textarea",17),t._uU(36," "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div",18),t.TgZ(38,"button",19),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.YNc(41,Ji,3,3,"button",20),t.YNc(42,Pi,3,3,"button",20),t.qZA(),t._UZ(43,"ngx-spinner")}2&a&&(t.xp6(1),t.Q6J("ngIf",0==e.lessonId),t.xp6(1),t.Q6J("ngIf",e.lessonId>0),t.xp6(2),t.Q6J("formGroup",e.myForm),t.xp6(4),t.s9C("src",e.coverPath,t.LSH),t.xp6(3),t.hij(" ",t.lcZ(12,15,"subjects.CoverPhoto")," "),t.xp6(4),t.Q6J("ngIf",e.FormCtrls.thumbnailPic.invalid&&(e.FormCtrls.thumbnailPic.touched||e.submitted)),t.xp6(4),t.hij(" ",t.lcZ(20,17,"General.ar_name")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrls.lesson_ar_name.invalid&&(e.FormCtrls.lesson_ar_name.touched||e.submitted)),t.xp6(4),t.hij(" ",t.lcZ(27,19,"General.en_name")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrls.lesson_en_name.invalid&&(e.FormCtrls.lesson_en_name.touched||e.submitted)),t.xp6(4),t.hij(" ",t.lcZ(34,21,"General.Description")," "),t.xp6(5),t.Q6J("mat-dialog-close",!1),t.xp6(1),t.hij(" ",t.lcZ(40,23,"General.Close")," "),t.xp6(2),t.Q6J("ngIf",0==e.lessonId),t.xp6(1),t.Q6J("ngIf",e.lessonId>0))},directives:[x.uh,y.O5,x.xY,s._Y,s.JL,s.sg,q.lW,s.Fj,s.JJ,s.u,b.KE,b.hX,k.Nt,x.H8,x.ZT,C.Ro,b.bx],pipes:[F.X$],styles:[""]}),n}();function Qi(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"subjects.AddUnit")," "))}function Gi(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"subjects.UpdateUnit")," - ",a.unit_name," ")}}function Bi(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Oi(n,o){if(1&n&&(t.TgZ(0,"mat-hint",21),t.YNc(1,Bi,3,3,"span",1),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrls.thumbnailPic.errors?null:a.FormCtrls.thumbnailPic.errors.required)}}function Vi(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Ri(n,o){if(1&n&&(t.TgZ(0,"mat-hint",21),t.YNc(1,Vi,3,3,"span",1),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==a.FormCtrls.unit_ar_name.errors?null:a.FormCtrls.unit_ar_name.errors.required)&&(null==a.FormCtrls.unit_ar_name.errors?null:a.FormCtrls.unit_ar_name.errors.whiteSpace))}}function zi(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function $i(n,o){if(1&n&&(t.TgZ(0,"mat-hint",21),t.YNc(1,zi,3,3,"span",1),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==a.FormCtrls.unit_en_name.errors?null:a.FormCtrls.unit_en_name.errors.required)&&(null==a.FormCtrls.unit_en_name.errors?null:a.FormCtrls.unit_en_name.errors.whiteSpace))}}function Hi(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){return t.CHM(a),t.oxw().addUpdateUnit()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Add")," "))}function Wi(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){return t.CHM(a),t.oxw().addUpdateUnit()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Update")," "))}var Xi=function(){var n=function(){function o(a,e,i,r,l,u,c){(0,U.Z)(this,o),this.fb=a,this.msg=e,this.route=i,this.spinner=r,this.SubjectsService=l,this.data=u,this.dialogRef=c,this.submitted=!1,this.coverPath="https://via.placeholder.com/150",this.subjectId=u.subjectId,console.log("subjectId",this.subjectId),this.unitId=u.unitId,this.unitId>0&&this.getUnitById()}return(0,S.Z)(o,[{key:"ngOnInit",value:function(){this.myForm=this.fb.group({id:[this.unitId],unit_ar_name:["",[s.kI.required,j.D.whiteSpace]],unit_en_name:["",[s.kI.required,j.D.whiteSpace]],unitDescription:[""],thumbnailPic:[null,s.kI.required]})}},{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"getUnitById",value:function(){var e=this;this.spinner.show(),this.SubjectsService.getUnitById(this.unitId).subscribe(function(i){var r;i.addedUnit&&(e.myForm.patchValue(i.addedUnit),e.unit_name=i.addedUnit.unit_ar_name,e.subjectId=i.addedUnit.subjectid,e.coverPath="mozakretyapi".concat(null===(r=i.addedUnit.unitThumb)||void 0===r?void 0:r.attach_path),e.spinner.hide())})}},{key:"addUpdateUnit",value:function(){var i,r,l,u,c,e=this;this.submitted=!0;var _={},d={},g={};d.id=null===(i=this.FormCtrls.id)||void 0===i?void 0:i.value,d.unit_ar_name=null===(r=this.FormCtrls.unit_ar_name)||void 0===r?void 0:r.value,d.unit_en_name=null===(l=this.FormCtrls.unit_en_name)||void 0===l?void 0:l.value,d.unitDescription=null===(u=this.FormCtrls.unitDescription)||void 0===u?void 0:u.value,d.thumbnailPic=null===(c=this.FormCtrls.thumbnailPic)||void 0===c?void 0:c.value,g.subject_id=this.subjectId,_.addedUnit=d,_.currentSubject=g,this.myForm.valid&&(this.spinner.show(),this.SubjectsService.addUpdateUnit(_).subscribe(function(v){console.log("addUpdateUnit",v),v&&(e.spinner.hide(),e.dialogRef.close(v),e.msg.success(0==e.unitId?"General.AddSuccessfully":"General.UpdeteSuccessfully"))}))}},{key:"onChange",value:function(e){var i=this,r=e.target.files[0].name,l=e.target.files[0].size,u=e.target.files[0].type,c=e.target.files[0].lastModified,_=e.target.files[0].lastModifiedDate;if(e.target.files){var d=new FileReader;d.readAsDataURL(e.target.files[0]),d.onload=function(g){var v=g.target.result,T={FileAsBase64:v,name:r,size:l,type:u,LastModified:c,LastModifiedDate:_};i.coverPath=v,i.FormCtrls.thumbnailPic.setValue(T)}}}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(s.qu),t.Y36($.K),t.Y36(I.gz),t.Y36(C.t2),t.Y36(N),t.Y36(x.WI),t.Y36(x.so))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-unit"]],decls:44,vars:25,consts:[["mat-dialog-title","",1,"primary-color"],[4,"ngIf"],["mat-dialog-content",""],[3,"formGroup"],[1,"row"],[1,"col-9"],[1,"media"],["width","70","height","70","alt","avatar",1,"rounded","mr-3",3,"src"],[1,"col-3"],["type","button","mat-raised-button","",1,"btn","btn-danger",3,"click"],["hidden","","type","file","accept","image/*","id","file","formControlName","thumbnailPic",3,"change"],["fileInput",""],["class","danger",4,"ngIf"],[1,"col-12"],["appearance","legacy"],["matInput","","type","text","formControlName","unit_ar_name"],["matInput","","type","text","formControlName","unit_en_name"],["matInput","","formControlName","unitDescription"],["mat-dialog-actions",""],["mat-raised-button","",1,"btn","btn-danger","float-right",3,"mat-dialog-close"],["mat-raised-button","","cdkFocusInitial","","class","btn btn-primary float-right",3,"click",4,"ngIf"],[1,"danger"],["mat-raised-button","","cdkFocusInitial","",1,"btn","btn-primary","float-right",3,"click"]],template:function(a,e){if(1&a){var i=t.EpF();t.TgZ(0,"h1",0),t.YNc(1,Qi,3,3,"span",1),t.YNc(2,Gi,3,4,"span",1),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"form",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t._UZ(8,"img",7),t.qZA(),t.qZA(),t.TgZ(9,"div",8),t.TgZ(10,"button",9),t.NdJ("click",function(){return t.CHM(i),t.MAs(14).click()}),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"input",10,11),t.NdJ("change",function(l){return e.onChange(l)}),t.qZA(),t.YNc(15,Oi,2,1,"mat-hint",12),t.qZA(),t.TgZ(16,"div",13),t.TgZ(17,"mat-form-field",14),t.TgZ(18,"mat-label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",15),t.YNc(22,Ri,2,1,"mat-hint",12),t.qZA(),t.qZA(),t.TgZ(23,"div",13),t.TgZ(24,"mat-form-field",14),t.TgZ(25,"mat-label"),t._uU(26),t.ALo(27,"translate"),t.qZA(),t._UZ(28,"input",16),t.YNc(29,$i,2,1,"mat-hint",12),t.qZA(),t.qZA(),t.TgZ(30,"div",13),t.TgZ(31,"mat-form-field",14),t.TgZ(32,"mat-label"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"textarea",17),t._uU(36," "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div",18),t.TgZ(38,"button",19),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.YNc(41,Hi,3,3,"button",20),t.YNc(42,Wi,3,3,"button",20),t.qZA(),t._UZ(43,"ngx-spinner")}2&a&&(t.xp6(1),t.Q6J("ngIf",0==e.unitId),t.xp6(1),t.Q6J("ngIf",e.unitId>0),t.xp6(2),t.Q6J("formGroup",e.myForm),t.xp6(4),t.s9C("src",e.coverPath,t.LSH),t.xp6(3),t.hij(" ",t.lcZ(12,15,"subjects.CoverPhoto")," "),t.xp6(4),t.Q6J("ngIf",e.FormCtrls.thumbnailPic.invalid&&(e.FormCtrls.thumbnailPic.touched||e.submitted)),t.xp6(4),t.hij(" ",t.lcZ(20,17,"General.ar_name")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrls.unit_ar_name.invalid&&(e.FormCtrls.unit_ar_name.touched||e.submitted)),t.xp6(4),t.hij(" ",t.lcZ(27,19,"General.en_name")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrls.unit_en_name.invalid&&(e.FormCtrls.unit_en_name.touched||e.submitted)),t.xp6(4),t.hij(" ",t.lcZ(34,21,"General.Description")," "),t.xp6(5),t.Q6J("mat-dialog-close",!1),t.xp6(1),t.hij(" ",t.lcZ(40,23,"General.Close")," "),t.xp6(2),t.Q6J("ngIf",0==e.unitId),t.xp6(1),t.Q6J("ngIf",e.unitId>0))},directives:[x.uh,y.O5,x.xY,s._Y,s.JL,s.sg,q.lW,s.Fj,s.JJ,s.u,b.KE,b.hX,k.Nt,x.H8,x.ZT,C.Ro,b.bx],pipes:[F.X$],styles:[".primary-color[_ngcontent-%COMP%]{border-bottom:1px solid}"]}),n}();function Ki(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function to(n,o){if(1&n&&(t.TgZ(0,"mat-hint",16),t.YNc(1,Ki,3,3,"span",17),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==a.FormCtrls.topic_ar_name.errors?null:a.FormCtrls.topic_ar_name.errors.required)&&(null==a.FormCtrls.topic_ar_name.errors?null:a.FormCtrls.topic_ar_name.errors.whiteSpace))}}function eo(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function no(n,o){if(1&n&&(t.TgZ(0,"mat-hint",16),t.YNc(1,eo,3,3,"span",17),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==a.FormCtrls.topic_en_name.errors?null:a.FormCtrls.topic_en_name.errors.required)&&(null==a.FormCtrls.topic_en_name.errors?null:a.FormCtrls.topic_en_name.errors.whiteSpace))}}function ao(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){return t.CHM(a),t.oxw().addUpdateTopic()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Add")," "))}function io(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){return t.CHM(a),t.oxw().addUpdateTopic()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Update")," "))}function oo(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"tr",24),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t.TgZ(8,"button",25),t.NdJ("click",function(){var u=t.CHM(a).$implicit;return t.oxw(2).getTopicById(u)}),t.TgZ(9,"mat-icon"),t._uU(10,"edit"),t.qZA(),t.qZA(),t.TgZ(11,"button",26),t.NdJ("click",function(){var u=t.CHM(a).$implicit;return t.oxw(2).openDeleateDialog(u)}),t.TgZ(12,"mat-icon"),t._uU(13,"delete"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){var e=o.$implicit,i=o.index;t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Oqu(e.topic_ar_name),t.xp6(2),t.Oqu(e.topic_en_name)}}function ro(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"pagination-controls",27),t.NdJ("pageChange",function(r){t.CHM(a);var l=t.oxw(2);return l.p=r,l.getTopicsByLessonId()}),t.qZA()}if(2&n){var e=t.oxw(2);t.Q6J("maxSize",e.maxSize)}}var lo=function(o,a){return{itemsPerPage:10,currentPage:o,totalItems:a}};function so(n,o){if(1&n&&(t.TgZ(0,"div",19),t.TgZ(1,"table",20),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"actions\xad"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"tbody",21),t.YNc(15,oo,14,3,"tr",22),t.ALo(16,"paginate"),t.qZA(),t.qZA(),t.YNc(17,ro,1,1,"pagination-controls",23),t.qZA()),2&n){var a=t.oxw();t.xp6(7),t.Oqu(t.lcZ(8,5,"General.ar_name")),t.xp6(3),t.Oqu(t.lcZ(11,7,"General.en_name")),t.xp6(5),t.Q6J("ngForOf",t.xi3(16,9,a.topics,t.WLB(12,lo,a.p,a.itemsCount)))("ngForTrackBy",a.track),t.xp6(2),t.Q6J("ngIf",(null==a.topics?null:a.topics.length)>0)}}function uo(n,o){1&n&&(t.TgZ(0,"div",28),t.TgZ(1,"div",29),t.TgZ(2,"h4",30),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"subjects.TopicsIsEmpty")," "))}var co=function(){var n=function(){function o(a,e,i,r,l,u,c){(0,U.Z)(this,o),this.spinner=a,this.msg=e,this.dialog=i,this.fb=r,this.subjectsService=l,this.data=u,this.dialogRef=c,this.submitted=!1,this.p=1,this.maxSize=9,this.lessonId=u.lessonId}return(0,S.Z)(o,[{key:"ngOnInit",value:function(){this.getTopicsByLessonId(),this.myForm=this.fb.group({id:[0],topic_ar_name:["",[s.kI.required,s.kI.maxLength(100),j.D.whiteSpace]],topic_en_name:[""]})}},{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"getTopicsByLessonId",value:function(){var e=this;this.spinner.show(),this.subjectsService.getTopicsByLessonId(this.p,this.lessonId).subscribe(function(i){e.topics=i.edu_topic,e.itemsCount=i.topicsSize,e.spinner.hide()})}},{key:"getTopicById",value:function(e){this.myForm.patchValue(e)}},{key:"getTopicByIds",value:function(e){var i=this;this.spinner.show(),this.subjectsService.getTopicById(this.lessonId,e).subscribe(function(r){null!=r.id&&(i.myForm.patchValue(r),i.spinner.hide())})}},{key:"addUpdateTopic",value:function(){var i,e=this;this.submitted=!0;var r={};r.LessonID=this.lessonId,r.id=null===(i=this.FormCtrls.id)||void 0===i?void 0:i.value,r.topic_ar_name=this.FormCtrls.topic_ar_name.value,r.topic_en_name=this.FormCtrls.topic_en_name.value,r.state=!0,this.myForm.valid&&(this.spinner.show(),this.subjectsService.addUpdateTopic(r).subscribe(function(l){var u;1==l.returnValue&&(e.submitted=!1,e.myForm.reset(),null===(u=e.FormCtrls.id)||void 0===u||u.setValue(0),e.getTopicsByLessonId(),e.msg.success(0==r.id?"General.AddSuccessfully":"General.UpdeteSuccessfully")),e.spinner.hide()}))}},{key:"openDeleateDialog",value:function(e){var i=this;this.dialog.open(J.F,{data:{msg:e.topic_ar_name}}).afterClosed().subscribe(function(r){r&&i.deleteTopic(e)})}},{key:"deleteTopic",value:function(e){var i=this;this.spinner.show(),this.subjectsService.deleteTopic(e.id).subscribe(function(r){if(1==r.returnValue){i.msg.success("General.DeleteSuccessfully");var l=i.topics.indexOf(e);i.topics.splice(l,1)}i.spinner.hide()})}},{key:"track",value:function(e,i){return i.id}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(C.t2),t.Y36($.K),t.Y36(x.uw),t.Y36(s.qu),t.Y36(N),t.Y36(x.WI),t.Y36(x.so))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-topics"]],decls:32,vars:20,consts:[["mat-dialog-title","",1,"primary-color"],["mat-dialog-content",""],[3,"formGroup"],[1,"row"],[1,"col-6"],["appearance","legacy"],["matInput","","type","text","formControlName","topic_ar_name"],["class","danger",4,"ngIf"],["matInput","","type","text","formControlName","topic_en_name"],[1,"col-12"],["mat-raised-button","","cdkFocusInitial","","class","btn btn-primary float-right",3,"click",4,"ngIf"],["class","full-wid-table","style","overflow: hidden !important",4,"ngIf","ngIfElse"],["class","text-center"],["topicsEmpty",""],["mat-dialog-actions",""],["mat-raised-button","",1,"btn","btn-danger","float-right",3,"mat-dialog-close"],[1,"danger"],[4,"ngIf"],["mat-raised-button","","cdkFocusInitial","",1,"btn","btn-primary","float-right",3,"click"],[1,"full-wid-table",2,"overflow","hidden !important"],["id","sotbmod",1,"table","table-striped","table-hover","table-full-width","rtl"],["id","addedExamQuestionsHolder"],["id","ExamQuestion-2626853",4,"ngFor","ngForOf","ngForTrackBy"],["dir","ltr","previousLabel","","nextLabel","",3,"maxSize","pageChange",4,"ngIf"],["id","ExamQuestion-2626853"],["mat-mini-fab","","color","primary",1,"mr-1",3,"click"],["mat-mini-fab","","color","warn",1,"mr-1",3,"click"],["dir","ltr","previousLabel","","nextLabel","",3,"maxSize","pageChange"],[1,"col-4"],["role","alert",1,"alert","bg-light-warning","alert-dismissible","mb-2"],[1,"alert-heading","mb-2"]],template:function(a,e){if(1&a&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div",1),t.TgZ(4,"form",2),t.TgZ(5,"div",3),t.TgZ(6,"div",4),t.TgZ(7,"mat-form-field",5),t.TgZ(8,"mat-label"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t._UZ(11,"input",6),t.YNc(12,to,2,1,"mat-hint",7),t.qZA(),t.qZA(),t.TgZ(13,"div",4),t.TgZ(14,"mat-form-field",5),t.TgZ(15,"mat-label"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._UZ(18,"input",8),t.YNc(19,no,2,1,"mat-hint",7),t.qZA(),t.qZA(),t.TgZ(20,"div",9),t.YNc(21,ao,3,3,"button",10),t.YNc(22,io,3,3,"button",10),t.qZA(),t.qZA(),t.qZA(),t._UZ(23,"hr"),t.YNc(24,so,18,15,"div",11),t.YNc(25,uo,5,3,"ng-template",12,13,t.W1O),t.qZA(),t.TgZ(27,"div",14),t.TgZ(28,"button",15),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.qZA(),t._UZ(31,"ngx-spinner")),2&a){var i=t.MAs(26);t.xp6(1),t.hij(" ",t.lcZ(2,12,"subjects.Topics"),"\n"),t.xp6(3),t.Q6J("formGroup",e.myForm),t.xp6(5),t.hij(" ",t.lcZ(10,14,"General.ar_name")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrls.topic_ar_name.invalid&&(e.FormCtrls.topic_ar_name.touched||e.submitted)),t.xp6(4),t.hij(" ",t.lcZ(17,16,"General.en_name")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrls.topic_en_name.invalid&&(e.FormCtrls.topic_en_name.touched||e.submitted)),t.xp6(2),t.Q6J("ngIf",0==(null==e.FormCtrls.id?null:e.FormCtrls.id.value)),t.xp6(1),t.Q6J("ngIf",(null==e.FormCtrls.id?null:e.FormCtrls.id.value)>0),t.xp6(2),t.Q6J("ngIf",(null==e.topics?null:e.topics.length)>0)("ngIfElse",i),t.xp6(4),t.Q6J("mat-dialog-close",!1),t.xp6(1),t.hij(" ",t.lcZ(30,18,"General.Close")," ")}},directives:[x.uh,x.xY,s._Y,s.JL,s.sg,b.KE,b.hX,k.Nt,s.Fj,s.JJ,s.u,y.O5,x.H8,q.lW,x.ZT,C.Ro,b.bx,y.sg,X.Hw,p.LS,rt.Lv],pipes:[F.X$,p._s],styles:[".mat-dialog-content[_ngcontent-%COMP%]{max-height:76vh}"]}),n}();function mo(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"div",5),t.TgZ(1,"mat-card"),t.TgZ(2,"div",6),t._UZ(3,"img",7),t.qZA(),t.TgZ(4,"mat-card-header"),t.TgZ(5,"mat-card-subtitle",8),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"mat-card-content"),t.TgZ(8,"p",8),t._uU(9),t.qZA(),t.qZA(),t.TgZ(10,"mat-card-actions"),t.TgZ(11,"button",9),t.NdJ("click",function(){var l=t.CHM(a).$implicit;return t.oxw(2).openAddTopicDialog(l.id)}),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"button",10),t.NdJ("click",function(){var l=t.CHM(a).$implicit;return t.oxw(2).openAddLessonDialog(l)}),t.TgZ(15,"mat-icon",11),t._uU(16,"edit"),t.qZA(),t.qZA(),t.TgZ(17,"button",10),t.NdJ("click",function(){var l=t.CHM(a).$implicit;return t.oxw(2).openDeleateDialog(l)}),t.TgZ(18,"mat-icon",12),t._uU(19,"delete"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){var e=o.$implicit;t.xp6(3),t.MGl("src","mozakretyapi",null==e.lessonThumb?null:e.lessonThumb.attach_path,"",t.LSH),t.xp6(2),t.Q6J("title",null==e?null:e.lesson_ar_name),t.xp6(1),t.hij(" ",null==e?null:e.lesson_ar_name,""),t.xp6(2),t.Q6J("title",null==e?null:e.lessonDescription),t.xp6(1),t.hij(" ",null==e?null:e.lessonDescription," "),t.xp6(3),t.hij(" ",t.lcZ(13,6,"subjects.Topics")," ")}}function po(n,o){if(1&n&&(t.ynx(0),t.YNc(1,mo,20,8,"div",4),t.BQk()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngForOf",a.lessons)}}function _o(n,o){1&n&&(t.TgZ(0,"div",13),t.TgZ(1,"div",14),t.TgZ(2,"h4",15),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,2,"subjects.LessonsIsEmpty")," "),t.xp6(3),t.Oqu(t.lcZ(7,4,"subjects.clickToAddLesson")))}var ho=function(){var n=function(){function o(a,e,i,r){(0,U.Z)(this,o),this.spinner=a,this.msg=e,this.dialog=i,this.subjectsService=r}return(0,S.Z)(o,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(){this.unitId>0&&this.getLessons(),this.AddedLesson&&this.lessons.push(this.AddedLesson)}},{key:"getLessons",value:function(){var e=this;this.spinner.show(),this.subjectsService.getLessons(this.unitId).subscribe(function(i){e.lessons=i,e.spinner.hide()})}},{key:"deleteLesson",value:function(e){var i=this;this.spinner.show(),this.subjectsService.deleteLesson(e.id).subscribe(function(r){if(1==r.returnValue){var l=i.lessons.indexOf(e);i.lessons.splice(l,1),i.msg.success("General.DeleteSuccessfully")}i.spinner.hide()})}},{key:"openDeleateDialog",value:function(e){var i=this;this.dialog.open(J.F,{data:{msg:e.lesson_ar_name}}).afterClosed().subscribe(function(r){r&&i.deleteLesson(e)})}},{key:"openAddLessonDialog",value:function(e){var i=this;this.dialog.open(lt,{data:{unitId:this.unitId,lesson:e},minWidth:"60vw"}).afterClosed().subscribe(function(r){var l=i.lessons.findIndex(function(u){return u.id==r.id});i.lessons[l]=r})}},{key:"openAddTopicDialog",value:function(e){this.dialog.open(co,{data:{lessonId:e,lesson:null},minWidth:"85vw",maxHeight:"95vh"}).afterClosed().subscribe(function(i){})}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(C.t2),t.Y36($.K),t.Y36(x.uw),t.Y36(N))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-lessons-index"]],inputs:{unitId:"unitId",AddedLesson:"AddedLesson"},features:[t.TTD],decls:4,vars:2,consts:[[1,"row"],[4,"ngIf","ngIfElse"],["class","text-center"],["emptyLessons",""],["class","col-md-3 col-12",4,"ngFor","ngForOf"],[1,"col-md-3","col-12"],[1,"card-img"],["alt","lesson cover",1,"material-card-img",3,"src"],[3,"title"],["mat-button","",3,"click"],["mat-icon-button","",1,"mr-2",3,"click"],["color","primary"],["color","warn"],[1,"col-4"],["role","alert",1,"alert","bg-light-warning","alert-dismissible","mb-2"],[1,"alert-heading","mb-2"]],template:function(a,e){if(1&a&&(t.TgZ(0,"div",0),t.YNc(1,po,2,1,"ng-container",1),t.YNc(2,_o,8,6,"ng-template",2,3,t.W1O),t.qZA()),2&a){var i=t.MAs(3);t.xp6(1),t.Q6J("ngIf",(null==e.lessons?null:e.lessons.length)>0)("ngIfElse",i)}},directives:[y.O5,y.sg,f.a8,f.dk,f.$j,f.dn,f.hq,q.lW,X.Hw],pipes:[F.X$],styles:[".mat-card[_ngcontent-%COMP%]{padding:5px}.mat-card-header[_ngcontent-%COMP%]{max-height:50px;min-height:20px;overflow:hidden;flex-direction:row;text-overflow:ellipsis;white-space:nowrap;display:-webkit-box;-webkit-line-clamp:3}.mat-card-content[_ngcontent-%COMP%]{max-height:50px;height:50px;overflow:hidden}.mat-card-subtitle[_ngcontent-%COMP%], .mat-card-content[_ngcontent-%COMP%]{margin-bottom:10px}"]}),n}();function go(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"div",20),t.TgZ(1,"button",21),t._UZ(2,"i",22),t.qZA(),t.TgZ(3,"div",23),t.ynx(4),t.TgZ(5,"a",24),t.NdJ("click",function(){t.CHM(a);var i=t.oxw().$implicit;return t.oxw().openDeleateDialog(i)}),t._UZ(6,"i",25),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"a",24),t.NdJ("click",function(){t.CHM(a);var i=t.oxw().$implicit;return t.oxw().openAddUnitDialog(i.id)}),t._UZ(10,"i",26),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.BQk(),t.qZA(),t.qZA()}2&n&&(t.xp6(7),t.hij(" ",t.lcZ(8,2,"General.Delete")," "),t.xp6(4),t.hij(" ",t.lcZ(12,4,"General.Edit")," "))}var fo=function(o){return{"bg-light-info":o}};function Zo(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"mat-card",10),t.TgZ(2,"div",0),t.TgZ(3,"div",11),t.TgZ(4,"a",12),t.NdJ("click",function(){var u=t.CHM(a).$implicit;return t.oxw().SelectUnitId(u)}),t._UZ(5,"img",13),t.TgZ(6,"div",14),t.TgZ(7,"div",15),t.TgZ(8,"mat-card-subtitle",16),t._uU(9),t.qZA(),t.qZA(),t.TgZ(10,"p",17),t.TgZ(11,"small",16),t._uU(12),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",18),t.YNc(14,go,13,6,"div",19),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){var e=o.$implicit,i=t.oxw();t.xp6(1),t.Tol(t.VKq(8,fo,i.selectedUnitId==e.id)),t.xp6(4),t.MGl("src","mozakretyapi",null==e.unitThumb?null:e.unitThumb.attach_path,"",t.LSH),t.xp6(3),t.Q6J("title",e.unit_ar_name),t.xp6(1),t.hij(" ",e.unit_ar_name," "),t.xp6(2),t.Q6J("title",e.unitDescription),t.xp6(1),t.Oqu(e.unitDescription),t.xp6(2),t.Q6J("ngIf",(null==i.rowFunctions?null:i.rowFunctions.length)>0)}}var vo=function(o){return{functionId:o}};function bo(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function To(n,o){if(1&n&&(t.TgZ(0,"mat-hint",24),t.YNc(1,bo,3,3,"span",25),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl||null==a.FormCtrl.subject_ar_name||null==a.FormCtrl.subject_ar_name.errors?null:a.FormCtrl.subject_ar_name.errors.required)}}function Co(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Io(n,o){if(1&n&&(t.TgZ(0,"mat-hint",24),t.YNc(1,Co,3,3,"span",25),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl||null==a.FormCtrl.subject_en_name||null==a.FormCtrl.subject_en_name.errors?null:a.FormCtrl.subject_en_name.errors.required)}}function yo(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function qo(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"course.unCorrectLink")," "))}function xo(n,o){if(1&n&&(t.TgZ(0,"mat-hint",24),t.YNc(1,yo,3,3,"span",25),t.YNc(2,qo,3,3,"span",25),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl||null==a.FormCtrl.subjectPromoVideoPath||null==a.FormCtrl.subjectPromoVideoPath.errors?null:a.FormCtrl.subjectPromoVideoPath.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl||null==a.FormCtrl.subjectPromoVideoPath||null==a.FormCtrl.subjectPromoVideoPath.errors?null:a.FormCtrl.subjectPromoVideoPath.errors.noSpace)}}function So(n,o){if(1&n&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.stage_ar_name," ")}}function Uo(n,o){if(1&n&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.Educational_year_ar_name," ")}}function jo(n,o){if(1&n&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&n){var i,a=o.$implicit,e=t.oxw();t.Q6J("value",a.subject_id),t.xp6(1),t.hij(" ","ar"==e.currentLang?a.subject_ar_name:null!==(i=a.subject_en_name)&&void 0!==i?i:a.subject_ar_name," ")}}var Lo=function(o){return{functionId:o}},No=[{path:"",redirectTo:"subjects"},{path:"subjects",children:[{path:"",redirectTo:"index"},{path:"index",component:Wn},{path:"material-search/:subjectId",component:qn},{path:"upload-attendance/:materialId",component:Ca},{path:"add-material",component:Ue},{path:"manually-attendance/:materialId",component:we},{path:"material-points/:materialId",component:Li},{path:"subject-structure/:subjectId",component:function(){var n=function(){function o(a,e,i,r,l,u,c,_){var d=this;(0,U.Z)(this,o),this.spinner=a,this.route=e,this.subjectsService=i,this.router=r,this.fb=l,this.authserv=u,this.msg=c,this.dialog=_,e.paramMap.subscribe(function(g){d.subjectId=Number(g.get("subjectId"))}),e.queryParamMap.subscribe(function(g){d.functionId=Number(g.get("functionId")),d.functionId&&d.authserv.getUserRowFunctions(d.functionId).subscribe(function(v){v&&(d.rowFunctions=v)})})}return(0,S.Z)(o,[{key:"ngOnInit",value:function(){this.getUnits()}},{key:"getUnits",value:function(){var e=this;this.spinner.show(),this.subjectsService.getUnits(this.subjectId).subscribe(function(i){e.units=i,e.selectedUnitId=i[0].id,e.selectedUnitName=i[0].unit_ar_name,e.spinner.hide()})}},{key:"SelectUnitId",value:function(e){this.selectedUnitId=e.id,this.selectedUnitName=e.unit_ar_name}},{key:"deleteUnit",value:function(e){var i=this;this.spinner.show(),this.subjectsService.deleteUnit(e.id).subscribe(function(r){if(1==r.returnValue){var l=i.units.indexOf(e);i.units.splice(l,1),i.msg.success("General.DeleteSuccessfully")}i.spinner.hide()})}},{key:"openDeleateDialog",value:function(e){var i=this;this.dialog.open(J.F,{data:{msg:e.unit_ar_name}}).afterClosed().subscribe(function(r){r&&i.deleteUnit(e)})}},{key:"openAddUnitDialog",value:function(e){var i=this;this.dialog.open(Xi,{data:{unitId:e>0?e:0,subjectId:this.subjectId},minWidth:"60vw"}).afterClosed().subscribe(function(r){if((null==r?void 0:r.id)>0){var l=i.units.findIndex(function(u){return u.id==r.id});l<0?i.units.push(r):i.units[l]=r}})}},{key:"openAddLessonDialog",value:function(){var e=this;this.dialog.open(lt,{data:{unitId:this.selectedUnitId,lesson:{id:0}},minWidth:"60vw"}).afterClosed().subscribe(function(i){(null==i?void 0:i.id)>0&&(e.AddedLesson=i)})}},{key:"track",value:function(e,i){return i.id}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(C.t2),t.Y36(I.gz),t.Y36(N),t.Y36(I.F0),t.Y36(s.qu),t.Y36(M.e),t.Y36($.K),t.Y36(x.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-strcture-index"]],decls:21,vars:17,consts:[[1,"row"],[1,"col-12"],[1,"content-header","bg-light-info","p-1","mt-0","mb-1"],["mat-raised-button","",1,"btn","btn-primary","bg-light-primary",3,"click"],["mat-raised-button","","routerLink","/dashboard/educational-setup/subjects/index",1,"btn","btn-warning","bg-light-warning",3,"queryParams"],[1,"col-md-3","mt-3"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-md-9"],["mat-raised-button","",1,"btn","btn-primary","bg-light-primary","float-right",3,"click"],[3,"unitId","AddedLesson"],[1,"p-0"],[1,"col-10","p-0"],[1,"media",3,"click"],["alt","profile-img","height","64","width","64",1,"rounded","mr-3",3,"src"],[1,"media-body"],[1,"col-12","d-flex","flex-sm-row","flex-column","justify-content-start","px-0","mb-sm-2"],[3,"title"],[1,"text-muted","mb-0","mt-1","mt-sm-0","unitDescription"],[1,"col-2","p-0"],["class","dropdown btn-group mr-1 mb-1","ngbDropdown","",4,"ngIf"],["ngbDropdown","",1,"dropdown","btn-group","mr-1","mb-1"],["ngbDropdownToggle","","type","button",1,"btn","btn-icon","round","mr-1","mb-1","dropdown-toggle","btn-dropdown"],[1,"fa","fa-cog","font-medium-3"],["ngbDropdownMenu","","role","menu",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"ft-trash","font-medium-3","mr-2"],[1,"ft-edit-2","font-medium-3","mr-2"]],template:function(a,e){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"a",3),t.NdJ("click",function(){return e.openAddUnitDialog(0)}),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"a",4),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"div",0),t.TgZ(10,"div",5),t.YNc(11,Zo,15,10,"div",6),t.qZA(),t.TgZ(12,"div",7),t.TgZ(13,"mat-card"),t.TgZ(14,"mat-card-title"),t._uU(15),t.TgZ(16,"a",8),t.NdJ("click",function(){return e.openAddLessonDialog()}),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.qZA(),t.TgZ(19,"mat-card-content"),t._UZ(20,"app-lessons-index",9),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(4),t.hij(" ",t.lcZ(5,9,"subjects.AddUnit")," "),t.xp6(2),t.Q6J("queryParams",t.VKq(15,vo,e.functionId)),t.xp6(1),t.hij(" ",t.lcZ(8,11,"General.Back")," "),t.xp6(4),t.Q6J("ngForOf",e.units)("ngForTrackBy",e.track),t.xp6(4),t.hij(" ",e.selectedUnitName," "),t.xp6(2),t.hij(" ",t.lcZ(18,13,"subjects.AddLesson")," "),t.xp6(3),t.Q6J("unitId",e.selectedUnitId)("AddedLesson",e.AddedLesson))},directives:[q.zs,I.yS,y.sg,f.a8,f.n5,f.dn,ho,f.$j,y.O5,Y.jt,Y.iD,Y.Vi],pipes:[F.X$],styles:[".btn-icon[_ngcontent-%COMP%], .btn-dropdown[_ngcontent-%COMP%]:hover{box-shadow:none;max-width:30px}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.content-header[_ngcontent-%COMP%]{text-align:left}.unitDescription[_ngcontent-%COMP%]{max-height:50px;min-height:20px;overflow:hidden}"]}),n}()},{path:"add-subject",component:function(){var n=function(){function o(a,e,i,r,l,u,c,_){var d=this;(0,U.Z)(this,o),this.route=a,this.fb=e,this.toastr=i,this.translate=r,this.SubjectsService=l,this.generlServ=u,this.spinner=c,this.eduServ=_,this.subjectId=0,this.mainSubjects=[],this.countriesList=[],this.stagesList=[],this.Years=[],this.submitted=!1,this.coverPath=null,this.route.paramMap.subscribe(function(g){d.subjectId=Number(g.get("subjectId")),d.subjectId>0&&d.getSubjectByID(d.subjectId)}),this.translate.onLangChange.subscribe(function(g){d.currentLang=g.lang}),a.queryParamMap.subscribe(function(g){d.functionId=Number(g.get("functionId"))})}return(0,S.Z)(o,[{key:"ngOnInit",value:function(){this.getAllCountriesList(),this.getMainSubject(),this.myForm=this.fb.group({subject_id:[this.subjectId],subject_ar_name:[null,[s.kI.required,s.kI.maxLength(100),j.D.whiteSpace]],subject_en_name:[null,[s.kI.required,s.kI.maxLength(100),j.D.whiteSpace]],subjectThumbnailId:[null],parent_ID:[null],country_id:[null],stage_id:[null],Educational_yearID:[null,s.kI.required],subjectPromoVideoPath:[null],subjectDescription:[null],subjectThumbnailFileBase64:[null]})}},{key:"FormCtrl",get:function(){return this.myForm.controls}},{key:"getSubjectByID",value:function(e){var i=this;this.spinner.show(),this.SubjectsService.getSubjectByID(e).subscribe(function(r){console.log(r),null!=r.subject_id&&(i.subjectId=r.subject_id,i.myForm.patchValue(r),i.coverPath="".concat(m.N.apiURL.replace("/api/","")).concat(r.attach_path),i.getEducationalStageByCountryID(),i.getYearbyStageID(r.stage_id),i.spinner.hide())})}},{key:"addEditSubject",value:function(){var i,r,l,u,c,_,d,g,v,e=this;this.submitted=!0;var T={};T.subject_id=null===(i=this.FormCtrl.subject_id)||void 0===i?void 0:i.value,T.subject_ar_name=null===(r=this.FormCtrl.subject_ar_name)||void 0===r?void 0:r.value,T.subject_en_name=null===(l=this.FormCtrl.subject_en_name)||void 0===l?void 0:l.value,T.parent_ID=null===(u=this.FormCtrl.parent_ID)||void 0===u?void 0:u.value,T.Educational_yearID=null===(c=this.FormCtrl.Educational_yearID)||void 0===c?void 0:c.value,T.subjectThumbnailId=null===(_=this.FormCtrl.subjectThumbnailId)||void 0===_?void 0:_.value,T.subjectDescription=null===(d=this.FormCtrl.subjectDescription)||void 0===d?void 0:d.value,T.subjectThumbnailFileBase64=null===(g=this.FormCtrl.subjectThumbnailFileBase64)||void 0===g?void 0:g.value,T.subjectPromoVideoPath=null===(v=this.FormCtrl.subjectPromoVideoPath)||void 0===v?void 0:v.value,console.log("body",T),this.myForm.valid&&(this.spinner.show(),this.SubjectsService.addEditSubject(T).subscribe(function(E){console.log("SubjectAdded:",E),1==E.returnValue&&(e.submitted=!1,e.spinner.hide(),e.toastr.success("Subject Added successfully"))}))}},{key:"getMainSubject",value:function(){var e=this;this.SubjectsService.getMainSubject().subscribe(function(i){e.mainSubjects=i,e.spinner.hide()})}},{key:"getAllCountriesList",value:function(){var e=this;this.generlServ.getAllCountriesList().subscribe(function(i){e.countriesList=i,1==i.length&&(e.FormCtrl.country_id.setValue(i[0].country_id),e.getEducationalStageByCountryID()),e.spinner.hide()})}},{key:"getEducationalStageByCountryID",value:function(){var i,r,e=this;(null===(i=this.FormCtrl.country_id)||void 0===i?void 0:i.value)&&(this.spinner.show(),this.eduServ.getEducationalStageByCountryID(null===(r=this.FormCtrl.country_id)||void 0===r?void 0:r.value).subscribe(function(l){var u,c,_;e.stagesList=l.eduYearsList,1==(null===(u=e.stagesList)||void 0===u?void 0:u.length)&&(e.FormCtrl.stage_id.setValue(null===(c=e.stagesList[0])||void 0===c?void 0:c.id),e.getYearbyStageID(null===(_=e.stagesList[0])||void 0===_?void 0:_.id)),e.spinner.hide()}))}},{key:"getYearbyStageID",value:function(e){var i=this;""!=e&&(this.spinner.show(),this.eduServ.getYearbyStageID(e).subscribe(function(r){i.Years=r.eduYearsList,i.spinner.hide()}))}},{key:"imageUrl",value:function(){var e,i,r,l;return null!=(null===(i=null===(e=this.FormCtrl.subjectThumbnailFileBase64)||void 0===e?void 0:e.value)||void 0===i?void 0:i.FileAsBase64)?null===(l=null===(r=this.FormCtrl.subjectThumbnailFileBase64)||void 0===r?void 0:r.value)||void 0===l?void 0:l.FileAsBase64:this.coverPath}},{key:"onChange",value:function(e){var i=this,r=e.target.files[0].name,l=e.target.files[0].size,u=e.target.files[0].type,c=e.target.files[0].lastModified,_=e.target.files[0].lastModifiedDate;if(e.target.files){var d=new FileReader;d.readAsDataURL(e.target.files[0]),d.onload=function(g){var v;null===(v=i.FormCtrl.subjectThumbnailFileBase64)||void 0===v||v.setValue({FileAsBase64:g.target.result,name:r,size:l,type:u,LastModified:c,LastModifiedDate:_})}}}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(I.gz),t.Y36(s.qu),t.Y36(A._W),t.Y36(F.sK),t.Y36(N),t.Y36(W.m),t.Y36(C.t2),t.Y36(it.i))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-subject"]],decls:88,vars:59,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","","routerLink","/dashboard/educational-setup/subjects/index",1,"btn","bg-light-warning","float-right",3,"queryParams"],[1,"container-fluid"],[1,"form-container",3,"formGroup"],[1,"col-md-6","col-12"],["appearance","legacy"],["matInput","","formControlName","subject_ar_name"],["class","danger",4,"ngIf"],["matInput","","formControlName","subject_en_name"],["matInput","","formControlName","subjectPromoVideoPath"],[1,"h-100","row","align-items-center","evenly"],["id","input-file","type","file","accept","image/*",3,"hidden","change"],["for","input-file","mat-raised-button","",1,"btn","btn-primary","float-right"],[1,"mt-1","mr-2","float-right"],[1,"coverPhoto",3,"src","alt"],["matInput","","formControlName","subjectDescription"],[1,"col-md-4","col-12"],["formControlName","stage_id",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","Educational_yearID"],["formControlName","parent_ID"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],[1,"danger"],[4,"ngIf"],[3,"value"]],template:function(a,e){1&a&&(t._UZ(0,"ngx-spinner"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"mat-card"),t.TgZ(4,"mat-card-title"),t._uU(5),t.ALo(6,"translate"),t.TgZ(7,"button",2),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.qZA(),t.TgZ(10,"mat-card-content",3),t.TgZ(11,"div",0),t.TgZ(12,"div",1),t.TgZ(13,"form",4),t.TgZ(14,"div",0),t.TgZ(15,"div",5),t.TgZ(16,"div",0),t.TgZ(17,"div",1),t.TgZ(18,"mat-form-field",6),t.TgZ(19,"mat-label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"input",7),t.YNc(23,To,2,1,"mat-hint",8),t.qZA(),t.qZA(),t.TgZ(24,"div",1),t.TgZ(25,"mat-form-field",6),t.TgZ(26,"mat-label"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t._UZ(29,"input",9),t.YNc(30,Io,2,1,"mat-hint",8),t.qZA(),t.qZA(),t.TgZ(31,"div",1),t.TgZ(32,"mat-form-field",6),t.TgZ(33,"mat-label"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t._UZ(36,"input",10),t.YNc(37,xo,3,2,"mat-hint",8),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(38,"div",5),t.TgZ(39,"div",11),t.TgZ(40,"input",12),t.NdJ("change",function(r){return e.onChange(r)}),t.qZA(),t.TgZ(41,"label",13),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"span",14),t._UZ(45,"img",15),t.ALo(46,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"div",1),t.TgZ(48,"mat-form-field",6),t.TgZ(49,"mat-label"),t._uU(50),t.ALo(51,"translate"),t.qZA(),t._UZ(52,"textarea",16),t.qZA(),t.qZA(),t.TgZ(53,"div",17),t.TgZ(54,"mat-form-field",6),t.TgZ(55,"mat-label"),t._uU(56),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"mat-select",18),t.NdJ("selectionChange",function(){return e.getYearbyStageID(null==e.FormCtrl||null==e.FormCtrl.stage_id?null:e.FormCtrl.stage_id.value)}),t.TgZ(59,"mat-option"),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.YNc(62,So,2,2,"mat-option",19),t.qZA(),t.qZA(),t.qZA(),t.TgZ(63,"div",17),t.TgZ(64,"mat-form-field",6),t.TgZ(65,"mat-label"),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"mat-select",20),t.TgZ(69,"mat-option"),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.YNc(72,Uo,2,2,"mat-option",19),t.qZA(),t.qZA(),t.qZA(),t.TgZ(73,"div",17),t.TgZ(74,"mat-form-field",6),t.TgZ(75,"mat-label"),t._uU(76),t.ALo(77,"translate"),t.qZA(),t.TgZ(78,"mat-select",21),t.TgZ(79,"mat-option"),t._uU(80),t.ALo(81,"translate"),t.qZA(),t.YNc(82,jo,2,2,"mat-option",19),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(83,"mat-card-actions",22),t.TgZ(84,"button",23),t.NdJ("click",function(){return e.addEditSubject()}),t._uU(85),t.ALo(86,"translate"),t.ALo(87,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(5),t.hij(" ",t.lcZ(6,25,"Material.AddSubject")," "),t.xp6(2),t.Q6J("queryParams",t.VKq(57,Lo,e.functionId)),t.xp6(1),t.hij(" ",t.lcZ(9,27,"General.Back")," "),t.xp6(5),t.Q6J("formGroup",e.myForm),t.xp6(7),t.Oqu(t.lcZ(21,29,"labels.arName")),t.xp6(3),t.Q6J("ngIf",(null==e.FormCtrl||null==e.FormCtrl.subject_ar_name?null:e.FormCtrl.subject_ar_name.invalid)&&((null==e.FormCtrl||null==e.FormCtrl.subject_ar_name?null:e.FormCtrl.subject_ar_name.touched)||e.submitted)),t.xp6(4),t.hij(" ",t.lcZ(28,31,"labels.enName")," "),t.xp6(3),t.Q6J("ngIf",(null==e.FormCtrl||null==e.FormCtrl.subject_en_name?null:e.FormCtrl.subject_en_name.invalid)&&((null==e.FormCtrl||null==e.FormCtrl.subject_en_name?null:e.FormCtrl.subject_en_name.touched)||e.submitted)),t.xp6(4),t.Oqu(t.lcZ(35,33,"labels.promoLink")),t.xp6(3),t.Q6J("ngIf",(null==e.FormCtrl||null==e.FormCtrl.subjectPromoVideoPath?null:e.FormCtrl.subjectPromoVideoPath.invalid)&&((null==e.FormCtrl||null==e.FormCtrl.subjectPromoVideoPath?null:e.FormCtrl.subjectPromoVideoPath.touched)||e.submitted)),t.xp6(3),t.Q6J("hidden",!0),t.xp6(2),t.hij("",t.lcZ(43,35,"labels.coverPhoto")," "),t.xp6(3),t.s9C("alt",t.lcZ(46,37,"labels.coverPhoto")),t.Q6J("src",e.imageUrl(),t.LSH),t.xp6(5),t.hij("",t.lcZ(51,39,"labels.description")," "),t.xp6(6),t.hij("",t.lcZ(57,41,"Navbar.EducationalStage")," "),t.xp6(4),t.hij(" ",t.lcZ(61,43,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",e.stagesList),t.xp6(4),t.hij(" ",t.lcZ(67,45,"labels.EducationalYear")," "),t.xp6(4),t.hij(" ",t.lcZ(71,47,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",e.Years),t.xp6(4),t.hij("",t.lcZ(77,49,"Material.MainSubjects")," "),t.xp6(4),t.hij(" ",t.lcZ(81,51,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",e.mainSubjects),t.xp6(3),t.hij(" ",0==e.subjectId?t.lcZ(86,53,"General.Add"):t.lcZ(87,55,"General.Update")," "))},directives:[C.Ro,f.a8,f.n5,q.lW,I.rH,f.dn,s._Y,s.JL,s.sg,b.KE,b.hX,k.Nt,s.Fj,s.JJ,s.u,y.O5,O.gD,V.ey,y.sg,f.hq,b.bx],pipes:[F.X$],styles:[".coverPhoto[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:10px;margin:5px 0;overflow:hidden}"]}),n}()}]},{path:"student-group",component:li},{path:"add-group",component:Ja},{path:"assign-student-to-group",component:bi}],Mo=function(){var n=(0,S.Z)(function o(){(0,U.Z)(this,o)});return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[I.Bz.forChild(No)],I.Bz]}),n}(),ko=h(8046),wo=h(8250),Do=function(){var n=(0,S.Z)(function o(){(0,U.Z)(this,o)});return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[y.ez,Mo,s.UX,wo.m,ko.q,Y.IJ,C.ef,p.JX]]}),n}()},6471:function(K,B,h){h.d(B,{i:function(){return j}});var S=h(5671),U=h(3144),p=h(2340),y=h(1891),I=h(520),j=function(){var s=function(){function t(A){(0,S.Z)(this,t),this.http=A,this.yearByStageURL=p.N.apiURL+"Admin/educationalYear/",this.matBySbjectURL=p.N.apiURL+"codes/returnMaterialsByMainSubjectTeacherId/"}return(0,U.Z)(t,[{key:"getEducationalEntities",value:function(){return this.http.get(p.N.apiURL+"Admin/getEducationalEntities")}},{key:"addNewEducationalEntity",value:function(m){return this.http.post(p.N.apiURL+"Admin/addNewEducationalEntity",m)}},{key:"removeEducationalEntity",value:function(m){return this.http.post(p.N.apiURL+"Admin/removeEducationalEntity/"+m,null)}},{key:"getEducationaStages",value:function(){return this.http.get(p.N.apiURL+"Admin/getEducationaStages")}},{key:"AddEducationalStage",value:function(m,L){return this.http.post("".concat(p.N.apiURL,"Admin/AddEducationalStage/").concat(m,"/").concat(L),null)}},{key:"EditEducationalStage",value:function(m,L,N){return this.http.post("".concat(p.N.apiURL,"Admin/EditEducationalStage/").concat(m,"/").concat(L,"/").concat(N),null)}},{key:"DeleteEducationalStage",value:function(m){return this.http.post("".concat(p.N.apiURL,"Admin/RemoveEducationalStage/").concat(m),null)}},{key:"getStageByTeacherId",value:function(m){return this.http.get("".concat(p.N.apiURL,"AJAX/returnStages/").concat(m))}},{key:"getEducationalYear",value:function(){return this.http.get(p.N.apiURL+"Admin/educationalYear")}},{key:"AddEducationalYear",value:function(m){return this.http.post(p.N.apiURL+"Admin/educationalYear",m)}},{key:"deleteEducationalYear",value:function(m){return this.http.delete("".concat(p.N.apiURL,"Admin/educationalYear/").concat(m))}},{key:"getEducationalStageByCountryID",value:function(m){return this.http.get("".concat(p.N.apiURL,"Admin/stages/").concat(m))}},{key:"returnYears",value:function(m){return this.http.get("".concat(p.N.apiURL,"AJAX/GetEducationalYearOfStudents/").concat(m))}},{key:"returnTeacherSubjects",value:function(m){return this.http.post("".concat(p.N.apiURL,"AJAX/returnSubjectsByYearTeacherIDs"),m)}},{key:"GetUnits",value:function(m){return this.http.get(p.N.apiURL+"AJAX/GetUnits/"+m)}},{key:"GetLessons",value:function(m){return this.http.get("".concat(p.N.apiURL,"AJAX/GetLessons/").concat(m))}},{key:"GetTopics",value:function(m){return this.http.get(p.N.apiURL+"AJAX/GetTopics/"+m)}},{key:"getYearbyStageID",value:function(m){return this.http.get("".concat(p.N.apiURL,"Admin/educationalYear/").concat(m))}},{key:"GetMaterialsBySubject",value:function(m,L,N){return this.http.get("".concat("".concat(p.N.apiURL,"codes/returnMaterialsByMainSubjectTeacherId/").concat(m),"/",L,"/").concat(N))}}]),t}();return s.\u0275fac=function(A){return new(A||s)(y.LFG(I.eN))},s.\u0275prov=y.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s}()},2397:function(K,B,h){h.d(B,{q:function(){return j}});var S=h(5671),U=h(3144),p=h(2340),y=h(1891),I=h(520),j=function(){var s=function(){function t(A){(0,S.Z)(this,t),this.http=A}return(0,U.Z)(t,[{key:"addPoints",value:function(m,L){return this.http.post("".concat(p.N.apiURL,"SetupPoints/SetupPoints/").concat(m),L)}},{key:"getPoints",value:function(m,L,N){return this.http.get("".concat(p.N.apiURL,"SetupPoints/returnPointSystemByResourceId/").concat(m,"/").concat(L,"/").concat(N))}},{key:"deletePoint",value:function(m){return this.http.post("".concat(p.N.apiURL,"SetupPoints/DeletePointSystemDetails/").concat(m),null)}},{key:"addLectureCustomPoint",value:function(m){return this.http.post("".concat(p.N.apiURL,"SetupPoints/CustomMaterialPoint"),m)}},{key:"getLectureCustomPoints",value:function(m,L){return this.http.get("".concat(p.N.apiURL,"SetupPoints/returnCustomPointMaterialByMaterialId/").concat(L,"/").concat(m))}},{key:"deleteLectureCustomPoint",value:function(m){return this.http.post("".concat(p.N.apiURL,"SetupPoints/DeleteCustomMaterialPoint/").concat(m),null)}},{key:"addExamCustomPoint",value:function(m){return this.http.post(p.N.apiURL+"SetupPoints/CustomExamPoint",m)}},{key:"getExamCustomPoints",value:function(m,L){return this.http.get("".concat(p.N.apiURL,"SetupPoints/returnCustomPointExamByExamId/").concat(L,"/").concat(m))}},{key:"deleteExamCustomPoint",value:function(m){return this.http.post("".concat(p.N.apiURL,"SetupPoints/DeleteCustomExamPoint/").concat(m),null)}},{key:"addTemplateCustomPoint",value:function(m){return this.http.post(p.N.apiURL+"SetupPoints/CustomTemplatePoint",m)}},{key:"getTemplateCustomPoints",value:function(m,L){return this.http.get("".concat(p.N.apiURL,"SetupPoints/returnCustomPointTemplateByTemplateId/").concat(L,"/").concat(m))}}]),t}();return s.\u0275fac=function(A){return new(A||s)(y.LFG(I.eN))},s.\u0275prov=y.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s}()},1044:function(K,B,h){h.d(B,{I:function(){return G}});var S=h(5671),U=h(3144),p=h(1891),y=h(5086),I=h(7322),j=h(4107),s=h(3075),t=h(508),A=h(9808),m=h(530),L=h(1195);function N(M,C){if(1&M&&(p.TgZ(0,"mat-option",5),p._uU(1),p.qZA()),2&M){var D=C.$implicit;p.Q6J("value",D.subject_id),p.xp6(1),p.hij(" ",D.subject_ar_name," ")}}var G=function(){var M=function(){function C(D){(0,S.Z)(this,C),this.GeneralService=D,this.multiple=!1,this.selectionChange=new p.vpe}return(0,U.Z)(C,[{key:"ngOnInit",value:function(){var f=this;this.subjectControl.disable(),this.teacherIdControl.value>0&&(this.getSubjectByTeacherId(this.teacherIdControl.value),this.subjectControl.enable()),this.teacherIdControl.valueChanges.subscribe(function(q){q>0?(f.getSubjectByTeacherId(q),f.subjectControl.enable()):(f.subjectControl.setValue(null),f.subjectControl.disable())}),this.subjectControl.valueChanges.subscribe(function(q){})}},{key:"onChange",value:function(f){this.selectionChange.emit(f.value)}},{key:"getSubjectByTeacherId",value:function(f){var q=this;this.GeneralService.getSubjectByTeacherId(f,36).subscribe(function(R){q.subjects=R.subjects})}}]),C}();return M.\u0275fac=function(D){return new(D||M)(p.Y36(y.m))},M.\u0275cmp=p.Xpm({type:M,selectors:[["app-subjects-by-teacherid"]],inputs:{subjectControl:"subjectControl",teacherIdControl:"teacherIdControl",submitted:"submitted",multiple:"multiple"},outputs:{selectionChange:"selectionChange"},decls:11,vars:12,consts:[["appearance","legacy"],[3,"formControl","multiple","selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"control","submitted","isSelect"],[3,"value"]],template:function(D,f){1&D&&(p.TgZ(0,"mat-form-field",0),p.TgZ(1,"mat-label"),p._uU(2),p.ALo(3,"translate"),p.qZA(),p.TgZ(4,"mat-select",1),p.NdJ("selectionChange",function(R){return f.onChange(R)}),p.TgZ(5,"mat-option",2),p._uU(6),p.ALo(7,"translate"),p.qZA(),p.YNc(8,N,2,2,"mat-option",3),p.qZA(),p.TgZ(9,"mat-hint"),p._UZ(10,"input-validation-msg",4),p.qZA(),p.qZA()),2&D&&(p.xp6(2),p.Oqu(p.lcZ(3,8,"Material.Subjects")),p.xp6(2),p.Q6J("formControl",f.subjectControl)("multiple",f.multiple),p.xp6(2),p.hij(" ",p.lcZ(7,10,"Material.Subjects")," "),p.xp6(2),p.Q6J("ngForOf",f.subjects),p.xp6(2),p.Q6J("control",f.subjectControl)("submitted",f.submitted)("isSelect",!0))},directives:[I.KE,I.hX,j.gD,s.JJ,s.oH,t.ey,A.sg,I.bx,m.p],pipes:[L.X$],styles:[""]}),M}()}}]);