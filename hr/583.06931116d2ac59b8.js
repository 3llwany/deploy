"use strict";(self.webpackChunkhr=self.webpackChunkhr||[]).push([[583],{3710:(C,v,s)=>{s.d(v,{r:()=>m});var d=s(94650),f=s(67579),p=s(24280),L=s(80458);let m=(()=>{class t{constructor(r,c){this.viewsService=r,this.router=c,this.loadingService=(0,d.f3M)(f.b),this.UserModules=this.viewsService.UserModules$.getValue(),this.loading=document.getElementById("page-loading")}canActivate(r,c){let g=r.data?.view;if(this.showLoading(),this.UserModules?.length>0){if(this.viewsService.isViewAllowed(g))return this.hideLoading(),!0;this.router.navigateByUrl("/auth/access-denied"),this.hideLoading()}else this.viewsService.UserModules$.subscribe(T=>{if(T?.length>0){if(this.viewsService.isViewAllowed(g))return this.hideLoading(),!0;this.router.navigateByUrl("/auth/access-denied"),this.hideLoading()}})}showLoading(){this.loading.style.display="block",this.loading.style.opacity="1",this.loading.style.zIndex="998"}hideLoading(){this.loading.style.display="none",this.loading.style.opacity="0",this.loading.style.zIndex="0"}}return t.\u0275fac=function(r){return new(r||t)(d.LFG(p.Z),d.LFG(L.F0))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},26583:(C,v,s)=>{s.r(v),s.d(v,{SelfServiceSetupModule:()=>x});var d=s(36895),f=s(80458),p=s(74513),L=s(36162),m=s(3710),t=s(94650);let S=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-template-request"]],decls:2,vars:0,template:function(n,a){1&n&&(t.TgZ(0,"p"),t._uU(1,"template-request works!"),t.qZA())}}),e})();var r=s(95751),c=s(30671),g=s(15602),T=s(69846),u=s(35478),h=(()=>{return(e=h||(h={}))[e.approved=1]="approved",e[e.notApproved=2]="notApproved",e[e.completed=3]="completed",h;var e})();function w(e){return e==h.approved?`<span class="badge-success">${(0,u._f)("\u0645\u0642\u0628\u0648\u0644","Approved")}</span>`:e==h.notApproved?`<span class="badge-danger">${(0,u._f)("\u0645\u0631\u0641\u0648\u0636","Rejected")}</span>`:e==h.completed?`<span class="badge-secondary">${(0,u._f)("\u0627\u0643\u062a\u0645\u0644","Completed")}</span>`:void 0}var A=s(3855),y=s(73546),I=s(93410),R=s(46896),M=s(29721);const D=[{path:"template_request",data:{view:p.S.ss_template_request},children:[{path:"",redirectTo:"index",pathMatch:L.U.full},{path:"index",component:(()=>{class e extends r.U{constructor(n){super(),this.templatesService=n,this.isLoaded=!1,this.mandatoryColomns=["Ser","en_Name","ar_Name","levels","hr_pending_action","actions"],this.cellWithHoverList=[{col:"levels",hoverProperty:"hoverLevels",checkProperty:"showHover"}]}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new c.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}ngOnInit(){}getList(n,a){this.dataSource=new c.by(null),this.isLoaded=!1,this.page.pageIndex=n,a&&(this.page.pageSize=a),this.removePageParams(),this.templatesService.GetList({PageNumber:n,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(o=>{if(o.message.messageType==g.u.Success){if(0==o.data.length&&n>1)return void this.getList(this.prevPage);this.dataSource=new c.by(function _(e,i){let n=new T.El;return e.map(a=>({...a,hr_pending_action:w(a.hR_PendingAction),levels:0==a.core_SS_Template_Details.length?"":1==a.core_SS_Template_Details.length?(0,u._f)(a.core_SS_Template_Details[0].ar_Name,a.core_SS_Template_Details[0].en_Name):`<span class="item-table-background-blue pointer"> <img src="${n.multi_items}" width="12" />\n                             ${u.M6.translate("multipleLevels",i)}\n                        </span>`,hoverLevels:"<span>"+(a.core_SS_Template_Details.length>0?a.core_SS_Template_Details.map((l,o)=>`${o+1}- `+(0,u._f)(l.ar_Name,l.en_Name)).join("<hr />"):"")+"</span>",showHover:a.core_SS_Template_Details.length>1}))}(o.data,this.languageService)),this.isLoaded=!0,this.page.length=o.meta.totalItemCount,this.page.meta=o.meta}else this.errorList(o?.message?.messages)})}delete(n){this.showLoading(),this.templatesService.Delete(n.id).subscribe(a=>{a.message.messageType==g.u.Success?(this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),this.deleteSuccessfullyMsg("templateRemoved")):this.errorList(a?.message?.messages),this.hideLoading()})}onDelete(n){let a=this.msgTranslate(n.ar_Name,n.en_Name);this.deleteDialog(a).subscribe(l=>{l&&this.delete(n)})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(A.$))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-template-request-index"]],features:[t.qOj],decls:5,vars:7,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","templatesRequests","parentTitle","selfService","TitleHasGlobalFunc","",3,"globalFunctions"],[1,"index-card"],[3,"isLoaded","mandatoryColomns","page","actions","dataSource","cellWithDifferentHoverList","onChangePage","deleteRow"]],template:function(n,a){1&n&&(t.TgZ(0,"mat-card-title",0),t._UZ(1,"page-title",1),t.qZA(),t.TgZ(2,"mat-card",2)(3,"mat-card-content")(4,"app-material-table",3),t.NdJ("onChangePage",function(o){return a.getList(o.pageIndex+1,o.pageSize)})("deleteRow",function(o){return a.onDelete(o)}),t.qZA()()()),2&n&&(t.xp6(1),t.Q6J("globalFunctions",a.globalFunctions),t.xp6(3),t.Q6J("isLoaded",a.isLoaded)("mandatoryColomns",a.mandatoryColomns)("page",a.page)("actions",a.rowFunctions)("dataSource",a.dataSource)("cellWithDifferentHoverList",a.cellWithHoverList))},dependencies:[y.a8,y.dn,y.n5,I.I,R.T,M.X]}),e})(),data:{view:p.S.ss_template_request_index},canActivate:[m.r]},{path:"add",component:S,data:{view:p.S.add_ss_template_request},canActivate:[m.r]},{path:"edit/:id",component:S,data:{view:p.S.add_ss_template_request},canActivate:[m.r]}]}];let U=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[f.Bz.forChild(D),f.Bz]}),e})();var F=s(92634),E=s(49274);let x=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.ez,U,y.QW,F.m,E.aw]}),e})()}}]);