"use strict";(self.webpackChunkhr=self.webpackChunkhr||[]).push([[461],{42461:(A,u,a)=>{a.r(u),a.d(u,{PMSSetupModule:()=>J});var p=a(36895),g=a(80458),m=a(24006),c=a(30671),l=a(15602),f=a(58385),h=a(78937),e=a(94650),S=a(18521);let v=(()=>{class i extends S.K{constructor(){super()}create(t){return this.post("UnitSetup/Create",t)}update(t){return this.post("UnitSetup/Edit",t)}getList(t){return this.get("UnitSetup/GetList",{params:t})}getAll(){return this.get("UnitSetup/GetAll")}Delete(t){return this.delete("UnitSetup/Delete",{params:{Id:t}})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var C=a(45471),b=a(56184),L=a(22289),y=a(53026),T=a(46896),d=a(73546),U=a(44850),N=a(86405);function M(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",12),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.clearForm())}),e.qZA()}}const Z=[{path:"unit",component:(()=>{class i extends f.d{constructor(t){super(),this.unitService=t,this.submitted=!1,this.mandatoryColomns=["Ser","id","en_Name","ar_Name","actions"],this.isLoaded=!1,this.optionalColomns=[]}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],ar_Name:[null,[m.kI.required,h.w.whiteSpace]],en_Name:[null,[m.kI.required,h.w.whiteSpace]]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new c.by(null)),this.CheckNoBusinessOrCompany()&&this.getList(this.firstPage)}getList(t,s){this.page.pageIndex=t,s&&(this.page.pageSize=s);let r={PageNumber:t,pageSize:this.page.pageSize};this.showLoading(),this.unitService.getList(r).subscribe(n=>{n.message.messageType==l.u.Success?(this.dataSource=new c.by(n.data),this.isLoaded=!0,this.page.length=n.meta.totalItemCount):this.errorList(n.message.messages),this.hideLoading()})}submit(){if(this.submitted=!0,this.form.valid){const t={ID:this.form.value.id,Ar_Name:this.form.value.ar_Name,En_Name:this.form.value.en_Name};0==t.ID?this.create(t):this.update(t)}}create(t){this.showLoading(),this.unitService.create(t).subscribe(s=>{s?.message?.messageType==l.u.Success?(this.clearForm(),this.getList(this.currentPage,this.page.pageSize),this.addSuccessfullyMsg(s?.message?.messageTypeName)):this.errorList(s.message.messages),this.hideLoading()})}update(t){this.showLoading(),this.unitService.update(t).subscribe(s=>{s.message.messageType==l.u.Success?(this.clearForm(),this.getList(this.currentPage,this.page.pageSize),this.updateSuccessfullyMsg(s?.message?.messageTypeName)):this.errorList(s.message.messages),this.hideLoading()})}unitToEdit(t){this.form.patchValue(t)}onDelete(t){let s=this.msgTranslate(t.ar_Name,t.en_Name);this.deleateDialog(s).subscribe(r=>{r&&this.delete(t)})}delete(t){this.showLoading(),this.unitService.Delete(t.id).subscribe(s=>{s.message.messageType==l.u.Success?(this.deleteSuccessfullyMsg(s?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),t.id==this.formCtrls.id.value&&this.clearForm()):this.errorList(s.message.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(v))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-unit"]],features:[e.qOj],decls:20,vars:14,consts:[[1,"row"],[1,"col-12"],["addTitle","unit","editTitle","editUnit",3,"id"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","en_Name",3,"control","submitted"],["label","ar_Name",3,"control","submitted"],["align","end"],[3,"id","onClick"],[3,"click",4,"ngIf"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","onChangePage","editRow","deleteRow"],[3,"click"]],template:function(t,s){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card")(4,"mat-card-title"),e._UZ(5,"page-title",2),e.qZA(),e.TgZ(6,"mat-card-content",3)(7,"div",0)(8,"div",1)(9,"form",4)(10,"div",0)(11,"div",5),e._UZ(12,"app-input",6),e.qZA(),e.TgZ(13,"div",5),e._UZ(14,"app-input",7),e.qZA()()()()()(),e.TgZ(15,"mat-card-actions",8)(16,"submit-btn",9),e.NdJ("onClick",function(){return s.submit()}),e.qZA(),e.YNc(17,M,1,0,"reset-form-btn",10),e.qZA(),e._UZ(18,"mat-divider"),e.TgZ(19,"app-material-table",11),e.NdJ("onChangePage",function(n){return s.getList(n.pageIndex+1,n.pageSize)})("editRow",function(n){return s.unitToEdit(n)})("deleteRow",function(n){return s.onDelete(n)}),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("id",s.formCtrls.id.value),e.xp6(4),e.Q6J("formGroup",s.form),e.xp6(3),e.Q6J("control",s.formCtrls.en_Name)("submitted",s.submitted),e.xp6(2),e.Q6J("control",s.formCtrls.ar_Name)("submitted",s.submitted),e.xp6(2),e.Q6J("id",s.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",s.formCtrls.id.value>0),e.xp6(2),e.Q6J("isLoaded",s.isLoaded)("dataSource",s.dataSource)("mandatoryColomns",s.mandatoryColomns)("optionalColomns",s.optionalColomns)("page",s.page)("actions",s.rowFunctions))},dependencies:[p.O5,C.a,b.I,L.J,y.p,T.T,d.a8,d.dn,d.n5,d.hq,U.d,N.Ro,m._Y,m.JL,m.sg]}),i})(),data:{view:"unit"}}];let P=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.Bz.forChild(Z),g.Bz]}),i})();var I=a(78475);let J=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,P,I.m]}),i})()}}]);