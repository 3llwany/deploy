"use strict";(self.webpackChunkhr=self.webpackChunkhr||[]).push([[350],{72350:(G,y,o)=>{o.r(y),o.d(y,{PerformanceModule:()=>Ze});var c=o(36895),Z=o(80458),_=o(74513),C=o(3710),g=o(95751),e=o(94650),D=o(61064),P=o(52682),h=o(46896),A=o(20957),d=o(73546),T=o(44850),E=o(86257),r=o(24006),m=o(15602),u=o(35478),p=o(78937),I=o(93417),j=o(18521),U=o(24850);let N=(()=>{class i extends j.K{constructor(){super()}getList(a){return this.get("Performance/ObjectivePlan/GetListIndex",{params:{...a}}).pipe((0,U.U)(t=>(t.data=(0,I.bN)(t.data),t)))}getById(a){return this.get("Performance/ObjectivePlan/GetAll",{params:{$filter:`ID eq ${a}`}})}create(a){return this.post("Performance/ObjectivePlan/Create",a)}update(a){return this.post("Performance/ObjectivePlan/Edit",a)}Delete(a){return this.delete("Performance/ObjectivePlan/Delete",{params:{Id:a}})}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var L=o(70137),S=o(25273),w=o(57566);let x=(()=>{class i extends g.U{constructor(a){super(),this.performancePlanService=a,this.changePerformancePlanId=new e.vpe,this.completed=new e.vpe,this.submitted=!1}ngOnInit(){this.form=this.fb.group({id:[this.performancePlanId,{nonNullable:!0}],ar_Name:[null,[r.kI.required,p.w.whiteSpace]],en_Name:[null,[r.kI.required,p.w.whiteSpace]],from_Date:[null,[r.kI.required]],to_Date:[null,[r.kI.required]]},{validator:p.w.compareDates("from_Date","to_Date")})}onChangeBusinessAndCompanyId(){this.performancePlanId>0&&this.checkNoBusinessOrCompany()&&this.getPerformancePlanById()}ngOnChanges(a){}get formCtrls(){return this.form.controls}getPerformancePlanById(){this.showLoading(),this.performancePlanService.getById(this.performancePlanId).subscribe(a=>{a.message.messageType==m.u.Success?this.form.patchValue(a.data[0]):this.errorList(a?.message?.messages),this.hideLoading()})}submit(){if(this.submitted=!0,this.form.valid){let a={id:this.formCtrls.id.value,ar_Name:this.formCtrls.ar_Name.value,en_Name:this.formCtrls.en_Name.value,from_Date:u.M6.mapDateReverse(this.formCtrls.from_Date.value),to_Date:u.M6.mapDateReverse(this.formCtrls.to_Date.value)};0==a.id?this.create(a):this.update(a)}}create(a){this.showLoading(),this.performancePlanService.create(a).subscribe(t=>{t?.message?.messageType==m.u.Success?(this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newPerformancePlanAdded"),this.performancePlanId=t.data.id,this.formCtrls.id.setValue(this.performancePlanId),this.navigateTo(`/performance/${this.moduleId}/performance-plan/edit/${this.performancePlanId}`),this.changePerformancePlanId.emit(this.performancePlanId),this.completed.emit(!0)):this.errorList(t?.message?.messages),this.hideLoading()})}update(a){this.showLoading(),this.performancePlanService.update(a).subscribe(t=>{t?.message?.messageType==m.u.Success?(this.updateSuccessfullyMsg("performancePlanUpdated"),this.completed.emit(!0)):this.errorList(t?.message?.messages),this.hideLoading()})}clearForm(){this.form.reset(),this.submitted=!1}}return i.\u0275fac=function(a){return new(a||i)(e.Y36(N))},i.\u0275cmp=e.Xpm({type:i,selectors:[["performance-plan-general-info"]],inputs:{performancePlanId:"performancePlanId"},outputs:{changePerformancePlanId:"changePerformancePlanId",completed:"completed"},features:[e.qOj,e.TTD],decls:16,vars:12,consts:[[1,"container-fluid","mtop-40"],[1,"row"],[1,"col-12"],[3,"formGroup"],[1,"col-md-4","col-lg-3","col-sm-6","col-12"],["label","ar_Name",3,"control","submitted"],["label","en_Name",3,"control","submitted"],["label","from_Date",3,"control","submitted"],["label","to_Date",3,"control","submitted"],[1,"col"],[1,"mt-1","buttons-no-margin"],["icon","pi pi-plus-circle","styleClass","float-right",3,"id","color","iconPositionBefore","onClick"]],template:function(a,t){1&a&&(e.TgZ(0,"mat-card-content",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",1)(5,"div",4),e._UZ(6,"app-input",5),e.qZA(),e.TgZ(7,"div",4),e._UZ(8,"app-input",6),e.qZA(),e.TgZ(9,"div",4),e._UZ(10,"app-datepicker",7),e.qZA(),e.TgZ(11,"div",4),e._UZ(12,"app-datepicker",8),e.qZA(),e.TgZ(13,"div",9)(14,"div",10)(15,"submit-btn",11),e.NdJ("onClick",function(){return t.submit()}),e.qZA()()()()()()()()),2&a&&(e.xp6(3),e.Q6J("formGroup",t.form),e.xp6(3),e.Q6J("control",t.formCtrls.ar_Name)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.en_Name)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.from_Date)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.to_Date)("submitted",t.submitted),e.xp6(3),e.Q6J("id",t.formCtrls.id.value)("color",t.btn.darkBlue)("iconPositionBefore",!1))},dependencies:[L.Q,S.a,w.p,d.dn,r._Y,r.JL,r.sg]}),i})();var f=o(30671),z=o(30832),q=o(92393),O=o(93410),J=o(56500),Q=o(68506),M=o(81134),H=o(91508),$=o(8338);function Y(i,l){if(1&i){const a=e.EpF();e.TgZ(0,"reset-form-btn",29),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}function K(i,l){if(1&i){const a=e.EpF();e.ynx(0),e.TgZ(1,"mat-card-content"),e._UZ(2,"mat-divider"),e.TgZ(3,"app-material-table",30),e.NdJ("onChangePage",function(s){e.CHM(a);const n=e.oxw();return e.KtG(n.getList(s.pageIndex+1,s.pageSize))})("editRow",function(s){e.CHM(a);const n=e.oxw();return e.KtG(n.businessObjectiveToEdit(s))})("deleteRow",function(s){e.CHM(a);const n=e.oxw();return e.KtG(n.onDelete(s))}),e.qZA()(),e.BQk()}if(2&i){const a=e.oxw();e.xp6(3),e.Q6J("isRowClickable",!1)("isLoaded",a.isLoaded)("dataSource",a.dataSource)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("actions",a.rowFunctions)("showFilter",!1)}}let W=(()=>{class i extends g.U{constructor(a){super(),this.performancePlanBusinessObjectiveService=a,this.performancePlanId=0,this.completed=new e.vpe,this.submitted=!1,this.mandatoryColomns=["organization","ar_Name","en_Name","from_Date","to_Date","objective_Weight","target_value","actions"],this.optionalColomns=[],this.isLoaded=!1,this.parentObjectives=[],this.evidenceTypeList=[{value:2,label:"text"},{value:1,label:"webApi"}]}ngOnInit(){this.form=this.fb.group({id:[0,{nonNallable:!0}],orgId:[null,[r.kI.required]],ar_Name:[null,[r.kI.required,p.w.whiteSpace]],en_Name:[null,[r.kI.required,p.w.whiteSpace]],ar_Description:[null,[r.kI.required,p.w.whiteSpace]],en_Description:[null,[r.kI.required,p.w.whiteSpace]],from_Date:[null,[r.kI.required]],to_Date:[null,[r.kI.required]],objective_Weight:[null,[r.kI.required]],target_value:[null,[r.kI.required]],unit_id:[null,[r.kI.required]],kpi_id:[null,[r.kI.required]],parent_ID:[null],evidenceType:[2,[r.kI.required]],evidence:[null],note:[null]},{validator:p.w.compareDates("from_Date","to_Date")})}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new f.by(null)),this.checkNoBusinessOrCompany()&&this.performancePlanId>0?(this.getList(this.firstPage),this.getAllParentObjectives()):this.isLoaded=!0}get formCtrls(){return this.form.controls}getList(a,t){this.dataSource=new f.by(null),this.isLoaded=!1,this.page.pageIndex=a,t&&(this.page.pageSize=t),this.removePageParams(),this.performancePlanBusinessObjectiveService.getList(this.performancePlanId,{PageNumber:a,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==m.u.Success?(this.dataSource=new f.by((0,I.dk)(n.data)),this.isLoaded=!0,this.page.length=n.meta.totalItemCount,this.page.meta=n.meta):this.errorList(n?.message?.messages)})}submit(){if(this.submitted=!0,this.form.valid){const a={orgId:this.form.value.orgId,Business_Objective:{objective_Plan_ID:this.performancePlanId,id:this.form.value.id,ar_Name:this.form.value.ar_Name,en_Name:this.form.value.en_Name,ar_Description:this.form.value.ar_Description,en_Description:this.form.value.en_Description,from_Date:u.M6.mapDateReverse(this.form.value.from_Date),to_Date:u.M6.mapDateReverse(this.form.value.to_Date),objective_Weight:this.form.value.objective_Weight,target_value:this.form.value.target_value,objective_MOU_ID:this.form.value.unit_id,parent_ID:this.form.value.parent_ID,evidenceType:this.form.value.evidenceType,evidence:this.form.value.evidence,note:this.form.value.note},KPI_Ids:this.form.value.kpi_id};0==a.Business_Objective.id?this.create(a):this.update(a)}}create(a){this.showLoading(),this.performancePlanBusinessObjectiveService.create(a).subscribe(t=>{t?.message?.messageType==m.u.Success?(this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newBusinessObjectiveAdded"),this.clearForm(),this.getList(this.currentPage),this.getAllParentObjectives(),this.completed.emit(!0)):this.errorList(t?.message?.messages),this.hideLoading()})}update(a){this.showLoading(),this.performancePlanBusinessObjectiveService.update(a).subscribe(t=>{t?.message?.messageType==m.u.Success?(this.updateSuccessfullyMsg("businessObjectiveUpdated"),this.clearForm(),this.getList(this.currentPage),this.getAllParentObjectives(),this.completed.emit(!0)):this.errorList(t?.message?.messages),this.hideLoading()})}businessObjectiveToEdit(a){this.formCtrls.orgId.setValue(a.orgId),this.formCtrls.kpi_id.setValue(a.kpI_Ids),this.formCtrls.unit_id.setValue(a.business_Objective.objective_MOU_ID),this.form.patchValue(a.business_Objective)}onDelete(a){let t=this.msgTranslate(a.ar_Name,a.en_Name);this.deleteDialog(t).subscribe(s=>{s&&this.delete(a)})}delete(a){this.showLoading(),this.performancePlanBusinessObjectiveService.Delete(a.id).subscribe(t=>{t.message.messageType==m.u.Success?(this.deleteSuccessfullyMsg("businessObjectiveDeleted"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(t?.message?.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0,evidenceType:2}),this.submitted=!1}getAllParentObjectives(){this.parentObjectives=[],this.performancePlanBusinessObjectiveService.getAll(this.performancePlanId).pipe(this.cancelRequest()).subscribe(a=>{a.message.messageType==m.u.Success?this.parentObjectives=a.data:this.errorList(a?.message?.messages)})}}return i.\u0275fac=function(a){return new(a||i)(e.Y36(z.V))},i.\u0275cmp=e.Xpm({type:i,selectors:[["per-plan-business-objective"]],inputs:{performancePlanId:"performancePlanId"},outputs:{completed:"completed"},features:[e.qOj],decls:47,vars:46,consts:[[1,"row","mtop-16","mbottom-10"],[1,"col-12"],["container",""],["title","businessObjective"],[1,"container-fluid","mtop-45"],[1,"row"],[3,"formGroup"],[1,"col-md-4","col-lg-3","col-sm-6","col-12"],[3,"control","submitted","filter"],["label","ar_Name",3,"control","submitted"],["label","en_Name",3,"control","submitted"],["label","ar_Desc",3,"control","submitted"],["label","en_Desc",3,"control","submitted"],[1,"col-md-4","col-lg-3","col-sm-6","col-12","mb-2"],["label","from_Date",3,"control","submitted"],["label","to_Date",3,"control","submitted"],["label","objective_Weight",3,"control","submitted","type"],["label","target_value",3,"control","submitted","type"],["label","kpis",3,"control","orgControl","submitted","filter"],["label","parentObjective",3,"control","submitted","List","filter"],[1,"col-md-4","col-lg-3","col-sm-6","col-12","ptop-5","pbottom-5"],["label","evidenceType",3,"control","submitted","radioList"],["label","evidence",3,"control","submitted"],["label","notes",3,"control","submitted"],[1,"col"],[1,"mt-1","buttons-no-margin"],["icon","pi pi-plus-circle","styleClass"," float-right",3,"disabled","id","color","iconPositionBefore","onClick"],["styleClass"," float-right",3,"click",4,"ngIf"],[4,"ngIf"],["styleClass"," float-right",3,"click"],[1,"table-in-forms",3,"isRowClickable","isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","showFilter","onChangePage","editRow","deleteRow"]],template:function(a,t){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",null,2)(4,"mat-card-title"),e._UZ(5,"page-title",3),e.qZA(),e._UZ(6,"mat-divider"),e.TgZ(7,"mat-card-content",4)(8,"div",5)(9,"div",1)(10,"form",6)(11,"div",5)(12,"div",7),e._UZ(13,"app-organization-current-structure-dropdown",8),e.qZA(),e.TgZ(14,"div",7),e._UZ(15,"app-input",9),e.qZA(),e.TgZ(16,"div",7),e._UZ(17,"app-input",10),e.qZA(),e.TgZ(18,"div",7),e._UZ(19,"app-input",11),e.qZA(),e.TgZ(20,"div",7),e._UZ(21,"app-input",12),e.qZA(),e.TgZ(22,"div",13),e._UZ(23,"app-datepicker",14),e.qZA(),e.TgZ(24,"div",7),e._UZ(25,"app-datepicker",15),e.qZA(),e.TgZ(26,"div",7),e._UZ(27,"app-input",16),e.qZA(),e.TgZ(28,"div",7),e._UZ(29,"app-input",17),e.qZA(),e.TgZ(30,"div",7),e._UZ(31,"app-unit-dropdown",8),e.qZA(),e.TgZ(32,"div",7),e._UZ(33,"app-kpi-by-org-dropdown",18),e.qZA(),e.TgZ(34,"div",7),e._UZ(35,"app-prime-dropdown",19),e.qZA(),e.TgZ(36,"div",20),e._UZ(37,"app-radio-button",21),e.qZA(),e.TgZ(38,"div",7),e._UZ(39,"app-input",22),e.qZA(),e.TgZ(40,"div",7),e._UZ(41,"app-input",23),e.qZA(),e.TgZ(42,"div",24)(43,"div",25)(44,"submit-btn",26),e.NdJ("onClick",function(){return t.submit()}),e.qZA(),e.YNc(45,Y,1,0,"reset-form-btn",27),e.qZA()()()()()()(),e.YNc(46,K,4,8,"ng-container",28),e.qZA()()()),2&a&&(e.xp6(10),e.Q6J("formGroup",t.form),e.xp6(3),e.Q6J("control",t.formCtrls.orgId)("submitted",t.submitted)("filter",!0),e.xp6(2),e.Q6J("control",t.formCtrls.ar_Name)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.en_Name)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.ar_Description)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.en_Description)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.from_Date)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.to_Date)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.objective_Weight)("submitted",t.submitted)("type",t.inputType.number),e.xp6(2),e.Q6J("control",t.formCtrls.target_value)("submitted",t.submitted)("type",t.inputType.number),e.xp6(2),e.Q6J("control",t.formCtrls.unit_id)("submitted",t.submitted)("filter",!0),e.xp6(2),e.Q6J("control",t.formCtrls.kpi_id)("orgControl",t.formCtrls.orgId)("submitted",t.submitted)("filter",!0),e.xp6(2),e.Q6J("control",t.formCtrls.parent_ID)("submitted",t.submitted)("List",t.parentObjectives)("filter",!0),e.xp6(2),e.Q6J("control",t.formCtrls.evidenceType)("submitted",t.submitted)("radioList",t.evidenceTypeList),e.xp6(2),e.Q6J("control",t.formCtrls.evidence)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.note)("submitted",t.submitted),e.xp6(3),e.Q6J("disabled",!t.performancePlanId)("id",t.formCtrls.id.value)("color",t.btn.darkBlue)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",t.formCtrls.id.value>0),e.xp6(1),e.Q6J("ngIf",t.performancePlanId>0))},dependencies:[c.O5,L.Q,S.a,q._,O.I,J.J,w.p,h.T,d.a8,d.dn,d.n5,T.d,Q.t,M.F,H.a,$.d,r._Y,r.JL,r.sg]}),i})();var b=o(26315);let X=(()=>{class i extends j.K{constructor(){super()}create(a){return this.post("Performance/EmployeeObjective/Create",a)}update(a){return this.post("Performance/EmployeeObjective/Edit",a)}getAllByEmployeeObjective(a,t){return this.get("Performance/EmployeeObjective/GetAll",{params:{$filter:`Employee_Objective_ID eq ${a} and person_Instance_ID eq ${t}`,$expand:`${b.db.Core_Person_Instance}.${b.db.Core_Person},${b.db.PMS_Employee_Objective}`}}).pipe((0,U.U)(s=>(s.data=(0,I.$)(s.data),s)))}getAllByBusinessObjectives(a,t){return this.get("Performance/EmployeeObjective/GetAll",{params:{$filter:`person_Instance_ID in ${t} and PMS_Employee_Objective/Business_Objective_ID eq ${a}`,$expand:`${b.db.Core_Person_Instance}.${b.db.Core_Person},${b.db.PMS_Employee_Objective}`}}).pipe((0,U.U)(s=>(s.data=(0,I.$)(s.data),s)))}getList(a,t){return this.get("Performance/EmployeeObjective/GetList",{params:{...t,$filter:`PMS_Employee_Objective/Business_Objective_ID eq ${a}`,$expand:`${b.db.Core_Person_Instance}.${b.db.Core_Person},${b.db.PMS_Employee_Objective}`}})}Delete(a){return this.delete("Performance/EmployeeObjective/Delete",{params:{Id:a}})}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var V=o(769),ee=o(66225),te=o(94768);function ae(i,l){if(1&i){const a=e.EpF();e.TgZ(0,"reset-form-btn",31),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}function ie(i,l){if(1&i){const a=e.EpF();e.ynx(0),e.TgZ(1,"mat-card-content"),e._UZ(2,"mat-divider"),e.TgZ(3,"app-material-table",32),e.NdJ("onChangePage",function(s){e.CHM(a);const n=e.oxw();return e.KtG(n.getList(s.pageIndex+1,s.pageSize))})("editRow",function(s){e.CHM(a);const n=e.oxw();return e.KtG(n.lectureToEdit(s))})("deleteRow",function(s){e.CHM(a);const n=e.oxw();return e.KtG(n.onDelete(s))}),e.qZA()(),e.BQk()}if(2&i){const a=e.oxw();e.xp6(3),e.Q6J("isRowClickable",!1)("isLoaded",a.isLoaded)("dataSource",a.dataSource)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("actions",a.rowFunctions)("showFilter",!1)}}let se=(()=>{class i extends g.U{constructor(a){super(),this.performancePlanEmployeeObjectivesService=a,this.performancePlanId=0,this.completed=new e.vpe,this.submitted=!1,this.mandatoryColomns=["employee","en_Name","ar_Name","from_Date","to_Date","objective_Weight","target_value","actions"],this.optionalColomns=[],this.isLoaded=!1,this.parentObjectives=[],this.evidenceTypeList=[{value:2,label:"text"},{value:1,label:"webApi"}]}ngOnInit(){this.form=this.fb.group({id:[0,{nonNallable:!0}],businessObjectiveId:[null,[r.kI.required]],pesronInstanceId:[null,[r.kI.required]],ar_Name:[null,[r.kI.required,p.w.whiteSpace]],en_Name:[null,[r.kI.required,p.w.whiteSpace]],ar_Description:[null,[r.kI.required,p.w.whiteSpace]],en_Description:[null,[r.kI.required,p.w.whiteSpace]],from_Date:[null,[r.kI.required]],to_Date:[null,[r.kI.required]],objective_Weight:[null,[r.kI.required]],target_value:[null,[r.kI.required]],unit_id:[null,[r.kI.required]],kpi_id:[null,[r.kI.required]],parent_ID:[null],evidenceType:[2,[r.kI.required]],evidence:[null],note:[null]},{validator:p.w.compareDates("from_Date","to_Date")})}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new f.by(null)),this.checkNoBusinessOrCompany()&&this.performancePlanId>0?this.getList(this.firstPage):this.isLoaded=!0}get formCtrls(){return this.form.controls}getList(a,t){this.dataSource=new f.by(null),this.isLoaded=!1,this.page.pageIndex=a,t&&(this.page.pageSize=t),this.removePageParams(),this.performancePlanEmployeeObjectivesService.getList(this.performancePlanId,{PageNumber:a,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==m.u.Success?(this.dataSource=new f.by((0,I.$)(n.data)),this.isLoaded=!0,this.page.length=n.meta.totalItemCount,this.page.meta=n.meta):this.errorList(n?.message?.messages)})}submit(){if(this.submitted=!0,this.form.valid){const a={planId:this.performancePlanId,pesronInstanceId:this.form.value.pesronInstanceId,KPI_Ids:this.form.value.kpi_id,pMS_Employee_Objective:{id:this.form.value.id,ar_Name:this.form.value.ar_Name,en_Name:this.form.value.en_Name,ar_Description:this.form.value.ar_Description,en_Description:this.form.value.en_Description,from_Date:u.M6.mapDateReverse(this.form.value.from_Date),to_Date:u.M6.mapDateReverse(this.form.value.to_Date),objective_Weight:this.form.value.objective_Weight,target_value:this.form.value.target_value,objective_MOU_ID:this.form.value.unit_id,parent_ID:this.form.value.parent_ID,evidenceType:this.form.value.evidenceType,evidence:this.form.value.evidence,note:this.form.value.note}};0==a.pMS_Employee_Objective.id?this.create(a):this.update(a)}}create(a){this.showLoading(),this.performancePlanEmployeeObjectivesService.create(a).subscribe(t=>{t?.message?.messageType==m.u.Success?(this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newEmployeeObjectivesAdded"),this.clearForm(),this.getList(this.currentPage),this.completed.emit(!0)):this.errorList(t?.message?.messages),this.hideLoading()})}update(a){this.showLoading(),this.performancePlanEmployeeObjectivesService.update(a).subscribe(t=>{t?.message?.messageType==m.u.Success?(this.updateSuccessfullyMsg("EmployeeObjectivesUpdated"),this.clearForm(),this.getList(this.currentPage),this.completed.emit(!0)):this.errorList(t?.message?.messages),this.hideLoading()})}lectureToEdit(a){this.form.patchValue(a),this.getAllParentObjectivesInEdit(a.id,a.core_Person_Instance[0].id)}onDelete(a){let t=this.msgTranslate(a.ar_Name,a.en_Name);this.deleteDialog(t).subscribe(s=>{s&&this.delete(a)})}delete(a){this.showLoading(),this.performancePlanEmployeeObjectivesService.Delete(a.id).subscribe(t=>{t.message.messageType==m.u.Success?(this.deleteSuccessfullyMsg("employeeObjectiveDeleted"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(t?.message?.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0,evidenceType:2}),this.submitted=!1}getAllParentObjectivesInEdit(a,t){this.parentObjectives=[],this.performancePlanEmployeeObjectivesService.getAllByEmployeeObjective(a,t).pipe(this.cancelRequest()).subscribe(s=>{s.message.messageType==m.u.Success?this.parentObjectives=s.data:this.errorList(s?.message?.messages)})}getAllParentObjectivesInAdd(){let a=this.formCtrls.businessObjectiveId.value,t=this.formCtrls.pesronInstanceId.value;a>0&&t.lenght>0?this.performancePlanEmployeeObjectivesService.getAllByBusinessObjectives(a,t).pipe(this.cancelRequest()).subscribe(s=>{s.message.messageType==m.u.Success?this.parentObjectives=s.data:this.errorList(s?.message?.messages)}):this.parentObjectives=[]}onChangeSelectedBusinessObjectives(a){a.length>0?(this.selectedStructureId=42,this.selectedOrgId=a[0].orgId??0):(this.selectedStructureId=0,this.selectedOrgId=0)}onChangeSelectedEmployees(a){let t=[];a.forEach(s=>s.core_Person_Instance[0].core_Person_Instance_Job_Title.forEach(n=>{t.includes(n.job_Title_ID)||t.push(n.job_Title_ID)})),this.jobIds=t}}return i.\u0275fac=function(a){return new(a||i)(e.Y36(X))},i.\u0275cmp=e.Xpm({type:i,selectors:[["per-plan-employee-objectives"]],inputs:{performancePlanId:"performancePlanId"},outputs:{completed:"completed"},features:[e.qOj],decls:49,vars:52,consts:[[1,"row","mtop-16","mbottom-10"],[1,"col-12"],["container",""],["title","businessObjective"],[1,"container-fluid","mtop-45"],[1,"row"],[3,"formGroup"],[1,"col-md-4","col-lg-3","col-sm-6","col-12"],[3,"control","performancePlanId","submitted","filter","change"],[3,"control","structureId","orgId","submitted","filter","multi","change"],["label","ar_Name",3,"control","submitted"],["label","en_Name",3,"control","submitted"],["label","ar_Desc",3,"control","submitted"],["label","en_Desc",3,"control","submitted"],[1,"col-md-4","col-lg-3","col-sm-6","col-12","mb-2"],["label","from_Date",3,"control","submitted"],["label","to_Date",3,"control","submitted"],["label","objective_Weight","type","number",3,"control","submitted"],["label","target_value","type","number",3,"control","submitted"],[3,"control","submitted","filter"],["label","kpis",3,"control","jobIds","submitted","filter","multi"],["label","parentObjective",3,"control","submitted","List","filter"],[1,"col-md-4","col-lg-3","col-sm-6","col-12","ptop-5","pbottom-5"],["label","evidenceType",3,"control","submitted","radioList"],["label","evidence",3,"control","submitted"],["label","notes",3,"control","submitted"],[1,"col"],[1,"mt-1","buttons-no-margin"],["icon","pi pi-plus-circle","styleClass","float-right",3,"disabled","id","color","iconPositionBefore","onClick"],["styleClass","float-right",3,"click",4,"ngIf"],[4,"ngIf"],["styleClass","float-right",3,"click"],[1,"table-in-forms",3,"isRowClickable","isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","showFilter","onChangePage","editRow","deleteRow"]],template:function(a,t){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",null,2)(4,"mat-card-title"),e._UZ(5,"page-title",3),e.qZA(),e._UZ(6,"mat-divider"),e.TgZ(7,"mat-card-content",4)(8,"div",5)(9,"div",1)(10,"form",6)(11,"div",5)(12,"div",7)(13,"app-business-objective-by-performance-plan-dropdown",8),e.NdJ("change",function(n){return t.getAllParentObjectivesInAdd(),t.onChangeSelectedBusinessObjectives(n)}),e.qZA()(),e.TgZ(14,"div",7)(15,"app-employee-by-org-and-structure-dropdown",9),e.NdJ("change",function(n){return t.getAllParentObjectivesInAdd(),t.onChangeSelectedEmployees(n)}),e.qZA()(),e.TgZ(16,"div",7),e._UZ(17,"app-input",10),e.qZA(),e.TgZ(18,"div",7),e._UZ(19,"app-input",11),e.qZA(),e.TgZ(20,"div",7),e._UZ(21,"app-input",12),e.qZA(),e.TgZ(22,"div",7),e._UZ(23,"app-input",13),e.qZA(),e.TgZ(24,"div",14),e._UZ(25,"app-datepicker",15),e.qZA(),e.TgZ(26,"div",7),e._UZ(27,"app-datepicker",16),e.qZA(),e.TgZ(28,"div",7),e._UZ(29,"app-input",17),e.qZA(),e.TgZ(30,"div",7),e._UZ(31,"app-input",18),e.qZA(),e.TgZ(32,"div",7),e._UZ(33,"app-unit-dropdown",19),e.qZA(),e.TgZ(34,"div",7),e._UZ(35,"app-kpi-by-employee-job-titles-dropdown",20),e.qZA(),e.TgZ(36,"div",7),e._UZ(37,"app-prime-dropdown",21),e.qZA(),e.TgZ(38,"div",22),e._UZ(39,"app-radio-button",23),e.qZA(),e.TgZ(40,"div",7),e._UZ(41,"app-input",24),e.qZA(),e.TgZ(42,"div",7),e._UZ(43,"app-input",25),e.qZA(),e.TgZ(44,"div",26)(45,"div",27)(46,"submit-btn",28),e.NdJ("onClick",function(){return t.submit()}),e.qZA(),e.YNc(47,ae,1,0,"reset-form-btn",29),e.qZA()()()()()()(),e.YNc(48,ie,4,8,"ng-container",30),e.qZA()()()),2&a&&(e.xp6(10),e.Q6J("formGroup",t.form),e.xp6(3),e.Q6J("control",t.formCtrls.businessObjectiveId)("performancePlanId",t.performancePlanId)("submitted",t.submitted)("filter",!0),e.xp6(2),e.Q6J("control",t.formCtrls.pesronInstanceId)("structureId",t.selectedStructureId)("orgId",t.selectedOrgId)("submitted",t.submitted)("filter",!0)("multi",!0),e.xp6(2),e.Q6J("control",t.formCtrls.ar_Name)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.en_Name)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.ar_Description)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.en_Description)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.from_Date)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.to_Date)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.objective_Weight)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.target_value)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.unit_id)("submitted",t.submitted)("filter",!0),e.xp6(2),e.Q6J("control",t.formCtrls.kpi_id)("jobIds",t.jobIds)("submitted",t.submitted)("filter",!0)("multi",!0),e.xp6(2),e.Q6J("control",t.formCtrls.parent_ID)("submitted",t.submitted)("List",t.parentObjectives)("filter",!0),e.xp6(2),e.Q6J("control",t.formCtrls.evidenceType)("submitted",t.submitted)("radioList",t.evidenceTypeList),e.xp6(2),e.Q6J("control",t.formCtrls.evidence)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.note)("submitted",t.submitted),e.xp6(3),e.Q6J("disabled",!t.performancePlanId)("id",t.formCtrls.id.value)("color",t.btn.darkBlue)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",t.formCtrls.id.value>0),e.xp6(1),e.Q6J("ngIf",t.performancePlanId>0))},dependencies:[c.O5,L.Q,S.a,q._,O.I,J.J,w.p,h.T,d.a8,d.dn,d.n5,T.d,Q.t,M.F,V.z,ee.F,te.a,r._Y,r.JL,r.sg]}),i})();var B=o(43949);let ne=(()=>{class i extends j.K{constructor(){super()}create(a){return this.post("Performance/Appraisal/Create",a)}update(a){return this.post("Performance/Appraisal/Edit",a)}getList(a,t){return this.get("Performance/Appraisal/GetList",{params:{...t,$filter:`objective_Plan_ID eq ${a}`}})}Delete(a){return this.delete("Performance/Appraisal/Delete",{params:{Id:a}})}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function oe(i,l){if(1&i){const a=e.EpF();e.TgZ(0,"reset-form-btn",20),e.NdJ("click",function(){e.CHM(a);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}function re(i,l){if(1&i){const a=e.EpF();e.ynx(0),e.TgZ(1,"mat-card-content"),e._UZ(2,"mat-divider"),e.TgZ(3,"app-material-table",21),e.NdJ("editRow",function(s){e.CHM(a);const n=e.oxw();return e.KtG(n.toEdit(s))})("deleteRow",function(s){e.CHM(a);const n=e.oxw();return e.KtG(n.onDelete(s))})("onChangePage",function(s){e.CHM(a);const n=e.oxw();return e.KtG(n.getList(s.pageIndex+1,s.pageSize))}),e.qZA()(),e.BQk()}if(2&i){const a=e.oxw();e.xp6(3),e.Q6J("isLoaded",a.isLoaded)("dataSource",a.dataSource)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("actions",a.rowFunctions)("showFilter",!1)}}let le=(()=>{class i extends g.U{constructor(a){super(),this.appraisalService=a,this.objectivePlanId=0,this.completed=new e.vpe,this.submitted=!1,this.mandatoryColomns=["en_Name","ar_Name","from_Date","to_Date","competence","objective","actions"],this.optionalColomns=[],this.isLoaded=!1}ngOnChanges(a){a.objectivePlanId&&this.getList(this.firstPage)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNallable:!0}],ar_Name:[null,[r.kI.required,p.w.whiteSpace]],en_Name:[null,[r.kI.required,p.w.whiteSpace]],from_Date:[null,[r.kI.required]],to_Date:[null,[r.kI.required]],competence:[null,[r.kI.required,B.dN.gt(0)]],objective:[null,[r.kI.required,B.dN.gt(0)]]},{validator:p.w.compareDates("from_Date","to_Date")})}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&this.objectivePlanId>0?this.getList(this.firstPage):this.isLoaded=!0}get formCtrls(){return this.form.controls}getList(a,t){this.dataSource=new f.by(null),this.isLoaded=!1,this.page.pageIndex=a,t&&(this.page.pageSize=t),this.appraisalService.getList(this.objectivePlanId,{PageNumber:a,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==m.u.Success?(n.data.map(v=>{v.from_Date=u.M6.mapDateReverse(v.from_Date),v.to_Date=u.M6.mapDateReverse(v.to_Date),v.competence=v.competence_Prcent,v.objective=v.objective_Prcent}),this.dataSource=new f.by(n.data),this.page.length=n.meta.totalItemCount,this.page.meta=n.meta,this.isLoaded=!0):this.errorList(n?.message?.messages)})}submit(){if(this.submitted=!0,this.form.valid){const a={id:this.form.value.id,objective_Plan_ID:this.objectivePlanId,ar_Name:this.form.value.ar_Name,en_Name:this.form.value.en_Name,from_Date:u.M6.mapDateReverse(this.form.value.from_Date),to_Date:u.M6.mapDateReverse(this.form.value.to_Date),competence_Prcent:this.form.value.competence,objective_Prcent:this.form.value.objective};0==a.id?this.create(a):this.update(a)}}create(a){this.showLoading(),this.appraisalService.create(a).subscribe(t=>{t?.message?.messageType==m.u.Success?(this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newAppraisalAdded"),this.clearForm(),this.getList(this.firstPage),this.completed.emit(!0)):this.errorList(t?.message?.messages),this.hideLoading()})}update(a){this.showLoading(),this.appraisalService.update(a).subscribe(t=>{t?.message?.messageType==m.u.Success?(this.updateSuccessfullyMsg("appraisalUpdated"),this.clearForm(),this.getList(this.currentPage),this.completed.emit(!0)):this.errorList(t?.message?.messages),this.hideLoading()})}toEdit(a){this.form.patchValue(a)}onDelete(a){let t=this.msgTranslate(a.ar_Name,a.en_Name);this.deleteDialog(t).subscribe(s=>{s&&this.delete(a)})}delete(a){this.showLoading(),this.appraisalService.Delete(a.id).subscribe(t=>{t.message.messageType==m.u.Success?(this.deleteSuccessfullyMsg("appraisalDeleted"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(t?.message?.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return i.\u0275fac=function(a){return new(a||i)(e.Y36(ne))},i.\u0275cmp=e.Xpm({type:i,selectors:[["per-plan-appraisal"]],inputs:{objectivePlanId:"objectivePlanId"},outputs:{completed:"completed"},features:[e.qOj,e.TTD],decls:29,vars:19,consts:[[1,"row","mtop-16","mbottom-10"],[1,"col-12"],["container",""],["title","appraisals"],[1,"container-fluid","mtop-45"],[1,"row"],[3,"formGroup"],[1,"col-md-4","col-lg-3","col-sm-6","col-12"],["label","ar_Name",3,"control","submitted"],["label","en_Name",3,"control","submitted"],[1,"col-md-4","col-lg-3","col-sm-6","col-12","mb-2"],["label","from_Date",3,"control","submitted"],["label","to_Date",3,"control","submitted"],["label","competence","type","number",3,"control","submitted"],["label","objective","type","number",3,"control","submitted"],[1,"col"],[1,"mt-1","buttons-no-margin"],["icon","pi pi-plus-circle","styleClass","float-right pleft-45 pright-45",3,"disabled","id","color","iconPositionBefore","onClick"],["styleClass","float-right",3,"click",4,"ngIf"],[4,"ngIf"],["styleClass","float-right",3,"click"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","showFilter","editRow","deleteRow","onChangePage"]],template:function(a,t){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",null,2)(4,"mat-card-title"),e._UZ(5,"page-title",3),e.qZA(),e._UZ(6,"mat-divider"),e.TgZ(7,"mat-card-content",4)(8,"div",5)(9,"div",1)(10,"form",6)(11,"div",5)(12,"div",7),e._UZ(13,"app-input",8),e.qZA(),e.TgZ(14,"div",7),e._UZ(15,"app-input",9),e.qZA(),e.TgZ(16,"div",10),e._UZ(17,"app-datepicker",11),e.qZA(),e.TgZ(18,"div",7),e._UZ(19,"app-datepicker",12),e.qZA(),e.TgZ(20,"div",7),e._UZ(21,"app-input",13),e.qZA(),e.TgZ(22,"div",7),e._UZ(23,"app-input",14),e.qZA(),e.TgZ(24,"div",15)(25,"div",16)(26,"submit-btn",17),e.NdJ("onClick",function(){return t.submit()}),e.qZA(),e.YNc(27,oe,1,0,"reset-form-btn",18),e.qZA()()()()()()(),e.YNc(28,re,4,7,"ng-container",19),e.qZA()()()),2&a&&(e.xp6(10),e.Q6J("formGroup",t.form),e.xp6(3),e.Q6J("control",t.formCtrls.ar_Name)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.en_Name)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.from_Date)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.to_Date)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.competence)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.objective)("submitted",t.submitted),e.xp6(3),e.Q6J("disabled",!t.objectivePlanId)("id",t.formCtrls.id.value)("color",t.btn.darkBlue)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",t.formCtrls.id.value>0),e.xp6(1),e.Q6J("ngIf",t.objectivePlanId>0))},dependencies:[c.O5,L.Q,S.a,O.I,J.J,w.p,h.T,d.a8,d.dn,d.n5,T.d,r._Y,r.JL,r.sg]}),i})();var R=o(49274);const me=["stepper"];function de(i,l){if(1&i&&e._UZ(0,"app-add-new-btn",3),2&i){const a=e.oxw();e.MGl("url","/performance/",a.moduleId,"/performance-plan/add"),e.Q6J("params",a.parentParam)}}function pe(i,l){1&i&&e._UZ(0,"i",17)}function ce(i,l){1&i&&e._UZ(0,"i",17)}function ue(i,l){1&i&&e._UZ(0,"i",17)}let k=(()=>{class i extends g.U{constructor(){super(),this.performancePlanId=0,this.isGeneraCompleted=!1,this.isBusinessObjectiveCompleted=!1,this.isEmployeeObjectivesCompleted=!1,this.isAppraisalCompleted=!1}ngOnInit(){this.activatedRoute.paramMap.subscribe(a=>{this.performancePlanId=Number(a.get("id"))??0})}getPerformancePlanId(a){this.performancePlanId=a}stepChanged(){this.stepper.selected.interacted=!1}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-performance-plan-core"]],viewQuery:function(a,t){if(1&a&&e.Gf(me,5),2&a){let s;e.iGM(s=e.CRH())&&(t.stepper=s.first)}},features:[e.qOj],decls:29,vars:32,consts:[[1,"title-no-margin","title-section","fixed-title"],["addTitle","addPerformancePlan","editTitle","editPerformancePlan",3,"id"],[3,"url","params",4,"ngIf"],[3,"url","params"],[1,"add-performance","mt-2","has-fixed-title","has-cards-with-shadow"],[3,"linear","disableRipple","selectionChange"],["stepper",""],[3,"label","completed"],["matStepperIcon","edit"],[1,"title-no-margin"],["title","generalInfo"],[1,"mt-2"],[1,"clearfix"],[3,"performancePlanId","changePerformancePlanId","completed"],[3,"performancePlanId","completed"],[3,"objectivePlanId","completed"],[3,"stepper","parentParam","url","pageParams"],[1,"fas","fa-check"]],template:function(a,t){if(1&a&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.YNc(2,de,1,2,"app-add-new-btn",2),e._UZ(3,"app-back-btn",3),e.qZA(),e.TgZ(4,"mat-card-content",4)(5,"mat-stepper",5,6),e.NdJ("selectionChange",function(){return t.stepChanged()}),e.TgZ(7,"mat-step",7),e.ALo(8,"titlecase"),e.ALo(9,"translate"),e.YNc(10,pe,1,0,"ng-template",8),e.TgZ(11,"mat-card")(12,"mat-card-title",9),e._UZ(13,"page-title",10),e.qZA(),e._UZ(14,"mat-divider",11)(15,"div",12),e.TgZ(16,"performance-plan-general-info",13),e.NdJ("changePerformancePlanId",function(n){return t.getPerformancePlanId(n)})("completed",function(n){return t.isGeneraCompleted=n}),e.qZA()(),e.TgZ(17,"per-plan-business-objective",14),e.NdJ("completed",function(n){return t.isBusinessObjectiveCompleted=n}),e.qZA()(),e.TgZ(18,"mat-step",7),e.ALo(19,"titlecase"),e.ALo(20,"translate"),e.YNc(21,ce,1,0,"ng-template",8),e.TgZ(22,"per-plan-employee-objectives",14),e.NdJ("completed",function(n){return t.isBusinessObjectiveCompleted=n}),e.qZA()(),e.TgZ(23,"mat-step",7),e.ALo(24,"titlecase"),e.ALo(25,"translate"),e.YNc(26,ue,1,0,"ng-template",8),e.TgZ(27,"per-plan-appraisal",15),e.NdJ("completed",function(n){return t.isAppraisalCompleted=n}),e.qZA()()()(),e._UZ(28,"steps-footer",16)),2&a){const s=e.MAs(6);e.xp6(1),e.Q6J("id",t.performancePlanId),e.xp6(1),e.Q6J("ngIf",t.performancePlanId>0),e.xp6(1),e.MGl("url","/performance/",t.moduleId,"/performance-plan/index"),e.Q6J("params",t.pageParams),e.xp6(2),e.Q6J("linear",!1)("disableRipple",!0),e.xp6(2),e.s9C("label",e.lcZ(8,20,e.lcZ(9,22,"generalInfoAndBusinessObjective"))),e.Q6J("completed",t.isGeneraCompleted&&t.isBusinessObjectiveCompleted),e.xp6(9),e.Q6J("performancePlanId",t.performancePlanId),e.xp6(1),e.Q6J("performancePlanId",t.performancePlanId),e.xp6(1),e.s9C("label",e.lcZ(19,24,e.lcZ(20,26,"employeeObjectives"))),e.Q6J("completed",t.isEmployeeObjectivesCompleted),e.xp6(4),e.Q6J("performancePlanId",t.performancePlanId),e.xp6(1),e.s9C("label",e.lcZ(24,28,e.lcZ(25,30,"appraisal"))),e.Q6J("completed",t.isAppraisalCompleted),e.xp6(4),e.Q6J("objectivePlanId",t.performancePlanId),e.xp6(1),e.MGl("url","/performance/",t.moduleId,"/performance-plan"),e.Q6J("stepper",s)("parentParam",t.parentParam)("pageParams",t.pageParams)}},dependencies:[c.O5,D.a,P.J,h.T,A.j,d.a8,d.dn,d.n5,T.d,E.C0,E.Vq,E.z9,x,W,se,le,c.rS,R.X$],styles:[".add-performance .buttons-no-margin{margin-right:-4px;margin-left:-4px}  .add-performance .buttons-no-margin submit-btn button,   .add-performance .buttons-no-margin reset-form-btn button{margin:0 4px!important}  .add-performance .radio-group-label{align-items:flex-start!important}  .add-performance .radio-label{font-size:13px!important}  .add-performance .radio-group-div div{padding:0 5px!important}  .add-performance .mat-radio-label-content{padding:0}  .add-performance .mat-column-objective_Weight,   .add-performance .mat-column-target_value{text-align:center}"]}),i})();var fe=o(36162),ge=o(29721);let he=(()=>{class i extends g.U{constructor(a){super(),this.performancePlanService=a,this.mandatoryColomns=["Ser","ar_Name","en_Name","orgs_Count","employees_Count","business_Objectives_Count","from_Date","to_Date","actions"],this.isLoaded=!1,this.optionalColomns=[]}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new f.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.firstPage)}ngOnInit(){}getList(a,t){this.isLoaded=!1,this.page.pageIndex=a,t&&(this.page.pageSize=t),this.performancePlanService.getList({PageNumber:a,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==m.u.Success?(this.dataSource=new f.by(n.data),this.isLoaded=!0,this.page.length=n.meta.totalItemCount,this.page.meta=n.meta):this.errorList(n?.message?.messages)})}onDelete(a){let t=this.msgTranslate(a.ar_Name,a.en_Name);this.deleteDialog(t).subscribe(s=>{s&&this.delete(a)})}delete(a){this.showLoading(),this.performancePlanService.Delete(a.id).subscribe(t=>{t.message.messageType==m.u.Success?(this.deleteSuccessfullyMsg("performancePlanDeleted"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(t?.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(a){return new(a||i)(e.Y36(N))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-performance-plan-index"]],features:[e.qOj],decls:4,vars:7,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","performancePlanIndex","TitleHasGlobalFunc","",3,"globalFunctions"],[1,"index-card"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","page","onChangePage","deleteRow"]],template:function(a,t){1&a&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.qZA(),e.TgZ(2,"mat-card",2)(3,"app-material-table",3),e.NdJ("onChangePage",function(n){return t.getList(n.pageIndex+1,n.pageSize)})("deleteRow",function(n){return t.onDelete(n)}),e.qZA()()),2&a&&(e.xp6(1),e.Q6J("globalFunctions",t.globalFunctions),e.xp6(2),e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("page",t.page))},dependencies:[O.I,h.T,ge.X,d.a8,d.n5]}),i})(),be=(()=>{class i extends j.K{constructor(){super()}searchEmployees(a){return this.post("Performance/ObjectivePlan/GetAll",a,{params:{}})}Evaluated(){return this.get("Performance/ObjectivePlan/GetAll",{params:{}})}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var _e=o(71812),ve=o(40445),F=o(3848);function Pe(i,l){if(1&i&&(e.TgZ(0,"div",13)(1,"div",14),e._UZ(2,"img",15),e.TgZ(3,"div",16)(4,"h5",17),e._uU(5),e.qZA(),e.TgZ(6,"p",18),e._UZ(7,"img",19),e._uU(8),e.qZA(),e.TgZ(9,"p",20),e._UZ(10,"img",19),e._uU(11),e.qZA(),e.TgZ(12,"p",18),e._UZ(13,"img",19),e._uU(14),e.qZA(),e._UZ(15,"app-button",21),e.qZA()()()),2&i){const a=l.$implicit,t=e.oxw();e.xp6(2),e.Q6J("src",a.img,e.LSH),e.xp6(3),e.hij(" ",a.name," "),e.xp6(2),e.Q6J("src",t.svg.business,e.LSH),e.xp6(1),e.hij(" ",a.job," "),e.xp6(2),e.Q6J("src",t.svg.building,e.LSH),e.xp6(1),e.hij(" ",a.company," "),e.xp6(2),e.Q6J("src",t.svg.darts,e.LSH),e.xp6(1),e.hij(" ",a.clients," "),e.xp6(1),e.Q6J("label",a.isEvaluate?"evaluated":"evaluate")("icon",a.isEvaluate?"far fa-check-square":null)("color",a.isEvaluate?t.btn.successLight:t.btn.darkBlue)("iconPositionBefore",!1)("isRaisedBtn",!1)("decreasePaddingWithIcon",!0)}}const Ce=[{path:"appraisal",component:(()=>{class i extends g.U{constructor(a){super(),this.appraisalService=a,this.appraisalList=[],this.resList=[{name:"Mohamed Haitham Adnan Elmaghraby",img:"assets/img/avatar-s-5.png",job:"Software UI / UX designer",company:"Mashura Consultants",clients:" Reach 100 client and sell 50 HR",isEvaluate:!0},{name:"Mohamed Haitham Adnan Elmaghraby",img:"assets/img/avatar-s-5.png",job:"Software UI / UX designer",company:"Mashura Consultants",clients:" Reach 100 client and sell 50 HR",isEvaluate:!1},{name:"Mohamed Haitham Adnan Elmaghraby",img:"assets/img/avatar-s-5.png",job:"Software UI / UX designer",company:"Mashura Consultants",clients:" Reach 100 client and sell 50 HR",isEvaluate:!0},{name:"Mohamed Haitham Adnan Elmaghraby",img:"assets/img/avatar-s-5.png",job:"Software UI / UX designer",company:"Mashura Consultants",clients:" Reach 100 client and sell 50 HR",isEvaluate:!1},{name:"Mohamed Haitham Adnan Elmaghraby",img:"assets/img/avatar-s-5.png",job:"Software UI / UX designer",company:"Mashura Consultants",clients:" Reach 100 client and sell 50 HR",isEvaluate:!0},{name:"Mohamed Haitham Adnan Elmaghraby",img:"assets/img/avatar-s-5.png",job:"Software UI / UX designer",company:"Mashura Consultants",clients:" Reach 100 client and sell 50 HR",isEvaluate:!1},{name:"Mohamed Haitham Adnan Elmaghraby",img:"assets/img/avatar-s-5.png",job:"Software UI / UX designer",company:"Mashura Consultants",clients:" Reach 100 client and sell 50 HR",isEvaluate:!1}],this.submitted=!1,this.isLoaded=!1,this.appraisalList=this.resList,this.inProgressCount=this.resList.filter(t=>!t.isEvaluate)?.length,this.evaluatedCount=this.resList.filter(t=>t.isEvaluate)?.length}ngOnInit(){this.form=this.fb.group({planId:[],organization:[],personId:[]})}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&this.searchEmployees()}get formCtrls(){return this.form.controls}searchEmployees(){this.isLoaded=!1,this.appraisalService.searchEmployees({planId:this.formCtrls.planId.value,organization:this.formCtrls.organization.value,personId:this.formCtrls.personId.value}).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==m.u.Success?(this.resList=t.data,this.appraisalList=this.resList,this.inProgressCount=this.resList.filter(s=>!s.isEvaluate)?.length,this.evaluatedCount=this.resList.filter(s=>s.isEvaluate)?.length,this.isLoaded=!0):this.errorList(t?.message?.messages)})}filter(a){console.log(a.index),0==a.index&&(this.appraisalList=this.resList.filter(t=>t),console.log(this.appraisalList)),1==a.index&&(this.appraisalList=this.resList.filter(t=>!t.isEvaluate),console.log(this.appraisalList)),2==a.index&&(this.appraisalList=this.resList.filter(t=>t.isEvaluate),console.log(this.appraisalList))}}return i.\u0275fac=function(a){return new(a||i)(e.Y36(be))},i.\u0275cmp=e.Xpm({type:i,selectors:[["employee-appraisal"]],features:[e.qOj],decls:28,vars:20,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","employeesAppraisals"],[1,"form-card","mt-2"],["title","searchEmployees"],[1,"container-fluid","mtop-40"],[1,"row","w-100","p-0","m-0"],[1,"col-12","col-md-3","p-0","m-0"],["title","result"],[1,"col-12","col-md-6","col-lg-4","p-0","m-0"],[1,"view-tabs-group",3,"dir","selectedTabChange"],[3,"label"],[1,"row"],["class","col-12 col-md-6 col-lg-4 mb-3",4,"ngFor","ngForOf"],[1,"col-12","col-md-6","col-lg-4","mb-3"],[1,"media"],["width","140","height","155","alt","avatar",1,"mr-2","rounded",3,"src"],[1,"media-body"],[1,"mb-2","border-bottom","py-1","font-size-15","interBold"],[1,"m-0","mb-1","interMedium","main-color"],["width","18","height","18",3,"src"],[1,"m-0","mb-1","interMedium",2,"color","#555555"],["styleClass","btn-block m-0 padding-3","spanClass","justify-content-center",3,"label","icon","color","iconPositionBefore","isRaisedBtn","decreasePaddingWithIcon"]],template:function(a,t){1&a&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.qZA(),e.TgZ(2,"mat-card",2)(3,"mat-card-title"),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"mat-card-content",4),e._uU(6," \u0644\u0639\u063a\u0641\u0642\u0628\u0639\u063a\u0641\u0633\u0634\u0647\u063a\u0639\u0641\u0639\u0647\u063a\u0633\u0634\u0644\u063a\u0639\u0647 "),e.qZA()(),e.TgZ(7,"mat-card",2)(8,"mat-card-title")(9,"div",5)(10,"div",6)(11,"span"),e._uU(12),e.qZA(),e._UZ(13,"page-title",7),e.qZA(),e.TgZ(14,"div",8)(15,"mat-tab-group",9),e.NdJ("selectedTabChange",function(n){return t.filter(n)}),e._UZ(16,"mat-tab",10),e.ALo(17,"titlecase"),e.ALo(18,"translate"),e._UZ(19,"mat-tab",10),e.ALo(20,"titlecase"),e.ALo(21,"translate"),e._UZ(22,"mat-tab",10),e.ALo(23,"titlecase"),e.ALo(24,"translate"),e.qZA()()()(),e.TgZ(25,"mat-card-content",4)(26,"div",11),e.YNc(27,Pe,16,14,"div",12),e.qZA()()()),2&a&&(e.xp6(12),e.hij(" ",null==t.resList?null:t.resList.length," "),e.xp6(3),e.Q6J("dir",t.languageService.isArabic?"rtl":"ltr"),e.xp6(1),e.s9C("label",e.lcZ(17,8,e.lcZ(18,10,"all"))),e.xp6(3),e.hYB("label","",e.lcZ(20,12,e.lcZ(21,14,"inProgress"))," (",t.inProgressCount,") "),e.xp6(3),e.hYB("label","",e.lcZ(23,16,e.lcZ(24,18,"evaluated"))," (",t.evaluatedCount,")"),e.xp6(5),e.Q6J("ngForOf",t.appraisalList))},dependencies:[c.sg,h.T,_e.r,ve.Lv,F.SP,F.uX,d.a8,d.dn,d.n5,c.rS,R.X$],styles:[".mat-card.form-card .mat-card-title{margin-bottom:0!important;padding-bottom:0!important}  .view-tabs-group .mat-tab-body-wrapper{display:none!important}.media[_ngcontent-%COMP%]{border:1px solid #d1d2d4;background-color:#fcfcfc;border-radius:12px;padding:10px}"]}),i})(),data:{view:_.S.appraisal},canActivate:[C.r]},{path:_.S.performance_plan,data:{view:_.S.performance_plan},children:[{path:"",redirectTo:"index",pathMatch:fe.U.full},{path:"index",component:he,data:{view:_.S.performance_plan_index},canActivate:[C.r]},{path:"add",component:k,data:{view:_.S.add_performance_plan},canActivate:[C.r]},{path:"edit/:id",component:k,data:{view:_.S.add_performance_plan},canActivate:[C.r]}]}];let Ie=(()=>{class i{}return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[Z.Bz.forChild(Ce),Z.Bz]}),i})();var ye=o(92634);let Ze=(()=>{class i{}return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[c.ez,Ie,ye.m]}),i})()},3710:(G,y,o)=>{o.d(y,{r:()=>g});var c=o(94650),Z=o(67579),_=o(24280),C=o(80458);let g=(()=>{class e{constructor(P,h){this.viewsService=P,this.router=h,this.loadingService=(0,c.f3M)(Z.b),this.UserModules=this.viewsService.UserModules$.getValue(),this.loading=document.getElementById("page-loading")}canActivate(P,h){let A=P.data?.view;if(this.showLoading(),this.UserModules?.length>0){if(this.viewsService.isViewAllowed(A))return this.hideLoading(),!0;this.router.navigateByUrl("/auth/access-denied"),this.hideLoading()}else this.viewsService.UserModules$.subscribe(d=>{if(d?.length>0){if(this.viewsService.isViewAllowed(A))return this.hideLoading(),!0;this.router.navigateByUrl("/auth/access-denied"),this.hideLoading()}})}showLoading(){this.loading.style.display="block",this.loading.style.opacity="1",this.loading.style.zIndex="998"}hideLoading(){this.loading.style.display="none",this.loading.style.opacity="0",this.loading.style.zIndex="0"}}return e.\u0275fac=function(P){return new(P||e)(c.LFG(_.Z),c.LFG(C.F0))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);