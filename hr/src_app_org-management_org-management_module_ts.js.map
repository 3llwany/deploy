{"version":3,"file":"src_app_org-management_org-management_module_ts.js","mappings":"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","sources":["./src/app/org-management/components/jobs-profile/jobs-profile-index/jobs-profile-index.component.ts","./src/app/org-management/components/jobs-profile/jobs-profile-index/jobs-profile-index.component.html","./src/app/org-management/components/org-structure/add-org-structure-node/add-org-structure-node.component.ts","./src/app/org-management/components/org-structure/add-org-structure-node/add-org-structure-node.component.html","./src/app/org-management/components/org-structure/add-org-structure/add-org-structure.component.ts","./src/app/org-management/components/org-structure/add-org-structure/add-org-structure.component.html","./src/app/org-management/components/org-structure/employee-card/employee-card.component.ts","./src/app/org-management/components/org-structure/employee-card/employee-card.component.html","./src/app/org-management/components/org-structure/job-title-details-dialog/job-title-details-dialog.component.ts","./src/app/org-management/components/org-structure/job-title-details-dialog/job-title-details-dialog.component.html","./src/app/org-management/components/org-structure/job-title-org-chart/job-title-org-chart.component.ts","./src/app/org-management/components/org-structure/job-title-org-chart/job-title-org-chart.component.html","./src/app/org-management/components/org-structure/org-details-employees/org-details-employees.component.ts","./src/app/org-management/components/org-structure/org-details-employees/org-details-employees.component.html","./src/app/org-management/components/org-structure/org-structure-details/org-structure-details.component.ts","./src/app/org-management/components/org-structure/org-structure-details/org-structure-details.component.html","./src/app/org-management/components/org-structure/org-structure-hierarchy-details/org-structure-hierarchy-details.component.ts","./src/app/org-management/components/org-structure/org-structure-hierarchy-details/org-structure-hierarchy-details.component.html","./src/app/org-management/components/org-structure/org-structure-index/org-structure-index.component.ts","./src/app/org-management/components/org-structure/org-structure-index/org-structure-index.component.html","./src/app/org-management/components/org-structure/resources-chart/resources-chart.component.ts","./src/app/org-management/components/org-structure/resources-chart/resources-chart.component.html","./src/app/org-management/model/job-title.ts","./src/app/org-management/org-management-routing.module.ts","./src/app/org-management/org-management.module.ts","./src/app/org-management/services/job-title-chart.service.ts","./src/app/org-management/services/resources-chart.service.ts","./src/app/shared/services/group-by.service.ts"],"sourcesContent":["import { Component, OnInit } from \"@angular/core\";\r\nimport { MatTableDataSource } from \"@angular/material/table\";\r\nimport { IJobTitleModel } from \"app/org-management/model/job-title\";\r\nimport { JobTitleService } from \"app/org-management/services/job-profile/job-title.service\";\r\nimport { MessageTypes } from \"app/shared/enums/message-types.enum\";\r\nimport { IPageParams } from \"app/shared/interfaces/params\";\r\nimport { IResponse, IResponseList } from \"app/shared/interfaces/responces\";\r\nimport { AppHelpers } from \"app/shared/resources/app-helpers\";\r\n\r\n@Component({\r\n\tselector: \"app-jobs-profile-index\",\r\n\ttemplateUrl: \"./jobs-profile-index.component.html\",\r\n\tstyleUrls: [\"./jobs-profile-index.component.scss\"],\r\n})\r\nexport class JobsProfileIndexComponent extends AppHelpers implements OnInit {\r\n\tmandatoryColomns: string[] = [\"Ser\", \"id\", \"code\", \"en_Name\", \"ar_Name\", \"actions\"];\r\n\toptionalColomns: string[] = [\"jobFamily\"];\r\n\r\n\tdataSource: MatTableDataSource<IJobTitleModel>;\r\n\tisLoaded: boolean = false;\r\n\tconstructor(private jobTitleService: JobTitleService) {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tngOnInit(): void {}\r\n\r\n\toverride onChangeBusinessAndCompanyId(): void {\r\n\t\tif (this.dataSource?.data?.length > 0) this.dataSource = new MatTableDataSource(null);\r\n\t\tif (this.checkNoBusinessOrCompany())\r\n\t\t\tthis.getList(this.pageFromUrl > 0 ? this.pageFromUrl : this.firstPage);\r\n\t}\r\n\r\n\tgetList(page: number, pageSize?: number) {\r\n\t\tthis.removePageParams();\r\n\t\tthis.page.pageIndex = page;\r\n\t\tif (pageSize) this.page.pageSize = pageSize;\r\n\t\tlet params: IPageParams = {\r\n\t\t\tPageNumber: page,\r\n\t\t\tpageSize: this.page.pageSize,\r\n\t\t};\r\n\t\tthis.jobTitleService.getList(params).subscribe((res: IResponseList<IJobTitleModel[]>) => {\r\n\t\t\tif (res.message.messageType == MessageTypes.Success) {\r\n\t\t\t\tif (res.data.length == 0 && page > 1) {\r\n\t\t\t\t\tthis.getList(this.prevPage);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tres.data.map((item) => {\r\n\t\t\t\t\titem.jobFamily = this.msgTranslate(\r\n\t\t\t\t\t\titem.core_Job_Title_Family?.ar_Name,\r\n\t\t\t\t\t\titem.core_Job_Title_Family?.en_Name\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\t\tthis.dataSource = new MatTableDataSource(res.data);\r\n\t\t\t\tthis.isLoaded = true;\r\n\t\t\t\tthis.page.length = res.meta.totalItemCount;\r\n\t\t\t} else this.errorList(res.message.messages);\r\n\t\t});\r\n\t}\r\n\r\n\tonDelete(jobProfile: IJobTitleModel): void {\r\n\t\tlet msg = this.msgTranslate(jobProfile.ar_Name, jobProfile.en_Name);\r\n\t\tthis.deleateDialog(msg).subscribe((confirm) => {\r\n\t\t\tif (confirm) this.delete(jobProfile);\r\n\t\t});\r\n\t}\r\n\r\n\tdelete(jobProfile: IJobTitleModel) {\r\n\t\tthis.showLoading();\r\n\t\tthis.jobTitleService.Delete(jobProfile.id).subscribe((res: IResponse) => {\r\n\t\t\tif (res.message.messageType == MessageTypes.Success) {\r\n\t\t\t\tthis.deleteSuccessfullyMsg(res?.message?.messageTypeName);\r\n\t\t\t\tif (this.dataSource.data.length == 1 && this.currentPage > 1) {\r\n\t\t\t\t\t// if last item in list: get previous page\r\n\t\t\t\t\tthis.getList(this.prevPage, this.page.pageSize);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// if not last item in list: get current page\r\n\t\t\t\t\tthis.getList(this.currentPage, this.page.pageSize);\r\n\t\t\t\t}\r\n\t\t\t} else this.errorList(res.message.messages);\r\n\t\t\tthis.hideLoading();\r\n\t\t});\r\n\t}\r\n}\r\n","<ngx-spinner></ngx-spinner>\r\n\r\n<div class=\"row\">\r\n\t<div class=\"col-12\">\r\n\t\t<mat-card>\r\n\t\t\t<mat-card-title>\r\n        <page-title\r\n          title=\"jobsProfile\"\r\n          [globalFunctions]=\"globalFunctions?.reverse()\"\r\n        >\r\n        </page-title>\r\n\t\t\t</mat-card-title>\r\n\r\n\t\t\t<mat-divider></mat-divider>\r\n\r\n\t\t\t<app-material-table\r\n\t\t\t\t\t[isLoaded]=\"isLoaded\"\r\n\t\t\t\t[dataSource]=\"dataSource\"\r\n\t\t\t\t[mandatoryColomns]=\"mandatoryColomns\"\r\n\t\t\t\t[optionalColomns]=\"optionalColomns\"\r\n\t\t\t\t[page]=\"page\"\r\n\t\t\t\t(onChangePage)=\"getList($event.pageIndex + 1, $event.pageSize)\"\r\n\t\t\t\t[actions]=\"rowFunctions\"\r\n\t\t\t\t(deleteRow)=\"onDelete($event)\"\r\n\t\t\t>\r\n\t\t\t</app-material-table>\r\n\t\t</mat-card>\r\n\t</div>\r\n</div>\r\n","import { Component, Inject, OnInit } from \"@angular/core\";\r\nimport { FormGroup, Validators } from \"@angular/forms\";\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from \"@angular/material/dialog\";\r\nimport { OrganizationsComponent } from \"app/org-management-setup/components/organizations/organizations.component\";\r\nimport { IOrganizationModel } from \"app/org-management-setup/models/organizations\";\r\nimport { OrganizationsService } from \"app/org-management-setup/services/organizations.service\";\r\nimport {\r\n  IOrgStructureNodeModel,\r\n  IOrgStructureNodeRequest,\r\n} from \"app/org-management/model/org-structure\";\r\nimport { OrgStructureService } from \"app/org-management/services/org-structure.service\";\r\nimport { MessageTypes } from \"app/shared/enums/message-types.enum\";\r\nimport { IResponse } from \"app/shared/interfaces/responces\";\r\nimport { AppHelpers } from \"app/shared/resources/app-helpers\";\r\nimport { ViewsManager } from \"app/shared/resources/views-manager\";\r\n\r\n@Component({\r\n  selector: \"app-add-org-structure-node\",\r\n  templateUrl: \"./add-org-structure-node.component.html\",\r\n  styleUrls: [\"./add-org-structure-node.component.scss\"],\r\n})\r\nexport class AddOrgStructureNodeComponent extends AppHelpers implements OnInit {\r\n  form: FormGroup;\r\n  submitted: boolean = false;\r\n\r\n  // organization dropdown\r\n  organizationList: IOrganizationModel[] = [];\r\n  viewName: string;\r\n\r\n  constructor(\r\n    private orgStructureService: OrgStructureService,\r\n    private organizationsService: OrganizationsService,\r\n    public dialogRef: MatDialogRef<AddOrgStructureNodeComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: any\r\n  ) {\r\n    super();\r\n    // console.log(data);\r\n    this.viewName = ViewsManager.organizations;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.form = this.fb.group({\r\n      // oldId: [0, { nonNullable: true }],\r\n      org_Structure_ID: [null],\r\n      parenT_ID: [null],\r\n      orG_TYPE_ID: [null, [Validators.required]],\r\n      orG_ID: [null, [Validators.required]],\r\n    });\r\n\r\n    this.getFormValues();\r\n  }\r\n\r\n  override onChangeBusinessAndCompanyId(): void {\r\n    if (\r\n      this.formCtrls.org_Structure_ID.value > 0 &&\r\n      this.checkNoBusinessOrCompany()\r\n    ) {\r\n      this.getAllUnAssignedOrganizationsByStructureId();\r\n    }\r\n  }\r\n\r\n  getFormValues() {\r\n    this.form.patchValue(this.data);\r\n    // // save old org id to edit\r\n    // this.formCtrls.oldId.setValue(this.data.orG_ID);\r\n    setTimeout(() => {\r\n      // this.formCtrls.orG_TYPE_ID.setValue(this.data.orG_TYPE_ID);\r\n      if (!this.form.value.parenT_ID) {\r\n        this.formCtrls.orG_TYPE_ID.disable();\r\n        this.formCtrls.orG_TYPE_ID.setValue(1);\r\n      }\r\n      // this.formCtrls.orG_ID.setValue(this.data.orG_ID);\r\n    }, 100);\r\n    // console.log(this.data, this.form.value);\r\n  }\r\n\r\n  get formCtrls() {\r\n    return this.form.controls;\r\n  }\r\n\r\n  submit() {\r\n    // console.log(this.form.value);\r\n    this.submitted = true;\r\n    if (this.form.valid) {\r\n      const model: IOrgStructureNodeRequest = {\r\n        core_Org_Structure_Org: {\r\n          org_Structure_ID: this.formCtrls.org_Structure_ID.value,\r\n          orG_TYPE_ID: this.formCtrls.orG_TYPE_ID.value,\r\n          orG_ID: this.formCtrls.orG_ID.value,\r\n          parenT_ID: this.formCtrls.parenT_ID.value,\r\n        },\r\n      };\r\n\r\n      // this.form.value.oldId == 0 ? this.create(model) : this.update(model);\r\n      this.create(model);\r\n    } // else this.toastr.error(\"General.formNotValid\");\r\n  }\r\n\r\n  create(model: IOrgStructureNodeRequest) {\r\n    this.showLoading();\r\n    this.orgStructureService\r\n      .createNode(model)\r\n      .subscribe((res: IResponse<IOrgStructureNodeModel>) => {\r\n        if (res?.message?.messageType == MessageTypes.Success) {\r\n          this.addSuccessfullyMsg(res?.message?.messageTypeName);\r\n          this.dialogRef.close(true);\r\n        } else this.errorList(res.message.messages);\r\n        this.hideLoading();\r\n      });\r\n  }\r\n\r\n  // update(model: IOrgStructureNodeRequest) {\r\n  //   model.oldOrgID = this.form.value.oldId;\r\n  //   this.showLoading();\r\n  //   this.orgStructureService\r\n  //     .updateNode(model)\r\n  //     .subscribe((res: IResponse<IOrgStructureNodeModel>) => {\r\n  //       if (res.message.messageType == MessageTypes.Success) {\r\n  //         this.updateSuccessfullyMsg(res?.message?.messageTypeName);\r\n  //         this.dialogRef.close(true);\r\n  //       } else this.errorList(res.message.messages);\r\n  //       this.hideLoading();\r\n  //     });\r\n  // }\r\n\r\n  // organization list\r\n  getAllUnAssignedOrganizationsByStructureId() {\r\n    this.showLoading();\r\n    this.organizationsService\r\n      .GetAllUnAssignedByStructureId(this.formCtrls.org_Structure_ID.value)\r\n      .subscribe((res) => {\r\n        if ((res.message.messageType = MessageTypes.Success)) {\r\n          this.organizationList = res.data;\r\n          // if (this.formCtrls.oldId.value > 0)\r\n          //   this.organizationList.unshift(this.data.currentOrganization);\r\n        } else this.errorList(res.message.messages);\r\n        this.hideLoading();\r\n      });\r\n  }\r\n\r\n  createDialog(value: string) {\r\n    this.dialogsService\r\n      .addFromDropdownDialog(OrganizationsComponent, value)\r\n      .afterClosed()\r\n      .subscribe((res) => {\r\n        this.getAllUnAssignedOrganizationsByStructureId();\r\n      });\r\n  }\r\n}\r\n","<ngx-spinner></ngx-spinner>\r\n\r\n<div class=\"row\" #dialogContainer>\r\n  <div class=\"col-12\">\r\n    <div mat-dialog-title>\r\n      <!--\r\n        [id]=\"formCtrls.oldId.value\"\r\n        addTitle=\"orgStructureNode\"\r\n        editTitle=\"editOrgStructureNode\"\r\n       -->\r\n      <page-title title=\"orgStructureNode\"> </page-title>\r\n    </div>\r\n\r\n    <mat-dialog-content>\r\n      <div class=\"row\">\r\n        <div class=\"col-12\">\r\n          <form [formGroup]=\"form\">\r\n            <div class=\"row\">\r\n              <div class=\"col-md-6 col-12\">\r\n                <app-org-types-dropdown\r\n                  [control]=\"formCtrls.orG_TYPE_ID\"\r\n                  [submitted]=\"submitted\"\r\n                  [optionDisabled]=\"\r\n                    formCtrls.parenT_ID.value ? 'isCompany' : null\r\n                  \"\r\n                  [appendTo]=\"dialogContainer\"\r\n                  [filter]=\"true\"\r\n                >\r\n                </app-org-types-dropdown>\r\n              </div>\r\n\r\n              <div class=\"col-md-6 col-12\">\r\n                <app-prime-dropdown\r\n                  [control]=\"formCtrls.orG_ID\"\r\n                  label=\"organization\"\r\n                  [submitted]=\"submitted\"\r\n                  [List]=\"organizationList\"\r\n                  [appendTo]=\"dialogContainer\"\r\n                  [filter]=\"true\"\r\n                  optionDisabled=\"assignStr\"\r\n                  [viewName]=\"viewName\"\r\n                  (createNewDialog)=\"createDialog($event)\"\r\n                >\r\n                </app-prime-dropdown>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </mat-dialog-content>\r\n\r\n    <mat-dialog-actions align=\"end\">\r\n      <submit-btn [id]=\"0\" (onClick)=\"submit()\"></submit-btn>\r\n      <button\r\n        mat-raised-button\r\n        class=\"btn btn-warning mr-1 ml-1\"\r\n        [mat-dialog-close]=\"false\"\r\n        cdkFocusInitial\r\n      >\r\n        {{ \"General.close\" | translate }}\r\n      </button>\r\n    </mat-dialog-actions>\r\n  </div>\r\n</div>\r\n","import { Component, Injector, OnInit } from \"@angular/core\";\r\nimport { FormGroup, Validators } from \"@angular/forms\";\r\nimport {\r\n  IOrgStructureModel,\r\n  IOrgStructureAddRequest,\r\n  IOrgStructureEditRequest,\r\n} from \"app/org-management/model/org-structure\";\r\nimport { OrgStructureService } from \"app/org-management/services/org-structure.service\";\r\nimport { MessageTypes } from \"app/shared/enums/message-types.enum\";\r\nimport { IResponse } from \"app/shared/interfaces/responces\";\r\nimport { AppHelpers } from \"app/shared/resources/app-helpers\";\r\nimport { CustomValidator } from \"app/shared/validators/custom.validator\";\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from \"@angular/material/dialog\";\r\nimport { ICreateDialog } from \"app/shared/interfaces/dropdown.interface\";\r\nimport { HelpersFunctions } from \"app/shared/resources/helpers-functions\";\r\n@Component({\r\n  selector: \"app-add-org-structure\",\r\n  templateUrl: \"./add-org-structure.component.html\",\r\n  styleUrls: [\"./add-org-structure.component.scss\"],\r\n})\r\nexport class AddOrgStructureComponent extends AppHelpers implements OnInit {\r\n  form: FormGroup;\r\n  submitted: boolean = false;\r\n\r\n  orgStructure: IOrgStructureModel;\r\n  orgStructureId: number;\r\n  oldStructureIdToCopy: number;\r\n\r\n  todayDate: Date = new Date();\r\n\r\n  structureList: IOrgStructureModel[] = [];\r\n\r\n  constructor(private orgStructureService: OrgStructureService) {\r\n    super();\r\n    this.todayDate.setHours(0, 0, 0, 0);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.form = this.fb.group({\r\n      id: [0, { nonNullable: true }],\r\n      en_Name: [null, [Validators.required, CustomValidator.whiteSpace]],\r\n      ar_Name: [null, [Validators.required, CustomValidator.whiteSpace]],\r\n      froM_DATE: [null, [Validators.required]],\r\n      CopyStructureID: [null],\r\n    });\r\n\r\n    this.activatedRoute.paramMap.subscribe((params) => {\r\n      this.orgStructureId = Number(params.get(\"orgStructureId\")) ?? 0;\r\n    });\r\n  }\r\n\r\n  override onChangeBusinessAndCompanyId(): void {\r\n    if (this.checkNoBusinessOrCompany()) {\r\n      this.orgStructureId == 0 ? this.getAllStructures() : this.getById();\r\n    }\r\n  }\r\n\r\n  get formCtrls() {\r\n    return this.form.controls;\r\n  }\r\n\r\n  getById() {\r\n    this.showLoading();\r\n    this.orgStructureService.getById(this.orgStructureId).subscribe((res) => {\r\n      if (res?.message?.messageType == MessageTypes.Success) {\r\n        this.orgStructure = res.data[0];\r\n        this.orgStructureToEdit();\r\n      } else this.errorList(res.message.messages);\r\n      this.hideLoading();\r\n    });\r\n  }\r\n\r\n  orgStructureToEdit() {\r\n    this.form.patchValue(this.orgStructure);\r\n    // console.log(this.form.value);\r\n  }\r\n\r\n  submit() {\r\n    // console.log(this.form.value);\r\n    this.submitted = true;\r\n    if (this.form.valid) {\r\n      this.formCtrls.id.value == 0 ? this.create() : this.update();\r\n    } // else this.toastr.error(\"General.formNotValid\");\r\n  }\r\n\r\n  create() {\r\n    const model: IOrgStructureAddRequest = {\r\n      Core_Org_Structure: {\r\n        en_Name: this.form.value.en_Name,\r\n        ar_Name: this.form.value.ar_Name,\r\n        froM_DATE: HelpersFunctions.mapDateReverse(\r\n          this.form.value.froM_DATE ?? this.orgStructure?.froM_DATE\r\n        ),\r\n      },\r\n      CopyStructureID: this.formCtrls.CopyStructureID.value,\r\n    };\r\n\r\n    this.showLoading();\r\n    this.orgStructureService\r\n      .create(model)\r\n      .subscribe((res: IResponse<IOrgStructureModel>) => {\r\n        if (res?.message?.messageType == MessageTypes.Success) {\r\n          this.addSuccessfullyMsg(res?.message?.messageTypeName);\r\n          this.orgStructureId = res.data.id;\r\n          this.formCtrls.id.setValue(this.orgStructureId);\r\n          let url = `/org-management/${this.moduleId}/org-structure/edit/${this.orgStructureId}`;\r\n          this.navigateTo(url);\r\n          this.orgStructure = res.data;\r\n          this.formCtrls.CopyStructureID.reset();\r\n        } else this.errorList(res.message.messages);\r\n        this.hideLoading();\r\n      });\r\n  }\r\n\r\n  update() {\r\n    const model: IOrgStructureEditRequest = {\r\n      id: this.form.value.id,\r\n      en_Name: this.form.value.en_Name,\r\n      ar_Name: this.form.value.ar_Name,\r\n      froM_DATE: HelpersFunctions.mapDateReverse(\r\n        this.form.value.froM_DATE ?? this.orgStructure?.froM_DATE\r\n      ),\r\n      to_DATE: HelpersFunctions.mapDateReverse(this.orgStructure.tO_DATE),\r\n    };\r\n\r\n    this.showLoading();\r\n    this.orgStructureService\r\n      .update(model)\r\n      .subscribe((res: IResponse<IOrgStructureModel>) => {\r\n        if (res.message.messageType == MessageTypes.Success) {\r\n          this.updateSuccessfullyMsg(res?.message?.messageTypeName);\r\n          this.orgStructure = res.data;\r\n        } else this.errorList(res.message.messages);\r\n        this.hideLoading();\r\n      });\r\n  }\r\n\r\n  clearForm() {\r\n    /* if (this.orgStructureId == 0)  */ this.form.reset({ id: 0 });\r\n    // else this.orgStructureToEdit();\r\n    this.submitted = false;\r\n  }\r\n\r\n  canNotEdit(): boolean {\r\n    // can edit if org structure from date greater than today date\r\n    return (\r\n      new Date(this.todayDate).getTime() >=\r\n      new Date(this.orgStructure?.froM_DATE).getTime()\r\n    );\r\n  }\r\n\r\n  onChangeOldStructure() {}\r\n\r\n  // organization list\r\n  getAllStructures() {\r\n    this.showLoading();\r\n    this.orgStructureService.getAll().subscribe((res) => {\r\n      if ((res.message.messageType = MessageTypes.Success)) {\r\n        this.structureList = [\r\n          {\r\n            id: null,\r\n            ar_Name: \"انشاء جديد\",\r\n            en_Name: \"Create new\",\r\n          },\r\n          ...res.data,\r\n        ];\r\n      } else this.errorList(res.message.messages);\r\n      this.hideLoading();\r\n    });\r\n  }\r\n}\r\n","<ngx-spinner></ngx-spinner>\r\n\r\n<div class=\"row\">\r\n  <div class=\"col-12\">\r\n    <mat-card>\r\n      <mat-card-title>\r\n        <page-title\r\n          [id]=\"formCtrls.id.value\"\r\n          addTitle=\"orgStructure\"\r\n          editTitle=\"editOrgStructure\"\r\n        >\r\n        </page-title>\r\n\r\n\r\n\r\n        <!-- add new btn -->\r\n        <app-add-new-btn\r\n          *ngIf=\"formCtrls.id.value > 0\"\r\n          url=\"/org-management/{{ moduleId }}/org-structure/add\"\r\n          [params]=\"parantParam\"\r\n        >\r\n        </app-add-new-btn>\r\n\r\n        <!-- back btn -->\r\n        <app-back-btn\r\n          url=\"/org-management/{{ moduleId }}/org-structure/index\"\r\n          [params]=\"pageParams\"\r\n        ></app-back-btn>\r\n\r\n\r\n      </mat-card-title>\r\n\r\n      <mat-card-content class=\"container-fluid\">\r\n        <div class=\"row\">\r\n          <div class=\"col-12\">\r\n            <form [formGroup]=\"form\">\r\n              <div class=\"row\">\r\n                <div class=\"col-md-4 col-12\">\r\n                  <app-input\r\n                    [control]=\"formCtrls.en_Name\"\r\n                    [submitted]=\"submitted\"\r\n                    label=\"en_Name\"\r\n                  >\r\n                  </app-input>\r\n                </div>\r\n\r\n                <div class=\"col-md-4 col-12\">\r\n                  <app-input\r\n                    [control]=\"formCtrls.ar_Name\"\r\n                    [submitted]=\"submitted\"\r\n                    label=\"ar_Name\"\r\n                  >\r\n                  </app-input>\r\n                </div>\r\n\r\n                <div class=\"col-md-4 col-12\">\r\n                  <app-datepicker\r\n                    [control]=\"formCtrls.froM_DATE\"\r\n                    [submitted]=\"submitted\"\r\n                    label=\"froM_DATE\"\r\n                    [minDate]=\"todayDate\"\r\n                    [disabled]=\"canNotEdit()\"\r\n                  >\r\n                  </app-datepicker>\r\n                </div>\r\n\r\n                <div class=\"col-md-4 col-12\">\r\n                  <app-prime-dropdown\r\n                    [control]=\"formCtrls.CopyStructureID\"\r\n                    label=\"copyFromPreviousStructure\"\r\n                    [submitted]=\"submitted\"\r\n                    [List]=\"structureList\"\r\n                    *ngIf=\"this.form.value.id == 0\"\r\n                    (change)=\"onChangeOldStructure()\"\r\n                  >\r\n                  </app-prime-dropdown>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </mat-card-content>\r\n\r\n      <mat-card-actions align=\"end\">\r\n        <submit-btn [id]=\"formCtrls.id.value\" (onClick)=\"submit()\">\r\n        </submit-btn>\r\n        <reset-form-btn *ngIf=\"formCtrls.id.value == 0\" (click)=\"clearForm()\">\r\n        </reset-form-btn>\r\n      </mat-card-actions>\r\n\r\n      <p-messages\r\n        severity=\"warn\"\r\n        *ngIf=\"canNotEdit()\"\r\n        [ngClass]=\"{ 'ar-msg': languageService.isArabic }\"\r\n      >\r\n        <ng-template pTemplate>\r\n          <span class=\"p-message-icon pi pi-exclamation-triangle\"></span>\r\n          <div class=\"p-message-detail\">\r\n            {{ \"canNotEditOrgStructure\" | translate }}\r\n          </div>\r\n        </ng-template>\r\n      </p-messages>\r\n\r\n      <!-- chart -->\r\n      <app-org-structure-hierarchy-details\r\n        [orgStructureId]=\"orgStructureId || formCtrls.CopyStructureID.value\"\r\n        [canNotEdit]=\"this.orgStructureId == 0 ? true : canNotEdit()\"\r\n      ></app-org-structure-hierarchy-details>\r\n    </mat-card>\r\n  </div>\r\n</div>\r\n","import {\r\n  Component,\r\n  HostListener,\r\n  Inject,\r\n  OnInit\r\n} from \"@angular/core\";\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from \"@angular/material/dialog\";\r\nimport { IEmployeeCardModel } from \"app/personnel-setup/models/employees\";\r\nimport { EmployeesService } from \"app/personnel-setup/services/employees/employees.service\";\r\nimport { MessageTypes } from \"app/shared/enums/message-types.enum\";\r\nimport { IResponse } from \"app/shared/interfaces/responces\";\r\nimport { AppHelpers } from \"app/shared/resources/app-helpers\";\r\n\r\n@Component({\r\n  selector: \"app-employee-card\",\r\n  templateUrl: \"./employee-card.component.html\",\r\n  styleUrls: [\"./employee-card.component.scss\"],\r\n})\r\nexport class EmployeeCardComponent extends AppHelpers implements OnInit {\r\n  employeeId: number;\r\n  employeeData: IEmployeeCardModel;\r\n  loaded: boolean = false;\r\n\r\n  constructor(\r\n    private employeesService: EmployeesService,\r\n    public dialogRef: MatDialogRef<EmployeeCardComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: any\r\n  ) {\r\n    super();\r\n    this.employeeId = data.employeeId;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // if (this.CheckNoBusinessOrCompany() && this.employeeId > 0) this.getEmployeeData();\r\n\r\n    const overlays = document.querySelectorAll(\".cdk-overlay-backdrop\");\r\n    if (overlays.length > 0)\r\n      overlays[overlays.length - 1].classList.add(\"no-overlay\");\r\n  }\r\n\r\n  override onChangeBusinessAndCompanyId(): void {\r\n    if (this.checkNoBusinessOrCompany() && this.employeeId > 0) this.getEmployeeData();\r\n  }\r\n\r\n  getEmployeeData() {\r\n    this.employeesService\r\n      .getEmployeeCardById(this.employeeId)\r\n      .subscribe((res: IResponse<IEmployeeCardModel[]>) => {\r\n        if (res.message.messageType == MessageTypes.Success) {\r\n          if (res.data.length > 0) {\r\n            res.data[0].contact = res.data[0]?.contacts\r\n              .map((contact) => contact.value)\r\n              .join(\", \");\r\n            this.employeeData = res.data[0];\r\n          }\r\n          this.loaded = true;\r\n        } else this.errorList(res.message.messages);\r\n      });\r\n  }\r\n\r\n  // close dilog on resize screen\r\n  @HostListener(\"window:resize\", [\"$event\"])\r\n  onWindowResize(event) {\r\n    this.dialogRef.close();\r\n  }\r\n}\r\n","<ngx-spinner></ngx-spinner>\r\n\r\n<div class=\"title\">\r\n  <h6 class=\"type-name info\">\r\n    {{ \"employeeDetails\" | translate | titlecase }}\r\n  </h6>\r\n\r\n  <button\r\n    mat-icon-button\r\n    class=\"float-right mb-1\"\r\n    [mat-dialog-close]=\"false\"\r\n    [class.ar]=\"languageService.isArabic\"\r\n  >\r\n    <i class=\"pi pi-times\"></i>\r\n  </button>\r\n</div>\r\n\r\n<mat-dialog-content class=\"employee-card\">\r\n  <ng-container *ngIf=\"employeeData && loaded\">\r\n    <div class=\"row\">\r\n      <div class=\"col-md-4 col-12 img-container\">\r\n        <p-image\r\n          *ngIf=\"employeeData.img && employeeData.img != '/'; else noImg\"\r\n          [src]=\"fileService.preview(employeeData.img)\"\r\n          alt=\"{{ 'img' | translate }}\"\r\n          preview=\"true\"\r\n        >\r\n        </p-image>\r\n        <ng-template #noImg>\r\n          <div class=\"alt-img-preview\">\r\n            <i class=\"pi pi-user\"></i>\r\n          </div>\r\n        </ng-template>\r\n      </div>\r\n      <div class=\"col-md-8 col-12\">\r\n        <p class=\"mtop-5\">\r\n          {{ msgTranslate(employeeData.ar_Name, employeeData.en_Name) }}\r\n        </p>\r\n        <p *ngIf=\"employeeData.contact\">\r\n          <i class=\"pi pi-phone\"></i>\r\n          <span class=\"mx-1\">{{ employeeData.contact }}</span>\r\n        </p>\r\n        <p *ngIf=\"employeeData.email\">\r\n          <i class=\"fa fa-envelope\"></i>\r\n          <span class=\"mx-1\">{{ employeeData.email }}</span>\r\n        </p>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"mtop-20\">\r\n      <div class=\"mbottom-14\" style=\"font-weight: bold\">\r\n        {{ \"employment\" | translate | titlecase }}\r\n      </div>\r\n      <p>\r\n        {{\r\n          msgTranslate(employeeData.jobTitleNameAr, employeeData.jobTitleName)\r\n            | titlecase\r\n        }}\r\n      </p>\r\n      <p>\r\n        {{\r\n          msgTranslate(employeeData.organizationAr, employeeData.organization)\r\n            | titlecase\r\n        }}\r\n      </p>\r\n      <p>\r\n        <span\r\n          *ngIf=\"employeeData.isActive; else no\"\r\n          class=\"badge bg-light-success\"\r\n        >\r\n          {{ \"active\" | translate }}\r\n        </span>\r\n        <ng-template #no>\r\n          <span class=\"badge bg-light-danger\">\r\n            {{ \"notActive\" | translate }}\r\n          </span>\r\n        </ng-template>\r\n      </p>\r\n\r\n      <p class=\"mbottom-14 mtop-14\" style=\"font-weight: bold\">\r\n        {{ \"noOfEmployeeReporting\" | translate }}\r\n      </p>\r\n      <p class=\"font-size-14\">\r\n        <span> {{ \"asSolidManager\" | translate }} : </span>\r\n        <span> {{ employeeData?.solidEmp?.length ?? 0 }}</span>\r\n      </p>\r\n      <p class=\"font-size-14\">\r\n        <span> {{ \"asDottedManager\" | translate }} : </span>\r\n        <span> {{ employeeData?.dotesEmp?.length ?? 0 }}</span>\r\n      </p>\r\n    </div>\r\n  </ng-container>\r\n\r\n  <!-- on loading -->\r\n  <ng-container *ngIf=\"!employeeData && !loaded\">\r\n    <app-structure-employee-card-skeleton></app-structure-employee-card-skeleton>\r\n  </ng-container>\r\n</mat-dialog-content>\r\n","import { Component, HostListener, Inject, OnInit } from \"@angular/core\";\r\nimport {\r\n  DialogPosition,\r\n  MAT_DIALOG_DATA,\r\n  MatDialog,\r\n  MatDialogRef,\r\n} from \"@angular/material/dialog\";\r\nimport { AppHelpers } from \"app/shared/resources/app-helpers\";\r\nimport {\r\n  IEmployeeJobTitleModel,\r\n  IJobTitleModel,\r\n} from \"app/org-management/model/job-title\";\r\nimport { GroupByService } from \"app/shared/services/group-by.service\";\r\nimport { EmployeeCardComponent } from \"../employee-card/employee-card.component\";\r\nimport { IEmployeeModel } from \"app/personnel-setup/models/employees\";\r\n\r\n@Component({\r\n  selector: \"app-job-title-details-dialog\",\r\n  templateUrl: \"./job-title-details-dialog.component.html\",\r\n  styleUrls: [\"./job-title-details-dialog.component.scss\"],\r\n})\r\nexport class JobTitleDetailsDialogComponent\r\n  extends AppHelpers\r\n  implements OnInit\r\n{\r\n  nodeData: IJobTitleModel;\r\n  expandedIndex: number = 0;\r\n  employees: IEmployeeModel[] = [];\r\n  employeesGroups: {\r\n    key: string;\r\n    List: any[];\r\n  }[];\r\n  employeesGroupsFiltered: {\r\n    key: string;\r\n    List: any[];\r\n  }[];\r\n  loaded: boolean = false;\r\n\r\n  constructor(\r\n    private groupByService: GroupByService,\r\n    // opened ass dialog\r\n    public dialogRef: MatDialogRef<JobTitleDetailsDialogComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    // to open another dialog\r\n    private dialog: MatDialog\r\n  ) {\r\n    super();\r\n    this.expandedIndex = data.expandedIndex;\r\n    this.nodeData = data.nodeData;\r\n\r\n    this.employees = this.nodeData.core_Person_Instance_Job_Title.map(\r\n      (item) => item.core_Person_Instance?.core_Person\r\n    );\r\n    if (this.employees.length > 0) this.sortAndGroupEmployees();\r\n    else this.loaded = true;\r\n  }\r\n\r\n  ngOnInit() {\r\n    const overlays = document.querySelectorAll(\".cdk-overlay-backdrop\");\r\n    if (overlays.length > 0)\r\n      overlays[overlays.length - 1].classList.add(\"no-overlay\");\r\n  }\r\n\r\n  sortAndGroupEmployees() {\r\n    this.employees = this.employees.filter((emp) => {\r\n      if (emp) return emp;\r\n    });\r\n    this.employeesGroups = this.groupByService\r\n      .groupByPartOfProperty(\r\n        this.employees,\r\n        this.languageService.isArabic ? \"ar_Name\" : \"en_Name\",\r\n        1\r\n      )\r\n      .sort((a, b) => {\r\n        if (a.key < b.key) return -1;\r\n        if (a.key > b.key) return 1;\r\n        return 0;\r\n      });\r\n    this.employeesGroupsFiltered = this.employeesGroups.slice();\r\n    this.loaded = true;\r\n  }\r\n\r\n  // open employee card dialog\r\n  openEmployeeCardDialog(target: HTMLElement, employeeId: number) {\r\n    let lastTarget: HTMLElement = this.getHeaderElement(target);\r\n    let targetPositions: DOMRect = lastTarget.getBoundingClientRect();\r\n\r\n    // dialog position x-axis (right or left)\r\n    let dialogWidth = 350;\r\n    let dialogPositions: DialogPosition = {};\r\n    // can open left\r\n    if (\r\n      targetPositions.left + targetPositions.width / 2 + dialogWidth <=\r\n      window.innerWidth\r\n    )\r\n      dialogPositions.left = `${\r\n        targetPositions.left + targetPositions.width / 2\r\n      }px`;\r\n    // can open right\r\n    else if (targetPositions.left - dialogWidth / 2 - 10 >= 0)\r\n      dialogPositions.left = `${targetPositions.left - dialogWidth / 2 - 10}px`;\r\n    // no left and no right\r\n    else dialogPositions.left = null;\r\n\r\n    return this.dialog\r\n      .open(EmployeeCardComponent, {\r\n        data: { employeeId: employeeId },\r\n        position: dialogPositions,\r\n        width: `${dialogWidth}px`,\r\n        // maxWidth: \"350px\",\r\n        maxHeight: \"80hv\",\r\n        autoFocus: false,\r\n      })\r\n      .afterClosed()\r\n      .subscribe((closed: boolean) => {});\r\n  }\r\n\r\n  getHeaderElement(target: HTMLElement): HTMLElement {\r\n    return target.classList.contains(\"mat-expansion-panel-body\")\r\n      ? target\r\n      : this.getHeaderElement(target.parentElement);\r\n  }\r\n\r\n  // search in employees\r\n  searchEmployees(searchName: string) {\r\n    this.employeesGroupsFiltered = this.employeesGroups\r\n      .map((item) => ({\r\n        key: item.key,\r\n        List: item.List.filter(\r\n          (emp) =>\r\n            emp.en_Name.toLowerCase().includes(searchName.toLowerCase()) ||\r\n            emp.ar_Name.toLowerCase().includes(searchName.toLowerCase())\r\n        ),\r\n      }))\r\n      .filter((item) => item.List.length > 0);\r\n  }\r\n\r\n  // close dilog on resize screen\r\n  @HostListener(\"window:resize\", [\"$event\"])\r\n  onWindowResize(event) {\r\n    this.dialogRef.close();\r\n  }\r\n}\r\n","<ngx-spinner></ngx-spinner>\r\n\r\n<div class=\"details-dialog-title\">\r\n  <div class=\"mb-2\">\r\n    <button\r\n      mat-icon-button\r\n      class=\"float-right mb-1\"\r\n      [mat-dialog-close]=\"false\"\r\n      [class.ar]=\"languageService.isArabic\"\r\n    >\r\n      <i class=\"pi pi-times\"></i>\r\n    </button>\r\n\r\n    <h6 class=\"type-name info\">\r\n      {{ msgTranslate(nodeData.ar_Name, nodeData.en_Name) }}\r\n    </h6>\r\n  </div>\r\n\r\n  <!-- <p class=\"code\">{{ nodeData.code }}</p> -->\r\n  <p class=\"clearfix\"></p>\r\n</div>\r\n\r\n<mat-dialog-content class=\"details-dialog jobtitle\">\r\n  <mat-accordion multi>\r\n    <mat-expansion-panel [expanded]=\"expandedIndex == 0\">\r\n      <mat-expansion-panel-header>\r\n        <mat-panel-title>{{ \"details\" | translate }}</mat-panel-title>\r\n      </mat-expansion-panel-header>\r\n      <div class=\"expantion-body\">\r\n        <div class=\"table-container\">\r\n          <table>\r\n            <tbody>\r\n              <tr>\r\n                <th>{{ \"code\" | translate | titlecase }}</th>\r\n                <td>{{ nodeData.code }}</td>\r\n              </tr>\r\n              <tr>\r\n                <th>{{ \"jobTitle\" | translate | titlecase }}</th>\r\n                <td>\r\n                  {{ msgTranslate(nodeData.ar_Name, nodeData.en_Name) }}\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <th>{{ \"jobFamily\" | translate | titlecase }}</th>\r\n                <td>\r\n                  {{\r\n                    msgTranslate(\r\n                      nodeData.core_Job_Title_Family?.ar_Name,\r\n                      nodeData.core_Job_Title_Family?.en_Name\r\n                    )\r\n                  }}\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <mat-divider></mat-divider>\r\n\r\n        <div\r\n          class=\"no-employees\"\r\n          *ngIf=\"nodeData.core_Org_Job_Title.length > 0\"\r\n        >\r\n          <p *ngFor=\"let orgJob of nodeData.core_Org_Job_Title\">\r\n            {{\r\n              msgTranslate(orgJob.core_Org?.ar_Name, orgJob.core_Org?.en_Name)\r\n            }}\r\n            ( {{ orgJob.currentEmployeeNumber ?? 0 }} {{ \"of\" | translate }}\r\n            {{\r\n              orgJob.max_Employee == 0\r\n                ? translate(\"unlimited\")\r\n                : orgJob.max_Employee\r\n            }}\r\n            FTE )\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </mat-expansion-panel>\r\n\r\n    <mat-expansion-panel [expanded]=\"expandedIndex == 1\">\r\n      <mat-expansion-panel-header>\r\n        <mat-panel-title>{{ \"employees\" | translate }}</mat-panel-title>\r\n      </mat-expansion-panel-header>\r\n      <div class=\"expantion-body employee-body\">\r\n        <ng-container *ngIf=\"employees.length > 0 && loaded\">\r\n          <input\r\n            class=\"form-control mbottom-15\"\r\n            (keyup)=\"searchEmployees($event.target.value)\"\r\n            placeholder=\"{{ 'search' | translate }}\"\r\n          />\r\n          <ng-container *ngFor=\"let group of employeesGroupsFiltered\">\r\n            <div class=\"key-emp\">{{ group.key }}</div>\r\n            <div role=\"button\">\r\n              <p\r\n                *ngFor=\"let employee of group.List\"\r\n                (click)=\"openEmployeeCardDialog($event.target, employee.id)\"\r\n                class=\"name-container\"\r\n              >\r\n                <!-- [matTooltip]=\"msgTranslate(employee.ar_Name, employee.en_Name)\" -->\r\n                <span\r\n                  class=\"img-small-icon\"\r\n                  [class]=\"msgTranslate('mleft-10', 'mright-10')\"\r\n                >\r\n                  <i class=\"pi pi-user\"></i>\r\n                </span>\r\n                <span class=\"emp-name\">\r\n                  {{ msgTranslate(employee.ar_Name, employee.en_Name) }}\r\n                </span>\r\n                <!-- <i\r\n                  class=\"pi pi-id-card mx-2 font-medium-3 info\"\r\n                  (click)=\"openEmployeeCardDialog($event.target, employee.id)\"\r\n                ></i> -->\r\n              </p>\r\n            </div>\r\n          </ng-container>\r\n        </ng-container>\r\n\r\n        <ng-container *ngIf=\"employees.length == 0 && !loaded\">\r\n          <app-org-details-employees-list-skeleton></app-org-details-employees-list-skeleton>\r\n        </ng-container>\r\n\r\n        <ng-container *ngIf=\"employees.length == 0 && loaded\">\r\n          <p-messages\r\n            severity=\"warn\"\r\n            [ngClass]=\"{ 'ar-msg': languageService.isArabic }\"\r\n          >\r\n            <ng-template pTemplate>\r\n              <span class=\"p-message-icon pi pi-exclamation-triangle\"></span>\r\n              <div class=\"p-message-detail\">\r\n                {{ \"noEmployeeInJob\" | translate }}\r\n              </div>\r\n            </ng-template>\r\n          </p-messages>\r\n        </ng-container>\r\n      </div>\r\n    </mat-expansion-panel>\r\n  </mat-accordion>\r\n</mat-dialog-content>\r\n","import { Component, HostListener, OnInit } from \"@angular/core\";\r\nimport { DialogPosition, MatDialog } from \"@angular/material/dialog\";\r\nimport { AppHelpers } from \"app/shared/resources/app-helpers\";\r\nimport { TreeNode } from \"primeng/api\";\r\nimport { FormGroup } from \"@angular/forms\";\r\nimport { Idropdown } from \"app/shared/interfaces/dropdown.interface\";\r\nimport { IJobTitleModel } from \"app/org-management/model/job-title\";\r\nimport { EmployeeCardComponent } from \"../employee-card/employee-card.component\";\r\nimport { JobTitleDetailsDialogComponent } from \"../job-title-details-dialog/job-title-details-dialog.component\";\r\nimport { IResponse } from \"app/shared/interfaces/responces\";\r\nimport { MessageTypes } from \"app/shared/enums/message-types.enum\";\r\nimport { JobTitleChartService } from \"app/org-management/services/job-title-chart.service\";\r\nimport { EmployeeJobInformationService } from \"app/personnel-setup/services/employees/employee-job-information.service\";\r\nimport { IEmpJobDataModel } from \"app/personnel-setup/models/employee-employment-info\";\r\n\r\n@Component({\r\n  selector: \"app-job-title-org-chart\",\r\n  templateUrl: \"./job-title-org-chart.component.html\",\r\n  styleUrls: [\"./job-title-org-chart.component.scss\"],\r\n})\r\nexport class JobTitleOrgChartComponent extends AppHelpers implements OnInit {\r\n  // all structure hierarchy\r\n  jobTitleOrgChart: TreeNode<IJobTitleModel>[];\r\n\r\n  form: FormGroup;\r\n\r\n  searchTypeList: Idropdown[] = [\r\n    {\r\n      id: 1,\r\n      ar_Name: \"الوظائف\",\r\n      en_Name: \"Job titles\",\r\n    },\r\n    {\r\n      id: 2,\r\n      ar_Name: \"الموظفين\",\r\n      en_Name: \"Employees\",\r\n    },\r\n  ];\r\n  employeeJobTitles: IEmpJobDataModel[] = [];\r\n\r\n  constructor(\r\n    private jobTitleChartService: JobTitleChartService,\r\n    private employeeJobInformationService: EmployeeJobInformationService,\r\n    private dialog: MatDialog\r\n  ) {\r\n    super();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.form = this.fb.group({\r\n      searchTypeId: [null],\r\n      jobTitleId: [null],\r\n      employeeId: [null],\r\n    });\r\n  }\r\n\r\n  override onChangeBusinessAndCompanyId(): void {\r\n    this.jobTitleOrgChart = null;\r\n    if (this.checkNoBusinessOrCompany())\r\n      this.getJobTitleOrgChart(this.formCtrls.jobTitleId.value);\r\n  }\r\n\r\n  get formCtrls() {\r\n    return this.form.controls;\r\n  }\r\n\r\n  getJobTitleOrgChart(jobTitleId: number) {\r\n    // console.log(this.form.value);\r\n    if (jobTitleId > 0) {\r\n      this.showLoading();\r\n      this.jobTitleChartService\r\n        .getJobTitleHierarchy(jobTitleId)\r\n        .subscribe((res: IResponse<IJobTitleModel[]>) => {\r\n          if (res.message.messageType == MessageTypes.Success) {\r\n            this.mapDataForChart(res.data);\r\n            setTimeout(() => {\r\n              this.setPositionBtnUpOneLevel();\r\n              this.setPositionUpOneLevelLine();\r\n            }, 100);\r\n          } else this.errorList(res.message.messages);\r\n          this.hideLoading();\r\n        });\r\n    }\r\n  }\r\n\r\n  // maping data for chart\r\n  mapDataForChart(jobTitles: IJobTitleModel[]) {\r\n    this.jobTitleOrgChart = [\r\n      {\r\n        label: jobTitles[0].code,\r\n        type: \"job-title\",\r\n        styleClass: \"job-title-node\",\r\n        expanded: true,\r\n        data: jobTitles[0],\r\n        children: [],\r\n      },\r\n    ];\r\n    this.mapChildrenData(this.jobTitleOrgChart[0]);\r\n    // console.log(jobTitles[0].chiledJobTitles);\r\n  }\r\n\r\n  mapChildrenData(parentJobTitle: TreeNode<IJobTitleModel>) {\r\n    parentJobTitle.data.chiledJobTitles?.map((item) => {\r\n      // maping data\r\n      let mapedItem: TreeNode<IJobTitleModel> = {\r\n        label: item.code,\r\n        type: \"job-title\",\r\n        styleClass: \"job-title-node\",\r\n        expanded: true,\r\n        data: item,\r\n        children: [],\r\n      };\r\n      parentJobTitle.children.push(mapedItem);\r\n      this.mapChildrenData(mapedItem);\r\n    });\r\n  }\r\n\r\n  onChangeSearchType() {\r\n    // console.log(\"change type\");\r\n    this.formCtrls.jobTitleId.reset();\r\n    this.formCtrls.employeeId.reset();\r\n  }\r\n\r\n  // on select job title or employee to start show from it\r\n  onChangeSearchValue() {\r\n    this.getJobTitleOrgChart(this.formCtrls.jobTitleId.value);\r\n  }\r\n\r\n  // up one level in chart\r\n  upOneLevel() {\r\n    this.onChangeSearchType();\r\n    // get job titles start from parent job title id\r\n    this.formCtrls.jobTitleId.setValue(this.jobTitleOrgChart[0].data.parentJobTitleID);\r\n    // this.getJobTitleOrgChart(this.jobTitleOrgChart[0].data.parentJobTitleID);\r\n  }\r\n\r\n  upOneLevelBtnPositions = {\r\n    btnLeft: 0,\r\n    lineLeft: 0,\r\n  };\r\n  setPositionBtnUpOneLevel() {\r\n    let btnWidth = document\r\n      .querySelector(\".upOneLevel-btn\")\r\n      .getBoundingClientRect().width;\r\n    let firstNodePositions = document\r\n      .querySelector(\".p-organizationchart-node-content\")\r\n      ?.getBoundingClientRect();\r\n    let firstNodeContainerPositions = document\r\n      .querySelector(\".p-organizationchart\")\r\n      ?.getBoundingClientRect();\r\n\r\n    this.upOneLevelBtnPositions.btnLeft =\r\n      firstNodePositions?.left -\r\n        firstNodeContainerPositions?.left +\r\n        firstNodePositions?.width / 2 -\r\n        btnWidth / 2 ?? 0;\r\n  }\r\n  setPositionUpOneLevelLine() {\r\n    let firstNodePositions = document\r\n      .querySelector(\".p-organizationchart-node-content\")\r\n      ?.getBoundingClientRect();\r\n    let firstNodeContainerPositions = document\r\n      .querySelector(\".p-organizationchart\")\r\n      ?.getBoundingClientRect();\r\n\r\n    this.upOneLevelBtnPositions.lineLeft =\r\n      firstNodePositions?.left -\r\n        firstNodeContainerPositions?.left +\r\n        firstNodePositions?.width / 2 ?? 0;\r\n  }\r\n\r\n  // node details dialog\r\n  openJobTitleDetailsDialog(\r\n    target: HTMLElement,\r\n    nodeData: IJobTitleModel,\r\n    expandedIndex: number\r\n  ) {\r\n    let targetNode: HTMLElement = this.getHeaderElement(target);\r\n    let targetPositions: DOMRect = targetNode.getBoundingClientRect();\r\n\r\n    let dialogWidth = 350;\r\n    let dialogPositions: DialogPosition = {};\r\n    // can open left\r\n    if (\r\n      targetPositions.left + targetPositions.width + 10 + dialogWidth <=\r\n      window.innerWidth\r\n    )\r\n      dialogPositions.left = `${\r\n        targetPositions.left + targetPositions.width + 10\r\n      }px`;\r\n    // can open right\r\n    else if (targetPositions.left - dialogWidth - 10 >= 0)\r\n      dialogPositions.left = `${targetPositions.left - dialogWidth - 10}px`;\r\n    // no left and no right\r\n    else dialogPositions.left = null;\r\n\r\n    return this.dialog\r\n      .open(JobTitleDetailsDialogComponent, {\r\n        data: {\r\n          nodeData: nodeData,\r\n          expandedIndex: expandedIndex,\r\n        },\r\n        position: dialogPositions,\r\n        width: `${dialogWidth}px`,\r\n        // maxWidth: \"350px\",\r\n        maxHeight: \"90hv\",\r\n        // disableClose: true,\r\n        autoFocus: false,\r\n      })\r\n      .afterClosed()\r\n      .subscribe((closed: boolean) => {});\r\n  }\r\n\r\n  getHeaderElement(target: HTMLElement): HTMLElement {\r\n    return target.classList.contains(\"p-organizationchart-node-content\")\r\n      ? target\r\n      : this.getHeaderElement(target.parentElement);\r\n  }\r\n\r\n  // expand node\r\n  expandNode(node: TreeNode) {\r\n    node.expanded = !node.expanded;\r\n  }\r\n\r\n  // // assign employee to job title\r\n  // openAssignDialog(nodeData: IJobTitleModel) {\r\n  //   return this.dialog\r\n  //     .open(AssignEmployeeToJobTitleComponent, {\r\n  //       data: {\r\n  //         nodeData: nodeData,\r\n  //       },\r\n  //       minWidth: \"50vw\",\r\n  //       autoFocus: false,\r\n  //     })\r\n  //     .afterClosed()\r\n  //     .subscribe((updated: boolean) => {\r\n  //       if (updated) {\r\n  //         // to do >> get first node job title id\r\n  //         this.getJobTitleOrgChart(this.jobTitleOrgChart[0].data.id);\r\n  //       }\r\n  //     });\r\n  // }\r\n\r\n  // open employee card dialog\r\n  openEmployeeCardDialog(target: HTMLElement, employeeId: number) {\r\n    let lastTarget: HTMLElement = this.getHeaderElement(target);\r\n    let targetPositions: DOMRect = lastTarget.getBoundingClientRect();\r\n\r\n    // dialog position x-axis (right or left)\r\n    let dialogWidth = 350;\r\n    let dialogPositions: DialogPosition = {};\r\n    // can open left\r\n    if (\r\n      targetPositions.left + targetPositions.width / 2 + dialogWidth <=\r\n      window.innerWidth\r\n    )\r\n      dialogPositions.left = `${\r\n        targetPositions.left + targetPositions.width / 2\r\n      }px`;\r\n    // can open right\r\n    else if (\r\n      targetPositions.left - dialogWidth / 2 - targetPositions.width / 2 + 10 >=\r\n      0\r\n    )\r\n      dialogPositions.left = `${\r\n        targetPositions.left - dialogWidth / 2 - targetPositions.width / 2 + 10\r\n      }px`;\r\n    // no left and no right\r\n    else dialogPositions.left = null;\r\n\r\n    return this.dialog\r\n      .open(EmployeeCardComponent, {\r\n        data: { employeeId: employeeId },\r\n        position: dialogPositions,\r\n        width: `${dialogWidth}px`,\r\n        // maxWidth: \"350px\",\r\n        maxHeight: \"80hv\",\r\n        autoFocus: false,\r\n      })\r\n      .afterClosed()\r\n      .subscribe((closed: boolean) => {});\r\n  }\r\n\r\n  // change up one level btn & line positions\r\n  @HostListener(\"window:resize\", [\"$event\"])\r\n  onWindowResize(event) {\r\n    // this.dialog.closeAll();\r\n    this.setPositionBtnUpOneLevel();\r\n    this.setPositionUpOneLevelLine();\r\n  }\r\n\r\n  // displayAssignEmployeeIcon(jobTitle: IJobTitleModel): boolean {\r\n  //   let display = false;\r\n  //   jobTitle.core_Org_Job_Title.map((item) => {\r\n  //     if (\r\n  //       item.max_Employee == 0 ||\r\n  //       item.currentEmployeeNumber <= item.max_Employee\r\n  //     )\r\n  //       display = true;\r\n  //   });\r\n  //   return display;\r\n  // }\r\n\r\n  getAllEmployeeJobTitles() {\r\n    let employeeId: number = this.formCtrls.employeeId.value;\r\n    if (employeeId > 0) {\r\n      this.showLoading();\r\n      this.employeeJobInformationService\r\n        .getAllByEmployeeId(employeeId)\r\n        .subscribe((res: IResponse<IEmpJobDataModel[]>) => {\r\n          if (res.message.messageType == MessageTypes.Success) {\r\n            this.employeeJobTitles = res.data;\r\n          } else this.errorList(res.message.messages);\r\n          this.hideLoading();\r\n        });\r\n    }\r\n  }\r\n}\r\n","<div\r\n  class=\"organizationchart-container job-title-chart\"\r\n  [class.ar]=\"languageService.isArabic\"\r\n>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"row mx-0\">\r\n      <div class=\"col-md-4 col-12\">\r\n        <app-prime-dropdown\r\n          [control]=\"formCtrls.searchTypeId\"\r\n          [List]=\"searchTypeList\"\r\n          label=\"searchBy\"\r\n          (change)=\"onChangeSearchType()\"\r\n        ></app-prime-dropdown>\r\n      </div>\r\n\r\n      <div class=\"col-md-4 col-12\">\r\n        <app-job-title-dropdown\r\n          *ngIf=\"formCtrls.searchTypeId.value == 1\"\r\n          [control]=\"formCtrls.jobTitleId\"\r\n          [filter]=\"true\"\r\n          (change)=\"onChangeSearchValue()\"\r\n        ></app-job-title-dropdown>\r\n\r\n        <app-employee-dropdown\r\n          *ngIf=\"formCtrls.searchTypeId.value == 2\"\r\n          [control]=\"formCtrls.employeeId\"\r\n          [filter]=\"true\"\r\n          (change)=\"getAllEmployeeJobTitles()\"\r\n        ></app-employee-dropdown>\r\n      </div>\r\n\r\n      <div class=\"col-md-4 col-12\" *ngIf=\"formCtrls.employeeId.value > 0\">\r\n        <app-prime-dropdown\r\n          [control]=\"formCtrls.jobTitleId\"\r\n          [filter]=\"true\"\r\n          (change)=\"onChangeSearchValue()\"\r\n          [list]=\"employeeJobTitles\"\r\n          label=\"jobTitle\"\r\n        ></app-prime-dropdown>\r\n      </div>\r\n    </div>\r\n  </form>\r\n\r\n  <div\r\n    class=\"upOneLevel-btn-container\"\r\n    [class.hidden]=\"\r\n      !(jobTitleOrgChart && jobTitleOrgChart[0]?.data.parentJobTitleID > 0)\r\n    \"\r\n  >\r\n    <button\r\n      mat-button\r\n      class=\"btn bg-light-info upOneLevel-btn\"\r\n      [style.left.px]=\"upOneLevelBtnPositions.btnLeft\"\r\n      (click)=\"upOneLevel()\"\r\n    >\r\n      <i class=\"pi pi-angle-up\"></i>\r\n      {{ \"upOneLevel\" | translate }}\r\n    </button>\r\n    <div [style.left.px]=\"upOneLevelBtnPositions.lineLeft\"></div>\r\n  </div>\r\n\r\n  <p-organizationChart [value]=\"jobTitleOrgChart\" [preserveSpace]=\"false\">\r\n    <ng-template let-node pTemplate=\"job-title\">\r\n      <div\r\n        class=\"node-header\"\r\n        [id]=\"node.data.id\"\r\n        (click)=\"openJobTitleDetailsDialog($event.target, node.data, 0)\"\r\n      >\r\n        <span [class]=\"msgTranslate('mleft-10', 'mright-10')\">\r\n          {{ node.data.code }} -\r\n          {{ msgTranslate(node.data.ar_Name, node.data.en_Name) }}\r\n        </span>\r\n\r\n        <div class=\"node-content main-data\">\r\n          <!-- job Family -->\r\n          <p>\r\n            {{\r\n              msgTranslate(\r\n                node.data.core_Job_Title_Family?.ar_Name,\r\n                node.data.core_Job_Title_Family?.en_Name\r\n              )\r\n            }}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"node-content\">\r\n        <!-- <div class=\"icon\" *ngIf=\"displayAssignEmployeeIcon(node.data)\">\r\n            <i\r\n              class=\"pi pi-user-plus info\"\r\n              (click)=\"openAssignDialog(node.data)\"\r\n            >\r\n            </i>\r\n          </div> -->\r\n\r\n        <div\r\n          class=\"employees-no-section\"\r\n          *ngIf=\"node.data.core_Person_Instance_Job_Title?.length > 0\"\r\n        >\r\n          <i\r\n            class=\"pi pi-users\"\r\n            (click)=\"openJobTitleDetailsDialog($event.target, node.data, 1)\"\r\n          >\r\n            {{ node.data.core_Person_Instance_Job_Title.length }}\r\n          </i>\r\n        </div>\r\n\r\n        <!-- <ng-container\r\n            *ngIf=\"node.data.core_Person_Instance_Job_Title?.length > 0\"\r\n          >\r\n            <div class=\"employees-names\">\r\n              <p\r\n                *ngFor=\"let emp of node.data.core_Person_Instance_Job_Title\"\r\n                (click)=\"\r\n                  openEmployeeCardDialog($event.target, emp.person_Instance_ID)\r\n                \"\r\n              >\r\n                {{\r\n                  msgTranslate(\r\n                    emp.core_Person_Instance?.core_Person?.ar_Name,\r\n                    emp.core_Person_Instance?.core_Person?.en_Name\r\n                  )\r\n                }}\r\n              </p>\r\n            </div>\r\n          </ng-container> -->\r\n\r\n        <div\r\n          class=\"fte-content\"\r\n          *ngIf=\"node.data.core_Org_Job_Title?.length > 0\"\r\n        >\r\n          <p *ngFor=\"let orgJob of node.data.core_Org_Job_Title\">\r\n            {{\r\n              msgTranslate(orgJob.core_Org?.ar_Name, orgJob.core_Org?.en_Name)\r\n            }}\r\n            ( {{ orgJob.currentEmployeeNumber ?? 0 }} /\r\n            {{\r\n              orgJob.max_Employee == 0\r\n                ? translate(\"unlimited\")\r\n                : orgJob.max_Employee\r\n            }}\r\n            FTE )\r\n          </p>\r\n        </div>\r\n\r\n        <div\r\n          class=\"node-footer info\"\r\n          (click)=\"expandNode(node)\"\r\n          *ngIf=\"node.children.length > 0\"\r\n        >\r\n          {{ node.children.length }}\r\n          {{\r\n            (node.children.length == 1 ? \"jobTitleBelow\" : \"jobTitlesBelow\")\r\n              | translate\r\n          }}\r\n        </div>\r\n      </div>\r\n    </ng-template>\r\n  </p-organizationChart>\r\n</div>\r\n","import { Component, HostListener, Inject, OnInit } from \"@angular/core\";\r\nimport { DialogPosition, MAT_DIALOG_DATA, MatDialog, MatDialogRef } from \"@angular/material/dialog\";\r\nimport { AppHelpers } from \"app/shared/resources/app-helpers\";\r\nimport { GroupByService } from \"app/shared/services/group-by.service\";\r\nimport { EmployeeCardComponent } from \"../employee-card/employee-card.component\";\r\nimport { ICompanyNodeChartData } from \"app/org-management/model/org-structure\";\r\nimport { IEmployeeModel } from \"app/personnel-setup/models/employees\";\r\nimport { MessageTypes } from \"app/shared/enums/message-types.enum\";\r\nimport { IResponse } from \"app/shared/interfaces/responces\";\r\nimport { EmployeesService } from \"app/personnel-setup/services/employees/employees.service\";\r\n\r\n@Component({\r\n\tselector: \"app-org-details-employees\",\r\n\ttemplateUrl: \"./org-details-employees.component.html\",\r\n\tstyleUrls: [\"./org-details-employees.component.scss\"],\r\n})\r\nexport class OrgDetailsEmployeesComponent extends AppHelpers implements OnInit {\r\n\tnodeData: ICompanyNodeChartData;\r\n\texpandedIndex: number = 0;\r\n\temployees: IEmployeeModel[] = [];\r\n\temployeesGroups: {\r\n\t\tkey: string;\r\n\t\tList: any[];\r\n\t}[];\r\n\temployeesGroupsFiltered: {\r\n\t\tkey: string;\r\n\t\tList: any[];\r\n\t}[];\r\n\tloaded: boolean = false;\r\n\tconstructor(\r\n\t\tprivate employeesService: EmployeesService,\r\n\t\tprivate groupByService: GroupByService,\r\n\t\t// opened ass dialog\r\n\t\tpublic dialogRef: MatDialogRef<OrgDetailsEmployeesComponent>,\r\n\t\t@Inject(MAT_DIALOG_DATA) public data: any,\r\n\t\t// to open another dialog\r\n\t\tprivate dialog: MatDialog\r\n\t) {\r\n\t\tsuper();\r\n\t\tthis.expandedIndex = data.expandedIndex;\r\n\t\tthis.nodeData = data.nodeData;\r\n\t}\r\n\r\n\tngOnInit() {\r\n\t\tif (\r\n\t\t\tthis.checkNoBusinessOrCompany() &&\r\n\t\t\tthis.nodeData.structureId > 0 &&\r\n\t\t\tthis.nodeData.org.id > 0\r\n\t\t)\r\n\t\t\tthis.getEmployeesByOrgId();\r\n\r\n\t\tconst overlays = document.querySelectorAll(\".cdk-overlay-backdrop\");\r\n\t\tif (overlays.length > 0) overlays[overlays.length - 1].classList.add(\"no-overlay\");\r\n\t}\r\n\r\n\tgetEmployeesByOrgId() {\r\n\t\tthis.employeesService\r\n\t\t\t.getAllByStructureAndOrgId(this.nodeData.structureId, this.nodeData.org.id)\r\n\t\t\t.subscribe((res: IResponse<IEmployeeModel[]>) => {\r\n\t\t\t\tif (res.message.messageType == MessageTypes.Success) {\r\n\t\t\t\t\tthis.employees = res.data;\r\n\t\t\t\t\tif (this.employees.length > 0) this.sortAndGroupEmployees();\r\n\t\t\t\t\telse this.loaded = true;\r\n\t\t\t\t} else this.errorList(res.message.messages);\r\n\t\t\t});\r\n\t}\r\n\r\n\tsortAndGroupEmployees() {\r\n\t\tthis.employeesGroups = this.groupByService\r\n\t\t\t.groupByPartOfProperty(\r\n\t\t\t\tthis.employees,\r\n\t\t\t\tthis.languageService.isArabic ? \"ar_Name\" : \"en_Name\",\r\n\t\t\t\t1\r\n\t\t\t)\r\n\t\t\t.sort((a, b) => {\r\n\t\t\t\tif (a.key < b.key) return -1;\r\n\t\t\t\tif (a.key > b.key) return 1;\r\n\t\t\t\treturn 0;\r\n\t\t\t});\r\n\t\tthis.employeesGroupsFiltered = this.employeesGroups.slice();\r\n\t\tthis.loaded = true;\r\n\t}\r\n\r\n\t// open employee card dialog\r\n\topenEmployeeCardDialog(target: HTMLElement, employeeId: number) {\r\n\t\tlet lastTarget: HTMLElement = this.getHeaderElement(target);\r\n\t\tlet targetPositions: DOMRect = lastTarget.getBoundingClientRect();\r\n\r\n\t\t// dialog position x-axis (right or left)\r\n\t\tlet dialogWidth = 350;\r\n\t\tlet dialogPositions: DialogPosition = {};\r\n\t\t// can open left\r\n\t\tif (targetPositions.left + targetPositions.width / 2 + dialogWidth <= window.innerWidth)\r\n\t\t\tdialogPositions.left = `${targetPositions.left + targetPositions.width / 2}px`;\r\n\t\t// can open right\r\n\t\telse if (targetPositions.left - dialogWidth / 2 - 10 >= 0)\r\n\t\t\tdialogPositions.left = `${targetPositions.left - dialogWidth / 2 - 10}px`;\r\n\t\t// no left and no right\r\n\t\telse dialogPositions.left = null;\r\n\r\n\t\treturn this.dialog\r\n\t\t\t.open(EmployeeCardComponent, {\r\n\t\t\t\tdata: { employeeId: employeeId },\r\n\t\t\t\tposition: dialogPositions,\r\n\t\t\t\twidth: `${dialogWidth}px`,\r\n\t\t\t\t// maxWidth: \"350px\",\r\n\t\t\t\tmaxHeight: \"80hv\",\r\n\t\t\t\tautoFocus: false,\r\n\t\t\t})\r\n\t\t\t.afterClosed()\r\n\t\t\t.subscribe((closed: boolean) => {});\r\n\t}\r\n\r\n\tgetHeaderElement(target: HTMLElement): HTMLElement {\r\n\t\treturn target.classList.contains(\"mat-expansion-panel-body\")\r\n\t\t\t? target\r\n\t\t\t: this.getHeaderElement(target.parentElement);\r\n\t}\r\n\r\n\t// search in employees\r\n\tsearchEmployees(searchName: string) {\r\n\t\tthis.employeesGroupsFiltered = this.employeesGroups\r\n\t\t\t.map((item) => ({\r\n\t\t\t\tkey: item.key,\r\n\t\t\t\tList: item.List.filter(\r\n\t\t\t\t\t(emp) =>\r\n\t\t\t\t\t\temp.en_Name.toLowerCase().includes(searchName.toLowerCase()) ||\r\n\t\t\t\t\t\temp.ar_Name.toLowerCase().includes(searchName.toLowerCase())\r\n\t\t\t\t),\r\n\t\t\t}))\r\n\t\t\t.filter((item) => item.List.length > 0);\r\n\t}\r\n\r\n\t// close dilog on resize screen\r\n\t@HostListener(\"window:resize\", [\"$event\"])\r\n\tonWindowResize(event) {\r\n\t\tthis.dialogRef.close();\r\n\t}\r\n}\r\n","<ngx-spinner></ngx-spinner>\r\n\r\n<div class=\"details-dialog-title\">\r\n\t<div class=\"mb-2\">\r\n\t\t<h6 class=\"type-name info\">\r\n\t\t\t{{ nodeData.org.code }} -\r\n\t\t\t{{ msgTranslate(nodeData.org.ar_Name, nodeData.org.en_Name) }}\r\n\t\t</h6>\r\n\r\n\t\t<button\r\n\t\t\tmat-icon-button\r\n\t\t\tclass=\"float-right mb-1\"\r\n\t\t\t[mat-dialog-close]=\"false\"\r\n\t\t\t[class.ar]=\"languageService.isArabic\"\r\n\t\t>\r\n\t\t\t<i class=\"pi pi-times\"></i>\r\n\t\t</button>\r\n\t</div>\r\n\r\n\t<p class=\"org-name\">\r\n\t\t{{\r\n\t\t\tmsgTranslate(nodeData.orgType.ar_Name, nodeData.orgType.en_Name) ??\r\n\t\t\t\ttranslate(\"orgTypeDeleted\")\r\n\t\t}}\r\n\t</p>\r\n</div>\r\n\r\n<mat-dialog-content class=\"details-dialog company\">\r\n\t<mat-accordion multi>\r\n\t\t<!-- <mat-expansion-panel [expanded]=\"expandedIndex == 0\">\r\n      <mat-expansion-panel-header>\r\n        <mat-panel-title>{{ \"details\" | translate }}</mat-panel-title>\r\n      </mat-expansion-panel-header>\r\n      <div class=\"expantion-body\">\r\n        <table>\r\n          <tbody>\r\n            <tr>\r\n              <th>{{ \"code\" | translate | titlecase }}</th>\r\n              <td>{{ nodeData.org.code }}</td>\r\n            </tr>\r\n            <tr>\r\n              <th>{{ \"name\" | translate | titlecase }}</th>\r\n              <td>\r\n                {{ msgTranslate(nodeData.org.ar_Name, nodeData.org.en_Name) }}\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </mat-expansion-panel> -->\r\n\r\n\t\t<mat-expansion-panel [expanded]=\"expandedIndex == 1\">\r\n\t\t\t<mat-expansion-panel-header>\r\n\t\t\t\t<mat-panel-title>{{ \"employees\" | translate }}</mat-panel-title>\r\n\t\t\t</mat-expansion-panel-header>\r\n\t\t\t<div class=\"expantion-body\">\r\n\t\t\t\t<ng-container *ngIf=\"employees.length > 0 && loaded\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclass=\"form-control mbottom-15\"\r\n\t\t\t\t\t\t(keyup)=\"searchEmployees($event.target.value)\"\r\n\t\t\t\t\t\tplaceholder=\"{{ 'search' | translate }}\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<ng-container *ngFor=\"let group of employeesGroupsFiltered\">\r\n\t\t\t\t\t\t<div class=\"key-emp\">{{ group.key }}</div>\r\n\t\t\t\t\t\t<div role=\"button\">\r\n\t\t\t\t\t\t\t<p\r\n\t\t\t\t\t\t\t\t*ngFor=\"let employee of group.List\"\r\n\t\t\t\t\t\t\t\t(click)=\"openEmployeeCardDialog($event.target, employee.id)\"\r\n\t\t\t\t\t\t\t\tclass=\"name-container\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<!-- [matTooltip]=\"msgTranslate(employee.ar_Name, employee.en_Name)\" -->\r\n\t\t\t\t\t\t\t\t<span class=\"img-small-icon\" [class]=\"msgTranslate('mleft-10', 'mright-10')\">\r\n\t\t\t\t\t\t\t\t\t<i class=\"pi pi-user\"></i>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<span class=\"emp-name\">\r\n\t\t\t\t\t\t\t\t\t{{ msgTranslate(employee.ar_Name, employee.en_Name) }}\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t<!-- <i\r\n                  class=\"pi pi-id-card mx-2 font-medium-3 info\"\r\n                  (click)=\"openEmployeeCardDialog($event.target, employee.id)\"\r\n                ></i> -->\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</ng-container>\r\n\t\t\t\t</ng-container>\r\n\r\n\t\t\t\t<ng-container *ngIf=\"employees.length == 0 && !loaded\">\r\n\t\t\t\t\t<app-org-details-employees-list-skeleton></app-org-details-employees-list-skeleton>\r\n\t\t\t\t</ng-container>\r\n\r\n\t\t\t\t<ng-container *ngIf=\"employees.length == 0 && loaded\">\r\n\t\t\t\t\t<p-messages severity=\"warn\" [ngClass]=\"{ 'ar-msg': languageService.isArabic }\">\r\n\t\t\t\t\t\t<ng-template pTemplate>\r\n\t\t\t\t\t\t\t<span class=\"p-message-icon pi pi-exclamation-triangle\"></span>\r\n\t\t\t\t\t\t\t<div class=\"p-message-detail\">\r\n\t\t\t\t\t\t\t\t{{ \"noEmployeeInOrg\" | translate }}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</ng-template>\r\n\t\t\t\t\t</p-messages>\r\n\t\t\t\t</ng-container>\r\n\t\t\t</div>\r\n\t\t</mat-expansion-panel>\r\n\t</mat-accordion>\r\n</mat-dialog-content>\r\n","import { Component, OnInit } from \"@angular/core\";\r\nimport { AppHelpers } from \"app/shared/resources/app-helpers\";\r\n\r\n@Component({\r\n  selector: \"app-org-structure-details\",\r\n  templateUrl: \"./org-structure-details.component.html\",\r\n  styleUrls: [\"./org-structure-details.component.scss\"],\r\n})\r\nexport class OrgStructureDetailsComponent\r\n  extends AppHelpers\r\n  implements OnInit\r\n{\r\n  orgStructureId: number = 0;\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.activatedRoute.paramMap.subscribe((params) => {\r\n      this.orgStructureId = Number(params.get(\"orgStructureId\")) ?? 0;\r\n    });\r\n  }\r\n\r\n  // override onChangeBusinessAndCompanyId(): void {}\r\n}\r\n","<ngx-spinner></ngx-spinner>\r\n\r\n<div class=\"row\">\r\n  <div class=\"col-12\">\r\n    <mat-card>\r\n      <mat-card-title>\r\n        <page-title title=\"orgStructureDetails\"> </page-title>\r\n\r\n        <!-- back btn -->\r\n        <app-back-btn\r\n          url=\"/org-management/{{ moduleId }}/org-structure/index\"\r\n          [params]=\"pageParams\"\r\n        ></app-back-btn>\r\n      </mat-card-title>\r\n\r\n      <!-- chart -->\r\n      <app-org-structure-hierarchy-details\r\n        *ngIf=\"orgStructureId > 0\"\r\n        [orgStructureId]=\"orgStructureId\"\r\n        [canNotEdit]=\"true\"\r\n      ></app-org-structure-hierarchy-details>\r\n    </mat-card>\r\n  </div>\r\n</div>\r\n","import { Component, HostListener, Input, OnInit, SimpleChanges } from \"@angular/core\";\r\nimport { DialogPosition, MatDialog } from \"@angular/material/dialog\";\r\nimport {\r\n\tICompanyNodeChartData,\r\n\tIOrgStructureModel,\r\n\tIOrgStructureNodeDeleteParams,\r\n\tIOrgStructureNodeModel,\r\n} from \"app/org-management/model/org-structure\";\r\nimport { OrgStructureService } from \"app/org-management/services/org-structure.service\";\r\nimport { MessageTypes } from \"app/shared/enums/message-types.enum\";\r\nimport { IResponse } from \"app/shared/interfaces/responces\";\r\nimport { AppHelpers } from \"app/shared/resources/app-helpers\";\r\nimport { TreeNode } from \"primeng/api\";\r\nimport { AddOrgStructureNodeComponent } from \"../add-org-structure-node/add-org-structure-node.component\";\r\nimport { FormGroup } from \"@angular/forms\";\r\nimport { OrgDetailsEmployeesComponent } from \"../org-details-employees/org-details-employees.component\";\r\nimport { IOrganizationModel } from \"app/org-management-setup/models/organizations\";\r\nimport { OrganizationsService } from \"app/org-management-setup/services/organizations.service\";\r\nimport { HelpersFunctions } from \"app/shared/resources/helpers-functions\";\r\n\r\n@Component({\r\n\tselector: \"app-org-structure-hierarchy-details\",\r\n\ttemplateUrl: \"./org-structure-hierarchy-details.component.html\",\r\n\tstyleUrls: [\"./org-structure-hierarchy-details.component.scss\"],\r\n})\r\nexport class OrgStructureHierarchyDetailsComponent extends AppHelpers implements OnInit {\r\n\t@Input() orgStructureId: number;\r\n\t@Input() canNotEdit: boolean;\r\n\r\n\t// all structure hierarchy\r\n\torgStructureDetails: TreeNode<ICompanyNodeChartData>[];\r\n\t// selected part of structure hierarchy to show\r\n\torgStructureDetailsFiltered: TreeNode<ICompanyNodeChartData>[] = [];\r\n\t// organization dropdown\r\n\torganizationList: IOrganizationModel[] = [];\r\n\r\n\tform: FormGroup;\r\n\r\n\tconstructor(\r\n\t\tprivate orgStructureService: OrgStructureService,\r\n\t\tprivate organizationsService: OrganizationsService,\r\n\t\tprivate dialog: MatDialog\r\n\t) {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tngOnInit(): void {\r\n\t\tthis.form = this.fb.group({\r\n\t\t\torganizationTypeId: [null],\r\n\t\t\torganization_ID: [\r\n\t\t\t\t{\r\n\t\t\t\t\tvalue: null,\r\n\t\t\t\t\tdisabled: true,\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t});\r\n\r\n\t\t// if (this.orgStructureId > 0 && this.CheckNoBusinessOrCompany()) {\r\n\t\t//   this.getStructureDetails();\r\n\t\t// }\r\n\r\n\t\tthis.formCtrls.organization_ID.valueChanges.subscribe((orgId) => {\r\n\t\t\t// if orgId == 0 > don't change any thing\r\n\t\t\tif (orgId == null || orgId > 0) this.onChangeOrg(orgId);\r\n\t\t});\r\n\t}\r\n\r\n\tfirstOnChange: boolean = true;\r\n\tngOnChanges(changes: SimpleChanges): void {\r\n\t\t// console.log(changes);\r\n\t\tif (changes.orgStructureId)\r\n\t\t\tthis.firstOnChange ? (this.firstOnChange = false) : this.onChangeBusinessAndCompanyId();\r\n\t}\r\n\r\n\toverride onChangeBusinessAndCompanyId(): void {\r\n\t\tif (this.orgStructureId > 0 && this.checkNoBusinessOrCompany()) {\r\n\t\t\tthis.getStructureDetails();\r\n\t\t}\r\n\t}\r\n\r\n\tget formCtrls() {\r\n\t\treturn this.form.controls;\r\n\t}\r\n\r\n\tgetStructureDetails() {\r\n\t\tthis.showLoading();\r\n\t\tthis.orgStructureService\r\n\t\t\t.getByIdWithHierarchy(this.orgStructureId)\r\n\t\t\t.subscribe((res: IResponse<IOrgStructureModel[]>) => {\r\n\t\t\t\tif (res.message.messageType == MessageTypes.Success) {\r\n\t\t\t\t\tthis.mapDataForChart(res.data[0]);\r\n\t\t\t\t} else this.errorList(res.message.messages);\r\n\t\t\t\tthis.hideLoading();\r\n\t\t\t});\r\n\t}\r\n\r\n\t// to make sure that all parent nodes come before their children\r\n\tsortDataBeforeMap(\r\n\t\tcore_Org_Structure_Org: IOrgStructureNodeModel[],\r\n\t\tsortedOrgNodes: IOrgStructureNodeModel[],\r\n\t\tselectedIds: number[]\r\n\t) {\r\n\t\tcore_Org_Structure_Org.forEach((item) => {\r\n\t\t\tif (\r\n\t\t\t\t(item.parenT_ID == null || selectedIds.includes(item.parenT_ID)) &&\r\n\t\t\t\t!selectedIds.includes(item.orG_ID)\r\n\t\t\t) {\r\n\t\t\t\tsortedOrgNodes.push(item);\r\n\t\t\t\tselectedIds.push(item.orG_ID);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t// maping data for chart\r\n\tmapDataForChart(StructureHierarchy: IOrgStructureModel) {\r\n\t\t// sort nodes\r\n\t\tlet selectedIds: number[] = [];\r\n\t\tlet sortedOrgNodes: IOrgStructureNodeModel[] = [];\r\n\t\twhile (sortedOrgNodes.length < StructureHierarchy.core_Org_Structure_Org.length) {\r\n\t\t\tthis.sortDataBeforeMap(\r\n\t\t\t\tStructureHierarchy.core_Org_Structure_Org,\r\n\t\t\t\tsortedOrgNodes,\r\n\t\t\t\tselectedIds\r\n\t\t\t);\r\n\t\t}\r\n\t\t// console.log(selectedOrgNodes, selectedIds);\r\n\r\n\t\tthis.orgStructureDetails = [\r\n\t\t\t{\r\n\t\t\t\tlabel: this.translate(\"structure\"),\r\n\t\t\t\ttype: \"org\",\r\n\t\t\t\tstyleClass: \"structure-node\",\r\n\t\t\t\texpanded: true,\r\n\t\t\t\texpandedIcon: \"pi pi-folder-open\",\r\n\t\t\t\tcollapsedIcon: \"pi pi-folder\",\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tparentId: null,\r\n\t\t\t\t\torg: null,\r\n\t\t\t\t\torgType: null,\r\n\t\t\t\t\tnumEmp: 0,\r\n\t\t\t\t\tstructure: {\r\n\t\t\t\t\t\tid: null,\r\n\t\t\t\t\t\tar_Name: StructureHierarchy.ar_Name,\r\n\t\t\t\t\t\ten_Name: StructureHierarchy.en_Name,\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t\tchildren: [],\r\n\t\t\t},\r\n\t\t];\r\n\r\n\t\t// maping data\r\n\t\tsortedOrgNodes.map((item) => {\r\n\t\t\tlet mapedItem: TreeNode<ICompanyNodeChartData> = {\r\n\t\t\t\tlabel: `${item.core_Org?.code} - ${this.msgTranslate(\r\n\t\t\t\t\titem.core_Org?.ar_Name,\r\n\t\t\t\t\titem.core_Org?.en_Name\r\n\t\t\t\t)}`,\r\n\t\t\t\ttype: \"org\",\r\n\t\t\t\tstyleClass: \"org-node\",\r\n\t\t\t\texpanded: true,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tparentId: item.parenT_ID,\r\n\t\t\t\t\torg: item.core_Org,\r\n\t\t\t\t\torgType: {\r\n\t\t\t\t\t\tid: item.core_Org_TYPE?.id,\r\n\t\t\t\t\t\tar_Name: item.core_Org_TYPE?.ar_Name,\r\n\t\t\t\t\t\ten_Name: item.core_Org_TYPE?.en_Name,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tstructure: null,\r\n\t\t\t\t\tstructureId: this.orgStructureId,\r\n\t\t\t\t\tnumEmp: item.numEmp,\r\n\t\t\t\t},\r\n\t\t\t\tchildren: [],\r\n\t\t\t};\r\n\t\t\t// root nodes (company)\r\n\t\t\tif (!item.parenT_ID) {\r\n\t\t\t\tthis.orgStructureDetails[0].children.push(mapedItem);\r\n\t\t\t}\r\n\t\t\t// other nodes\r\n\t\t\telse this.mapChildrenData(mapedItem, this.orgStructureDetails[0].children);\r\n\t\t});\r\n\r\n\t\tthis.orgStructureDetailsFiltered = this.orgStructureDetails.slice();\r\n\t\t// console.log(this.orgStructureDetails);\r\n\t}\r\n\r\n\tmapChildrenData(\r\n\t\tmapedItem: TreeNode<ICompanyNodeChartData>,\r\n\t\tchatDataParentArray: TreeNode<ICompanyNodeChartData>[]\r\n\t) {\r\n\t\tchatDataParentArray.map((lastItem) => {\r\n\t\t\tif (lastItem.data.org.id == mapedItem.data.parentId) {\r\n\t\t\t\tlastItem.children.push(mapedItem);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t});\r\n\t\t// if not found search in children\r\n\t\tchatDataParentArray.map((childItem) => {\r\n\t\t\tthis.mapChildrenData(mapedItem, childItem.children);\r\n\t\t});\r\n\t}\r\n\r\n\t// on select organization to start show from it\r\n\tonChangeOrg(orgId: number) {\r\n\t\tthis.orgStructureDetailsFiltered = [];\r\n\t\tif (orgId > 0) this.getChartDataByOrg(orgId, this.orgStructureDetails[0]);\r\n\t\telse this.orgStructureDetailsFiltered = this.orgStructureDetails;\r\n\t}\r\n\r\n\tgetChartDataByOrg(orgId: number, item: TreeNode<ICompanyNodeChartData>) {\r\n\t\titem.children.map((item) => {\r\n\t\t\tif (item.data.org.id == orgId) {\r\n\t\t\t\tthis.orgStructureDetailsFiltered = [item];\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.setPositionBtnUpOneLevel();\r\n\t\t\t\t\tthis.setPositionUpOneLevelLine();\r\n\t\t\t\t}, 50);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t});\r\n\t\titem.children.map((childItem) => this.getChartDataByOrg(orgId, childItem));\r\n\t}\r\n\r\n\t// up one level in chart\r\n\tupOneLevel() {\r\n\t\tthis.formCtrls.organization_ID.setValue(0);\r\n\t\tlet parentOrgId = this.orgStructureDetailsFiltered[0].data.parentId;\r\n\t\tif (parentOrgId) this.getChartDataByOrg(parentOrgId, this.orgStructureDetails[0]);\r\n\t\t// if up from one company node to get all companies\r\n\t\telse this.orgStructureDetailsFiltered = this.orgStructureDetails;\r\n\t}\r\n\r\n\tupOneLevelBtnPositions = {\r\n\t\tbtnLeft: 0,\r\n\t\tlineLeft: 0,\r\n\t};\r\n\tsetPositionBtnUpOneLevel() {\r\n\t\tlet btnWidth = document.querySelector(\".upOneLevel-btn\").getBoundingClientRect().width;\r\n\t\tlet firstNodePositions = document\r\n\t\t\t.querySelector(\".p-organizationchart-node-content\")\r\n\t\t\t?.getBoundingClientRect();\r\n\t\tlet firstNodeContainerPositions = document\r\n\t\t\t.querySelector(\".p-organizationchart\")\r\n\t\t\t?.getBoundingClientRect();\r\n\r\n\t\tthis.upOneLevelBtnPositions.btnLeft =\r\n\t\t\tfirstNodePositions?.left -\r\n\t\t\t\tfirstNodeContainerPositions?.left +\r\n\t\t\t\tfirstNodePositions?.width / 2 -\r\n\t\t\t\tbtnWidth / 2 ?? 0;\r\n\t}\r\n\tsetPositionUpOneLevelLine() {\r\n\t\tlet firstNodePositions = document\r\n\t\t\t.querySelector(\".p-organizationchart-node-content\")\r\n\t\t\t?.getBoundingClientRect();\r\n\t\tlet firstNodeContainerPositions = document\r\n\t\t\t.querySelector(\".p-organizationchart\")\r\n\t\t\t?.getBoundingClientRect();\r\n\r\n\t\tthis.upOneLevelBtnPositions.lineLeft =\r\n\t\t\tfirstNodePositions?.left -\r\n\t\t\t\tfirstNodeContainerPositions?.left +\r\n\t\t\t\tfirstNodePositions?.width / 2 ?? 0;\r\n\t}\r\n\r\n\t// delete node\r\n\tonDelete(node: TreeNode<ICompanyNodeChartData>): void {\r\n\t\tlet msg = this.msgTranslate(node.data.org.ar_Name, node.data.org.en_Name);\r\n\t\tthis.deleateDialog(msg).subscribe((confirm) => {\r\n\t\t\tif (confirm) this.deleteNode(node);\r\n\t\t});\r\n\t}\r\n\r\n\tdeleteNode(node: TreeNode<ICompanyNodeChartData>) {\r\n\t\tlet params: IOrgStructureNodeDeleteParams = {\r\n\t\t\tStructureID: this.orgStructureId,\r\n\t\t\tOrgID: node.data.org.id,\r\n\t\t};\r\n\t\tthis.showLoading();\r\n\t\tthis.orgStructureService.DeleteNode(params).subscribe((res: IResponse) => {\r\n\t\t\tif (res.message.messageType == MessageTypes.Success) {\r\n\t\t\t\tthis.deleteSuccessfullyMsg(res?.message?.messageTypeName);\r\n\t\t\t\tthis.getStructureDetails();\r\n\t\t\t\t// update exist organization dropdown after delete organization\r\n\t\t\t\tthis.getAllOrganizationsByOrgType();\r\n\t\t\t} else this.errorList(res.message.messages);\r\n\t\t\tthis.hideLoading();\r\n\t\t});\r\n\t}\r\n\r\n\t// add, edit node dialog\r\n\topenAddEditDialog(node: TreeNode<ICompanyNodeChartData> /* , isAdd: boolean */) {\r\n\t\treturn this.dialog\r\n\t\t\t.open(AddOrgStructureNodeComponent, {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\torg_Structure_ID: this.orgStructureId,\r\n\t\t\t\t\tparenT_ID: node.data.org?.id ?? null,\r\n\t\t\t\t\t// parenT_ID: isAdd ? node.data.org?.id ?? null : node.data.parentId,\r\n\t\t\t\t\t// orG_TYPE_ID: isAdd ? 0 : node.data.orgType.id,\r\n\t\t\t\t\t// orG_ID: isAdd ? 0 : node.data.org.id,\r\n\t\t\t\t\t// currentOrganization: isAdd ? null : node.data.org,\r\n\t\t\t\t},\r\n\t\t\t\tminWidth: \"50vw\",\r\n\t\t\t\tautoFocus: false,\r\n\t\t\t})\r\n\t\t\t.afterClosed()\r\n\t\t\t.subscribe((updated: boolean) => {\r\n\t\t\t\tif (updated) {\r\n\t\t\t\t\tthis.getStructureDetails();\r\n\t\t\t\t\t// update exist organization dropdown after add organization\r\n\t\t\t\t\tthis.getAllOrganizationsByOrgType();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}\r\n\r\n\t// node details dialog\r\n\topenOrgDetailsDialog(\r\n\t\ttarget: HTMLElement,\r\n\t\tnodeData: ICompanyNodeChartData,\r\n\t\texpandedIndex: number\r\n\t) {\r\n\t\tlet targetNode: HTMLElement = this.getHeaderElement(target);\r\n\t\tlet targetPositions: DOMRect = targetNode.getBoundingClientRect();\r\n\r\n\t\tlet dialogWidth = 350;\r\n\t\tlet dialogPositions: DialogPosition = {};\r\n\t\t// can open left\r\n\t\tif (targetPositions.left + targetPositions.width + 10 + dialogWidth <= window.innerWidth)\r\n\t\t\tdialogPositions.left = `${targetPositions.left + targetPositions.width + 10}px`;\r\n\t\t// can open right\r\n\t\telse if (targetPositions.left - dialogWidth - 10 >= 0)\r\n\t\t\tdialogPositions.left = `${targetPositions.left - dialogWidth - 10}px`;\r\n\t\t// no left and no right\r\n\t\telse dialogPositions.left = null;\r\n\r\n\t\treturn this.dialog\r\n\t\t\t.open(OrgDetailsEmployeesComponent, {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\torg_Structure_ID: this.orgStructureId,\r\n\t\t\t\t\tnodeData: nodeData,\r\n\t\t\t\t\t// 0 > details // 1 >> employees\r\n\t\t\t\t\texpandedIndex: expandedIndex,\r\n\t\t\t\t},\r\n\t\t\t\tposition: dialogPositions,\r\n\t\t\t\twidth: `${dialogWidth}px`,\r\n\t\t\t\t// maxWidth: \"350px\",\r\n\t\t\t\tmaxHeight: \"90hv\",\r\n\t\t\t\t// disableClose: true,\r\n\t\t\t\tautoFocus: false,\r\n\t\t\t})\r\n\t\t\t.afterClosed()\r\n\t\t\t.subscribe((closed: boolean) => {});\r\n\t}\r\n\r\n\tgetHeaderElement(target: HTMLElement): HTMLElement {\r\n\t\treturn target.classList.contains(\"p-organizationchart-node-content\")\r\n\t\t\t? target\r\n\t\t\t: this.getHeaderElement(target.parentElement);\r\n\t}\r\n\r\n\t// expand node\r\n\texpandNode(node: TreeNode) {\r\n\t\tnode.expanded = !node.expanded;\r\n\t}\r\n\r\n\t// organization list\r\n\tgetAllOrganizationsByOrgType() {\r\n\t\tlet orgTypeId: number = this.formCtrls.organizationTypeId.value;\r\n\t\tthis.formCtrls.organization_ID.setValue(null);\r\n\t\tif (orgTypeId > 0) {\r\n\t\t\tthis.showLoading();\r\n\t\t\tthis.organizationsService\r\n\t\t\t\t.GetAllByOrgTypeAndStructure(orgTypeId, this.orgStructureId)\r\n\t\t\t\t.subscribe((res) => {\r\n\t\t\t\t\tif ((res.message.messageType = MessageTypes.Success)) {\r\n\t\t\t\t\t\tthis.organizationList = res.data;\r\n\t\t\t\t\t} else this.errorList(res.message.messages);\r\n\t\t\t\t\tthis.hideLoading();\r\n\t\t\t\t});\r\n\t\t\tthis.formCtrls.organization_ID.enable();\r\n\t\t} else this.formCtrls.organization_ID.disable();\r\n\t}\r\n\r\n\t// change up one level btn & line positions\r\n\t@HostListener(\"window:resize\", [\"$event\"])\r\n\tonWindowResize(event) {\r\n\t\t// this.dialog.closeAll();\r\n\t\tthis.setPositionBtnUpOneLevel();\r\n\t\tthis.setPositionUpOneLevelLine();\r\n\t}\r\n}\r\n","<p-toast></p-toast>\r\n\r\n<ngx-spinner></ngx-spinner>\r\n\r\n<mat-tab-group class=\"col-12 w-100\" *ngIf=\"orgStructureId > 0\">\r\n  <mat-tab label=\"{{ 'companyOrgStructure' | translate | titlecase }}\">\r\n    <div\r\n      class=\"organizationchart-container company-chart\"\r\n      [class.ar]=\"languageService.isArabic\"\r\n    >\r\n      <form [formGroup]=\"form\">\r\n        <div class=\"row mx-0\">\r\n          <div class=\"col-md-4 col-12\">\r\n            <app-org-types-dropdown\r\n              [control]=\"formCtrls.organizationTypeId\"\r\n              (change)=\"getAllOrganizationsByOrgType()\"\r\n              [filter]=\"true\"\r\n            ></app-org-types-dropdown>\r\n          </div>\r\n\r\n          <div class=\"col-md-4 col-12\">\r\n            <app-prime-dropdown\r\n              [control]=\"formCtrls.organization_ID\"\r\n              label=\"organization\"\r\n              [List]=\"organizationList\"\r\n            >\r\n            </app-prime-dropdown>\r\n          </div>\r\n        </div>\r\n      </form>\r\n\r\n      <div\r\n        class=\"upOneLevel-btn-container\"\r\n        [class.hidden]=\"\r\n          orgStructureDetailsFiltered &&\r\n          !orgStructureDetailsFiltered[0]?.data.org\r\n        \"\r\n      >\r\n        <button\r\n          mat-button\r\n          class=\"btn bg-light-info upOneLevel-btn\"\r\n          [style.left.px]=\"upOneLevelBtnPositions.btnLeft\"\r\n          (click)=\"upOneLevel()\"\r\n        >\r\n          <i class=\"pi pi-angle-up\"></i>\r\n          {{ \"upOneLevel\" | translate }}\r\n        </button>\r\n        <div [style.left.px]=\"upOneLevelBtnPositions.lineLeft\"></div>\r\n      </div>\r\n\r\n      <p-organizationChart\r\n        [value]=\"orgStructureDetailsFiltered\"\r\n        styleClass=\"company\"\r\n        [preserveSpace]=\"false\"\r\n      >\r\n        <ng-template let-node pTemplate=\"org\">\r\n          <!-- (click)=\"\r\n              node.data.org\r\n                ? openOrgDetailsDialog($event.target, node.data, 0)\r\n                : null\r\n            \" -->\r\n          <div class=\"node-header\" [id]=\"node.data.org?.id ?? null\">\r\n            <span [class]=\"msgTranslate('mleft-50', 'mright-50')\">\r\n              {{ node.label }}\r\n            </span>\r\n\r\n            <!-- icons -->\r\n            <div class=\"action-icons\">\r\n              <i\r\n                mat-icon-button\r\n                class=\"pi pi-trash danger\"\r\n                (click)=\"onDelete(node)\"\r\n                *ngIf=\"node.data.org\"\r\n                matTooltip=\"{{ 'General.delete' | translate }}\"\r\n              ></i>\r\n\r\n              <i\r\n                mat-icon-button\r\n                class=\"pi pi-plus info\"\r\n                (click)=\"openAddEditDialog(node)\"\r\n                matTooltip=\"{{ 'General.add' | translate }}\"\r\n              ></i>\r\n            </div>\r\n\r\n            <!-- <div class=\"d-inline-block float-right\" *ngIf=\"!canNotEdit\">\r\n              <i\r\n                mat-icon-button\r\n                [matMenuTriggerFor]=\"menuRow\"\r\n                class=\"pi pi-cog\"\r\n                (click)=\"$event.stopPropagation()\"\r\n              ></i>\r\n\r\n              <mat-menu #menuRow=\"matMenu\">\r\n                <a mat-menu-item class=\"info\" (click)=\"openAddEditDialog(node)\">\r\n                  <span>\r\n                    <i class=\"pi pi-plus mr-2\"> </i>\r\n                    {{ \"General.add\" | translate }}\r\n                  </span>\r\n                </a>\r\n\r\n                <a\r\n                  mat-menu-item\r\n                  class=\"info\"\r\n                  (click)=\"openAddEditDialog(node, false)\"\r\n                  *ngIf=\"node.data.org\"\r\n                >\r\n                  <span>\r\n                    <i class=\"pi pi-pencil mr-2\"> </i>\r\n                    {{ \"General.edit\" | translate }}\r\n                  </span>\r\n                </a>\r\n\r\n                <a\r\n                  mat-menu-item\r\n                  class=\"info\"\r\n                  (click)=\"onDelete(node)\"\r\n                  *ngIf=\"node.data.org\"\r\n                >\r\n                  <span>\r\n                    <i class=\"pi pi-trash mr-2\"></i>\r\n                    {{ \"General.delete\" | translate }}\r\n                  </span>\r\n                </a>\r\n              </mat-menu>\r\n            </div> -->\r\n\r\n            <!-- normal node for any organization -->\r\n            <div class=\"node-content main-data\" *ngIf=\"node.data.org\">\r\n              <!-- <p>{{ node.data.org.code }}</p> -->\r\n              <p>\r\n                {{\r\n                  this.msgTranslate(\r\n                    node.data.orgType?.ar_Name,\r\n                    node.data.orgType?.en_Name\r\n                  ) ?? this.translate(\"orgTypeDeleted\")\r\n                }}\r\n              </p>\r\n            </div>\r\n\r\n            <!-- first node of structure -->\r\n            <div class=\"node-content main-data\" *ngIf=\"node.data.structure\">\r\n              <p>\r\n                {{\r\n                  msgTranslate(\r\n                    node.data.structure.ar_Name,\r\n                    node.data.structure.en_Name\r\n                  )\r\n                }}\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"node-content\">\r\n            <div class=\"employees-no-section\" *ngIf=\"node.data.numEmp > 0\">\r\n              <i\r\n                class=\"pi pi-users\"\r\n                (click)=\"openOrgDetailsDialog($event.target, node.data, 1)\"\r\n              >\r\n                {{ node.data.numEmp }}\r\n              </i>\r\n            </div>\r\n\r\n            <div\r\n              class=\"node-footer\"\r\n              (click)=\"expandNode(node)\"\r\n              *ngIf=\"node.children.length > 0\"\r\n            >\r\n              {{ node.children.length }}\r\n            </div>\r\n          </div>\r\n        </ng-template>\r\n      </p-organizationChart>\r\n    </div>\r\n  </mat-tab>\r\n\r\n  <mat-tab label=\"{{ 'jobtitleChart' | translate | titlecase }}\">\r\n    <app-job-title-org-chart></app-job-title-org-chart>\r\n  </mat-tab>\r\n\r\n  <mat-tab label=\"{{ 'resources' | translate | titlecase }}\">\r\n    <app-resources-chart></app-resources-chart>\r\n  </mat-tab>\r\n</mat-tab-group>\r\n","import { Component, Injector, OnInit } from \"@angular/core\";\r\nimport { MatTableDataSource } from \"@angular/material/table\";\r\nimport { IOrgStructureModel } from \"app/org-management/model/org-structure\";\r\nimport { OrgStructureService } from \"app/org-management/services/org-structure.service\";\r\nimport { MessageTypes } from \"app/shared/enums/message-types.enum\";\r\nimport { IPageParams } from \"app/shared/interfaces/params\";\r\nimport { IResponse, IResponseList } from \"app/shared/interfaces/responces\";\r\nimport { AppHelpers } from \"app/shared/resources/app-helpers\";\r\nimport { HelpersFunctions } from \"app/shared/resources/helpers-functions\";\r\n\r\n@Component({\r\n\tselector: \"app-org-structure-index\",\r\n\ttemplateUrl: \"./org-structure-index.component.html\",\r\n\tstyleUrls: [\"./org-structure-index.component.scss\"],\r\n})\r\nexport class OrgStructureIndexComponent extends AppHelpers implements OnInit {\r\n\tmandatoryColomns: string[] = [\r\n\t\t\"Ser\",\r\n\t\t\"id\",\r\n\t\t\"en_Name\",\r\n\t\t\"ar_Name\",\r\n\t\t\"froM_DATE\",\r\n\t\t\"tO_DATE\",\r\n\t\t\"actions\",\r\n\t];\r\n\tisLoaded: boolean = false;\r\n\toptionalColomns: string[] = [];\r\n\r\n\tdataSource: MatTableDataSource<IOrgStructureModel>;\r\n\r\n\tconstructor(private orgStructureService: OrgStructureService) {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tngOnInit(): void {\r\n\t\t// if (this.CheckNoBusinessOrCompany()) this.getList(this.currentPage);\r\n\t}\r\n\r\n\toverride onChangeBusinessAndCompanyId(): void {\r\n\t\tif (this.dataSource?.data?.length > 0) this.dataSource = new MatTableDataSource(null);\r\n\t\tif (this.checkNoBusinessOrCompany())\r\n\t\t\tthis.getList(this.pageFromUrl > 0 ? this.pageFromUrl : this.firstPage);\r\n\t}\r\n\r\n\tgetList(page: number, pageSize?: number) {\r\n\t\tthis.removePageParams();\r\n\t\tthis.page.pageIndex = page;\r\n\t\tif (pageSize) this.page.pageSize = pageSize;\r\n\t\tlet params: IPageParams = {\r\n\t\t\tPageNumber: page,\r\n\t\t\tpageSize: this.page.pageSize,\r\n\t\t};\r\n\t\tthis.orgStructureService\r\n\t\t\t.getList(params)\r\n\t\t\t.subscribe((res: IResponseList<IOrgStructureModel[]>) => {\r\n\t\t\t\tif (res.message.messageType == MessageTypes.Success) {\r\n\t\t\t\t\tif (res.data.length == 0 && page > 1) {\r\n\t\t\t\t\t\tthis.getList(this.prevPage);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tres.data.map((item) => {\r\n\t\t\t\t\t\titem.froM_DATE = HelpersFunctions.mapDate(item.froM_DATE);\r\n\t\t\t\t\t\titem.tO_DATE = HelpersFunctions.mapDate(item.tO_DATE);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.dataSource = new MatTableDataSource(res.data);\r\n\t\t\t\t\tthis.isLoaded = true;\r\n\t\t\t\t\tthis.page.length = res.meta.totalItemCount;\r\n\t\t\t\t} else this.errorList(res.message.messages);\r\n\t\t\t});\r\n\t}\r\n\r\n\tonDelete(orgStructure: IOrgStructureModel): void {\r\n\t\tlet msg = this.msgTranslate(orgStructure.ar_Name, orgStructure.en_Name);\r\n\t\tthis.deleateDialog(msg).subscribe((confirm) => {\r\n\t\t\tif (confirm) this.delete(orgStructure);\r\n\t\t});\r\n\t}\r\n\r\n\tdelete(orgStructure: IOrgStructureModel) {\r\n\t\tthis.showLoading();\r\n\t\tthis.orgStructureService.Delete(orgStructure.id).subscribe((res: IResponse) => {\r\n\t\t\tif (res.message.messageType == MessageTypes.Success) {\r\n\t\t\t\tthis.deleteSuccessfullyMsg(res?.message?.messageTypeName);\r\n\t\t\t\tif (this.dataSource.data.length == 1 && this.currentPage > 1) {\r\n\t\t\t\t\t// if last item in list: get previous page\r\n\t\t\t\t\tthis.getList(this.prevPage, this.page.pageSize);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// if not last item in list: get current page\r\n\t\t\t\t\tthis.getList(this.currentPage, this.page.pageSize);\r\n\t\t\t\t}\r\n\t\t\t} else this.errorList(res.message.messages);\r\n\t\t\tthis.hideLoading();\r\n\t\t});\r\n\t}\r\n}\r\n","<ngx-spinner></ngx-spinner>\r\n\r\n<div class=\"row\">\r\n\t<div class=\"col-12\">\r\n\t\t<mat-card>\r\n\t\t\t<mat-card-title>\r\n\t\t\t\t<page-title title=\"orgStructure\" [globalFunctions]=\"globalFunctions\"> </page-title>\r\n\t\t\t</mat-card-title>\r\n\r\n\t\t\t<mat-divider></mat-divider>\r\n\r\n\t\t\t<app-material-table\r\n\t\t\t\t\t[isLoaded]=\"isLoaded\"\r\n\t\t\t\t[dataSource]=\"dataSource\"\r\n\t\t\t\t[mandatoryColomns]=\"mandatoryColomns\"\r\n\t\t\t\t[optionalColomns]=\"optionalColomns\"\r\n\t\t\t\t[page]=\"page\"\r\n\t\t\t\t(onChangePage)=\"getList($event.pageIndex + 1, $event.pageSize)\"\r\n\t\t\t\t[actions]=\"rowFunctions\"\r\n\t\t\t\t(deleteRow)=\"onDelete($event)\"\r\n\t\t\t>\r\n\t\t\t</app-material-table>\r\n\t\t</mat-card>\r\n\t</div>\r\n</div>\r\n","import { Component, HostListener, OnInit } from \"@angular/core\";\r\nimport { DialogPosition, MatDialog } from \"@angular/material/dialog\";\r\nimport { AppHelpers } from \"app/shared/resources/app-helpers\";\r\nimport { TreeNode } from \"primeng/api\";\r\nimport { FormGroup } from \"@angular/forms\";\r\nimport { IResponse } from \"app/shared/interfaces/responces\";\r\nimport { MessageTypes } from \"app/shared/enums/message-types.enum\";\r\nimport { ResourcesChartService } from \"app/org-management/services/resources-chart.service\";\r\nimport { IEmployeeCardModel } from \"app/personnel-setup/models/employees\";\r\nimport { EmployeeCardComponent } from \"../employee-card/employee-card.component\";\r\n\r\n@Component({\r\n  selector: \"app-resources-chart\",\r\n  templateUrl: \"./resources-chart.component.html\",\r\n  styleUrls: [\"./resources-chart.component.scss\"],\r\n})\r\nexport class ResourcesChartComponent extends AppHelpers implements OnInit {\r\n  resourcesChart: TreeNode<IEmployeeCardModel>[];\r\n\r\n  form: FormGroup;\r\n\r\n  constructor(\r\n    private resourcesChartService: ResourcesChartService,\r\n    private dialog: MatDialog\r\n  ) {\r\n    super();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.form = this.fb.group({\r\n      employeeId: [null],\r\n    });\r\n  }\r\n\r\n  override onChangeBusinessAndCompanyId(): void {\r\n    if (this.checkNoBusinessOrCompany())\r\n      this.getResourcesChart(this.formCtrls.employeeId.value);\r\n  }\r\n\r\n  get formCtrls() {\r\n    return this.form.controls;\r\n  }\r\n\r\n  getResourcesChart(employeeId: number) {\r\n    // console.log(this.form.value);\r\n    if (employeeId > 0) {\r\n      this.showLoading();\r\n      this.resourcesChartService\r\n        .getEmployeesChart(employeeId)\r\n        .subscribe((res: IResponse<IEmployeeCardModel[]>) => {\r\n          if (res.message.messageType == MessageTypes.Success) {\r\n            this.mapDataForChart(res.data);\r\n            setTimeout(() => {\r\n              this.setPositionBtnUpOneLevel();\r\n              this.setPositionUpOneLevelLine();\r\n            }, 100);\r\n          } else this.errorList(res.message.messages);\r\n          this.hideLoading();\r\n        });\r\n    }\r\n  }\r\n\r\n  // maping data for chart\r\n  mapDataForChart(employees: IEmployeeCardModel[]) {\r\n    let selectedEmpId = this.formCtrls.employeeId.value;\r\n    let firstEmployeeIndex = employees.findIndex(\r\n      (emp) => emp.id == selectedEmpId\r\n    );\r\n    if (firstEmployeeIndex >= 0) {\r\n      this.resourcesChart = [\r\n        {\r\n          label: this.msgTranslate(\r\n            employees[firstEmployeeIndex]?.ar_Name,\r\n            employees[firstEmployeeIndex]?.en_Name\r\n          ),\r\n          type: \"resources\",\r\n          styleClass: employees[firstEmployeeIndex].isSolidEmp\r\n            ? \"\"\r\n            : \"dashed-border\",\r\n          expanded: true,\r\n          expandedIcon: \"pi pi-folder-open\",\r\n          collapsedIcon: \"pi pi-folder\",\r\n          data: employees[firstEmployeeIndex],\r\n          children: [],\r\n        },\r\n      ];\r\n\r\n      // maping data\r\n      employees\r\n        .filter((emp) => emp.id != selectedEmpId)\r\n        .map((item) => {\r\n          let mapedItem: TreeNode<IEmployeeCardModel> = {\r\n            label: this.msgTranslate(item.ar_Name, item.en_Name),\r\n            type: \"resources\",\r\n            styleClass: item.isSolidEmp ? \"\" : \"dashed-border\",\r\n            expanded: true,\r\n            expandedIcon: \"pi pi-folder-open\",\r\n            collapsedIcon: \"pi pi-folder\",\r\n            data: item,\r\n            children: [],\r\n          };\r\n          // root nodes (company)\r\n          if (item.parentID == selectedEmpId) {\r\n            this.resourcesChart[0].children.push(mapedItem);\r\n          }\r\n          // other nodes\r\n          else if (item.id != selectedEmpId)\r\n            this.mapChildrenData(mapedItem, this.resourcesChart[0].children);\r\n        });\r\n    }\r\n  }\r\n\r\n  mapChildrenData(\r\n    mapedItem: TreeNode<IEmployeeCardModel>,\r\n    chatDataParentArray: TreeNode<IEmployeeCardModel>[]\r\n  ) {\r\n    chatDataParentArray.map((lastItem) => {\r\n      if (lastItem.data.id == mapedItem.data.parentID) {\r\n        lastItem.children.push(mapedItem);\r\n        return;\r\n      }\r\n    });\r\n    // if not found search in children\r\n    chatDataParentArray.map((childItem) => {\r\n      this.mapChildrenData(mapedItem, childItem.children);\r\n    });\r\n  }\r\n\r\n  // on select employee to start show from it\r\n  onChangeEmployee() {\r\n    this.getResourcesChart(this.formCtrls.employeeId.value);\r\n  }\r\n\r\n  // up one level in chart\r\n  upOneLevel() {\r\n    // get employees start from parent employee id\r\n    // after change dropdown value > call onChangeEmployee function\r\n    this.formCtrls.employeeId.setValue(this.resourcesChart[0].data.parentID);\r\n    // this.getResourcesChart(this.resourcesChart[0].data.parentID);\r\n  }\r\n\r\n  upOneLevelBtnPositions = {\r\n    btnLeft: 0,\r\n    lineLeft: 0,\r\n  };\r\n  setPositionBtnUpOneLevel() {\r\n    let btnWidth = document\r\n      .querySelector(\".upOneLevel-btn\")\r\n      .getBoundingClientRect().width;\r\n    let firstNodePositions = document\r\n      .querySelector(\".p-organizationchart-node-content\")\r\n      ?.getBoundingClientRect();\r\n    let firstNodeContainerPositions = document\r\n      .querySelector(\".p-organizationchart\")\r\n      ?.getBoundingClientRect();\r\n\r\n    this.upOneLevelBtnPositions.btnLeft =\r\n      firstNodePositions?.left -\r\n        firstNodeContainerPositions?.left +\r\n        firstNodePositions?.width / 2 -\r\n        btnWidth / 2 ?? 0;\r\n  }\r\n  setPositionUpOneLevelLine() {\r\n    let firstNodePositions = document\r\n      .querySelector(\".p-organizationchart-node-content\")\r\n      ?.getBoundingClientRect();\r\n    let firstNodeContainerPositions = document\r\n      .querySelector(\".p-organizationchart\")\r\n      ?.getBoundingClientRect();\r\n\r\n    this.upOneLevelBtnPositions.lineLeft =\r\n      firstNodePositions?.left -\r\n        firstNodeContainerPositions?.left +\r\n        firstNodePositions?.width / 2 ?? 0;\r\n  }\r\n\r\n  // node details dialog\r\n  openEmployeeDetailsDialog(target: HTMLElement, nodeData: IEmployeeCardModel) {\r\n    let targetNode: HTMLElement = this.getHeaderElement(target);\r\n    let targetPositions: DOMRect = targetNode.getBoundingClientRect();\r\n\r\n    let dialogWidth = 350;\r\n    let dialogPositions: DialogPosition = {};\r\n    // can open left\r\n    if (\r\n      targetPositions.left + targetPositions.width / 2 + dialogWidth <=\r\n      window.innerWidth\r\n    )\r\n      dialogPositions.left = `${\r\n        targetPositions.left + targetPositions.width / 2\r\n      }px`;\r\n    // can open right\r\n    else if (\r\n      targetPositions.left - dialogWidth / 2 - targetPositions.width / 2 + 10 >=\r\n      0\r\n    )\r\n      dialogPositions.left = `${\r\n        targetPositions.left - dialogWidth / 2 - targetPositions.width / 2 + 10\r\n      }px`;\r\n    // no left and no right\r\n    else dialogPositions.left = null;\r\n\r\n    return this.dialog\r\n      .open(EmployeeCardComponent, {\r\n        data: { employeeId: nodeData.id },\r\n        position: dialogPositions,\r\n        width: `${dialogWidth}px`,\r\n        // maxWidth: \"350px\",\r\n        maxHeight: \"80hv\",\r\n        // disableClose: true,\r\n        autoFocus: false,\r\n      })\r\n      .afterClosed()\r\n      .subscribe((closed: boolean) => {});\r\n  }\r\n\r\n  getHeaderElement(target: HTMLElement): HTMLElement {\r\n    return target.classList.contains(\"p-organizationchart-node-content\")\r\n      ? target\r\n      : this.getHeaderElement(target.parentElement);\r\n  }\r\n\r\n  // expand node\r\n  expandNode(node: TreeNode) {\r\n    node.expanded = !node.expanded;\r\n  }\r\n\r\n  // change up one level btn & line positions\r\n  @HostListener(\"window:resize\", [\"$event\"])\r\n  onWindowResize(event) {\r\n    // this.dialog.closeAll();\r\n    this.setPositionBtnUpOneLevel();\r\n    this.setPositionUpOneLevelLine();\r\n  }\r\n}\r\n","<div\r\n  class=\"organizationchart-container resources-chart\"\r\n  [class.ar]=\"languageService.isArabic\"\r\n>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"row mx-0\">\r\n      <div class=\"col-md-4 col-12\">\r\n        <app-employee-dropdown\r\n          [control]=\"formCtrls.employeeId\"\r\n          [filter]=\"true\"\r\n          (change)=\"onChangeEmployee()\"\r\n        ></app-employee-dropdown>\r\n      </div>\r\n    </div>\r\n  </form>\r\n\r\n  <div\r\n    class=\"upOneLevel-btn-container\"\r\n    [class.hidden]=\"!(resourcesChart && resourcesChart[0]?.data.parentID > 0)\"\r\n  >\r\n    <button\r\n      mat-button\r\n      class=\"btn bg-light-info upOneLevel-btn\"\r\n      [style.left.px]=\"upOneLevelBtnPositions.btnLeft\"\r\n      (click)=\"upOneLevel()\"\r\n    >\r\n      <i class=\"pi pi-angle-up\"></i>\r\n      {{ \"upOneLevel\" | translate }}\r\n    </button>\r\n    <div [style.left.px]=\"upOneLevelBtnPositions.lineLeft\"></div>\r\n  </div>\r\n\r\n  <p-organizationChart [value]=\"resourcesChart\" [preserveSpace]=\"false\">\r\n    <ng-template let-node pTemplate=\"resources\">\r\n      <div class=\"node-header\" [id]=\"node.data.id\">\r\n        <div class=\"node-content main-data\">\r\n          <div class=\"img-emp-chart\">\r\n            <p-image\r\n              *ngIf=\"node.data.img && node.data.img != '/'; else noImg\"\r\n              [src]=\"fileService.preview(node.data.img)\"\r\n              alt=\"{{ 'img' | translate }}\"\r\n              preview=\"true\"\r\n            >\r\n            </p-image>\r\n            <ng-template #noImg>\r\n              <div class=\"alt-img-preview\">\r\n                <i class=\"pi pi-user\"></i>\r\n              </div>\r\n            </ng-template>\r\n          </div>\r\n\r\n          <div\r\n            class=\"p-2 info-content\"\r\n            (click)=\"openEmployeeDetailsDialog($event.target, node.data)\"\r\n          >\r\n            <p class=\"info\">\r\n              <!-- employee name -->\r\n              {{\r\n                msgTranslate(node.data.ar_Name, node.data.en_Name) | titlecase\r\n              }}\r\n            </p>\r\n\r\n            <!-- <div class=\"emp-data\"> -->\r\n            <p>\r\n              {{\r\n                msgTranslate(node.data.jobTitleNameAr, node.data.jobTitleName)\r\n                  | titlecase\r\n              }}\r\n            </p>\r\n\r\n            <p>\r\n              {{ node.data.joiningDate | date : \"dd-MM-yyyy\" }}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"node-content\">\r\n        <div\r\n          class=\"node-footer\"\r\n          (click)=\"expandNode(node)\"\r\n          *ngIf=\"node.children.length > 0\"\r\n        >\r\n          {{ node.children.length }}\r\n        </div>\r\n      </div>\r\n    </ng-template>\r\n  </p-organizationChart>\r\n</div>\r\n","import { IJobFamilyModel } from \"app/org-management-setup/models/job-families\";\r\nimport { ICourseModel } from \"app/training/models/course\";\r\nimport { ICompetenceLevelDetailsModel } from \"./competence\";\r\nimport { ICompetenceTypeModel } from \"app/org-management-setup/models/competence-type\";\r\nimport { IOrganizationModel } from \"app/org-management-setup/models/organizations\";\r\nimport { IPersonInstanceModel } from \"app/personnel-setup/models/employees\";\r\n\r\nexport interface IJobProfileRequest {\r\n\tjob_title: {\r\n\t\tID?: number;\r\n\t\tcode: string;\r\n\t\tar_Name: string;\r\n\t\ten_Name: string;\r\n\t\tjob_Family_ID?: number;\r\n\t\tgrade_ID?: any;\r\n\t\tparentJobTitleID: number;\r\n\t};\r\n\textraData: {};\r\n}\r\n\r\nexport interface IJobTitleModel {\r\n\tid: number;\r\n\tcode: string;\r\n\tar_Name: string;\r\n\ten_Name: string;\r\n\tjob_Level_ID: any;\r\n\tjob_Family_ID: number;\r\n\tgrade_ID: any;\r\n\tparentJobTitleID: number;\r\n\tjob_Title_Collar_Type_ID: any;\r\n\tmanagerPercentage: number;\r\n\tinternalColleaguePercentage: number;\r\n\texternalColleaguePercentage: number;\r\n\tsubordinatePercentage: number;\r\n\tmySelfPercentage: number;\r\n\tcustomerPercentage: number;\r\n\tcore_Org_Job_Title: IAssignJobToOrgModel[];\r\n\tcore_Job_Title_Family: IJobFamilyModel;\r\n\tjobFamily: string; // from map data\r\n\t// use in job title chart\r\n\tcore_Person_Instance_Job_Title: IEmployeeJobTitleModel[];\r\n\tparentJobTitle: null;\r\n\tchiledJobTitles: IJobTitleModel[];\r\n}\r\n\r\nexport interface IEmployeeJobTitleModel {\r\n\tperson_Instance_ID: number;\r\n\tid: number;\r\n\tperson_Instance_Org_ID: number;\r\n\tjob_Title_ID: number;\r\n\tfrom_Date: string;\r\n\tto_Date: string;\r\n\tis_Manpower_Affected: boolean;\r\n\tcore_Person_Instance: IPersonInstanceModel;\r\n\tjobName: null;\r\n\tisEditMode: boolean;\r\n\tstartDateOrg: string;\r\n}\r\n\r\n//////////// description\r\nexport interface IJobDescriptionRequest {\r\n\tjob_Title_ID: number;\r\n\tjoB_PURPOSE: string;\r\n\tresponsibilitieS_DUTIES: string;\r\n\tknowledgE_SKILLS: string;\r\n\teducation: string;\r\n\texperience: string;\r\n\tworkinG_CONDITIONS: string;\r\n}\r\n\r\nexport interface IJobDescriptionModel {\r\n\tjob_Title_ID: number;\r\n\tjoB_PURPOSE: string;\r\n\tresponsibilitieS_DUTIES: string;\r\n\tknowledgE_SKILLS: string;\r\n\teducation: string;\r\n\texperience: string;\r\n\tworkinG_CONDITIONS: string;\r\n}\r\n\r\n//////////// career path\r\nexport interface IJobCareerPathRequest {\r\n\tjoB_Title_ID: number;\r\n\tjoB_Title_NEXT_ID: number;\r\n\tyeaR_NO: number;\r\n\tpmS_VALUE: number;\r\n\tiS_MANDATORY: boolean;\r\n\tresponsabilities: string;\r\n}\r\n\r\nexport interface IJobCareerPathModel {\r\n\tjoB_Title_ID: number;\r\n\tjoB_Title_NEXT_ID: number;\r\n\tyeaR_NO: number;\r\n\tpmS_VALUE: number;\r\n\tiS_MANDATORY: boolean;\r\n\tresponsabilities: string;\r\n\tcore_Job_Title: null;\r\n\tnext_Job_Title: IJobTitleModel;\r\n\tnextJobTitle: string; // from map data\r\n}\r\n\r\nexport interface IJobCareerPathDeleteRequest {\r\n\tNextJobId: number;\r\n\tJobId: number;\r\n}\r\n\r\n//////////// competences\r\nexport interface IJobCompetenceRequest {\r\n\tComptenceID: number;\r\n\tComptenceLevelID: number;\r\n\tComptence_Jobtitle: {\r\n\t\tJOB_Title_ID: number;\r\n\t\tCOMPETENCE_TYPE_ID: number;\r\n\t\tCOMPETENCE_Weight: number;\r\n\t};\r\n}\r\n\r\nexport interface IJobCompetenceModel {\r\n\tcompetencE_Detail_ID: 8;\r\n\tjoB_Title_ID: 401;\r\n\tcompetencE_TYPE_ID: 2;\r\n\tcompetencE_Weight: 40;\r\n\tcore_Competence_Detail: ICompetenceLevelDetailsModel;\r\n\tcompetence: string; // from map data\r\n\tcompetenceLevel: string; // from map data\r\n\tcore_Competence_TYPE: ICompetenceTypeModel;\r\n\tcompetenceType: string; // from map data\r\n}\r\n\r\nexport interface IJobCompetenceDeleteRequest {\r\n\tComDetailsId: number;\r\n\tJobId: number;\r\n}\r\n\r\n//////////// kpi\r\nexport interface IJobKpiRequest {\r\n\tJobId: number;\r\n\tKPI_Ids: number[];\r\n}\r\n\r\nexport interface IJobKpiModel {\r\n\tid: number;\r\n\tjobTitleId: number;\r\n\tkpI_Id: number;\r\n}\r\n\r\n//////////// custodies\r\nexport interface IJobCustodiesRequest {\r\n\tJobId: number;\r\n\tconv_Ids: number[];\r\n}\r\n\r\nexport interface IJobCustodiesModel {\r\n\tid: number;\r\n\tjobTitleId: number;\r\n\tcovenantId: number;\r\n}\r\n\r\n//////////// training path\r\nexport interface IJobTrainingPathRequest {\r\n\tjoB_Title_ID: number;\r\n\tcourse_ID: number;\r\n\tpre_Required: boolean;\r\n\tperiod: number;\r\n\tpriority_ID: number;\r\n}\r\n\r\nexport interface IJobTrainingPathModel {\r\n\tjoB_Title_ID: number;\r\n\tcourse_ID: number;\r\n\tcomptence_ID: null;\r\n\tparent_Course_ID: null;\r\n\tpre_Required: false;\r\n\tperiod: 3;\r\n\tsucceedScore: 0;\r\n\tpriority_ID: 2;\r\n\ttrA_Course: ICourseModel;\r\n\tcourse: string; // from map data\r\n\tcomm_Priority: IJobTrainingPathPriorityModel;\r\n\tpriority: string; // from map data\r\n}\r\n\r\nexport interface IJobTrainingPathPriorityModel {\r\n\tid: number;\r\n\tar_Name: string;\r\n\ten_Name: string;\r\n}\r\n\r\nexport interface IJobTrainingPathDeleteRequest {\r\n\tCourseId: number;\r\n\tJobId: number;\r\n}\r\n\r\n//////////// appraisal method\r\nexport interface IJobAppraisalMethodRequest {\r\n\tRelatedOrgJobTitle?: number[];\r\n\tExtraaJobttile: {\r\n\t\tID: number;\r\n\t\tmanagerPercentage: number;\r\n\t\tinternalColleaguePercentage: number;\r\n\t\texternalColleaguePercentage: number;\r\n\t\tsubordinatePercentage: number;\r\n\t\tmySelfPercentage: number;\r\n\t\tcustomerPercentage: number;\r\n\t};\r\n}\r\n\r\nexport interface IJobAppraisalMethodModel {\r\n\textraData: null;\r\n\tjob_Title: IJobTitleModel;\r\n\tjobId: 0;\r\n\tkpI_Ids: null;\r\n\tconv_Ids: null;\r\n\trelatedOrgJobTitle: number[];\r\n}\r\n\r\n//////////// assign job to org\r\nexport interface IAssignJobToOrgRequest {\r\n\tJob_Ids: number[];\r\n\tOrg_ID: number;\r\n\tMax_Employee: number;\r\n\tIsInfinity: boolean;\r\n}\r\n\r\nexport interface IAssignJobToOrgModel {\r\n\torg_ID: number;\r\n\tjob_Title_ID: number;\r\n\tmax_Employee: number;\r\n\tmanPowerCapacity: number | string; // map from data to use in table\r\n\tisInfinity: boolean;\r\n\tcore_Job_Title: IJobTitleModel;\r\n\tcore_Org: IOrganizationModel;\r\n\tcurrentEmployeeNumber: number;\r\n\tcurrentEmployeeNumberFromRequest: number;\r\n\tremaining: number | string;\r\n\tjobTitle: string; // use to store job title name\r\n}\r\n\r\nexport interface IAssignJobToOrgDeleteRequest {\r\n\tJobId: number;\r\n\tOrgid: number;\r\n}\r\n","import { NgModule } from \"@angular/core\";\r\nimport { RouterModule, Routes } from \"@angular/router\";\r\nimport { OrgStructureIndexComponent } from \"./components/org-structure/org-structure-index/org-structure-index.component\";\r\nimport { AddOrgStructureComponent } from \"./components/org-structure/add-org-structure/add-org-structure.component\";\r\nimport { pathMatch } from \"app/shared/enums/route-path-match.enum\";\r\nimport { OrgStructureDetailsComponent } from \"./components/org-structure/org-structure-details/org-structure-details.component\";\r\nimport { JobsProfileIndexComponent } from \"./components/jobs-profile/jobs-profile-index/jobs-profile-index.component\";\r\nimport { AddJobProfileComponent } from \"./components/jobs-profile/add-job-profile/add-job-profile.component\";\r\nimport { AssignJobToOrgComponent } from \"./components/jobs-profile/assign-job-to-org/assign-job-to-org.component\";\r\nimport { ViewsManager } from \"app/shared/resources/views-manager\";\r\n\r\nconst routes: Routes = [\r\n\t{\r\n\t\tpath: \"org-structure\",\r\n\t\tdata: { view: ViewsManager.org_structure },\r\n\t\tchildren: [\r\n\t\t\t{\r\n\t\t\t\tpath: \"\",\r\n\t\t\t\tredirectTo: \"index\",\r\n\t\t\t\tpathMatch: pathMatch.full,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: \"index\",\r\n\t\t\t\tcomponent: OrgStructureIndexComponent,\r\n\t\t\t\tdata: { view: ViewsManager.org_structure_index },\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: \"add\",\r\n\t\t\t\tcomponent: AddOrgStructureComponent,\r\n\t\t\t\tdata: { view: ViewsManager.add_org_structure },\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: \"edit/:orgStructureId\",\r\n\t\t\t\tcomponent: AddOrgStructureComponent,\r\n\t\t\t\tdata: { view: ViewsManager.add_org_structure },\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: \"details/:orgStructureId\",\r\n\t\t\t\tcomponent: OrgStructureDetailsComponent,\r\n\t\t\t\tdata: { view: ViewsManager.org_structure_details },\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n\t{\r\n\t\tpath: \"job-profile\",\r\n\t\tdata: { view: ViewsManager.job_profile },\r\n\t\tchildren: [\r\n\t\t\t{\r\n\t\t\t\tpath: \"\",\r\n\t\t\t\tredirectTo: \"index\",\r\n\t\t\t\tpathMatch: pathMatch.full,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: \"index\",\r\n\t\t\t\tcomponent: JobsProfileIndexComponent,\r\n\t\t\t\tdata: { view: ViewsManager.job_profile_index },\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: \"add\",\r\n\t\t\t\tcomponent: AddJobProfileComponent,\r\n\t\t\t\tdata: { view: ViewsManager.add_job_profile },\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: \"edit/:jobId\",\r\n\t\t\t\tcomponent: AddJobProfileComponent,\r\n\t\t\t\tdata: { view: ViewsManager.add_job_profile },\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tpath: \"assign-job-to-org\",\r\n\t\t\t\tcomponent: AssignJobToOrgComponent,\r\n\t\t\t\tdata: { view: ViewsManager.assign_job_to_org },\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n];\r\n\r\n@NgModule({\r\n\timports: [RouterModule.forChild(routes)],\r\n\texports: [RouterModule],\r\n})\r\nexport class OrgManagementRoutingModule {}\r\n","import { NgModule } from \"@angular/core\";\r\nimport { CommonModule } from \"@angular/common\";\r\n\r\nimport { OrgManagementRoutingModule } from \"./org-management-routing.module\";\r\nimport { OrgStructureIndexComponent } from \"./components/org-structure/org-structure-index/org-structure-index.component\";\r\nimport { SharedModule } from \"app/shared/shared.module\";\r\nimport { AddOrgStructureComponent } from \"./components/org-structure/add-org-structure/add-org-structure.component\";\r\nimport { OrgStructureHierarchyDetailsComponent } from \"./components/org-structure/org-structure-hierarchy-details/org-structure-hierarchy-details.component\";\r\nimport { AddOrgStructureNodeComponent } from \"./components/org-structure/add-org-structure-node/add-org-structure-node.component\";\r\nimport { OrgDetailsEmployeesComponent } from \"./components/org-structure/org-details-employees/org-details-employees.component\";\r\nimport { EmployeeCardComponent } from \"./components/org-structure/employee-card/employee-card.component\";\r\nimport { OrgStructureDetailsComponent } from \"./components/org-structure/org-structure-details/org-structure-details.component\";\r\nimport { JobTitleOrgChartComponent } from \"./components/org-structure/job-title-org-chart/job-title-org-chart.component\";\r\nimport { JobTitleDetailsDialogComponent } from \"./components/org-structure/job-title-details-dialog/job-title-details-dialog.component\";\r\nimport { JobsProfileIndexComponent } from \"./components/jobs-profile/jobs-profile-index/jobs-profile-index.component\";\r\nimport { AddJobProfileComponent } from \"./components/jobs-profile/add-job-profile/add-job-profile.component\";\r\nimport { JobCareerPathComponent } from \"./components/jobs-profile/job-career-path/job-career-path.component\";\r\nimport { JobCompetencesComponent } from \"./components/jobs-profile/job-competences/job-competences.component\";\r\nimport { JobKpiComponent } from \"./components/jobs-profile/job-kpi/job-kpi.component\";\r\nimport { JobCustodiesComponent } from \"./components/jobs-profile/job-custodies/job-custodies.component\";\r\nimport { JobTrainingPathComponent } from \"./components/jobs-profile/job-training-path/job-training-path.component\";\r\nimport { JobAppraisalMethodComponent } from \"./components/jobs-profile/job-appraisal-method/job-appraisal-method.component\";\r\nimport { JobDescriptionComponent } from \"./components/jobs-profile/job-description/job-description.component\";\r\nimport { JobCompetenceLevelDetailsDialogComponent } from \"./components/jobs-profile/job-competence-level-details-dialog/job-competence-level-details-dialog.component\";\r\nimport { AssignJobToOrgComponent } from \"./components/jobs-profile/assign-job-to-org/assign-job-to-org.component\";\r\nimport { ResourcesChartComponent } from \"./components/org-structure/resources-chart/resources-chart.component\";\r\n\r\n@NgModule({\r\n  declarations: [\r\n    OrgStructureIndexComponent,\r\n    AddOrgStructureComponent,\r\n    OrgStructureHierarchyDetailsComponent,\r\n    AddOrgStructureNodeComponent,\r\n    OrgDetailsEmployeesComponent,\r\n    EmployeeCardComponent,\r\n    OrgStructureDetailsComponent,\r\n    JobTitleOrgChartComponent,\r\n    JobTitleDetailsDialogComponent,\r\n    JobsProfileIndexComponent,\r\n    AddJobProfileComponent,\r\n    JobCareerPathComponent,\r\n    JobCompetencesComponent,\r\n    JobKpiComponent,\r\n    JobCustodiesComponent,\r\n    JobTrainingPathComponent,\r\n    JobAppraisalMethodComponent,\r\n    JobDescriptionComponent,\r\n    JobCompetenceLevelDetailsDialogComponent,\r\n    AssignJobToOrgComponent,\r\n    ResourcesChartComponent,\r\n  ],\r\n  imports: [CommonModule, OrgManagementRoutingModule, SharedModule],\r\n})\r\nexport class OrgManagementModule {}\r\n","import { db } from \"app/shared/resources/database-tabels\";\r\nimport { Injectable } from \"@angular/core\";\r\nimport { IResponse } from \"app/shared/interfaces/responces\";\r\nimport { AppClientService } from \"app/shared/services/app-client.service\";\r\nimport { IJobTitleModel } from \"../model/job-title\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\",\r\n})\r\nexport class JobTitleChartService extends AppClientService {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  getJobTitleHierarchy(jobId: number) {\r\n    return this.get<IResponse<IJobTitleModel[]>>(\r\n      \"OrgManagement/JobTitle/GetAll_Structure\",\r\n      {\r\n        params: {\r\n          $filter: `id eq ${jobId}`,\r\n          $expand: `${db.core_Org_Job_Title}/${db.core_Org},${db.Core_Person_Instance_Job_Title}.${db.Core_Person_Instance}.${db.Core_Person},${db.Core_Job_Title_Family}`,\r\n        },\r\n      }\r\n    );\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\nimport { IEmployeeCardModel } from \"app/personnel-setup/models/employees\";\r\nimport { IResponse } from \"app/shared/interfaces/responces\";\r\nimport { AppClientService } from \"app/shared/services/app-client.service\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\",\r\n})\r\nexport class ResourcesChartService extends AppClientService {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  getEmployeesChart(employeeId: number) {\r\n    return this.get<IResponse<IEmployeeCardModel[]>>(\r\n      \"personnel/Employees/GetAll_EmployeesCard_Structure\",\r\n      {\r\n        params: {\r\n          PerinsID: employeeId,\r\n        },\r\n      }\r\n    );\r\n  }\r\n}\r\n","import { Injectable } from \"@angular/core\";\r\n\r\n@Injectable({\r\n  providedIn: \"root\",\r\n})\r\nexport class GroupByService {\r\n  constructor() {}\r\n\r\n  //group response data by DayName\r\n  groupBy(collection: any[], property: string): any[] {\r\n    if (!collection) {\r\n      // return null;\r\n    }\r\n    const groupedCollection = collection.reduce((previous, current) => {\r\n      if (!previous[current[property]]) {\r\n        previous[current[property]] = [current];\r\n      } else {\r\n        previous[current[property]].push(current);\r\n      }\r\n      return previous;\r\n    }, {});\r\n    return Object.keys(groupedCollection).map((key) => ({\r\n      key,\r\n      List: groupedCollection[key],\r\n    }));\r\n  }\r\n\r\n  groupByPartOfProperty(\r\n    collection: any[],\r\n    property: string,\r\n    noOfLetters: number\r\n  ): any[] {\r\n    const groupedCollection = collection.reduce((previous, current) => {\r\n      let searchKey = current[property]\r\n        .trim()\r\n        .slice(0, noOfLetters)\r\n        .toUpperCase();\r\n      if (!previous[searchKey]) previous[searchKey] = [current];\r\n      else previous[searchKey].push(current);\r\n      return previous;\r\n    }, {});\r\n    return Object.keys(groupedCollection).map((key) => ({\r\n      key,\r\n      List: groupedCollection[key],\r\n    }));\r\n  }\r\n}\r\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}