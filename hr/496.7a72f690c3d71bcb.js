"use strict";(self.webpackChunkhr=self.webpackChunkhr||[]).push([[496],{3710:(X,G,r)=>{r.d(G,{r:()=>w});var h=r(94650),L=r(67579),b=r(24280),P=r(80458);let w=(()=>{class C{constructor(m,p){this.viewsService=m,this.router=p,this.loadingService=(0,h.f3M)(L.b),this.UserModules=this.viewsService.UserModules$.getValue(),this.loading=document.getElementById("page-loading")}canActivate(m,p){let c=m.data?.view;if(this.showLoading(),this.UserModules?.length>0){if(this.viewsService.isViewAllowed(c))return this.hideLoading(),!0;this.router.navigateByUrl("/auth/access-denied"),this.hideLoading()}else this.viewsService.UserModules$.subscribe(l=>{if(l?.length>0){if(this.viewsService.isViewAllowed(c))return this.hideLoading(),!0;this.router.navigateByUrl("/auth/access-denied"),this.hideLoading()}})}showLoading(){this.loading.style.display="block",this.loading.style.opacity="1",this.loading.style.zIndex="998"}hideLoading(){this.loading.style.display="none",this.loading.style.opacity="0",this.loading.style.zIndex="0"}}return C.\u0275fac=function(m){return new(m||C)(h.LFG(b.Z),h.LFG(P.F0))},C.\u0275prov=h.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},58350:(X,G,r)=>{r.d(G,{$:()=>L});var h=r(94650);let L=(()=>{class b{constructor(){}static groupBy(w,C,I="key",m="List"){const p=w.reduce((c,l)=>(c[l[C]]?c[l[C]].push(l):c[l[C]]=[l],c),{});return Object.keys(p).map(c=>({[I]:c,[m]:p[c]}))}groupByPartOfProperty(w,C,I,m="key",p="List"){const c=w.reduce((l,g)=>{let N=g[C].trim().slice(0,I).toUpperCase();return l[N]?l[N].push(g):l[N]=[g],l},{});return Object.keys(c).map(l=>({[m]:l,[p]:c[l]}))}}return b.\u0275fac=function(w){return new(w||b)},b.\u0275prov=h.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},35496:(X,G,r)=>{r.r(G),r.d(G,{UserManagementSetupModule:()=>as});var h=r(36895),L=r(92634),b=r(15711),P=r(46263),w=r(92958),C=r(80458),I=r(36162),m=r(74513),p=r(24006),c=r(30671),l=r(15602),g=r(95751),N=r(78937),e=r(94650),E=r(18521);let he=(()=>{class i extends E.K{constructor(){super()}create(t){return this.post("GeneralSetup/ActivationSetup/Create",t)}update(t){return this.post("GeneralSetup/ActivationSetup/Edit",t)}getList(t){return this.get("GeneralSetup/ActivationSetup/GetList",{params:t})}getAll(){return this.get("GeneralSetup/ActivationSetup/GetAll")}Delete(t){return this.delete("GeneralSetup/ActivationSetup/Delete",{params:{id:t}})}exportExcel(){this.getAll()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var U=r(25273),K=r(92393),y=r(57566),_=r(46896),d=r(73546);let fe=(()=>{class i extends g.U{constructor(t){super(),this.activationService=t,this.submitted=!1,this.mandatoryColomns=["Ser","id","object_Name","require_Activation","actions"],this.isLoaded=!1,this.optionalColomns=[],this.radioList=[{label:"yes",value:!0,cssClass:"col-6"},{label:"no",value:!1,cssClass:"col-6"}]}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],object_Name:[null,[p.kI.required,N.w.whiteSpace]],require_Activation:[!1]}),this.formCtrls.object_Name.disable()}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new c.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.firstPage)}getList(t,s){this.isLoaded=!1,this.page.pageIndex=t,s&&(this.page.pageSize=s),this.activationService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==l.u.Success?(this.dataSource=new c.by(n.data),this.isLoaded=!0,this.page.length=n.meta.totalItemCount,this.page.meta=n.meta,this.form.patchValue(n.data[0])):this.errorList(n?.message?.messages)})}submit(){if(this.submitted=!0,this.form.valid){const t={id:this.formCtrls.id.value,object_Name:this.formCtrls.object_Name.value,require_Activation:this.formCtrls.require_Activation.value};0==t.id?this.create(t):this.update(t)}}create(t){this.showLoading(),this.activationService.create(t).subscribe(s=>{s?.message?.messageType==l.u.Success?(this.clearForm(),this.getList(this.lastPage,this.page.pageSize),this.addSuccessfullyMsg("newActivationSetupAdded")):this.errorList(s?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this.activationService.update(t).subscribe(s=>{s.message.messageType==l.u.Success?this.updateSuccessfullyMsg("activationSetupUpdated"):this.errorList(s?.message?.messages),this.hideLoading()})}onDelete(t){let s=this.msgTranslate(t.object_Name);this.deleteDialog(s).subscribe(o=>{o&&this.Delete(t)})}Delete(t){this.showLoading(),this.activationService.Delete(t.id).subscribe(s=>{s.message.messageType==l.u.Success?(this.deleteSuccessfullyMsg("activationSetupRemoved"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),t.id==this.formCtrls.id.value&&this.clearForm()):this.errorList(s?.message?.messages),this.hideLoading()})}activationSetupToEdit(t){this.form.patchValue(t)}clearForm(){this.form.reset({id:0,require_Activation:!1}),this.submitted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(he))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-activation-setup"]],features:[e.qOj],decls:14,vars:6,consts:[[1,"row"],[1,"col-12"],[1,"form-card"],["title","activation_setup"],[1,"container-fluid"],[3,"formGroup"],[1,"row","justify-content-between"],[1,"col-md-3","col-12"],["label","object_Name",3,"control","submitted","disabled"],[1,"col-md-8","col-12"],["label","require_Activation",3,"radioList","control"],["align","end"],["label","save",3,"onClick"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title"),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"mat-card-content",4)(6,"form",5)(7,"div",6)(8,"div",7),e._UZ(9,"app-input",8),e.qZA(),e.TgZ(10,"div",9),e._UZ(11,"app-radio-button",10),e.qZA()()()(),e.TgZ(12,"mat-card-actions",11)(13,"submit-btn",12),e.NdJ("onClick",function(){return s.submit()}),e.qZA()()()()()),2&t&&(e.xp6(6),e.Q6J("formGroup",s.form),e.xp6(3),e.Q6J("control",s.formCtrls.object_Name)("submitted",s.submitted)("disabled",!0),e.xp6(2),e.Q6J("radioList",s.radioList)("control",s.formCtrls.require_Activation))},dependencies:[U.a,K._,y.p,_.T,d.a8,d.dn,d.n5,d.hq,p._Y,p.JL,p.sg]}),i})();var _e=r(82585),V=r(12613),ve=r(83163);let Ce=(()=>{class i extends g.U{constructor(t){super(),this._companyCodeService=t,this.submitted=!1}ngOnInit(){this.form=this.fb.group({id:[0,{nonNallable:!0}],isHasCode:[!1,p.kI.required],company_ID:[,p.kI.required]}),this.formCtrls.company_ID.valueChanges.subscribe(t=>{t>0&&this.getCodeStatus()})}get formCtrls(){return this.form?.controls}getCodeStatus(){this.showLoading(),this._companyCodeService.getCodeStatus(this.formCtrls.company_ID.value).subscribe(t=>{t.message.messageType==l.u.Success&&(null==t.data?(this.formCtrls.id.setValue(0),this.formCtrls.isHasCode.setValue(!1)):(this.formCtrls.id.setValue(t.data.id),this.formCtrls.isHasCode.setValue(t.data.isHasCode)))})}submit(){if(this.submitted=!0,this.form.valid){const t={id:this.formCtrls.id.value,isHasCode:this.formCtrls.isHasCode.value,company_ID:this.formCtrls.company_ID.value};0==t.id?this.create(t):this.update(t)}}create(t){this.showLoading(),this._companyCodeService.create(t).subscribe(s=>{s?.message?.messageType==l.u.Success?this.addSuccessfullyMsg("newCompanyCodeAdded"):this.errorList(s?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this._companyCodeService.update(t).subscribe(s=>{s?.message?.messageType==l.u.Success?this.updateSuccessfullyMsg("companyCodeUpdated"):this.errorList(s?.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_e.X))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-company-code"]],features:[e.qOj],decls:16,vars:6,consts:[[1,"row"],[1,"col-12"],[1,"form-card"],["addTitle","companyCode","editTitle","editcompanyCode",3,"id"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],[3,"control","submitted"],[1,"col-md-6","col-12","p-2"],["label","isHasCode",3,"control"],["align","end"],[3,"id","click"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title"),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"mat-card-content",4)(6,"div",0)(7,"div",1)(8,"form",5)(9,"div",0)(10,"div",6),e._UZ(11,"company-by-businessId-dropdown",7),e.qZA(),e.TgZ(12,"div",8),e._UZ(13,"app-check-box",9),e.qZA()()()()()(),e.TgZ(14,"mat-card-actions",10)(15,"submit-btn",11),e.NdJ("click",function(){return s.submit()}),e.qZA()()()()()),2&t&&(e.xp6(4),e.Q6J("id",s.formCtrls.id.value),e.xp6(4),e.Q6J("formGroup",s.form),e.xp6(3),e.Q6J("control",s.formCtrls.company_ID)("submitted",s.submitted),e.xp6(2),e.Q6J("control",s.formCtrls.isHasCode),e.xp6(2),e.Q6J("id",s.formCtrls.id.value))},dependencies:[V.u,y.p,_.T,d.a8,d.dn,d.n5,d.hq,ve._,p._Y,p.JL,p.sg],changeDetection:0}),i})();var f=r(35478),be=r(69846),S=r(69827),x=r(93410),D=r(29721),T=r(49274);let Ie=(()=>{class i extends g.U{constructor(t){super(),this.groupsService=t,this.mandatoryColomns=["Ser","id","ar_Name","en_Name","noOfUsers","privilegesModules","noOfPrivileges","actions"],this.isLoaded=!1,this.optionalColomns=[],this.cellWithDifferentHoverList=[{col:"privilegesModules",hoverProperty:"hoverModules",checkProperty:"showHover"}]}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new c.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,s){this.dataSource=new c.by(null),this.isLoaded=!1,this.page.pageIndex=t,s&&(this.page.pageSize=s),this.removePageParams(),this.groupsService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(n=>{if(n.message.messageType==l.u.Success){if(0==n.data.length&&t>1)return void this.getList(this.prevPage);this.dataSource=new c.by(function we(i,a){let t=new be.El;return i.map(s=>({id:s.uM_Group.id,ar_Name:s.uM_Group.arbName,en_Name:s.uM_Group.engName,noOfUsers:s.countOfUsers,noOfPrivileges:s.countOfprivileges,privilegesModules:0==s.uM_Modules.length?"":1==s.uM_Modules.length?(0,f._f)(s.uM_Modules[0].arbName,s.uM_Modules[0].engName):`<span class="item-table-background-blue pointer"> <img src="${t.multi_items}" width="12" /> ${f.M6.translate("multipleModules",a)}</span>`,hoverModules:"<span>"+(s.uM_Modules.length>0?s.uM_Modules.map(o=>(0,f._f)(o.arbName,o.engName)).join("<hr />"):"")+"</span>",showHover:s.uM_Modules.length>1}))}(n.data,this.languageService)),this.isLoaded=!0,this.page.length=n.meta.totalItemCount,this.page.meta=n.meta}else this.errorList(n?.message?.messages)})}onDelete(t){let s=this.msgTranslate(t.en_Name,t.ar_Name);this.deleteDialog(s).subscribe(o=>{o&&this.delete(t)})}delete(t){this.showLoading(),this.groupsService.Delete(t.id).subscribe(s=>{s.message.messageType==l.u.Success?(this.deleteSuccessfullyMsg("groupRemoved"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(s?.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(S.J))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-groups-index"]],features:[e.qOj],decls:7,vars:15,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","groups","TitleHasGlobalFunc","",3,"parentTitle","globalFunctions"],[1,"index-card"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","exportService","actions","cellWithDifferentHoverList","onChangePage","deleteRow"]],template:function(t,s){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-card",2)(5,"mat-card-content")(6,"app-material-table",3),e.NdJ("onChangePage",function(n){return s.getList(n.pageIndex+1,n.pageSize)})("deleteRow",function(n){return s.onDelete(n)}),e.qZA()()()),2&t&&(e.xp6(1),e.hYB("parentTitle","",e.lcZ(2,11,"settings")," / ",e.lcZ(3,13,"userManagementSetup"),""),e.Q6J("globalFunctions",s.globalFunctions),e.xp6(5),e.Q6J("isLoaded",s.isLoaded)("dataSource",s.dataSource)("mandatoryColomns",s.mandatoryColomns)("optionalColomns",s.optionalColomns)("page",s.page)("exportService",s.groupsService)("actions",s.rowFunctions)("cellWithDifferentHoverList",s.cellWithDifferentHoverList))},dependencies:[x.I,_.T,D.X,d.a8,d.dn,d.n5,T.X$]}),i})();var ye=r(35115),W=r(56500),Ae=r(8364);function Se(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",10),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.clearForm())}),e.qZA()}}let Te=(()=>{class i extends g.U{constructor(t){super(),this.isoCodeService=t,this.submitted=!1,this.isAdd=!0}ngOnInit(){this.form=this.fb.group({reportId:[null,[p.kI.required]],iso:[null,[p.kI.required]]})}get formCtrls(){return this.form.controls}submit(){this.submitted=!0,this.form.valid&&this.update({id:this.formCtrls.reportId.value,iso:this.formCtrls.iso.value})}onSelectReport(t){t?(this.formCtrls.iso.setValue(t.iso),this.isAdd=!t.iso):this.formCtrls.iso.setValue(null)}update(t){this.showLoading(),this.isoCodeService.Edit(t).subscribe(s=>{s?.message?.messageType==l.u.Success?(this.isoChanged=!0,this.clearForm(),this.isAdd?this.addSuccessfullyMsg("newIsoCodeAdded"):this.updateSuccessfullyMsg("isoCodeUpdated")):this.errorList(s?.message?.messages)})}clearForm(){this.form.reset(),this.submitted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ye.J))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-iso-code"]],features:[e.qOj],decls:13,vars:7,consts:[[1,"form-card"],["title","isoCode"],[3,"formGroup"],[1,"row"],[1,"col-md-6","col-12"],[3,"control","submitted","isoChanged","select"],["label","isoCode",3,"control","submitted"],["align","end"],[3,"onClick"],[3,"click",4,"ngIf"],[3,"click"]],template:function(t,s){1&t&&(e.TgZ(0,"mat-card",0)(1,"mat-card-title"),e._UZ(2,"page-title",1),e.qZA(),e.TgZ(3,"mat-card-content")(4,"form",2)(5,"div",3)(6,"div",4)(7,"reports-dropdown",5),e.NdJ("select",function(n){return s.onSelectReport(n)}),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"app-input",6),e.qZA()()(),e.TgZ(10,"mat-card-actions",7)(11,"submit-btn",8),e.NdJ("onClick",function(){return s.submit()}),e.qZA(),e.YNc(12,Se,1,0,"reset-form-btn",9),e.qZA()()()),2&t&&(e.xp6(4),e.Q6J("formGroup",s.form),e.xp6(3),e.Q6J("control",s.formCtrls.reportId)("submitted",s.submitted)("isoChanged",s.isoChanged),e.xp6(2),e.Q6J("control",s.formCtrls.iso)("submitted",s.submitted),e.xp6(3),e.Q6J("ngIf",s.formCtrls.reportId.value||s.formCtrls.iso.value))},dependencies:[h.O5,U.a,W.J,y.p,_.T,d.a8,d.dn,d.n5,d.hq,Ae.z,p._Y,p.JL,p.sg]}),i})();var Q=r(59589);let Ze=(()=>{class i extends g.U{constructor(t){super(),this.personalNotificationService=t,this.submitted=!1,this.mandatoryColomns=["Ser","ar_Name","en_Name","group","actions"],this.isLoaded=!1}ngOnInit(){}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,s){this.isLoaded=!1,this.page.pageIndex=t,s&&(this.page.pageSize=s),this.removePageParams(),this.personalNotificationService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(n=>{if(n.message.messageType==l.u.Success){if(0==n.data.length&&t>1)return void this.getList(this.prevPage);n.data.map(u=>u.group=(0,f._f)(u.comm_GroupNotificationSetup?.ar_Name,u.comm_GroupNotificationSetup?.en_Name)),this.dataSource=new c.by(n.data),this.isLoaded=!0,this.page.length=n.meta.totalItemCount,this.page.meta=n.meta}else this.errorList(n?.message?.messages)})}onDelete(t){let s=this.msgTranslate(t.name);this.deleteDialog(s).subscribe(o=>{o&&this.delete(t)})}delete(t){this.showLoading(),this.personalNotificationService.Delete(t.id).subscribe(s=>{s.message.messageType==l.u.Success?(this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),this.deleteSuccessfullyMsg("personalNotificationRemoved")):this.errorList(s?.message?.messages),this.hideLoading()})}Pause(t){this.showLoading(),this.personalNotificationService.Pause(t.id).subscribe(s=>{s.message.messageType==l.u.Success?this.success("personalNotificationPaused",s.message.messageTypeName):this.errorList(s?.message?.messages),this.hideLoading()})}UnPause(t){this.showLoading(),this.personalNotificationService.UnPause(t.id).subscribe(s=>{s.message.messageType==l.u.Success?this.success("personalNotificationResumed",s.message.messageTypeName):this.errorList(s?.message?.messages),this.hideLoading()})}onClickRowActions(t){if("pause"==t.fun.name){let s=(0,f._f)("pause"),o=`${(0,f._f)("pause")} ${(0,f._f)(t.data.ar_Name,t.data.en_Name)}?`;this.confirmDialog({msg:o,title:s,btn:s}).subscribe(n=>{n&&this.Pause(t.data)})}if("resumed"==t.fun.name){let s=(0,f._f)("resumed"),o=`${(0,f._f)("resumed")} ${(0,f._f)(t.data.ar_Name,t.data.en_Name)}?`;this.confirmDialog({msg:o,title:s,btn:s}).subscribe(n=>{n&&this.UnPause(t.data)})}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Q.p))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-personal-notification"]],features:[e.qOj],decls:6,vars:6,consts:[[1,"row"],[1,"col-12"],[1,"index-card"],["title","personal_notification","TitleHasGlobalFunc","",3,"globalFunctions"],[3,"isLoaded","mandatoryColomns","page","actions","dataSource","onChangePage","onClickRowActions","deleteRow"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title"),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"app-material-table",4),e.NdJ("onChangePage",function(n){return s.getList(n.pageIndex+1,n.pageSize)})("onClickRowActions",function(n){return s.onClickRowActions(n)})("deleteRow",function(n){return s.onDelete(n)}),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("globalFunctions",s.globalFunctions),e.xp6(1),e.Q6J("isLoaded",s.isLoaded)("mandatoryColomns",s.mandatoryColomns)("page",s.page)("actions",s.rowFunctions)("dataSource",s.dataSource))},dependencies:[x.I,_.T,D.X,d.a8,d.n5]}),i})();var ee=r(73692),te=r(56931),k=r(72428),Ne=r(60544),Ge=r(65731);let Ue=(()=>{class i extends g.U{constructor(t){super(),this.userService=t,this.submitted=!1,this.mandatoryColomns=["Ser","id","userName","statusText","employeeName","jobTitleName","companiesMapped","actions"],this.isLoaded=!1,this.optionalColomns=[],this.cellWithHoverList=[{col:"companiesMapped",hoverProperty:"hoverCompanies",checkProperty:"showHover"}]}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new c.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,s){this.isLoaded=!1,this.page.pageIndex=t,s&&(this.page.pageSize=s),this.removePageParams(),this.userService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(n=>{if(n.message.messageType==l.u.Success){if(0==n.data.length&&t>1)return void this.getList(this.prevPage);n.data.map(u=>{0==u.status&&(u.statusText=`<span class="badge-danger">${this.languageService.translate("disabled")}</span>`),1==u.status&&(u.statusText=`<span class="badge-success">${this.languageService.translate("active")}</span>`)}),this.dataSource=new c.by((0,te.yX)(n.data,this.languageService)),this.isLoaded=!0,this.page.length=n.meta.totalItemCount,this.page.meta=n.meta}else this.errorList(n?.message?.messages)})}onDelete(t){let s=this.msgTranslate(t.employeeAr,t.employeeEn);this.deleteDialog(s).subscribe(o=>{o&&this.delete(t)})}delete(t){this.showLoading(),this.userService.Delete(t.userId).subscribe(s=>{s.message.messageType==l.u.Success?(this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),this.deleteSuccessfullyMsg("userRemoved")):this.errorList(s?.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(k.f))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-user-index"]],features:[e.qOj],decls:8,vars:11,consts:[[1,"row"],[1,"col-12"],[1,"index-card"],["title","users","TitleHasGlobalFunc","",3,"globalFunctions"],[3,"isLoaded","mandatoryColomns","optionalColomns","page","actions","dataSource","exportService","cellWithDifferentHoverList","onChangePage","deleteRow"],[3,"serviceId","moduleId"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title"),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"app-material-table",4),e.NdJ("onChangePage",function(n){return s.getList(n.pageIndex+1,n.pageSize)})("deleteRow",function(n){return s.onDelete(n)}),e.qZA()()()(),e.TgZ(6,"side-helping-menu"),e._UZ(7,"app-dashboard-display",5),e.qZA()),2&t&&(e.xp6(4),e.Q6J("globalFunctions",s.globalFunctions),e.xp6(1),e.Q6J("isLoaded",s.isLoaded)("mandatoryColomns",s.mandatoryColomns)("optionalColomns",s.optionalColomns)("page",s.page)("actions",s.rowFunctions)("dataSource",s.dataSource)("exportService",s.userService)("cellWithDifferentHoverList",s.cellWithHoverList),e.xp6(2),e.Q6J("serviceId",s.getCurrentServiceId())("moduleId",s.moduleId))},dependencies:[x.I,_.T,Ne.c,Ge.b,D.X,d.a8,d.n5]}),i})();var i,v=r(3710),A=(()=>{return(i=A||(A={}))[i.male=1]="male",i[i.female=2]="female",i[i.allofThem=3]="allofThem",A;var i})();(i=A||(A={})).getValue=function a(t){switch(t){case i.male:return"male";case i.female:return"female";case i.allofThem:return"allofThem";default:return""}};var q=r(65938),se=r(37528),xe=r(26873);let Me=(()=>{class i extends g.U{constructor(t,s,o){super(),this.attachmentTypsService=t,this.dialogRef=s,this.data=o,this.submitted=!1,this.genderList=[{value:A.male,label:"male",cssClass:"col-md-3 col-12"},{value:A.female,label:"female",cssClass:"col-md-4 col-12"},{value:A.allofThem,label:"allofThem",cssClass:"col-md-5 col-12"}]}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],ar_Name:[null,[p.kI.required,N.w.whiteSpace]],en_Name:[null,[p.kI.required,N.w.whiteSpace]],gender:[3]}),null!=this.data&&this.attachmentTypsToEdit(this.data)}get formCtrls(){return this.form.controls}submit(){if(this.submitted=!0,this.form.valid){const t={Id:this.formCtrls.id.value,ar_Name:this.formCtrls.ar_Name.value,en_Name:this.formCtrls.en_Name.value,gender:this.formCtrls.gender.value};0==t.Id?this.create(t):this.update(t)}}create(t){this.showLoading(),this.attachmentTypsService.create(t).subscribe(s=>{s?.message?.messageType==l.u.Success?(this.addSuccessfullyMsg("canEditOrRemoveFromIndex","addAttachmentType"),this.dialogRef.close({isUpdate:!0})):this.errorList(s?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this.attachmentTypsService.update(t).subscribe(s=>{s.message.messageType==l.u.Success?(this.updateSuccessfullyMsg("updateAttachmentType","successfulEdit"),this.dialogRef.close({isUpdate:!0})):this.errorList(s?.message?.messages),this.hideLoading()})}attachmentTypsToEdit(t){this.form.patchValue(t)}clearForm(){this.form.reset({id:0}),this.submitted=!1}onCloseDialog(){this.dialogRef.close()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(se.w),e.Y36(q.so),e.Y36(q.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-attachment-types"]],features:[e.qOj],decls:17,vars:10,consts:[["mat-dialog-title","",1,"primary-color","font-size-20","m-0","ml-3"],["parentTitle","attachment_types","addTitle","add","editTitle","update",1,"d-inline-block","mtop-10",3,"id"],[1,"container-fluid","mx-0","h-100","mtop-2"],["dialogContainer",""],[3,"formGroup"],[1,"row"],[1,"col-md-12","col-12"],["label","en_Name",3,"control","submitted"],["label","ar_Name",3,"control","submitted"],[3,"control","submitted","radioList"],["align","end"],[3,"click"],[3,"id","onClick"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"h4"),e._UZ(2,"page-title",1),e.qZA()(),e.TgZ(3,"mat-dialog-content",2,3)(5,"form",4)(6,"div",5)(7,"div",6),e._UZ(8,"app-input",7),e.qZA(),e.TgZ(9,"div",6),e._UZ(10,"app-input",8),e.qZA()(),e.TgZ(11,"div",5)(12,"div",6),e._UZ(13,"app-radio-button",9),e.qZA()()(),e.TgZ(14,"mat-card-actions",10)(15,"discard-dialog-btn",11),e.NdJ("click",function(){return s.onCloseDialog()}),e.qZA(),e.TgZ(16,"submit-btn",12),e.NdJ("onClick",function(){return s.submit()}),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("id",s.formCtrls.id.value),e.xp6(3),e.Q6J("formGroup",s.form),e.xp6(3),e.Q6J("control",s.formCtrls.ar_Name)("submitted",s.submitted),e.xp6(2),e.Q6J("control",s.formCtrls.en_Name)("submitted",s.submitted),e.xp6(3),e.Q6J("control",s.formCtrls.gender)("submitted",s.submitted)("radioList",s.genderList),e.xp6(3),e.Q6J("id",s.formCtrls.id.value))},dependencies:[U.a,K._,y.p,_.T,xe.E,d.hq,q.uh,q.xY,p._Y,p.JL,p.sg]}),i})(),Le=(()=>{class i extends g.U{constructor(t){super(),this.attachmentTypsService=t,this.mandatoryColomns=["Ser","id","ar_Name","en_Name","genderName","actions"],this.isLoaded=!1,this.optionalColomns=[]}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new c.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.firstPage)}getList(t,s){this.isLoaded=!1,this.page.pageIndex=t,s&&(this.page.pageSize=s),this.attachmentTypsService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==l.u.Success?(n.data.map(u=>{u.genderName=this.translate(A.getValue(u.gender))}),this.dataSource=new c.by(n.data),this.isLoaded=!0,this.page.length=n.meta.totalItemCount,this.page.meta=n.meta):this.errorList(n?.message?.messages)})}onDelete(t){let s=this.msgTranslate(t.ar_Name,t.en_Name);this.deleteDialog(s).subscribe(o=>{o&&this.Delete(t)})}Delete(t){this.showLoading(),this.attachmentTypsService.Delete(t.id).subscribe(s=>{s.message.messageType==l.u.Success?(this.deleteSuccessfullyMsg("deleteAttachmentType","successfulDelete"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(s?.message?.messages),this.hideLoading()})}openAddAttachmentTypeDialog(t){this.dialogsService.addEditDialog(Me,t,{width:"25vw",minWidth:"400px",maxWidth:"500px",maxHeight:"98vh",disableClose:!0,panelClass:"setup-dialog"}).afterClosed().subscribe(s=>{s?.isUpdate&&this.getList(this.firstPage)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(se.w))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-attachment-type-index"]],features:[e.qOj],decls:6,vars:8,consts:[[1,"row"],[1,"col-12"],[1,"index-card"],["title","attachment_types","TitleHasGlobalFunc","",3,"globalFunctions","action"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","exportService","actions","onChangePage","editRow","deleteRow"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title")(4,"page-title",3),e.NdJ("action",function(){return s.openAddAttachmentTypeDialog(null)}),e.qZA()(),e.TgZ(5,"app-material-table",4),e.NdJ("onChangePage",function(n){return s.getList(n.pageIndex+1,n.pageSize)})("editRow",function(n){return s.openAddAttachmentTypeDialog(n)})("deleteRow",function(n){return s.onDelete(n)}),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("globalFunctions",s.globalFunctions),e.xp6(1),e.Q6J("isLoaded",s.isLoaded)("dataSource",s.dataSource)("mandatoryColomns",s.mandatoryColomns)("optionalColomns",s.optionalColomns)("page",s.page)("exportService",s.attachmentTypsService)("actions",s.rowFunctions))},dependencies:[x.I,_.T,D.X,d.a8,d.n5]}),i})();function Pe(i,a){if(1&i&&e._UZ(0,"app-add-new-btn",6),2&i){const t=e.oxw();e.MGl("url","/user-management-setup/",t.moduleId,"/users/add"),e.Q6J("params",t.pageParams)}}let H=(()=>{class i extends g.U{constructor(t){super(),this.userService=t,this.userId=0}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.userId=Number(t.userId)??0})}onChangeBusinessAndCompanyId(){this.userId>0&&this.checkNoBusinessOrCompany()&&this.getUserById()}getUserName(t){this.currentUserName=t}getUserById(){this.userService.getAllById(this.userId).subscribe(t=>{t.message.messageType==l.u.Success?(this.user=t.data[0],this.userService.setUser(this.user)):this.errorList(t.message.messages)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(k.f))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-view-user-core"]],features:[e.qOj],decls:11,vars:16,consts:[[1,"title-no-margin","title-section","fixed-title"],[3,"title","parentTitle","parentLinkParams"],["label","addUser",3,"url","params",4,"ngIf"],[3,"url","params"],[3,"userId","userName"],[3,"isAdd"],["label","addUser",3,"url","params"]],template:function(t,s){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.YNc(4,Pe,1,2,"app-add-new-btn",2),e._UZ(5,"app-back-btn",3),e.qZA(),e.TgZ(6,"mat-card-content")(7,"user-general-info-view",4),e.NdJ("userName",function(n){return s.getUserName(n)}),e.qZA(),e._UZ(8,"user-companies",5)(9,"app-user-group",5)(10,"user-policy-groups",5),e.qZA()),2&t&&(e.xp6(1),e.hYB("parentTitle","",e.lcZ(2,12,"userManagementSetup")," / ",e.lcZ(3,14,"users"),""),e.MGl("parentLinkParams","/user-management-setup/",s.moduleId,"/users"),e.Q6J("title",null==s.user||null==s.user.uM_Users?null:s.user.uM_Users.name)("parentLinkParams",s.pageParams),e.xp6(3),e.Q6J("ngIf",s.userId>0),e.xp6(1),e.MGl("url","/user-management-setup/",s.moduleId,"/users/index"),e.Q6J("params",s.pageParams),e.xp6(2),e.Q6J("userId",s.userId),e.xp6(1),e.Q6J("isAdd",!1),e.xp6(1),e.Q6J("isAdd",!1),e.xp6(1),e.Q6J("isAdd",!1))}}),i})();var $=r(58350),O=r(4859),F=r(37084);function Je(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"app-check-box",8),e.NdJ("onChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.onSelectAllPrivilegesInModule(o))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("label",t.msgTranslate(t.module.arbName,t.module.engName))("stopPropagation",!0)("control",t.returnTestControl())}}function Ve(i,a){if(1&i&&e._uU(0),2&i){const t=e.oxw();e.hij(" ",t.msgTranslate(t.module.arbName,t.module.engName)," ")}}function De(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(o){e.CHM(t);const n=e.oxw(),u=e.MAs(1);return o.stopPropagation(),n.isUpdateView=!0,e.KtG(u.open())}),e._UZ(1,"i",10),e.qZA()}}function Qe(i,a){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(2).$implicit,s=e.oxw();e.xp6(1),e.AsE(" (",s.getNoOfSelectedGuiInService(t.id)," ",e.lcZ(2,2,"selected"),") ")}}function ke(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",18)(2,"app-check-box",19),e.NdJ("onChange",function(o){e.CHM(t);const n=e.oxw(2).$implicit,u=e.oxw();return e.KtG(u.onSelectAllPrivilegesInService(o,n.id))}),e.qZA()()()}if(2&i){const t=e.oxw(2).$implicit,s=e.oxw();e.xp6(2),e.Q6J("control",s.returnTestControlEach(t.id))}}function qe(i,a){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(2).$implicit,s=e.oxw(2).$implicit,o=e.oxw();e.xp6(1),e.hij(" (",e.lcZ(2,1,o.getGuiParentName(s,t)),")")}}function Oe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",21)(1,"div",22),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,n=e.oxw(3);return e.KtG(n.onSelectGui(o.id))}),e.TgZ(2,"h6"),e._uU(3),e.ALo(4,"translate"),e.YNc(5,qe,3,3,"span",14),e.qZA()()()}if(2&i){const t=e.oxw().$implicit,s=e.oxw(3);e.ekj("noClick",s.isView&&!s.isUpdateView),e.xp6(1),e.ekj("selected",s.isSelectedGui(t.id))("grey-gui",s.isView&&!s.isUpdateView),e.xp6(2),e.hij(" ",e.lcZ(4,8,t.name)," "),e.xp6(2),e.Q6J("ngIf",t.parantId>0)}}function Fe(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Oe,6,10,"div",20),e.BQk()),2&i){const t=a.$implicit,s=e.oxw(3);e.xp6(1),e.Q6J("ngIf",s.isView&&!s.isUpdateView&&s.isSelectedGui(t.id)||s.isView&&s.isUpdateView||!s.isView)}}function Be(i,a){if(1&i&&(e.TgZ(0,"div",12)(1,"div",13)(2,"h4")(3,"span"),e._uU(4),e.qZA(),e.YNc(5,Qe,3,4,"span",14),e.qZA(),e.YNc(6,ke,3,1,"div",15),e.qZA(),e.TgZ(7,"div",16),e.YNc(8,Fe,2,1,"ng-container",6),e.qZA()()),2&i){const t=e.oxw().$implicit,s=e.oxw();e.xp6(4),e.hij(" ",s.msgTranslate(t.arbName,t.engName)," "),e.xp6(1),e.Q6J("ngIf",s.getNoOfSelectedGuiInService(t.id)>0&&(!s.isView||s.isView&&s.isUpdateView)),e.xp6(1),e.Q6J("ngIf",!s.isView||s.isView&&s.isUpdateView),e.xp6(2),e.Q6J("ngForOf",t.uM_GUI)}}function Re(i,a){if(1&i&&(e.ynx(0),e.YNc(1,Be,9,4,"div",11),e.BQk()),2&i){const t=a.$implicit,s=e.oxw();e.xp6(1),e.Q6J("ngIf",(!s.isView||s.isView&&s.isUpdateView)&&t.uM_GUI.length>0||s.isView&&!s.isUpdateView&&s.getNoOfSelectedGuiInService(t.id)>0)}}function Ye(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-card-actions",23)(1,"submit-btn",24),e.NdJ("onClick",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.saveAndReturnModuleIntoViewMode())}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("id",0)("color",t.btn.darkBlue)("iconPositionBefore",!1)}}let ie=(()=>{class i extends g.U{constructor(t){super(),this.groupsService=t,this.groupId=0,this.isView=!1,this.isUpdateView=!1,this.saveGuis=new e.vpe}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],guiIds:[[]]}),this.groupsService.group$.subscribe(t=>{this.groupId=t?.id??0,this.formCtrls.guiIds.setValue(t?t.groupedGuis.find(s=>s.moduleId==this.module.id)?.guis.map(s=>s.guI_ID)??[]:[]),0==this.formCtrls.guiIds.value.length&&this.isView&&(this.isUpdateView=!0)})}get formCtrls(){return this.form.controls}onSelectAllPrivilegesInModule(t){let s=[];this.module.uM_Services.forEach(n=>{s.push(...n.uM_GUI.map(u=>u.id))});let o=this.formCtrls.guiIds.value;t?s.forEach(n=>{o.includes(n)||o.push(n)}):o=o.filter(n=>!s.includes(n)),this.formCtrls.guiIds.setValue(o)}returnTestControl(){let t=[];return this.module.uM_Services.forEach(s=>{t.push(...this.getGuiIdsOfService(s.id))}),new p.NI(t.every(s=>this.formCtrls.guiIds.value.includes(s)))}onSelectAllPrivilegesInService(t,s){let o=this.formCtrls.guiIds.value,n=this.getGuiIdsOfService(s);t?o.push(...n.filter(u=>!o.includes(u))):o=o.filter(u=>!n.includes(u)),this.formCtrls.guiIds.setValue(o)}returnTestControlEach(t){let s=this.getGuiIdsOfService(t);return new p.NI(s?.every(o=>this.formCtrls.guiIds.value.includes(o)))}onSelectGui(t){let s=this.formCtrls.guiIds.value;this.isSelectedGui(t)?s=s.filter(o=>o!=t):s.push(t),this.formCtrls.guiIds.setValue(s)}isSelectedGui(t){return this.formCtrls.guiIds.value.includes(t)}getGuiIdsOfService(t){return this.module.uM_Services.find(s=>s.id==t).uM_GUI.map(s=>s.id)}getNoOfSelectedGuiInService(t){let s=this.getGuiIdsOfService(t);return this.formCtrls.guiIds.value.filter(n=>s.includes(n)).length}getGuiParentName(t,s){return t.uM_GUI.find(o=>o.id==s.parantId)?.name}saveAndReturnModuleIntoViewMode(){this.saveGuis.emit(),this.isUpdateView=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(S.J))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-group-privileges-module-content"]],inputs:{module:"module",isView:"isView",isUpdateView:"isUpdateView"},outputs:{saveGuis:"saveGuis"},features:[e.qOj],decls:10,vars:5,consts:[[1,"mbottom-20"],["panel",""],[1,"page-title"],["styleClass","w-100",3,"label","stopPropagation","control","onChange",4,"ngIf","ngIfElse"],["titleOnly",""],["mat-button","","class","section-edit-btn pright-6 pleft-6 darkBlue",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["align","end","class","m-0 pt-0",4,"ngIf"],["styleClass","w-100",3,"label","stopPropagation","control","onChange"],["mat-button","",1,"section-edit-btn","pright-6","pleft-6","darkBlue",3,"click"],[1,"fas","fa-pen","font-size-15"],["class","sub-module-container",4,"ngIf"],[1,"sub-module-container"],[1,"title"],[4,"ngIf"],["class","inputs-box-with-label selectAll",4,"ngIf"],[1,"row",2,"margin-right","-10px","margin-left","-10px"],[1,"inputs-box-with-label","selectAll"],[1,"box-label","no-content"],["label","selectAll","labelPosition","before","styleClass","w-100",3,"control","onChange"],["class","w-md-20 pleft-10 pright-10 item-container",3,"noClick",4,"ngIf"],[1,"w-md-20","pleft-10","pright-10","item-container"],[1,"item",3,"click"],["align","end",1,"m-0","pt-0"],["icon","fas fa-save",3,"id","color","iconPositionBefore","onClick"]],template:function(t,s){if(1&t&&(e.TgZ(0,"mat-expansion-panel",0,1)(2,"mat-expansion-panel-header")(3,"mat-panel-title",2),e.YNc(4,Je,1,3,"app-check-box",3),e.YNc(5,Ve,1,1,"ng-template",null,4,e.W1O),e.qZA(),e.YNc(7,De,2,0,"button",5),e.qZA(),e.YNc(8,Re,2,1,"ng-container",6),e.YNc(9,Ye,2,3,"mat-card-actions",7),e.qZA()),2&t){const o=e.MAs(6);e.xp6(4),e.Q6J("ngIf",!s.isView||s.isView&&s.isUpdateView)("ngIfElse",o),e.xp6(3),e.Q6J("ngIf",s.isView&&!s.isUpdateView),e.xp6(1),e.Q6J("ngForOf",s.module.uM_Services),e.xp6(1),e.Q6J("ngIf",s.isView&&s.isUpdateView)}},dependencies:[h.sg,h.O5,V.u,y.p,O.lW,d.hq,F.ib,F.yz,F.yK,T.X$]}),i})();var oe=r(26315);let Ee=(()=>{class i extends E.K{constructor(){super()}getAll(){return this.get("Module/GetAll",{params:{$expand:`${oe.db.Um_Services}.${oe.db.uM_GUI}`}})}getById(t){return this.get("Module/GetAll",{params:{$filter:`id eq ${t}`}})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Z=r(44850),He=r(64583),$e=r(35593),je=r(51740),ze=r(17489);function Xe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.isUpdateView=!0)}),e._UZ(1,"i",13),e.qZA()}}function Ke(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",14)(1,"div",15)(2,"div",16)(3,"span",17),e._UZ(4,"i",18),e.TgZ(5,"input",19,20),e.NdJ("keyup.enter",function(){e.CHM(t);const o=e.MAs(6),n=e.oxw();return e.KtG(n.applyModulesFilter(o.value))})("keyup",function(){e.CHM(t);const o=e.MAs(6),n=e.oxw();return e.KtG(n.applyModulesFilter(o.value))}),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"button",21),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(6),n=e.oxw();return e.KtG(n.applyModulesFilter(o.value))}),e.qZA()()(),e.TgZ(9,"div",22)(10,"div",23)(11,"div",24)(12,"app-check-box",25),e.NdJ("onChange",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.onSelectAllModules(o))}),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(5),e.Q6J("placeholder",e.lcZ(7,4,"searchBy")),e.xp6(6),e.ekj("noClick",!t.groupId),e.xp6(1),e.Q6J("control",t.returnTestControl(null))}}function We(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",30)(1,"div",31)(2,"div",24)(3,"app-check-box",32),e.NdJ("onChange",function(o){e.CHM(t);const n=e.oxw().$implicit,u=e.oxw(2);return e.KtG(u.onSelectModule(o,n.id))}),e.qZA()()()()}if(2&i){const t=e.oxw().$implicit,s=e.oxw(2);e.xp6(1),e.ekj("grey-checkbox",s.isView&&!s.isUpdateView)("noClick",s.isView&&!s.isUpdateView||!s.groupId),e.xp6(2),e.Q6J("label",s.msgTranslate(t.arbName,t.engName))("control",s.returnTestControl(t.id))}}function et(i,a){if(1&i&&(e.ynx(0),e.YNc(1,We,4,6,"div",29),e.BQk()),2&i){const t=a.$implicit,s=e.oxw(2);e.xp6(1),e.Q6J("ngIf",s.isView&&!s.isUpdateView&&s.isModuleSelected(t.id)||s.isView&&s.isUpdateView||!s.isView)}}function tt(i,a){if(1&i&&(e.ynx(0),e.YNc(1,et,2,1,"ng-container",26),e.TgZ(2,"span",27),e._UZ(3,"input-validation-msg",28),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.filteredModules),e.xp6(2),e.Q6J("control",t.formCtrls.moduleIds)("submitted",t.submitted)("isSelect",!0)}}function st(i,a){1&i&&(e.TgZ(0,"div",34),e._UZ(1,"p-skeleton",35),e.qZA())}const it=function(){return[]};function ot(i,a){1&i&&e.YNc(0,st,2,0,"div",33),2&i&&e.Q6J("ngForOf",e.DdM(1,it).constructor(5))}function nt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-card-actions",36)(1,"submit-btn",37),e.NdJ("onClick",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.saveAndReturnModulesIntoViewMode())}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("id",0)("color",t.btn.darkBlue)("iconPositionBefore",!1)}}let ne=(()=>{class i extends g.U{constructor(t,s){super(),this.modulesService=t,this.groupsService=s,this.groupId=0,this.isView=!1,this.isUpdateView=!1,this.saveGuis=new e.vpe,this.selectedModules=[],this.isloaded=!1,this.submitted=!1}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],moduleIds:[[],[p.kI.required]]}),this.groupsService.group$.subscribe(t=>{this.groupId=t?.id??0,this.formCtrls.moduleIds.setValue(t?t.groupedGuis.map(s=>Number(s.moduleId)):[]),this.filteredModules?.length>0&&this.updateSelectedModuleList()})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&this.getAllModules()}getAllModules(){this.modulesService.getAll().subscribe(t=>{t.message.messageType==l.u.Success?(t.data.map(s=>{s.uM_Services.map(o=>{o.uM_GUI=o.uM_GUI.sort((n,u)=>n.id-u.id)})}),this.modules=t.data.filter(s=>s.uM_Services.length>0&&s.uM_Services.some(o=>o.uM_GUI.length>0)),this.filteredModules=this.modules,this.formCtrls.moduleIds.value.length>0&&this.updateSelectedModuleList(),this.isloaded=!0):this.errorList(t?.message?.messages)})}applyModulesFilter(t){this.filteredModules=this.modules?.filter(s=>this.languageService.isArabic?s.arbName.toLowerCase().includes(t.trim().toLowerCase()):s.engName.toLowerCase().includes(t.trim().toLowerCase()))}onSelectModule(t,s){let o=this.formCtrls.moduleIds.value;if(t)o.push(s);else{const n=o.indexOf(s);o.splice(n,1)}this.updateSelectedModuleList(),this.formCtrls.moduleIds.setValue(o)}returnTestControl(t){return new p.NI(t?this.formCtrls.moduleIds.value.includes(t):this.filteredModules?.length>0&&this.filteredModules?.every(s=>this.formCtrls.moduleIds.value.includes(s.id)))}onSelectAllModules(t){this.formCtrls.moduleIds.setValue(t?this.filteredModules?.map(s=>s.id):[]),this.selectedModules=t?this.filteredModules:[]}updateSelectedModuleList(){this.selectedModules=this.modules?.filter(t=>this.formCtrls.moduleIds.value.includes(t.id))??[]}isModuleSelected(t){return this.formCtrls.moduleIds.value.includes(t)}saveAndReturnModulesIntoViewMode(){this.saveGuis.emit(),0!=this.formCtrls.moduleIds.value.length&&(this.isUpdateView=!1)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ee),e.Y36(S.J))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-group-privileges-modules"]],inputs:{isView:"isView",isUpdateView:"isUpdateView"},outputs:{saveGuis:"saveGuis"},features:[e.qOj],decls:13,vars:8,consts:[[1,"mbottom-20"],[1,"title-no-margin"],["title","privilegesModules"],["mat-button","","class","float-right section-edit-btn pright-6 pleft-6 darkBlue",3,"click",4,"ngIf"],[1,"mt-2"],[1,"clearfix"],[1,"add-group-privileges",3,"ngClass"],["class","row",4,"ngIf"],[1,"row",2,"margin-right","-10px","margin-left","-10px"],[4,"ngIf","ngIfElse"],["loading",""],["align","end","class","m-0 pt-0",4,"ngIf"],["mat-button","",1,"float-right","section-edit-btn","pright-6","pleft-6","darkBlue",3,"click"],[1,"fas","fa-pen","font-size-15"],[1,"row"],[1,"col-md-6","col-12","filter-container"],[1,"p-inputgroup"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["type","text","pInputText","",1,"filter-input",3,"placeholder","keyup.enter","keyup"],["filterInput",""],["type","button","pButton","","pRipple","","icon","pi pi-search","styleClass","p-button-warn",3,"click"],[1,"col-md-6","col-12","mtop-15"],[1,"inputs-box-with-label","selectAll"],[1,"box-label","no-content"],["label","selectAll","labelPosition","before","styleClass","w-100",3,"control","onChange"],[4,"ngFor","ngForOf"],[1,"danger","validation"],[3,"control","submitted","isSelect"],["class","w-md-20 pleft-10 pright-10",4,"ngIf"],[1,"w-md-20","pleft-10","pright-10"],[1,"inputs-box-with-label"],["labelPosition","before","styleClass","w-100",3,"label","control","onChange"],["class","w-md-20 pleft-10 pright-10 mtop-10",4,"ngFor","ngForOf"],[1,"w-md-20","pleft-10","pright-10","mtop-10"],["width","100%","height","40px","borderRadius","10px"],["align","end",1,"m-0","pt-0"],["icon","fas fa-save",3,"id","color","iconPositionBefore","onClick"]],template:function(t,s){if(1&t&&(e.TgZ(0,"mat-card",0)(1,"mat-card-title",1),e._UZ(2,"page-title",2),e.YNc(3,Xe,2,0,"button",3),e.qZA(),e._UZ(4,"mat-divider",4)(5,"div",5),e.TgZ(6,"mat-card-content",6),e.YNc(7,Ke,13,6,"div",7),e.TgZ(8,"div",8),e.YNc(9,tt,4,4,"ng-container",9),e.YNc(10,ot,1,2,"ng-template",null,10,e.W1O),e.qZA()(),e.YNc(12,nt,2,3,"mat-card-actions",11),e.qZA()),2&t){const o=e.MAs(11);e.xp6(3),e.Q6J("ngIf",s.isView&&!s.isUpdateView),e.xp6(3),e.ekj("mb-0",s.isView),e.Q6J("ngClass",s.isView&&!s.isUpdateView?"mtop-40":"mtop-30"),e.xp6(1),e.Q6J("ngIf",!s.isView||s.isView&&s.isUpdateView),e.xp6(2),e.Q6J("ngIf",s.isloaded)("ngIfElse",o),e.xp6(3),e.Q6J("ngIf",s.isView&&s.isUpdateView)}},dependencies:[h.mk,h.sg,h.O5,V.u,y.p,_.T,O.lW,d.a8,d.dn,d.n5,d.hq,Z.d,He.p,$e.Hq,je.o,ze.O,T.X$]}),i})();function at(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-add-group-privileges-module-content",3),e.NdJ("saveGuis",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.submit(!0))}),e.qZA(),e.BQk()}if(2&i){const t=a.$implicit,s=e.oxw();e.xp6(1),e.Q6J("module",t)("isView",s.isView)("isUpdateView",s.isUpdateView)}}let j=(()=>{class i extends g.U{constructor(t){super(),this.groupsService=t,this.groupId=0,this.isView=!1,this.isUpdateView=!1,this.editAll=!1,this.completed=new e.vpe}ngOnInit(){this.groupsService.group$.subscribe(t=>{this.groupId=t?.id??0,this.lastSavedGuis=t?.uM_GUI_Group.map(s=>s.guI_ID)??[]})}ngOnChanges(t){t.editAll&&!t.editAll.firstChange&&this.isView&&(this.isUpdateView=!0)}submit(t=!1){if(0==this.groupId)return void this.warning("saveGeneralInfoFirst");let s=[],o=[];this.privilegesModuleContentComponents.forEach(n=>{s.push(...n.formCtrls.guiIds.value.map(u=>(o.push(u),{groupID:this.groupId,guI_ID:u})))}),0!=o.length?this.isGuisChanged(this.lastSavedGuis,o)&&(this.lastSavedGuis=o,this.showLoading(),this.groupsService.savePrivileges(s).subscribe(n=>{n?.message?.messageType==l.u.Success?(this.updateSuccessfullyMsg("groupPrivilegeUpdated"),t||(this.completed.emit(!0),this.router.navigate([`/user-management-setup/${this.moduleId}/groups`],{queryParams:this.pageParams}))):this.errorList(n?.message?.messages),this.hideLoading()})):this.warning("selectAtLeastOnePrivilege")}isGuisChanged(t,s){if(t.length!==s.length)return!0;const o=[...t].sort((u,J)=>u-J),n=[...s].sort((u,J)=>u-J);return o.some((u,J)=>u!=n[J])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(S.J))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-group-privileges"]],viewQuery:function(t,s){if(1&t&&(e.Gf(ne,5),e.Gf(ie,5)),2&t){let o;e.iGM(o=e.CRH())&&(s.privilegesModulesComponent=o.first),e.iGM(o=e.CRH())&&(s.privilegesModuleContentComponents=o)}},inputs:{isView:"isView",editAll:"editAll"},outputs:{completed:"completed"},features:[e.qOj,e.TTD],decls:3,vars:3,consts:[[3,"isView","isUpdateView","saveGuis"],["multi","",1,"section-card-with-expansion","privileges-modules-content"],[4,"ngFor","ngForOf"],[3,"module","isView","isUpdateView","saveGuis"]],template:function(t,s){1&t&&(e.TgZ(0,"app-add-group-privileges-modules",0),e.NdJ("saveGuis",function(){return s.submit(!0)}),e.qZA(),e.TgZ(1,"mat-accordion",1),e.YNc(2,at,2,3,"ng-container",2),e.qZA()),2&t&&(e.Q6J("isView",s.isView)("isUpdateView",s.isUpdateView),e.xp6(2),e.Q6J("ngForOf",null==s.privilegesModulesComponent?null:s.privilegesModulesComponent.selectedModules))},dependencies:[h.sg,F.pp,ne,ie]}),i})();var B=r(61064),R=r(52682),ae=r(20957),M=r(86257);function rt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",12),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.clearForm())}),e.qZA()}}let re=(()=>{class i extends g.U{constructor(t){super(),this.groupsService=t,this.groupId=0,this.completed=new e.vpe,this.closeAfterUpdate=new e.vpe,this.submitted=!1}ngOnInit(){this.form=this.fb.group({id:[this.groupId,{nonNullable:!0}],engName:[null,[p.kI.required]],arbName:[null,[p.kI.required]],engDescription:[null],arbDescription:[null]}),this.groupsService.group$.subscribe(t=>{t&&(this.groupId=t.id,this.group=t,this.form.patchValue(t))})}onChangeBusinessAndCompanyId(){this.groupId>0&&this.checkNoBusinessOrCompany()&&this.GetById()}get formCtrls(){return this.form.controls}submit(){if(this.submitted=!0,this.form.valid){const t={id:this.form.value.id,engName:this.form.value.engName,arbName:this.form.value.arbName,engDescription:this.form.value.engDescription,arbDescription:this.form.value.arbDescription};0==t.id?this.create(t):this.update(t)}}GetById(){this.group?this.form.patchValue(this.group):(this.showLoading(),this.groupsService.getById(this.groupId).subscribe(t=>{if(t.message.messageType==l.u.Success){let s=t.data[0];this.form.patchValue(s),s.uM_GUI_Group.map(o=>{o.moduleId=o.uM_GUI.uM_Services.moduleID}),s.groupedGuis=$.$.groupBy(s.uM_GUI_Group,"moduleId","moduleId","guis"),this.groupsService.setGroup(s)}else this.errorList(t?.message?.messages);this.hideLoading()}))}create(t){this.showLoading(),this.groupsService.create(t).subscribe(s=>{s?.message?.messageType==l.u.Success?(this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newGroupAdded"),this.groupId=s.data.id,this.formCtrls.id.setValue(s.data.id),this.navigateTo(`/user-management-setup/${this.moduleId}/groups/edit/${this.groupId}`),this.completed.emit(!0),this.GetById()):this.errorList(s?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this.groupsService.update(t).subscribe(s=>{s?.message?.messageType==l.u.Success?(this.updateSuccessfullyMsg("groupUpdated"),this.completed.emit(!0),this.closeAfterUpdate.emit(!0)):this.errorList(s?.message?.messages),this.hideLoading()})}clearForm(){this.form.reset(),this.submitted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(S.J))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-group-general-info"]],outputs:{completed:"completed",closeAfterUpdate:"closeAfterUpdate"},features:[e.qOj],decls:16,vars:13,consts:[[1,"container-fluid","mtop-40"],[1,"row"],[1,"col-12"],[3,"formGroup"],[1,"col-lg-3","col-md-6","col-12"],["label","en_Name",3,"control","submitted"],["label","ar_Name",3,"control","submitted"],["label","engDescription",3,"control","submitted"],["label","arbDescription",3,"control","submitted"],["align","end",1,"mb-0"],[3,"click",4,"ngIf"],["icon","pi pi-plus-circle",3,"id","color","iconPositionBefore","onClick"],[3,"click"]],template:function(t,s){1&t&&(e.TgZ(0,"mat-card-content",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",1)(5,"div",4),e._UZ(6,"app-input",5),e.qZA(),e.TgZ(7,"div",4),e._UZ(8,"app-input",6),e.qZA(),e.TgZ(9,"div",4),e._UZ(10,"app-input",7),e.qZA(),e.TgZ(11,"div",4),e._UZ(12,"app-input",8),e.qZA()()()()()(),e.TgZ(13,"mat-card-actions",9),e.YNc(14,rt,1,0,"reset-form-btn",10),e.TgZ(15,"submit-btn",11),e.NdJ("onClick",function(){return s.submit()}),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("formGroup",s.form),e.xp6(3),e.Q6J("control",s.formCtrls.engName)("submitted",s.submitted),e.xp6(2),e.Q6J("control",s.formCtrls.arbName)("submitted",s.submitted),e.xp6(2),e.Q6J("control",s.formCtrls.engDescription)("submitted",s.submitted),e.xp6(2),e.Q6J("control",s.formCtrls.arbDescription)("submitted",s.submitted),e.xp6(2),e.Q6J("ngIf",0==s.formCtrls.id.value),e.xp6(1),e.Q6J("id",s.formCtrls.id.value)("color",s.btn.darkBlue)("iconPositionBefore",!1))},dependencies:[h.O5,U.a,W.J,y.p,d.dn,d.hq,p._Y,p.JL,p.sg]}),i})();const lt=["stepper"];function dt(i,a){if(1&i&&e._UZ(0,"app-add-new-btn",3),2&i){const t=e.oxw();e.MGl("url","/user-management-setup/",t.moduleId,"/groups/add"),e.Q6J("params",t.parentParam)}}function pt(i,a){1&i&&e._UZ(0,"i",15)}function ut(i,a){1&i&&e._UZ(0,"i",15)}let le=(()=>{class i extends g.U{constructor(t){super(),this.groupsService=t,this.groupId=0,this.isloaded=!1,this.isGeneraCompleted=!1,this.isPrivilegeCompleted=!1,this.isEdit=!1}ngOnInit(){this.activatedRoute.paramMap.subscribe(t=>{this.groupId=Number(t.get("id"))??0,this.groupId>0&&(this.isEdit=!0)}),this.groupId>0&&this.checkNoBusinessOrCompany()?this.getGroupById():this.isloaded=!0}getGroupById(){this.showLoading(),this.groupsService.getById(this.groupId).subscribe(t=>{if(t.message.messageType==l.u.Success){let s=t.data[0];s.uM_GUI_Group.map(o=>{o.moduleId=o.uM_GUI.uM_Services.moduleID}),s.groupedGuis=$.$.groupBy(s.uM_GUI_Group,"moduleId","moduleId","guis"),this.groupsService.setGroup(s),this.isloaded=!0}else this.errorList(t?.message?.messages);this.hideLoading()})}stepChanged(){this.stepper.selected.interacted=!1}ngOnDestroy(){this.groupsService.setGroup(null)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(S.J))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-group-core"]],viewQuery:function(t,s){if(1&t&&(e.Gf(lt,5),e.Gf(j,5)),2&t){let o;e.iGM(o=e.CRH())&&(s.stepper=o.first),e.iGM(o=e.CRH())&&(s.addGroupPrivilegesComponent=o.first)}},features:[e.qOj],decls:27,vars:34,consts:[[1,"title-no-margin","title-section","fixed-title"],["addTitle","addgroup","editTitle","editgroup",3,"id","parentTitle","parentTitleLink","title","parentLinkParams"],[3,"url","params",4,"ngIf"],[3,"url","params"],[1,"clearfix"],[1,"has-fixed-title"],[3,"linear","disableRipple","selectionChange"],["stepper",""],[3,"label","completed"],["matStepperIcon","edit"],[1,"title-no-margin"],["title","generalInfo",1,"stepper-section-title"],[1,"mt-2"],[3,"completed"],[3,"stepper","parentParam","pageParams","returnAfterFinish","finish"],[1,"fas","fa-check"]],template:function(t,s){if(1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e.YNc(5,dt,1,2,"app-add-new-btn",2),e._UZ(6,"app-back-btn",3),e.qZA(),e._UZ(7,"div",4),e.TgZ(8,"mat-card-content",5)(9,"mat-stepper",6,7),e.NdJ("selectionChange",function(){return s.stepChanged()}),e.TgZ(11,"mat-step",8),e.ALo(12,"titlecase"),e.ALo(13,"translate"),e.YNc(14,pt,1,0,"ng-template",9),e.TgZ(15,"mat-card")(16,"mat-card-title",10),e._UZ(17,"page-title",11),e.qZA(),e._UZ(18,"mat-divider",12)(19,"div",4),e.TgZ(20,"app-add-group-general-info",13),e.NdJ("completed",function(n){return s.isGeneraCompleted=n}),e.qZA()()(),e.TgZ(21,"mat-step",8),e.ALo(22,"titlecase"),e.ALo(23,"translate"),e.YNc(24,ut,1,0,"ng-template",9),e.TgZ(25,"app-add-group-privileges",13),e.NdJ("completed",function(n){return s.isPrivilegeCompleted=n}),e.qZA()()()(),e.TgZ(26,"steps-footer",14),e.NdJ("finish",function(){return s.addGroupPrivilegesComponent.submit()}),e.qZA()),2&t){const o=e.MAs(10);e.xp6(1),e.cQ8("parentTitle","",e.lcZ(2,20,"settings")," / ",e.lcZ(3,22,"userManagementSetup")," / ",e.lcZ(4,24,"groups"),""),e.MGl("parentTitleLink","/user-management-setup/",s.moduleId,"/groups"),e.Q6J("id",s.isEdit?1:0)("title",s.isEdit?"edit":"add")("parentLinkParams",s.pageParams),e.xp6(4),e.Q6J("ngIf",s.groupId>0),e.xp6(1),e.MGl("url","/user-management-setup/",s.moduleId,"/groups/index"),e.Q6J("params",s.pageParams),e.xp6(3),e.Q6J("linear",!1)("disableRipple",!0),e.xp6(2),e.s9C("label",e.lcZ(12,26,e.lcZ(13,28,"generalInfo"))),e.Q6J("completed",s.isGeneraCompleted),e.xp6(10),e.s9C("label",e.lcZ(22,30,e.lcZ(23,32,"privilege"))),e.Q6J("completed",s.isPrivilegeCompleted),e.xp6(5),e.Q6J("stepper",o)("parentParam",s.parentParam)("pageParams",s.pageParams)("returnAfterFinish",!1)}},dependencies:[h.O5,B.a,R.J,_.T,ae.j,d.a8,d.dn,d.n5,Z.d,M.C0,M.Vq,M.z9,re,j,h.rS,T.X$]}),i})();var de=r(93665),pe=r(38368);function ct(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.isView=!1)}),e._UZ(1,"i",8),e.qZA()}}function mt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.isView=!0)}),e._UZ(1,"i",9),e.qZA()}}function gt(i,a){if(1&i&&(e.TgZ(0,"div",13),e._UZ(1,"app-view-data-row-item",14)(2,"app-view-data-row-item",15)(3,"app-view-data-row-item",16)(4,"app-view-data-row-item",17),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("value",null==t.group?null:t.group.engName),e.xp6(1),e.Q6J("value",null==t.group?null:t.group.arbName),e.xp6(1),e.Q6J("value",null==t.group?null:t.group.engDescription),e.xp6(1),e.Q6J("value",null==t.group?null:t.group.arbDescription)}}function ht(i,a){1&i&&e._UZ(0,"app-view-card-row-skeleton")}function ft(i,a){if(1&i&&(e.TgZ(0,"div",10),e.YNc(1,gt,5,4,"div",11),e.YNc(2,ht,1,0,"app-view-card-row-skeleton",12),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isLoaded),e.xp6(1),e.Q6J("ngIf",!t.isLoaded)}}function _t(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"app-add-group-general-info",18),e.NdJ("closeAfterUpdate",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.returnToView(o))}),e.qZA()}}let ue=(()=>{class i extends g.U{constructor(t,s){super(),this.groupsService=t,this.groupViewCoreComponent=s,this.editAll=!1,this.isView=!0,this.groupId=0,this.isLoaded=!1}ngOnInit(){this.groupsService.group$.subscribe(t=>{t&&(this.groupId=t.id,this.group=t),this.isLoaded=!0})}ngOnChanges(t){t?.editAll&&!t?.editAll?.firstChange&&(this.isView=!1)}returnToView(t){this.isView=!0,t&&this.groupViewCoreComponent.getGroupById()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(S.J),e.Y36(z))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-group-general-data-view"]],inputs:{editAll:"editAll"},features:[e.qOj,e.TTD],decls:10,vars:4,consts:[[1,"pb-0"],[1,"title-no-margin"],["title","generalInfo"],["mat-button","","class","float-right section-edit-btn pright-6 pleft-6 darkBlue",3,"click",4,"ngIf"],[1,"mt-2"],["class","mtop-30",4,"ngIf","ngIfElse"],["form",""],["mat-button","",1,"float-right","section-edit-btn","pright-6","pleft-6","darkBlue",3,"click"],[1,"fas","fa-pen","font-size-15"],[1,"ft-corner-up-left","font-size-18"],[1,"mtop-30"],["class","view-data-row-container",4,"ngIf"],[4,"ngIf"],[1,"view-data-row-container"],["label","en_Name",1,"col-md-3","col-6","mbottom-20","p-0",3,"value"],["label","ar_Name",1,"col-md-3","col-6","mbottom-20","p-0",3,"value"],["label","engDescription",1,"col-md-3","col-6","mbottom-20","p-0",3,"value"],["label","arbDescription",1,"col-md-3","col-6","mbottom-20","p-0",3,"value"],[3,"closeAfterUpdate"]],template:function(t,s){if(1&t&&(e.TgZ(0,"mat-card",0)(1,"mat-card-title",1),e._UZ(2,"page-title",2),e.YNc(3,ct,2,0,"button",3),e.YNc(4,mt,2,0,"button",3),e.qZA(),e._UZ(5,"mat-divider",4),e.TgZ(6,"mat-card-content"),e.YNc(7,ft,3,2,"div",5),e.YNc(8,_t,1,0,"ng-template",null,6,e.W1O),e.qZA()()),2&t){const o=e.MAs(9);e.xp6(3),e.Q6J("ngIf",s.isView),e.xp6(1),e.Q6J("ngIf",!s.isView),e.xp6(3),e.Q6J("ngIf",s.isView)("ngIfElse",o)}},dependencies:[h.O5,_.T,de.l,pe.I,O.lW,d.a8,d.dn,d.n5,Z.d,re]}),i})(),z=(()=>{class i extends g.U{constructor(t){super(),this.groupsService=t,this.editAll=!1}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.groupId=Number(t.id)??0})}onChangeBusinessAndCompanyId(){this.groupId>0&&this.checkNoBusinessOrCompany()&&this.getGroupById()}getGroupById(){this.showLoading(),this.groupsService.getById(this.groupId).subscribe(t=>{if(t.message.messageType==l.u.Success){let s=t.data[0];s.uM_GUI_Group.map(o=>{o.moduleId=o.uM_GUI.uM_Services?.moduleID}),s.groupedGuis=$.$.groupBy(s.uM_GUI_Group,"moduleId","moduleId","guis"),this.groupsService.setGroup(s),this.hideLoading()}else this.errorList(t?.message?.messages)})}editAllSections(){this.editAll=!this.editAll}ngOnDestroy(){this.groupsService.setGroup(null)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(S.J))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-group-view-core"]],viewQuery:function(t,s){if(1&t&&e.Gf(ue,5),2&t){let o;e.iGM(o=e.CRH())&&(s.generalInfoComponent=o.first)}},features:[e.qOj],decls:14,vars:21,consts:[[1,"title-no-margin","title-section","fixed-title"],[3,"title","parentTitle","parentTitleLink","parentLinkParams"],[3,"click"],[3,"url","params"],[1,"mtop-20"],[3,"editAll"],[3,"editAll","isView"],[3,"isView","groupId"]],template:function(t,s){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ALo(4,"translate"),e.TgZ(5,"edit-all-btn",2),e.NdJ("click",function(){return s.editAllSections()}),e.qZA(),e._UZ(6,"app-add-new-btn",3)(7,"app-back-btn",3),e.qZA(),e.TgZ(8,"div",4),e._UZ(9,"app-group-general-data-view",5),e.qZA(),e.TgZ(10,"div",4),e._UZ(11,"app-add-group-privileges",6),e.qZA(),e.TgZ(12,"div",4),e._UZ(13,"app-group-user-companies",7),e.qZA()),2&t&&(e.xp6(1),e.cQ8("parentTitle","",e.lcZ(2,15,"settings")," / ",e.lcZ(3,17,"userManagementSetup")," / ",e.lcZ(4,19,"groups"),""),e.MGl("parentTitleLink","/user-management-setup/",s.moduleId,"/groups"),e.Q6J("title",s.msgTranslate(null==s.generalInfoComponent||null==s.generalInfoComponent.group?null:s.generalInfoComponent.group.arbName,null==s.generalInfoComponent||null==s.generalInfoComponent.group?null:s.generalInfoComponent.group.engName))("parentLinkParams",s.pageParams),e.xp6(5),e.MGl("url","/user-management-setup/",s.moduleId,"/groups/add"),e.Q6J("params",s.parentParam),e.xp6(1),e.MGl("url","/user-management-setup/",s.moduleId,"/groups/index"),e.Q6J("params",s.pageParams),e.xp6(2),e.Q6J("editAll",!s.editAll),e.xp6(2),e.Q6J("editAll",!s.editAll)("isView",!0),e.xp6(2),e.Q6J("isView",!0)("groupId",s.groupId))}}),i})(),vt=(()=>{class i extends E.K{constructor(){super()}StartAllJobs(){return this.get("GeneralSetup/JobSchedual/StartAllJobs",{params:{GroupOfJob:"group1"}})}pauseAllJobs(){return this.get("GeneralSetup/JobSchedual/pauseAllJobs",{params:{GroupOfJob:"group1"}})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var ce=r(90811);let Ct=(()=>{class i extends g.U{constructor(t){super(),this.SelfServicesService=t}StartAllJobs(){this.showLoading(),this.SelfServicesService.StartAllJobs().subscribe(t=>{t?.message?.messageType==l.u.Success?this.addSuccessfullyMsg("allJobsStarted","successfulStarted"):this.errorList(t?.message?.messages),this.hideLoading()})}pauseAllJobs(){this.showLoading(),this.SelfServicesService.pauseAllJobs().subscribe(t=>{t?.message?.messageType==l.u.Success?this.addSuccessfullyMsg("allJobsStarted","successfulStarted"):this.errorList(t?.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(vt))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-self-services-notification"]],features:[e.qOj],decls:19,vars:16,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","selfService_notification",3,"parentTitle"],[1,"mt-3"],[1,"title-no-margin","has-fixed-title"],["title","jobsControls",1,"stepper-section-title"],[1,"mt-2"],[1,"clearfix"],[1,"mt-4"],[1,"row","justify-content-center"],[1,"col-12","col-md-4","col-lg-3"],["name","fontStyle","aria-label","Font Style"],[3,"click"]],template:function(t,s){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-card",2)(5,"mat-card-title",3),e._UZ(6,"page-title",4),e.qZA(),e._UZ(7,"mat-divider",5)(8,"div",6),e.TgZ(9,"mat-card-content",7)(10,"div",8)(11,"div",9)(12,"mat-button-toggle-group",10)(13,"mat-button-toggle",11),e.NdJ("click",function(){return s.StartAllJobs()}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"mat-button-toggle",11),e.NdJ("click",function(){return s.pauseAllJobs()}),e._uU(17),e.ALo(18,"translate"),e.qZA()()()()()()),2&t&&(e.xp6(1),e.hYB("parentTitle","",e.lcZ(2,8,"settings")," / ",e.lcZ(3,10,"userManagementSetup"),""),e.xp6(12),e.Tol(s.btn.darkBlue),e.xp6(1),e.hij(" ",e.lcZ(15,12,"start")," "),e.xp6(2),e.Tol(s.btn.danger),e.xp6(1),e.hij(" ",e.lcZ(18,14,"pause")," "))},dependencies:[_.T,ce.A9,ce.Yi,d.a8,d.dn,d.n5,Z.d,T.X$],styles:["mat-button-toggle[_ngcontent-%COMP%]{padding:0 40px!important;cursor:pointer}"]}),i})();var bt=r(16841),wt=r(82666);let It=(()=>{class i extends g.U{constructor(t){super(),this.notificationService=t,this.isView=!1,this.editAll=!1,this.completed=new e.vpe,this.notificationId=0,this.submitted=!1}ngOnInit(){this.activatedRoute.paramMap.subscribe(t=>{this.notificationId=Number(t.get("PersonalId"))??0}),this.form=this.fb.group({id:[0,{nonNallable:!0}],ar_Name:[null,[p.kI.required]],en_Name:[null,[p.kI.required]],groupID:[null,[p.kI.required]],User_IDs:[[],[p.kI.required]]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&this.notificationId>0&&this.getAll()}submit(){if(this.submitted=!0,this.form.valid){const t={comm_NotificationSetup:{id:this.formCtrls.id.value,ar_Name:this.formCtrls.ar_Name.value,en_Name:this.formCtrls.en_Name.value,groupID:this.formCtrls.groupID.value},usersNotificationSetup:this.formCtrls.User_IDs.value?.map(s=>({User_ID:s}))};console.log("model",t),0==t.comm_NotificationSetup.id?this.create(t):this.update(t)}}create(t){this.showLoading(),this.notificationService.Create(t).subscribe(s=>{s?.message?.messageType==l.u.Success?(this.notificationId=s.data.comm_NotificationSetup.id,this.formCtrls.id.setValue(s.data.comm_NotificationSetup.id),this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newPersonalNotificationAdded"),this.navigateTo(`/user-management-setup/${this.moduleId}/groups/edit/${this.notificationId}`),this.completed.emit(!0),this.getAll()):this.errorList(s?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this.notificationService.Edit(t).subscribe(s=>{s.message.messageType==l.u.Success?(this.updateSuccessfullyMsg("personalNotificationUpdated"),this.completed.emit(!0),this.getAll()):this.errorList(s?.message?.messages),this.hideLoading()})}getAll(){this.showLoading(),this.notificationService.GetAll_withUsers(this.notificationId).subscribe(t=>{t.message.messageType==l.u.Success?(this.notificationService.notification$.next(t.data),this.form.patchValue(t.data?.comm_NotificationSetup),this.formCtrls.User_IDs.setValue(t.data?.usersNotificationSetup.map(s=>s.user_ID))):this.errorList(t?.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Q.p))},i.\u0275cmp=e.Xpm({type:i,selectors:[["add-personal-notification-general"]],inputs:{isView:"isView",editAll:"editAll"},outputs:{completed:"completed"},features:[e.qOj],decls:13,vars:11,consts:[[1,"container-fluid","mt-4"],[3,"formGroup"],[1,"row"],[1,"col-md-3","col-12"],["label","ar_Name",3,"submitted","control"],["label","en_Name",3,"submitted","control"],[3,"control","multi","submitted"],[3,"control","submitted"],["align","end"],[3,"id","onClick"]],template:function(t,s){1&t&&(e.TgZ(0,"mat-card-content",0)(1,"form",1)(2,"div",2)(3,"div",3),e._UZ(4,"app-input",4),e.qZA(),e.TgZ(5,"div",3),e._UZ(6,"app-input",5),e.qZA(),e.TgZ(7,"div",3),e._UZ(8,"app-users-dropdown",6),e.qZA(),e.TgZ(9,"div",3),e._UZ(10,"group-notification-dropdown",7),e.qZA()()()(),e.TgZ(11,"mat-card-actions",8)(12,"submit-btn",9),e.NdJ("onClick",function(){return s.submit()}),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("formGroup",s.form),e.xp6(3),e.Q6J("submitted",s.submitted)("control",s.formCtrls.ar_Name),e.xp6(2),e.Q6J("submitted",s.submitted)("control",s.formCtrls.en_Name),e.xp6(2),e.Q6J("control",s.formCtrls.User_IDs)("multi",!0)("submitted",s.submitted),e.xp6(2),e.Q6J("control",s.formCtrls.groupID)("submitted",s.submitted),e.xp6(2),e.Q6J("id",s.formCtrls.id.value))},dependencies:[U.a,y.p,d.dn,d.hq,bt.$,wt.P,p._Y,p.JL,p.sg]}),i})();var me=r(43949),Y=(()=>(function(i){i[i.Status=1]="Status",i[i.LostAttachments=2]="LostAttachments",i[i.RenewIdentity=3]="RenewIdentity",i[i.RenewContracts=8]="RenewContracts",i[i.Military_status=10]="Military_status",i[i.Custom=12]="Custom",i[i.Attendance=13]="Attendance"}(Y||(Y={})),Y))(),yt=r(23215),At=r(71510),St=r(68506),Tt=r(19634),Zt=r(99892),Nt=r(17288),Gt=r(62982),Ut=r(4461),xt=r(14621);function Mt(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",3)(2,"app-job-status-dropdown",12),e.NdJ("change",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.onChangeStatus(o))}),e.qZA()(),e.TgZ(3,"div",3),e._UZ(4,"app-prime-dropdown",13),e.qZA(),e.TgZ(5,"div",3),e._UZ(6,"app-input",14),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("control",t.formCtrls.status)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.propertyStatusObjectID)("submitted",t.submitted)("List",t.status_Properties)("disable",!t.formCtrls.status.value),e.xp6(2),e.Q6J("submitted",t.submitted)("control",t.formCtrls.duration)("type",t.inputType.number)}}function Lt(i,a){if(1&i&&(e.TgZ(0,"div",3),e._UZ(1,"UM-renew-identity-dropdown",15),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("control",t.formCtrls.renew_identity)("submitted",t.submitted)}}function Pt(i,a){if(1&i&&(e.TgZ(0,"div",3),e._UZ(1,"lost-attachments-dropdown",15),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("control",t.formCtrls.lost_attachments)("submitted",t.submitted)}}function Jt(i,a){if(1&i&&(e.TgZ(0,"div",3),e._UZ(1,"app-military-status-dropdown",16),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("submitted",t.submitted)("control",t.formCtrls.military_status)}}function Vt(i,a){if(1&i&&(e.TgZ(0,"div",3),e._UZ(1,"app-contract-type-dropdown",16),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("submitted",t.submitted)("control",t.formCtrls.contract_type)}}function Dt(i,a){if(1&i&&(e.TgZ(0,"div",3),e._UZ(1,"app-input",17),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("submitted",t.submitted)("control",t.formCtrls.day)("type",t.inputType.number)}}function Qt(i,a){if(1&i&&(e.TgZ(0,"div",3),e._UZ(1,"app-input",18),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("submitted",t.submitted)("control",t.formCtrls.cronExpression)}}function kt(i,a){if(1&i&&(e.TgZ(0,"div",19),e._UZ(1,"app-check-box",20),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("control",t.formCtrls.transfer_penalties)}}function qt(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"div",3),e._UZ(2,"app-input",21),e.qZA(),e.TgZ(3,"div",3),e._UZ(4,"app-input",22),e.qZA(),e.TgZ(5,"div",23),e._UZ(6,"app-textarea",24),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("submitted",t.submitted)("control",t.formCtrls.ar_Name),e.xp6(2),e.Q6J("submitted",t.submitted)("control",t.formCtrls.en_Name),e.xp6(2),e.Q6J("submitted",t.submitted)("control",t.formCtrls.query)}}let Ot=(()=>{class i extends g.U{constructor(t,s){super(),this.notificationDetails=t,this.notificationService=s,this.notificationId=0,this.submitted=!1,this.mandatoryColomns=["Ser","notificationType","actions"],this.isLoaded=!1,this.optionalColomns=[],this.type=Y,this.displayInputs={show_day:!1,show_cronExpression:!1,show_status:!1,show_renew_identity:!1,show_lost_attachments:!1,show_query:!1,show_transfer_penalties:!1,show_Military_status:!1,show_RenewContracts:!1},s.notification$.subscribe(o=>{o?.comm_NotificationSetup?.id>0&&(this.notification=o.comm_NotificationSetup,this.notificationId=o?.comm_NotificationSetup?.id,this.dataSource&&this.dataSource.data.map(n=>n.notificationType=(0,f._f)(this.notification.comm_GroupNotificationSetup?.ar_Name,this.notification.comm_GroupNotificationSetup?.en_Name)),this.checkNoBusinessOrCompany()&&this.getAll())})}ngOnInit(){this.form=this.fb.group({typeID:[null,[p.kI.required]],day:[null,[me.dN.gt(0)]],duration:[null,[me.dN.gt(0)]],cronExpression:[null],status:[null],propertyStatusObjectID:[null],renew_identity:[null],lost_attachments:[null],ar_Name:[null],en_Name:[null],query:[null],transfer_penalties:[!1],military_status:[null],contract_type:[null]}),this.formCtrls.typeID.valueChanges.subscribe(t=>this.getInputs(t))}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&this.notificationId>0&&this.getAll()}getAll(){this.notificationDetails.getAll(this.notificationId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==l.u.Success?(t.data.map(s=>s.notificationType=(0,f._f)(this.notification.comm_GroupNotificationSetup?.ar_Name,this.notification.comm_GroupNotificationSetup?.en_Name)),this.dataSource=new c.by(t.data),this.isLoaded=!0):this.errorList(t?.message?.messages)})}submit(){if(this.submitted=!0,this.form.valid){const t={details:{notificationSetupID:this.notificationId,notificationTypeID:this.formCtrls.typeID.value,objectID:this.getObject(this.formCtrls.typeID.value),days:this.formCtrls.day.value,propertyStatusObjectID:this.formCtrls.propertyStatusObjectID.value,cronExpersion:this.formCtrls.cronExpression.value,monthsDuration:this.formCtrls.duration.value,custom_Query:this.formCtrls.query.value,ar_Name:this.formCtrls.ar_Name.value,en_Name:this.formCtrls.en_Name.value},groupID:this.notification.groupID,toBeTransfered:this.formCtrls.transfer_penalties.value};this.create(t)}}getObject(t){return t==this.type.Status?this.formCtrls.status.value:t==this.type.RenewIdentity?this.formCtrls.renew_identity.value:t==this.type.LostAttachments?this.formCtrls.lost_attachments.value:t==this.type.RenewContracts?this.formCtrls.contract_type.value:t==this.type.Military_status?this.formCtrls.military_status.value:void 0}create(t){this.showLoading(),this.notificationDetails.create(t).subscribe(s=>{s?.message?.messageType==l.u.Success?(this.addSuccessfullyMsg("newNotificationDetailsAdded"),this.form.reset(),this.getAll()):this.errorList(s?.message?.messages),this.hideLoading()})}onDelete(t){let s=this.msgTranslate(t.ar_Name,t.en_Name);this.deleteDialog(s).subscribe(o=>{o&&this.delete(t)})}delete(t){this.showLoading(),this.notificationDetails.Delete(t.id).subscribe(s=>{s.message.messageType==l.u.Success?(this.getAll(),this.deleteSuccessfullyMsg("notificationDetailsRemoved")):this.errorList(s?.message?.messages),this.hideLoading()})}Pause(t){this.showLoading(),this.notificationDetails.Pause(t.id).subscribe(s=>{s.message.messageType==l.u.Success?(this.getAll(),this.success("notificationDetailsPaused",s.message.messageTypeName)):this.errorList(s?.message?.messages),this.hideLoading()})}UnPause(t){this.showLoading(),this.notificationDetails.UnPause(t.id).subscribe(s=>{s.message.messageType==l.u.Success?(this.getAll(),this.success("notificationDetailsResumed",s.message.messageTypeName)):this.errorList(s?.message?.messages),this.hideLoading()})}onClickRowActions(t){if("pause"==t.fun.name){let s=(0,f._f)("pause"),o=`${(0,f._f)("pause")} ${(0,f._f)(t.data.ar_Name,t.data.en_Name)}?`;this.confirmDialog({msg:o,title:s,btn:s}).subscribe(n=>{n&&this.Pause(t.data)})}if("resumed"==t.fun.name){let s=(0,f._f)("resumed"),o=`${(0,f._f)("resumed")} ${(0,f._f)(t.data.ar_Name,t.data.en_Name)}?`;this.confirmDialog({msg:o,title:s,btn:s}).subscribe(n=>{n&&this.UnPause(t.data)})}}onChangeStatus(t){this.status_Properties=t[0]?.core_Status_Properties}getInputs(t){Object.keys(this.displayInputs).forEach(s=>{this.displayInputs[s]=!1}),t===this.type.Status?(this.displayInputs.show_status=!0,this.displayInputs.show_day=!0):t===this.type.RenewIdentity?(this.displayInputs.show_renew_identity=!0,this.displayInputs.show_day=!0):t===this.type.LostAttachments?(this.displayInputs.show_lost_attachments=!0,this.displayInputs.show_cronExpression=!0):t===this.type.Attendance?(this.displayInputs.show_cronExpression=!0,this.displayInputs.show_transfer_penalties=!0):t===this.type.Custom?this.displayInputs.show_query=!0:t===this.type.Military_status?(this.displayInputs.show_Military_status=!0,this.displayInputs.show_day=!0,this.displayInputs.show_cronExpression=!0):t===this.type.RenewContracts?(this.displayInputs.show_RenewContracts=!0,this.displayInputs.show_cronExpression=!0):null!=t&&(this.displayInputs.show_cronExpression=!0)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(yt.H),e.Y36(Q.p))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-notification-details"]],features:[e.qOj],decls:18,vars:18,consts:[[1,"container-fluid","mt-4"],[3,"formGroup"],[1,"row"],[1,"col-md-3","col-12"],[3,"submitted","control","groupId"],[4,"ngIf"],["class","col-md-3 col-12",4,"ngIf"],["class","col-md-4 col-12 mb-2",4,"ngIf"],["align","end"],[3,"onClick"],[1,"mt-2"],[3,"isLoaded","mandatoryColomns","page","actions","dataSource","onClickRowActions","deleteRow"],[3,"control","submitted","change"],["label","statusProperty",3,"control","submitted","List","disable"],["label","duration_by_month",3,"submitted","control","type"],[3,"control","submitted"],[3,"submitted","control"],["label","day",3,"submitted","control","type"],["label","cronExpression",3,"submitted","control"],[1,"col-md-4","col-12","mb-2"],["label","transfer_penalties","color","primary","labelPosition","before","styleClass","margin-17 justify-content-around",3,"control"],["label","ar_Name",3,"submitted","control"],["label","en_Name",3,"submitted","control"],[1,"col-md-6","col-12"],["label","query",3,"submitted","control"]],template:function(t,s){1&t&&(e.TgZ(0,"mat-card-content",0)(1,"form",1)(2,"div",2)(3,"div",3),e._UZ(4,"notification-type-dropdown",4),e.qZA(),e.YNc(5,Mt,7,9,"ng-container",5),e.YNc(6,Lt,2,2,"div",6),e.YNc(7,Pt,2,2,"div",6),e.YNc(8,Jt,2,2,"div",6),e.YNc(9,Vt,2,2,"div",6),e.YNc(10,Dt,2,3,"div",6),e.YNc(11,Qt,2,2,"div",6),e.YNc(12,kt,2,1,"div",7),e.YNc(13,qt,7,6,"ng-container",5),e.qZA()()(),e.TgZ(14,"mat-card-actions",8)(15,"submit-btn",9),e.NdJ("onClick",function(){return s.submit()}),e.qZA()(),e._UZ(16,"mat-divider",10),e.TgZ(17,"app-material-table",11),e.NdJ("onClickRowActions",function(n){return s.onClickRowActions(n)})("deleteRow",function(n){return s.onDelete(n)}),e.qZA()),2&t&&(e.xp6(1),e.Q6J("formGroup",s.form),e.xp6(3),e.Q6J("submitted",s.submitted)("control",s.formCtrls.typeID)("groupId",null==s.notification?null:s.notification.groupID),e.xp6(1),e.Q6J("ngIf",s.displayInputs.show_status),e.xp6(1),e.Q6J("ngIf",s.displayInputs.show_renew_identity),e.xp6(1),e.Q6J("ngIf",s.displayInputs.show_lost_attachments),e.xp6(1),e.Q6J("ngIf",s.displayInputs.show_Military_status),e.xp6(1),e.Q6J("ngIf",s.displayInputs.show_RenewContracts),e.xp6(1),e.Q6J("ngIf",s.displayInputs.show_day),e.xp6(1),e.Q6J("ngIf",s.displayInputs.show_cronExpression),e.xp6(1),e.Q6J("ngIf",s.displayInputs.show_transfer_penalties),e.xp6(1),e.Q6J("ngIf",s.displayInputs.show_query),e.xp6(4),e.Q6J("isLoaded",s.isLoaded)("mandatoryColomns",s.mandatoryColomns)("page",s.page)("actions",s.rowFunctions)("dataSource",s.dataSource))},dependencies:[h.O5,U.a,At.R,x.I,V.u,y.p,d.dn,d.hq,Z.d,St.t,Tt.e,Zt.P,Nt.c,Gt.G,Ut.p,xt.q,p._Y,p.JL,p.sg]}),i})();const Ft=["stepper"];function Bt(i,a){if(1&i&&e._UZ(0,"app-add-new-btn",3),2&i){const t=e.oxw();e.MGl("url","/user-management-setup/",t.moduleId,"/personal-notification/add"),e.Q6J("params",t.parentParam)}}function Rt(i,a){1&i&&e._UZ(0,"i",16)}function Yt(i,a){1&i&&e._UZ(0,"i",16)}let ge=(()=>{class i extends g.U{constructor(t){super(),this.notificationService=t,this.notificationId=0,this.step1Complete=!1,this.activatedRoute.params.subscribe(s=>{this.notificationId=Number(s.id??0),this.notificationId>0&&(this.isEdit=!0)}),t.notification$.subscribe(s=>{s?.comm_NotificationSetup?.id>0&&s?.comm_NotificationSetup?.id!==this.notificationId&&(this.notificationId=s?.comm_NotificationSetup?.id,this.notificationId>0&&(this.isEdit=!0))})}stepChanged(){this.stepper.selected.interacted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Q.p))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-person-notification-core"]],viewQuery:function(t,s){if(1&t&&e.Gf(Ft,5),2&t){let o;e.iGM(o=e.CRH())&&(s.stepper=o.first)}},features:[e.qOj],decls:31,vars:29,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","personal_notification",3,"parentTitle","parentTitleLink","parentLinkParams"],[3,"url","params",4,"ngIf"],[3,"url","params"],[1,"has-fixed-title"],[3,"linear","disableRipple","selectionChange"],["stepper",""],[3,"label","completed"],["matStepperIcon","edit"],[1,"title-no-margin"],["title","generalInfo",1,"stepper-section-title"],[1,"mt-2"],[1,"clearfix"],[3,"completed"],["title","notification_details",1,"stepper-section-title"],[3,"stepper","parentParam","url","pageParams"],[1,"fas","fa-check"]],template:function(t,s){if(1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ynx(4),e.YNc(5,Bt,1,2,"app-add-new-btn",2),e._UZ(6,"app-back-btn",3),e.BQk(),e.qZA(),e.TgZ(7,"mat-card-content",4)(8,"mat-stepper",5,6),e.NdJ("selectionChange",function(){return s.stepChanged()}),e.TgZ(10,"mat-step",7),e.ALo(11,"titlecase"),e.ALo(12,"translate"),e.YNc(13,Rt,1,0,"ng-template",8),e.TgZ(14,"mat-card")(15,"mat-card-title",9),e._UZ(16,"page-title",10),e.qZA(),e._UZ(17,"mat-divider",11)(18,"div",12),e.TgZ(19,"add-personal-notification-general",13),e.NdJ("completed",function(n){return s.step1Complete=n}),e.qZA()()(),e.TgZ(20,"mat-step",7),e.ALo(21,"titlecase"),e.ALo(22,"translate"),e.YNc(23,Yt,1,0,"ng-template",8),e.TgZ(24,"mat-card")(25,"mat-card-title",9),e._UZ(26,"page-title",14),e.qZA(),e._UZ(27,"mat-divider",11)(28,"div",12)(29,"app-notification-details"),e.qZA()()()(),e._UZ(30,"steps-footer",15)),2&t){const o=e.MAs(9);e.xp6(1),e.hYB("parentTitle","",e.lcZ(2,17,"settings")," / ",e.lcZ(3,19,"userManagementSetup"),""),e.MGl("parentTitleLink","/user-management-setup/",s.moduleId,"/personal-notification"),e.Q6J("parentLinkParams",s.pageParams),e.xp6(4),e.Q6J("ngIf",s.notificationId>0),e.xp6(1),e.MGl("url","/user-management-setup/",s.moduleId,"/personal-notification"),e.Q6J("params",s.pageParams),e.xp6(2),e.Q6J("linear",!1)("disableRipple",!0),e.xp6(2),e.s9C("label",e.lcZ(11,21,e.lcZ(12,23,"generalInfo"))),e.Q6J("completed",s.step1Complete),e.xp6(10),e.s9C("label",e.lcZ(21,25,e.lcZ(22,27,"notification_details"))),e.Q6J("completed",s.step1Complete),e.xp6(10),e.MGl("url","/user-management-setup/",s.moduleId,"/personal-notification"),e.Q6J("stepper",o)("parentParam",s.parentParam)("pageParams",s.pageParams)}},dependencies:[h.O5,B.a,R.J,_.T,ae.j,d.a8,d.dn,d.n5,Z.d,M.C0,M.Vq,M.z9,It,Ot,h.rS,T.X$]}),i})();const Et=[{path:"activation-setup",component:fe,data:{view:m.S.activation_setup},canActivate:[v.r]},{path:"attachment-types",component:Le,data:{view:m.S.attachment_types},canActivate:[v.r]},{path:"users",children:[{path:"",redirectTo:"index",pathMatch:I.U.full},{path:"index",component:Ue,data:{view:m.S.users_index},canActivate:[v.r]},{path:"add",component:ee.J,data:{view:m.S.add_user},canActivate:[v.r]},{path:"edit/:userId",component:ee.J,data:{view:m.S.add_user},canActivate:[v.r]},{path:"view/:userId",component:H,data:{view:m.S.add_user},canActivate:[v.r]}]},{path:"personal-notification",children:[{path:"",redirectTo:"index",pathMatch:I.U.full},{path:"index",component:Ze,data:{view:m.S.personal_notification_index},canActivate:[v.r]},{path:"add",component:ge,data:{view:m.S.add_personal_notification},canActivate:[v.r]},{path:"edit/:PersonalId",component:ge,data:{view:m.S.add_personal_notification},canActivate:[v.r]}]},{path:"selfServices-notification",component:Ct,data:{view:m.S.selfServices_notification},canActivate:[v.r]},{path:"iso-code",component:Te,data:{view:m.S.iso_code},canActivate:[v.r]},{path:"company-code",component:Ce,data:{view:m.S.company_code},canActivate:[v.r]},{path:"groups",children:[{path:"",redirectTo:"index",pathMatch:I.U.full},{path:"index",component:Ie,data:{view:m.S.groups_index},canActivate:[v.r]},{path:"add",component:le,data:{view:m.S.add_group},canActivate:[v.r]},{path:"edit/:id",component:le,data:{view:m.S.add_group},canActivate:[v.r]},{path:"view/:id",component:z,data:{view:m.S.add_group},canActivate:[v.r]}]}];let Ht=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[C.Bz.forChild(Et),C.Bz]}),i})();var $t=r(20643);function jt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.isView=!1)}),e._UZ(1,"i",8),e.qZA()}}function zt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.isView=!0)}),e._UZ(1,"i",9),e.qZA()}}function Xt(i,a){if(1&i&&(e.TgZ(0,"div",13),e._UZ(1,"app-view-data-row-item",14)(2,"app-view-data-row-item",15)(3,"app-view-data-row-item",16)(4,"app-view-data-row-item",17),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("value",null==t.user.uM_Users?null:t.user.uM_Users.name),e.xp6(1),e.Q6J("value",null==t.user.uM_Users?null:t.user.uM_Users.passWord)("isPassword",!0),e.xp6(1),e.s9C("customValue",null!=t.user.uM_Users&&t.user.uM_Users.is_Active?"active":"notActive"),e.Q6J("value",null==t.user.uM_Users?null:t.user.uM_Users.is_Active)("isBool",!0),e.xp6(1),e.Q6J("value",t.msgTranslate(null==t.user.core_Person_Instance||null==t.user.core_Person_Instance.core_Person?null:t.user.core_Person_Instance.core_Person.ar_Name,null==t.user.core_Person_Instance||null==t.user.core_Person_Instance.core_Person?null:t.user.core_Person_Instance.core_Person.en_Name))}}function Kt(i,a){1&i&&e._UZ(0,"app-view-card-row-skeleton")}function Wt(i,a){if(1&i&&(e.TgZ(0,"section",10),e.YNc(1,Xt,5,7,"div",11),e.YNc(2,Kt,1,0,"app-view-card-row-skeleton",12),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isLoaded),e.xp6(1),e.Q6J("ngIf",!t.isLoaded)}}function es(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"user-general-data",18),e.NdJ("closeAfterUpdate",function(o){e.CHM(t);const n=e.oxw();return e.KtG(n.returnToView(o))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("user",t.user)}}let ts=(()=>{class i extends g.U{constructor(t,s){super(),this.userService=t,this.viewUserCoreComponent=s,this.userName=new e.vpe,this.isView=!0,this.isLoaded=!1,this.userGroupsIds=[]}ngOnInit(){this.userService.user$.subscribe(t=>{this.user=t,this.isLoaded=!!this.user?.uM_Users})}returnToView(t){this.isView=!0,t&&this.viewUserCoreComponent.getUserById()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(k.f),e.Y36(H))},i.\u0275cmp=e.Xpm({type:i,selectors:[["user-general-info-view"]],inputs:{userId:"userId"},outputs:{userName:"userName"},features:[e.qOj],decls:10,vars:4,consts:[[1,"mtop-18"],[1,"title-no-margin"],["title","generalInfo",1,"stepper-section-title"],["mat-button","","class","float-right section-edit-btn pright-6 pleft-6 darkBlue",3,"click",4,"ngIf"],[1,"mt-2"],["class","mtop-30",4,"ngIf","ngIfElse"],["form",""],["mat-button","",1,"float-right","section-edit-btn","pright-6","pleft-6","darkBlue",3,"click"],[1,"fas","fa-pen","font-size-15"],[1,"ft-corner-up-left","font-size-18"],[1,"mtop-30"],["class","view-data-row-container",4,"ngIf"],[4,"ngIf"],[1,"view-data-row-container"],["label","user",1,"col-lg-2","col-md-3","col-sm-4","col-6","mbottom-20","p-0",3,"value"],["label","password",1,"col-lg-3","col-md-3","col-sm-4","col-6","mbottom-20","p-0",3,"value","isPassword"],["label","status",1,"col-lg-2","col-md-3","col-sm-4","col-6","mbottom-20","p-0","status",3,"value","isBool","customValue"],["label","employee",1,"col-lg-4","col-md-6","col-sm-6","col-12","mbottom-20","p-0",3,"value"],[3,"user","closeAfterUpdate"]],template:function(t,s){if(1&t&&(e.TgZ(0,"mat-card",0)(1,"mat-card-title",1),e._UZ(2,"page-title",2),e.YNc(3,jt,2,0,"button",3),e.YNc(4,zt,2,0,"button",3),e.qZA(),e._UZ(5,"mat-divider",4),e.TgZ(6,"mat-card-content"),e.YNc(7,Wt,3,2,"section",5),e.YNc(8,es,1,1,"ng-template",null,6,e.W1O),e.qZA()()),2&t){const o=e.MAs(9);e.xp6(3),e.Q6J("ngIf",s.isView),e.xp6(1),e.Q6J("ngIf",!s.isView),e.xp6(3),e.Q6J("ngIf",s.isView)("ngIfElse",o)}},dependencies:[h.O5,_.T,de.l,pe.I,O.lW,d.a8,d.dn,d.n5,Z.d,$t.D]}),i})();var ss=r(57102);const is=function(){return[]};let os=(()=>{class i extends g.U{constructor(t,s){super(),this.userService=t,this.groupsService=s,this.isView=!1,this.mandatoryColomns=["userName","employeeName","jobTitleName","status","companiesMapped","actions"],this.cellWithHoverList=[{col:"companiesMapped",hoverProperty:"hoverCompanies",checkProperty:"showHover"}],this.isLoaded=!1}ngOnInit(){}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&this.groupId>0&&this.getGroupUserCompanies(this.firstPage)}onModulesChanged(){}getGroupUserCompanies(t,s){this.dataSource=new c.by(null),this.isLoaded=!1,this.page.pageIndex=t,s&&(this.page.pageSize=s),this.userService.getGroupUserCompanies(this.groupId,{PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==l.u.Success?(this.dataSource=new c.by((0,te.z_)(n.data,this.languageService)),this.isLoaded=!0,this.page.length=n.meta.totalItemCount,this.page.meta=n.meta):this.errorList(n?.message?.messages)})}onDelete(t){this.deleteDialog(`${t.userName} - ${t.employeeName}`).subscribe(o=>{o&&this.delete(t)})}delete(t){this.showLoading(),this.groupsService.Delete([{UserID:t.userId,GroupID:this.groupId}]).subscribe(o=>{o.message.messageType==l.u.Success?(this.getGroupUserCompanies(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),this.deleteSuccessfullyMsg("userRemovedFromGroup")):this.errorList(o?.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(k.f),e.Y36(ss.i))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-group-user-companies"]],inputs:{groupId:"groupId",isView:"isView"},features:[e.qOj],decls:7,vars:8,consts:[[1,"index-card"],[1,"title-no-margin","border-0"],["title","users"],[1,"mt-2"],[1,"clearfix"],[3,"isLoaded","dataSource","page","mandatoryColomns","optionalColomns","actions","cellWithDifferentHoverList","onChangePage","deleteRow"]],template:function(t,s){1&t&&(e.TgZ(0,"mat-card",0)(1,"mat-card-title",1),e._UZ(2,"page-title",2),e.qZA(),e._UZ(3,"mat-divider",3)(4,"div",4),e.TgZ(5,"mat-card-content")(6,"app-material-table",5),e.NdJ("onChangePage",function(n){return s.getGroupUserCompanies(n.pageIndex+1,n.pageSize)})("deleteRow",function(n){return s.onDelete(n)}),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("isLoaded",s.isLoaded)("dataSource",s.dataSource)("page",s.page)("mandatoryColomns",s.mandatoryColomns)("optionalColomns",e.DdM(7,is))("actions",s.rowFunctions)("cellWithDifferentHoverList",s.cellWithHoverList))},dependencies:[x.I,_.T,d.a8,d.dn,d.n5,Z.d]}),i})();var ns=r(74734);let as=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.ez,Ht,L.m]}),i})();e.B6R(H,[h.O5,B.a,R.J,_.T,d.dn,d.n5,b.J,P.Z,w.z,ts],[T.X$]),e.B6R(z,[B.a,R.J,_.T,ns.Q,d.n5,j,ue,os],[T.X$])}}]);