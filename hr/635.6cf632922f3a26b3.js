"use strict";(self.webpackChunkhr=self.webpackChunkhr||[]).push([[635],{3710:(te,V,r)=>{r.d(V,{r:()=>A});var g=r(94650),w=r(67579),u=r(24280);let A=(()=>{class p{constructor(h){this.viewsService=h,this.loadingService=(0,g.f3M)(w.b),this.UserModules=this.viewsService.UserModules$.getValue(),this.loading=document.getElementById("page-loading")}canActivate(h,P){return!0}showLoading(){this.loading.style.display="block",this.loading.style.opacity="1",this.loading.style.zIndex="998"}hideLoading(){this.loading.style.display="none",this.loading.style.opacity="0",this.loading.style.zIndex="0"}}return p.\u0275fac=function(h){return new(h||p)(g.LFG(u.Z))},p.\u0275prov=g.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},44635:(te,V,r)=>{r.r(V),r.d(V,{LocalizationSetupModule:()=>Xe});var g=r(36895),w=r(80458),u=r(74513),A=r(11582),p=r(30671),d=r(15602),h=r(95751),P=r(35478),e=r(94650),ae=r(12049),y=r(93410),v=r(46896),c=r(73546);let ie=(()=>{class i extends h.U{constructor(t){super(),this.versionService=t,this.isLoaded=!1,this.mandatoryColomns=["Ser","name","date","active","note","countryName","actions"],this.optionalColomns=[]}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new p.by(null)),this.checkNoBusinessOrCompany()&&this.checkNoVersionOrCountry()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}onChangeVersionOrCountry(){this.onChangeBusinessAndCompanyId()}ngOnInit(){}getList(t,a){this.isLoaded=!1,this.page.pageIndex=t,a&&(this.page.pageSize=a),this.removePageParams(),this.versionService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(n=>{if(n.message.messageType=d.u.Success){if(0==n.data.length&&t>1)return void this.getList(this.prevPage);n.data.map(Z=>{Z.countryName=(0,P._)(Z.country?.ar_Name,Z.country?.en_Name),Z.date=P.M.mapDate(Z.date)}),this.dataSource=new p.by(n.data),this.isLoaded=!0,this.page.length=n.meta.totalItemCount}else this.errorList(n.message.messages)})}delete(t){this.showLoading(),this.versionService.Delete(Number(t.id)).subscribe(a=>{(a.message.messageType=d.u.Success)?(this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),this.deleteSuccessfullyMsg(a.message.messageTypeName)):this.errorList(a.message.messages),this.hideLoading()})}onDelete(t){let a=this.msgTranslate(t.name);this.deleteDialog(a).subscribe(s=>{s&&this.delete(t)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ae.P))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-version-index"]],features:[e.qOj],decls:5,vars:8,consts:[[1,"index-card"],["title","versions",3,"globalFunctions"],[3,"isLoaded","mandatoryColomns","optionalColomns","page","actions","dataSource","exportService","onChangePage","deleteRow"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card",0)(1,"mat-card-title"),e._UZ(2,"page-title",1),e.qZA(),e.TgZ(3,"mat-card-content")(4,"app-material-table",2),e.NdJ("onChangePage",function(n){return a.getList(n.pageIndex+1,n.pageSize)})("deleteRow",function(n){return a.onDelete(n)}),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("globalFunctions",a.globalFunctions),e.xp6(2),e.Q6J("isLoaded",a.isLoaded)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("actions",a.rowFunctions)("dataSource",a.dataSource)("exportService",a.versionService))},dependencies:[y.I,v.T,c.a8,c.dn,c.n5]}),i})();var _=r(3710),R=r(36162),l=r(24006),b=r(78937),m=r(43949),L=r(1903),Q=r(24850);let Y=(()=>{class i extends L.K{constructor(){super()}create(t){return this.post("Penalities/Create",t)}update(t){return this.post("Penalities/Edit",t)}getList(t){return this.get("Penalities/GetList",{params:t})}getAll(){return this.get("Penalities/GetAll").pipe((0,Q.U)(t=>(t.data.map(a=>{a.ar_Name=a.name,a.en_Name=a.name}),t)))}Delete(t){return this.delete("Penalities/Delete",{params:{Id:t}})}exportExcel(){this.getAll()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var C=r(25273),T=r(56500),I=r(57566),U=r(44850);function se(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",13),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}let oe=(()=>{class i extends h.U{constructor(t){super(),this.penaltiesService=t,this.submitted=!1,this.mandatoryColomns=["Ser","id","name","penalty_Value","actions"],this.isLoaded=!1,this.optionalColomns=[]}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],name:[null,[l.kI.required,b.w.whiteSpace]],penalty_Value:[null,[l.kI.required,m.dN.gte(0)]]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new p.by(null)),this.checkNoBusinessOrCompany()&&this.checkNoVersionOrCountry()&&this.getList(this.firstPage)}getList(t,a){this.isLoaded=!1,this.page.pageIndex=t,a&&(this.page.pageSize=a),this.penaltiesService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==d.u.Success?(this.dataSource=new p.by(n.data),this.isLoaded=!0,this.page.length=n.meta.totalItemCount):this.errorList(n?.message?.messages)})}submit(){if(this.submitted=!0,this.form.valid){const t={ID:this.form.value.id,Name:this.form.value.name,Penalty_Value:this.form.value.penalty_Value};0==t.ID?this.create(t):this.update(t)}else this.error("General.formNotValid")}create(t){this.showLoading(),this.penaltiesService.create(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.clearForm(),this.getList(this.lastPage,this.page.pageSize),this.addSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this.penaltiesService.update(t).subscribe(a=>{a.message.messageType==d.u.Success?(this.clearForm(),this.getList(this.currentPage,this.page.pageSize),this.updateSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a?.message?.messages),this.hideLoading()})}penaltyToEdit(t){this.form.patchValue(t)}onDelete(t){let a=this.msgTranslate(t.name);this.deleteDialog(a).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.penaltiesService.Delete(t.id).subscribe(a=>{a.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(a?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),t.id==this.formCtrls.id.value&&this.clearForm()):this.errorList(a?.message?.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-penalties"]],features:[e.qOj],decls:19,vars:15,consts:[[1,"row"],[1,"col-12"],[1,"form-card"],["addTitle","penalties","editTitle","editPenalty",3,"id"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","name",3,"control","submitted"],["type","number","label","penalty_Value",3,"control","submitted"],["align","end"],[3,"id","onClick"],[3,"click",4,"ngIf"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","exportService","actions","onChangePage","editRow","deleteRow"],[3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title"),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"mat-card-content",4)(6,"div",0)(7,"div",1)(8,"form",5)(9,"div",0)(10,"div",6),e._UZ(11,"app-input",7),e.qZA(),e.TgZ(12,"div",6),e._UZ(13,"app-input",8),e.qZA()()()()()(),e.TgZ(14,"mat-card-actions",9)(15,"submit-btn",10),e.NdJ("onClick",function(){return a.submit()}),e.qZA(),e.YNc(16,se,1,0,"reset-form-btn",11),e.qZA(),e._UZ(17,"mat-divider"),e.TgZ(18,"app-material-table",12),e.NdJ("onChangePage",function(n){return a.getList(n.pageIndex+1,n.pageSize)})("editRow",function(n){return a.penaltyToEdit(n)})("deleteRow",function(n){return a.onDelete(n)}),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("id",a.formCtrls.id.value),e.xp6(4),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.name)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.penalty_Value)("submitted",a.submitted),e.xp6(2),e.Q6J("id",a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",a.formCtrls.id.value>0),e.xp6(2),e.Q6J("isLoaded",a.isLoaded)("dataSource",a.dataSource)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("exportService",a.penaltiesService)("actions",a.rowFunctions))},dependencies:[g.O5,C.a,y.I,T.J,I.p,v.T,c.a8,c.dn,c.n5,c.hq,U.d,l._Y,l.JL,l.sg]}),i})();function z(i){return i.map(o=>({...o.att_Violation,variableCode:o.paY_Variable?.code,violationType:o.att_Violation?.att_Violation_Type?.name,typeName:o.att_Violation?.att_Type?.en_Name,display_In_Result:o.paY_Variable?.display_In_Result}))}var f=r(26315);let B=(()=>{class i extends L.K{constructor(){super()}create(t){return this.post("Violation/Create",t)}update(t){return this.post("Violation/Edit",t)}getList(t){return this.get("Violation/GetList",{params:{...t,$expand:`${f.db.Att_Attendance_Element}.${f.db.Att_Violation}/${f.db.Att_Type},${f.db.Att_Attendance_Element}.${f.db.Att_Violation}/${f.db.Att_Violation_Type}`}})}getAll(){return this.get("Violation/GetAll",{params:{$expand:`${f.db.Att_Attendance_Element}.${f.db.Att_Violation}`}})}getById(t){return this.get("Violation/GetAll",{params:{$expand:`${f.db.Att_Attendance_Element}.${f.db.Att_Violation}/${f.db.Att_Type},${f.db.Att_Attendance_Element}.${f.db.Att_Violation}/${f.db.Att_Violation_Type}`,$filter:`id eq ${t}`}})}Delete(t){return this.delete("Violation/Delete",{params:{Id:t}})}getAllTypes(){return this.get("Violation/GetAll_Type").pipe((0,Q.U)(t=>(t.data.map(a=>{a.ar_Name=a.en_Name}),t)))}exportExcel(){this.getAll()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var S=r(86405);let ne=(()=>{class i extends h.U{constructor(t){super(),this.violationsService=t,this.mandatoryColomns=["Ser","id","en_Name","ar_Name","actions"],this.optionalColomns=["variableCode","display_In_Result","violationType","renew_Day","fromValue","toValue","typeName","moneyOrPenalty","renew_By_Period"],this.isLoaded=!1}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new p.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,a){this.isLoaded=!1,this.removePageParams(),this.page.pageIndex=t,a&&(this.page.pageSize=a),this.violationsService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(n=>{if(n.message.messageType==d.u.Success){if(0==n.data.length&&t>1)return void this.getList(this.prevPage);n.data.map(Z=>{Z.att_Violation.moneyOrPenalty=this.translate(Z.att_Violation.ismoney?"money":"penalty")}),this.dataSource=new p.by(z(n.data)),this.isLoaded=!0,this.page.length=n.meta.totalItemCount}else this.errorList(n?.message?.messages)})}onDelete(t){let a=this.msgTranslate(t.ar_Name,t.en_Name);this.deleteDialog(a).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.violationsService.Delete(t.id).subscribe(a=>{a.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(a?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(a?.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(B))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-violations-index"]],features:[e.qOj],decls:7,vars:8,consts:[[1,"row"],[1,"col-12"],[1,"index-card"],["title","violations",3,"globalFunctions"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","exportService","actions","onChangePage","deleteRow"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card",2)(4,"mat-card-title"),e._UZ(5,"page-title",3),e.qZA(),e.TgZ(6,"app-material-table",4),e.NdJ("onChangePage",function(n){return a.getList(n.pageIndex+1,n.pageSize)})("deleteRow",function(n){return a.onDelete(n)}),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("globalFunctions",a.globalFunctions),e.xp6(1),e.Q6J("isLoaded",a.isLoaded)("dataSource",a.dataSource)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("exportService",a.violationsService)("actions",a.rowFunctions))},dependencies:[y.I,v.T,c.a8,c.n5,S.Ro]}),i})();var le=r(7368),O=r(33975);let re=(()=>{class i extends L.K{constructor(){super()}create(t){return this.post("ViolationType/Create",t)}update(t){return this.post("ViolationType/Edit",t)}getList(t){return this.get("ViolationType/GetList",{params:t})}getAll(){return this.get("ViolationType/GetAll").pipe((0,Q.U)(t=>(t.data.map(a=>{a.ar_Name=a.name,a.en_Name=a.name}),t)))}Delete(t){return this.delete("ViolationType/Delete",{params:{Id:t}})}exportExcel(){this.getAll()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var F=r(92393),N=r(12613),D=r(61064),J=r(52682),k=r(68506);function de(i,o){if(1&i&&e._UZ(0,"app-add-new-btn",5),2&i){const t=e.oxw();e.MGl("url","/penalty-regulations-setup/",t.moduleId,"/violations/add"),e.Q6J("params",t.parentParam)}}function ce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",25),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}let E=(()=>{class i extends h.U{constructor(t,a){super(),this.violationsService=t,this.violationTypesService=a,this.submitted=!1,this.violationTypesList=[],this.typesList=[],this.moneyOrPenaltyRadioList=[{value:!0,label:"money"},{value:!1,label:"penalty"}]}ngOnInit(){this.activatedRoute.paramMap.subscribe(t=>{this.violationId=Number(t.get("violationId"))??0}),this.form=this.fb.group({id:[0,{nonNullable:!0}],en_Name:[null,[l.kI.required,b.w.whiteSpace]],ar_Name:[null,[l.kI.required,b.w.whiteSpace]],variableCode:[null,[l.kI.required,b.w.whiteSpace,b.w.noSpace,l.kI.pattern(O.g.variableCode_pattern)]],display_In_Result:[!1],renew_Day:[null,[m.dN.gte(0),m.dN.digits]],fromValue:[null,[l.kI.required,m.dN.gte(0),m.dN.digits]],toValue:[null,[l.kI.required,m.dN.gte(0),m.dN.digits]],violation_Type_ID:[null,[l.kI.required]],type:[null,[l.kI.required]],renew_By_Period:[!1],ismoney:[!1]},{validator:b.w.greaterThan("fromValue","toValue")})}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&(this.getAllViolationTypes(),this.getAllTypes(),this.violationId>0&&this.getById())}get formCtrls(){return this.form.controls}getById(){this.showLoading(),this.violationsService.getById(this.violationId).subscribe(t=>{if(t.message.messageType==d.u.Success){let a=(0,le.s)(t.data);this.violationToEdit(a[0])}else this.errorList(t?.message?.messages);this.hideLoading()})}violationToEdit(t){this.form.patchValue(t)}submit(){if(this.submitted=!0,this.form.valid){const t={Violation:{ID:this.form.value.id,En_Name:this.form.value.en_Name,Ar_Name:this.form.value.ar_Name,Renew_Day:this.form.value.renew_Day,FromValue:this.form.value.fromValue,ToValue:this.form.value.toValue,Violation_Type_ID:this.form.value.violation_Type_ID,Type:this.form.value.type,Renew_By_Period:this.form.value.renew_By_Period??!1,Ismoney:this.form.value.ismoney},VariableCode:this.form.value.variableCode,Display_In_Result:this.form.value.display_In_Result??!1};0==t.Violation.ID?this.create(t):this.update(t)}}create(t){this.showLoading(),this.violationsService.create(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.violationId=a.data.id,this.formCtrls.id.setValue(this.violationId),this.navigateTo(`/penalty-regulations-setup/${this.moduleId}/violations/edit/${this.violationId}`),this.addSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this.violationsService.update(t).subscribe(a=>{a.message.messageType==d.u.Success?this.updateSuccessfullyMsg(a?.message?.messageTypeName):this.errorList(a?.message?.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0,ismoney:!1}),this.submitted=!1}getAllViolationTypes(){this.showLoading(),this.violationTypesService.getAll().subscribe(t=>{(t.message.messageType=d.u.Success)?this.violationTypesList=t.data:this.errorList(t?.message?.messages),this.hideLoading()})}getAllTypes(){this.showLoading(),this.violationsService.getAllTypes().subscribe(t=>{(t.message.messageType=d.u.Success)?this.typesList=t.data:this.errorList(t?.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(B),e.Y36(re))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-violation"]],features:[e.qOj],decls:38,vars:30,consts:[[1,"row"],[1,"col-12"],[1,"form-card"],["addTitle","violations","editTitle","editViolation",3,"id"],[3,"url","params",4,"ngIf"],[3,"url","params"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","en_Name",3,"control","submitted"],["label","ar_Name",3,"control","submitted"],["label","variableCode",3,"control","submitted"],[1,"col-md-6","col-12","mtop-14"],["label","display_In_Result",3,"control"],[1,"col-md-4","col-12"],["type","number","label","renew_Month",3,"control","submitted"],["type","number","label","fromValue",3,"control","submitted"],["type","number","label","toValue",3,"control","submitted"],["label","violationType",3,"control","submitted","List"],["label","typeName",3,"control","submitted","List"],["label","renew_By_Period",3,"control"],[3,"radioList","control","submitted"],["align","end"],[3,"id","onClick"],[3,"click",4,"ngIf"],[3,"click"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card",2)(4,"mat-card-title"),e._UZ(5,"page-title",3),e.YNc(6,de,1,2,"app-add-new-btn",4),e._UZ(7,"app-back-btn",5),e.qZA(),e.TgZ(8,"mat-card-content",6)(9,"div",0)(10,"div",1)(11,"form",7)(12,"div",0)(13,"div",8),e._UZ(14,"app-input",9),e.qZA(),e.TgZ(15,"div",8),e._UZ(16,"app-input",10),e.qZA(),e.TgZ(17,"div",8),e._UZ(18,"app-input",11),e.qZA(),e.TgZ(19,"div",12),e._UZ(20,"app-check-box",13),e.qZA(),e.TgZ(21,"div",14),e._UZ(22,"app-input",15),e.qZA(),e.TgZ(23,"div",14),e._UZ(24,"app-input",16),e.qZA(),e.TgZ(25,"div",14),e._UZ(26,"app-input",17),e.qZA(),e.TgZ(27,"div",8),e._UZ(28,"app-prime-dropdown",18),e.qZA(),e.TgZ(29,"div",8),e._UZ(30,"app-prime-dropdown",19),e.qZA(),e.TgZ(31,"div",12),e._UZ(32,"app-check-box",20),e.qZA(),e.TgZ(33,"div",12),e._UZ(34,"app-radio-button",21),e.qZA()()()()()(),e.TgZ(35,"mat-card-actions",22)(36,"submit-btn",23),e.NdJ("onClick",function(){return a.submit()}),e.qZA(),e.YNc(37,ce,1,0,"reset-form-btn",24),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("id",a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",a.formCtrls.id.value>0),e.xp6(1),e.MGl("url","/penalty-regulations-setup/",a.moduleId,"/violations/index"),e.Q6J("params",a.pageParams),e.xp6(4),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.en_Name)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.ar_Name)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.variableCode)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.display_In_Result),e.xp6(2),e.Q6J("control",a.formCtrls.renew_Day)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.fromValue)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.toValue)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.violation_Type_ID)("submitted",a.submitted)("List",a.violationTypesList),e.xp6(2),e.Q6J("control",a.formCtrls.type)("submitted",a.submitted)("List",a.typesList),e.xp6(2),e.Q6J("control",a.formCtrls.renew_By_Period),e.xp6(2),e.Q6J("radioList",a.moneyOrPenaltyRadioList)("control",a.formCtrls.ismoney)("submitted",a.submitted),e.xp6(2),e.Q6J("id",a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",0==a.formCtrls.id.value))},dependencies:[g.O5,C.a,F._,N.u,D.a,J.J,T.J,I.p,v.T,c.a8,c.dn,c.n5,c.hq,S.Ro,k.t,l._Y,l.JL,l.sg]}),i})(),G=(()=>{class i extends L.K{constructor(){super()}create(t){return this.post("PenaltyReg/Create",t)}update(t){return this.post("PenaltyReg/Edit",t)}getList(t){return this.get("PenaltyReg/GetList",{params:t})}getAll(){return this.get("PenaltyReg/GetAll")}getById(t){return this.get("PenaltyReg/GetAll",{params:{$filter:`id eq ${t}`}})}Delete(t){return this.delete("PenaltyReg/Delete",{params:{Id:t}})}exportExcel(){this.getAll()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),me=(()=>{class i extends h.U{constructor(t){super(),this.penaltyRegulationsService=t,this.mandatoryColomns=["Ser","id","name","actions"],this.isLoaded=!1,this.optionalColomns=[]}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new p.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,a){this.isLoaded=!1,this.removePageParams(),this.page.pageIndex=t,a&&(this.page.pageSize=a),this.penaltyRegulationsService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(n=>{if(n.message.messageType==d.u.Success){if(0==n.data.length&&t>1)return void this.getList(this.prevPage);this.dataSource=new p.by(n.data),this.isLoaded=!0,this.page.length=n.meta.totalItemCount}else this.errorList(n?.message?.messages)})}onDelete(t){let a=this.msgTranslate(t.name);this.deleteDialog(a).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.penaltyRegulationsService.Delete(t.id).subscribe(a=>{a.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(a?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(a?.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(G))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-penalty-regulations-index"]],features:[e.qOj],decls:7,vars:8,consts:[[1,"row"],[1,"col-12"],[1,"index-card"],["title","penaltyRegulations",3,"globalFunctions"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","exportService","actions","onChangePage","deleteRow"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card",2)(4,"mat-card-title"),e._UZ(5,"page-title",3),e.qZA(),e.TgZ(6,"app-material-table",4),e.NdJ("onChangePage",function(n){return a.getList(n.pageIndex+1,n.pageSize)})("deleteRow",function(n){return a.onDelete(n)}),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("globalFunctions",a.globalFunctions),e.xp6(1),e.Q6J("isLoaded",a.isLoaded)("dataSource",a.dataSource)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("exportService",a.penaltyRegulationsService)("actions",a.rowFunctions))},dependencies:[y.I,v.T,c.a8,c.n5,S.Ro]}),i})();var $=r(40445),x=r(3848);let ue=(()=>{class i extends L.K{constructor(){super()}create(t){return this.post("PenaltyReg/Create_Penalty_Regulation_Details",t)}update(t){return this.post("PenaltyReg/Edit_Penalty_Regulation_Details",t)}getAllByPenaltyRegulationId(t){return this.get("PenaltyReg/GetAll_Penalty_Regulation_Details",{params:{Penalty_Regulation_ID:t}})}Delete(t){return this.delete("PenaltyReg/Delete_Penalty_Regulation_Details",{params:t})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function ge(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",13),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}function he(i,o){if(1&i){const t=e.EpF();e.ynx(0),e._UZ(1,"mat-divider"),e.TgZ(2,"app-material-table",14),e.NdJ("editRow",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.penaltyRegulationToEdit(s))})("deleteRow",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(s))}),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("showPaginator",!1)}}const K=function(i){return{"hidden-field":i}};let _e=(()=>{class i extends h.U{constructor(t,a,s){super(),this.penaltyRegulationsDetailsService=t,this.violationsService=a,this.penaltiesService=s,this.selectedPenaltyRegulationDetails=null,this.submitted=!1,this.mandatoryColomns=["Ser","violation","repetition_No","penalty","actions"],this.isLoaded=!1,this.optionalColomns=[],this.violationsList=[],this.penaltiesList=[],this.selectedViolation=null}ngOnInit(){this.form=this.fb.group({violation_ID:[null,[l.kI.required]],repetition_No:[null,[l.kI.required,m.dN.digits,m.dN.gte(0)]],penalty_ID:[null,[l.kI.required]]})}ngOnChanges(t){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new p.by(null)),this.checkNoBusinessOrCompany()&&(this.getAllViolations(),this.getAllPenalties(),this.penaltyRegulationId>0&&this.getAll())}get formCtrls(){return this.form.controls}getAll(){this.penaltyRegulationsDetailsService.getAllByPenaltyRegulationId(this.penaltyRegulationId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==d.u.Success?(this.dataSource=new p.by(function pe(i){return i.map(o=>({...o,violation:(0,P._)(o.att_Violation?.ar_Name,o.att_Violation?.en_Name),penalty:o.att_Penalty?.name}))}(t.data)),this.isLoaded=!0):this.errorList(t?.message?.messages)})}penaltyRegulationToEdit(t){this.form.patchValue(t),this.onChangeViolation([t.att_Violation]),this.selectedPenaltyRegulationDetails=t}submit(){if(this.submitted=!0,this.form.valid){const t=[{Penalty_Regulation_ID:this.penaltyRegulationId,Violation_ID:this.form.value.violation_ID,Repetition_No:this.form.value.repetition_No??0,Penalty_ID:this.form.value.penalty_ID}];this.selectedPenaltyRegulationDetails?this.update(t):this.create(t)}}create(t){this.showLoading(),this.penaltyRegulationsDetailsService.create(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.clearForm(),this.addSuccessfullyMsg(a?.message?.messageTypeName),this.getAll()):this.errorList(a?.message?.messages),this.hideLoading()})}update(t){let a={NewPenalityDetails:t[0],OldPenalityDetails:{Penalty_Regulation_ID:this.selectedPenaltyRegulationDetails.penalty_Regulation_ID,Violation_ID:this.selectedPenaltyRegulationDetails.violation_ID,Repetition_No:this.selectedPenaltyRegulationDetails.repetition_No??0,Penalty_ID:this.selectedPenaltyRegulationDetails.penalty_ID}};this.showLoading(),this.penaltyRegulationsDetailsService.update(a).subscribe(s=>{s.message.messageType==d.u.Success?(this.clearForm(),this.updateSuccessfullyMsg(s?.message?.messageTypeName),this.getAll()):this.errorList(s?.message?.messages),this.hideLoading()})}onDelete(t){let a=this.msgTranslate(`${t.att_Violation.ar_Name} - ${t.repetition_No}`,`${t.att_Violation.en_Name} - ${t.repetition_No}`);this.deleteDialog(a).subscribe(s=>{s&&this.delete(t)})}delete(t){let a={Penalty_Regulation_ID:t.penalty_Regulation_ID,Repetition_No:t.repetition_No,Violation_ID:t.violation_ID};this.showLoading(),this.penaltyRegulationsDetailsService.Delete(a).subscribe(s=>{s.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(s?.message?.messageTypeName),this.getAll(),t.penalty_Regulation_ID==this.selectedPenaltyRegulationDetails?.penalty_Regulation_ID&&t.violation_ID==this.selectedPenaltyRegulationDetails?.violation_ID&&t.repetition_No==this.selectedPenaltyRegulationDetails?.repetition_No&&this.clearForm()):this.errorList(s?.message?.messages),this.hideLoading()})}clearForm(){this.form.reset(),this.submitted=!1,this.selectedViolation=null,this.selectedPenaltyRegulationDetails=null}getAllViolations(){this.showLoading(),this.violationsService.getAll().subscribe(t=>{(t.message.messageType=d.u.Success)?this.violationsList=z(t.data):this.errorList(t?.message?.messages),this.hideLoading()})}getAllPenalties(){this.showLoading(),this.penaltiesService.getAll().subscribe(t=>{(t.message.messageType=d.u.Success)?this.penaltiesList=t.data:this.errorList(t?.message?.messages),this.hideLoading()})}onChangeViolation(t){this.selectedViolation=t[0],this.selectedViolation?.ismoney?(this.formCtrls.repetition_No.clearValidators(),this.formCtrls.penalty_ID.clearValidators()):(this.formCtrls.repetition_No.setValidators([l.kI.required,m.dN.gte(0)]),this.formCtrls.penalty_ID.setValidators([l.kI.required])),this.formCtrls.repetition_No.updateValueAndValidity(),this.formCtrls.penalty_ID.updateValueAndValidity()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ue),e.Y36(B),e.Y36(Y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-penalty-regulations-details"]],inputs:{penaltyRegulationId:"penaltyRegulationId"},features:[e.qOj,e.TTD],decls:15,vars:21,consts:[[1,"container-fluid","mb-0"],[1,"row"],[1,"col-12"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","violation","appendTo","body",3,"control","List","submitted","filter","change"],[1,"col-md-6","col-12",3,"ngClass"],["label","repetition_No","type","number",3,"control","submitted"],["label","penalty","appendTo","body",3,"control","List","submitted","filter"],["align","end"],[3,"id","disabled","onClick"],[3,"click",4,"ngIf"],[4,"ngIf"],[3,"click"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","showPaginator","editRow","deleteRow"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card-content",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",1)(5,"div",4)(6,"app-prime-dropdown",5),e.NdJ("change",function(n){return a.onChangeViolation(n)}),e.qZA()(),e.TgZ(7,"div",6),e._UZ(8,"app-input",7),e.qZA(),e.TgZ(9,"div",6),e._UZ(10,"app-prime-dropdown",8),e.qZA()()()()()(),e.TgZ(11,"mat-card-actions",9)(12,"submit-btn",10),e.NdJ("onClick",function(){return a.submit()}),e.qZA(),e.YNc(13,ge,1,0,"reset-form-btn",11),e.qZA(),e.YNc(14,he,3,6,"ng-container",12)),2&t&&(e.xp6(3),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.violation_ID)("List",a.violationsList)("submitted",a.submitted)("filter",!0),e.xp6(1),e.Q6J("ngClass",e.VKq(17,K,null==a.selectedViolation?null:a.selectedViolation.ismoney)),e.xp6(1),e.Q6J("control",a.formCtrls.repetition_No)("submitted",a.submitted),e.xp6(1),e.Q6J("ngClass",e.VKq(19,K,null==a.selectedViolation?null:a.selectedViolation.ismoney)),e.xp6(1),e.Q6J("control",a.formCtrls.penalty_ID)("List",a.penaltiesList)("submitted",a.submitted)("filter",!0),e.xp6(2),e.Q6J("id",a.selectedPenaltyRegulationDetails?1:0)("disabled",!a.penaltyRegulationId),e.xp6(1),e.Q6J("ngIf",a.selectedPenaltyRegulationDetails),e.xp6(1),e.Q6J("ngIf",a.penaltyRegulationId))},dependencies:[g.mk,g.O5,C.a,y.I,T.J,I.p,c.dn,c.hq,U.d,k.t,l._Y,l.JL,l.sg]}),i})();var M=r(49274);function fe(i,o){if(1&i&&e._UZ(0,"app-add-new-btn",5),2&i){const t=e.oxw();e.MGl("url","/penalty-regulations-setup/",t.moduleId,"/penalty-regulations/add"),e.Q6J("params",t.parentParam)}}function ve(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",16),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}let j=(()=>{class i extends h.U{constructor(t){super(),this.penaltyRegulationsService=t,this.submitted=!1}ngOnInit(){this.activatedRoute.paramMap.subscribe(t=>{this.penaltyRegulationId=Number(t.get("penaltyRegulationId"))??0}),this.form=this.fb.group({id:[0,{nonNullable:!0}],name:[null,[l.kI.required,b.w.whiteSpace]]})}onChangeBusinessAndCompanyId(){this.penaltyRegulationId>0&&this.checkNoBusinessOrCompany()&&this.getById()}get formCtrls(){return this.form.controls}getById(){this.showLoading(),this.penaltyRegulationsService.getById(this.penaltyRegulationId).subscribe(t=>{t.message.messageType==d.u.Success?this.penaltyRegulationToEdit(t.data[0]):this.errorList(t?.message?.messages),this.hideLoading()})}penaltyRegulationToEdit(t){this.form.patchValue(t)}submit(){if(this.submitted=!0,this.form.valid){const t={ID:this.form.value.id,Name:this.form.value.name};0==t.ID?this.create(t):this.update(t)}}create(t){this.showLoading(),this.penaltyRegulationsService.create(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.penaltyRegulationId=a.data.id,this.formCtrls.id.setValue(this.penaltyRegulationId),this.navigateTo(`/penalty-regulations-setup/${this.moduleId}/penalty-regulations/edit/${this.penaltyRegulationId}`),this.addSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this.penaltyRegulationsService.update(t).subscribe(a=>{a.message.messageType==d.u.Success?this.updateSuccessfullyMsg(a?.message?.messageTypeName):this.errorList(a?.message?.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(G))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-penalty-regulations"]],features:[e.qOj],decls:26,vars:21,consts:[[1,"row"],[1,"col-12"],[1,"form-card"],["addTitle","penaltyRegulations","editTitle","editPenaltyRegulation",3,"id"],[3,"url","params",4,"ngIf"],[3,"url","params"],[1,"col-12","w-100",3,"dir"],[3,"label"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","name",3,"control","submitted"],["align","end"],[3,"id","onClick"],[3,"click",4,"ngIf"],[3,"penaltyRegulationId"],[3,"click"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card",2)(4,"mat-card-title"),e._UZ(5,"page-title",3),e.YNc(6,fe,1,2,"app-add-new-btn",4),e._UZ(7,"app-back-btn",5),e.qZA(),e.TgZ(8,"mat-tab-group",6)(9,"mat-tab",7),e.ALo(10,"titlecase"),e.ALo(11,"translate"),e.TgZ(12,"mat-card-content",8)(13,"div",0)(14,"div",1)(15,"form",9)(16,"div",0)(17,"div",10),e._UZ(18,"app-input",11),e.qZA()()()()()(),e.TgZ(19,"mat-card-actions",12)(20,"submit-btn",13),e.NdJ("onClick",function(){return a.submit()}),e.qZA(),e.YNc(21,ve,1,0,"reset-form-btn",14),e.qZA()(),e.TgZ(22,"mat-tab",7),e.ALo(23,"titlecase"),e.ALo(24,"translate"),e._UZ(25,"app-penalty-regulations-details",15),e.qZA()()()()()),2&t&&(e.xp6(5),e.Q6J("id",a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",a.formCtrls.id.value>0),e.xp6(1),e.MGl("url","/penalty-regulations-setup/",a.moduleId,"/penalty-regulations/index"),e.Q6J("params",a.pageParams),e.xp6(1),e.Q6J("dir",a.languageService.isArabic?"rtl":"ltr"),e.xp6(1),e.s9C("label",e.lcZ(10,13,e.lcZ(11,15,"penaltyRegulations"))),e.xp6(6),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.name)("submitted",a.submitted),e.xp6(2),e.Q6J("id",a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",0==a.formCtrls.id.value),e.xp6(1),e.s9C("label",e.lcZ(23,17,e.lcZ(24,19,"penaltyRegulationDetails"))),e.xp6(3),e.Q6J("penaltyRegulationId",a.penaltyRegulationId))},dependencies:[g.O5,C.a,D.a,J.J,T.J,I.p,v.T,$.Lv,x.SP,x.uX,c.a8,c.dn,c.n5,c.hq,S.Ro,l._Y,l.JL,l.sg,_e,g.rS,M.X$]}),i})();var be=r(78304);function ye(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",12),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}let Ce=(()=>{class i extends h.U{constructor(t){super(),this.violationTypesService=t,this.submitted=!1,this.mandatoryColomns=["Ser","id","name","actions"],this.isLoaded=!1,this.optionalColomns=[]}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],name:[null,[l.kI.required,b.w.whiteSpace]]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new p.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.firstPage)}getList(t,a){this.isLoaded=!1,this.page.pageIndex=t,a&&(this.page.pageSize=a),this.violationTypesService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==d.u.Success?(this.dataSource=new p.by(n.data),this.isLoaded=!0,this.page.length=n.meta.totalItemCount):this.errorList(n?.message?.messages)})}submit(){if(this.submitted=!0,this.form.valid){const t={ID:this.form.value.id,Name:this.form.value.name};0==t.ID?this.create(t):this.update(t)}}create(t){this.showLoading(),this.violationTypesService.create(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.clearForm(),this.getList(this.lastPage,this.page.pageSize),this.addSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this.violationTypesService.update(t).subscribe(a=>{a.message.messageType==d.u.Success?(this.clearForm(),this.getList(this.currentPage,this.page.pageSize),this.updateSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a?.message?.messages),this.hideLoading()})}violationTypeToEdit(t){this.form.patchValue(t)}onDelete(t){let a=this.msgTranslate(t.name);this.deleteDialog(a).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.violationTypesService.Delete(t.id).subscribe(a=>{a.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(a?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),t.id==this.formCtrls.id.value&&this.clearForm()):this.errorList(a?.message?.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(be.X))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-violation-types"]],features:[e.qOj],decls:18,vars:13,consts:[[1,"row"],[1,"col-12"],[1,"form-card"],["addTitle","violationTypes","editTitle","editViolationType",3,"id"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","name",3,"control","submitted"],["align","end"],[3,"id","onClick"],[3,"click",4,"ngIf"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","exportService","actions","onChangePage","editRow","deleteRow"],[3,"click"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card",2)(4,"mat-card-title"),e._UZ(5,"page-title",3),e.qZA(),e.TgZ(6,"mat-card-content",4)(7,"div",0)(8,"div",1)(9,"form",5)(10,"div",0)(11,"div",6),e._UZ(12,"app-input",7),e.qZA()()()()()(),e.TgZ(13,"mat-card-actions",8)(14,"submit-btn",9),e.NdJ("onClick",function(){return a.submit()}),e.qZA(),e.YNc(15,ye,1,0,"reset-form-btn",10),e.qZA(),e._UZ(16,"mat-divider"),e.TgZ(17,"app-material-table",11),e.NdJ("onChangePage",function(n){return a.getList(n.pageIndex+1,n.pageSize)})("editRow",function(n){return a.violationTypeToEdit(n)})("deleteRow",function(n){return a.onDelete(n)}),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("id",a.formCtrls.id.value),e.xp6(4),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.name)("submitted",a.submitted),e.xp6(2),e.Q6J("id",a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",a.formCtrls.id.value>0),e.xp6(2),e.Q6J("isLoaded",a.isLoaded)("dataSource",a.dataSource)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("exportService",a.violationTypesService)("actions",a.rowFunctions))},dependencies:[g.O5,C.a,y.I,T.J,I.p,v.T,c.a8,c.dn,c.n5,c.hq,U.d,S.Ro,l._Y,l.JL,l.sg]}),i})(),X=(()=>{class i extends L.K{constructor(){super()}create(t){return this.post("VacationTypeLoc/Create",t)}update(t){return this.post("VacationTypeLoc/Edit",t)}getList(t){return this.get("VacationTypeLoc/GetList",{params:t})}getById(t){return this.get("VacationTypeLoc/GetAll",{params:{$filter:`id eq ${t}`}})}getAll(){return this.get("VacationTypeLoc/GetAll")}Delete(t){return this.delete("VacationTypeLoc/Delete",{params:{Id:t}})}exportExcel(){this.getAll()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Se=(()=>{class i extends h.U{constructor(t){super(),this.vacationService=t,this.isLoaded=!1,this.mandatoryColomns=["Ser","id","en_Name","allow_Post","max_Post_Days","offecial_Vaction_Included","actions"],this.optionalColomns=["display_In_Result","variableCode","defaultBalance","day_Off_Included","isRenew","renew_Day","renew_Month","renew_Period","number_of_Earning","isDefault","is_Paid","canBeRequestedToday","maxRelatedBal","deductible_Value","relatedVacationId","relatedVacationPriority","hasAttashment","calculate_Balance","calculate_Balance_By_Contract","number_Days_month","reportOrder","gender"]}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new p.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,a){this.isLoaded=!1,this.page.pageIndex=t,a&&(this.page.pageSize=a),this.removePageParams(),this.vacationService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType===d.u.Success?(this.dataSource=new p.by(function Te(i){return i.map(o=>({...o.att_Vacation,display_In_Result:o.paY_Variable?.display_In_Result,variableCode:o.paY_Variable?.code}))}(n.data)),this.isLoaded=!0,this.page.length=n.meta.totalItemCount):this.errorList(n?.message?.messages)})}onDelete(t){let a=this.msgTranslate(t.ar_Name,t.en_Name);this.deleteDialog(a).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.vacationService.Delete(t.id).subscribe(a=>{a.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(a.message.messageTypeName),this.getList(1==this.dataSource.data.length&&this.page.pageIndex>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(a?.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(X))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vacation-index"]],features:[e.qOj],decls:7,vars:8,consts:[[1,"row"],[1,"col-12"],[1,"index-card"],["title","vacationType",3,"globalFunctions"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","exportService","actions","onChangePage","deleteRow"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card",2)(4,"mat-card-title"),e._UZ(5,"page-title",3),e.qZA(),e.TgZ(6,"app-material-table",4),e.NdJ("onChangePage",function(n){return a.getList(n.pageIndex+1,n.pageSize)})("deleteRow",function(n){return a.onDelete(n)}),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("globalFunctions",a.globalFunctions),e.xp6(1),e.Q6J("isLoaded",a.isLoaded)("dataSource",a.dataSource)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("exportService",a.vacationService)("actions",a.rowFunctions))},dependencies:[y.I,v.T,c.a8,c.n5,S.Ro]}),i})();var H=r(97986),W=r(65938),Le=r(37350),Ze=r(2023);let Ae=(()=>{class i extends L.K{constructor(){super()}create(t){return this.post("VacationTypeLoc/AddVacationAgeBased",t)}update(t){return this.post("VacationTypeLoc/EditVacationAgeBased",t)}getList(t,a){return this.get("VacationTypeLoc/GetVacationAgeBasedList",{params:{...t,$filter:`vacation_ID eq ${a}`}})}Delete(t){return this.delete("VacationTypeLoc/DeleteVacationAgeBased",{params:{Id:t}})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Ve(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",12),e.NdJ("onClick",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}function we(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-material-table",13),e.NdJ("editRow",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.vacationAgeToEdit(s))})("deleteRow",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(s))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("page",t.page)("actions",t.rowFunctions)("showPaginator",!1)}}let Pe=(()=>{class i extends h.U{constructor(t,a){super(),this.vacationAgeServ=t,this.submitted=!1,this.mandatoryColomns=["Ser","id","From_Age","To_Age","balance","actions"],this.isLoaded=!1,this.optionalColomns=[]}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],Vacation_ID:[0,{nonNullable:!0}],From_Age:[null,[l.kI.required,m.dN.gt(0)]],To_Age:[null,[l.kI.required,m.dN.gt(0)]],balance:[null,[l.kI.required,m.dN.gt(0)]]},{validators:[b.w.greaterThan("From_Age","To_Age")]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new p.by(null)),this.checkNoBusinessOrCompany()&&this.vacationId>0&&this.getVacationAgeList()}getVacationAgeList(){this.vacationAgeServ.getList({PageNumber:1,pageSize:1},this.vacationId).pipe(this.cancelRequest()).subscribe(a=>{a.message.messageType==d.u.Success?(this.dataSource=new p.by(function Ie(i){return i.map(o=>({...o,From_Age:o.from_Age,To_Age:o.to_Age}))}(a.data)),this.isLoaded=!0):this.errorList(a?.message?.messages)})}submit(){if(this.submitted=!0,this.form.valid){const t={id:this.form.value.id,Vacation_ID:this.vacationId,From_Age:this.form.value.From_Age,To_Age:this.form.value.To_Age,Balance:this.form.value.balance};0==t.id?this.create(t):this.update(t)}}create(t){this.showLoading(),this.vacationAgeServ.create(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.getVacationAgeList(),this.addSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this.vacationAgeServ.update(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.clearForm(),this.getVacationAgeList(),this.updateSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a?.message?.messages),this.hideLoading()})}vacationAgeToEdit(t){this.form.patchValue(t)}onDelete(t){let a=this.msgTranslate(t.to_Age.toString());this.deleteDialog(a).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.vacationAgeServ.Delete(t.id).subscribe(a=>{a.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(a?.message?.messageTypeName),this.getVacationAgeList(),t.id==this.formCtrls.id.value&&this.clearForm()):this.errorList(a?.message?.messages)})}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ae),e.Y36(e.zs3))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vacation-age"]],inputs:{vacationId:"vacationId"},features:[e.qOj],decls:16,vars:11,consts:[[1,"mt-2"],["addTitle","addvacationAge","editTitle","editvacationAge",3,"id"],[3,"formGroup"],[1,"row"],[1,"col-md-4","col-12"],["type","number","label","From_Age",3,"control","submitted"],["type","number","label","To_Age",3,"control","submitted"],["type","number","label","balance",3,"control","submitted"],["align","end"],[3,"id","onClick"],[3,"onClick",4,"ngIf"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","showPaginator","editRow","deleteRow",4,"ngIf"],[3,"onClick"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","showPaginator","editRow","deleteRow"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"mat-card-subtitle",0),e._UZ(2,"page-title",1),e.qZA(),e.TgZ(3,"mat-card-content")(4,"form",2)(5,"div",3)(6,"div",4),e._UZ(7,"app-input",5),e.qZA(),e.TgZ(8,"div",4),e._UZ(9,"app-input",6),e.qZA(),e.TgZ(10,"div",4),e._UZ(11,"app-input",7),e.qZA()()()(),e.TgZ(12,"mat-card-actions",8)(13,"submit-btn",9),e.NdJ("onClick",function(){return a.submit()}),e.qZA(),e.YNc(14,Ve,1,0,"reset-form-btn",10),e.qZA(),e.YNc(15,we,1,7,"app-material-table",11)),2&t&&(e.xp6(2),e.Q6J("id",a.formCtrls.id.value),e.xp6(2),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.From_Age)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.To_Age)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.balance)("submitted",a.submitted),e.xp6(2),e.Q6J("id",a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",a.formCtrls.id.value>0),e.xp6(1),e.Q6J("ngIf",null==a.dataSource?null:a.dataSource.data))},dependencies:[g.O5,C.a,y.I,T.J,I.p,v.T,c.dn,c.$j,c.hq,S.Ro,l._Y,l.JL,l.sg]}),i})();var q=r(59036);let Re=(()=>{class i extends L.K{constructor(){super()}create(t){return this.post("VacationTypeLoc/AddVacationInsuranceBased",t)}update(t){return this.post("VacationTypeLoc/EditVacationInsuranceBased",t)}getList(t,a){return this.get("VacationTypeLoc/GetVacationInsuranceBasedList",{params:{...t,$filter:`vacation_ID eq ${a}`}})}Delete(t){return this.delete("VacationTypeLoc/DeleteVacationInsuranceBased",{params:{Id:t}})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Ne(i,o){if(1&i&&(e.TgZ(0,"div",17),e._UZ(1,"app-check-box",18),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("control",t.formCtrls.ignore_Insurance_Date)}}function De(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",19),e.NdJ("onClick",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}function Je(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-material-table",20),e.NdJ("editRow",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.vacationInsuranceEdit(s))})("deleteRow",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(s))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("page",t.page)("showPaginator",!1)("actions",t.rowFunctions)}}let xe=(()=>{class i extends h.U{constructor(t){super(),this.vacationInsServ=t,this.submitted=!1,this.mandatoryColomns=["Ser","id","from_Year","to_Year","balance","inside_CompanyString","actions"],this.optionalColomns=["ignore_Insurance_Date"],this.isLoaded=!1,this.insuranceSide=q.o,this.insuranceSideRadio=[{value:q.o.outside_Company,label:"outside_Company"},{value:q.o.inside_Company,label:"inside_Company"}]}ngOnInit(){this.form=this.fb.group({id:[0,{nonNallable:!0}],Vacation_ID:[0,{nonNullable:!0}],from_Year:[null,[l.kI.required,m.dN.gt(0)]],to_Year:[null,[l.kI.required,m.dN.gt(0)]],balance:[null,[l.kI.required,m.dN.gt(0)]],inside_Company:[null,[l.kI.required]],ignore_Insurance_Date:[!1]},{validators:[b.w.greaterThan("from_Year","to_Year")]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new p.by(null)),this.checkNoBusinessOrCompany()&&this.vacationId>0&&this.getVacationInsuranceList()}getVacationInsuranceList(){this.vacationInsServ.getList({PageNumber:1,pageSize:1},this.vacationId).pipe(this.cancelRequest()).subscribe(a=>{a.message.messageType==d.u.Success?(a.data.map(s=>{s.inside_CompanyString=this.translate(q.o.getValue(s.inside_Company))}),this.dataSource=new p.by(a.data),this.isLoaded=!0):this.errorList(a?.message?.messages)})}submit(){if(this.submitted=!0,this.form.valid){const t={ID:this.form.value.id,Vacation_ID:this.vacationId,From_Year:this.form.value.from_Year,To_Year:this.form.value.to_Year,Balance:this.form.value.balance,inside_Company:this.form.value.inside_Company,ignore_Insurance_Date:this.form.value.ignore_Insurance_Date};0==t.ID?this.create(t):this.update(t)}}create(t){this.showLoading(),this.vacationInsServ.create(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.getVacationInsuranceList(),this.addSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this.vacationInsServ.update(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.clearForm(),this.getVacationInsuranceList(),this.updateSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a?.message?.messages),this.hideLoading()})}onDelete(t){let a=this.msgTranslate(t.to_Year.toString());this.deleteDialog(a).subscribe(s=>{s&&this.delete(t)})}vacationInsuranceEdit(t){this.form.patchValue(t)}delete(t){this.showLoading(),this.vacationInsServ.Delete(t.id).subscribe(a=>{a.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(a?.message?.messageTypeName),this.getVacationInsuranceList(),t.id==this.formCtrls.id.value&&this.clearForm()):this.errorList(a?.message?.messages)})}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Re))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vacation-insurance"]],inputs:{vacationId:"vacationId"},features:[e.qOj],decls:27,vars:20,consts:[[1,"row"],[1,"col-12"],[1,"form-card"],["addTitle","addvacationInsurance","editTitle","editvacationInsurance",3,"id"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-4","col-12"],["type","number","label","from_Year",3,"control","submitted"],["type","number","label","to_Year",3,"control","submitted"],["type","number","label","balance",3,"control","submitted"],[1,"col-md-5","col-12"],[3,"control","submitted","radioList"],["class","col-md-3 col-12",4,"ngIf"],["align","end"],[3,"id","onClick"],[3,"onClick",4,"ngIf"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","showPaginator","actions","editRow","deleteRow",4,"ngIf"],[1,"col-md-3","col-12"],["label","ignore_Insurance_Date",3,"control"],[3,"onClick"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","showPaginator","actions","editRow","deleteRow"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card",2)(4,"mat-card-subtitle"),e._UZ(5,"page-title",3),e.qZA(),e.TgZ(6,"mat-card-content",4)(7,"form",5)(8,"div",0)(9,"div",6),e._UZ(10,"app-input",7),e.qZA(),e.TgZ(11,"div",6),e._UZ(12,"app-input",8),e.qZA(),e.TgZ(13,"div",6),e._UZ(14,"app-input",9),e.qZA()()(),e.TgZ(15,"div",0)(16,"div",6),e._uU(17),e.ALo(18,"titlecase"),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"div",10),e._UZ(21,"app-radio-button",11),e.qZA(),e.YNc(22,Ne,2,1,"div",12),e.qZA()(),e.TgZ(23,"mat-card-actions",13)(24,"submit-btn",14),e.NdJ("onClick",function(){return a.submit()}),e.qZA(),e.YNc(25,De,1,0,"reset-form-btn",15),e.qZA(),e.YNc(26,Je,1,7,"app-material-table",16),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("id",a.formCtrls.id.value),e.xp6(2),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.from_Year)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.to_Year)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.balance)("submitted",a.submitted),e.xp6(3),e.hij(" ",e.lcZ(18,16,e.lcZ(19,18,"insuranceSide"))," "),e.xp6(4),e.Q6J("control",a.formCtrls.inside_Company)("submitted",a.submitted)("radioList",a.insuranceSideRadio),e.xp6(1),e.Q6J("ngIf",a.formCtrls.inside_Company.value==a.insuranceSide.inside_Company),e.xp6(2),e.Q6J("id",a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",a.formCtrls.id.value>0),e.xp6(1),e.Q6J("ngIf",null==a.dataSource?null:a.dataSource.data))},dependencies:[g.O5,C.a,F._,y.I,N.u,T.J,I.p,v.T,c.a8,c.dn,c.$j,c.hq,S.Ro,l._Y,l.JL,l.sg,g.rS,M.X$]}),i})();function qe(i,o){if(1&i&&e._UZ(0,"app-add-new-btn",46),2&i){const t=e.oxw();e.MGl("url","/localization-setup/",t.moduleId,"/localization-vacations/add"),e.Q6J("params",t.pageParams)}}function Qe(i,o){if(1&i&&e._UZ(0,"app-back-btn",47),2&i){const t=e.oxw();e.MGl("url","/localization-setup/",t.moduleId,"/localization-vacations/index"),e.Q6J("params",t.pageParams)}}function Ue(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"close-dialog-btn",48),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onCloseDialog())}),e.qZA()}}function Be(i,o){if(1&i&&(e.TgZ(0,"div",13),e._UZ(1,"app-input",49),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("control",t.formCtrls.relatedVacationPriority)("submitted",t.submitted)}}function Fe(i,o){if(1&i&&(e.TgZ(0,"div",24),e._UZ(1,"app-check-box",50),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("control",t.formCtrls.isPostedWithRelatedVacation)}}function ke(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",13),e._UZ(2,"app-check-box",51),e.qZA(),e.TgZ(3,"div",13),e._UZ(4,"app-input",52),e.qZA(),e.TgZ(5,"div",13),e._UZ(6,"app-input",53),e.qZA(),e.TgZ(7,"div",13),e._UZ(8,"app-check-box",54),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("control",t.formCtrls.allow_Post),e.xp6(2),e.Q6J("control",t.formCtrls.max_Post_Days)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.post_Period_Month)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.isPostedPreviousYears)}}function Me(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",48),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}function Ye(i,o){if(1&i&&(e.TgZ(0,"mat-tab",9),e.ALo(1,"titlecase"),e.ALo(2,"translate"),e._UZ(3,"app-vacation-age",55),e.qZA()),2&i){const t=e.oxw();e.s9C("label",e.lcZ(1,2,e.lcZ(2,4,"vacationAge"))),e.xp6(3),e.Q6J("vacationId",t.vacationId)}}function ze(i,o){if(1&i&&(e.TgZ(0,"mat-tab",9),e.ALo(1,"titlecase"),e.ALo(2,"translate"),e._UZ(3,"app-vacation-insurance",55),e.qZA()),2&i){const t=e.oxw();e.s9C("label",e.lcZ(1,2,e.lcZ(2,4,"vacationInsurance"))),e.xp6(3),e.Q6J("vacationId",t.vacationId)}}let ee=(()=>{class i extends h.U{constructor(t,a,s){super(),this.vacationServ=t,this.data=a,this.dialogRef=s,this.submitted=!1,this.calculateBalance=[{value:1,label:"hireDate",cssClass:"col-12 col-md-6"},{value:2,label:"earningDate",cssClass:"col-12 col-md-6"}]}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.vacationId=t.vacationId??0}),this.form=this.fb.group({id:[0,{nonNallable:!0}],en_Name:[null,[l.kI.required]],ar_Name:[null,[l.kI.required]],element_ID:[null],monthes_to_get_Balance:[null],allow_Post:[!1],max_Post_Days:[null,[m.dN.gte(0)]],post_Period_Month:[null,[m.dN.gte(0)]],offecial_Vaction_Included:[!1],day_Off_Included:[!1],isRenew:[!1],renew_Day:[null,[m.dN.gte(0)]],renew_Month:[null,[m.dN.gte(0)]],defaultBalance:[null,[m.dN.gte(0)]],renew_Period:[null,[m.dN.gte(0)]],number_of_Earning:[null,[l.kI.required,m.dN.gte(0)]],isDefault:[!1],is_Paid:[!1],canBeRequestedToday:[!1],deductible_Value:[null,[m.dN.gte(0)]],relatedVacationId:[null],relatedVacationPriority:[null,[m.dN.gte(0)]],hasAttashment:[!1],calculate_Balance:[null,[l.kI.required]],calculate_Balance_By_Contract:[!1],number_Days_month:[null,[m.dN.gte(0)]],reportOrder:[null],gender:[null],isPostedPreviousYears:[!1],isPostedWithRelatedVacation:[!1],isEgyptianLaw:[!1],variableCode:[null,[l.kI.required,l.kI.pattern(O.g.variableCode_pattern)]],display_In_Result:[!1]}),this.data.value&&(this.formCtrls.ar_Name.setValue(this.data.value),this.formCtrls.en_Name.setValue(this.data.value))}get formCtrls(){return this.form?.controls}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&(this.getAllVacations(),this.vacationId>0&&this.getVactionById())}submit(){if(this.submitted=!0,this.form.valid){const t={att_Vacation:{id:this.form.value.id,en_Name:this.form.value.en_Name,ar_Name:this.form.value.ar_Name,element_ID:this.form.value.element_ID,monthes_to_get_Balance:this.form.value.monthes_to_get_Balance,allow_Post:this.form.value.allow_Post,max_Post_Days:this.form.value.max_Post_Days,post_Period_Month:this.form.value.post_Period_Month,offecial_Vaction_Included:this.form.value.offecial_Vaction_Included,day_Off_Included:this.form.value.day_Off_Included,isRenew:this.form.value.isRenew,renew_Day:this.form.value.renew_Day,renew_Month:this.form.value.renew_Month,defaultBalance:this.form.value.defaultBalance,renew_Period:this.form.value.renew_Period,number_of_Earning:this.form.value.number_of_Earning,isDefault:this.form.value.isDefault,is_Paid:this.form.value.is_Paid,canBeRequestedToday:this.form.value.canBeRequestedToday,deductible_Value:this.form.value.deductible_Value,relatedVacationId:this.form.value.relatedVacationId,relatedVacationPriority:this.form.value.relatedVacationPriority,hasAttashment:this.form.value.hasAttashment,calculate_Balance:this.form.value.calculate_Balance,calculate_Balance_By_Contract:this.form.value.calculate_Balance_By_Contract,number_Days_month:this.form.value.number_Days_month,reportOrder:this.form.value.reportOrder,gender:this.form.value.gender,isPostedPreviousYears:this.form.value.isPostedPreviousYears,isPostedWithRelatedVacation:this.form.value.isPostedWithRelatedVacation,isEgyptianLaw:this.form.value.isEgyptianLaw},variableCode:this.form.value.variableCode,display_In_Result:this.form.value.display_In_Result};0==t.att_Vacation.id?this.create(t):this.update(t)}}create(t){this.showLoading(),this.vacationServ.create(t).subscribe(a=>{if(a?.message?.messageType==d.u.Success){this.vacationId=a.data.att_Vacation.id,this.formCtrls.id.setValue(this.vacationId);let s=`/attendance-setup/${this.moduleId}/vacations/edit/${this.vacationId}`;this.data.isDialog||this.navigateTo(s),this.addSuccessfullyMsg(a?.message?.messageTypeName),this.formCtrls.element_ID.setValue(a.data.att_Vacation.element_ID),this.data.isDialog&&this.dialogRef.close()}else this.errorList(a?.message?.messages);this.hideLoading()})}update(t){this.showLoading(),this.vacationServ.update(t).subscribe(a=>{a?.message?.messageType==d.u.Success?this.updateSuccessfullyMsg(a?.message?.messageTypeName):(this.errorList(a?.message?.messages),this.hideLoading())})}getVactionById(){this.vacationServ.getById(this.vacationId).subscribe(t=>{if(t.message.messageType==d.u.Success){let a=(0,H.U)(t.data)[0];this.form.patchValue(a)}})}onSelectVacation(t){if(t){let a=t[0];a?(this.formCtrls.renew_Period.setValue(a.renew_Period),this.formCtrls.renew_Day.setValue(a.renew_Day),this.formCtrls.renew_Month.setValue(a.renew_Month),this.formCtrls.renew_Period.disable(),this.formCtrls.renew_Day.disable(),this.formCtrls.renew_Month.disable()):(this.formCtrls.renew_Period.enable(),this.formCtrls.renew_Day.enable(),this.formCtrls.renew_Month.enable())}}clearForm(){this.form.reset({id:0}),this.submitted=!1}onCloseDialog(){this.dialogRef.close()}getAllVacations(){this.vacationServ.getAll().subscribe(t=>{t.message.messageType==d.u.Success?this.vacationList=(0,H.U)(t.data):this.errorList(t?.message?.messages)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(X),e.Y36(W.WI),e.Y36(W.so))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vacation-type"]],features:[e.qOj],decls:77,vars:62,consts:[[1,"row"],["dialogContainer",""],[1,"col-12"],[1,"pright-10","pleft-10","form-card"],["title","vacationType"],["label","addvacationType",3,"url","params",4,"ngIf"],[3,"url","params",4,"ngIf"],[3,"click",4,"ngIf"],[1,"view-tabs-group",3,"dir"],[3,"label"],[1,"container-fluid"],[3,"formGroup"],[1,"row","division","mb-3","px-1","pt-3","pb-0"],[1,"col-md-3","col-12"],["label","en_Name",3,"control","submitted"],["label","ar_Name",3,"control","submitted"],["type","text","label","variableCode",3,"control","submitted"],[3,"control","submitted","filter","appendTo"],["type","number","label","defaultBalance",3,"control","submitted"],["type","number","label","number_Days_month",3,"control","submitted"],["type","number","label","number_of_Earning",3,"control","submitted"],["label","vacationType",3,"control","submitted","filter","List","appendTo","change"],["class","col-md-3 col-12",4,"ngIf"],["class","col-md-3 col-12 p-2",4,"ngIf"],[1,"col-md-3","col-12","p-2"],["label","isRenew",3,"control"],["type","number","label","renew_Period",3,"control","submitted"],["type","number","label","renew_Day",3,"control","submitted"],["type","number","label","renew_Month",3,"control","submitted"],[4,"ngIf"],["type","number","label","deductible_Value",3,"control","submitted"],["type","number","label","monthes_to_get_Balance",3,"control","submitted"],["type","number","label","reportOrder",3,"control","submitted"],[1,"row","division","mb-3","px-1","pt-3"],["label","calculate_Balance_By_Contract",3,"control"],["label","hasAttashment",3,"control"],["label","isDefault",3,"control"],["label","day_Off_Included",3,"control"],["label","offecial_Vaction_Included",3,"control"],["label","is_Paid",3,"control"],["label","canBeRequestedToday",3,"control"],["label","isEgyptianLaw",3,"control"],["label","calculateBalance",3,"control","submitted","radioList"],["align","end"],[3,"id","onClick"],[3,"label",4,"ngIf"],["label","addvacationType",3,"url","params"],[3,"url","params"],[3,"click"],["type","number","label","relatedVacationPriority",3,"control","submitted"],["label","isPostedWithRelatedVacation",3,"control"],["label","allow_Post",3,"control"],["type","number","label","max_Post_Days",3,"control","submitted"],["type","number","label","post_Period_Month",3,"control","submitted"],["label","isPostedPreviousYears",3,"control"],[3,"vacationId"]],template:function(t,a){if(1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0,1)(3,"div",2)(4,"mat-card",3)(5,"mat-card-title"),e._UZ(6,"page-title",4),e.YNc(7,qe,1,2,"app-add-new-btn",5),e.YNc(8,Qe,1,2,"app-back-btn",6),e.YNc(9,Ue,1,0,"close-dialog-btn",7),e.qZA(),e.TgZ(10,"mat-tab-group",8)(11,"mat-tab",9),e.ALo(12,"titlecase"),e.ALo(13,"translate"),e.TgZ(14,"mat-card-content",10)(15,"form",11)(16,"div",12)(17,"div",13),e._UZ(18,"app-input",14),e.qZA(),e.TgZ(19,"div",13),e._UZ(20,"app-input",15),e.qZA(),e.TgZ(21,"div",13),e._UZ(22,"app-input",16),e.qZA(),e.TgZ(23,"div",13),e._UZ(24,"app-gender-dropdown",17),e.qZA(),e.TgZ(25,"div",13),e._UZ(26,"app-input",18),e.qZA(),e.TgZ(27,"div",13),e._UZ(28,"app-input",19),e.qZA(),e.TgZ(29,"div",13),e._UZ(30,"app-input",20),e.qZA(),e.TgZ(31,"div",13)(32,"app-prime-dropdown",21),e.NdJ("change",function(n){return a.onSelectVacation(n)}),e.qZA()(),e.YNc(33,Be,2,2,"div",22),e.YNc(34,Fe,2,1,"div",23),e.qZA(),e.TgZ(35,"div",12)(36,"div",24),e._UZ(37,"app-check-box",25),e.qZA(),e.TgZ(38,"div",13),e._UZ(39,"app-input",26),e.qZA(),e.TgZ(40,"div",13),e._UZ(41,"app-input",27),e.qZA(),e.TgZ(42,"div",13),e._UZ(43,"app-input",28),e.qZA(),e.YNc(44,ke,9,6,"ng-container",29),e.qZA(),e.TgZ(45,"div",12)(46,"div",13),e._UZ(47,"app-input",30),e.qZA(),e.TgZ(48,"div",13),e._UZ(49,"app-input",31),e.qZA(),e.TgZ(50,"div",13),e._UZ(51,"app-input",32),e.qZA()(),e.TgZ(52,"div",33)(53,"div",24),e._UZ(54,"app-check-box",34),e.qZA(),e.TgZ(55,"div",24),e._UZ(56,"app-check-box",35),e.qZA(),e.TgZ(57,"div",24),e._UZ(58,"app-check-box",36),e.qZA(),e.TgZ(59,"div",24),e._UZ(60,"app-check-box",37),e.qZA(),e.TgZ(61,"div",24),e._UZ(62,"app-check-box",38),e.qZA(),e.TgZ(63,"div",24),e._UZ(64,"app-check-box",39),e.qZA(),e.TgZ(65,"div",24),e._UZ(66,"app-check-box",40),e.qZA(),e.TgZ(67,"div",24),e._UZ(68,"app-check-box",41),e.qZA()(),e.TgZ(69,"div",0)(70,"div",2),e._UZ(71,"app-radio-button",42),e.qZA()()()(),e.TgZ(72,"mat-card-actions",43),e.YNc(73,Me,1,0,"reset-form-btn",7),e.TgZ(74,"submit-btn",44),e.NdJ("onClick",function(){return a.submit()}),e.qZA()()(),e.YNc(75,Ye,4,6,"mat-tab",45),e.YNc(76,ze,4,6,"mat-tab",45),e.qZA()()()()),2&t){const s=e.MAs(2);e.xp6(7),e.Q6J("ngIf",a.vacationId>0),e.xp6(1),e.Q6J("ngIf",!a.data.isDialog),e.xp6(1),e.Q6J("ngIf",a.data.isDialog),e.xp6(1),e.Q6J("dir",a.languageService.isArabic?"rtl":"ltr"),e.xp6(1),e.s9C("label",e.lcZ(12,58,e.lcZ(13,60,"vacationType"))),e.xp6(4),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.en_Name)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.ar_Name)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.variableCode)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.gender)("submitted",a.submitted)("filter",!1)("appendTo",null!=a.data&&a.data.isDialog?s:"body"),e.xp6(2),e.Q6J("control",a.formCtrls.defaultBalance)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.number_Days_month)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.number_of_Earning)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.relatedVacationId)("submitted",a.submitted)("filter",!0)("List",a.vacationList)("appendTo",null!=a.data&&a.data.isDialog?s:"body"),e.xp6(1),e.Q6J("ngIf",a.formCtrls.relatedVacationId.value>0),e.xp6(1),e.Q6J("ngIf",a.formCtrls.relatedVacationId.value>0),e.xp6(3),e.Q6J("control",a.formCtrls.isRenew),e.xp6(2),e.Q6J("control",a.formCtrls.renew_Period)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.renew_Day)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.renew_Month)("submitted",a.submitted),e.xp6(1),e.Q6J("ngIf",a.formCtrls.isRenew.value&&!a.formCtrls.relatedVacationId.value),e.xp6(3),e.Q6J("control",a.formCtrls.deductible_Value)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.monthes_to_get_Balance)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.reportOrder)("submitted",a.submitted),e.xp6(3),e.Q6J("control",a.formCtrls.calculate_Balance_By_Contract),e.xp6(2),e.Q6J("control",a.formCtrls.hasAttashment),e.xp6(2),e.Q6J("control",a.formCtrls.isDefault),e.xp6(2),e.Q6J("control",a.formCtrls.day_Off_Included),e.xp6(2),e.Q6J("control",a.formCtrls.offecial_Vaction_Included),e.xp6(2),e.Q6J("control",a.formCtrls.is_Paid),e.xp6(2),e.Q6J("control",a.formCtrls.canBeRequestedToday),e.xp6(2),e.Q6J("control",a.formCtrls.isEgyptianLaw),e.xp6(3),e.Q6J("control",a.formCtrls.calculate_Balance)("submitted",a.submitted)("radioList",a.calculateBalance),e.xp6(2),e.Q6J("ngIf",!a.formCtrls.id.value),e.xp6(1),e.Q6J("id",a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",!a.data.isDialog),e.xp6(1),e.Q6J("ngIf",!a.data.isDialog)}},dependencies:[g.O5,C.a,F._,N.u,D.a,J.J,T.J,I.p,v.T,Le._,$.Lv,x.SP,x.uX,c.a8,c.dn,c.n5,c.hq,S.Ro,k.t,Ze.a,l._Y,l.JL,l.sg,Pe,xe,g.rS,M.X$]}),i})();const Oe=[{path:"version",data:{view:u.S.version},canActivate:[_.r],children:[{path:"",redirectTo:"index",pathMatch:R.U.full},{path:"index",component:ie,data:{view:u.S.version_index},canActivate:[_.r]},{path:"add",component:A.r,data:{view:u.S.add_version},canActivate:[_.r]},{path:"edit/:id",component:A.r,data:{view:u.S.add_version},canActivate:[_.r]}]},{path:"localization-penalties",component:oe,data:{view:u.S.localization_penalties},canActivate:[_.r]},{path:"localization-violation-types",component:Ce,data:{view:u.S.localization_violation_types},canActivate:[_.r]},{path:"localization-violations",data:{view:u.S.localization_violations},children:[{path:"",redirectTo:"index",pathMatch:R.U.full},{path:"index",component:ne,data:{view:u.S.localization_violations_index},canActivate:[_.r]},{path:"add",component:E,data:{view:u.S.localization_add_violation},canActivate:[_.r]},{path:"edit/:violationId",component:E,data:{view:u.S.localization_add_violation},canActivate:[_.r]}]},{path:"localization-penalty-regulations",data:{view:u.S.localization_penalty_regulations},children:[{path:"",redirectTo:"index",pathMatch:R.U.full},{path:"index",component:me,data:{view:u.S.localization_penalty_regulations_index},canActivate:[_.r]},{path:"add",component:j,data:{view:u.S.localization_add_penalty_regulations},canActivate:[_.r]},{path:"edit/:penaltyRegulationId",component:j,data:{view:u.S.localization_add_penalty_regulations},canActivate:[_.r]}]},{path:"localization-vacations",children:[{path:"",redirectTo:"index",pathMatch:R.U.full},{path:"index",component:Se,data:{view:u.S.localization_vacation_index},canActivate:[_.r]},{path:"add",component:ee,data:{view:u.S.localization_add_vacation},canActivate:[_.r]},{path:"edit/:vacationId",component:ee,data:{view:u.S.localization_add_vacation},canActivate:[_.r]}]}];let Ee=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[w.Bz.forChild(Oe),w.Bz]}),i})();var Ge=r(66393),$e=r(70137),Ke=r(59681),je=r(57796);let Xe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.ez,Ee,Ge.m]}),i})();e.B6R(A.r,[g.O5,$e.Q,C.a,N.u,D.a,J.J,T.J,I.p,v.T,c.a8,c.dn,c.n5,c.hq,Ke.n,je.W,l._Y,l.JL,l.sg],[])}}]);