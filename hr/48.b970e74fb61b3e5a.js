"use strict";(self.webpackChunkhr=self.webpackChunkhr||[]).push([[48],{94048:(Ur,ye,r)=>{r.r(ye),r.d(ye,{PersonnelSetupModule:()=>Mr});var d=r(36895),Ie=r(80458),mt=r(36162),h=r(74513),g=r(65938),m=r(22699),u=r(95751),ve=r(66606),Te=r(88367),e=r(94650),ut=r(32326),we=r(61064),_t=r(52682),v=r(46896),x=r(95981),gt=r(40445),z=r(3848),C=r(73546),V=r(44850),ht=r(25054),Y=r(17489),l=r(24006),p=r(15602),c=r(35478),y=r(26315),L=r(18521);let j=(()=>{class a extends L.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeMaritalStatus",t)}update(t){return this.post("Personnel/Employees/Edit_EmployeeMaritalStatus",t)}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeMaritalStatus",{params:{$expand:y.db.comm_Marital_Status,$filter:`PersonID eq ${t}`}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeMaritalStatus",{params:t})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var N=r(70137),A=r(56500),S=r(57566),T=r(4859),b=r(86405),ft=r(17898),De=r(13082),_=r(30671);function Ee(a){return a.map(s=>({...s,originalBirthDateFormat:s.birthDate,dependentName:s.flower_Name,birthDate:c.M.mapDate(s.birthDate),relationship:(0,c._)(s.corE_Family_Relation?.ar_Name,s.corE_Family_Relation?.en_Name)}))}function G(a){return a.map(s=>({...s,status:(0,c._)(s.comm_Military_Status?.ar_Name,s.comm_Military_Status?.en_Name),grade:(0,c._)(s.comm_Military_Grade?.ar_Name,s.comm_Military_Grade?.en_Name),statusDate:c.M.mapDate(s.statusDate),endDate:c.M.mapDate(s.endDate)}))}function Se(a){return a.map(s=>({...s.employeeData,documentName:s.employeeData?.core_Personal_Identity_Type?.identity_TypeTital,originalIssuingDate:s.employeeData?.dateof_issue,originalExpirationDate:s.employeeData?.expire_Date,dateof_issue:c.M.mapDate(s.employeeData?.dateof_issue),expire_Date:c.M.mapDate(s.employeeData?.expire_Date),attachment_En_Name:s.attachment_En_Name,attachmentID:s.attachmentID,attachment:s.attachmentFilePath?"/"+s.attachmentFilePath:""}))}var w=r(93410);function Ct(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.toEdit(i))})("deleteRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("page",t.page)("actions",t.rowFunctions)("isDialogSize",!0)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showFilter",!1)("showSpaceTop",!1)}}let xe=(()=>{class a extends u.U{constructor(t){super(),this.employeeMaritalDataService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["maritalStatus","statusDate","actions"],this.optionalColomns=[],this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_personal_info_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeId>0&&this.getAllMaritalStatus(),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}getList(t,o){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new _.by(null)),this.employeeId>0&&this.checkNoBusinessOrCompany()?this.getAllMaritalStatus():this.isLoaded=!0}getAllMaritalStatus(){this.dataSource=new _.by(null),this.isLoaded=!1,this.employeeMaritalDataService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.dataSource=new _.by(function bt(a){return a.map(s=>({...s,originalDateFormat:s.statusDate,statusDate:c.M.mapDate(s.statusDate),maritalStatus:(0,c._)(s.comm_Marital_Status?.ar_Name,s.comm_Marital_Status?.en_Name)}))}(t.data)),this.isLoaded=!0):this.errorList(t?.message?.messages)})}onDelete(t){let o=this.msgTranslate(t.comm_Marital_Status?.ar_Name,t.comm_Marital_Status?.en_Name);this.deleteDialog(o).subscribe(i=>{i&&this.delete(t)})}delete(t){let o={PersonID:this.employeeId,MaritalID:t.comm_Marital_Status?.id};this.showLoading("table"),this.employeeMaritalDataService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg(i?.message?.messageTypeName),this.getAllMaritalStatus(),this.afterDelete.emit(t)):this.errorList(i?.message?.messages),this.hideLoading("table")})}toEdit(t){this.rowToEdit.emit(t)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(j))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-marital-status-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","isDialogSize","isMatPaginator","showFirstLastButtons","showFilter","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","isDialogSize","isMatPaginator","showFirstLastButtons","showFilter","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,Ct,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,b.Ro]}),a})();var P=r(49274);function yt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",19),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let It=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeMaritalDataService=t,this.dialogRef=o,this.employeeId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.selectedMaritalId=0,this.employeeId=m.w.EmployeeId}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],maritalID:[null,[l.kI.required]],statusDate:[null]}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}get formCtrls(){return this.form.controls}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={EmployeeData:{personID:this.employeeId,maritalID:this.formCtrls.maritalID.value,statusDate:c.M.mapDateReverse(this.formCtrls.statusDate.value)}};0==this.formCtrls.id.value?this.create(t):this.update(t)}}create(t){this.showLoading("personal-info-dialog"),this.employeeMaritalDataService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg(o?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("personal-info-dialog")})}update(t){let o={...t,OriginalEmployeeData:{PersonID:this.employeeId,MaritalID:this.selectedMaritalId}};this.showLoading("personal-info-dialog"),this.employeeMaritalDataService.update(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg(i?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0,this.selectedMaritalId=0):this.errorList(i?.message?.messages),this.hideLoading("personal-info-dialog")})}employeeMaritalToEdit(t){this.form.patchValue(t),this.formCtrls.statusDate.setValue(t.originalDateFormat),this.formCtrls.id.setValue(t.comm_Marital_Status?.id??1),this.selectedMaritalId=t.maritalID}clearForm(){this.form.reset({id:0}),this.submitted=!1}onSave(t){}afterDelete(t){t?.comm_Marital_Status.id==this.formCtrls.id.value&&this.clearForm(),t&&(this.hasUpdate=!0)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(j),e.Y36(g.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee-personal-info-dialog"]],features:[e.qOj],decls:29,vars:25,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","personalInfo",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],[1,"divider-title"],[3,"isPersonal","onSave"],[1,"mtop-20"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-6","col-12"],[3,"control","submitted","filter","appendTo"],["label","date",3,"control","submitted"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5)(7,"p",6),e._uU(8),e.ALo(9,"titlecase"),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"emp-general-info-form",7),e.NdJ("onSave",function(n){return o.onSave(n)}),e.qZA(),e._UZ(12,"mat-divider",8),e.TgZ(13,"div",null,9)(15,"p",6),e._uU(16),e.ALo(17,"titlecase"),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"form",10)(20,"div",11)(21,"div",12),e._UZ(22,"app-marital-status-dropdown",13),e.qZA(),e.TgZ(23,"div",12),e._UZ(24,"app-datepicker",14),e.qZA()()(),e.TgZ(25,"div",15)(26,"submit-btn",16),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(27,yt,1,0,"reset-form-btn",17),e.qZA(),e.TgZ(28,"app-emp-marital-status-table",18),e.NdJ("rowToEdit",function(n){return o.employeeMaritalToEdit(n)})("afterDelete",function(n){return o.afterDelete(n)}),e.qZA()()()),2&t){const i=e.MAs(14);e.Q6J("name","personal-info-dialog"),e.xp6(8),e.hij(" ",e.lcZ(9,17,e.lcZ(10,19,"personalData"))," "),e.xp6(3),e.Q6J("isPersonal",!0),e.xp6(5),e.hij(" ",e.lcZ(17,21,e.lcZ(18,23,"maritalData"))," "),e.xp6(3),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.maritalID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.statusDate)("submitted",o.submitted),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,N.Q,A.J,S.p,v.T,T.lW,V.d,g.uh,g.xY,b.Ro,ft.d,l._Y,l.JL,l.sg,De.u,xe,d.rS,P.X$]}),a})();var vt=r(10266);function Tt(a,s){1&a&&e._UZ(0,"i",6)}function wt(a,s){1&a&&e._UZ(0,"i",7)}function Dt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"a",3),e.NdJ("click",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.click(i))}),e.ALo(1,"translate"),e.YNc(2,Tt,1,0,"i",4),e.YNc(3,wt,1,0,"i",5),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("matTooltip",e.lcZ(1,3,t.isEdit?"edit":"add")),e.xp6(2),e.Q6J("ngIf",!t.isEdit),e.xp6(1),e.Q6J("ngIf",t.isEdit)}}const Et=["*"];let D=(()=>{class a{constructor(){this.isEdit=!1,this.isLoaded=!1,this.onClickIcon=new e.vpe}ngOnInit(){}ngOnChanges(t){}click(t){this.onClickIcon.emit(t)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["card-header"]],inputs:{isEdit:"isEdit",cardTitle:"cardTitle",class:"class",isLoaded:"isLoaded"},outputs:{onClickIcon:"onClickIcon"},features:[e.TTD],ngContentSelectors:Et,decls:7,vars:8,consts:[[1,"cardSectionTitle"],[1,"mb-0"],["matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],["matTooltipPosition","above",3,"matTooltip","click"],["class","ft-plus-square darkBlue",4,"ngIf"],["class","fas fa-pen darkBlue",4,"ngIf"],[1,"ft-plus-square","darkBlue"],[1,"fas","fa-pen","darkBlue"]],template:function(t,o){1&t&&(e.F$t(),e.TgZ(0,"div",0)(1,"h5",1),e._uU(2),e.ALo(3,"titlecase"),e.ALo(4,"translate"),e.qZA(),e.YNc(5,Dt,4,5,"a",2),e.qZA(),e.Hsn(6)),2&t&&(e.Tol(o.class),e.xp6(2),e.hij(" ",e.lcZ(3,4,e.lcZ(4,6,o.cardTitle))," "),e.xp6(3),e.Q6J("ngIf",o.isLoaded))},dependencies:[d.O5,vt.gM,d.rS,P.X$],styles:[".side_title[_ngcontent-%COMP%]{border:none}.side_title[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:500;color:#002a6f}"]}),a})();var St=r(93665);let E=(()=>{class a{constructor(){this.label="",this.labelClass="col-6",this.valueClass="col-6",this.isDate=!1,this.isBool=!1,this.displayPlaceholder=!0}ngOnInit(){"null"==this.value&&(this.value=null)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["card-row-item"]],inputs:{label:"label",labelClass:"labelClass",value:"value",valueClass:"valueClass",isDate:"isDate",isBool:"isBool",displayPlaceholder:"displayPlaceholder"},decls:1,vars:4,consts:[[1,"emp-custom-view",3,"label","value","isDate","isBool"]],template:function(t,o){1&t&&e._UZ(0,"app-view-data-row-item",0),2&t&&e.Q6J("label",o.label)("value",o.value)("isDate",o.isDate)("isBool",o.isBool)},dependencies:[St.l]}),a})(),Z=(()=>{class a{constructor(){this.isTableView=!1,this.employeeId=0,this.toggleTable=new e.vpe}ngOnInit(){}onToggleTable(){this.toggleTable.emit()}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["see-more-btn"]],inputs:{isTableView:"isTableView",employeeId:"employeeId"},outputs:{toggleTable:"toggleTable"},decls:5,vars:6,consts:[[1,"see-more-box"],[1,"view_see_more",3,"click"],[1,"fas","font-size-13",3,"ngClass"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"a",1),e.NdJ("click",function(){return o.onToggleTable()}),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"i",2),e.qZA()()),2&t&&(e.xp6(1),e.ekj("disabled",!o.employeeId),e.xp6(1),e.hij(" ",e.lcZ(3,4,o.isTableView?"see_less":"see_more")," "),e.xp6(2),e.Q6J("ngClass",o.isTableView?"fa-chevron-up":"fa-chevron-down"))},dependencies:[d.mk,P.X$],styles:[".see-more-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%}.see-more-box[_ngcontent-%COMP%]   .view_see_more[_ngcontent-%COMP%]{color:#169ed9!important;font-size:18px;text-decoration:underline!important;margin:0 auto;display:block}"]}),a})();function xt(a,s){1&a&&(e.TgZ(0,"div",14),e._UZ(1,"p-skeleton",15),e.qZA())}function At(a,s){1&a&&(e.TgZ(0,"div",14),e._UZ(1,"p-skeleton",15),e.qZA())}function Zt(a,s){1&a&&(e.TgZ(0,"div",14),e._UZ(1,"p-skeleton",15),e.qZA())}function Lt(a,s){if(1&a&&(e.ynx(0,3),e._UZ(1,"card-row-item",16)(2,"card-row-item",17),e.BQk()),2&a){const t=e.oxw(3);e.xp6(1),e.Q6J("value",null==t.employee?null:t.employee.person.dob)("isDate",!0),e.xp6(1),e.Q6J("value",t.msgTranslate(null==t.employee||null==t.employee.country?null:t.employee.country.ar_Name,null==t.employee||null==t.employee.country?null:t.employee.country.en_NAme))}}function Pt(a,s){if(1&a&&e._UZ(0,"card-row-item",18),2&a){const t=e.oxw(3);e.Q6J("value",t.msgTranslate(null==t.empMarital||null==t.empMarital.comm_Marital_Status?null:t.empMarital.comm_Marital_Status.ar_Name,null==t.empMarital||null==t.empMarital.comm_Marital_Status?null:t.empMarital.comm_Marital_Status.en_Name))}}function Jt(a,s){if(1&a&&(e.TgZ(0,"div",10),e.YNc(1,xt,2,0,"div",11),e.YNc(2,At,2,0,"div",11),e.YNc(3,Zt,2,0,"div",11),e.YNc(4,Lt,3,3,"ng-container",12),e.YNc(5,Pt,1,1,"card-row-item",13),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.isPersonalLoaded),e.xp6(1),e.Q6J("ngIf",!t.isPersonalLoaded),e.xp6(1),e.Q6J("ngIf",!t.isMaritalLoaded),e.xp6(1),e.Q6J("ngIf",t.isPersonalLoaded),e.xp6(1),e.Q6J("ngIf",t.isMaritalLoaded)}}function kt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-emp-marital-status-table",19),e.NdJ("afterDelete",function(i){e.CHM(t);const n=e.oxw(2);return e.KtG(n.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function Nt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,Jt,6,5,"div",7),e.YNc(6,kt,1,2,"app-emp-marital-status-table",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.empMarital||(null==t.employee?null:t.employee.person.dob)||(null==t.employee||null==t.employee.country?null:t.employee.country.ar_Name)||(null==t.employee||null==t.employee.country?null:t.employee.country.en_NAme))("isLoaded",t.isPersonalLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("employeeId",t.employeeId)("isTableView",t.isTableView)}}function Mt(a,s){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",20),2&a&&e.Q6J("rowNo",5)}let Ut=(()=>{class a extends u.U{constructor(t,o){super(),this.empGeneralInfoService=t,this.employeeMaritalDataService=o,this.isPersonalLoaded=!1,this.isMaritalLoaded=!1,this.isTableView=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){this.employee=this.empGeneralInfoService.employee$.getValue(),this.empGeneralInfoService.employee$.subscribe(t=>{this.employee=t,this.personalLoadedFun()}),this.personalLoadedFun()}personalLoadedFun(){this.isPersonalLoaded=!1,null!=this.employee&&this.employeeId>0&&(this.isPersonalLoaded=!0),null==this.employee&&0==this.employeeId&&(this.isPersonalLoaded=!0)}onChangeBusinessAndCompanyId(){this.empMarital=null,this.employeeId>0&&this.checkNoBusinessOrCompany()?this.getAll():this.isMaritalLoaded=!0}getAll(){this.empMarital=null,this.employeeMaritalDataService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{if(t.message.messageType==p.u.Success){let o=t.data;o.some(i=>i.statusDate)?o.sort((i,n)=>new Date(i.statusDate).getTime()-new Date(n.statusDate).getTime()):o.sort((i,n)=>new Date(i.create_Date).getTime()-new Date(n.create_Date).getTime()),this.empMarital=o[o.length-1]}else this.errorList(t?.message?.messages);this.isMaritalLoaded=!0})}openAddEditDialog(){this.dialogsService.addEditDialog(It).afterClosed().subscribe(t=>{t&&(this.isMaritalLoaded=!1,this.getAll())})}afterDelete(t){t&&(this.isMaritalLoaded=!1,this.getAll())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(m.w),e.Y36(j))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-personal-info-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row"],[1,"col-lg-2","col-12"],["cardTitle","personalInfo",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"employeeId","isTableView","toggleTable"],[1,"view-data-row-container"],["class","col m-auto",4,"ngIf"],["class","row",4,"ngIf"],["class","w-25","label","maritalStatus",3,"value",4,"ngIf"],[1,"col","m-auto"],["width","7rem","styleClass","p-mb-2","borderRadius","10px"],["label","dob",1,"w-25",3,"value","isDate"],["label","placeOfBirth",1,"w-25",3,"value"],["label","maritalStatus",1,"w-25",3,"value"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,Nt,9,6,"div",0),e.YNc(1,Mt,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isPersonalLoaded||o.isMaritalLoaded)("ngIfElse",i)}},dependencies:[d.O5,x.E,Y.O,D,E,xe,Z]}),a})();function Ae(a){let s=a.map(t=>({...t.comm_Address,country:(0,c._)(t.comm_Address.comm_Governorate?.comm_Country?.ar_Name,t.comm_Address.comm_Governorate?.comm_Country?.en_NAme),governorate:(0,c._)(t.comm_Address.comm_Governorate?.ar_Name,t.comm_Address.comm_Governorate?.en_Name),address:t.comm_Address.en_Name,primary:t.comm_Address.isVaild}));return s.map(t=>{t.allAddress=`${t.address}, ${t.governorate??"-"}, ${t.country??"-"}`}),s}let $=(()=>{class a extends L.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeAddress",t)}update(t){return this.post("Personnel/Employees/Edit_EmployeeAddress",t)}GetList(t,o){return this.get("Personnel/Employees/GetList_EmployeeAddress",{params:{...o,$filter:`Person_ID eq ${t}`,$expand:`${y.db.comm_Address}.${y.db.comm_Governorate}.${y.db.comm_Country}`}})}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeAddress",{params:{$filter:`Person_ID eq ${t}`,$expand:`${y.db.comm_Address}.${y.db.comm_Governorate}.${y.db.comm_Country}`}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeAddress",{params:t})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var M=r(25273),q=r(12613),Ze=r(59681),Le=r(10225);function qt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.toEdit(i))})("deleteRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let Pe=(()=>{class a extends u.U{constructor(t){super(),this.employeeAddressService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["country","governorate","address","primary","actions"],this.optionalColomns=[],this.isLoaded=!1,this.employeeId=0,this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_contact_address_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new _.by(null)),this.employeeId>0&&this.checkNoBusinessOrCompany()&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new _.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeAddressService.GetList(this.employeeId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==p.u.Success?(this.dataSource=new _.by(Ae(n.data)),this.page.length=n.meta.totalItemCount,this.isLoaded=!0):this.errorList(n?.message?.messages)})}toEdit(t){this.rowToEdit.emit(t)}onDelete(t){this.deleteDialog(t.address).subscribe(i=>{i&&this.delete(t)})}delete(t){let o={Person_ID:this.employeeId,ADDRESS_ID:t.id};this.showLoading("table"),this.employeeAddressService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg(i?.message?.messageTypeName),this.afterDelete.emit(t),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize)):this.errorList(i?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36($))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-address-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,qt,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,b.Ro]}),a})();function Ot(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",19),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let Vt=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeAddressService=t,this.dialogRef=o,this.employeeId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_contact_address_sec)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],countryId:[null,[l.kI.required]],Governorate_ID:[null,[l.kI.required]],address:[null,[l.kI.required]],primary:[null]}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}get formCtrls(){return this.form.controls}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={EmployeeData:{Person_ID:this.employeeId,Comm_Address:{ID:this.form.value.id,Governorate_ID:this.form.value.Governorate_ID,En_Name:this.form.value.address,IsVaild:this.form.value.primary??!1}}};0==t.EmployeeData.Comm_Address.ID?this.create(t):this.update(t)}}create(t){this.showLoading("dialog"),this.employeeAddressService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg(o?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){this.showLoading("dialog"),this.employeeAddressService.update(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg(o?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}employeeAddressToEdit(t){this.form.patchValue(t),this.formCtrls.countryId.setValue(t.comm_Governorate.comm_Country.id),this.formCtrls.Governorate_ID.setValue(t.governorate_ID)}afterDelete(t){t?.id==this.formCtrls.id.value&&this.clearForm(),t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36($),e.Y36(g.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-address-dialog"]],features:[e.qOj],decls:22,vars:20,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","address",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","submitted","filter","appendTo"],[3,"control","countryControl","submitted","filter","appendTo"],["label","address",3,"control","submitted"],[1,"col-md-4","col-sm-6","col-12","mbottom-20","mtop-14"],["label","primary",3,"control"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-country-dropdown",10),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-governorate-by-country-dropdown",11),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"app-input",12),e.qZA(),e.TgZ(16,"div",13),e._UZ(17,"app-check-box",14),e.qZA()()(),e.TgZ(18,"div",15)(19,"submit-btn",16),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(20,Ot,1,0,"reset-form-btn",17),e.qZA(),e.TgZ(21,"emp-address-table",18),e.NdJ("rowToEdit",function(n){return o.employeeAddressToEdit(n)})("afterDelete",function(n){return o.afterDelete(n)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.countryId)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.Governorate_ID)("countryControl",o.formCtrls.countryId)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.address)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.primary),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,M.a,q.u,A.J,S.p,v.T,T.lW,g.uh,g.xY,b.Ro,Ze.n,Le.$,l._Y,l.JL,l.sg,Pe]}),a})();function Bt(a,s){if(1&a&&(e.TgZ(0,"div",10),e._UZ(1,"card-row-item",11)(2,"card-row-item",12)(3,"card-row-item",13)(4,"card-row-item",14),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("value",null==t.employeeAddressInfo?null:t.employeeAddressInfo.country),e.xp6(1),e.Q6J("value",null==t.employeeAddressInfo?null:t.employeeAddressInfo.governorate),e.xp6(1),e.Q6J("value",null==t.employeeAddressInfo?null:t.employeeAddressInfo.address),e.xp6(1),e.Q6J("value",null==t.employeeAddressInfo?null:t.employeeAddressInfo.primary)("isBool",!0)}}function Rt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"emp-address-table",15),e.NdJ("afterDelete",function(i){e.CHM(t);const n=e.oxw(2);return e.KtG(n.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function Yt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,Bt,5,5,"div",7),e.YNc(6,Rt,1,2,"emp-address-table",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.employeeAddressInfo)("isLoaded",t.isAddressLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("employeeId",t.employeeId)("isTableView",t.isTableView)}}function Gt(a,s){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",16),2&a&&e.Q6J("rowNo",4)}let Ht=(()=>{class a extends u.U{constructor(t){super(),this.employeeAddressService=t,this.isAddressLoaded=!1,this.isTableView=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){}onChangeBusinessAndCompanyId(){this.employeeAddressInfo=null,this.employeeId>0&&this.checkNoBusinessOrCompany()?this.GetAllEmpAddress():this.isAddressLoaded=!0}GetAllEmpAddress(){return this.employeeAddressService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{if(t.message.messageType==p.u.Success){this.isAddressLoaded=!0;let o=Ae(t.data).reverse();this.employeeAddressInfo=o.find(i=>1==i.primary)??o[0]}else this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(Vt).afterClosed().subscribe(t=>{t&&(this.isAddressLoaded=!1,this.GetAllEmpAddress())})}afterDelete(t){t&&(this.isAddressLoaded=!1,this.GetAllEmpAddress())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36($))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-address-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","address",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"employeeId","isTableView","toggleTable"],[1,"view-data-row-container"],["label","country",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],["label","governorate",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],["label","address",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],["label","primary",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value","isBool"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,Yt,9,6,"div",0),e.YNc(1,Gt,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isAddressLoaded)("ngIfElse",i)}},dependencies:[d.O5,x.E,D,E,Pe,Z]}),a})(),K=(()=>{class a extends L.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeContactType",t)}update(t){return this.post("Personnel/Employees/Edit_EmployeeContactType",t)}GetList(t,o){return this.get("Personnel/Employees/GetList_EmployeeContactType",{params:{...o,$filter:`Person_ID eq ${t}`,$expand:`${y.db.comm_Contact}.${y.db.comm_Contact_Type},${y.db.comm_Contact}.${y.db.comm_Contact_Category}`}})}GetAll(t){return this.get("Personnel/Employees/GetAll_EmployeeContactType",{params:{$filter:`Person_ID eq ${t}`,$expand:`${y.db.comm_Contact}.${y.db.comm_Contact_Type},${y.db.comm_Contact}.${y.db.comm_Contact_Category}`}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeContactType",{params:t})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var Wt=r(99167),zt=r(58092);function jt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.toEdit(i))})("deleteRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("page",t.page)("actions",t.rowFunctions)("showFilter",!1)("isDialogSize",!0)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let Je=(()=>{class a extends u.U{constructor(t){super(),this.employeeContactService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["contactType","contactCategory","contact","primary","display_in_emp_card","actions"],this.optionalColomns=[],this.isLoaded=!1,this.employeeId=0,this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_contact_address_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new _.by(null)),this.checkNoBusinessOrCompany()&&this.employeeId>0&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new _.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeContactService.GetList(this.employeeId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==p.u.Success?(this.dataSource=new _.by(function Ft(a){return a.map(s=>({contactType:(0,c._)(s?.comm_Contact?.comm_Contact_Type?.ar_Name,s?.comm_Contact?.comm_Contact_Type?.en_Name),contactCategory:(0,c._)(s?.comm_Contact?.comm_Contact_Category?.ar_Name,s?.comm_Contact?.comm_Contact_Category?.en_Name),contact:s?.comm_Contact?.value,primary:s?.comm_Contact?.isVaild,display_in_emp_card:s?.comm_Contact?.isShow,person_ID:s.person_ID,contact_ID:s.contact_ID,contacT_TYPE_ID:s.comm_Contact?.contacT_TYPE_ID,contacT_Category_ID:s.comm_Contact?.contacT_Category_ID}))}(n.data)),this.page.length=n.meta.totalItemCount,this.isLoaded=!0):this.errorList(n?.message?.messages)})}toEdit(t){this.rowToEdit.emit(t)}onDelete(t){this.deleteDialog(t.contact).subscribe(i=>{i&&this.delete(t)})}delete(t){let o={Person_ID:this.employeeId,Contact_ID:t.contact_ID};this.showLoading("table"),this.employeeContactService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg(i?.message?.messageTypeName),this.afterDelete.emit(t),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize)):this.errorList(i?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(K))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-contact-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","showFilter","isDialogSize","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","showFilter","isDialogSize","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,jt,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,b.Ro]}),a})();function $t(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",20),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let Kt=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeContactService=t,this.dialogRef=o,this.employeeId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_contact_address_sec)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],contacT_TYPE_ID:[null,[l.kI.required]],contacT_Category_ID:[null],value:[null,[l.kI.required]],isPrimary:[null],isShow:[null]}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}get formCtrls(){return this.form.controls}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={EmployeeData:{Person_ID:this.employeeId,Comm_Contact:{id:this.form.value.id,contacT_TYPE_ID:this.form.value.contacT_TYPE_ID,contacT_Category_ID:this.form.value.contacT_Category_ID,value:this.form.value.value,isVaild:this.form.value.isPrimary??!1,isShow:this.form.value.isShow??!1}}};0==t.EmployeeData.Comm_Contact.id?this.create(t):this.update(t)}}create(t){this.showLoading("dialog"),this.employeeContactService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg(o?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){this.showLoading("dialog"),this.employeeContactService.update(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg(o?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}employeeContactToEdit(t){this.form.patchValue(t),this.formCtrls.value.setValue(t.contact),this.formCtrls.id.setValue(t.contact_ID),this.formCtrls.isPrimary.setValue(t.primary),this.formCtrls.isShow.setValue(t.display_in_emp_card)}afterDelete(t){t.contact_ID==this.formCtrls.id.value&&this.clearForm(),t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}onChangeContactType(t){t?this.formCtrls.value.setValidators([l.kI.pattern(t[0]?.regularExpression)]):this.formCtrls.value.removeValidators([l.kI.pattern(t[0]?.regularExpression)])}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(K),e.Y36(g.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-contact-dialog"]],features:[e.qOj],decls:24,vars:21,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","contact",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","submitted","filter","appendTo","change"],[3,"control","contactTypControl","submitted","filter","appendTo"],["label","contact",3,"control","submitted"],[1,"col-md-4","col-sm-6","col-12","mbottom-14","mtop-14"],["label","primary",3,"control"],["label","display_in_emp_card",3,"control"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9)(11,"app-contact-type-dropdown",10),e.NdJ("change",function(n){return o.onChangeContactType(n)}),e.qZA()(),e.TgZ(12,"div",9),e._UZ(13,"contact-categories-by-contact-dropdown",11),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"app-input",12),e.qZA(),e.TgZ(16,"div",13),e._UZ(17,"app-check-box",14),e.qZA(),e.TgZ(18,"div",13),e._UZ(19,"app-check-box",15),e.qZA()()(),e.TgZ(20,"div",16)(21,"submit-btn",17),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(22,$t,1,0,"reset-form-btn",18),e.qZA(),e.TgZ(23,"emp-contact-table",19),e.NdJ("rowToEdit",function(n){return o.employeeContactToEdit(n)})("afterDelete",function(n){return o.afterDelete(n)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.contacT_TYPE_ID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.contacT_Category_ID)("contactTypControl",o.formCtrls.contacT_TYPE_ID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.value)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.isPrimary),e.xp6(2),e.Q6J("control",o.formCtrls.isShow),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,M.a,q.u,A.J,S.p,v.T,T.lW,g.uh,g.xY,b.Ro,Wt.p,zt.v,l._Y,l.JL,l.sg,Je]}),a})();function Xt(a,s){if(1&a&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&a){const t=e.oxw(),o=t.$implicit,i=t.last;e.xp6(1),e.AsE(" ",o.value," ",i?"":"-"," ")}}function eo(a,s){if(1&a&&(e.TgZ(0,"span")(1,"a",18),e._UZ(2,"i"),e.qZA()()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("href",t.value,e.LSH),e.xp6(1),e.Tol(t.comm_Contact_Category.icon)}}function to(a,s){if(1&a&&(e.ynx(0),e.YNc(1,Xt,2,2,"span",12),e.YNc(2,eo,3,3,"span",12),e.BQk()),2&a){const t=s.$implicit;e.xp6(1),e.Q6J("ngIf",!(null!=t&&null!=t.comm_Contact_Category&&t.comm_Contact_Category.icon)),e.xp6(1),e.Q6J("ngIf",null==t||null==t.comm_Contact_Category?null:t.comm_Contact_Category.icon)}}function oo(a,s){if(1&a&&(e.TgZ(0,"div",13)(1,"p",14),e._uU(2),e.ALo(3,"titlecase"),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",15)(6,"div",16),e.YNc(7,to,3,2,"ng-container",17),e.qZA()()()),2&a){const t=s.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,2,e.lcZ(4,4,t.key))," "),e.xp6(5),e.Q6J("ngForOf",t.value)}}function ao(a,s){1&a&&(e.ynx(0),e._UZ(1,"card-row-item",19),e.BQk())}function io(a,s){if(1&a&&(e.TgZ(0,"div",10),e.YNc(1,oo,8,6,"div",11),e.ALo(2,"keyvalue"),e.YNc(3,ao,2,0,"ng-container",12),e.ALo(4,"json"),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.xi3(2,2,t.empContacts,t.iteration)),e.xp6(2),e.Q6J("ngIf","{}"==e.lcZ(4,5,t.empContacts)||!t.employeeId)}}function so(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"emp-contact-table",20),e.NdJ("afterDelete",function(i){e.CHM(t);const n=e.oxw(2);return e.KtG(n.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function no(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.ALo(4,"json"),e.qZA()(),e.TgZ(5,"div",6),e.YNc(6,io,5,7,"div",7),e.YNc(7,so,1,2,"emp-contact-table",8),e.qZA(),e.TgZ(8,"div",4)(9,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit","{}"!=e.lcZ(4,6,t.empContacts)&&t.employeeId)("isLoaded",t.isContactLoaded),e.xp6(3),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("employeeId",t.employeeId)("isTableView",t.isTableView)}}function lo(a,s){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",21),2&a&&e.Q6J("rowNo",5)}let ro=(()=>{class a extends u.U{constructor(t){super(),this.employeeContactService=t,this.isContactLoaded=!1,this.isTableView=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){}onChangeBusinessAndCompanyId(){this.empContacts=null,this.employeeId>0&&this.checkNoBusinessOrCompany()?this.GetAllEmpContacts():this.isContactLoaded=!0}GetAllEmpContacts(){return this.employeeContactService.GetAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.isContactLoaded=!0,this.empContacts=function Qt(a){let s=[];return a.map(o=>{o.comm_Contact.comm_Contact_Type.displayName=(0,c._)(o.comm_Contact?.comm_Contact_Type.ar_Name,o.comm_Contact?.comm_Contact_Type.en_Name),o.comm_Contact?.isShow&&s.push(o.comm_Contact)}),s.reduce((o,i)=>(o[i.comm_Contact_Type?.displayName]=o[i.comm_Contact_Type?.displayName]||[],o[i.comm_Contact_Type?.displayName].push(i),o),{})}(t.data)):this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(Kt).afterClosed().subscribe(t=>{t&&(this.isContactLoaded=!1,this.GetAllEmpContacts())})}afterDelete(t){t&&(this.isContactLoaded=!1,this.GetAllEmpContacts())}toggleTable(){this.isTableView=!this.isTableView}iteration(t,o){return t.key-o.key}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(K))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-contact-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","contact",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"employeeId","isTableView","toggleTable"],[1,"view-data-row-container"],["class","col-6 col-md-4 col-lg-3  ml-md-1 mr-md-1 mb-2",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-6","col-md-4","col-lg-3","ml-md-1","mr-md-1","mb-2"],[1,"view-data-title"],[1,"view-data-value"],[1,"d-inline-block"],[4,"ngFor","ngForOf"],["target","_blank",1,"mr-1","ml-1","font-medium-3",3,"href"],["label","contact",1,"w-15"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,no,10,8,"div",0),e.YNc(1,lo,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isContactLoaded)("ngIfElse",i)}},dependencies:[d.sg,d.O5,x.E,D,E,Je,Z,d.Ts,d.rS,d.Nd,P.X$]}),a})();var J=r(78937),Q=r(43949),X=r(87181),po=r(88834);function co(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",1),e.NdJ("onChangePage",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.toEdit(i))})("deleteRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("page",t.page)("actions",t.rowFunctions)("isDialogSize",!0)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showFilter",!1)("showSpaceTop",!1)}}let ke=(()=>{class a extends u.U{constructor(t){super(),this.employeeDependantService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["dependentName","relationship","birthDate","phoneNumber","isEmergcy","actions"],this.optionalColomns=[],this.isLoaded=!1,this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_dependants_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new _.by(null)),this.checkNoBusinessOrCompany()&&this.employeeId>0&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new _.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeDependantService.getList(this.employeeId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==p.u.Success?(this.dataSource=new _.by(Ee(n.data)),this.page.length=n.meta.totalItemCount,this.isLoaded=!0):this.errorList(n?.message?.messages)})}toEdit(t){this.rowToEdit.emit(t)}onDelete(t){this.deleteDialog(t.flower_Name).subscribe(i=>{i&&this.delete(t)})}delete(t){this.showLoading("table"),this.employeeDependantService.Delete(t.id).subscribe(o=>{o.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg(o?.message?.messageTypeName),this.afterDelete.emit(t),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize)):this.errorList(o?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(X.P))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-dependants-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:1,vars:1,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","isDialogSize","isMatPaginator","showFirstLastButtons","showFilter","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","isDialogSize","isMatPaginator","showFirstLastButtons","showFilter","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&e.YNc(0,co,1,11,"app-material-table",0),2&t&&e.Q6J("ngIf",o.employeeId>0)},dependencies:[d.O5,w.I]}),a})();function mo(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",19),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let uo=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeDependantService=t,this.dialogRef=o,this.employeeId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],name:[null,[l.kI.required,J.w.whiteSpace]],relationship_ID:[null,[l.kI.required]],birthDate:[null,[Q.dN.date]],phoneNumber:[null,[l.kI.pattern(/^(\(?\+?[0-9]*\)?)?[0-9_ \-\(\)\S*$]*$/),J.w.MobileStartsWith,J.w.mobileLength]],isEmergcy:[null]}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}get formCtrls(){return this.form.controls}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={employeeData:{person_ID:this.employeeId,id:this.form.value.id,flower_Name:this.form.value.name,relationship_ID:this.form.value.relationship_ID,birthDate:this.form.value.birthDate,phoneNumber:this.form.value.phoneNumber,isEmergcy:this.form.value.isEmergcy??!1}};0==t.employeeData.id?this.create(t):this.update(t)}}create(t){this.showLoading("dialog"),this.employeeDependantService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg(o?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){this.showLoading("dialog"),this.employeeDependantService.update(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg(o?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}employeeDependantToEdit(t){this.form.patchValue(t),this.formCtrls.name.setValue(t.flower_Name),this.formCtrls.birthDate.setValue(t.originalBirthDateFormat)}afterDelete(t){t?.id==this.formCtrls.id.value&&this.clearForm(),t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(X.P),e.Y36(g.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee-dependants-dialog"]],features:[e.qOj],decls:23,vars:18,consts:[["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","dependants",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],["label","name",3,"control","submitted"],[3,"control","submitted","filter","appendTo"],["label","birthDate",3,"control","submitted"],["label","phone",3,"control","submitted"],[1,"col-md-4","col-sm-6","col-12","mbottom-20","mtop-14"],["label","emergencyContact",3,"control"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"h4"),e._UZ(2,"page-title",1),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(4,"i",3),e.qZA()(),e.TgZ(5,"mat-dialog-content",4,5)(7,"form",6)(8,"div",7)(9,"div",8),e._UZ(10,"app-input",9),e.qZA(),e.TgZ(11,"div",8),e._UZ(12,"app-relationship-dropdown",10),e.qZA(),e.TgZ(13,"div",8),e._UZ(14,"app-datepicker",11),e.qZA(),e.TgZ(15,"div",8),e._UZ(16,"app-input",12),e.qZA(),e.TgZ(17,"div",13),e._UZ(18,"app-check-box",14),e.qZA()()(),e.TgZ(19,"div",15)(20,"submit-btn",16),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(21,mo,1,0,"reset-form-btn",17),e.qZA(),e.TgZ(22,"app-emp-dependants-table",18),e.NdJ("rowToEdit",function(n){return o.employeeDependantToEdit(n)})("afterDelete",function(n){return o.afterDelete(n)}),e.qZA()()),2&t){const i=e.MAs(6);e.xp6(7),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.name)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.relationship_ID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.birthDate)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.phoneNumber)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.isEmergcy),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,N.Q,M.a,q.u,A.J,S.p,v.T,T.lW,g.uh,g.xY,po.Q,l._Y,l.JL,l.sg,ke]}),a})();var f=r(37340);function _o(a,s=!1){return(0,f.X$)("fadeIn",[(0,f.eR)(":enter",[(0,f.oB)(s?{opacity:0,height:0}:{opacity:0}),(0,f.jt)(a,(0,f.oB)(s?{opacity:1,height:"fit-content"}:{opacity:1}))])])}function go(a,s=!1){return(0,f.X$)("fadeOut",[(0,f.eR)(":leave",[(0,f.jt)(a,(0,f.oB)(s?{opacity:0,height:0}:{opacity:0}))])])}function ho(a,s,t=!1){return(0,f.X$)("fadeInOut",[(0,f.eR)(":enter",[(0,f.oB)(t?{opacity:0,height:0}:{opacity:0}),(0,f.jt)(a,(0,f.oB)(t?{opacity:1,height:"fit-content"}:{opacity:1}))]),(0,f.eR)(":leave",[(0,f.jt)(s,(0,f.oB)(t?{opacity:0,height:0}:{opacity:0}))])])}function fo(a,s){1&a&&(e.TgZ(0,"span"),e._uU(1),e._UZ(2,"i",19),e.qZA()),2&a&&(e.xp6(1),e.hij(" "," "," "))}function bo(a,s){if(1&a&&(e.TgZ(0,"div",10),e._UZ(1,"card-row-item",11)(2,"card-row-item",12)(3,"card-row-item",13),e.TgZ(4,"div",14)(5,"p",15),e._uU(6),e.ALo(7,"titlecase"),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"div",16)(10,"div",17),e._uU(11),e.qZA(),e.YNc(12,fo,3,1,"span",18),e.qZA()()()),2&a){const t=e.oxw(2);let o;e.xp6(1),e.Q6J("value",null==t.empDependant?null:t.empDependant.flower_Name),e.xp6(1),e.Q6J("value",null==t.empDependant?null:t.empDependant.relationship),e.xp6(1),e.Q6J("value",null==t.empDependant?null:t.empDependant.birthDate),e.xp6(3),e.hij(" ",e.lcZ(7,6,e.lcZ(8,8,"phoneNumber"))," "),e.xp6(5),e.hij(" ",null!==(o=null==t.empDependant?null:t.empDependant.phoneNumber)&&void 0!==o?o:"---"," "),e.xp6(1),e.Q6J("ngIf",null==t.empDependant?null:t.empDependant.isEmergcy)}}function Co(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-emp-dependants-table",20),e.NdJ("afterDelete",function(i){e.CHM(t);const n=e.oxw(2);return e.KtG(n.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function yo(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,bo,13,10,"div",7),e.YNc(6,Co,1,2,"app-emp-dependants-table",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.empDependant)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("employeeId",t.employeeId)("isTableView",t.isTableView)}}function Io(a,s){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",21),2&a&&e.Q6J("rowNo",4)}(0,f.X$)("slideInOut",[(0,f.SB)("1",(0,f.oB)({height:"*"})),(0,f.SB)("0",(0,f.oB)({height:"0px"})),(0,f.eR)("1 <=> 0",(0,f.jt)(200))]),(0,f.X$)("slideInOut",[(0,f.SB)("in",(0,f.oB)({"max-height":"500px",opacity:"1",visibility:"visible"})),(0,f.SB)("out",(0,f.oB)({"max-height":"0px",opacity:"0",visibility:"hidden"})),(0,f.eR)("in => out",[(0,f.ru)([(0,f.jt)("400ms ease-in-out",(0,f.oB)({opacity:"0"})),(0,f.jt)("600ms ease-in-out",(0,f.oB)({"max-height":"0px"})),(0,f.jt)("700ms ease-in-out",(0,f.oB)({visibility:"hidden"}))])]),(0,f.eR)("out => in",[(0,f.ru)([(0,f.jt)("1ms ease-in-out",(0,f.oB)({visibility:"visible"})),(0,f.jt)("600ms ease-in-out",(0,f.oB)({"max-height":"500px"})),(0,f.jt)("800ms ease-in-out",(0,f.oB)({opacity:"1"}))])])]);let vo=(()=>{class a extends u.U{constructor(t){super(),this.employeeDependantService=t,this.isLoaded=!1,this.isTableView=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){}onChangeBusinessAndCompanyId(){this.empDependant=null,this.employeeId>0&&this.checkNoBusinessOrCompany()?this.getAllDependant():this.isLoaded=!0}getAllDependant(){this.empDependant=null,this.employeeDependantService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{if(t.message.messageType==p.u.Success){let o=Ee(t.data);this.empDependant=o.find(i=>1==i.isEmergcy)??o[0],this.isLoaded=!0}else this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(uo).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAllDependant())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAllDependant())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(X.P))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-dependants-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row"],[1,"col-lg-2","col-12"],["cardTitle","dependants",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"employeeId","isTableView","toggleTable"],[1,"view-data-row-container"],["label","name",1,"col-6","col-lg-3","px-0","mb-2",3,"value"],["label","relationship",1,"col-6","col-lg-3","px-0","mb-2",3,"value"],["label","dob",1,"col-6","col-lg-3","px-0","mb-2",3,"value"],[1,"col-6","col-lg-3","px-0","mb-2"],[1,"view-data-title"],[1,"view-data-value"],[1,"d-inline-block"],[4,"ngIf"],[1,"fas","fa-bell","danger"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,yo,9,6,"div",0),e.YNc(1,Io,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.O5,x.E,D,E,ke,Z,d.rS,P.X$],data:{animation:[_o(600),go(300),ho(600,300)]}}),a})(),ee=(()=>{class a extends L.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeMilitaryStatus",t)}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeMilitaryStatus",{params:{$filter:`PersonID eq ${t}`,$expand:`${y.db.comm_Military_Status},${y.db.comm_Military_Grade}`}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeMilitaryStatus",{params:t})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var To=r(19634),wo=r(17503);function Do(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.toEdit(i))})("deleteRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let Ne=(()=>{class a extends u.U{constructor(t){super(),this.employeeMilitaryDataService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["status","grade","statusDate","endDate","actions"],this.optionalColomns=[],this.employeeId=0,this.isLoaded=!1,this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_military_data_sec)}getList(t,o){throw new Error("Method not implemented.")}ngOnChanges(t){t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeId>0&&this.getAll()}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new _.by(null)),this.checkNoBusinessOrCompany()&&this.employeeId>0&&this.getAll()}getAll(){this.dataSource=new _.by(null),this.isLoaded=!1,this.employeeMilitaryDataService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.dataSource=new _.by(G(t.data)),this.isLoaded=!0):this.errorList(t?.message?.messages)})}onDelete(t){this.deleteDialog(t.status).subscribe(i=>{i&&this.delete(t)})}delete(t){let o={PersonID:this.employeeId,MilitaryID:t.militaryID};this.showLoading("table"),this.employeeMilitaryDataService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.afterDelete.emit(t),this.deleteSuccessfullyMsg(i?.message?.messageTypeName),this.getAll()):this.errorList(i?.message?.messages),this.hideLoading("table")})}toEdit(t){this.rowToEdit.emit(t)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ee))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-military-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,Do,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,b.Ro]}),a})();function Eo(a,s){if(1&a&&(e.TgZ(0,"div",9),e._UZ(1,"app-military-grade-dropdown",16),e.qZA()),2&a){const t=e.oxw(),o=e.MAs(7);e.xp6(1),e.Q6J("control",t.formCtrls.gradeID)("submitted",t.submitted)("filter",!0)("appendTo",o)}}function So(a,s){if(1&a&&(e.TgZ(0,"div",9),e._UZ(1,"app-datepicker",17),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("control",t.formCtrls.statusDate)("submitted",t.submitted)("label",1==(null==t.selectedStatus?null:t.selectedStatus.dateMandatory)?"date":"startDate")}}function xo(a,s){if(1&a&&(e.TgZ(0,"div",9),e._UZ(1,"app-datepicker",18),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("control",t.formCtrls.endDate)("submitted",t.submitted)}}function Ao(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",19),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let Zo=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeMilitaryDataService=t,this.dialogRef=o,this.employeeId=0,this.hasUpdate=!1,this.getList=!1,this.mandatoryColomns=["Ser","status","grade","statusDate","endDate","actions"],this.optionalColomns=[],this.isLoaded=!1,this.submitted=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],militaryID:[null,[l.kI.required]],gradeID:[null],statusDate:[null,[Q.dN.date]],endDate:[null,[Q.dN.date]]},{validator:J.w.compareDates("statusDate","endDate")}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}get formCtrls(){return this.form.controls}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={EmployeeData:{PersonID:this.employeeId,militaryID:this.form.value.militaryID}};this.selectedStatus.showGrade&&(t.EmployeeData.gradeID=this.form.value.gradeID),this.selectedStatus.dateMandatory>0&&(t.EmployeeData.statusDate=c.M.mapDateReverse(this.form.value.statusDate),2==this.selectedStatus.dateMandatory&&(t.EmployeeData.endDate=c.M.mapDateReverse(this.form.value.endDate))),this.create(t)}}create(t){this.showLoading("dialog"),this.employeeMilitaryDataService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg(o?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}clearForm(){this.form.reset({id:0}),this.submitted=!1}afterDelete(t){t?.comm_Military_Status.id==this.formCtrls.id.value&&this.clearForm(),t&&(this.hasUpdate=!0)}onChangeStatus(t){this.selectedStatus=t?.length>0?t[0]:null,this.selectedStatus?.showGrade?this.formCtrls.gradeID.setValidators([l.kI.required]):this.formCtrls.gradeID.clearValidators(),this.formCtrls.gradeID.updateValueAndValidity()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ee),e.Y36(g.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee-military-data-dialog"]],features:[e.qOj],decls:19,vars:15,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","militaryData",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","submitted","filter","appendTo","change"],["class","col-md-4 col-sm-6 col-12",4,"ngIf"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","afterDelete"],[3,"control","submitted","filter","appendTo"],[3,"control","submitted","label"],["label","endDate",3,"control","submitted"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9)(11,"app-military-status-dropdown",10),e.NdJ("change",function(n){return o.onChangeStatus(n)}),e.qZA()(),e.YNc(12,Eo,2,4,"div",11),e.YNc(13,So,2,3,"div",11),e.YNc(14,xo,2,2,"div",11),e.qZA()(),e.TgZ(15,"div",12)(16,"submit-btn",13),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(17,Ao,1,0,"reset-form-btn",14),e.qZA(),e.TgZ(18,"app-emp-military-table",15),e.NdJ("afterDelete",function(n){return o.afterDelete(n)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.militaryID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(1),e.Q6J("ngIf",!o.formCtrls.militaryID.value||(null==o.selectedStatus?null:o.selectedStatus.showGrade)),e.xp6(1),e.Q6J("ngIf",!o.formCtrls.militaryID.value||(null==o.selectedStatus?null:o.selectedStatus.dateMandatory)>0),e.xp6(1),e.Q6J("ngIf",2==(null==o.selectedStatus?null:o.selectedStatus.dateMandatory)),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,N.Q,A.J,S.p,v.T,T.lW,g.uh,g.xY,b.Ro,To.e,wo.h,l._Y,l.JL,l.sg,Ne]}),a})();function Lo(a,s){if(1&a&&e._UZ(0,"card-row-item",15),2&a){const t=e.oxw(3);e.Q6J("value",null==t.empMilitary?null:t.empMilitary.grade)}}function Po(a,s){if(1&a&&e._UZ(0,"card-row-item",16),2&a){const t=e.oxw(3);e.Q6J("label",1==(null==t.empMilitary?null:t.empMilitary.comm_Military_Status.dateMandatory)?"date":"startDate")("value",null==t.empMilitary?null:t.empMilitary.statusDate)}}function Jo(a,s){if(1&a&&e._UZ(0,"card-row-item",17),2&a){const t=e.oxw(3);e.Q6J("value",null==t.empMilitary?null:t.empMilitary.endDate)}}function ko(a,s){if(1&a&&(e.TgZ(0,"div",10),e._UZ(1,"card-row-item",11),e.YNc(2,Lo,1,1,"card-row-item",12),e.YNc(3,Po,1,2,"card-row-item",13),e.YNc(4,Jo,1,1,"card-row-item",14),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("value",null==t.empMilitary?null:t.empMilitary.status),e.xp6(1),e.Q6J("ngIf",null==t.empMilitary?null:t.empMilitary.comm_Military_Status.showGrade),e.xp6(1),e.Q6J("ngIf",!t.empMilitary||(null==t.empMilitary?null:t.empMilitary.comm_Military_Status.dateMandatory)>0),e.xp6(1),e.Q6J("ngIf",2==(null==t.empMilitary?null:t.empMilitary.comm_Military_Status.dateMandatory))}}function No(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-emp-military-table",18),e.NdJ("afterDelete",function(i){e.CHM(t);const n=e.oxw(2);return e.KtG(n.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function Mo(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,ko,5,4,"div",7),e.YNc(6,No,1,2,"app-emp-military-table",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.empMilitary)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("employeeId",t.employeeId)("isTableView",t.isTableView)}}function Uo(a,s){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",19),2&a&&e.Q6J("rowNo",4)}let Fo=(()=>{class a extends u.U{constructor(t){super(),this.employeeMilitaryDataService=t,this.isLoaded=!1,this.isTableView=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){}onChangeBusinessAndCompanyId(){this.empMilitary=null,this.employeeId>0&&this.checkNoBusinessOrCompany()?this.getAllEmpMilitary():this.isLoaded=!0}getAllEmpMilitary(){this.empMilitary=null,this.employeeMilitaryDataService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{if(t.message.messageType==p.u.Success)if(t.data.length>1){let o=t.data;const i=t.data.reduce((n,I)=>new Date(n.create_Date).getTime()>new Date(I.statusDate).getTime()?n:I).create_Date;o=o.filter(n=>n.create_Date==i),1==o.length?this.empMilitary=G(o)[0]:(o.sort((n,I)=>new Date(n.statusDate).getTime()-new Date(I.statusDate).getTime()),this.empMilitary=G([o[o.length-1]])[0])}else this.empMilitary=G(t.data)[0];else this.errorList(t?.message?.messages);this.isLoaded=!0})}openAddEditDialog(){this.dialogsService.addEditDialog(Zo).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAllEmpMilitary())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAllEmpMilitary())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ee))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-military-data-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","militaryData",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"employeeId","isTableView","toggleTable"],[1,"view-data-row-container"],["label","status",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],["class","col-6 col-md-4 col-lg-3 px-0 mb-2","label","grade",3,"value",4,"ngIf"],["class","col-6 col-md-4 col-lg-3 px-0 mb-2",3,"label","value",4,"ngIf"],["class","col-6 col-md-4 col-lg-3 px-0 mb-2","label","endDate",3,"value",4,"ngIf"],["label","grade",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],[1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"label","value"],["label","endDate",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,Mo,9,6,"div",0),e.YNc(1,Uo,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.O5,x.E,D,E,Z,Ne]}),a})(),te=(()=>{class a extends L.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeIdentityInformation",t)}update(t){return this.post("Personnel/Employees/Edit_EmployeeIdentityInformation",t)}getList(t,o){return this.get("Personnel/Employees/GetList_EmployeeIdentityInformation",{params:{...o,$filter:`PersonID eq ${t}`,$expand:y.db.Core_Personal_Identity_Type}})}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeIdentityInformation",{params:{$filter:`PersonID eq ${t}`,$expand:y.db.Core_Personal_Identity_Type}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeIdentityInformation",{params:{Id:t}})}DeleteAttachment(t){return this.delete("Personnel/Employees/Delete_EmployeeIdentityInformation_Attachment",{params:{ID:t}})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var oe=r(34292),Qo=r(61962);function qo(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.toEdit(i))})("deleteRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("page",t.page)("actions",t.rowFunctions)("isDialogSize",!0)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showFilter",!1)("showSpaceTop",!1)("attachIconColumnData",t.attachIconColumnData)}}let Me=(()=>{class a extends u.U{constructor(t){super(),this.employeeDocumentsService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["documentName","dateof_issue","expire_Date","identity_Number","attachment","actions"],this.optionalColomns=[],this.attachIconColumnData={columnName:"attachment",icon:"fas fa-file-alt"},this.isLoaded=!1,this.employeeId=0,this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_documents_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new _.by(null)),this.checkNoBusinessOrCompany()&&this.employeeId>0&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new _.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeDocumentsService.getList(this.employeeId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==p.u.Success?(this.dataSource=new _.by(n.data?.length>0?Se(n.data):[]),this.page.length=n?.meta?.totalItemCount,this.isLoaded=!0):this.errorList(n?.message?.messages)})}onDelete(t){let o=this.msgTranslate(t.documentName);this.deleteDialog(o).subscribe(i=>{i&&this.delete(t)})}toEdit(t){this.rowToEdit.emit(t)}delete(t){this.showLoading("table"),this.employeeDocumentsService.Delete(t.empIdentityID).subscribe(o=>{o.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg(o?.message?.messageTypeName),this.hasUpdate=!0,this.afterDelete.emit(t),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize)):this.errorList(o?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(te))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-documents-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","isDialogSize","isMatPaginator","showFirstLastButtons","showFilter","showSpaceTop","attachIconColumnData","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","isDialogSize","isMatPaginator","showFirstLastButtons","showFilter","showSpaceTop","attachIconColumnData","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,qo,1,12,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,b.Ro]}),a})();function Oo(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",20),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let Vo=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeDocumentsService=t,this.dialogRef=o,this.employeeId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.removeFiles=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],documentId:[null,[l.kI.required]],issuingDate:[null,[l.kI.required]],expirationDate:[null,[Q.dN.date]],identity_Number:[null,[Q.dN.digits]],file:[null]},{validator:J.w.compareDates("issuingDate","expirationDate")}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}get formCtrls(){return this.form.controls}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}submit(){if(this.submitted=!0,this.getList=!1,this.removeFiles=!1,this.form.valid){const t={personID:this.employeeId,empIdentityID:this.form.value.id,identity_TypeID:this.form.value.documentId,dateof_issue:c.M.mapDateReverse(this.form.value.issuingDate),expire_Date:c.M.mapDateReverse(this.form.value.expirationDate)??"",identity_Number:this.form.value.identity_Number??"",files:this.form.value.file},o=c.M.objectToFormData(t);0==t.empIdentityID?this.create(o):this.update(o)}}create(t){this.showLoading("dialog"),this.employeeDocumentsService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg(o?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){this.formCtrls.file.value?.id>0&&t.set("files",null),this.showLoading("dialog"),this.employeeDocumentsService.update(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg(o?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}employeeDocumentToEdit(t){this.form.patchValue(t),this.formCtrls.id.setValue(t.empIdentityID),this.formCtrls.documentId.setValue(t.identity_TypeID),this.formCtrls.issuingDate.setValue(t.originalIssuingDate),this.formCtrls.expirationDate.setValue(t.originalExpirationDate),t.attachmentID?(this.showLoading(),this.fileService.downloadByAttachId(t.attachmentID).subscribe(o=>{this.formCtrls.file.setValue({id:t.attachmentID,path:t.attachment,name:t.attachment_En_Name,type:o.type,size:o.size}),this.hideLoading()})):this.formCtrls.file.setValue(null)}clearForm(){this.form.reset({id:0}),this.submitted=!1,this.removeFiles=!0}deleteFile(){this.showLoading(),this.employeeDocumentsService.DeleteAttachment(this.formCtrls.id.value).subscribe(t=>{t.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg(t?.message?.messageTypeName),this.hasUpdate=!0,this.formCtrls.file.reset()):this.errorList(t?.message?.messages),this.hideLoading()})}afterDelete(t){t.empIdentityID==this.formCtrls.id.value&&this.clearForm(),t&&(this.hasUpdate=!0)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(te),e.Y36(g.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee-documents-dialog"]],features:[e.qOj],decls:24,vars:23,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","employeeDocuments",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],["label","documentName",3,"control","submitted","filter","appendTo"],["label","dateof_issue",3,"control","submitted"],["label","expire_Date",3,"control","submitted"],["label","identity_Number",3,"control","submitted"],[1,"col-12"],[3,"control","submitted","multiple","isEdit","removeFiles","ondelete"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-identity-type-dropdown",10),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-datepicker",11),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"app-datepicker",12),e.qZA(),e.TgZ(16,"div",9),e._UZ(17,"app-input",13),e.qZA(),e.TgZ(18,"div",14)(19,"primeng-file-upload",15),e.NdJ("ondelete",function(){return o.deleteFile()}),e.qZA()()()(),e.TgZ(20,"div",16)(21,"submit-btn",17),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(22,Oo,1,0,"reset-form-btn",18),e.qZA(),e.TgZ(23,"app-emp-documents-table",19),e.NdJ("rowToEdit",function(n){return o.employeeDocumentToEdit(n)})("afterDelete",function(n){return o.afterDelete(n)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.documentId)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.issuingDate)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.expirationDate)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.identity_Number)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.file)("submitted",o.submitted)("multiple",!1)("isEdit",o.formCtrls.id.value>0)("removeFiles",o.removeFiles),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,N.Q,M.a,oe.Y,A.J,S.p,v.T,T.lW,g.uh,g.xY,b.Ro,Qo.Q,l._Y,l.JL,l.sg,Me]}),a})();function Bo(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"span")(1,"i",19),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.fileService.downloadFromServer(i.document.attachmentID))}),e.qZA()()}}function Ro(a,s){1&a&&e._uU(0," ---")}function Yo(a,s){if(1&a&&(e.TgZ(0,"div",10),e._UZ(1,"card-row-item",11)(2,"card-row-item",12)(3,"card-row-item",13),e.TgZ(4,"div",14)(5,"p",15),e._uU(6),e.ALo(7,"titlecase"),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"div",16),e.YNc(10,Bo,2,0,"span",17),e.YNc(11,Ro,1,0,"ng-template",null,18,e.W1O),e.qZA()()()),2&a){const t=e.MAs(12),o=e.oxw(2);e.xp6(1),e.Q6J("value",null==o.document?null:o.document.documentName),e.xp6(1),e.Q6J("value",null==o.document?null:o.document.dateof_issue),e.xp6(1),e.Q6J("value",null==o.document?null:o.document.expire_Date),e.xp6(3),e.Oqu(e.lcZ(7,6,e.lcZ(8,8,"attachment"))),e.xp6(4),e.Q6J("ngIf",(null==o.document?null:o.document.attachmentID)>0)("ngIfElse",t)}}function Go(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-emp-documents-table",20),e.NdJ("afterDelete",function(i){e.CHM(t);const n=e.oxw(2);return e.KtG(n.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function Ho(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,Yo,13,10,"div",7),e.YNc(6,Go,1,2,"app-emp-documents-table",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.document)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("employeeId",t.employeeId)("isTableView",t.isTableView)}}function Wo(a,s){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",21),2&a&&e.Q6J("rowNo",4)}let zo=(()=>{class a extends u.U{constructor(t){super(),this.employeeDocumentsService=t,this.isLoaded=!1,this.isTableView=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){}onChangeBusinessAndCompanyId(){this.document=null,this.employeeId>0&&this.checkNoBusinessOrCompany()?this.getAll():this.isLoaded=!0}getAll(){this.document=null,this.employeeDocumentsService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{if(t.message.messageType==p.u.Success){let o=t.data??[];o.sort((i,n)=>new Date(n.employeeData.dateof_issue).getTime()-new Date(i.employeeData.dateof_issue).getTime()),this.document=Se(o)[0],this.isLoaded=!0}else this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(Vo).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAll())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAll())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(te))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-documents-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","employeeDocuments",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"employeeId","isTableView","toggleTable"],[1,"view-data-row-container"],["label","name",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],["label","dateof_issue",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],["label","expire_Date",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],[1,"col-6","col-md-4","col-lg-3","px-0","mb-2"],[1,"view-data-title"],[1,"view-data-value"],[4,"ngIf","ngIfElse"],["noAttach",""],[1,"fas","fa-cloud-download-alt","font-size-20","icon-lightGreen",3,"click"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,Ho,9,6,"div",0),e.YNc(1,Wo,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.O5,x.E,D,E,Z,Me,d.rS,P.X$]}),a})();function jo(a,s){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-personal-info-card"),e.qZA())}function $o(a,s){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-contact-card"),e.qZA())}function Ko(a,s){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-address-card"),e.qZA())}function Xo(a,s){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-dependants-card"),e.qZA())}function ea(a,s){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-military-data-card"),e.qZA())}function ta(a,s){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-documents-card"),e.qZA())}let oa=(()=>{class a extends u.U{constructor(){super(),this.viewsManager=h.S}ngOnInit(){}onModulesChanged(){this.allowedSections=this.getCustomViewChildren(this.getParentViewName,h.S.emp_personal_info_tab)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-personal-info-core"]],inputs:{icon:"icon"},features:[e.qOj],decls:16,vars:6,consts:[[1,"row"],[1,"col-12"],[1,"main-card-title","border-bottom"],["title","personalInformation","color","font-dark",1,"emp-card-title"],[1,"container-fluid","p-0","px-4"],[1,"row","mx-md-n2"],["class","col-12 p-0 px-md-2",4,"ngIf"],[1,"col-12","p-0","px-md-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-title",2),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"mat-card-content",4)(6,"div",5),e.YNc(7,jo,2,0,"div",6),e._UZ(8,"mat-divider"),e.YNc(9,$o,2,0,"div",6),e._UZ(10,"mat-divider"),e.YNc(11,Ko,2,0,"div",6),e._UZ(12,"mat-divider"),e.YNc(13,Xo,2,0,"div",6),e.YNc(14,ea,2,0,"div",6),e.YNc(15,ta,2,0,"div",6),e.qZA()()()()()),2&t&&(e.xp6(7),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_personal_info_sec)),e.xp6(2),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_contact_address_sec)),e.xp6(2),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_contact_address_sec)),e.xp6(2),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_dependants_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_military_data_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_documents_sec)))},dependencies:[d.O5,v.T,C.a8,C.dn,C.n5,V.d,Ut,Ht,ro,vo,Fo,zo]}),a})();var ae=r(60057),ie=r(54316),aa=r(28867),ia=r(59997),sa=r(28888),na=r(13486);function la(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.toEdit(i))})("deleteRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let Ue=(()=>{class a extends u.U{constructor(t){super(),this.employeeEducationService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["institution","major","degree","year","gpaGrade","actions"],this.optionalColomns=[],this.isLoaded=!1,this.employeeId=0,this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_education_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new _.by(null)),this.checkNoBusinessOrCompany()&&this.employeeId>0&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new _.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeEducationService.getList(this.employeeId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==p.u.Success?(this.dataSource=new _.by((0,ae.$8)(n.data)),this.page.length=n.meta.totalItemCount,this.isLoaded=!0):this.errorList(n?.message?.messages)})}toEdit(t){this.rowToEdit.emit(t)}onDelete(t){this.deleteDialog(`${t.degree} - ${t.grade}`).subscribe(i=>{i&&this.delete(t)})}delete(t){let o={PersonID:this.employeeId,GradeID:t.gradeID,AcademicID:t.academicID};this.showLoading("table"),this.employeeEducationService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg(i?.message?.messageTypeName),this.afterDelete.emit(t),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize)):this.errorList(i?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ie.w))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-education-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,la,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,b.Ro]}),a})();function ra(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",18),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let pa=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeEducationService=t,this.dialogRef=o,this.employeeId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_education_sec)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],institutionID:[null,[l.kI.required]],major:[null],academicID:[null,[l.kI.required]],year:[null,[l.kI.required]],gradeID:[null,[l.kI.required]],gpa:[null,[l.kI.required]]}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}get formCtrls(){return this.form.controls}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={Education:{PersonID:this.employeeId,InstitutionID:this.form.value.institutionID,Major:this.form.value.major,GradeID:this.form.value.gradeID,AcademicID:this.form.value.academicID,Year:this.form.value.year,GPA:this.form.value.gpa}};0==this.formCtrls.id.value?this.create(t):this.update(t)}}create(t){this.showLoading("dialog"),this.employeeEducationService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg(o?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){let o={...t,OriginalEducation:{PersonID:this.employeeId,AcademicID:this.selectedEducation.academicID,GradeID:this.selectedEducation.gradeID}};this.showLoading("dialog"),this.employeeEducationService.update(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg(i?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0,this.selectedEducation=null):this.errorList(i?.message?.messages),this.hideLoading("dialog")})}employeeEducationToEdit(t){this.form.patchValue(t),this.formCtrls.id.setValue(t.comm_Education_Degree?.id??1),this.selectedEducation=t}afterDelete(t){t.academicID==this.selectedEducation?.academicID&&t.gradeID==this.selectedEducation?.gradeID&&this.formCtrls.id.value>0&&this.clearForm(),t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ie.w),e.Y36(g.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee-education-dialog"]],features:[e.qOj],decls:26,vars:28,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","education",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","submitted","filter","appendTo"],["label","major",3,"control","submitted"],["label","grade",3,"control","submitted","filter","appendTo"],["label","gpa","type","number",3,"control","submitted"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","iconPositionBefore","disabled","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-institution-dropdown",10),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"app-education-degree-dropdown",10),e.qZA(),e.TgZ(16,"div",9),e._UZ(17,"app-education-year-dropdown",10),e.qZA(),e.TgZ(18,"div",9),e._UZ(19,"app-education-grade-dropdown",12),e.qZA(),e.TgZ(20,"div",9),e._UZ(21,"app-input",13),e.qZA()()(),e.TgZ(22,"div",14)(23,"submit-btn",15),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(24,ra,1,0,"reset-form-btn",16),e.qZA(),e.TgZ(25,"emp-education-table",17),e.NdJ("rowToEdit",function(n){return o.employeeEducationToEdit(n)})("afterDelete",function(n){return o.afterDelete(n)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.institutionID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.major)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.academicID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.year)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.gradeID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.gpa)("submitted",o.submitted),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("iconPositionBefore",!1)("disabled",!o.employeeId),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,M.a,A.J,S.p,v.T,T.lW,g.uh,g.xY,b.Ro,aa.J,ia.Z,sa.A,na.x,l._Y,l.JL,l.sg,Ue]}),a})();function da(a,s){if(1&a&&(e.TgZ(0,"div",10),e._UZ(1,"card-row-item",11)(2,"card-row-item",12)(3,"card-row-item",13)(4,"card-row-item",14)(5,"card-row-item",15),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("value",null==t.empEducation?null:t.empEducation.institution),e.xp6(1),e.Q6J("value",null==t.empEducation?null:t.empEducation.major),e.xp6(1),e.Q6J("value",null==t.empEducation?null:t.empEducation.degree),e.xp6(1),e.Q6J("value",null==t.empEducation?null:t.empEducation.year),e.xp6(1),e.Q6J("value",null==t.empEducation?null:t.empEducation.gpaGrade)}}function ca(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"emp-education-table",16),e.NdJ("afterDelete",function(i){e.CHM(t);const n=e.oxw(2);return e.KtG(n.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function ma(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,da,6,5,"div",7),e.YNc(6,ca,1,2,"emp-education-table",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.empEducation)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("employeeId",t.employeeId)("isTableView",t.isTableView)}}function ua(a,s){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",17),2&a&&e.Q6J("rowNo",5)}let _a=(()=>{class a extends u.U{constructor(t){super(),this.employeeEducationService=t,this.employeeId=0,this.isLoaded=!1,this.isTableView=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){}onChangeBusinessAndCompanyId(){this.empEducation=null,this.employeeId>0&&this.checkNoBusinessOrCompany()?this.getAllByEmployeeId():this.isLoaded=!0}getAllByEmployeeId(){this.empEducation=null,this.employeeEducationService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{if(t.message.messageType==p.u.Success){let o=t.data;o.sort((i,n)=>n.year-i.year),this.empEducation=(0,ae.$8)(o)[0],this.isLoaded=!0}else this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(pa).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAllByEmployeeId())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAllByEmployeeId())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ie.w))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-education-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","education",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"employeeId","isTableView","toggleTable"],[1,"view-data-row-container"],["label","institution",1,"col-4","col-lg","px-0","mb-2",3,"value"],["label","major",1,"col-4","col-lg","px-0","mb-2",3,"value"],["label","degree",1,"col-4","col-lg","px-0","mb-2",3,"value"],["label","year",1,"col-4","col-lg","px-0","mb-2",3,"value"],["label","gpaGrade",1,"col-4","col-lg","px-0","mb-2",3,"value"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,ma,9,6,"div",0),e.YNc(1,ua,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.O5,x.E,D,E,Z,Ue]}),a})(),se=(()=>{class a extends L.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeWorkExperience",t)}update(t){return this.post("Personnel/Employees/Edit_EmployeeWorkExperience",t)}getList(t,o){return this.get("Personnel/Employees/GetList_EmployeeWorkExperience",{params:{...o,$filter:`Person_Instance_ID  eq ${t}`,$expand:`${y.db.Core_Person_Instance}/${y.db.Core_Person}`}})}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeWorkExperience",{params:{$filter:`Person_Instance_ID  eq ${t}`,$expand:`${y.db.Core_Person_Instance}/${y.db.Core_Person}`}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeWorkExperience",{params:{ID:t}})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function ga(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.toEdit(i))})("deleteRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let Fe=(()=>{class a extends u.U{constructor(t){super(),this.empWorkExperienceService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["companyName","department","position","startDate","endDate","actions"],this.optionalColomns=[],this.isLoaded=!1,this.employeeInstanceId=0,this.employeeInstanceId=m.w.EmployeeInstanceId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_work_experience_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeInstanceId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new _.by(null)),this.checkNoBusinessOrCompany()&&this.employeeInstanceId>0&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new _.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.empWorkExperienceService.getList(this.employeeInstanceId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==p.u.Success?(this.dataSource=new _.by((0,ae.PX)(n.data)),this.page.length=n.meta.totalItemCount,this.isLoaded=!0):this.errorList(n?.message?.messages)})}toEdit(t){this.rowToEdit.emit(t)}onDelete(t){let o=this.msgTranslate(t.companyName);this.deleteDialog(o).subscribe(i=>{i&&this.delete(t)})}delete(t){this.showLoading("table"),this.empWorkExperienceService.Delete(t.id).subscribe(o=>{o.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg(o?.message?.messageTypeName),this.afterDelete.emit(t),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize)):this.errorList(o?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(se))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-work-experience-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,ga,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeInstanceId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,b.Ro]}),a})();function ha(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",19),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let fa=(()=>{class a extends u.U{constructor(t,o){super(),this.empWorkExperienceService=t,this.dialogRef=o,this.employeeInstanceId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.employeeInstanceId=m.w.EmployeeInstanceId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_work_experience_sec)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],companyName:[null,[l.kI.required,J.w.whiteSpace]],department:[null],position:[null],startDate:[null,[l.kI.required,Q.dN.date]],endDate:[null,[l.kI.required,Q.dN.date]]},{validator:J.w.compareDates("startDate","endDate")}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}get formCtrls(){return this.form.controls}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={WorkExperience:{person_Instance_ID:this.employeeInstanceId,id:this.form.value.id,companyName:this.form.value.companyName,org_Name:this.form.value.department,job_Title_Name:this.form.value.position,from_Date:c.M.mapDateReverse(this.form.value.startDate),to_Date:c.M.mapDateReverse(this.form.value.endDate)}};0==t.WorkExperience.id?this.create(t):this.update(t)}}create(t){this.showLoading("dialog"),this.empWorkExperienceService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg(o?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){this.showLoading("dialog"),this.empWorkExperienceService.update(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg(o?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}employeeWorkExperienceToEdit(t){this.form.patchValue(t),this.formCtrls.startDate.setValue(t.from_Date),this.formCtrls.endDate.setValue(t.to_Date)}afterDelete(t){t.id==this.formCtrls.id.value&&this.clearForm(),t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(se),e.Y36(g.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee-work-experience-dialog"]],features:[e.qOj],decls:24,vars:18,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","workExperience",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],["label","companyName",3,"control","submitted"],["label","department",3,"control","submitted"],["label","position",3,"control","submitted"],["label","startDate",3,"control","submitted"],["label","endDate",3,"control","submitted"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-input",10),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"app-input",12),e.qZA(),e.TgZ(16,"div",9),e._UZ(17,"app-datepicker",13),e.qZA(),e.TgZ(18,"div",9),e._UZ(19,"app-datepicker",14),e.qZA()()(),e.TgZ(20,"div",15)(21,"submit-btn",16),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(22,ha,1,0,"reset-form-btn",17),e.qZA(),e.TgZ(23,"emp-work-experience-table",18),e.NdJ("rowToEdit",function(n){return o.employeeWorkExperienceToEdit(n)})("afterDelete",function(n){return o.afterDelete(n)}),e.qZA()()),2&t&&(e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.companyName)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.department)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.position)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.startDate)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.endDate)("submitted",o.submitted),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeInstanceId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList))},dependencies:[d.O5,N.Q,M.a,A.J,S.p,v.T,T.lW,g.uh,g.xY,b.Ro,l._Y,l.JL,l.sg,Fe]}),a})();function ba(a,s){if(1&a&&(e.TgZ(0,"div",10),e._UZ(1,"card-row-item",11)(2,"card-row-item",12)(3,"card-row-item",13)(4,"card-row-item",14)(5,"card-row-item",15),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("value",null==t.empWorkExperience?null:t.empWorkExperience.companyName),e.xp6(1),e.Q6J("value",null==t.empWorkExperience?null:t.empWorkExperience.org_Name),e.xp6(1),e.Q6J("value",null==t.empWorkExperience?null:t.empWorkExperience.job_Title_Name),e.xp6(1),e.Q6J("value",null==t.empWorkExperience?null:t.empWorkExperience.from_Date)("isDate",!0),e.xp6(1),e.Q6J("value",null==t.empWorkExperience?null:t.empWorkExperience.to_Date)("isDate",!0)}}function Ca(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"emp-work-experience-table",16),e.NdJ("afterDelete",function(i){e.CHM(t);const n=e.oxw(2);return e.KtG(n.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function ya(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,ba,6,7,"div",7),e.YNc(6,Ca,1,2,"emp-work-experience-table",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.empWorkExperience)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("employeeId",t.employeeInstanceId)("isTableView",t.isTableView)}}function Ia(a,s){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",17),2&a&&e.Q6J("rowNo",5)}let va=(()=>{class a extends u.U{constructor(t){super(),this.employeeWorkExperienceService=t,this.employeeInstanceId=0,this.isLoaded=!1,this.isTableView=!1,this.employeeInstanceId=m.w.EmployeeInstanceId,m.w.employeeInstanceId$.subscribe(o=>{this.employeeInstanceId=o,this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()?(this.isLoaded=!1,this.getAll()):this.isLoaded=!0})}ngOnInit(){}getAll(){this.empWorkExperience=null,this.employeeWorkExperienceService.getAll(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{if(t.message.messageType==p.u.Success){var o=t.data;o.sort((i,n)=>new Date(n.to_Date).getTime()-new Date(i.to_Date).getTime()),this.empWorkExperience=o[0],this.isLoaded=!0}else this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(fa).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAll())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAll())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(se))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-work-experience-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","workExperience",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"employeeId","isTableView","toggleTable"],[1,"view-data-row-container"],["label","companyName",1,"col-4","col-lg","px-0","mb-2",3,"value"],["label","department",1,"col-4","col-lg","px-0","mb-2",3,"value"],["label","position",1,"col-4","col-lg","px-0","mb-2",3,"value"],["label","startDate",1,"col-4","col-lg","px-0","mb-2",3,"value","isDate"],["label","endDate",1,"col-4","col-lg","px-0","mb-2",3,"value","isDate"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,ya,9,6,"div",0),e.YNc(1,Ia,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.O5,x.E,D,E,Z,Fe]}),a})();function Ta(a,s){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-education-card"),e.qZA())}function wa(a,s){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-work-experience-card"),e.qZA())}let Da=(()=>{class a extends u.U{constructor(){super(),this.viewsManager=h.S}ngOnInit(){}onModulesChanged(){this.allowedSections=this.getCustomViewChildren(this.getParentViewName,h.S.emp_career_tab)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-career-core"]],inputs:{icon:"icon"},features:[e.qOj],decls:9,vars:2,consts:[[1,"row"],[1,"col-12"],[1,"main-card-title","border-bottom"],["title","career","color","font-dark",1,"emp-card-title"],[1,"container-fluid","p-0","px-4"],[1,"row","mx-md-n2"],["class","col-12 p-0 px-md-2",4,"ngIf"],[1,"col-12","p-0","px-md-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-title",2),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"mat-card-content",4)(6,"div",5),e.YNc(7,Ta,2,0,"div",6),e.YNc(8,wa,2,0,"div",6),e.qZA()()()()()),2&t&&(e.xp6(7),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_education_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_work_experience_sec)))},dependencies:[d.O5,v.T,C.a8,C.dn,C.n5,_a,va]}),a})();var Ea=r(71125);function Sa(a,s){1&a&&(e.TgZ(0,"span"),e._uU(1," - "),e.qZA())}function xa(a,s){if(1&a&&(e.TgZ(0,"div"),e._uU(1),e.YNc(2,Sa,2,0,"span",22),e.qZA()),2&a){const t=s.$implicit,o=s.last,i=e.oxw(3);e.xp6(1),e.hij(" ",i.msgTranslate(null==t?null:t.core_Company.ar_Name,null==t||null==t.core_Company?null:t.core_Company.en_Name)," "),e.xp6(1),e.Q6J("ngIf",!o)}}function Aa(a,s){if(1&a&&(e.ynx(0),e.YNc(1,xa,3,2,"div",21),e.BQk()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.employee.sharedCompanies)}}function Za(a,s){1&a&&e._uU(0," ---")}function La(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"card-header",3),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA(),e.TgZ(2,"div",4),e._UZ(3,"card-row-item",5)(4,"card-row-item",6)(5,"card-row-item",7)(6,"card-row-item",8)(7,"card-row-item",9),e.qZA(),e.TgZ(8,"div",10),e._UZ(9,"card-row-item",11)(10,"card-row-item",12)(11,"card-row-item",13)(12,"card-row-item",14),e.TgZ(13,"div",15)(14,"p",16),e._uU(15),e.ALo(16,"titlecase"),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div",17)(19,"div",18),e.YNc(20,Aa,2,1,"ng-container",19),e.YNc(21,Za,1,0,"ng-template",null,20,e.W1O),e.qZA()()()()()}if(2&a){const t=e.MAs(22),o=e.oxw();e.xp6(1),e.Q6J("isEdit",o.employeeId)("isLoaded",o.isLoaded),e.xp6(2),e.Q6J("value",null==o.employee||null==o.employee.person?null:o.employee.person.code),e.xp6(1),e.Q6J("value",null==o.employee||null==o.employee.person?null:o.employee.person.ar_Name),e.xp6(1),e.Q6J("value",null==o.employee||null==o.employee.person?null:o.employee.person.en_Name),e.xp6(1),e.Q6J("value",null==o.employee||null==o.employee.person?null:o.employee.person.nationalid),e.xp6(1),e.Q6J("value",null==o.employee?null:o.employee.companyCode),e.xp6(2),e.Q6J("value",null==o.employee||null==o.employee.person?null:o.employee.person.hireDate)("isDate",!0),e.xp6(1),e.Q6J("value",o.msgTranslate(null==o.employee||null==o.employee.person||null==o.employee.person.core_Gender?null:o.employee.person.core_Gender.ar_Name,null==o.employee||null==o.employee.person||null==o.employee.person.core_Gender?null:o.employee.person.core_Gender.en_NAme)),e.xp6(1),e.Q6J("value",o.msgTranslate(null==o.employee||null==o.employee.person||null==o.employee.person.core_Religion?null:o.employee.person.core_Religion.ar_Name,null==o.employee||null==o.employee.person||null==o.employee.person.core_Religion?null:o.employee.person.core_Religion.en_Name)),e.xp6(1),e.Q6J("value",o.msgTranslate(null==o.employee||null==o.employee.nationality?null:o.employee.nationality.ar_Name,null==o.employee||null==o.employee.nationality?null:o.employee.nationality.en_NAme)),e.xp6(3),e.hij(" ",e.lcZ(16,15,e.lcZ(17,17,"SharedCompanies"))," "),e.xp6(5),e.Q6J("ngIf",null==o.employee?null:o.employee.sharedCompanies)("ngIfElse",t)}}function Pa(a,s){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",23),2&a&&e.Q6J("rowNo",8)}let Ja=(()=>{class a extends u.U{constructor(t){super(),this.empGeneralInfoService=t,this.changeEmployeeId=new e.vpe,this.isLoaded=!1,this.isCanMadeAction=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){this.employee=this.empGeneralInfoService.employee$.getValue(),this.empGeneralInfoService.employee$.subscribe(t=>{this.employee=t,this.isLoadedFun()}),this.isLoadedFun()}isLoadedFun(){this.isLoaded=!1,null!=this.employee&&this.employeeId>0&&(this.isLoaded=!0),null==this.employee&&0==this.employeeId&&(this.isLoaded=!0)}onModulesChanged(){this.allowedSections=this.getCustomViewChildren(this.getParentViewName,h.S.emp_general_info_tab)}openAddEditDialog(){this.businessCompanyParams.CompanyID?this.dialogsService.addEditDialog(Ea.Y,this.employee).afterClosed().subscribe(o=>{o&&o.isUpdate||!o||o.isUpdate||this.router.navigate([`/personnel-setup/${this.moduleId}/employees/edit/${o.data.person.id}`],{queryParams:this.parentParam})}):this.warning("chooseCompanyId")}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(m.w))},a.\u0275cmp=e.Xpm({type:a,selectors:[["employee-general-info-card"]],outputs:{changeEmployeeId:"changeEmployeeId"},features:[e.qOj],decls:3,vars:2,consts:[["class","card-view px-2",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","px-2"],["cardTitle","generalInfo",1,"emp-card-title","pt-2",3,"isEdit","isLoaded","onClickIcon"],[1,"view-data-row-container","mtop-20"],["label","employeeCode",1,"col-4","col-lg","mb-2",3,"value"],["label","ar_Name",1,"col-4","col-lg","mb-2",3,"value"],["label","en_Name",1,"col-4","col-lg","mb-2",3,"value"],["label","nationalid",1,"col-4","col-lg","mb-2",3,"value"],["label","companyCode",1,"col-4","col-lg","mb-2",3,"value"],[1,"view-data-row-container","mt-3"],["label","hireDate",1,"col-4","col-lg","mb-2",3,"value","isDate"],["label","gender",1,"col-4","col-lg","mb-2",3,"value"],["label","religion",1,"col-4","col-lg","mb-2",3,"value"],["label","nationality",1,"col-4","col-lg","mb-2",3,"value"],[1,"col-4","col-lg","mb-2"],[1,"view-data-title"],[1,"view-data-value"],[1,"d-inline-block"],[4,"ngIf","ngIfElse"],["emptyCompanies",""],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,La,23,19,"div",0),e.YNc(1,Pa,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.sg,d.O5,x.E,D,E,d.rS,P.X$]}),a})();function ka(a,s){1&a&&(e.TgZ(0,"div",5),e._UZ(1,"employee-general-info-card"),e.qZA())}let Na=(()=>{class a extends u.U{constructor(){super(),this.viewsManager=h.S}ngOnInit(){}onModulesChanged(){this.allowedSections=this.getCustomViewChildren(this.getParentViewName,h.S.emp_general_info_tab)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-general-info-core"]],inputs:{icon:"icon"},features:[e.qOj],decls:6,vars:1,consts:[[1,"row"],[1,"col-12"],[1,"container-fluid","p-0"],[1,"row","mx-md-n2"],["class","col-12 p-0 px-md-2",4,"ngIf"],[1,"col-12","p-0","px-md-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-content",2)(4,"div",3),e.YNc(5,ka,2,0,"div",4),e.qZA()()()()()),2&t&&(e.xp6(5),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_general_info_sec)))},dependencies:[d.O5,C.a8,C.dn,Ja]}),a})();var U=r(61757);let Ma=(()=>{class a extends L.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeSupervisor",t)}getList(t,o){return this.get("Personnel/Employees/GetList_EmployeeSupervisor",{params:{...o,prtid:t}})}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeSupervisor",{params:{prtid:t}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeSupervisor",{params:t})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var Qe=r(70502);function Ua(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",14),e.NdJ("onChangePage",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.getList(i.pageIndex+1,i.pageSize))})("deleteRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("page",t.page)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)}}let Fa=(()=>{class a extends u.U{constructor(t){super(),this.employeeSupervisorService=t,this.employeeInstanceId=0,this.mandatoryColomns=["supervisor","fromDate","toDate","actions"],this.optionalColomns=[],this.isLoaded=!1,this.submitted=!1,this.employeeInstanceId=m.w.EmployeeInstanceId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_job_info_supervisor_sec)}ngOnInit(){this.form=this.fb.group({supervisor_id:[null,[l.kI.required]],from_Date:[null,[l.kI.required]]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new _.by(null)),this.checkNoBusinessOrCompany()&&this.employeeInstanceId>0&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new _.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeSupervisorService.getList(this.employeeInstanceId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==p.u.Success?(this.dataSource=new _.by((0,U.JB)(n.data)),this.page.length=n.meta.totalItemCount,this.isLoaded=!0):this.errorList(n?.message?.messages)})}submit(){if(this.submitted=!0,this.form.valid){const t={Person_Instance_ID:this.employeeInstanceId,Manager_ID:this.form.value.supervisor_id,From_Date:c.M.mapDateReverse(this.form.value.from_Date)};this.create(t)}}create(t){this.showLoading("supervisor"),this.employeeSupervisorService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg(o?.message?.messageTypeName),this.getList(this.firstPage)):this.errorList(o?.message?.messages),this.hideLoading("supervisor")})}onDelete(t){this.deleteDialog(`${t.supervisor} (${t.fromDate} - ${t.toDate})`).subscribe(i=>{i&&this.delete(t)})}delete(t){let o={prtid:this.employeeInstanceId,mangerid:t.manager_ID,fromdate:c.M.mapDateReverse(t.from_Date),todate:c.M.mapDateReverse(t.tO_Date)};this.showLoading("supervisor"),this.employeeSupervisorService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg(i?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize)):this.errorList(i?.message?.messages),this.hideLoading("supervisor")})}clearForm(){this.form.reset(),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Ma))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-supervisor-section"]],features:[e.qOj],decls:20,vars:17,consts:[[1,"p-1"],["dialogContainer",""],[1,"form-card"],[1,"divider-title"],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],["label","supervisor",3,"control","submitted","filter","appendTo"],["label","date",3,"control","submitted"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"color","disabled","iconPositionBefore","onClick"],[1,"clearfix"],["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","isDialogSize","showFilter","onChangePage","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","isDialogSize","showFilter","onChangePage","deleteRow"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0,1)(2,"mat-card",2)(3,"mat-card-title")(4,"p",3),e._uU(5),e.ALo(6,"titlecase"),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"mat-card-content")(9,"form",4)(10,"div",5)(11,"div",6),e._UZ(12,"app-employee-dropdown",7),e.qZA(),e.TgZ(13,"div",6),e._UZ(14,"app-datepicker",8),e.qZA()()(),e.TgZ(15,"div",9)(16,"submit-btn",10),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e._UZ(17,"div",11),e.qZA(),e.YNc(18,Ua,1,8,"app-material-table",12),e.qZA()()(),e._UZ(19,"ngx-spinner",13)),2&t){const i=e.MAs(1);e.xp6(5),e.hij(" ",e.lcZ(6,13,e.lcZ(7,15,"supervisor"))," "),e.xp6(4),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.supervisor_id)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.from_Date)("submitted",o.submitted),e.xp6(2),e.Q6J("color",o.btn.darkBlue)("disabled",!o.employeeInstanceId)("iconPositionBefore",!1),e.xp6(2),e.Q6J("ngIf",o.employeeInstanceId>0),e.xp6(1),e.Q6J("name","supervisor")}},dependencies:[d.O5,N.Q,w.I,S.p,Qe.J,C.a8,C.dn,C.n5,b.Ro,l._Y,l.JL,l.sg,d.rS,P.X$]}),a})();var O=r(45679),ne=r(33975),qe=r(89609),Oe=r(29467),Qa=r(18183),Ve=r(68506),qa=r(85443),Oa=r(15362),Va=r(50260),Ba=r(99892),Be=r(45390);function Ra(a,s){if(1&a&&e._UZ(0,"app-prime-dropdown",26),2&a){const t=e.oxw(),o=e.MAs(1);e.Q6J("control",t.empStatusCtrls.StatusPropertiesId)("submitted",t.submitted)("List",t.reasonsList)("disable",t.currentAction===t.actionType.assign||t.currentAction===t.actionType.append)("appendTo",o)}}function Ya(a,s){if(1&a&&(e.TgZ(0,"div",6),e._UZ(1,"employees-shared-company",27),e.qZA()),2&a){const t=e.oxw(),o=e.MAs(1);e.xp6(1),e.Q6J("control",t.empStatusCtrls.NewDefaultCompany)("person_ID",t.employeeId)("submitted",t.submitted)("disable",t.currentAction===t.actionType.assign||t.currentAction===t.actionType.append)("appendTo",o)}}function Ga(a,s){if(1&a&&(e.TgZ(0,"div",28),e._UZ(1,"load-policies-group",29),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("control",t.corePersonJobCtrls.policy_groups)("jobControl",t.corePersonJobCtrls.Job_Title_ID)("orgControl",t.corePersonOrgCtrls.Org_ID)("submitted",t.submitted)("filterByOrgAndJob",!0)}}function Ha(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",30),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let Wa=(()=>{class a extends u.U{constructor(t){super(),this.employeeJobInformationService=t,this.changUpdated=new e.vpe,this.employeeId=0,this.employeeInstanceId=0,this.displayedColumns=["status","status_date","status_end_date","org","actions"],this.isLoaded=!1,this.submitted=!1,this.hasUpdate=!1,this.getList=!1,this.Constants=ne.g,this.actionType=O.U,this.jobRowFunctions={basic:[],dropdown:[]},this.orgRowFunctions={basic:[],dropdown:[]},this.statusRowFunctions={basic:[],dropdown:[]},this.employeeId=m.w.EmployeeId,this.employeeInstanceId=m.w.EmployeeInstanceId,m.w.employeeInstanceId$.subscribe(o=>this.employeeInstanceId=o),this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_job_info_sec),this.jobRowFunctions.basic=this.rowFunctions.basic.filter(o=>{let i=o.name.toLocaleLowerCase();return i.includes(O.U.edit)||i.includes(O.U.delete)||i.includes(O.U.close)}),this.orgRowFunctions.basic=this.rowFunctions.basic.filter(o=>!this.jobRowFunctions.basic.map(i=>i.id).includes(o.id)),this.statusRowFunctions.basic=this.rowFunctions.dropdown}ngOnInit(){this.form=this.fb.group({employee_Status:this.fb.group({id:[0,{nonNullable:!0}],Status_ID:[null,[l.kI.required]],From_Date:[null,[l.kI.required]],StatusPropertiesId:[],NewDefaultCompany:[]}),core_Person_Instance_Org:this.fb.group({id:[0,{nonNullable:!0}],orgTypeId:[null],person_Instance_Status_ID:[null],Org_ID:[null],From_Date:[null]}),core_Person_Instance_Job_Title:this.fb.group({id:[0,{nonNullable:!0}],Job_Title_ID:[null],person_Instance_Org_ID:[null],From_Date:[null],Is_Manpower_Affected:[!1],policy_groups:[]})})}get formCtrls(){return this.form.controls}get empStatusCtrls(){return this.form.get("employee_Status").controls}get corePersonOrgCtrls(){return this.form.get("core_Person_Instance_Org").controls}get corePersonJobCtrls(){return this.form.get("core_Person_Instance_Job_Title").controls}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={employee_Status:{PersonInstanceStatus:{id:this.empStatusCtrls.id.value,Person_Instance_ID:this.employeeInstanceId,Status_ID:this.empStatusCtrls.Status_ID.value,From_Date:c.M.transformData(this.empStatusCtrls.From_Date.value),StatusPropertiesId:this.empStatusCtrls.StatusPropertiesId.value},NewDefaultCompany:this.empStatusCtrls.NewDefaultCompany.value},core_Person_Instance_Org:{id:this.corePersonOrgCtrls.id.value,Person_Instance_ID:this.employeeInstanceId,Org_ID:this.corePersonOrgCtrls.Org_ID.value,person_Instance_Status_ID:this.corePersonOrgCtrls.person_Instance_Status_ID.value,From_Date:c.M.transformData(this.corePersonOrgCtrls.From_Date.value)},core_Person_Instance_Job_Title:{id:this.corePersonJobCtrls.id.value,Person_Instance_ID:this.employeeInstanceId,Job_Title_ID:this.corePersonJobCtrls.Job_Title_ID.value,From_Date:c.M.transformData(this.corePersonJobCtrls.From_Date.value),Is_Manpower_Affected:this.corePersonJobCtrls.Is_Manpower_Affected.value,person_Instance_Org_ID:this.corePersonJobCtrls.person_Instance_Org_ID.value},SelectedPolicygroup:this.corePersonJobCtrls.policy_groups.value};this.empStatusCtrls.Status_ID.value==ne.g.endOfServiceID&&(t.core_Person_Instance_Job_Title=null,t.core_Person_Instance_Org=null),this.currentAction===O.U.assign?this.assign({core_Person_Instance_Org:t.core_Person_Instance_Org,core_Person_Instance_Job_Title:t.core_Person_Instance_Job_Title,SelectedPolicygroup:t.SelectedPolicygroup}):this.currentAction===O.U.append?this.append({core_Person_Instance_Job_Title:t.core_Person_Instance_Job_Title,SelectedPolicygroup:t.SelectedPolicygroup}):0==t.employee_Status.PersonInstanceStatus.id?this.create(t):this.update(t)}}create(t){this.showLoading("job"),this.employeeJobInformationService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg(o?.message?.messageTypeName),this.hasUpdate=!0,this.getList=!0,this.changUpdated.emit(!0)):this.errorList(o?.message?.messages),this.hideLoading("job")})}update(t){this.showLoading("job"),this.employeeJobInformationService.update(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg(o?.message?.messageTypeName),this.hasUpdate=!0,this.getList=!0,this.changUpdated.emit(!0)):this.errorList(o?.message?.messages),this.hideLoading("job")})}append(t){this.showLoading("job"),this.employeeJobInformationService.appendJob(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.success(o?.message?.messageTypeName),this.hasUpdate=!0,this.getList=!0,this.changUpdated.emit(!0)):this.errorList(o?.message?.messages),this.hideLoading("job")})}assign(t){this.showLoading("job"),this.employeeJobInformationService.assignOrgAndJob(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.success(o?.message?.messageTypeName),this.hasUpdate=!0,this.getList=!0,this.changUpdated.emit(!0)):this.errorList(o?.message?.messages),this.hideLoading("job")})}jobToEdit(t){this.resetForm();let o=t.status,i=t.org,n=t.job;if(o&&(this.empStatusCtrls.id.setValue(o.id),this.empStatusCtrls.Status_ID.setValue(o.status_ID),this.empStatusCtrls.From_Date.setValue(o.from_Date),this.empStatusCtrls.StatusPropertiesId.setValue(o.statusPropertiesId),this.empStatusCtrls.NewDefaultCompany.setValue(o.statusPropertiesId),this.corePersonOrgCtrls.person_Instance_Status_ID.setValue(o.id)),i){let I=i.core_Org?.core_Org_Structure_Org[0]?.orG_TYPE_ID;this.corePersonOrgCtrls.id.setValue(i.id),this.corePersonOrgCtrls.orgTypeId.setValue(I),this.corePersonOrgCtrls.From_Date.setValue(i.from_Date),this.corePersonJobCtrls.person_Instance_Org_ID.setValue(i.id),setTimeout(()=>{this.corePersonOrgCtrls.Org_ID.setValue(i.org_ID)},100)}n&&(this.corePersonJobCtrls.id.setValue(n.id),this.corePersonJobCtrls.From_Date.setValue(n.from_Date),this.corePersonJobCtrls.Is_Manpower_Affected.setValue(n.is_Manpower_Affected),setTimeout(()=>{this.corePersonJobCtrls.Job_Title_ID.setValue(n.job_Title_ID)},500))}onChangeStatus(t){this.reasonsList=t[0]?.core_Status_Properties,t[0]?.id==ne.g.endOfServiceID?this.empStatusCtrls.StatusPropertiesId.setValidators([l.kI.required]):(this.empStatusCtrls.StatusPropertiesId.removeValidators([l.kI.required]),this.empStatusCtrls.StatusPropertiesId.reset())}afterDelete(t){t.id==this.empStatusCtrls.id.value&&this.clearForm(),t&&(this.hasUpdate=!0,this.changUpdated.emit(!0))}getCurrentAction(t){this.currentAction=t,t==O.U.assign?this.assignValidators():t==O.U.append?this.appendValidators():this.mainValidators()}clearForm(){this.resetForm(),this.submitted=!1,this.currentAction=null}resetForm(){this.form.reset({employee_Status:{id:0},core_Person_Instance_Org:{id:0},core_Person_Instance_Job_Title:{id:0,Is_Manpower_Affected:!1}})}assignValidators(){this.corePersonOrgCtrls.orgTypeId.setValidators([l.kI.required]),this.corePersonOrgCtrls.Org_ID.setValidators([l.kI.required]),this.corePersonOrgCtrls.From_Date.setValidators([l.kI.required]),this.corePersonJobCtrls.Job_Title_ID.setValidators([l.kI.required]),this.corePersonJobCtrls.From_Date.setValidators([l.kI.required]),this.corePersonOrgCtrls.orgTypeId.updateValueAndValidity(),this.corePersonOrgCtrls.Org_ID.updateValueAndValidity(),this.corePersonOrgCtrls.From_Date.updateValueAndValidity(),this.corePersonJobCtrls.Job_Title_ID.updateValueAndValidity(),this.corePersonJobCtrls.From_Date.updateValueAndValidity()}appendValidators(){this.corePersonJobCtrls.Job_Title_ID.setValidators([l.kI.required]),this.corePersonJobCtrls.From_Date.setValidators([l.kI.required]),this.corePersonJobCtrls.Job_Title_ID.updateValueAndValidity(),this.corePersonJobCtrls.From_Date.updateValueAndValidity()}mainValidators(){this.corePersonOrgCtrls.orgTypeId.clearValidators(),this.corePersonOrgCtrls.Org_ID.clearValidators(),this.corePersonOrgCtrls.From_Date.clearValidators(),this.corePersonJobCtrls.Job_Title_ID.clearValidators(),this.corePersonJobCtrls.From_Date.clearValidators(),this.corePersonOrgCtrls.orgTypeId.updateValueAndValidity(),this.corePersonOrgCtrls.Org_ID.updateValueAndValidity(),this.corePersonOrgCtrls.From_Date.updateValueAndValidity(),this.corePersonJobCtrls.Job_Title_ID.updateValueAndValidity(),this.corePersonJobCtrls.From_Date.updateValueAndValidity()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(qe._))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-job-section"]],outputs:{changUpdated:"changUpdated"},features:[e.qOj],decls:46,vars:56,consts:[["dialogContainer",""],[1,"form-card"],[1,"divider-title"],[1,"container-fluid"],[3,"formGroup"],["formGroupName","employee_Status",1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","submitted","filter","disable","appendTo","change"],["label","status_From_Date",3,"control","disabled","submitted"],["label","reasons",3,"control","submitted","List","disable","appendTo",4,"ngIf"],["class","col-md-4 col-sm-6 col-12",4,"ngIf"],["formGroupName","core_Person_Instance_Org",1,"row","ptop-20"],[3,"control","submitted","filter","disable","appendTo"],[3,"orgTypeControl","control","submitted","filter","disable","appendTo"],["label","orgStartDate",3,"control","submitted","disabled"],["formGroupName","core_Person_Instance_Job_Title",1,"row","ptop-20"],[3,"control","organizationControl","organizationControlRequired","submitted","filter","appendTo"],["label","startDate",3,"control","submitted"],[1,"col-md-4","col-sm-6","col-12","mbottom-20","mtop-14"],["label","counted",3,"control"],["class","col-12",4,"ngIf"],["align","end"],[3,"click",4,"ngIf"],["icon","fas fa-save",3,"color","disabled","iconPositionBefore","onClick"],[3,"hasUpdate","rowToEdit","afterDelete","currentAction"],[3,"name"],["label","reasons",3,"control","submitted","List","disable","appendTo"],[3,"control","person_ID","submitted","disable","appendTo"],[1,"col-12"],[3,"control","jobControl","orgControl","submitted","filterByOrgAndJob"],[3,"click"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",null,0)(2,"mat-card",1)(3,"mat-card-title")(4,"p",2),e._uU(5),e.ALo(6,"titlecase"),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"mat-card-content",3)(9,"form",4)(10,"div",5)(11,"div",6)(12,"app-job-status-dropdown",7),e.NdJ("change",function(n){return o.onChangeStatus(n)}),e.qZA()(),e.TgZ(13,"div",6),e._UZ(14,"app-datepicker",8),e.qZA(),e.TgZ(15,"div",6),e.YNc(16,Ra,1,5,"app-prime-dropdown",9),e.qZA(),e.YNc(17,Ya,2,5,"div",10),e.qZA(),e.TgZ(18,"p",2),e._uU(19),e.ALo(20,"titlecase"),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"div",11)(23,"div",6),e._UZ(24,"app-org-types-dropdown-current-structure",12),e.qZA(),e.TgZ(25,"div",6),e._UZ(26,"app-organization-by-org-type-dropdown",13),e.qZA(),e.TgZ(27,"div",6),e._UZ(28,"app-datepicker",14),e.qZA()(),e.TgZ(29,"p",2),e._uU(30),e.ALo(31,"titlecase"),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"div",15)(34,"div",6),e._UZ(35,"app-job-title-by-org-dropdown",16),e.qZA(),e.TgZ(36,"div",6),e._UZ(37,"app-datepicker",17),e.qZA(),e.TgZ(38,"div",18),e._UZ(39,"app-check-box",19),e.qZA(),e.YNc(40,Ga,2,5,"div",20),e.qZA()(),e.TgZ(41,"mat-card-actions",21),e.YNc(42,Ha,1,0,"reset-form-btn",22),e.TgZ(43,"submit-btn",23),e.NdJ("onClick",function(){return o.submit()}),e.qZA()(),e.TgZ(44,"app-emp-job-table",24),e.NdJ("rowToEdit",function(n){return o.jobToEdit(n)})("afterDelete",function(n){return o.afterDelete(n)})("currentAction",function(n){return o.getCurrentAction(n)}),e.qZA()()()(),e._UZ(45,"ngx-spinner",25)),2&t){const i=e.MAs(1);e.xp6(5),e.hij(" ",e.lcZ(6,44,e.lcZ(7,46,"status"))," "),e.xp6(4),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.empStatusCtrls.Status_ID)("submitted",o.submitted)("filter",!0)("disable",o.currentAction===o.actionType.assign||o.currentAction===o.actionType.append)("appendTo",i),e.xp6(2),e.Q6J("control",o.empStatusCtrls.From_Date)("disabled",o.currentAction===o.actionType.assign||o.currentAction===o.actionType.append)("submitted",o.submitted),e.xp6(2),e.Q6J("ngIf",o.empStatusCtrls.Status_ID.value==o.Constants.endOfServiceID),e.xp6(1),e.Q6J("ngIf",o.empStatusCtrls.Status_ID.value==o.Constants.endOfServiceID&&(null==o.empStatusCtrls?null:o.empStatusCtrls.id.value)>0),e.xp6(2),e.hij(" ",e.lcZ(20,48,e.lcZ(21,50,"organizationData"))," "),e.xp6(5),e.Q6J("control",o.corePersonOrgCtrls.orgTypeId)("submitted",o.submitted)("filter",!0)("disable",o.currentAction===o.actionType.append)("appendTo",i),e.xp6(2),e.Q6J("orgTypeControl",o.corePersonOrgCtrls.orgTypeId)("control",o.corePersonOrgCtrls.Org_ID)("submitted",o.submitted)("filter",!0)("disable",o.currentAction===o.actionType.append||!(o.corePersonOrgCtrls.orgTypeId.value>0))("appendTo",i),e.xp6(2),e.Q6J("control",o.corePersonOrgCtrls.From_Date)("submitted",o.submitted)("disabled",o.currentAction===o.actionType.append),e.xp6(2),e.hij(" ",e.lcZ(31,52,e.lcZ(32,54,"jobData"))," "),e.xp6(5),e.Q6J("control",o.corePersonJobCtrls.Job_Title_ID)("organizationControl",o.corePersonOrgCtrls.Org_ID)("organizationControlRequired",!0)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.corePersonJobCtrls.From_Date)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.corePersonJobCtrls.Is_Manpower_Affected),e.xp6(1),e.Q6J("ngIf",o.corePersonJobCtrls.Job_Title_ID.value>0),e.xp6(2),e.Q6J("ngIf",o.empStatusCtrls.id.value>0),e.xp6(1),e.Q6J("color",o.btn.darkBlue)("disabled",!o.employeeId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("hasUpdate",o.getList),e.xp6(1),e.Q6J("name","job")}},dependencies:[d.O5,N.Q,q.u,A.J,S.p,Oe.Y,Qa.P,C.a8,C.dn,C.n5,C.hq,b.Ro,Ve.t,qa.A,Oa.s,Va.v,Ba.P,l._Y,l.JL,l.sg,l.x0,Be.b,d.rS,P.X$],styles:[".nested-tr[_ngcontent-%COMP%]{border-width:1px;padding:5px;background:#f7f7f7;margin:0}.table.table-responsive-sm[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table.table-responsive-sm[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:20%;font-size:13px}.table-container[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:10px!important}"]}),a})(),za=(()=>{class a extends u.U{constructor(t){super(),this.dialogRef=t,this.isJobUpdated=!1,this.isContractUpdated=!1}ngOnInit(){this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}onCloseDialog(){this.dialogRef.close({isJobUpdated:this.isJobUpdated,isContractUpdated:this.isContractUpdated})}jobUpdated(t){this.isJobUpdated=t}contractUpdated(t){this.isContractUpdated=t}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(g.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-job-info-dialog"]],features:[e.qOj],decls:11,vars:0,consts:[["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","jobInfo",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],[3,"changUpdated"],[1,"clearfix"],[1,"mtop-10","mbottom-10"]],template:function(t,o){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"h4"),e._UZ(3,"page-title",1),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",3),e.qZA()(),e.TgZ(6,"mat-dialog-content",4)(7,"app-emp-job-section",5),e.NdJ("changUpdated",function(n){return o.jobUpdated(n)}),e.qZA(),e._UZ(8,"div",6)(9,"mat-divider",7)(10,"emp-supervisor-section"),e.qZA())},dependencies:[v.T,T.lW,V.d,g.uh,g.xY,b.Ro,Fa,Wa],styles:[".mat-dialog-content[_ngcontent-%COMP%]{background:#f0f2f5}"]}),a})();function $a(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"td",27),e._uU(2),e.qZA(),e.TgZ(3,"td",27),e._uU(4),e.qZA(),e.BQk()),2&a){const t=e.oxw().$implicit,o=e.oxw(4);e.xp6(2),e.hij(" ",o.msgTranslate(null==t?null:t.ar_Name,null==t?null:t.en_Name)," "),e.xp6(2),e.hij(" ",o.msgTranslate(null==t||null==t.core_PolicyGroup_Type?null:t.core_PolicyGroup_Type.ar_Name,null==t||null==t.core_PolicyGroup_Type?null:t.core_PolicyGroup_Type.en_Name)," ")}}function Ka(a,s){if(1&a&&(e.TgZ(0,"tr"),e.YNc(1,$a,5,2,"ng-container",7),e.qZA()),2&a){const t=s.$implicit;e.xp6(1),e.Q6J("ngIf",t)}}function Xa(a,s){if(1&a&&(e.TgZ(0,"span")(1,"table",25)(2,"thead")(3,"tr")(4,"th"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"th"),e._uU(8),e.ALo(9,"translate"),e.qZA()()(),e.TgZ(10,"tbody"),e.YNc(11,Ka,2,1,"tr",26),e.qZA()()()),2&a){const t=e.oxw(3);e.xp6(5),e.hij(" ",e.lcZ(6,3,"name")," "),e.xp6(3),e.hij(" ",e.lcZ(9,5,"type")," "),e.xp6(3),e.Q6J("ngForOf",null==t.statusCard?null:t.statusCard.policies)}}function ei(a,s){1&a&&e._uU(0," ---")}function ti(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"div",11),e._UZ(2,"card-row-item",12)(3,"card-row-item",13)(4,"card-row-item",14)(5,"card-row-item",15),e.qZA(),e.TgZ(6,"div",16),e._UZ(7,"card-row-item",17)(8,"card-row-item",18)(9,"card-row-item",19),e.TgZ(10,"div",20)(11,"p",21),e._uU(12),e.ALo(13,"titlecase"),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"div",22),e.YNc(16,Xa,12,7,"span",23),e.YNc(17,ei,1,0,"ng-template",null,24,e.W1O),e.qZA()()(),e.BQk()),2&a){const t=e.MAs(18),o=e.oxw(2);e.xp6(2),e.Q6J("value",null==o.statusCard?null:o.statusCard.status_name),e.xp6(1),e.Q6J("value",null==o.statusCard?null:o.statusCard.status_from_date),e.xp6(1),e.Q6J("value",null==o.statusCard?null:o.statusCard.org_name),e.xp6(1),e.Q6J("value",null==o.statusCard?null:o.statusCard.org_from_date),e.xp6(2),e.Q6J("value",null==o.statusCard?null:o.statusCard.job_name),e.xp6(1),e.Q6J("value",null==o.statusCard?null:o.statusCard.time_in_position),e.xp6(1),e.Q6J("value",null==o.statusCard?null:o.statusCard.time_in_company),e.xp6(3),e.Oqu(e.lcZ(13,10,e.lcZ(14,12,"policyGroups"))),e.xp6(4),e.Q6J("ngIf",(null==o.statusCard||null==o.statusCard.policies?null:o.statusCard.policies.length)>0)("ngIfElse",t)}}function oi(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-emp-job-table",28),e.NdJ("afterDelete",function(i){e.CHM(t);const n=e.oxw(2);return e.KtG(n.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function ai(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,ti,19,14,"ng-container",7),e.YNc(6,oi,1,2,"app-emp-job-table",8),e.qZA(),e.TgZ(7,"div",9)(8,"see-more-btn",10),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.statusCard)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("employeeId",t.employeeInstanceId)("isTableView",t.isTableView)}}function ii(a,s){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",29),2&a&&e.Q6J("rowNo",9)}let si=(()=>{class a extends u.U{constructor(t){super(),this.employeeJobInformationService=t,this.employeeId=0,this.employeeInstanceId=0,this.isLoaded=!1,this.isTableView=!1,this.employeeId=m.w.EmployeeId,this.employeeInstanceId=m.w.EmployeeInstanceId,m.w.employeeInstanceId$.subscribe(o=>{this.employeeInstanceId=o,this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()?(this.isLoaded=!1,this.getStatusPositionCard()):this.isLoaded=!0})}ngOnInit(){}getStatusPositionCard(){return this.employeeJobInformationService.getStatusPositionCard(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.isLoaded=!0,this.statusCard=function ja(a){return{status_name:(0,c._)(a?.core_Person_Instance_Status?.core_Status?.ar_Name,a?.core_Person_Instance_Status?.core_Status?.en_Name),status_from_date:c.M.mapDate(a?.core_Person_Instance_Status?.from_Date),status_to_date:c.M.mapDate(a?.core_Person_Instance_Status?.to_Date),status_properties_name:(0,c._)(a?.core_Person_Instance_Status?.core_Status_Properties?.ar_Name,a?.core_Person_Instance_Status?.core_Status_Properties?.ar_Name),org_name:(0,c._)(a?.positions?.core_Org?.ar_Name,a?.positions?.core_Org?.en_Name),org_from_date:c.M.mapDate(a?.positions?.orgFromDate),job_name:(0,c._)(a?.positions?.core_Job_Title?.ar_Name,a?.positions?.core_Job_Title?.en_Name),time_in_position:a?.positions?.time_In_Position?`${a?.positions?.time_In_Position?.years} yr, ${a?.positions?.time_In_Position?.months} mon, ${a?.positions?.time_In_Position?.days} days`:"---",time_in_company:a?.time_In_Company?`${a?.time_In_Company?.years} yr, ${a?.time_In_Company?.months} mon, ${a?.time_In_Company?.days} days`:"---",contract_name:(0,c._)(a?.core_Contract?.contracT_NO),contract_duration:a?.core_Contract?`${c.M.mapDate(a?.core_Contract?.starT_DATE)}, ${c.M.mapDate(a?.core_Contract?.enD_DATE)}`:"---",policies:a.policies}}(t.data),m.w.employeeStatusPosition$.next(this.statusCard)):this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(za,{},{width:"95vw",height:"98vh"}).afterClosed().subscribe(t=>{t.isJobUpdated&&(this.isLoaded=!1,this.getStatusPositionCard())})}afterDelete(t){t&&(this.isLoaded=!1,this.getStatusPositionCard())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(qe._))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-job-info-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12","px-1"],["cardTitle","jobInfo",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-9","col-12","mx-0"],[4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[1,"col-lg-1","col-12","px-1"],[3,"employeeId","isTableView","toggleTable"],[1,"view-data-row-container","pb-2"],["label","status",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],["label","status_date",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],["label","organization",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],["label","orgDate",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],[1,"view-data-row-container"],["label","job",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],["label","timeInPosition",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],["label","timeInCompany",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],[1,"col-6","col-md-4","col-lg-3","px-0","mb-2"],[1,"view-data-title"],[1,"view-data-value"],[4,"ngIf","ngIfElse"],["noPolicies",""],[1,"table","m-0","smalltable",2,"margin-top","0 !important"],[4,"ngFor","ngForOf"],[1,"border-0"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,ai,9,6,"div",0),e.YNc(1,ii,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.sg,d.O5,x.E,D,E,Z,Be.b,d.rS,P.X$],styles:[".smalltable.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .smalltable.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:11px;padding:3px}"]}),a})(),B=(()=>{class a extends L.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeAttendencePlan",t)}update(t){return this.post("Personnel/Employees/Edit_EmployeeAttendencePlan",t)}getList(t,o){return this.get("Personnel/Employees/GetList_EmployeeAttendencePlan",{params:{...o,$filter:`Person_Instance_ID eq ${t}`,$expand:y.db.att_Plan}})}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeAttendencePlan",{params:{$filter:`Person_Instance_ID eq ${t}`,$expand:y.db.att_Plan}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeAttendencePlan",{params:t})}getCard(t,o){return this.get("Personnel/Employees/Get_AttendancePlanCard",{params:{Person_Instance_ID:t,StartDate:o}})}getAnnualCasualDashboard(t){return this.get("Dashboards/VacationSummary/GetAnnualCasualSummery",{params:{Person_Instance_ID:t}})}getSickLeaveDashboard(t){return this.get("Dashboards/VacationSummary/GetSickLeaveSummery",{params:{Person_Instance_ID:t}})}getWorkingHoursDashboard(t){return this.get("Dashboards/WorkingHoursSummary/GetCurrentMonthWorkingHoursSummary",{params:{Person_Instance_ID:t}})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var ni=r(47414);function li(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.toEdit(i))})("deleteRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let Re=(()=>{class a extends u.U{constructor(t){super(),this.employeeWorkScheduleService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.employeeInstanceId=0,this.mandatoryColomns=["plan","startDate","toDate","is_Apply_Rules","actions"],this.optionalColomns=[],this.isLoaded=!1,this.employeeInstanceId=m.w.EmployeeInstanceId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_work_schedule_sec)}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new _.by(null)),this.checkNoBusinessOrCompany()&&this.employeeInstanceId>0&&this.getList(this.firstPage)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeInstanceId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}getList(t,o){this.dataSource=new _.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeWorkScheduleService.getList(this.employeeInstanceId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==p.u.Success?(this.dataSource=new _.by((0,U.hN)(n.data)),this.page.length=n.meta.totalItemCount,this.isLoaded=!0):this.errorList(n?.message?.messages)})}toEdit(t){this.rowToEdit.emit(t)}onDelete(t){this.deleteDialog(t.plan).subscribe(i=>{i&&this.delete(t)})}delete(t){let o={Person_Instance_ID:this.employeeInstanceId,Plan_ID:t.plan_ID,FromDate:t.fromDate,ToDate:t.toDateOriginal};this.showLoading("table"),this.employeeWorkScheduleService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg(i?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize),this.afterDelete.emit(t)):this.errorList(i?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(B))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-work-schedule-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,li,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeInstanceId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,b.Ro]}),a})();var ri=r(72763);function pi(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"div",17)(2,"strong"),e._uU(3),e.qZA(),e.TgZ(4,"small"),e._uU(5),e.qZA()(),e.BQk()),2&a){const t=e.oxw(2);e.xp6(3),e.Oqu(null==t.vacationDays?null:t.vacationDays.used),e.xp6(2),e.hij("/",null==t.vacationDays?null:t.vacationDays.totalBalance,"")}}function di(a,s){1&a&&(e.TgZ(0,"span",18),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"noVacationBalance")))}function ci(a,s){1&a&&(e.TgZ(0,"p",19),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"vacationDaysUsed"))," "))}function mi(a,s){if(1&a&&(e.TgZ(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11),e.YNc(5,pi,6,2,"ng-container",12),e.YNc(6,di,3,3,"ng-template",null,13,e.W1O),e.qZA(),e.TgZ(8,"div",14),e._UZ(9,"i",15),e.qZA()(),e.YNc(10,ci,4,5,"p",16),e.qZA()()()),2&a){const t=e.MAs(7),o=e.oxw();e.xp6(5),e.Q6J("ngIf",(null==o.vacationDays?null:o.vacationDays.totalBalance)>0)("ngIfElse",t),e.xp6(5),e.Q6J("ngIf",(null==o.vacationDays?null:o.vacationDays.totalBalance)>0)}}function ui(a,s){1&a&&e._UZ(0,"emp-plan-card-dashboard-skeleton")}function _i(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"div",17)(2,"strong"),e._uU(3),e.qZA(),e.TgZ(4,"small"),e._uU(5),e.qZA()(),e.BQk()),2&a){const t=e.oxw(2);e.xp6(3),e.Oqu(null==t.sickDays?null:t.sickDays.used),e.xp6(2),e.hij("/",null==t.sickDays?null:t.sickDays.totalBalance,"")}}function gi(a,s){1&a&&(e.TgZ(0,"span",18),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"noSickBalance")))}function hi(a,s){1&a&&(e.TgZ(0,"p",19),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"sickDaysUsed"))," "))}function fi(a,s){if(1&a&&(e.TgZ(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11),e.YNc(5,_i,6,2,"ng-container",12),e.YNc(6,gi,3,3,"ng-template",null,20,e.W1O),e.qZA(),e.TgZ(8,"div",14),e._UZ(9,"i",21),e.qZA()(),e.YNc(10,hi,4,5,"p",16),e.qZA()()()),2&a){const t=e.MAs(7),o=e.oxw();e.xp6(5),e.Q6J("ngIf",(null==o.sickDays?null:o.sickDays.totalBalance)>0)("ngIfElse",t),e.xp6(5),e.Q6J("ngIf",(null==o.sickDays?null:o.sickDays.totalBalance)>0)}}function bi(a,s){1&a&&e._UZ(0,"emp-plan-card-dashboard-skeleton")}function Ci(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"div",17)(2,"strong"),e._uU(3),e.qZA(),e.TgZ(4,"small"),e._uU(5),e.qZA()(),e.BQk()),2&a){const t=e.oxw(2);e.xp6(3),e.Oqu(null==t.workingHours?null:t.workingHours.hoursAchieved),e.xp6(2),e.hij("/",null==t.workingHours?null:t.workingHours.hoursScheduled,"")}}function yi(a,s){1&a&&(e.TgZ(0,"span",18),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"noWorkingBalance")))}function Ii(a,s){1&a&&(e.TgZ(0,"p",19),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"hoursAchieved"))," "))}function vi(a,s){if(1&a&&(e.TgZ(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11),e.YNc(5,Ci,6,2,"ng-container",12),e.YNc(6,yi,3,3,"ng-template",null,22,e.W1O),e.qZA(),e.TgZ(8,"div",14),e._UZ(9,"i",23),e.qZA()(),e.YNc(10,Ii,4,5,"p",16),e.qZA()()()),2&a){const t=e.MAs(7),o=e.oxw();e.xp6(5),e.Q6J("ngIf",(null==o.workingHours?null:o.workingHours.hoursScheduled)>0)("ngIfElse",t),e.xp6(5),e.Q6J("ngIf",(null==o.workingHours?null:o.workingHours.hoursScheduled)>0)}}function Ti(a,s){1&a&&e._UZ(0,"emp-plan-card-dashboard-skeleton")}let Ye=(()=>{class a extends u.U{constructor(t){super(),this.employeeWorkScheduleService=t,this.employeeInstanceId=0,this.isLoadedVacation=!1,this.isLoadedSick=!1,this.isLoadedWorking=!1,this.employeeInstanceId=m.w.EmployeeInstanceId}ngOnInit(){}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&this.employeeInstanceId>0&&(this.getVacationDays(),this.getSickDays(),this.getWorkingDays())}getVacationDays(){this.employeeWorkScheduleService.getAnnualCasualDashboard(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.vacationDays=t.data,this.isLoadedVacation=!0):this.errorList(t?.message?.messages)})}getSickDays(){this.employeeWorkScheduleService.getSickLeaveDashboard(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.sickDays=t.data,this.isLoadedSick=!0):this.errorList(t?.message?.messages)})}getWorkingDays(){this.employeeWorkScheduleService.getWorkingHoursDashboard(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.workingHours=t.data,this.isLoadedWorking=!0):this.errorList(t?.message?.messages)})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(B))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-workschedule-vacations-cards"]],features:[e.qOj],decls:13,vars:7,consts:[[1,"row","bg-white","p-0","m-0"],[1,"col-12","col-lg-4","mb-sm-1","mb-md-1",3,"ngClass"],["class","card card-vacations-custom card-inverse",4,"ngIf","ngIfElse"],["loadingVacation",""],[1,"col-12","col-lg-4","mb-sm-1","mb-md-1"],["loadingSick",""],["loadingWorking",""],[1,"card","card-vacations-custom","card-inverse"],[1,"card-content"],[1,"card-body"],[1,"media"],[1,"media-body","text-left"],[4,"ngIf","ngIfElse"],["noVacationBalance",""],[1,"media-right","align-self-center"],[1,"fas","fa-umbrella-beach","float-right","darkBlue"],["class","ca-title",4,"ngIf"],[1,"card-text"],[1,"placeholder"],[1,"ca-title"],["noSickBalance",""],[1,"fas","fa-thermometer-three-quarters","float-right","darkBlue"],["noWorkBalance",""],[1,"fas","fa-clock","float-right","darkBlue"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,mi,11,3,"div",2),e.YNc(3,ui,1,0,"ng-template",null,3,e.W1O),e.qZA(),e.TgZ(5,"div",4),e.YNc(6,fi,11,3,"div",2),e.YNc(7,bi,1,0,"ng-template",null,5,e.W1O),e.qZA(),e.TgZ(9,"div",4),e.YNc(10,vi,11,3,"div",2),e.YNc(11,Ti,1,0,"ng-template",null,6,e.W1O),e.qZA()()),2&t){const i=e.MAs(4),n=e.MAs(8),I=e.MAs(12);e.xp6(1),e.Q6J("ngClass",o.languageService.isArabic?"mr-0 pr-0":"ml-0 pl-0"),e.xp6(1),e.Q6J("ngIf",o.isLoadedVacation)("ngIfElse",i),e.xp6(4),e.Q6J("ngIf",o.isLoadedSick)("ngIfElse",n),e.xp6(4),e.Q6J("ngIf",o.isLoadedWorking)("ngIfElse",I)}},dependencies:[d.mk,d.O5,ri.T,d.rS,P.X$],styles:[".card.card-vacations-custom[_ngcontent-%COMP%]{margin:0;background-color:#37476114!important;height:141px;box-shadow:none;border-radius:10px}strong[_ngcontent-%COMP%]{color:#169ed9;font-size:30px}small[_ngcontent-%COMP%]{font-size:20px}.ca-title[_ngcontent-%COMP%]{font-size:18px;text-align:center;margin-top:7px}.ca-title[_ngcontent-%COMP%], .placeholder[_ngcontent-%COMP%], small[_ngcontent-%COMP%]{color:#323232!important}.media-right[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:37px}"]}),a})();function wi(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",19),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let Di=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeWorkScheduleService=t,this.dialogRef=o,this.employeeInstanceId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.isLoadedVacation=!1,this.isLoadedSick=!1,this.isLoadedWorking=!1,this.employeeInstanceId=m.w.EmployeeInstanceId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_work_schedule_sec)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],plan_ID:[null,[l.kI.required]],fromDate:[null,[l.kI.required]],is_Apply_Rules:[null]}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}get formCtrls(){return this.form.controls}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={EmployeeData:{Person_Instance_ID:this.employeeInstanceId,Plan_ID:this.formCtrls.plan_ID.value,FromDate:c.M.mapDateReverse(this.formCtrls.fromDate.value),Is_Apply_Rules:this.formCtrls.is_Apply_Rules.value??!1}};0==this.formCtrls.id.value?this.create(t):this.update(t)}}create(t){this.showLoading("dialog"),this.employeeWorkScheduleService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg(o?.message?.messageTypeName),this.hasUpdate=!0,this.getList=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){let o={...t,OldEmployeeData:{Person_Instance_ID:this.employeeInstanceId,Plan_ID:this.selectedPlan.plan_ID,FromDate:this.selectedPlan.fromDate,ToDate:this.selectedPlan.toDateOriginal}};this.showLoading("dialog"),this.employeeWorkScheduleService.update(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg(i?.message?.messageTypeName),this.hasUpdate=!0,this.getList=!0,this.selectedPlan=null):this.errorList(i?.message?.messages),this.hideLoading("dialog")})}employeeWorkScheduleToEdit(t){this.form.patchValue(t),this.formCtrls.id.setValue(t.plan_ID),this.selectedPlan=t}clearForm(){this.form.reset({id:0}),this.submitted=!1}afterDelete(t){t.plan_ID==this.selectedPlan?.plan_ID&&t.fromDate==this.selectedPlan?.fromDate&&t.toDateOriginal==this.selectedPlan?.toDateOriginal&&this.formCtrls.id.value>0&&this.clearForm(),t&&(this.hasUpdate=!0)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(B),e.Y36(g.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-work-schedule-dialog"]],features:[e.qOj],decls:22,vars:15,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","workSchedule",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[1,"pt-2"],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],["label","plan",3,"control","submitted","filter","appendTo"],["label","startDate",3,"control","submitted"],[1,"col-md-4","col-sm-6","col-12","ptop-15","pbottom-15"],["label","is_Apply_Rules",3,"control"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"div",7),e._UZ(9,"app-emp-workschedule-vacations-cards"),e.qZA(),e.TgZ(10,"form",8)(11,"div",9)(12,"div",10),e._UZ(13,"app-attendance-plan-dropdown",11),e.qZA(),e.TgZ(14,"div",10),e._UZ(15,"app-datepicker",12),e.qZA(),e.TgZ(16,"div",13),e._UZ(17,"app-check-box",14),e.qZA()()(),e.TgZ(18,"div",15)(19,"submit-btn",16),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(20,wi,1,0,"reset-form-btn",17),e.qZA(),e.TgZ(21,"app-emp-work-schedule-table",18),e.NdJ("rowToEdit",function(n){return o.employeeWorkScheduleToEdit(n)})("afterDelete",function(n){return o.afterDelete(n)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(10),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.plan_ID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.fromDate)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.is_Apply_Rules),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeInstanceId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,N.Q,q.u,A.J,S.p,v.T,T.lW,g.uh,g.xY,b.Ro,ni.B,l._Y,l.JL,l.sg,Re,Ye]}),a})();var Ei=r(76634),H=r(10805),le=r(57772),Si=r(70585);function xi(a,s){1&a&&(e.TgZ(0,"div",23)(1,"div",24),e._UZ(2,"app-emp-workschedule-vacations-cards"),e.qZA()())}function Ai(a,s){if(1&a&&(e.TgZ(0,"div",27),e._UZ(1,"card-row-item",28)(2,"card-row-item",29)(3,"card-row-item",30),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("value",t.msgTranslate(null==t.empWorkSchedule?null:t.empWorkSchedule.currentPlan.ar_Name,null==t.empWorkSchedule?null:t.empWorkSchedule.currentPlan.en_Name)),e.xp6(1),e.Q6J("value",null==t.empWorkSchedule?null:t.empWorkSchedule.currentPlan.start_date),e.xp6(1),e.Q6J("value",null==t.empWorkSchedule?null:t.empWorkSchedule.currentPlan.end_date)}}function Zi(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-emp-work-schedule-table",31),e.NdJ("afterDelete",function(i){e.CHM(t);const n=e.oxw(2);return e.KtG(n.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function Li(a,s){if(1&a&&(e.ynx(0),e.YNc(1,Ai,4,3,"div",25),e.YNc(2,Zi,1,2,"app-emp-work-schedule-table",26),e.BQk()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView)}}function Pi(a,s){1&a&&(e.TgZ(0,"div",35),e._UZ(1,"app-view-row-item-skeleton"),e.qZA())}const Ji=function(){return[]};function ki(a,s){1&a&&(e.ynx(0),e.TgZ(1,"div",32)(2,"div",33),e.YNc(3,Pi,2,0,"div",34),e.qZA()(),e.BQk()),2&a&&(e.xp6(3),e.Q6J("ngForOf",e.DdM(1,Ji).constructor(2)))}function Ni(a,s){if(1&a&&(e._UZ(0,"span",39),e.TgZ(1,"div",40),e._uU(2),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.message," ")}}function Mi(a,s){1&a&&(e.TgZ(0,"p-messages",37),e.YNc(1,Ni,3,1,"ng-template",38),e.qZA())}function Ui(a,s){if(1&a&&(e.ynx(0),e.YNc(1,Mi,2,0,"p-messages",36),e.BQk()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.messages)}}const Fi=function(a,s,t,o,i){return{isVacation:a,isAbsence:s,isMission:t,isOffHoliday:o,isOvertime:i}};function Qi(a,s){if(1&a&&(e.TgZ(0,"span",41),e._uU(1),e.qZA()),2&a){const t=s.$implicit,o=e.oxw();e.Q6J("ngClass",e.qbA(2,Fi,o.isVacation(t),o.isAbsence(t),o.isMission(t),o.isOffHoliday(t),o.isOvertime(t))),e.xp6(1),e.hij(" ",t.day," ")}}function qi(a,s){1&a&&(e.ynx(0),e._UZ(1,"p-skeleton",42),e.BQk())}let Oi=(()=>{class a extends u.U{constructor(t){super(),this.employeeWorkScheduleService=t,this.isLoaded=!1,this.today=new Date,this.calendarArray=[],this.isTableView=!1,this.currentDate=c.M.mapDateReverse((new Date).toDateString()),this.defaultDate=new Date(this.currentDate),this.employeeInstanceId=m.w.EmployeeInstanceId,m.w.employeeInstanceId$.subscribe(o=>{this.employeeInstanceId=o,this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()?(this.isLoaded=!1,this.getCardData(this.currentDate)):this.isLoaded=!0})}ngOnInit(){this.numberOfDaysInMonth=c.M.numberOfDaysInMonth(this.today.getFullYear(),this.today.getMonth())}getCardData(t){this.isLoaded=!1,this.empWorkSchedule=null,this.employeeWorkScheduleService.getCard(this.employeeInstanceId,t).pipe(this.cancelRequest()).subscribe(o=>{if(this.isLoaded=!0,o.message.messageType==p.u.Success){let i=[];o.data.currentPlan.start_date=c.M.mapDate(o.data.currentPlan.start_date),o.data.currentPlan.end_date=c.M.mapDate(o.data.currentPlan.end_date),o.data.vacations.forEach(n=>{i.push(n.vacation_Date_Duration.vacation_date)}),o.data.vacationsDates=i,this.empWorkSchedule=o.data}o.message.messageType==p.u.Warning?this.messages=o?.message?.messages:this.errorList(o?.message?.messages)})}onMonthChange(t){let o=c.M.mapDateReverse(new Date(t.year,t.month-1,1).toDateString());this.currentDate=o,this.defaultDate=new Date(o),this.employeeInstanceId>0&&this.getCardData(o)}isWeekEnds(t){var o=c.M.mapDate(new Date(t.year,t.month,t.day)?.toDateString());let i=!1;return this.empWorkSchedule?.weekEnds?.forEach(n=>{o==c.M.mapDate(n)&&(i=!0)}),i}isVacation(t){var o=c.M.mapDate(new Date(t.year,t.month,t.day)?.toDateString());let i=!1;return this.empWorkSchedule?.vacationsDates?.forEach(n=>{o==c.M.mapDate(n)&&(i=!0)}),i}isOvertime(t){var o=c.M.mapDate(new Date(t.year,t.month,t.day)?.toDateString());let i=!1;return this.empWorkSchedule?.overtimes?.forEach(n=>{o==c.M.mapDate(n)&&(i=!0)}),i}isAbsence(t){var o=c.M.mapDate(new Date(t.year,t.month,t.day)?.toDateString());let i=!1;return this.empWorkSchedule?.absenece?.forEach(n=>{o==c.M.mapDate(n)&&(i=!0)}),i}isMission(t){var o=c.M.mapDate(new Date(t.year,t.month,t.day)?.toDateString());let i=!1;return this.empWorkSchedule?.missions?.forEach(n=>{o==c.M.mapDate(n)&&(i=!0)}),i}isOffHoliday(t){var o=c.M.mapDate(new Date(t.year,t.month,t.day)?.toDateString());let i=!1;return this.empWorkSchedule?.officialHoliday?.forEach(n=>{o==c.M.mapDate(n)&&(i=!0)}),i}createCalendarArray(){this.calendarArray=[];for(let t=1;t<=this.numberOfDaysInMonth;t++){let o=this.empWorkSchedule?.weekEnds.map(k=>new Date(k).getDate()).includes(t),i=this.empWorkSchedule?.vacations.map(k=>new Date(k.vacation_Date_Duration.vacation_date).getDate()).includes(t),n=this.empWorkSchedule?.vacations.find(k=>new Date(k.vacation_Date_Duration.vacation_date).getDate()===t)?.vacation,I=new Date;I.setDate(t),this.calendarArray.push({value:t,isCurrentDay:this.today.getDate()==t,isWeekend:o,isVacation:i,hoverContent:"",date:I,vacation:(0,c._)(n?.ar_Name,n?.en_Name)??null})}}getDayPopOver(t){return t.isWeekend?`${c.M.getDayName(t.date)} - ${this.translate("weekend")}`:t.isVacation?`${c.M.getDayName(t.date)} - ${t.vacation}`:c.M.getDayName(t.date)}openAddEditDialog(){this.dialogsService.addEditDialog(Di).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getCardData(this.currentDate))})}afterDelete(t){t&&(this.isLoaded=!1,this.getCardData(this.currentDate))}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(B))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-work-schedule-card"]],features:[e.qOj],decls:39,vars:28,consts:[[1,"card-view","border-bottom","mt-4"],[1,"row","bg-white","mt-2","px-2"],[1,"col-12","pt-2"],["cardTitle","workSchedule",1,"side_title","border-0","d-inline-flex",3,"isEdit","isLoaded","onClickIcon"],[1,"col-12","col-lg-7","mt-2"],["class","row bg-white p-0 m-0",4,"ngIf"],[1,"row","p-0","m-0"],[1,"col-12","col-lg-9","mt-3"],[4,"ngIf"],[1,"col-12","col-lg-3"],[3,"employeeId","isTableView","toggleTable"],[1,"col-12","col-lg-5","emp-calender","px-0","mx-1","mx-lg-auto","mt-3","radius-15"],[1,"p-1"],[1,"calendar-footer","d-flex","justify-content-center","mt-2"],[1,"map-box","isVacation"],[1,"map-text","day-before","vacation-color"],[1,"map-box"],[1,"map-text","day-before","absence-color"],[1,"map-text","day-before","mission-color"],[1,"map-text","day-before","offHoliday-color"],[1,"map-text","day-before","overtime-color"],["id","calendar",3,"inline","readonlyInput","onMonthChange"],["pTemplate","date"],[1,"row","bg-white","p-0","m-0"],[1,"col-12","px-0"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[1,"view-data-row-container"],["label","plan",1,"col",3,"value"],["label","from_Date",1,"col",3,"value"],["label","to_Date",1,"col",3,"value"],[3,"isMatPaginator","hideActions","afterDelete"],[1,"cardSection"],[1,"d-flex","flex-wrap","justify-content-between",2,"gap","30px"],["class","flex-grow-1",4,"ngFor","ngForOf"],[1,"flex-grow-1"],["severity","warn","styleClass","radius-10",4,"ngFor","ngForOf"],["severity","warn","styleClass","radius-10"],["pTemplate",""],[1,"p-message-icon","pi","pi-exclamation-triangle"],[1,"p-message-detail"],[1,"day-after",3,"ngClass"],["width","100%","height","100%","animation","wave"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"card-header",3),e.NdJ("onClickIcon",function(){return o.openAddEditDialog()}),e.qZA()(),e.TgZ(4,"div",4),e.YNc(5,xi,3,0,"div",5),e.TgZ(6,"div",6)(7,"div",7),e.YNc(8,Li,3,2,"ng-container",8),e.YNc(9,ki,4,2,"ng-container",8),e.qZA(),e.TgZ(10,"div",9)(11,"see-more-btn",10),e.NdJ("toggleTable",function(){return o.toggleTable()}),e.qZA()()()(),e.TgZ(12,"div",11)(13,"div",12),e.YNc(14,Ui,2,1,"ng-container",8),e.TgZ(15,"div",13)(16,"div",14)(17,"span",15),e._uU(18),e.ALo(19,"translate"),e.qZA()(),e.TgZ(20,"div",16)(21,"span",17),e._uU(22),e.ALo(23,"translate"),e.qZA()(),e.TgZ(24,"div",16)(25,"span",18),e._uU(26),e.ALo(27,"translate"),e.qZA()(),e.TgZ(28,"div",16)(29,"span",19),e._uU(30),e.ALo(31,"translate"),e.qZA()(),e.TgZ(32,"div",16)(33,"span",20),e._uU(34),e.ALo(35,"translate"),e.qZA()()(),e.TgZ(36,"p-calendar",21),e.NdJ("onMonthChange",function(n){return o.onMonthChange(n)}),e.YNc(37,Qi,2,8,"ng-template",22),e.qZA()(),e.YNc(38,qi,2,0,"ng-container",8),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("isEdit",o.empWorkSchedule)("isLoaded",o.isLoaded),e.xp6(2),e.Q6J("ngIf",o.employeeInstanceId>0),e.xp6(3),e.Q6J("ngIf",o.isLoaded),e.xp6(1),e.Q6J("ngIf",!o.isLoaded),e.xp6(2),e.Q6J("employeeId",o.employeeInstanceId)("isTableView",o.isTableView),e.xp6(2),e.ekj("d-none",!o.isLoaded),e.xp6(1),e.Q6J("ngIf",!o.empWorkSchedule),e.xp6(4),e.Oqu(e.lcZ(19,18,"vacation")),e.xp6(4),e.hij(" ",e.lcZ(23,20,"absence"),""),e.xp6(4),e.hij(" ",e.lcZ(27,22,"mission")," "),e.xp6(4),e.hij(" ",e.lcZ(31,24,"offHoliday")," "),e.xp6(4),e.hij(" ",e.lcZ(35,26,"overtime")," "),e.xp6(2),e.Q6J("inline",!0)("readonlyInput",!0),e.xp6(2),e.Q6J("ngIf",!o.isLoaded))},dependencies:[d.mk,d.sg,d.O5,Ei.B,H.jx,Y.O,le.V,Si.f,D,E,Z,Re,Ye,P.X$],styles:['.current-day-color[_ngcontent-%COMP%]:before{background:#ffffff!important;border-color:#e5e5e5}.weekend-color[_ngcontent-%COMP%]:before{background:#dddddd!important;border-color:#c9c9c9}.annual-color[_ngcontent-%COMP%]:before{background:#30b79d!important;border-color:#4da997}.vacation-color[_ngcontent-%COMP%]{color:#169ed9!important}.absence-color[_ngcontent-%COMP%]{color:#da0000}.mission-color[_ngcontent-%COMP%]{color:#735bf2}.offHoliday-color[_ngcontent-%COMP%]{color:#067a56}.overtime-color[_ngcontent-%COMP%]{color:#002e7f}.weekend-color[_ngcontent-%COMP%]{color:#323232}.isVacation[_ngcontent-%COMP%]:after{display:block!important;border-color:#169ed9!important}.isOvertime[_ngcontent-%COMP%]:after{display:block!important;border-color:#002e7f!important}.isAbsence[_ngcontent-%COMP%]:after{display:block!important;border-color:#da0000!important}.isMission[_ngcontent-%COMP%]:after{display:block!important;border-color:#735bf2!important}.isOffHoliday[_ngcontent-%COMP%]:after{display:block!important;border-color:#067a56!important}.isWeekEnds[_ngcontent-%COMP%]:after{display:block!important;border-color:#323232!important}.day-after[_ngcontent-%COMP%]:after, .day-before[_ngcontent-%COMP%]:before{content:"";width:10px;height:10px;border:solid 3px;border-radius:50%;margin:-1px 2px}.day-after[_ngcontent-%COMP%]:after{display:none;margin-left:auto!important;margin-bottom:2px}.calendar-footer[_ngcontent-%COMP%]{display:flex}.map-text[_ngcontent-%COMP%]{font-size:12px}  .emp-calender{background:#fafafa}  .emp-calender .p-datepicker{padding-top:0}  .emp-calender .p-datepicker,   .emp-calender .p-datepicker .p-datepicker-header{background:#fafafa;border:none}  .emp-calender .p-datepicker table th{border-bottom:none;padding-bottom:20px;color:#8f9bb3;padding-left:25px}  .emp-calender .p-datepicker .p-disabled{color:#8f9bb3;opacity:1}  .emp-calender .p-datepicker table td.p-datepicker-today>span,   .emp-calender .p-datepicker:not(.p-disabled) table td.p-datepicker-today>span:hover{border-radius:9px;background-color:#374761;color:#fff;border:none}  .emp-calender .p-datepicker .p-datepicker-header .p-datepicker-prev,   .emp-calender .p-datepicker .p-datepicker-header .p-datepicker-next{width:2.5rem;height:2.5rem}  .emp-calender .p-datepicker .p-datepicker-header .p-datepicker-prev{order:0}  .emp-calender .p-datepicker .p-datepicker-header .p-datepicker-title{margin:auto}  .emp-calender .p-datepicker .p-datepicker-header .p-datepicker-prev,   .emp-calender .p-datepicker .p-datepicker-header .p-datepicker-next{border:1px solid #ced3de;border-radius:10px}']}),a})();var F=r(50046),re=r(72463),Vi=r(92393),Bi=r(12810);function Ri(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.toEdit(i))})("deleteRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("attachIconColumnData",t.attachIconColumnData)("showSpaceTop",!1)}}let Ge=(()=>{class a extends u.U{constructor(t){super(),this.employeeHiringDocumentService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["documentName","attachmentType","attachment","actions"],this.optionalColomns=[],this.attachIconColumnData={columnName:"attachment",icon:"fas fa-file-alt"},this.employeeId=0,this.employeeInstanceId=0,this.isLoaded=!1,this.employeeInstanceId=m.w.EmployeeInstanceId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_hiring_documents_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeInstanceId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new _.by(null)),this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()&&this.getList(this.firstPage)}toEdit(t){this.rowToEdit.emit(t)}getList(t,o){this.dataSource=new _.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeHiringDocumentService.getList(this.employeeInstanceId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(n=>{if(n.message.messageType==p.u.Success){let I=(0,U.zB)(n.data);I.forEach(k=>k.attachmentType=this.translate(k.attachmentType)),this.dataSource=new _.by(I),this.page.length=n.meta.totalItemCount,this.isLoaded=!0}else this.errorList(n?.message?.messages)})}onDelete(t){this.deleteDialog(t.documentName).subscribe(i=>{i&&this.delete(t)})}delete(t){let o={perInsId:this.employeeInstanceId,DocTypeId:t.att_Type_ID,AttachmentID:t.attachmentID};this.showLoading("table"),this.employeeHiringDocumentService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg(i?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize),this.afterDelete.emit(t)):this.errorList(i?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(re.t))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-hiring-documents-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","attachIconColumnData","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","attachIconColumnData","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,Ri,1,12,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeInstanceId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,b.Ro]}),a})();function Yi(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",11)(1,"primeng-file-upload",18),e.NdJ("ondelete",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.deleteFile(i))})("onselect",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onChangeFile(i))}),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(1),e.Q6J("control",t.formCtrls.file)("submitted",t.submitted)("multiple",!1)("isEdit",t.formCtrls.id.value>0)("removeFiles",t.removeFiles)}}function Gi(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",19),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let Hi=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeHiringDocumentService=t,this.dialogRef=o,this.employeeInstanceId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.removeFiles=!1,this.selectedAttachmentTypeId=0,this.selectedIs_Attached=0,this.isFileChanged=!1,this.hireDocType=F.g,this.hireDocTypeRadioList=[{value:F.g.attached,label:F.g.getValue(F.g.attached),cssClass:"col-md-4 col-sm-6 col-12"},{value:F.g.handDelivery,label:F.g.getValue(F.g.handDelivery),cssClass:"col-md-4 col-sm-6 col-12"},{value:F.g.notNeed,label:F.g.getValue(F.g.notNeed),cssClass:"col-md-4 col-sm-6 col-12"}],this.employeeInstanceId=m.w.EmployeeInstanceId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_hiring_documents_sec)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],att_Type_ID:[null,[l.kI.required]],file:[null],is_Attached:[F.g.attached,[l.kI.required]],attachmentID:[null]}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}get formCtrls(){return this.form.controls}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}submit(){if(this.submitted=!0,this.getList=!1,this.removeFiles=!1,this.form.valid){const t={Person_Instance_ID:this.employeeInstanceId,files:this.form.value.file,Is_Attached:this.form.value.is_Attached};0==this.formCtrls.id.value?this.create(t):this.update(t)}}create(t){let o={...t,Attachment_Type_ID:this.form.value.att_Type_ID},i=c.M.objectToFormData(o);this.showLoading("dialog"),this.employeeHiringDocumentService.create(i).subscribe(n=>{n?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg(n?.message?.messageTypeName),this.hasUpdate=!0,this.getList=!0):this.errorList(n?.message?.messages),this.hideLoading("dialog")})}update(t){this.formCtrls.file.value?.id>0&&(t.files=null);let o={...t,Att_Type_ID:this.form.value.att_Type_ID,AttachmentID:this.selectedIs_Attached!=t.Is_Attached||this.isFileChanged?this.form.value.attachmentID:0,Att_Type_ID_Old:this.selectedAttachmentTypeId},i=c.M.objectToFormData(o);this.showLoading("dialog"),this.employeeHiringDocumentService.update(i).subscribe(n=>{n.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg(n?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0):this.errorList(n?.message?.messages),this.hideLoading("dialog")})}employeeHiringDocumentToEdit(t){this.form.patchValue(t),t.attachmentID?(this.showLoading(),this.fileService.downloadByAttachId(t.attachmentID).subscribe(o=>{this.formCtrls.file.setValue({id:t.attachmentID,path:t.attachment,name:"",type:o.type,size:o.size}),this.hideLoading()})):this.formCtrls.file.setValue(null),this.formCtrls.id.setValue(t.att_Type_ID),this.selectedAttachmentTypeId=t.att_Type_ID,this.selectedIs_Attached=t.is_Attached}deleteFile(t){this.getList=!1,this.showLoading("dialog"),this.employeeHiringDocumentService.DeleteFile(this.employeeInstanceId,t.id).subscribe(o=>{o.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg(o?.message?.messageTypeName),this.getList=!0,this.formCtrls.file.reset(),this.isFileChanged=!1,this.formCtrls.attachmentID.setValue(0)):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}onChangeFile(t){t&&this.formCtrls.attachmentID.value>0&&(this.isFileChanged=!0)}clearForm(){this.form.reset({id:0,is_Attached:F.g.attached}),this.submitted=!1,this.removeFiles=!0,this.selectedAttachmentTypeId=0,this.selectedIs_Attached=0,this.isFileChanged=!1}afterDelete(t){t.att_Type_ID==this.selectedAttachmentTypeId&&this.formCtrls.id.value>0&&this.clearForm(),t&&(this.hasUpdate=!0)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(re.t),e.Y36(g.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-hiring-documents-dialog"]],features:[e.qOj],decls:19,vars:17,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","hiringDocuments",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-6","col-12"],["label","documentName",3,"control","employeeInstanceId","submitted","filter","appendTo"],[1,"col-12"],[1,"mtop-14",3,"control","radioList","submitted"],["class","col-12",4,"ngIf"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"control","submitted","multiple","isEdit","removeFiles","ondelete","onselect"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-attachment-types-by-employee-id-dropdown",10),e.qZA(),e.TgZ(12,"div",11),e._UZ(13,"app-radio-button",12),e.qZA(),e.YNc(14,Yi,2,5,"div",13),e.qZA()(),e.TgZ(15,"div",14)(16,"submit-btn",15),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(17,Gi,1,0,"reset-form-btn",16),e.qZA(),e.TgZ(18,"app-emp-hiring-documents-table",17),e.NdJ("rowToEdit",function(n){return o.employeeHiringDocumentToEdit(n)})("afterDelete",function(n){return o.afterDelete(n)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.att_Type_ID)("employeeInstanceId",o.employeeInstanceId)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.is_Attached)("radioList",o.hireDocTypeRadioList)("submitted",o.submitted),e.xp6(1),e.Q6J("ngIf",o.formCtrls.is_Attached.value==o.hireDocType.attached),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeInstanceId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,Vi._,oe.Y,A.J,S.p,v.T,T.lW,g.uh,g.xY,b.Ro,Bi.Z,l._Y,l.JL,l.sg,Ge]}),a})();var Wi=r(32243);function zi(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",18),e._UZ(2,"img",19),e.TgZ(3,"div",20)(4,"div",21),e._uU(5),e.ALo(6,"titlecase"),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",22)(9,"i",23),e.NdJ("click",function(){const n=e.CHM(t).$implicit,I=e.oxw(4);return e.KtG(I.fileService.downloadFromServer(n.attachmentID))}),e.qZA()()()()()}if(2&a){const t=s.$implicit,o=e.oxw(4);e.xp6(2),e.Q6J("src",o.fileService.getFileIcon(null==t?null:t.attachmentFilePath),e.LSH),e.xp6(3),e.hij(" ",e.lcZ(6,2,e.lcZ(7,4,null==t?null:t.documentName))," ")}}function ji(a,s){if(1&a&&(e.ynx(0),e.YNc(1,zi,10,6,"div",16),e.BQk()),2&a){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.hiringDocuments)}}function $i(a,s){1&a&&e._UZ(0,"card-row-item",24)}function Ki(a,s){if(1&a&&(e.TgZ(0,"div",13),e.YNc(1,ji,2,1,"ng-container",14),e.YNc(2,$i,1,0,"ng-template",null,15,e.W1O),e.qZA()),2&a){const t=e.MAs(3),o=e.oxw(2);e.ekj("m-0",!o.hiringDocuments||0==(null==o.hiringDocuments?null:o.hiringDocuments.length)),e.xp6(1),e.Q6J("ngIf",(null==o.hiringDocuments?null:o.hiringDocuments.length)>0)("ngIfElse",t)}}function Xi(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-emp-hiring-documents-table",25),e.NdJ("afterDelete",function(i){e.CHM(t);const n=e.oxw(2);return e.KtG(n.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}const es=function(){return{width:"200px",height:200}};function ts(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,Ki,4,4,"div",7),e.YNc(6,Xi,1,2,"app-emp-hiring-documents-table",8),e.qZA(),e.TgZ(7,"div",9)(8,"div",10),e._UZ(9,"circle-progress",11),e.qZA(),e.TgZ(10,"div",12),e._uU(11),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",null==t.hiringDocuments?null:t.hiringDocuments.length)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("ngStyle",e.DdM(12,es)),e.xp6(1),e.Q6J("percent",t.docCompletePercentage)("outerStrokeWidth",27)("innerStrokeWidth",27)("space",-27)("showUnits",!1)("subtitle",t.docCompletePercentage.toString()+"%"),e.xp6(2),e.hij(" ",t.docCompletePercentage,"% ")}}function os(a,s){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",26),2&a&&e.Q6J("rowNo",4)}let as=(()=>{class a extends u.U{constructor(t){super(),this.employeeHiringDocumentService=t,this.employeeInstanceId=0,this.docCompletePercentage=0,this.isLoaded=!1,this.isLoadedPercentage=!1,this.isTableView=!1,this.employeeInstanceId=m.w.EmployeeInstanceId,m.w.employeeInstanceId$.subscribe(o=>{this.employeeInstanceId=o,this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()?(this.isLoaded=!1,this.isLoadedPercentage=!1,this.getAll(),this.getPercentage()):(this.isLoaded=!0,this.isLoadedPercentage=!0)})}ngOnInit(){}getAll(){this.hiringDocuments=null,this.employeeHiringDocumentService.getAll(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.hiringDocuments=(0,U.zB)(t.data),this.isLoaded=!0):this.errorList(t?.message?.messages)})}getPercentage(){this.docCompletePercentage=0,this.employeeHiringDocumentService.getCard(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.docCompletePercentage=t.data,this.isLoadedPercentage=!0):this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(Hi).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.isLoadedPercentage=!1,this.getAll(),this.getPercentage())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAll())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(re.t))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-hiring-documents-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom mt-3",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom","mt-3"],[1,"row","bg-white","mt-2","px-1"],[1,"col-12","pt-2"],["cardTitle","hiringDocuments",1,"side_title","border-0","d-inline-flex",3,"isEdit","isLoaded","onClickIcon"],[1,"col-12","col-lg-9","mt-3"],["class","view-data-row-container row bg-white px-0",3,"m-0",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[1,"col-lg-3","col-12"],[1,"m-auto",3,"ngStyle"],["outerStrokeColor","#374761","innerStrokeColor","#cfe6ff","title","Completion","titleFontSize","25px","titleColor","#169ed9","subtitleFontSize","37px","subtitleColor","#374761","titleFontWeight","700","subtitleFontWeight","700",1,"w-100","h-100",3,"percent","outerStrokeWidth","innerStrokeWidth","space","showUnits","subtitle"],[2,"position","absolute","padding","10px","color","white"],[1,"view-data-row-container","row","bg-white","px-0"],[4,"ngIf","ngIfElse"],["noData",""],["class","col-12 col-md-6 col-lg-3 px-1 mb-2",4,"ngFor","ngForOf"],[1,"col-12","col-md-6","col-lg-3","px-1","mb-2"],[1,"media"],["width","40","height","40","alt","avatar",1,"rounded","mr-2",3,"src"],[1,"media-body","d-flex"],[1,"mt-2","font-size-18","black","w-75"],[1,"mx-2","mt-2"],[1,"ft-download","font-size-25","pointer",3,"click"],["label","document",1,"col",2,"padding","0 15px !important"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,ts,12,13,"div",0),e.YNc(1,os,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded&&o.isLoadedPercentage)("ngIfElse",i)}},dependencies:[d.sg,d.O5,d.PC,x.E,Wi.nu,D,E,Ge,d.rS,P.X$]}),a})(),pe=(()=>{class a extends L.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeLocation",t)}update(t){return this.post("Personnel/Employees/Edit_EmployeeLocation",t)}getList(t,o){return this.get("Personnel/Employees/GetList_EmployeeLocation",{params:{...o,$filter:`Person_Instance_ID eq ${t}`,$expand:y.db.Core_Location}})}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeLocation",{params:{$filter:`Person_Instance_ID eq ${t}`,$expand:y.db.Core_Location}})}close(t){return this.delete("Personnel/Employees/Close_EmployeeLocation",{params:t})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeLocation",{params:t})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var is=r(12917);function ss(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.toEdit(i))})("deleteRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let He=(()=>{class a extends u.U{constructor(t){super(),this.employeeLocationService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["country","governorate","location","froM_DATE","tO_DATE","actions"],this.optionalColomns=[],this.isLoaded=!1,this.employeeInstanceId=0,this.employeeInstanceId=m.w.EmployeeInstanceId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_location_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeInstanceId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new _.by(null)),this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new _.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeLocationService.getList(this.employeeInstanceId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==p.u.Success?(this.dataSource=new _.by((0,U.kI)(n.data)),this.page.length=n.meta.totalItemCount,this.isLoaded=!0):this.errorList(n?.message?.messages)})}onDelete(t){this.deleteDialog(t.country+" - "+t.location).subscribe(i=>{i&&this.delete(t)})}toEdit(t){this.rowToEdit.emit(t)}delete(t){this.showLoading("table");let o={person_Instance_ID:t.person_Instance_ID,location_ID:t.location_ID,FromDate:c.M.mapDateReverse(t.from_Date)};this.employeeLocationService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg(i?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize),this.afterDelete.emit(t)):this.errorList(i?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(pe))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-location-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,ss,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeInstanceId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,b.Ro]}),a})();function ns(a,s){if(1&a&&(e.TgZ(0,"div",20),e._UZ(1,"load-policies-group",21),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("control",t.formCtrls.policy_groups)("locationControl",t.formCtrls.location_ID)("submitted",t.submitted)}}function ls(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let rs=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeLocationService=t,this.dialogRef=o,this.employeeInstanceId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.employeeInstanceId=m.w.EmployeeInstanceId}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],countryId:[null,[l.kI.required]],governorate_ID:[null,[l.kI.required]],location_ID:[null,[l.kI.required]],from_Date:[null,[l.kI.required]],to_Date:[null],policy_groups:[null]},{validator:J.w.compareDates("from_Date","to_Date")}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}get formCtrls(){return this.form.controls}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={EmployeeData:{person_Instance_ID:this.employeeInstanceId,location_ID:this.form.value.location_ID,from_Date:c.M.mapDateReverse(this.form.value.from_Date),to_Date:c.M.mapDateReverse(this.form.value.to_Date)},SelectedPolicygroup:this.form.value.policy_groups};0==this.formCtrls.id.value?this.create(t):this.update(t)}}create(t){this.showLoading("dialog"),this.employeeLocationService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg(o?.message?.messageTypeName),this.hasUpdate=!0,this.getList=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){let o={...t,OldEmployeeData:{person_Instance_ID:this.employeeInstanceId,location_ID:this.selectedLocation.location_ID,from_Date:this.selectedLocation.from_Date}};this.showLoading("dialog"),this.employeeLocationService.update(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg(i?.message?.messageTypeName),this.hasUpdate=!0,this.getList=!0,this.selectedLocation=null):this.errorList(i?.message?.messages),this.hideLoading("dialog")})}locationToEdit(t){this.form.patchValue(t),this.formCtrls.countryId.setValue(t.comm_Country.id),this.formCtrls.governorate_ID.setValue(t.comm_Governorate.id),this.formCtrls.location_ID.setValue(t.location_ID),this.formCtrls.policy_groups.setValue(t.selectedPolicygroup),this.formCtrls.id.setValue(t.location_ID),this.selectedLocation=t}afterDelete(t){t.location_ID==this.selectedLocation.location_ID&&t.from_Date==this.selectedLocation.from_Date&&this.formCtrls.id.value>0&&this.clearForm(),t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(pe),e.Y36(g.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-location-dialog"]],features:[e.qOj],decls:25,vars:28,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","location",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","submitted","filter","appendTo"],[3,"control","countryControl","submitted","filter","appendTo"],[3,"control","governorateControl","filterByGov","submitted","filter","appendTo"],["label","froM_DATE",3,"control","submitted"],["label","tO_DATE",3,"control","submitted"],["class","col-12",4,"ngIf"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[1,"col-12"],[3,"control","locationControl","submitted"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-country-dropdown",10),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-governorate-by-country-dropdown",11),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"org-location-dropdown",12),e.qZA(),e.TgZ(16,"div",9),e._UZ(17,"app-datepicker",13),e.qZA(),e.TgZ(18,"div",9),e._UZ(19,"app-datepicker",14),e.qZA(),e.YNc(20,ns,2,3,"div",15),e.qZA()(),e.TgZ(21,"div",16)(22,"submit-btn",17),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(23,ls,1,0,"reset-form-btn",18),e.qZA(),e.TgZ(24,"app-emp-location-table",19),e.NdJ("rowToEdit",function(n){return o.locationToEdit(n)})("afterDelete",function(n){return o.afterDelete(n)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.countryId)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.governorate_ID)("countryControl",o.formCtrls.countryId)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.location_ID)("governorateControl",o.formCtrls.governorate_ID)("filterByGov",!0)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.from_Date)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.to_Date)("submitted",o.submitted),e.xp6(1),e.Q6J("ngIf",o.formCtrls.location_ID.value>0),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeInstanceId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,N.Q,A.J,S.p,v.T,Oe.Y,T.lW,g.uh,g.xY,b.Ro,Ze.n,Le.$,is.v,l._Y,l.JL,l.sg,He]}),a})();function ps(a,s){if(1&a&&(e.TgZ(0,"div",13),e._UZ(1,"card-row-item",14)(2,"card-row-item",15)(3,"card-row-item",16),e.qZA()),2&a){const t=s.$implicit;e.ekj("mbottom-20",!s.last),e.xp6(1),e.Q6J("label",t.country)("value",t.allAddress),e.xp6(1),e.Q6J("value",t.froM_DATE),e.xp6(1),e.Q6J("value",t.tO_DATE)}}function ds(a,s){if(1&a&&(e.ynx(0),e.YNc(1,ps,4,6,"div",12),e.BQk()),2&a){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.empLocation)}}function cs(a,s){1&a&&(e.TgZ(0,"div",13),e._UZ(1,"card-row-item",17)(2,"card-row-item",18)(3,"card-row-item",19),e.qZA()),2&a&&(e.xp6(1),e.Q6J("value",null),e.xp6(1),e.Q6J("value",null),e.xp6(1),e.Q6J("value",null))}function ms(a,s){if(1&a&&(e.ynx(0),e.YNc(1,ds,2,1,"ng-container",10),e.YNc(2,cs,4,3,"ng-template",null,11,e.W1O),e.BQk()),2&a){const t=e.MAs(3),o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==o.empLocation?null:o.empLocation.length)>0)("ngIfElse",t)}}function us(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-emp-location-table",20),e.NdJ("afterDelete",function(i){e.CHM(t);const n=e.oxw(2);return e.KtG(n.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function _s(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,ms,4,2,"ng-container",7),e.YNc(6,us,1,2,"app-emp-location-table",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",null==t.empLocation?null:t.empLocation.length)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("employeeId",t.employeeInstanceId)("isTableView",t.isTableView)}}function gs(a,s){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",21),2&a&&e.Q6J("rowNo",4)}let hs=(()=>{class a extends u.U{constructor(t){super(),this.employeeLocationService=t,this.employeeInstanceId=0,this.isLoaded=!0,this.isTableView=!1,this.employeeInstanceId=m.w.EmployeeInstanceId,m.w.employeeInstanceId$.subscribe(o=>{this.employeeInstanceId=o,this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()?(this.isLoaded=!1,this.getAll()):this.isLoaded=!0})}ngOnInit(){}getAll(){this.empLocation=null,this.employeeLocationService.getAll(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{if(t.message.messageType==p.u.Success){let o=t.data;o.sort((i,n)=>new Date(n.from_Date).getTime()-new Date(i.from_Date).getTime()),this.empLocation=(0,U.kI)(o.slice(0,2)),this.isLoaded=!0}else this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(rs).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAll())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAll())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(pe))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-location-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","location",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],[4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"employeeId","isTableView","toggleTable"],[4,"ngIf","ngIfElse"],["noData",""],["class","view-data-row-container",3,"mbottom-20",4,"ngFor","ngForOf"],[1,"view-data-row-container"],[1,"col","px-0",3,"label","value"],["label","froM_DATE",1,"col","px-0",3,"value"],["label","tO_DATE",1,"col","px-0",3,"value"],["label","location",1,"col",3,"value"],["label","froM_DATE",1,"col",3,"value"],["label","tO_DATE",1,"col",3,"value"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,_s,9,6,"div",0),e.YNc(1,gs,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.sg,d.O5,x.E,D,E,Z,He]}),a})();var de=r(60904),fs=r(84490);function bs(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.toEdit(i))})("deleteRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let We=(()=>{class a extends u.U{constructor(t){super(),this.employeeCustodiesService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["custodies","froM_DATE","endDate","notes","actions"],this.optionalColomns=[],this.isLoaded=!1,this.employeeInstanceId=0,this.employeeInstanceId=m.w.EmployeeInstanceId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_custodies_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeInstanceId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new _.by(null)),this.checkNoBusinessOrCompany()&&this.employeeInstanceId>0&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new _.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeCustodiesService.getList(this.employeeInstanceId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==p.u.Success?(this.dataSource=new _.by((0,U.i5)(n.data)),this.page.length=n.meta.totalItemCount,this.isLoaded=!0):this.errorList(n?.message?.messages)})}toEdit(t){this.rowToEdit.emit(t)}onDelete(t){this.deleteDialog(t.custodies).subscribe(i=>{i&&this.delete(t)})}delete(t){this.showLoading("table"),this.employeeCustodiesService.Delete(t.id).subscribe(o=>{o.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg(o?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize),this.afterDelete.emit(t)):this.errorList(o?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(de.V))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-custodies-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,bs,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeInstanceId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,b.Ro]}),a})();function Cs(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",18),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let ys=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeCustodiesService=t,this.dialogRef=o,this.employeeInstanceId=0,this.hasUpdate=!1,this.getList=!0,this.submitted=!1,this.employeeInstanceId=m.w.EmployeeInstanceId}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],covenantId:[null,[l.kI.required]],froM_DATE:[null,[l.kI.required]],endDate:[null],notes:[null]},{validator:J.w.compareDates("froM_DATE","endDate")}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}get formCtrls(){return this.form.controls}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={EmployeeData:{PersonInstanceId:this.employeeInstanceId,ID:this.form.value.id,CovenantId:this.form.value.covenantId,FromDate:c.M.mapDateReverse(this.form.value.froM_DATE),ToDate:c.M.mapDateReverse(this.form.value.endDate),Notes:this.form.value.notes}};0==t.EmployeeData.ID?this.create(t):this.update(t)}}create(t){this.showLoading("dialog"),this.employeeCustodiesService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg(o?.message?.messageTypeName),this.hasUpdate=!0,this.getList=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){this.showLoading("dialog"),this.employeeCustodiesService.update(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg(o?.message?.messageTypeName),this.hasUpdate=!0,this.getList=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}employeeCustodyToEdit(t){this.form.patchValue(t),this.formCtrls.froM_DATE.setValue(t.fromDate),this.formCtrls.endDate.setValue(t.toDate)}afterDelete(t){t.id==this.formCtrls.id.value&&this.clearForm(),location&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(de.V),e.Y36(g.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-custodies-dialog"]],features:[e.qOj],decls:22,vars:19,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","custodies",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","employeeInstanceId","submitted","filter","appendTo"],["label","froM_DATE",3,"control","submitted"],["label","endDate",3,"control","submitted"],["label","notes",3,"control","submitted"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-custodies-by-employee-dropdown",10),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-datepicker",11),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"app-datepicker",12),e.qZA(),e.TgZ(16,"div",9),e._UZ(17,"app-input",13),e.qZA()()(),e.TgZ(18,"div",14)(19,"submit-btn",15),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(20,Cs,1,0,"reset-form-btn",16),e.qZA(),e.TgZ(21,"app-emp-custodies-table",17),e.NdJ("rowToEdit",function(n){return o.employeeCustodyToEdit(n)})("afterDelete",function(n){return o.afterDelete(n)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.covenantId)("employeeInstanceId",o.employeeInstanceId)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.froM_DATE)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.endDate)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.notes)("submitted",o.submitted),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeInstanceId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,N.Q,M.a,A.J,S.p,v.T,T.lW,g.uh,g.xY,b.Ro,fs.l,l._Y,l.JL,l.sg,We]}),a})();function Is(a,s){if(1&a&&(e.TgZ(0,"div",14),e._UZ(1,"card-row-item",15)(2,"card-row-item",16)(3,"card-row-item",17)(4,"card-row-item",18),e.qZA()),2&a){const t=s.$implicit;e.ekj("mbottom-20",!s.last),e.xp6(1),e.Q6J("value",t.custodies),e.xp6(1),e.Q6J("value",t.froM_DATE),e.xp6(1),e.Q6J("value",t.endDate),e.xp6(1),e.Q6J("value",t.notes)}}function vs(a,s){if(1&a&&(e.ynx(0),e.YNc(1,Is,5,6,"div",13),e.BQk()),2&a){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.custodies)}}function Ts(a,s){1&a&&(e.TgZ(0,"div",14),e._UZ(1,"card-row-item",19)(2,"card-row-item",20)(3,"card-row-item",21),e.qZA()),2&a&&(e.xp6(1),e.Q6J("value",null),e.xp6(1),e.Q6J("value",null),e.xp6(1),e.Q6J("value",null))}function ws(a,s){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,vs,2,1,"ng-container",11),e.YNc(2,Ts,4,3,"ng-template",null,12,e.W1O),e.qZA()),2&a){const t=e.MAs(3),o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==o.custodies?null:o.custodies.length)>0)("ngIfElse",t)}}function Ds(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-emp-custodies-table",22),e.NdJ("afterDelete",function(i){e.CHM(t);const n=e.oxw(2);return e.KtG(n.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function Es(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,ws,4,2,"div",7),e.YNc(6,Ds,1,2,"app-emp-custodies-table",8),e.qZA(),e.TgZ(7,"div",9)(8,"see-more-btn",10),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",null==t.custodies?null:t.custodies.length)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("employeeId",t.employeeInstanceId)("isTableView",t.isTableView)}}function Ss(a,s){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",23),2&a&&e.Q6J("rowNo",2)}let xs=(()=>{class a extends u.U{constructor(t){super(),this.employeeCustodiesService=t,this.employeeInstanceId=0,this.isLoaded=!1,this.isTableView=!1,this.employeeInstanceId=m.w.EmployeeInstanceId,m.w.employeeInstanceId$.subscribe(o=>{this.employeeInstanceId=o,this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()?(this.isLoaded=!1,this.getAll()):this.isLoaded=!0})}ngOnInit(){}getAll(){this.custodies=null,this.employeeCustodiesService.getAll(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.custodies=(0,U.i5)(t.data.slice(0,3)),this.isLoaded=!0):this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(ys).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAll())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAll())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(de.V))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-custodies-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","custodies",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],[4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[1,"col-lg-2","col-12col-md-2","col-12"],[3,"employeeId","isTableView","toggleTable"],[4,"ngIf","ngIfElse"],["noData",""],["class","view-data-row-container",3,"mbottom-20",4,"ngFor","ngForOf"],[1,"view-data-row-container"],["label","name",1,"col-6","col-md-3","px-0","mb-2",3,"value"],["label","froM_DATE",1,"col-6","col-md-3","px-0","mb-2",3,"value"],["label","toDate",1,"col-6","col-md-3","px-0","mb-2",3,"value"],["label","note",1,"col-6","col-md-3","px-0","mb-2",3,"value"],["label","custodies",1,"col",3,"value"],["label","froM_DATE",1,"col",3,"value"],["label","tO_DATE",1,"col",3,"value"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,Es,9,6,"div",0),e.YNc(1,Ss,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.sg,d.O5,x.E,D,E,Z,We]}),a})(),ce=(()=>{class a extends L.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeInsurance",t)}update(t){return this.post("Personnel/Employees/Edit_EmployeeInsurance",t)}getList(t,o){return this.get("Personnel/Employees/GetList_EmployeeInsurance",{params:{...o,$filter:`Person_ID  eq ${t}`,$expand:y.db.core_Insurance_Office}})}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeInsurance",{params:{$filter:`Person_ID eq ${t}`,$expand:y.db.core_Insurance_Office}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeInsurance",{params:t})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var As=r(5269);function Zs(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.toEdit(i))})("deleteRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let ze=(()=>{class a extends u.U{constructor(t){super(),this.employeeSocialInsuranceService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.employeeId=0,this.employeeInstanceId=0,this.mandatoryColomns=["insuranceOffice","fromDate","endDate","actions"],this.optionalColomns=[],this.isLoaded=!1,this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_social_insurance_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new _.by(null)),this.checkNoBusinessOrCompany()&&this.employeeId>0&&this.getList(this.firstPage)}toEdit(t){this.rowToEdit.emit(t)}getList(t,o){this.dataSource=new _.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeSocialInsuranceService.getList(this.employeeId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==p.u.Success?(this.dataSource=new _.by((0,U.M3)(n.data)),this.page.length=n.meta.totalItemCount,this.isLoaded=!0):this.errorList(n?.message?.messages)})}onDelete(t){this.deleteDialog(t.insuranceOffice).subscribe(i=>{i&&this.delete(t)})}delete(t){this.showLoading("socialInsurance-table"),this.employeeSocialInsuranceService.Delete({PersonID:this.employeeId,insuranceoffice:t.insurance_Office_ID,fromdate:t.froM_DATE}).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg(i?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize),this.afterDelete.emit(t)):this.errorList(i?.message?.messages),this.hideLoading("socialInsurance-table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ce))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-social-insurance-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,Zs,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeId>0),e.xp6(1),e.Q6J("name","socialInsurance-table"))},dependencies:[d.O5,w.I,b.Ro]}),a})();function Ls(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",20),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let Ps=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeSocialInsuranceService=t,this.dialogRef=o,this.employeeId=0,this.submitted=!1,this.getList=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],insurance_Office_ID:[null,[l.kI.required]],fromDate:[null,[l.kI.required]],endDate:[null]},{validator:J.w.compareDates("fromDate","endDate")}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}get formCtrls(){return this.form.controls}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={employeeData:{person_ID:this.employeeId,insurance_Office_ID:this.form.value.insurance_Office_ID,from_date:c.M.mapDateReverse(this.form.value.fromDate),end_date:c.M.mapDateReverse(this.form.value.endDate)}};0==this.form.value.id?this.create(t):this.update(t)}}create(t){this.showLoading("socialInsurance"),this.employeeSocialInsuranceService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg(o?.message?.messageTypeName),this.hasUpdate=!0,this.getList=!0):this.errorList(o?.message?.messages),this.hideLoading("socialInsurance")})}update(t){this.showLoading("socialInsurance");let o={employeeData:t.employeeData,oldEmployeeData:{person_ID:this.employeeId,...this.oldEmployeeData}};this.employeeSocialInsuranceService.update(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg(i?.message?.messageTypeName),this.oldEmployeeData=null,this.hasUpdate=!0,this.getList=!0):this.errorList(i?.message?.messages),this.hideLoading("socialInsurance")})}socialInsuranceToEdit(t){this.form.patchValue(t),this.oldEmployeeData={insurance_Office_ID:t.insurance_Office_ID,from_date:t.froM_DATE},this.formCtrls.fromDate.setValue(t.froM_DATE),this.formCtrls.endDate.setValue(t.enD_DATE),this.formCtrls.id.setValue(t.core_Insurance_Office.id)}onSaveInsuranceNumber(t){}afterDelete(t){t?.froM_DATE==this.oldEmployeeData?.from_date&&t?.insurance_Office_ID==this.oldEmployeeData?.insurance_Office_ID&&this.formCtrls.id.value>0&&this.clearForm(),t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ce),e.Y36(g.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-Social-insurance-dialog"]],features:[e.qOj],decls:31,vars:26,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","socialInsurance",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],[1,"divider-title"],[3,"isSocialInsurance","onSave"],[1,"mtop-20"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","submitted","appendTo"],["label","froM_DATE",3,"control","submitted"],["label","endDate",3,"control","submitted"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5)(7,"p",6),e._uU(8),e.ALo(9,"titlecase"),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"emp-general-info-form",7),e.NdJ("onSave",function(n){return o.onSaveInsuranceNumber(n)}),e.qZA(),e._UZ(12,"mat-divider",8),e.TgZ(13,"div",null,9)(15,"p",6),e._uU(16),e.ALo(17,"titlecase"),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"form",10)(20,"div",11)(21,"div",12),e._UZ(22,"insurance-office-dropdown",13),e.qZA(),e.TgZ(23,"div",12),e._UZ(24,"app-datepicker",14),e.qZA(),e.TgZ(25,"div",12),e._UZ(26,"app-datepicker",15),e.qZA()()(),e.TgZ(27,"div",16)(28,"submit-btn",17),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(29,Ls,1,0,"reset-form-btn",18),e.qZA()(),e.TgZ(30,"app-emp-social-insurance-table",19),e.NdJ("rowToEdit",function(n){return o.socialInsuranceToEdit(n)})("afterDelete",function(n){return o.afterDelete(n)}),e.qZA()()),2&t){const i=e.MAs(14);e.Q6J("name","socialInsurance"),e.xp6(8),e.hij(" ",e.lcZ(9,18,e.lcZ(10,20,"socialInsuranceNumber"))," "),e.xp6(3),e.Q6J("isSocialInsurance",!0),e.xp6(5),e.hij(" ",e.lcZ(17,22,e.lcZ(18,24,"socialInsuranceOffice"))," "),e.xp6(3),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.insurance_Office_ID)("submitted",o.submitted)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.fromDate)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.endDate)("submitted",o.submitted),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,N.Q,A.J,S.p,v.T,T.lW,V.d,g.uh,g.xY,b.Ro,As.z,l._Y,l.JL,l.sg,De.u,ze,d.rS,P.X$]}),a})();function Js(a,s){1&a&&(e.TgZ(0,"div",17),e._UZ(1,"p-skeleton",18),e.qZA())}function ks(a,s){1&a&&(e.TgZ(0,"div",17),e._UZ(1,"p-skeleton",18),e.qZA())}function Ns(a,s){if(1&a&&(e.TgZ(0,"div",10),e.YNc(1,Js,2,0,"div",11),e.YNc(2,ks,2,0,"div",12),e._UZ(3,"card-row-item",13)(4,"card-row-item",14)(5,"card-row-item",15)(6,"card-row-item",16),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.isInsuranceNumLoaded),e.xp6(1),e.Q6J("ngIf",!t.isInsuranceNumLoaded),e.xp6(1),e.Q6J("value",null==t.employee||null==t.employee.person?null:t.employee.person.insurance_No),e.xp6(1),e.Q6J("value",null==t.employee||null==t.employee.person?null:t.employee.person.insurance_Years),e.xp6(1),e.Q6J("value",null==t.emp_social_insurance?null:t.emp_social_insurance.insuranceOffice),e.xp6(1),e.Q6J("value",null==t.emp_social_insurance?null:t.emp_social_insurance.date)}}function Ms(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-emp-social-insurance-table",19),e.NdJ("afterDelete",function(i){e.CHM(t);const n=e.oxw(2);return e.KtG(n.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function Us(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,Ns,7,6,"div",7),e.YNc(6,Ms,1,2,"app-emp-social-insurance-table",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",(null==t.employee?null:t.employee.person.insurance_No)||(null==t.employee?null:t.employee.person.insurance_Years)||t.emp_social_insurance)("isLoaded",t.isInsuranceNumLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("employeeId",t.employeeId)("isTableView",t.isTableView)}}function Fs(a,s){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",20),2&a&&e.Q6J("rowNo",4)}let Qs=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeSocialInsuranceService=t,this.empGeneralInfoService=o,this.employeeId=0,this.employeeInstanceId=0,this.isInsuranceNumLoaded=!1,this.isInsuranceOfficeLoaded=!1,this.isTableView=!1,this.employeeId=m.w.EmployeeId,this.employeeInstanceId=m.w.EmployeeInstanceId}ngOnInit(){this.employee=this.empGeneralInfoService.employee$.getValue(),this.empGeneralInfoService.employee$.subscribe(t=>{this.employee=t,this.isLoadedFun()}),this.isLoadedFun()}isLoadedFun(){this.isInsuranceNumLoaded=!1,null!=this.employee&&this.employeeId>0&&(this.isInsuranceNumLoaded=!0),null==this.employee&&0==this.employeeId&&(this.isInsuranceNumLoaded=!0)}onChangeBusinessAndCompanyId(){this.emp_social_insurance=null,this.employeeId>0&&this.checkNoBusinessOrCompany()?this.getAll():this.isInsuranceOfficeLoaded=!0}getAll(){this.emp_social_insurance=null,this.employeeSocialInsuranceService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(t.data.sort((o,i)=>new Date(i.froM_DATE).getTime()-new Date(o.froM_DATE).getTime()),this.emp_social_insurance=(0,U.M3)(t.data)[0],this.isInsuranceOfficeLoaded=!0):this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(Ps).afterClosed().subscribe(t=>{t&&(this.isInsuranceOfficeLoaded=!1,this.getAll())})}afterDelete(t){t&&(this.isInsuranceOfficeLoaded=!1,this.getAll())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ce),e.Y36(m.w))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-social-insurance-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","socialInsurance",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"employeeId","isTableView","toggleTable"],[1,"view-data-row-container"],["class","w-25 m-auto",4,"ngIf"],["class","w-25  m-auto",4,"ngIf"],["label","insurance_No",1,"col-6","col-lg-3","px-0","mb-2",3,"value"],["label","insurance_Years",1,"col-6","col-lg-3","px-0","mb-2",3,"value"],["label","insuranceOffice",1,"col-6","col-lg-3","px-0","mb-2",3,"value"],["label","date",1,"col-6","col-lg-3","px-0","mb-2",3,"value"],[1,"w-25","m-auto"],["width","7rem","styleClass","p-mb-2","borderRadius","10px"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,Us,9,6,"div",0),e.YNc(1,Fs,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isInsuranceNumLoaded||o.isInsuranceOfficeLoaded)("ngIfElse",i)}},dependencies:[d.O5,x.E,Y.O,D,E,Z,ze]}),a})(),me=(()=>{class a extends L.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeContract",t)}update(t){return this.post("Personnel/Employees/Edit_EmployeeContract",t)}getList(t,o){return this.get("Personnel/Employees/GetList_EmployeeContract",{params:{...o,$filter:`Person_ID eq ${t}`,$expand:y.db.core_Contract_Type}})}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeContract",{params:{$filter:`Person_ID eq ${t}`,$expand:y.db.core_Contract_Type}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeContract",{params:{ID:t}})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var qs=r(17288);let Os=(()=>{class a extends L.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeContract_Attachments",t)}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeContract_Attachments",{params:{Contract_ID:t}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeContract_Attachments",{params:t})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),Vs=(()=>{class a extends u.U{constructor(t){super(),this.employeeContractAttachmentService=t,this.isLoaded=!1,this.submitted=!1,this.files=[],this.removeFiles=!1}ngOnInit(){this.form=this.fb.group({files:[null]}),this.addAttachParams={ContractID:this.contractId}}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&this.contractId>0&&this.getAll()}getAll(){this.showLoading("attachments"),this.employeeContractAttachmentService.getAll(this.contractId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.files=[],t.data.forEach(o=>{this.files.push({id:o.id,name:o.en_Name,path:"/"+o.path,size:o.size,type:o.mime})}),this.isLoaded=!0):this.errorList(t?.message?.messages),this.hideLoading("attachments")})}submit(){this.submitted=!0,this.removeFiles=!1,this.form.valid&&this.showLoading()}afterCreate(){this.clearForm(),this.getAll()}delete(t){if(t.id){let o={ContractID:this.contractId,AttachmentID:t.id};this.showLoading("attachments"),this.employeeContractAttachmentService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg(i?.message?.messageTypeName),this.getAll()):this.errorList(i?.message?.messages),this.hideLoading("attachments")})}}clearForm(){this.form.reset({id:0}),this.submitted=!1,this.removeFiles=!0}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Os))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-contract-attachment-section"]],inputs:{contractId:"contractId"},features:[e.qOj],decls:4,vars:9,consts:[[1,"row","mtop-20"],[1,"col-12"],["url","Personnel/Employees/Create_EmployeeContract_Attachments",3,"control","submitted","multiple","existingFiles","removeFiles","params","isFormValid","disabled","onsubmit","afterupload","ondelete"],[3,"name"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"primeng-file-upload",2),e.NdJ("onsubmit",function(){return o.submit()})("afterupload",function(){return o.afterCreate()})("ondelete",function(n){return o.delete(n)}),e.qZA()()(),e._UZ(3,"ngx-spinner",3)),2&t&&(e.xp6(2),e.Q6J("control",o.formCtrls.files)("submitted",o.submitted)("multiple",!1)("existingFiles",o.files)("removeFiles",o.removeFiles)("params",o.addAttachParams)("isFormValid",o.form.valid)("disabled",!o.contractId),e.xp6(1),e.Q6J("name","attachments"))},dependencies:[oe.Y,b.Ro]}),a})();function Bs(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.toEdit(i))})("deleteRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let je=(()=>{class a extends u.U{constructor(t){super(),this.employeeContractDetailsService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["contractType","contracT_NO","start_date","end_date","autO_RENEWAL","actions"],this.optionalColomns=["autO_Resign","include_In_Previous_Duration","actual_End_Date"],this.isLoaded=!1,this.employeeId=0,this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_job_info_contract_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeId>0&&this.getList(this.firstPage),this.hideActions){this.optionalColomns=[];let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new _.by(null)),this.checkNoBusinessOrCompany()&&this.employeeId>0&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new _.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeContractDetailsService.getList(this.employeeId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==p.u.Success?(this.dataSource=new _.by((0,U.PI)(n.data)),this.page.length=n.meta.totalItemCount,this.isLoaded=!0,this.hideLoading()):this.errorList(n?.message?.messages)})}onDelete(t){this.deleteDialog(`${t.contractType} -\n      ${t.start_date} -\n      ${t.end_date}`).subscribe(i=>{i&&this.delete(t)})}delete(t){this.showLoading("table"),this.employeeContractDetailsService.Delete(t.id).subscribe(o=>{o.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg(o?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize),this.afterDelete.emit(t)):(this.errorList(o?.message?.messages),this.hideLoading("table"))})}toEdit(t){this.rowToEdit.emit(t)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(me))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-contract-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,Bs,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,b.Ro]}),a})();function Rs(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",24),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}function Ys(a,s){if(1&a&&e._UZ(0,"app-emp-contract-attachment-section",25),2&a){const t=e.oxw();e.Q6J("contractId",t.formCtrls.id.value)}}let Gs=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeContractDetailsService=t,this.dialogRef=o,this.employeeId=0,this.submitted=!1,this.hasUpdate=!1,this.getList=!1,this.autoRenewalList=[{id:"null",ar_Name:"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f",en_Name:"Not set"},{id:"true",ar_Name:"\u0635\u062d\u064a\u062d",en_Name:"True"},{id:"false",ar_Name:"\u062e\u0637\u0623",en_Name:"False"}],this.employeeId=m.w.EmployeeId}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],contracT_TYPE_ID:[null,[l.kI.required]],contracT_NO:[null,[l.kI.required]],starT_DATE:[null,[l.kI.required]],enD_DATE:[null,[l.kI.required]],autO_RENEWAL:["false"],autO_Resign:[null],include_In_Previous_Duration:[null]},{validator:J.w.compareDates("starT_DATE","enD_DATE")}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}get formCtrls(){return this.form.controls}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={EmployeeData:{person_ID:this.employeeId,id:this.form.value.id,contracT_TYPE_ID:this.form.value.contracT_TYPE_ID,contracT_NO:this.form.value.contracT_NO,starT_DATE:c.M.mapDateReverse(this.form.value.starT_DATE),enD_DATE:c.M.mapDateReverse(this.form.value.enD_DATE),autO_RENEWAL:"null"==this.form.value.autO_RENEWAL?null:"false"!=this.form.value.autO_RENEWAL,autO_Resign:this.form.value.autO_Resign??!1,include_In_Previous_Duration:this.form.value.include_In_Previous_Duration??!1}};0==t.EmployeeData.id?this.create(t):this.update(t)}}create(t){this.showLoading("dialog"),this.employeeContractDetailsService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.formCtrls.id.setValue(o.data.id),this.addSuccessfullyMsg(o?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){this.showLoading("dialog"),this.employeeContractDetailsService.update(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg(o?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}employeeContractDetailsToEdit(t){this.form.patchValue(t),this.formCtrls.autO_RENEWAL.setValue(String(t.autO_RENEWAL))}afterDelete(t){t.id==this.formCtrls.id.value&&this.clearForm(),t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0,autO_RENEWAL:"false"}),this.submitted=!1}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(me),e.Y36(g.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-contract-section"]],features:[e.qOj],decls:30,vars:25,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","contract",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","submitted","filter","appendTo"],["label","contracT_NO",3,"control","submitted"],["label","start_date",3,"control","submitted"],["label","end_date",3,"control","submitted"],["label","autO_RENEWAL",3,"control","submitted","List","appendTo"],[1,"col-md-4","col-sm-6","col-12","mbottom-20","mtop-14"],["label","autO_Resign",3,"control"],["label","include_In_Previous_Duration",3,"control"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[1,"clearfix"],[3,"contractId",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"],[3,"contractId"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-contract-type-dropdown",10),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"app-datepicker",12),e.qZA(),e.TgZ(16,"div",9),e._UZ(17,"app-datepicker",13),e.qZA(),e.TgZ(18,"div",9),e._UZ(19,"app-prime-dropdown",14),e.qZA(),e.TgZ(20,"div",15),e._UZ(21,"app-check-box",16),e.qZA(),e.TgZ(22,"div",15),e._UZ(23,"app-check-box",17),e.qZA()()(),e.TgZ(24,"div",18)(25,"submit-btn",19),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(26,Rs,1,0,"reset-form-btn",20),e._UZ(27,"div",21),e.qZA(),e.YNc(28,Ys,1,1,"app-emp-contract-attachment-section",22),e.TgZ(29,"app-emp-contract-table",23),e.NdJ("rowToEdit",function(n){return o.employeeContractDetailsToEdit(n)})("afterDelete",function(n){return o.afterDelete(n)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.contracT_TYPE_ID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.contracT_NO)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.starT_DATE)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.enD_DATE)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.autO_RENEWAL)("submitted",o.submitted)("List",o.autoRenewalList)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.autO_Resign),e.xp6(2),e.Q6J("control",o.formCtrls.include_In_Previous_Duration),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(2),e.Q6J("ngIf",o.formCtrls.id.value),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,N.Q,M.a,q.u,A.J,S.p,v.T,T.lW,g.uh,g.xY,b.Ro,Ve.t,qs.c,l._Y,l.JL,l.sg,Vs,je]}),a})();function Hs(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"div",10),e._UZ(2,"card-row-item",11)(3,"card-row-item",12)(4,"card-row-item",13)(5,"card-row-item",14),e.qZA(),e.BQk()),2&a){const t=e.oxw(2);e.xp6(2),e.Q6J("value",null==t.contract?null:t.contract.contracT_NO),e.xp6(1),e.Q6J("value",null==t.contract?null:t.contract.contractType),e.xp6(1),e.Q6J("value",null==t.contract?null:t.contract.start_date),e.xp6(1),e.Q6J("value",null==t.contract?null:t.contract.end_date)}}function Ws(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-emp-contract-table",15),e.NdJ("afterDelete",function(i){e.CHM(t);const n=e.oxw(2);return e.KtG(n.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function zs(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,Hs,6,4,"ng-container",7),e.YNc(6,Ws,1,2,"app-emp-contract-table",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.contract)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("employeeId",t.employeeId)("isTableView",t.isTableView)}}function js(a,s){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",16),2&a&&e.Q6J("rowNo",4)}let $s=(()=>{class a extends u.U{constructor(t){super(),this.employeeContractDetailsService=t,this.employeeId=0,this.isLoaded=!1,this.isTableView=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&(this.employeeId>0?this.getAllContractDetails():this.isLoaded=!0)}getAllContractDetails(){return this.employeeContractDetailsService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.isLoaded=!0,this.contract=(0,U.PI)(t.data.slice(-1))[0],this.contract?.autO_RENEWAL&&(this.contract.contractType+=" - "+this.translate("autO_RENEWAL"))):this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(Gs).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAllContractDetails())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAllContractDetails())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(me))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-contract-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","contract",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],[4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"employeeId","isTableView","toggleTable"],[1,"view-data-row-container"],["label","contracT_NO",1,"col-6","col-md-3","px-0","mb-2",3,"value"],["label","contract",1,"col-6","col-md-3","px-0","mb-2",3,"value"],["label","start_date",1,"col-6","col-md-3","px-0","mb-2",3,"value"],["label","end_date",1,"col-6","col-md-3","px-0","mb-2",3,"value"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,zs,9,6,"div",0),e.YNc(1,js,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.O5,x.E,D,E,Z,je]}),a})();function Ks(a,s){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-job-info-card"),e.qZA())}function Xs(a,s){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"app-emp-contract-card"),e.qZA())}function en(a,s){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-hiring-documents-card"),e.qZA())}function tn(a,s){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-work-schedule-card"),e.qZA())}function on(a,s){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"app-emp-location-card"),e.qZA())}function an(a,s){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"app-emp-custodies-card"),e.qZA())}function sn(a,s){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"app-emp-social-insurance-card"),e.qZA())}let nn=(()=>{class a extends u.U{constructor(){super(),this.viewsManager=h.S}ngOnInit(){}onModulesChanged(){this.allowedSections=this.getCustomViewChildren(this.getParentViewName,h.S.employment_info_tab)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["employement-information-core"]],inputs:{icon:"icon"},features:[e.qOj],decls:14,vars:7,consts:[[1,"row"],[1,"col-12"],[1,"main-card-title","border-bottom"],["title","employmentInfo","color","font-dark",1,"emp-card-title"],[1,"container-fluid","p-0","px-4"],[1,"row","mx-md-n2"],["class","col-12 p-0 px-md-2",4,"ngIf"],[1,"col-12","p-0","px-md-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-title",2),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"mat-card-content",4)(6,"div",5),e.YNc(7,Ks,2,0,"div",6),e.YNc(8,Xs,2,0,"div",6),e.YNc(9,en,2,0,"div",6),e.YNc(10,tn,2,0,"div",6),e.YNc(11,on,2,0,"div",6),e.YNc(12,an,2,0,"div",6),e.YNc(13,sn,2,0,"div",6),e.qZA()()()()()),2&t&&(e.xp6(7),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_job_info_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_job_info_contract_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_hiring_documents_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_work_schedule_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_location_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_custodies_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_social_insurance_sec)))},dependencies:[d.O5,v.T,C.a8,C.dn,C.n5,si,Oi,as,hs,xs,Qs,$s]}),a})(),$e=(()=>{class a extends L.K{constructor(){super()}update(t){return this.post("Personnel/Employees/Edit_EmployeeVacationBalance",t)}getList(t,o){return this.get("Personnel/Employees/GetList_EmployeeVacationBalance",{params:{...o,PersonInstanceID:t}})}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeVacationBalance",{params:{person_instance_id:t}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeVacationBalance",{body:t})}getCard(t){return this.get("Personnel/Employees/GetAllCard_LastVactionBalance",{params:{person_instance_id:t}})}regenerateBalance(t){return this.post("Personnel/Employees/RegenerateBalance",null,{params:{person_instance_id:t}})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var ln=r(71812),rn=r(72370);function ue(a){return a.map(s=>({...s,vacation:(0,c._)(s.vacation_ArName,s.vacation_EnName),startDate:c.M.mapDate(s.opening_balance_date),endDate:c.M.mapDate(s.closing_balance_date),balance:s.vacationBalanceOriginal,used:s.vacation_Done_Balance,remaining:s.vacation_balance}))}function _e(a){return a.map(s=>({...s,permission:s.permission_Setup_Name,startDate:c.M.mapDate(s.opening_balance_date),endDate:c.M.mapDate(s.closing_balance_date),balance:s.permission_balance,used:s.taken_permission_Yearly,remaining:s.remaining_Balance,newHireCloseDate:c.M.mapDate(s.newHireCloseDate)}))}function pn(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.toEdit(i))})("deleteRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let Ke=(()=>{class a extends u.U{constructor(t){super(),this.employeeVacationService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.showLess=!1,this.mandatoryColomns=["vacation","startDate","endDate","balance","used","remaining","actions"],this.optionalColomns=[],this.isLoaded=!1,this.employeeInstanceId=0,this.employeeInstanceId=m.w.EmployeeInstanceId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_vacation_sec)}ngOnInit(){m.w.employeeInstanceId$.subscribe(t=>{this.employeeInstanceId=t,this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()&&(this.isLoaded=!1,this.showLess?this.getCard():this.getList(this.firstPage))})}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeInstanceId>0&&(this.showLess?this.getCard():this.getList(this.firstPage)),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());o>=0&&this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new _.by(null)),this.checkNoBusinessOrCompany()&&this.employeeInstanceId>0&&(this.showLess?this.getCard():this.getList(this.firstPage))}getList(t,o){this.dataSource=new _.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeVacationService.getList(this.employeeInstanceId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==p.u.Success?(this.dataSource=new _.by(ue(n.data)),this.page.length=n.meta.totalItemCount,this.isLoaded=!0):this.errorList(n?.message?.messages)})}getCard(){this.dataSource=new _.by(null),this.isLoaded=!1,this.employeeVacationService.getCard(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{if(t.message.messageType==p.u.Success){if(t.data.length>0){let o=[],i=[];t.data.forEach(I=>{this.isAnnualOrCasualVacations(I)?o.push(I):i.push(I)});let n=[...o,...i.sort((I,k)=>new Date(k.opening_balance_date).getTime()-new Date(I.opening_balance_date).getTime()).slice(0,4-o.length)];n.sort((I,k)=>new Date(k.opening_balance_date).getTime()-new Date(I.opening_balance_date).getTime()),this.dataSource=new _.by(ue(n))}else this.dataSource=new _.by(ue(t.data));this.isLoaded=!0}else this.errorList(t?.message?.messages)})}isAnnualOrCasualVacations(t){return t.vacation_EnName.toLocaleLowerCase().includes("annual")||t.vacation_ArName.toLocaleLowerCase().includes("annual")||t.vacation_EnName.toLocaleLowerCase().includes("casual")||t.vacation_ArName.toLocaleLowerCase().includes("casual")}toEdit(t){this.rowToEdit.emit(t)}onDelete(t){this.deleteDialog(t.vacation).subscribe(i=>{i&&this.delete(t)})}delete(t){let o={vacation_ID:t.vacation_ID,person_Instance_ID:this.employeeInstanceId,opening_balance_date:c.M.mapDateReverse(t.opening_balance_date),closing_balance_date:c.M.mapDateReverse(t.closing_balance_date),vacation_balance:t.vacationBalanceOriginal};this.showLoading("table"),this.employeeVacationService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg(i?.message?.messageTypeName),this.afterDelete.emit(t),this.showLess?this.getCard():this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize)):this.errorList(i?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36($e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-vacation-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator",showLess:"showLess",lessData:"lessData"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,pn,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeInstanceId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,b.Ro]}),a})();function dn(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"submit-btn",21),e.NdJ("onClick",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.submit())}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("id",t.formCtrls.id.value)("color",t.btn.darkBlue)("disabled",!t.employeeInstanceId)("iconPositionBefore",!1)}}function cn(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let mn=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeVacationService=t,this.dialogRef=o,this.employeeInstanceId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.selectedVacation=null,this.employeeInstanceId=m.w.EmployeeInstanceId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_vacation_sec)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],vacation_ID:[null,[l.kI.required]],opening_balance_date:[null,[l.kI.required]],closing_balance_date:[null,[l.kI.required]],vacationBalanceOriginal:[null,[l.kI.required,Q.dN.gte(0)]],vacation_Done_Balance:[null]},{validator:J.w.compareDates("opening_balance_date","closing_balance_date")}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}get formCtrls(){return this.form.controls}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={person_Instance_ID:this.employeeInstanceId,vacation_ID:this.formCtrls.vacation_ID.value,opening_balance_date:c.M.mapDateReverse(this.formCtrls.opening_balance_date.value),closing_balance_date:c.M.mapDateReverse(this.formCtrls.closing_balance_date.value),vacation_balance:this.formCtrls.vacationBalanceOriginal.value};this.update(t)}}update(t){this.showLoading("dialog"),this.employeeVacationService.update(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg(o?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0,this.selectedVacation=null):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}employeeVacationToEdit(t){this.form.patchValue(t),this.formCtrls.id.setValue(t.vacation_ID),this.selectedVacation=t}afterDelete(t){t.vacation_ID==this.selectedVacation?.vacation_ID&&t.opening_balance_date==this.selectedVacation?.opening_balance_date&&t.closing_balance_date==this.selectedVacation?.closing_balance_date&&t.vacationBalanceOriginal==this.selectedVacation?.vacationBalanceOriginal&&this.formCtrls.id.value>0&&this.clearForm(),t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}regenerateBalance(){this.showLoading("dialog"),this.employeeVacationService.regenerateBalance(this.employeeInstanceId).subscribe(t=>{t.message.messageType==p.u.Success?(this.updateSuccessfullyMsg(t?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0):this.errorList(t?.message?.messages),this.hideLoading("dialog")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36($e),e.Y36(g.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-vacation-dialog"]],features:[e.qOj],decls:26,vars:23,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","vacation",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","submitted","filter","appendTo","disable"],["label","startDate",3,"control","submitted","disabled"],["label","endDate",3,"control","submitted","disabled"],["label","balance","type","number",3,"control","submitted","disabled"],["label","used","type","number",3,"control","submitted","disabled"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick",4,"ngIf"],["label","regenerateBalance",1,"float-left",3,"color","onClick"],[3,"click",4,"ngIf"],[1,"clearfix"],[3,"hasUpdate","rowToEdit","afterDelete"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-vacation-type-dropdown",10),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-datepicker",11),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"app-datepicker",12),e.qZA(),e.TgZ(16,"div",9),e._UZ(17,"app-input",13),e.qZA(),e.TgZ(18,"div",9),e._UZ(19,"app-input",14),e.qZA()()(),e.TgZ(20,"div",15),e.YNc(21,dn,1,4,"submit-btn",16),e.TgZ(22,"app-button",17),e.NdJ("onClick",function(){return o.regenerateBalance()}),e.qZA(),e.YNc(23,cn,1,0,"reset-form-btn",18),e.qZA(),e._UZ(24,"div",19),e.TgZ(25,"emp-vacation-table",20),e.NdJ("rowToEdit",function(n){return o.employeeVacationToEdit(n)})("afterDelete",function(n){return o.afterDelete(n)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.vacation_ID)("submitted",o.submitted)("filter",!0)("appendTo",i)("disable",!0),e.xp6(2),e.Q6J("control",o.formCtrls.opening_balance_date)("submitted",o.submitted)("disabled",!0),e.xp6(2),e.Q6J("control",o.formCtrls.closing_balance_date)("submitted",o.submitted)("disabled",!0),e.xp6(2),e.Q6J("control",o.formCtrls.vacationBalanceOriginal)("submitted",o.submitted)("disabled",0==o.formCtrls.id.value),e.xp6(2),e.Q6J("control",o.formCtrls.vacation_Done_Balance)("submitted",o.submitted)("disabled",!0),e.xp6(2),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("color",o.btn.darkBlue),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(2),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,N.Q,M.a,A.J,S.p,v.T,ln.r,T.lW,g.uh,g.xY,b.Ro,rn.t,l._Y,l.JL,l.sg,Ke]}),a})();function un(a,s){1&a&&(e.TgZ(0,"div",9),e._UZ(1,"card-row-item",10),e.qZA())}function _n(a,s){if(1&a&&e._UZ(0,"emp-vacation-table",11),2&a){const t=e.oxw();e.Q6J("isMatPaginator",!0)("hideActions",!0)("hasUpdate",t.hasUpdate)}}let gn=(()=>{class a extends u.U{constructor(){super(),this.employeeInstanceId=0,this.isTableView=!1,this.hasUpdate=!1,this.employeeInstanceId=m.w.EmployeeInstanceId,m.w.employeeInstanceId$.subscribe(t=>{this.employeeInstanceId=t})}ngOnInit(){}openAddEditDialog(){this.hasUpdate=!1,this.dialogsService.addEditDialog(mn).afterClosed().subscribe(t=>{t&&(this.hasUpdate=!0)})}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-vacation-card"]],features:[e.qOj],decls:10,vars:12,consts:[[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","vacation",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12","px-0"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","showLess","hasUpdate"],[3,"isMatPaginator","hideActions","hasUpdate",4,"ngIf"],[3,"employeeId","isTableView","toggleTable"],[1,"view-data-row-container"],["label","vacation",1,"col-4","col-lg","px-0","mb-2"],[3,"isMatPaginator","hideActions","hasUpdate"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"card-header",3),e.NdJ("onClickIcon",function(){return o.openAddEditDialog()}),e.qZA()(),e.TgZ(4,"div",4),e.YNc(5,un,2,0,"div",5),e._UZ(6,"emp-vacation-table",6),e.YNc(7,_n,1,3,"emp-vacation-table",7),e.qZA(),e.TgZ(8,"div",2)(9,"see-more-btn",8),e.NdJ("toggleTable",function(){return o.toggleTable()}),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("isEdit",o.employeeInstanceId)("isLoaded",!0),e.xp6(2),e.Q6J("ngIf",!o.employeeInstanceId),e.xp6(1),e.ekj("hidden",o.isTableView),e.Q6J("isMatPaginator",!0)("hideActions",!0)("showLess",!0)("hasUpdate",o.hasUpdate),e.xp6(1),e.Q6J("ngIf",o.isTableView),e.xp6(2),e.Q6J("employeeId",o.employeeInstanceId)("isTableView",o.isTableView))},dependencies:[d.O5,D,E,Z,Ke]}),a})(),hn=(()=>{class a extends L.K{constructor(){super()}getList(t,o){return this.get("Personnel/Employees/GetList_EmployeePermission",{params:{...o,person_instance_id:t}})}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeePermission",{params:{person_instance_id:t}})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function fn(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",5)(1,"h4"),e._UZ(2,"page-title",6),e.qZA(),e.TgZ(3,"button",7),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onCloseDialog())}),e._UZ(4,"i",8),e.qZA()()}}function bn(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",9),e.NdJ("onChangePage",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.getList(i.pageIndex+1,i.pageSize))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("page",t.page)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("showSpaceTop",!1)("isMatPaginator",t.isCardView)("showFirstLastButtons",!1)}}function Cn(a,s){1&a&&(e._UZ(0,"span",12),e.TgZ(1,"div",13),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"noDataToDisplay")," "))}function yn(a,s){1&a&&(e.ynx(0),e.TgZ(1,"p-messages",10),e.YNc(2,Cn,4,3,"ng-template",11),e.qZA(),e.BQk())}let Xe=(()=>{class a extends u.U{constructor(t,o){super(),this.employeePermissionService=t,this.dialogRef=o,this.employeeInstanceId=0,this.mandatoryColomns=["permission","startDate","endDate","balance","used","remaining","newHireBalance","newHireCloseDate"],this.optionalColomns=[],this.isLoaded=!1,this.isCardView=!1,this.showLess=!1,this.submitted=!1,this.employeeInstanceId=m.w.EmployeeInstanceId,m.w.employeeInstanceId$.subscribe(i=>{this.employeeInstanceId=i,this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()&&(this.isLoaded=!1,this.showLess?this.getAll():this.getList(this.firstPage))})}ngOnInit(){}onCloseDialog(){this.dialogRef.close(!1)}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new _.by(null)),this.checkNoBusinessOrCompany()&&this.employeeInstanceId>0&&(this.showLess?this.getAll():this.getList(this.firstPage))}getList(t,o){this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeePermissionService.getList(this.employeeInstanceId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==p.u.Success?(this.dataSource=new _.by(_e(n.data)),this.page.length=n.meta.totalItemCount,this.isLoaded=!0):this.errorList(n?.message?.messages)})}getAll(){this.employeePermissionService.getAll(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{if(t.message.messageType==p.u.Success){let o=t.data;t.data.length>4?(o.sort((i,n)=>new Date(n.opening_balance_date).getTime()-new Date(i.opening_balance_date).getTime()),this.dataSource=new _.by(_e(o.slice(0,4)))):this.dataSource=new _.by(_e(t.data)),this.isLoaded=!0}else this.errorList(t?.message?.messages)})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(hn),e.Y36(g.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-permission-dialog"]],inputs:{isCardView:"isCardView",showLess:"showLess"},features:[e.qOj],decls:6,vars:3,consts:[["mat-dialog-title","","class","primary-color font-size-20 m-0",4,"ngIf"],[1,"container-fluid","mx-0"],["dialogContainer",""],["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","isDialogSize","showFilter","showSpaceTop","isMatPaginator","showFirstLastButtons","onChangePage",4,"ngIf"],[4,"ngIf"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","permission",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","isDialogSize","showFilter","showSpaceTop","isMatPaginator","showFirstLastButtons","onChangePage"],["severity","warn"],["pTemplate",""],[1,"p-message-icon","pi","pi-exclamation-triangle"],[1,"p-message-detail"]],template:function(t,o){1&t&&(e._UZ(0,"ngx-spinner"),e.YNc(1,fn,5,0,"div",0),e.TgZ(2,"mat-dialog-content",1,2),e.YNc(4,bn,1,11,"app-material-table",3),e.YNc(5,yn,3,0,"ng-container",4),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",!o.isCardView),e.xp6(3),e.Q6J("ngIf",o.employeeInstanceId>0),e.xp6(1),e.Q6J("ngIf",!o.employeeInstanceId&&!o.isCardView))},dependencies:[d.O5,w.I,v.T,T.lW,g.uh,g.xY,b.Ro,H.jx,le.V,P.X$]}),a})();function In(a,s){1&a&&(e.TgZ(0,"div",9),e._UZ(1,"card-row-item",10),e.qZA())}let vn=(()=>{class a extends u.U{constructor(){super(),this.employeeInstanceId=0,this.isTableView=!1,this.employeeInstanceId=m.w.EmployeeInstanceId,m.w.employeeInstanceId$.subscribe(t=>{this.employeeInstanceId=t})}ngOnInit(){}openAddEditDialog(){this.dialogsService.addEditDialog(Xe,{},{disableClose:!1,minWidth:"50vw",maxWidth:"80vw",top:"40px"}).afterClosed().subscribe(t=>{})}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-permission-card"]],features:[e.qOj],decls:10,vars:12,consts:[[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","permission",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12","px-0"],["class","view-data-row-container",4,"ngIf"],[3,"isCardView","showLess"],[3,"isCardView"],[3,"employeeId","isTableView","toggleTable"],[1,"view-data-row-container"],["label","permission",1,"col-4","col-lg","px-0","mb-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"card-header",3),e.NdJ("onClickIcon",function(){return o.openAddEditDialog()}),e.qZA()(),e.TgZ(4,"div",4),e.YNc(5,In,2,0,"div",5),e._UZ(6,"emp-permission-dialog",6)(7,"emp-permission-dialog",7),e.qZA(),e.TgZ(8,"div",2)(9,"see-more-btn",8),e.NdJ("toggleTable",function(){return o.toggleTable()}),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("isEdit",o.employeeInstanceId)("isLoaded",!0),e.xp6(2),e.Q6J("ngIf",!o.employeeInstanceId),e.xp6(1),e.ekj("hidden",o.isTableView||!o.employeeInstanceId),e.Q6J("isCardView",!0)("showLess",!0),e.xp6(1),e.ekj("hidden",!o.isTableView),e.Q6J("isCardView",!0),e.xp6(2),e.Q6J("employeeId",o.employeeInstanceId)("isTableView",o.isTableView))},dependencies:[d.O5,D,E,Xe,Z]}),a})();function Tn(a,s){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-vacation-card"),e.qZA())}function wn(a,s){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-permission-card"),e.qZA())}let Dn=(()=>{class a extends u.U{constructor(){super(),this.viewsManager=h.S}ngOnInit(){}onModulesChanged(){this.allowedSections=this.getCustomViewChildren(this.getParentViewName,h.S.emp_balances_tab)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["employee-balances-core"]],inputs:{icon:"icon"},features:[e.qOj],decls:9,vars:2,consts:[[1,"row"],[1,"col-12"],[1,"main-card-title","border-bottom"],["title","employeeBalances","color","font-dark",1,"emp-card-title"],[1,"container-fluid","p-0","px-4"],[1,"row","mx-md-n2"],["class","col-12 p-0 px-md-2",4,"ngIf"],[1,"col-12","p-0","px-md-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-title",2),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"mat-card-content",4)(6,"div",5),e.YNc(7,Tn,2,0,"div",6),e.YNc(8,wn,2,0,"div",6),e.qZA()()()()()),2&t&&(e.xp6(7),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_vacation_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_permission_sec)))},dependencies:[d.O5,v.T,C.a8,C.dn,C.n5,gn,vn]}),a})(),ge=(()=>{class a extends L.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeSapCostCenter",t)}update(t){return this.post("Personnel/Employees/Edit_EmployeeSapCostCenter",t)}getList(t,o){return this.get("Personnel/Employees/GetList_EmployeeSapCostCenter",{params:{...o,$filter:`Person_Instance_ID eq ${t}`,$expand:y.db.saP_SystemInstance}})}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeSapCostCenter",{params:{$filter:`Person_Instance_ID eq ${t}`,$expand:y.db.saP_SystemInstance}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeSapCostCenter",{params:{Id:t}})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var En=r(37034);function et(a){return a.map(s=>({...s,sapSystemInstance:(0,c._)(s.saP_SystemInstance?.ar_Name,s.saP_SystemInstance?.en_Name),projectCode:s.proj_Code,defualtOcrCode1:s.ocrCode1,defualtOcrCode2:s.ocrCode2,defualtOcrCode3:s.ocrCode3,defualtOcrCode4:s.ocrCode4,defualtOcrCode5:s.ocrCode5}))}function xn(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.toEdit(i))})("deleteRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let tt=(()=>{class a extends u.U{constructor(t){super(),this.employeeSapB1Service=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["sapSystemInstance","projectCode","actions"],this.optionalColomns=["defualtOcrCode1","defualtOcrCode2","defualtOcrCode3","defualtOcrCode4","defualtOcrCode5"],this.isLoaded=!1,this.employeeInstanceId=0,this.employeeInstanceId=m.w.EmployeeInstanceId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_SAPB1_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeInstanceId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new _.by(null)),this.checkNoBusinessOrCompany()&&this.employeeInstanceId>0&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new _.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeSapB1Service.getList(this.employeeInstanceId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==p.u.Success?(this.dataSource=new _.by(et(n.data)),this.page.length=n.meta.totalItemCount,this.isLoaded=!0):this.errorList(n?.message?.messages)})}toEdit(t){this.rowToEdit.emit(t)}onDelete(t){this.deleteDialog(t.sapSystemInstance).subscribe(i=>{i&&this.delete(t)})}delete(t){this.showLoading("table"),this.employeeSapB1Service.Delete(t.id).subscribe(o=>{o.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg(o?.message?.messageTypeName),this.afterDelete.emit(t),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize)):this.errorList(o?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ge))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-sap-b1-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,xn,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeInstanceId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,b.Ro]}),a})();function An(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let Zn=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeSapB1Service=t,this.dialogRef=o,this.employeeInstanceId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.employeeInstanceId=m.w.EmployeeInstanceId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_SAPB1_sec)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],systemInstance_ID:[null,[l.kI.required]],proj_Code:[null],ocrCode1:[null],ocrCode2:[null],ocrCode3:[null],ocrCode4:[null],ocrCode5:[null]}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}get formCtrls(){return this.form.controls}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={EmployeeData:{Person_Instance_ID:this.employeeInstanceId,ID:this.form.value.id,SystemInstance_ID:this.form.value.systemInstance_ID,Proj_Code:this.form.value.proj_Code,OcrCode1:this.form.value.ocrCode1,OcrCode2:this.form.value.ocrCode2,OcrCode3:this.form.value.ocrCode3,OcrCode4:this.form.value.ocrCode4,OcrCode5:this.form.value.ocrCode5}};0==t.EmployeeData.ID?this.create(t):this.update(t)}}create(t){this.showLoading("dialog"),this.employeeSapB1Service.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg(o?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){this.showLoading("dialog"),this.employeeSapB1Service.update(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg(o?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}employeeSapB1ToEdit(t){this.form.patchValue(t)}afterDelete(t){t.id==this.formCtrls.id.value&&this.clearForm(),t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ge),e.Y36(g.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-sap-b1-dialog"]],features:[e.qOj],decls:29,vars:24,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","sapB1",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","submitted","filter","appendTo"],["label","projectCode",3,"control","submitted"],["label","defualtOcrCode1",3,"control","submitted"],["label","defualtOcrCode2",3,"control","submitted"],["label","defualtOcrCode3",3,"control","submitted"],["label","defualtOcrCode4",3,"control","submitted"],["label","defualtOcrCode5",3,"control","submitted"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[1,"clearfix"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-sap-system-instance-dropdown",10),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"app-input",12),e.qZA(),e.TgZ(16,"div",9),e._UZ(17,"app-input",13),e.qZA(),e.TgZ(18,"div",9),e._UZ(19,"app-input",14),e.qZA(),e.TgZ(20,"div",9),e._UZ(21,"app-input",15),e.qZA(),e.TgZ(22,"div",9),e._UZ(23,"app-input",16),e.qZA()()(),e.TgZ(24,"div",17)(25,"submit-btn",18),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(26,An,1,0,"reset-form-btn",19),e.qZA(),e._UZ(27,"div",20),e.TgZ(28,"emp-sap-b1-table",21),e.NdJ("rowToEdit",function(n){return o.employeeSapB1ToEdit(n)})("afterDelete",function(n){return o.afterDelete(n)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.systemInstance_ID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.proj_Code)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.ocrCode1)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.ocrCode2)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.ocrCode3)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.ocrCode4)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.ocrCode5)("submitted",o.submitted),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeInstanceId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(2),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,M.a,A.J,S.p,v.T,T.lW,g.uh,g.xY,b.Ro,En.K,l._Y,l.JL,l.sg,tt]}),a})();function Ln(a,s){if(1&a&&(e.TgZ(0,"div",11),e._UZ(1,"card-row-item",12)(2,"card-row-item",13),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("value",null==t.empSapB1?null:t.empSapB1.sapSystemInstance),e.xp6(1),e.Q6J("value",null==t.empSapB1?null:t.empSapB1.projectCode)}}function Pn(a,s){if(1&a&&(e.TgZ(0,"div",14),e._UZ(1,"card-row-item",15)(2,"card-row-item",16)(3,"card-row-item",17)(4,"card-row-item",18)(5,"card-row-item",19),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("value",null==t.empSapB1?null:t.empSapB1.defualtOcrCode1),e.xp6(1),e.Q6J("value",null==t.empSapB1?null:t.empSapB1.defualtOcrCode2),e.xp6(1),e.Q6J("value",null==t.empSapB1?null:t.empSapB1.defualtOcrCode3),e.xp6(1),e.Q6J("value",null==t.empSapB1?null:t.empSapB1.defualtOcrCode4),e.xp6(1),e.Q6J("value",null==t.empSapB1?null:t.empSapB1.defualtOcrCode5)}}function Jn(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"emp-sap-b1-table",20),e.NdJ("afterDelete",function(i){e.CHM(t);const n=e.oxw(2);return e.KtG(n.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function kn(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,Ln,3,2,"div",7),e.YNc(6,Pn,6,5,"div",8),e.YNc(7,Jn,1,2,"emp-sap-b1-table",9),e.qZA(),e.TgZ(8,"div",4)(9,"see-more-btn",10),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.empSapB1)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("employeeId",t.employeeInstanceId)("isTableView",t.isTableView)}}function Nn(a,s){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",21),2&a&&e.Q6J("rowNo",7)}let Mn=(()=>{class a extends u.U{constructor(t){super(),this.employeeSapB1Service=t,this.isLoaded=!1,this.isTableView=!1,this.employeeInstanceId=m.w.EmployeeInstanceId,m.w.employeeInstanceId$.subscribe(o=>{this.employeeInstanceId=o,this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()?(this.isLoaded=!1,this.getAllByEmployeeId()):this.isLoaded=!0})}ngOnInit(){}getAllByEmployeeId(){this.empSapB1=null,this.employeeSapB1Service.getAll(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.empSapB1=et(t.data)[0],this.isLoaded=!0):this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(Zn).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAllByEmployeeId())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAllByEmployeeId())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ge))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-sap-b1-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","sapB1",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container mbottom-20",4,"ngIf"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"employeeId","isTableView","toggleTable"],[1,"view-data-row-container","mbottom-20"],["label","sapSystemInstance",1,"col-6","px-0",3,"value"],["label","projectCode",1,"col-6","px-0",3,"value"],[1,"view-data-row-container"],["label","defualtOcrCode1",1,"col-6","col-lg","px-0","mb-2",3,"value"],["label","defualtOcrCode2",1,"col-6","col-lg","px-0","mb-2",3,"value"],["label","defualtOcrCode3",1,"col-6","col-lg","px-0","mb-2",3,"value"],["label","defualtOcrCode4",1,"col-6","col-lg","px-0","mb-2",3,"value"],["label","defualtOcrCode5",1,"col-6","col-lg","px-0","mb-2",3,"value"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,kn,10,7,"div",0),e.YNc(1,Nn,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.O5,x.E,D,E,Z,tt]}),a})();var he=r(25199),Un=r(44423),Fn=r(63218);function Qn(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.toEdit(i))})("deleteRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let ot=(()=>{class a extends u.U{constructor(t){super(),this.employeeS4HanaService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["s4SystemInstance","costCenter","costCenter_Text","actions"],this.optionalColomns=[],this.isLoaded=!1,this.employeeInstanceId=0,this.employeeInstanceId=m.w.EmployeeInstanceId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_S4Hana_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeInstanceId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new _.by(null)),this.checkNoBusinessOrCompany()&&this.employeeInstanceId>0&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new _.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeS4HanaService.getList(this.employeeInstanceId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==p.u.Success?(this.dataSource=new _.by(function Sn(a){return a.map(s=>({...s,s4SystemInstance:(0,c._)(s.s4_SystemInstance?.ar_Name,s.s4_SystemInstance?.en_Name)}))}(n.data)),this.page.length=n.meta.totalItemCount,this.isLoaded=!0):this.errorList(n?.message?.messages)})}toEdit(t){this.rowToEdit.emit(t)}onDelete(t){this.deleteDialog(t.s4SystemInstance).subscribe(i=>{i&&this.delete(t)})}delete(t){this.showLoading("table"),this.employeeS4HanaService.Delete(t.id).subscribe(o=>{o.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg(o?.message?.messageTypeName),this.afterDelete.emit(t),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize)):this.errorList(o?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(he.Q))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-s4-hana-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,Qn,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeInstanceId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,b.Ro]}),a})();function qn(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",16),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let On=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeS4HanaService=t,this.dialogRef=o,this.employeeInstanceId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.employeeInstanceId=m.w.EmployeeInstanceId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_S4Hana_sec)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],systemInstance_ID:[null,[l.kI.required]],costCenter:[null,[l.kI.required]],costCenter_Text:[null]}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}get formCtrls(){return this.form.controls}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={EmployeeData:{Person_Instance_ID:this.employeeInstanceId,ID:this.form.value.id,SystemInstance_ID:this.form.value.systemInstance_ID,CostCenter:this.form.value.costCenter,CostCenter_Text:this.form.value.costCenter_Text}};0==t.EmployeeData.ID?this.create(t):this.update(t)}}create(t){this.showLoading("dialog"),this.employeeS4HanaService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg(o?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){this.showLoading("dialog"),this.employeeS4HanaService.update(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg(o?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}employeeS4HanaToEdit(t){this.form.patchValue(t)}afterDelete(t){t.id==this.formCtrls.id.value&&this.clearForm(),t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}changeCostCenterText(t){this.formCtrls.costCenter_Text.setValue(t[0]?.costCenter_Text??null)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(he.Q),e.Y36(g.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-s4-hana-dialog"]],features:[e.qOj],decls:18,vars:16,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","s4Hana",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-6","col-12"],[3,"control","submitted","filter","appendTo"],[3,"control","s4SystemInstanceControl","submitted","appendTo","change"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-s4-system-instance-dropdown",10),e.qZA(),e.TgZ(12,"div",9)(13,"app-cost-center-by-s4-system-instance-dropdown",11),e.NdJ("change",function(n){return o.changeCostCenterText(n)}),e.qZA()()()(),e.TgZ(14,"div",12)(15,"submit-btn",13),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(16,qn,1,0,"reset-form-btn",14),e.qZA(),e.TgZ(17,"emp-s4-hana-table",15),e.NdJ("rowToEdit",function(n){return o.employeeS4HanaToEdit(n)})("afterDelete",function(n){return o.afterDelete(n)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.systemInstance_ID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.costCenter)("s4SystemInstanceControl",o.formCtrls.systemInstance_ID)("submitted",o.submitted)("appendTo",i),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeInstanceId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,A.J,S.p,v.T,T.lW,g.uh,g.xY,b.Ro,Un.z,Fn.N,l._Y,l.JL,l.sg,ot]}),a})();function Vn(a,s){if(1&a&&(e.TgZ(0,"div",10),e._UZ(1,"card-row-item",11)(2,"card-row-item",12),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("value",null==t.empS4?null:t.empS4.costCenter),e.xp6(1),e.Q6J("value",null==t.empS4?null:t.empS4.costCenter_Text)}}function Bn(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"emp-s4-hana-table",13),e.NdJ("afterDelete",function(i){e.CHM(t);const n=e.oxw(2);return e.KtG(n.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function Rn(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,Vn,3,2,"div",7),e.YNc(6,Bn,1,2,"emp-s4-hana-table",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.empS4)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("employeeId",t.employeeInstanceId)("isTableView",t.isTableView)}}function Yn(a,s){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",14),2&a&&e.Q6J("rowNo",2)}let Gn=(()=>{class a extends u.U{constructor(t){super(),this.employeeS4HanaService=t,this.isLoaded=!1,this.isTableView=!1,this.employeeInstanceId=m.w.EmployeeInstanceId,m.w.employeeInstanceId$.subscribe(o=>{this.employeeInstanceId=o,this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()?(this.isLoaded=!1,this.getAllByEmployeeId()):this.isLoaded=!0})}ngOnInit(){}getAllByEmployeeId(){this.empS4=null,this.employeeS4HanaService.getAll(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.empS4=t.data[0],this.isLoaded=!0):this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(On).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAllByEmployeeId())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAllByEmployeeId())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(he.Q))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-s4-hana-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","s4Hana",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"employeeId","isTableView","toggleTable"],[1,"view-data-row-container"],["label","costCenter",1,"w-25",3,"value"],["label","costCenter_Text",1,"w-25",3,"value"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,Rn,9,6,"div",0),e.YNc(1,Yn,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.O5,x.E,D,E,Z,ot]}),a})();var at=r(11151),Hn=r(72251),Wn=r(18240),zn=r(32084);function jn(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let $n=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeErpIntegrationService=t,this.dialogRef=o,this.employeeId=0,this.hasUpdate=!1,this.submitted=!1,this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_ERP_integration_sec)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],addAsEmployeeSapId:[!1],employeeSapText:[null,[l.kI.required,J.w.whiteSpace]],addAsVendor:[!1],vendorText:[null,[l.kI.required,J.w.whiteSpace]],SAP_Vendor_Code:[null,[l.kI.required]],addAsCustomerSapCode:[!1],customerSapCodeText:[null,[l.kI.required,J.w.whiteSpace]],SAP_Customer_Code:[null,[l.kI.required]],addAsResourceSapCode:[!1],resource_Mesaure_Unit:[null,[l.kI.required,J.w.whiteSpace]],resource_Group_Id:[null,[l.kI.required]]}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}get formCtrls(){return this.form.controls}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&this.employeeId>0&&this.getAll()}getAll(){this.showLoading("dialog"),this.employeeErpIntegrationService.getAll(this.employeeId).subscribe(t=>{t?.message?.messageType==p.u.Success?(this.form.patchValue(t.data[0]),this.formCtrls.SAP_Vendor_Code.setValue(t.data[0].I_Core_Person_Instance_SAP_ERP_Master_Data.SAP_Vendor_Code),this.formCtrls.SAP_Customer_Code.setValue(t.data[0].I_Core_Person_Instance_SAP_ERP_Master_Data.SAP_Customer_Code)):this.errorList(t?.message?.messages),this.hideLoading("dialog")})}submit(){console.log(this.form.value),this.submitted=!0,this.form.valid&&this.create({perid:this.employeeId,SAP_Add_As_Resource:this.form.value.addAsResourceSapCode,SAP_Add_As_Employee:this.form.value.addAsEmployeeSapId,SAP_Add_As_Vendor:this.form.value.addAsVendor,SAP_Add_As_Customer:this.form.value.addAsCustomerSapCode,Resource_Group_Id:this.form.value.resource_Group_Id,Resource_Mesaure_Unit:this.form.value.resource_Mesaure_Unit,I_Core_Person_Instance_SAP_ERP_Master_Data:{SAP_Vendor_Code:this.form.value.SAP_Vendor_Code,SAP_Customer_Code:this.form.value.SAP_Customer_Code}})}create(t){this.showLoading("dialog"),this.employeeErpIntegrationService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.addSuccessfullyMsg(o?.message?.messageTypeName),this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}clearForm(){this.form.reset({id:0,addAsEmployeeSapId:!1,addAsVendor:!1,addAsCustomerSapCode:!1,addAsResourceSapCode:!1}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(at.v),e.Y36(g.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-erp-integration-dialog"]],features:[e.qOj],decls:39,vars:34,consts:[[3,"name"],["mat-dialog-title","",1,"systemInstance_ID-color","font-size-20","m-0"],["title","erpIntegration",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12","mbottom-20","mtop-14"],["label","addAsEmployeeSapId",3,"control"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","disabled"],[1,"d-md-inline-block","col-sm-none","col-md-4"],["label","addAsVendor",3,"control"],[3,"control","submitted","filter","appendTo","disable"],[1,"d-md-none","col-sm-6","col-12"],["label","addAsCustomerSapCode",3,"control"],["label","addAsResourceSapCode",3,"control"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-check-box",10),e.qZA(),e.TgZ(12,"div",11),e._UZ(13,"app-input",12),e.qZA(),e._UZ(14,"div",13),e.TgZ(15,"div",9),e._UZ(16,"app-check-box",14),e.qZA(),e.TgZ(17,"div",11),e._UZ(18,"app-input",12),e.qZA(),e.TgZ(19,"div",11),e._UZ(20,"app-erp-group-code-vendor-dropdown",15),e.qZA(),e._UZ(21,"div",16),e.TgZ(22,"div",9),e._UZ(23,"app-check-box",17),e.qZA(),e.TgZ(24,"div",11),e._UZ(25,"app-input",12),e.qZA(),e.TgZ(26,"div",11),e._UZ(27,"app-erp-group-code-customer-dropdown",15),e.qZA(),e._UZ(28,"div",16),e.TgZ(29,"div",9),e._UZ(30,"app-check-box",18),e.qZA(),e.TgZ(31,"div",11),e._UZ(32,"app-input",12),e.qZA(),e.TgZ(33,"div",11),e._UZ(34,"app-erp-resource-group-dropdown",15),e.qZA(),e._UZ(35,"div",16),e.qZA()(),e.TgZ(36,"div",19)(37,"submit-btn",20),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(38,jn,1,0,"reset-form-btn",21),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.addAsEmployeeSapId),e.xp6(2),e.Q6J("control",o.formCtrls.employeeSapText)("disabled",!o.formCtrls.addAsEmployeeSapId.value),e.xp6(3),e.Q6J("control",o.formCtrls.addAsVendor),e.xp6(2),e.Q6J("control",o.formCtrls.vendorText)("disabled",!o.formCtrls.addAsVendor.value),e.xp6(2),e.Q6J("control",o.formCtrls.SAP_Vendor_Code)("submitted",o.submitted)("filter",!0)("appendTo",i)("disable",!o.formCtrls.addAsVendor.value),e.xp6(3),e.Q6J("control",o.formCtrls.addAsCustomerSapCode),e.xp6(2),e.Q6J("control",o.formCtrls.customerSapCodeText)("disabled",!o.formCtrls.addAsCustomerSapCode.value),e.xp6(2),e.Q6J("control",o.formCtrls.SAP_Customer_Code)("submitted",o.submitted)("filter",!0)("appendTo",i)("disable",!o.formCtrls.addAsCustomerSapCode.value),e.xp6(3),e.Q6J("control",o.formCtrls.addAsResourceSapCode),e.xp6(2),e.Q6J("control",o.formCtrls.resource_Mesaure_Unit)("disabled",!o.formCtrls.addAsResourceSapCode.value),e.xp6(2),e.Q6J("control",o.formCtrls.resource_Group_Id)("submitted",o.submitted)("filter",!0)("appendTo",i)("disable",!o.formCtrls.addAsResourceSapCode.value),e.xp6(3),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",0==o.formCtrls.id.value)}},dependencies:[d.O5,M.a,q.u,A.J,S.p,v.T,T.lW,g.uh,g.xY,b.Ro,Hn.T,Wn.q,zn.I,l._Y,l.JL,l.sg]}),a})();function Kn(a,s){if(1&a&&(e.TgZ(0,"div",8),e._UZ(1,"card-row-item",9)(2,"card-row-item",10)(3,"card-row-item",11)(4,"card-row-item",12),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("value",null==t.erpIntegration?null:t.erpIntegration.SAP_Add_As_Employee)("isBool",!0),e.xp6(1),e.Q6J("value",null==t.erpIntegration?null:t.erpIntegration.SAP_Add_As_Vendor)("isBool",!0),e.xp6(1),e.Q6J("value",null==t.erpIntegration?null:t.erpIntegration.SAP_Add_As_Customer)("isBool",!0),e.xp6(1),e.Q6J("value",null==t.erpIntegration?null:t.erpIntegration.SAP_Add_As_Resource)("isBool",!0)}}function Xn(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,Kn,5,8,"div",7),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.erpIntegration)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView)}}function el(a,s){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",13),2&a&&e.Q6J("rowNo",4)}let tl=(()=>{class a extends u.U{constructor(t){super(),this.employeeErpIntegrationService=t,this.isLoaded=!0,this.isTableView=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){}onChangeBusinessAndCompanyId(){this.erpIntegration=null,this.employeeId>0&&this.checkNoBusinessOrCompany()?this.getAll():this.isLoaded=!0}getAll(){this.erpIntegration=null,this.employeeErpIntegrationService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.erpIntegration=t.data[0],this.isLoaded=!0):this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog($n).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAll())})}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(at.v))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-erp-integration-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","erpIntegration",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[1,"view-data-row-container"],["label","addAsEmployeeSapId",1,"w-25",3,"value","isBool"],["label","addAsVendor",1,"w-25",3,"value","isBool"],["label","addAsCustomerSapCode",1,"w-25",3,"value","isBool"],["label","addAsResourceSapCode",1,"w-25",3,"value","isBool"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,Xn,6,3,"div",0),e.YNc(1,el,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.O5,x.E,D,E]}),a})();function ol(a,s){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"app-emp-sap-b1-card"),e.qZA())}function al(a,s){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"app-emp-s4-hana-card"),e.qZA())}function il(a,s){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"app-emp-erp-integration-card"),e.qZA())}let sl=(()=>{class a extends u.U{constructor(){super(),this.viewsManager=h.S}ngOnInit(){}onModulesChanged(){this.allowedSections=this.getCustomViewChildren(this.getParentViewName,h.S.emp_sap_integration_tab)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-sap-integration-core"]],inputs:{icon:"icon"},features:[e.qOj],decls:10,vars:3,consts:[[1,"row"],[1,"col-12"],[1,"main-card-title","border-bottom"],["title","sapIntegration","color","font-dark",1,"emp-card-title"],[1,"container-fluid","p-0","px-4"],[1,"row","mx-md-n2"],["class","col-12 p-0 px-md-2",4,"ngIf"],[1,"col-12","p-0","px-md-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-title",2),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"mat-card-content",4)(6,"div",5),e.YNc(7,ol,2,0,"div",6),e.YNc(8,al,2,0,"div",6),e.YNc(9,il,2,0,"div",6),e.qZA()()()()()),2&t&&(e.xp6(7),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_SAPB1_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_S4Hana_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_ERP_integration_sec)))},dependencies:[d.O5,v.T,C.a8,C.dn,C.n5,Mn,Gn,tl]}),a})();function it(a){return a.map(s=>({...s,bank:(0,c._)(s.comm_Bank?.ar_Name,s.comm_Bank?.en_Name),startDate:c.M.mapDate(s.from_Date)}))}function st(a){let s=[{paymentId:0,payment:(0,c._)("\u0627\u0644\u0645\u062a\u063a\u064a\u0631\u0627\u062a \u0627\u0644\u0639\u0627\u0645\u0647","Global Variable"),variables:[]}];return a.lstPayments.map(t=>s.push({paymentId:t.id,payment:(0,c._)(t.ar_Name,t.en_Name),variables:[]})),a.lstFixedVAriableGlobal.map(t=>s[0].variables.push(...be(t))),a.perssonPeriodLsts.map(t=>{let o=fe(s,t.payment?.id);t.lstpersperiodcalculations.forEach(i=>s[o].variables.push(...be(i)))}),a.lstFixedVAriable.map(t=>{if(0!=t.paY_Variable?.pay_Payment_Variable?.length&&fe(s,t.paY_Variable?.pay_Payment_Variable[0].Payment_ID)>=0||0==t.paY_Variable?.pay_Payment_Variable?.length){let o=fe(s,t.paY_PeriodCalculation?.payment_ID);a.lstAuthorize.find(i=>i.variable_ID==t.variable_ID&&i.payment_ID==s[o].paymentId)&&s[o].variables.push(...be(t))}}),s}function fe(a,s){return a.findIndex(t=>t.paymentId==s)}function be(a){let s=[];return s.push({variable:(0,c._)(a.paY_Variable?.arName,a.paY_Variable?.name),value:a.variable_Value}),s}let nt=(()=>{class a extends L.K{constructor(){super()}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeePayment",{params:{person_id:t}})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var nl=r(17355),W=r(37084);function ll(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",5)(1,"h4"),e._UZ(2,"page-title",6),e.qZA(),e.TgZ(3,"button",7),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onCloseDialog())}),e._UZ(4,"i",8),e.qZA()()}}function rl(a,s){if(1&a&&(e.TgZ(0,"div")(1,"div",14)(2,"p",15),e._uU(3),e.qZA(),e.TgZ(4,"p",16),e._uU(5),e.qZA()()()),2&a){const t=s.$implicit;e.xp6(3),e.Oqu(t.variable),e.xp6(2),e.Oqu(t.value)}}function pl(a,s){if(1&a&&(e.ynx(0),e.TgZ(1,"mat-expansion-panel",13)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),e._uU(4),e.ALo(5,"titlecase"),e.qZA()(),e.YNc(6,rl,6,2,"div",12),e.qZA(),e.BQk()),2&a){const t=e.oxw(),o=t.$implicit,i=t.index,n=e.oxw(3);e.xp6(1),e.Q6J("hideToggle",0==o.variables)("expanded",i==n.firstExpandedIndex)("disabled",0==o.variables.length),e.xp6(3),e.hij(" ",e.lcZ(5,5,o.payment)," "),e.xp6(2),e.Q6J("ngForOf",o.variables)}}function dl(a,s){if(1&a&&(e.ynx(0),e.YNc(1,pl,7,7,"ng-container",3),e.BQk()),2&a){const t=s.$implicit;e.oxw(3);const o=e.MAs(6);e.xp6(1),e.Q6J("ngIf",(null==t.variables?null:t.variables.length)>0)("ngIfElse",o)}}function cl(a,s){if(1&a&&(e.TgZ(0,"mat-accordion",11),e.YNc(1,dl,2,2,"ng-container",12),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.paymentsAndVariables)}}function ml(a,s){1&a&&e._UZ(0,"app-emp-payment-skeleton")}function ul(a,s){if(1&a&&(e.ynx(0),e.YNc(1,cl,2,1,"mat-accordion",9),e.YNc(2,ml,1,0,"ng-template",null,10,e.W1O),e.BQk()),2&a){const t=e.MAs(3),o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.isLoaded)("ngIfElse",t)}}function _l(a,s){1&a&&(e._UZ(0,"span",19),e.TgZ(1,"div",20),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"noDataToDisplay")," "))}function gl(a,s){1&a&&(e.TgZ(0,"p-messages",17),e.YNc(1,_l,4,3,"ng-template",18),e.qZA())}let lt=(()=>{class a extends u.U{constructor(t,o){super(),this.employeePayrollService=t,this.dialogRef=o,this.employeeId=0,this.isLoaded=!1,this.isCardView=!1,this.submitted=!1,this.firstExpandedIndex=0,this.employeeId=m.w.EmployeeId}ngOnInit(){}get formCtrls(){return this.form.controls}onCloseDialog(){this.dialogRef.close(!1)}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&this.employeeId>0?this.getAll():this.isLoaded=!0}getAll(){this.employeePayrollService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.paymentsAndVariables=st(t.data),this.firstExpandedIndex=this.paymentsAndVariables.findIndex(o=>o.variables.length>0),this.isLoaded=!0):this.errorList(t?.message?.messages)})}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(nt),e.Y36(g.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-payroll-data-dialog"]],inputs:{isCardView:"isCardView"},features:[e.qOj],decls:7,vars:5,consts:[["mat-dialog-title","","class","primary-color font-size-20 m-0",4,"ngIf"],[1,"container-fluid","mx-0"],["dialogContainer",""],[4,"ngIf","ngIfElse"],["noDataToDisplay",""],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","payrollData",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],["class","emp-payroll","multi","",4,"ngIf","ngIfElse"],["notLoaded",""],["multi","",1,"emp-payroll"],[4,"ngFor","ngForOf"],[3,"hideToggle","expanded","disabled"],[1,"row"],[1,"col-8"],[1,"col-4"],["severity","warn"],["pTemplate",""],[1,"p-message-icon","pi","pi-exclamation-triangle"],[1,"p-message-detail"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner"),e.YNc(1,ll,5,0,"div",0),e.TgZ(2,"mat-dialog-content",1,2),e.YNc(4,ul,4,2,"ng-container",3),e.YNc(5,gl,2,0,"ng-template",null,4,e.W1O),e.qZA()),2&t){const i=e.MAs(6);e.xp6(1),e.Q6J("ngIf",!o.isCardView),e.xp6(1),e.ekj("dialog-view",!o.isCardView),e.xp6(2),e.Q6J("ngIf",o.employeeId>0)("ngIfElse",i)}},dependencies:[d.sg,d.O5,v.T,nl.m,T.lW,g.uh,g.xY,W.pp,W.ib,W.yz,W.yK,b.Ro,H.jx,le.V,d.rS,P.X$],styles:["@media only screen and (min-width: 680px){.dialog-view[_ngcontent-%COMP%]   .mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]{min-width:650px!important}}"]}),a})();function hl(a,s){if(1&a&&(e.TgZ(0,"div",20)(1,"p",21),e._uU(2),e.qZA(),e.TgZ(3,"p",22),e._uU(4),e.qZA()()),2&a){const t=s.$implicit;e.xp6(2),e.hij(" ",null==t?null:t.variable," "),e.xp6(2),e.Oqu(null==t?null:t.value)}}function fl(a,s){if(1&a&&(e.TgZ(0,"div",18),e.YNc(1,hl,5,2,"div",19),e.qZA()),2&a){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngForOf",null==t?null:t.variables)}}function bl(a,s){1&a&&(e.TgZ(0,"div",23),e._uU(1),e.qZA()),2&a&&(e.xp6(1),e.hij(" ","---"," "))}function Cl(a,s){if(1&a&&(e.TgZ(0,"div",14)(1,"p",15),e._uU(2),e.ALo(3,"titlecase"),e.qZA(),e.YNc(4,fl,2,1,"div",16),e.YNc(5,bl,2,1,"ng-template",null,17,e.W1O),e.qZA()),2&a){const t=e.MAs(6),o=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,3,null==o?null:o.payment)),e.xp6(2),e.Q6J("ngIf",(null==o||null==o.variables?null:o.variables.length)>0)("ngIfElse",t)}}function yl(a,s){if(1&a&&(e.ynx(0),e.YNc(1,Cl,7,5,"div",13),e.BQk()),2&a){const t=s.index,o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t<=o.firstExpandedIndex)}}function Il(a,s){1&a&&e._UZ(0,"card-row-item",24)}function vl(a,s){if(1&a&&(e.TgZ(0,"div",10),e.YNc(1,yl,2,1,"ng-container",11),e.YNc(2,Il,1,0,"card-row-item",12),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.paymentsAndVariables),e.xp6(1),e.Q6J("ngIf",0==t.employeeId)}}function Tl(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,vl,3,2,"div",7),e._UZ(6,"app-emp-payroll-data-dialog",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",(null==t.paymentsAndVariables?null:t.paymentsAndVariables.length)>1||(null==t.paymentsAndVariables[0]||null==t.paymentsAndVariables[0].variables?null:t.paymentsAndVariables[0].variables.length)>0)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.ekj("hidden",!t.isTableView),e.Q6J("isCardView",!0),e.xp6(2),e.Q6J("employeeId",t.employeeId)("isTableView",t.isTableView)}}function wl(a,s){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",25),2&a&&e.Q6J("rowNo",4)}let Dl=(()=>{class a extends u.U{constructor(t){super(),this.employeePayrollService=t,this.firstExpandedIndex=0,this.isLoaded=!1,this.isTableView=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){}onChangeBusinessAndCompanyId(){this.paymentsAndVariables=[],this.employeeId>0&&this.checkNoBusinessOrCompany()?this.getAllByEmployeeId():this.isLoaded=!0}getAllByEmployeeId(){this.paymentsAndVariables=[],this.employeePayrollService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.paymentsAndVariables=st(t.data),this.firstExpandedIndex=this.paymentsAndVariables.findIndex(o=>o.variables.length>0),-1==this.firstExpandedIndex&&(this.firstExpandedIndex=0),this.isLoaded=!0):this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(lt,{},{disableClose:!1,minWidth:"50vw",maxWidth:"80vw",top:"40px"}).afterClosed().subscribe(t=>{})}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(nt))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-payroll-data-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","payrollData",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[3,"isCardView"],[3,"employeeId","isTableView","toggleTable"],[1,"view-data-row-container"],[4,"ngFor","ngForOf"],["class","w-25","label","globalVariable",4,"ngIf"],["class","col","style","min-width: fit-content",4,"ngIf"],[1,"col",2,"min-width","fit-content"],[1,"view-data-title"],["class","view-data-value",4,"ngIf","ngIfElse"],["noVariables",""],[1,"view-data-value"],["class","d-flex justify-content-between flex-wrap",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col","p-0","mr-1","flex-lg-grow-1"],[1,"col","p-0","flex-grow-0"],[1,"d-inline-block"],["label","globalVariable",1,"w-25"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,Tl,9,8,"div",0),e.YNc(1,wl,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.sg,d.O5,x.E,D,E,lt,Z,d.rS]}),a})(),Ce=(()=>{class a extends L.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeBank",t)}update(t){return this.post("Personnel/Employees/Edit_EmployeeBank",t)}getList(t,o){return this.get("Personnel/Employees/GetList_EmployeeBank",{params:{...o,$filter:`Person_Instance_ID  eq ${t}`,$expand:y.db.comm_Bank}})}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeBank",{params:{$filter:`Person_Instance_ID  eq ${t}`,$expand:y.db.comm_Bank}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeBank",{params:t})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var El=r(52013);function Sl(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.toEdit(i))})("deleteRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let rt=(()=>{class a extends u.U{constructor(t){super(),this.empBankingService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["bank","accountNo","startDate","actions"],this.optionalColomns=[],this.isLoaded=!1,this.employeeInstanceId=0,this.employeeInstanceId=m.w.EmployeeInstanceId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_banking_account_data_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeInstanceId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new _.by(null)),this.checkNoBusinessOrCompany()&&this.employeeInstanceId>0&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new _.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.empBankingService.getList(this.employeeInstanceId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==p.u.Success?(this.dataSource=new _.by(it(n.data)),this.page.length=n.meta.totalItemCount,this.isLoaded=!0):this.errorList(n?.message?.messages)})}toEdit(t){this.rowToEdit.emit(t)}onDelete(t){this.deleteDialog(t.bank).subscribe(i=>{i&&this.delete(t)})}delete(t){let o={Person_Instance_ID:this.employeeInstanceId,Bank_ID:t.bank_ID,AccountNum:t.accountNo};this.showLoading("table"),this.empBankingService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg(i?.message?.messageTypeName),this.afterDelete.emit(t),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize)):this.errorList(i?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Ce))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-banking-account-data-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,Sl,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeInstanceId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,b.Ro]}),a})();function xl(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",17),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let Al=(()=>{class a extends u.U{constructor(t,o){super(),this.empBankingService=t,this.dialogRef=o,this.employeeInstanceId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.employeeInstanceId=m.w.EmployeeInstanceId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_banking_account_data_sec)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],bank_ID:[null,[l.kI.required]],accountNo:[null,[l.kI.required,Q.dN.number]],startDate:[null,[l.kI.required,Q.dN.date]],cardNumber:[null],isDebit:[!1],branchId:[null]}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}get formCtrls(){return this.form.controls}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={employeeData:{person_Instance_ID:this.employeeInstanceId,bank_ID:this.form.value.bank_ID,accountNo:this.form.value.accountNo,from_Date:c.M.mapDateReverse(this.form.value.startDate),cardNumber:this.form.value.cardNumber,isDebit:this.form.value.isDebit??!1,branchId:this.form.value.branchId}};0==this.formCtrls.id.value?this.create(t):this.update(t)}}create(t){this.showLoading("dialog"),this.empBankingService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg(o?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){let o={...t,OldEmployeeData:{person_Instance_ID:this.employeeInstanceId,bank_ID:this.selectedAccountBank.bank_ID,accountNo:this.selectedAccountBank.accountNo}};this.showLoading("dialog"),this.empBankingService.update(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg(i?.message?.messageTypeName),this.getList=!0,this.hasUpdate=!0,this.selectedAccountBank=null):this.errorList(i?.message?.messages),this.hideLoading("dialog")})}employeeBankingAccountToEdit(t){this.form.patchValue(t),this.formCtrls.startDate.setValue(t.from_Date),this.formCtrls.id.setValue(t.bank_ID),this.selectedAccountBank=t}afterDelete(t){t.comm_Bank?.id==this.selectedAccountBank?.bank_ID&&t.accountNo==this.selectedAccountBank?.accountNo&&this.formCtrls.id.value>0&&this.clearForm(),t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Ce),e.Y36(g.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-banking-account-data-dialog"]],features:[e.qOj],decls:20,vars:16,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","bankingAccountData",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","submitted","filter","appendTo"],["label","accountNo",3,"control","submitted"],["label","startDate",3,"control","submitted"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-bank-dropdown",10),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"app-datepicker",12),e.qZA()()(),e.TgZ(16,"div",13)(17,"submit-btn",14),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(18,xl,1,0,"reset-form-btn",15),e.qZA(),e.TgZ(19,"emp-banking-account-data-table",16),e.NdJ("rowToEdit",function(n){return o.employeeBankingAccountToEdit(n)})("afterDelete",function(n){return o.afterDelete(n)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.bank_ID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.accountNo)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.startDate)("submitted",o.submitted),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeInstanceId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,N.Q,M.a,A.J,S.p,v.T,T.lW,g.uh,g.xY,b.Ro,El.t,l._Y,l.JL,l.sg,rt]}),a})();function Zl(a,s){if(1&a&&(e.TgZ(0,"div",10),e._UZ(1,"card-row-item",11)(2,"card-row-item",12)(3,"card-row-item",13),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("value",null==t.employeeBankingAccountInfo?null:t.employeeBankingAccountInfo.bank),e.xp6(1),e.Q6J("value",null==t.employeeBankingAccountInfo?null:t.employeeBankingAccountInfo.accountNo),e.xp6(1),e.Q6J("value",null==t.employeeBankingAccountInfo?null:t.employeeBankingAccountInfo.startDate)}}function Ll(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"emp-banking-account-data-table",14),e.NdJ("afterDelete",function(i){e.CHM(t);const n=e.oxw(2);return e.KtG(n.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function Pl(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,Zl,4,3,"div",7),e.YNc(6,Ll,1,2,"emp-banking-account-data-table",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.employeeBankingAccountInfo)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("employeeId",t.employeeInstanceId)("isTableView",t.isTableView)}}function Jl(a,s){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",15),2&a&&e.Q6J("rowNo",3)}let kl=(()=>{class a extends u.U{constructor(t){super(),this.employeeBankingAccountService=t,this.isLoaded=!1,this.isTableView=!1,this.employeeInstanceId=m.w.EmployeeInstanceId,m.w.employeeInstanceId$.subscribe(o=>{this.employeeInstanceId=o,this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()?(this.isLoaded=!1,this.getAll()):this.isLoaded=!0})}ngOnInit(){}getAll(){this.employeeBankingAccountInfo=null,this.employeeBankingAccountService.getAll(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(t.data.sort((o,i)=>new Date(i.from_Date).getTime()-new Date(o.from_Date).getTime()),this.employeeBankingAccountInfo=it(t.data.slice(0,1))[0],this.isLoaded=!0):this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(Al).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAll())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAll())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Ce))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-banking-account-data-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","bankingAccountData",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"employeeId","isTableView","toggleTable"],[1,"view-data-row-container"],["label","bank",1,"col-3","px-0",3,"value"],["label","accountNo",1,"col-3","px-0",3,"value"],["label","startDate","valueClass","col-6 text-muted",1,"col-3","px-0",3,"value"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,Pl,9,6,"div",0),e.YNc(1,Jl,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.O5,x.E,D,E,Z,rt]}),a})();function Nl(a,s){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"app-emp-payroll-data-card"),e.qZA())}function Ml(a,s){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"app-emp-banking-account-data-card"),e.qZA())}let Ul=(()=>{class a extends u.U{constructor(){super(),this.viewsManager=h.S}ngOnInit(){}onModulesChanged(){this.allowedSections=this.getCustomViewChildren(this.getParentViewName,h.S.emp_payments_info_tab)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-payments-info-core"]],inputs:{icon:"icon"},features:[e.qOj],decls:9,vars:2,consts:[[1,"row"],[1,"col-12"],[1,"main-card-title","border-bottom"],["title","paymentsInfo","color","font-dark",1,"emp-card-title"],[1,"container-fluid","p-0","px-4"],[1,"row","mx-md-n2"],["class","col-12 p-0 px-md-2",4,"ngIf"],[1,"col-12","p-0","px-md-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-title",2),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"mat-card-content",4)(6,"div",5),e.YNc(7,Nl,2,0,"div",6),e.YNc(8,Ml,2,0,"div",6),e.qZA()()()()()),2&t&&(e.xp6(7),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_payroll_data_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_banking_account_data_sec)))},dependencies:[d.O5,v.T,C.a8,C.dn,C.n5,Dl,kl]}),a})();const Fl=["tabGroup"];function Ql(a,s){if(1&a&&e._UZ(0,"p-image",22),2&a){const t=e.oxw(2);e.Q6J("src",(null==t.employee.img?null:t.employee.img.length)>1?t.fileService.preview(null==t.employee?null:t.employee.img):t.assets.user_avatar_rounded)("preview",!0)("height",t.deviceService.isMobile()?"40":"80")("width",t.deviceService.isMobile()?"40":"80")}}function ql(a,s){if(1&a&&(e.TgZ(0,"span",23),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.StatusPosition?null:t.StatusPosition.job_name," ")}}function Ol(a,s){1&a&&e._UZ(0,"p-skeleton",24)}function Vl(a,s){if(1&a&&(e.TgZ(0,"div",15),e.YNc(1,Ql,1,4,"p-image",16),e.TgZ(2,"div",17)(3,"h4",18)(4,"span",19),e._uU(5),e.qZA()(),e.YNc(6,ql,2,1,"span",20),e.TgZ(7,"span"),e.YNc(8,Ol,1,0,"p-skeleton",21),e.qZA()()()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.employee),e.xp6(4),e.hij(" ",t.msgTranslate(null==t.employee||null==t.employee.person?null:t.employee.person.ar_Name,null==t.employee||null==t.employee.person?null:t.employee.person.en_Name)," "),e.xp6(1),e.Q6J("ngIf",t.isEmpDataLoaded),e.xp6(2),e.Q6J("ngIf",!t.isEmpDataLoaded&&t.employee)}}function Bl(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"app-add-new-btn",25),e.NdJ("onClick",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onAddNew())}),e.qZA()}if(2&a){const t=e.oxw();e.MGl("url","/personnel-setup/",t.moduleId,"/employees/add"),e.Q6J("params",t.parentParam)}}function Rl(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"a",28),e.NdJ("click",function(i){e.CHM(t);const n=e.oxw(),I=n.index,k=n.$implicit,ct=e.oxw(2);return ct.activeTab=I,e.KtG(ct.scrollToSection(i,k.viewName))}),e.TgZ(1,"span",29),e._UZ(2,"page-title",30),e.qZA()()}if(2&a){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("title",t.name)}}function Yl(a,s){1&a&&(e.ynx(0),e.TgZ(1,"mat-tab"),e.YNc(2,Rl,3,1,"ng-template",27),e.qZA(),e.BQk())}function Gl(a,s){if(1&a&&(e.ynx(0),e.YNc(1,Yl,3,0,"ng-container",26),e.BQk()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.customViews)}}function Hl(a,s){1&a&&e._UZ(0,"p-skeleton",31)}function Wl(a,s){1&a&&(e.TgZ(0,"mat-tab"),e.YNc(1,Hl,1,0,"ng-template",27),e.qZA())}const zl=function(){return[1,2,3,4,5,6,7]};function jl(a,s){1&a&&e.YNc(0,Wl,2,0,"mat-tab",26),2&a&&e.Q6J("ngForOf",e.DdM(1,zl))}function $l(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",33)(1,"emp-general-info-core",34),e.NdJ("changeEmployeeId",function(i){e.CHM(t);const n=e.oxw(3);return e.KtG(n.changeEmployeeId(i))}),e.qZA()()}if(2&a){const t=e.oxw().$implicit;e.Q6J("id",t.viewName),e.xp6(1),e.Q6J("icon",t.icon)}}function Kl(a,s){if(1&a&&(e.TgZ(0,"div",33),e._UZ(1,"emp-personal-info-core",35),e.qZA()),2&a){const t=e.oxw().$implicit;e.Q6J("id",t.viewName),e.xp6(1),e.Q6J("icon",t.icon)}}function Xl(a,s){if(1&a&&(e.TgZ(0,"div",33),e._UZ(1,"emp-career-core",35),e.qZA()),2&a){const t=e.oxw().$implicit;e.Q6J("id",t.viewName),e.xp6(1),e.Q6J("icon",t.icon)}}function er(a,s){if(1&a&&(e.TgZ(0,"div",33),e._UZ(1,"employement-information-core",35),e.qZA()),2&a){const t=e.oxw().$implicit;e.Q6J("id",t.viewName),e.xp6(1),e.Q6J("icon",t.icon)}}function tr(a,s){if(1&a&&(e.TgZ(0,"div",33),e._UZ(1,"employee-balances-core",35),e.qZA()),2&a){const t=e.oxw().$implicit;e.Q6J("id",t.viewName),e.xp6(1),e.Q6J("icon",t.icon)}}function or(a,s){if(1&a&&(e.TgZ(0,"div",33),e._UZ(1,"emp-sap-integration-core",35),e.qZA()),2&a){const t=e.oxw().$implicit;e.Q6J("id",t.viewName),e.xp6(1),e.Q6J("icon",t.icon)}}function ar(a,s){if(1&a&&(e.TgZ(0,"div",33),e._UZ(1,"emp-payments-info-core",35),e.qZA()),2&a){const t=e.oxw().$implicit;e.Q6J("id",t.viewName),e.xp6(1),e.Q6J("icon",t.icon)}}function ir(a,s){if(1&a&&(e.ynx(0),e.YNc(1,$l,2,2,"div",32),e.YNc(2,Kl,2,2,"div",32),e.YNc(3,Xl,2,2,"div",32),e.YNc(4,er,2,2,"div",32),e.YNc(5,tr,2,2,"div",32),e.YNc(6,or,2,2,"div",32),e.YNc(7,ar,2,2,"div",32),e.BQk()),2&a){const t=s.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.viewName==o.viewsManager.emp_general_info_tab),e.xp6(1),e.Q6J("ngIf",t.viewName==o.viewsManager.emp_personal_info_tab),e.xp6(1),e.Q6J("ngIf",t.viewName==o.viewsManager.emp_career_tab),e.xp6(1),e.Q6J("ngIf",t.viewName==o.viewsManager.employment_info_tab),e.xp6(1),e.Q6J("ngIf",t.viewName==o.viewsManager.emp_balances_tab),e.xp6(1),e.Q6J("ngIf",t.viewName==o.viewsManager.emp_sap_integration_tab),e.xp6(1),e.Q6J("ngIf",t.viewName==o.viewsManager.emp_payments_info_tab)}}function sr(a,s){if(1&a&&(e.ynx(0),e.YNc(1,ir,8,7,"ng-container",26),e.BQk()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.customViews)}}function nr(a,s){1&a&&e._UZ(0,"mat-divider")}function lr(a,s){if(1&a&&(e.TgZ(0,"div",41),e._UZ(1,"app-employee-profile-card-skeleton",42),e.YNc(2,nr,1,0,"mat-divider",43),e.qZA()),2&a){const t=s.last;e.xp6(1),e.Q6J("rowNo",5),e.xp6(1),e.Q6J("ngIf",!t)}}const pt=function(){return[1,2]};function rr(a,s){1&a&&(e.TgZ(0,"div",37)(1,"mat-card")(2,"mat-card-title",38),e._UZ(3,"p-skeleton",39),e.qZA(),e.TgZ(4,"mat-card-content")(5,"div",2),e.YNc(6,lr,3,2,"div",40),e.qZA()()()()),2&a&&(e.xp6(6),e.Q6J("ngForOf",e.DdM(1,pt)))}function pr(a,s){1&a&&(e.TgZ(0,"div",2),e.YNc(1,rr,7,2,"div",36),e.qZA()),2&a&&(e.xp6(1),e.Q6J("ngForOf",e.DdM(1,pt)))}const dr=function(a){return{"--custom-width":a}};let dt=(()=>{class a extends u.U{constructor(t,o,i,n){super(),this.data=t,this.dialogRef=o,this.empGeneralInfoService=i,this.deviceService=n,this.employeeId=0,this.activeTab=0,this.viewsManager=h.S,this.isEmpDataLoaded=!1,this.customBorderWidth="100%",this.isOnScrollToSection=!1,this.firstScroll=!0,this.activatedRoute.params.subscribe(I=>{this.employeeId=Number(I.employeeId??0),m.w.employeeInstanceId$.next(null),m.w.employeeId$.next(this.employeeId),this.onChangeBusinessAndCompanyId()})}ngOnInit(){this.empGeneralInfoService.employee$.subscribe(t=>{this.employee=t}),m.w.employeeStatusPosition$.subscribe(t=>{this.StatusPosition=t,t&&(this.isEmpDataLoaded=!0)}),setTimeout(()=>{this.firstScroll=!1},2e3)}onChangeBusinessAndCompanyId(){this.empGeneralInfoService.employee$.next(null),this.checkNoBusinessOrCompany()&&this.employeeId>0&&this.empGeneralInfoService.getEmployeeShared(this.employeeId)}onModulesChanged(){setTimeout(()=>{this.updateMatTabsPosition()},0)}scrollToSection(t,o){this.isOnScrollToSection=!0,t.preventDefault();const i=document.getElementById(o);i&&i.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{this.isOnScrollToSection=!1},1e3)}updateMatTabsPosition(){let t=this.tabGroup._elementRef.nativeElement.getBoundingClientRect();this.customBorderWidth=ve.K.getLocalLang==Te.l.en&&(t.left>100||this.tabGroup._elementRef.nativeElement.offsetTop+120)?window.innerWidth-t.left+"px":ve.K.getLocalLang==Te.l.ar&&(window.innerWidth-t.left-t.width>100||this.tabGroup._elementRef.nativeElement.offsetTop+120)?window.innerWidth-(window.innerWidth-t.left-t.width)+"px":"100%"}onAddNew(){this.ngOnDestroy()}changeEmployeeId(t){this.employeeId=t}onScroll(t){this.firstScroll&&(window.scrollTo(0,0),this.activeTab=0,setTimeout(()=>{this.firstScroll=!1},2e3));let o=window.pageYOffset;const i=document.getElementById("top-tools");o>=this.tabGroup._elementRef.nativeElement.offsetTop+120?(this.tabGroup._elementRef.nativeElement.classList.add("nav-fixed"),i.classList.add("mt-2")):(this.tabGroup._elementRef.nativeElement.classList.remove("nav-fixed"),i.classList.remove("mt-2")),this.updateMatTabsPosition(),this.isOnScrollToSection||this.customViews?.forEach((n,I)=>{const k=document.getElementById(n.viewName);o>=k.offsetTop&&(this.activeTab=I)})}onResize(){this.updateMatTabsPosition()}ngOnDestroy(){this.empGeneralInfoService.cancelRequest$.next(),this.empGeneralInfoService.cancelRequest$.complete(),m.w.employeeInstanceId$.next(null),m.w.employeeId$.next(null),this.empGeneralInfoService.employee$.next(null)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(g.WI),e.Y36(g.so),e.Y36(m.w),e.Y36(ut.x0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-add-employee"]],viewQuery:function(t,o){if(1&t&&e.Gf(Fl,5),2&t){let i;e.iGM(i=e.CRH())&&(o.tabGroup=i.first)}},hostBindings:function(t,o){1&t&&e.NdJ("scroll",function(n){return o.onScroll(n)},!1,e.Jf7)("resize",function(n){return o.onResize(n)},!1,e.Jf7)},features:[e.qOj],decls:19,vars:16,consts:[[1,"add-employee-container"],[1,"rounded-0"],[1,"row"],[1,"col-12","col-sm-7"],["class","media user-box d-flex align-items-center",4,"ngIf"],[1,"col-12","col-sm-5","d-flex","justify-content-end","align-items-center"],[3,"url","params","onClick",4,"ngIf"],[3,"url","params"],[1,"col-12"],["animationDuration","0ms",1,"w-100","view-tabs-group","emp-group",3,"dir","selectedIndex"],["tabGroup",""],[4,"ngIf","ngIfElse"],["tabsLoading",""],["id","top-tools",1,"pb-4","pl-4","pr-4","pt-2"],["loading",""],[1,"media","user-box","d-flex","align-items-center"],["imageClass","users-avatar-shadow avatar","alt","User Profile Image",3,"src","preview","height","width",4,"ngIf"],[1,"media-body","ml-3"],[1,"mb-1"],[1,"users-view-name"],["class","text-muted user-job",4,"ngIf"],["width","8rem","height",".5rem",4,"ngIf"],["imageClass","users-avatar-shadow avatar","alt","User Profile Image",3,"src","preview","height","width"],[1,"text-muted","user-job"],["width","8rem","height",".5rem"],[3,"url","params","onClick"],[4,"ngFor","ngForOf"],["mat-tab-label",""],[1,"tab-link",3,"click"],[1,"d-sm-inline-block"],[1,"font-size-15",3,"title"],["width","8rem","height","2rem"],["class","mbottom-10",3,"id",4,"ngIf"],[1,"mbottom-10",3,"id"],[3,"icon","changeEmployeeId"],[3,"icon"],["class","col-12 mb-3",4,"ngFor","ngForOf"],[1,"col-12","mb-3"],[1,"border-bottom","pb-2"],["width","7rem","styleClass","p-mb-2","borderRadius","10px"],["class","col-12 mb-2",4,"ngFor","ngForOf"],[1,"col-12","mb-2"],[3,"rowNo"],[4,"ngIf"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"mat-card",1)(2,"mat-card-content")(3,"div",2)(4,"div",3),e.YNc(5,Vl,9,4,"div",4),e.qZA(),e.TgZ(6,"div",5),e.YNc(7,Bl,1,2,"app-add-new-btn",6),e._UZ(8,"app-back-btn",7),e.qZA(),e.TgZ(9,"div",8)(10,"mat-tab-group",9,10),e.YNc(12,Gl,2,1,"ng-container",11),e.YNc(13,jl,1,2,"ng-template",null,12,e.W1O),e.qZA()()()()(),e.TgZ(15,"div",13),e.YNc(16,sr,2,1,"ng-container",11),e.YNc(17,pr,2,2,"ng-template",null,14,e.W1O),e.qZA()()),2&t){const i=e.MAs(14),n=e.MAs(18);e.xp6(5),e.Q6J("ngIf",o.employee),e.xp6(2),e.Q6J("ngIf",o.employeeId>0),e.xp6(1),e.MGl("url","/personnel-setup/",o.moduleId,"/employees/index"),e.Q6J("params",o.pageParams),e.xp6(1),e.Akn(e.VKq(14,dr,o.customBorderWidth)),e.xp6(1),e.ekj("no-active-tab",!o.customViews),e.Q6J("dir",o.languageService.isArabic?"rtl":"ltr")("selectedIndex",o.activeTab),e.xp6(2),e.Q6J("ngIf",o.customViews)("ngIfElse",i),e.xp6(4),e.Q6J("ngIf",o.customViews)("ngIfElse",n)}},dependencies:[d.sg,d.O5,we.a,_t.J,v.T,x.E,gt.Lv,z.SP,z.uD,z.uX,C.a8,C.dn,C.n5,V.d,ht.E,Y.O,oa,Da,Na,nn,Dn,sl,Ul],styles:[".add-employee-container[_ngcontent-%COMP%]{margin:0 -30px}.divider[_ngcontent-%COMP%]{margin:40px 0}.page-user-profile[_ngcontent-%COMP%]{border-bottom:1px solid #ddd}mat-nav-list[_ngcontent-%COMP%]{padding:0}mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{display:inline-block;height:auto;width:auto;color:#2f8be6}.user-timeline-image[_ngcontent-%COMP%]{filter:brightness(.6);width:100%;height:100%}.title-overlay[_ngcontent-%COMP%]{background-color:inherit;display:flex;flex-wrap:nowrap;align-items:center;justify-content:center;height:100%;position:absolute;z-index:1;inset:0;color:#fff;font-size:50px;font-weight:500}.plicy-list[_ngcontent-%COMP%]{z-index:1;top:11px;left:11px}.rounded-0[_ngcontent-%COMP%]{border-radius:0!important}  .emp-group .mat-tab-label{padding:0;min-width:-moz-fit-content!important;min-width:fit-content!important}  .emp-group .mat-tab-label a{padding:.5rem 1rem}  .emp-group .mat-tab-header{width:var(--custom-width)!important;min-width:0;margin:auto}  .emp-group .mat-tab-body-wrapper{display:none}  .no-active-tab .mat-tab-label{margin:.25rem .75rem}  .nav-fixed .mat-tab-header{position:fixed;top:0;z-index:1200;width:100%;background:#f7f7f8}@media (max-width: 580px){  .mat-tab-header{width:calc(var(--custom-width) - 20px)!important;left:0}}"]}),a})();var cr=r(52614),mr=r(61894),ur=r(20408),_r=r(94891),gr=r(49189),hr=r(60544),fr=r(91373),br=r(9764);function Cr(a,s){if(1&a&&(e.TgZ(0,"form",9)(1,"div",0)(2,"div",10),e._UZ(3,"app-employee-dropdown",11),e.qZA(),e.TgZ(4,"div",10),e._UZ(5,"app-input",12),e.qZA(),e.TgZ(6,"div",10),e._UZ(7,"app-input",12),e.qZA()()(),e.TgZ(8,"button",13),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"button",14),e._uU(12),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"div",15)),2&a){const t=e.oxw();e.Q6J("formGroup",t.simpleSearchForm),e.xp6(3),e.Q6J("control",t.simpleSearchFormCtrls.employeeId)("filter",!0),e.xp6(2),e.Q6J("control",t.simpleSearchFormCtrls.orgTypeId),e.xp6(2),e.Q6J("control",t.simpleSearchFormCtrls.orgId),e.xp6(2),e.hij(" ",e.lcZ(10,7,"clear")," "),e.xp6(3),e.hij(" ",e.lcZ(13,9,"General.search")," ")}}function yr(a,s){1&a&&(e.TgZ(0,"p"),e._uU(1,"advanced"),e.qZA())}let Ir=(()=>{class a extends u.U{constructor(t,o,i){super(),this.employeesService=t,this.dashboardService=o,this.fileService=i,this.mandatoryColomns=["Ser","code","en_Name","ar_Name","actions"],this.optionalColomns=["jobTitleName","organization","email","status","statusProperty","address","contact","isActive"],this.isLoaded=!1,this.isSimpleExpanded=!0,this.isAdvancedExpanded=!0,this.mergingTableColumn={isMerge:!0,columnImgName:"img",columnTextName:"en_Name"}}ngOnInit(){this.simpleSearchForm=this.fb.group({employeeId:[null],orgTypeId:[null],orgId:[null]}),this.advancedSearchForm=this.fb.group({name:[null],operator:[null],value:[null]}),this.getAllDashboardService()}get simpleSearchFormCtrls(){return this.simpleSearchForm.controls}get advancedSearchFormCtrls(){return this.advancedSearchForm.controls}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new _.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,o){this.isLoaded=!1,this.removePageParams(),this.page.pageIndex=t,o&&(this.page.pageSize=o),this.employeesService.getListCard({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(n=>{if(1==n.message.messageType){if(0==n.data.length&&t>1)return void this.getList(this.prevPage);this.dataSource=new _.by((0,cr.A)(n.data)),this.isLoaded=!0,this.page.length=n.meta.totalItemCount}else this.errorList(n?.message?.messages)})}onDelete(t){let o=this.msgTranslate(t.ar_Name,t.en_Name);this.deleteDialog(o).subscribe(i=>{i&&this.delete(t)})}delete(t){this.showLoading(),this.employeesService.Delete(t.id).subscribe(o=>{1==o.message.messageType?(this.deleteSuccessfullyMsg(o?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(o?.message?.messages),this.hideLoading()})}getAllDashboardService(){this.showLoading();let t={...this.businessCompanyParams,$filter:"Service_ID eq 8"};this.dashboardService.getAll(t).pipe(this.cancelRequest()).subscribe(o=>{o.message.messageType==p.u.Success?this.dashboardList=(0,mr.K)(o.data):this.errorList(o.message?.messages),this.hideLoading()})}onAction(t){"simpleSearch"==t?.name&&this.toggleSimpleSearchPanel(),"advancedSearch"==t?.name&&this.toggleAdvancedSearchPanel()}toggleSimpleSearchPanel(){this.isAdvancedExpanded=!0,this.isSimpleExpanded=!this.isSimpleExpanded}toggleAdvancedSearchPanel(){this.isSimpleExpanded=!0,this.isAdvancedExpanded=!this.isAdvancedExpanded}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ur.M),e.Y36(_r.s),e.Y36(gr.I))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employees-index"]],features:[e.qOj],decls:14,vars:20,consts:[[1,"row"],[1,"col-12"],[1,"index-card"],["title","employees",3,"globalFunctions","action"],[3,"toggleable","showHeader","collapsed"],["pTemplate","content"],[3,"isRowClickable","isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","exportService","mergeImgWithName","onChangePage","deleteRow"],[3,"title"],[3,"serviceId"],[3,"formGroup"],[1,"col-md-4","col-12"],[3,"control","filter"],["label","org",3,"control"],["mat-raised-button","",1,"btn","bg-light-secondary","float-right","btn-sm"],["mat-raised-button","",1,"btn","btn-info","bg-light-info","float-right","mx-2","btn-sm"],[1,"clearfix"]],template:function(t,o){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card",2)(4,"mat-card-title")(5,"page-title",3),e.NdJ("action",function(n){return o.onAction(n)}),e.qZA()(),e.TgZ(6,"p-panel",4),e.YNc(7,Cr,15,11,"ng-template",5),e.qZA(),e.TgZ(8,"p-panel",4),e.YNc(9,yr,2,0,"ng-template",5),e.qZA(),e.TgZ(10,"app-material-table",6),e.NdJ("onChangePage",function(n){return o.getList(n.pageIndex+1,n.pageSize)})("deleteRow",function(n){return o.onDelete(n)}),e.qZA()()()(),e.TgZ(11,"side-helping-menu",7),e.ALo(12,"translate"),e._UZ(13,"app-dashboard-display",8),e.qZA()),2&t&&(e.xp6(5),e.Q6J("globalFunctions",o.globalFunctions),e.xp6(1),e.Q6J("toggleable",!0)("showHeader",!1)("collapsed",o.isSimpleExpanded),e.xp6(2),e.Q6J("toggleable",!0)("showHeader",!1)("collapsed",o.isAdvancedExpanded),e.xp6(2),e.Q6J("isRowClickable",!1)("isLoaded",o.isLoaded)("dataSource",o.dataSource)("mandatoryColomns",o.mandatoryColomns)("optionalColomns",o.optionalColomns)("page",o.page)("actions",o.rowFunctions)("exportService",o.employeesService)("mergeImgWithName",o.mergingTableColumn),e.xp6(1),e.s9C("title",e.lcZ(12,18,"Dashboard")),e.xp6(2),e.Q6J("serviceId",o.getCurrentServiceId()))},dependencies:[M.a,w.I,v.T,hr.c,Qe.J,fr.b,T.lW,C.a8,C.n5,b.Ro,l._Y,l.JL,l.sg,H.jx,br.s,P.X$],styles:[".p-panel .p-panel-content{border:none}img[_ngcontent-%COMP%]{width:70px;height:70px;border-radius:50%}"]}),a})();var vr=r(21902),Tr=r(90926),wr=r(40362),Dr=r(4526);function Er(a,s){if(1&a){const t=e.EpF();e.ynx(0),e._UZ(1,"mat-divider"),e.TgZ(2,"app-material-table",16),e.NdJ("onChangePage",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.getList(i.pageIndex+1,i.pageSize))})("deleteRow",function(i){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(i))}),e.qZA(),e.BQk()}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("page",t.page)("actions",t.rowFunctions)}}let Sr=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeWorkScheduleService=t,this.assignPlanService=o,this.submitted=!1,this.mandatoryColomns=["Ser","employee","plan","startDate","toDate","actions"],this.isLoaded=!0,this.optionalColomns=[]}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],policyGroupId:[null,[l.kI.required]],plan_ID:[null,[l.kI.required]],employeeIds:[null,[l.kI.required]],fromDate:[null,[l.kI.required]],is_Apply_Rules:[null]})}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new _.by(null))}get formCtrls(){return this.form.controls}getList(t,o){this.dataSource?.data?.length>0&&(this.dataSource=new _.by(null));let i=this.formCtrls.plan_ID.value;i>0&&(this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.pageSize=o),this.assignPlanService.getList(i,{PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(I=>{I.message.messageType==p.u.Success?(this.dataSource=new _.by((0,U.hN)(I.data)),this.isLoaded=!0,this.page.length=I.meta.totalItemCount):this.errorList(I?.message?.messages)}))}submit(){if(this.submitted=!0,this.form.valid){const t={EmployeeData:{Plan_ID:this.formCtrls.plan_ID.value,FromDate:c.M.mapDateReverse(this.formCtrls.fromDate.value),Is_Apply_Rules:this.formCtrls.is_Apply_Rules.value??!1},SelectedEmployeeIDs:this.formCtrls.employeeIds.value};this.create(t)}}create(t){this.showLoading(),this.assignPlanService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg(o?.message?.messageTypeName),this.getList(this.currentPage)):this.errorList(o?.message?.messages),this.hideLoading()})}onDelete(t){this.deleteDialog(t.employee+" - "+t.plan).subscribe(i=>{i&&this.delete(t)})}delete(t){let o={Person_Instance_ID:t.person_Instance_ID,Plan_ID:t.plan_ID,FromDate:t.fromDate,ToDate:t.toDateOriginal};this.showLoading(),this.employeeWorkScheduleService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg(i?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(i?.message?.messages),this.hideLoading()})}clearForm(){this.formCtrls.employeeIds.reset(),this.formCtrls.fromDate.reset(),this.formCtrls.is_Apply_Rules.reset(),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(B),e.Y36(vr.X))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-assign-plan"]],features:[e.qOj],decls:25,vars:19,consts:[[1,"row"],[1,"col-12"],["title","assignPlan"],[3,"url","params"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-4","col-12"],[3,"control","submitted","filter"],[3,"control","policyGroupCtrl","submitted","filter","change"],[3,"control","policyGroupCtrl","submitted","filter","multi"],["label","fromDate",3,"control","submitted"],[1,"col-md-8","col-12","ptop-15","pbottom-15"],["label","is_Apply_Rules",3,"control"],["align","end"],[3,"onClick"],[4,"ngIf"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","onChangePage","deleteRow"]],template:function(t,o){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card")(4,"mat-card-title"),e._UZ(5,"page-title",2)(6,"app-back-btn",3),e.qZA(),e.TgZ(7,"mat-card-content",4)(8,"div",0)(9,"div",1)(10,"form",5)(11,"div",0)(12,"div",6),e._UZ(13,"app-policy-groups-dropdown",7),e.qZA(),e.TgZ(14,"div",6)(15,"app-plan-by-policy-group-dropdown",8),e.NdJ("change",function(){return o.getList(o.firstPage)}),e.qZA()(),e.TgZ(16,"div",6),e._UZ(17,"app-employee-by-policy-group-dropdown",9),e.qZA(),e.TgZ(18,"div",6),e._UZ(19,"app-datepicker",10),e.qZA(),e.TgZ(20,"div",11),e._UZ(21,"app-check-box",12),e.qZA()()()()()(),e.TgZ(22,"mat-card-actions",13)(23,"submit-btn",14),e.NdJ("onClick",function(){return o.submit()}),e.qZA()(),e.YNc(24,Er,3,6,"ng-container",15),e.qZA()()()),2&t&&(e.xp6(6),e.MGl("url","/personnel-setup/",o.moduleId,"/employees"),e.Q6J("params",o.pageParams),e.xp6(4),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.policyGroupId)("submitted",o.submitted)("filter",!0),e.xp6(2),e.Q6J("control",o.formCtrls.plan_ID)("policyGroupCtrl",o.formCtrls.policyGroupId)("submitted",o.submitted)("filter",!0),e.xp6(2),e.Q6J("control",o.formCtrls.employeeIds)("policyGroupCtrl",o.formCtrls.policyGroupId)("submitted",o.submitted)("filter",!0)("multi",!0),e.xp6(2),e.Q6J("control",o.formCtrls.fromDate)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.is_Apply_Rules),e.xp6(3),e.Q6J("ngIf",o.formCtrls.plan_ID.value>0))},dependencies:[d.O5,N.Q,w.I,q.u,we.a,S.p,v.T,C.a8,C.dn,C.n5,C.hq,V.d,b.Ro,Tr.P,wr.x,Dr.q,l._Y,l.JL,l.sg]}),a})(),Ar=(()=>{class a extends L.K{constructor(){super()}getList(t){return this.get("Personnel/EmployeeActivation/GetNonActivationEmployeesList",{params:t})}activate(t){return this.post("Personnel/EmployeeActivation/Activate",null,{params:{id:t}})}exportExcel(){}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),Zr=(()=>{class a extends u.U{constructor(t){super(),this.employeesActivationService=t,this.mandatoryColomns=["Ser","employee","job","actions"],this.optionalColomns=[],this.isLoaded=!1}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new _.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,o){this.isLoaded=!1,this.removePageParams(),this.page.pageIndex=t,o&&(this.page.pageSize=o),this.employeesActivationService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(n=>{if(1==n.message.messageType){if(0==n.data.length&&t>1)return void this.getList(this.prevPage);this.dataSource=new _.by(function xr(a){return a.map(s=>({...s,employee:(0,c._)(s.core_Person?.ar_Name,s.core_Person?.en_Name),job:(0,c._)(s.core_Person_Instance_Job_Title[0]?.core_Job_Title?.ar_Name,s.core_Person_Instance_Job_Title[0]?.core_Job_Title?.en_Name)}))}(n.data)),this.isLoaded=!0,this.page.length=n.meta.totalItemCount}else this.errorList(n?.message?.messages)})}activate(t){console.log(t),this.showLoading(),this.employeesActivationService.activate(t.id).subscribe(o=>{1==o.message.messageType?(this.updateSuccessfullyMsg(o?.message?.messageTypeName),this.getList(this.currentPage)):this.errorList(o?.message?.messages),this.hideLoading()})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Ar))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employees-activation"]],features:[e.qOj],decls:7,vars:7,consts:[[1,"row"],[1,"col-12"],[1,"form-card"],["title","employeesActivation",3,"globalFunctions"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","onChangePage","rowactions"]],template:function(t,o){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card",2)(4,"mat-card-title"),e._UZ(5,"page-title",3),e.qZA(),e.TgZ(6,"app-material-table",4),e.NdJ("onChangePage",function(n){return o.getList(n.pageIndex+1,n.pageSize)})("rowactions",function(n){return o.activate(n.data)}),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("globalFunctions",o.globalFunctions),e.xp6(1),e.Q6J("isLoaded",o.isLoaded)("dataSource",o.dataSource)("mandatoryColomns",o.mandatoryColomns)("optionalColomns",o.optionalColomns)("page",o.page)("actions",o.rowFunctions))},dependencies:[w.I,v.T,C.a8,C.n5,b.Ro]}),a})();var R=r(3710);const Lr=[{path:"employees",data:{view:h.S.employees},children:[{path:"",redirectTo:"index",pathMatch:mt.U.full},{path:"index",component:Ir,data:{view:h.S.employees_index},canActivate:[R.r]},{path:"add",component:dt,data:{view:h.S.employee_profile},canActivate:[R.r]},{path:"edit/:employeeId",component:dt,data:{view:h.S.employee_profile},canActivate:[R.r]},{path:"assign-plan",component:Sr,data:{view:h.S.assign_plan},canActivate:[R.r]}]},{path:"employees-activation",component:Zr,data:{view:h.S.employees_activation},canActivate:[R.r]}];let Pr=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[Ie.Bz.forChild(Lr),Ie.Bz]}),a})();var Jr=r(62361),kr=r(71523),Nr=r(67361);let Mr=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[d.ez,Pr,Jr.m,kr.OrgManagementModule,Nr.d]}),a})()}}]);