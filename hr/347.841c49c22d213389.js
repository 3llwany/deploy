"use strict";(self.webpackChunkhr=self.webpackChunkhr||[]).push([[347],{18347:(ft,V,c)=>{c.r(V),c.d(V,{AttendanceSetupModule:()=>_t});var g=c(36895),O=c(80458),r=c(24006),b=c(30671),d=c(15602),h=c(58385),p=c(78937),e=c(94650),T=c(18521);let ie=(()=>{class i extends T.K{constructor(){super()}create(t){return this.post("AttendanceSetup/OfficialHoliday/Create",t)}update(t){return this.post("AttendanceSetup/OfficialHoliday/Edit",t)}getList(t){return this.get("AttendanceSetup/OfficialHoliday/GetList",{params:t})}getById(t){return this.get("AttendanceSetup/OfficialHoliday/GetAll",{params:{$filter:`id eq ${t}`}})}getAll(){return this.get("AttendanceSetup/OfficialHoliday/GetAll")}Delete(t){return this.delete("AttendanceSetup/OfficialHoliday/Delete",{params:{Id:t}})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var v=c(45471),y=c(56184),S=c(22289),C=c(53026),f=c(46896),l=c(73546),Z=c(44850),_=c(86405);function se(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",12),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}let M=(()=>{class i extends h.d{constructor(t){super(),this.holidayService=t,this.submitted=!1,this.mandatoryColomns=["Ser","id","en_Name","ar_Name","actions"],this.isLoaded=!1,this.optionalColomns=[]}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],ar_Name:[null,[r.kI.required,p.w.whiteSpace]],en_Name:[null,[r.kI.required,p.w.whiteSpace]]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new b.by(null)),this.CheckNoBusinessOrCompany()&&this.getList(this.firstPage)}getList(t,a){this.page.pageIndex=t,a&&(this.page.pageSize=a);let s={PageNumber:t,pageSize:this.page.pageSize};this.showLoading(),this.holidayService.getList(s).subscribe(n=>{n.message.messageType==d.u.Success?(this.dataSource=new b.by(n.data),this.isLoaded=!0,this.page.length=n.meta.totalItemCount):this.errorList(n.message.messages)})}submit(){if(this.submitted=!0,this.form.valid){const t={ID:this.form.value.id,Ar_Name:this.form.value.ar_Name,En_Name:this.form.value.en_Name};0==t.ID?this.create(t):this.update(t)}}create(t){this.showLoading(),this.holidayService.create(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.clearForm(),this.getList(this.lastPage,this.page.pageSize),this.addSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a.message.messages),this.hideLoading()})}update(t){this.showLoading(),this.holidayService.update(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.clearForm(),this.getList(this.currentPage,this.page.pageSize),this.updateSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a?.message?.messages),this.hideLoading()})}holidayToEdit(t){this.form.patchValue(t)}onDelete(t){let a=this.msgTranslate(t.ar_Name,t.en_Name);this.deleateDialog(a).subscribe(s=>{s&&this.delete(t)})}navigateToCalendar(t){this.router.navigate([`attendance-setup/${this.moduleId}/holidays-calendar/${t.id}`])}delete(t){this.showLoading(),this.holidayService.Delete(t.id).subscribe(a=>{a.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(a?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),t.id==this.formCtrls.id.value&&this.clearForm()):this.errorList(a?.message?.messages)})}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ie))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-official-holidays"]],features:[e.qOj],decls:18,vars:14,consts:[[1,"row"],[1,"col-12"],["addTitle","officialHolidays","editTitle","editHoliday",3,"id"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","en_Name",3,"control","submitted"],["label","ar_Name",3,"control","submitted"],["align","end"],[3,"id","onClick"],[3,"click",4,"ngIf"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","onChangePage","editRow","deleteRow"],[3,"click"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card")(4,"mat-card-title"),e._UZ(5,"page-title",2),e.qZA(),e.TgZ(6,"mat-card-content",3)(7,"form",4)(8,"div",0)(9,"div",5),e._UZ(10,"app-input",6),e.qZA(),e.TgZ(11,"div",5),e._UZ(12,"app-input",7),e.qZA()()()(),e.TgZ(13,"mat-card-actions",8)(14,"submit-btn",9),e.NdJ("onClick",function(){return a.submit()}),e.qZA(),e.YNc(15,se,1,0,"reset-form-btn",10),e.qZA(),e._UZ(16,"mat-divider"),e.TgZ(17,"app-material-table",11),e.NdJ("onChangePage",function(n){return a.getList(n.pageIndex+1,n.pageSize)})("editRow",function(n){return a.holidayToEdit(n)})("deleteRow",function(n){return a.onDelete(n)}),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("id",a.formCtrls.id.value),e.xp6(2),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.en_Name)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.ar_Name)("submitted",a.submitted),e.xp6(2),e.Q6J("id",a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",a.formCtrls.id.value>0),e.xp6(2),e.Q6J("isLoaded",a.isLoaded)("dataSource",a.dataSource)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("actions",a.rowFunctions))},dependencies:[g.O5,v.a,y.I,S.J,C.p,f.T,l.a8,l.dn,l.n5,l.hq,Z.d,_.Ro,r._Y,r.JL,r.sg]}),i})(),ne=(()=>{class i extends T.K{constructor(){super()}create(t){return this.post("AttendanceSetup/AttDevice/Create",t)}update(t){return this.post("AttendanceSetup/AttDevice/Edit",t)}getList(t){return this.get("AttendanceSetup/AttDevice/GetList",{params:t})}getAll(){this.get("AttendanceSetup/AttDevice/GetAll")}Delete(t){return this.delete("AttendanceSetup/AttDevice/Delete",{params:{Id:t}})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function oe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",12),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}let re=(()=>{class i extends h.d{constructor(t){super(),this.attendanceDeviceService=t,this.submitted=!1,this.mandatoryColomns=["id","name","machineIP","actions"],this.isLoaded=!1,this.optionalColomns=[]}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],name:[null,[r.kI.required,p.w.whiteSpace]],machineIP:[null,[r.kI.required,p.w.whiteSpace]]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new b.by(null)),this.CheckNoBusinessOrCompany()&&this.getList(this.firstPage)}getList(t,a){this.page.pageIndex=t,a&&(this.page.pageSize=a);let s={PageNumber:t,pageSize:this.page.pageSize};this.showLoading(),this.attendanceDeviceService.getList(s).subscribe(n=>{n.message.messageType==d.u.Success?(this.dataSource=new b.by(n.data),this.isLoaded=!0,this.page.length=n.meta.totalItemCount):this.errorList(n.message.messages),this.hideLoading()})}submit(){if(this.submitted=!0,this.form.valid){const t={ID:this.form.value.id,Name:this.form.value.name,MachineIP:this.form.value.machineIP};0==t.ID?this.create(t):this.update(t)}}create(t){this.showLoading(),this.attendanceDeviceService.create(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.clearForm(),this.getList(this.lastPage,this.page.pageSize),this.addSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a.message.messages),this.hideLoading()})}update(t){this.showLoading(),this.attendanceDeviceService.update(t).subscribe(a=>{a.message.messageType==d.u.Success?(this.clearForm(),this.getList(this.currentPage,this.page.pageSize),this.updateSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a.message.messages),this.hideLoading()})}onDelete(t){this.deleateDialog(t.name).subscribe(a=>{a&&this.delete(t)})}delete(t){this.showLoading(),this.attendanceDeviceService.Delete(t.id).subscribe(a=>{a.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(a?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),t.id==this.formCtrls.id.value&&this.clearForm()):this.errorList(a.message.messages),this.hideLoading()})}attendanceDeviceTOEdit(t){this.form.patchValue(t)}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ne))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-attendance-device"]],features:[e.qOj],decls:20,vars:14,consts:[[1,"row"],[1,"col-12"],["addTitle","attendanceDevices","editTitle","attendanceDeviceEdit",3,"id"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","name",3,"control","submitted"],["label","machineIP",3,"control","submitted"],["align","end"],[3,"id","onClick"],[3,"click",4,"ngIf"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","onChangePage","editRow","deleteRow"],[3,"click"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card")(4,"mat-card-title"),e._UZ(5,"page-title",2),e.qZA(),e.TgZ(6,"mat-card-content",3)(7,"div",0)(8,"div",1)(9,"form",4)(10,"div",0)(11,"div",5),e._UZ(12,"app-input",6),e.qZA(),e.TgZ(13,"div",5),e._UZ(14,"app-input",7),e.qZA()()()()()(),e.TgZ(15,"mat-card-actions",8)(16,"submit-btn",9),e.NdJ("onClick",function(){return a.submit()}),e.qZA(),e.YNc(17,oe,1,0,"reset-form-btn",10),e.qZA(),e._UZ(18,"mat-divider"),e.TgZ(19,"app-material-table",11),e.NdJ("onChangePage",function(n){return a.getList(n.pageIndex+1,n.pageSize)})("editRow",function(n){return a.attendanceDeviceTOEdit(n)})("deleteRow",function(n){return a.onDelete(n)}),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("id",a.formCtrls.id.value),e.xp6(4),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.name)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.machineIP)("submitted",a.submitted),e.xp6(2),e.Q6J("id",a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",a.formCtrls.id.value>0),e.xp6(2),e.Q6J("isLoaded",a.isLoaded)("dataSource",a.dataSource)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("actions",a.rowFunctions))},dependencies:[g.O5,v.a,y.I,S.J,C.p,f.T,l.a8,l.dn,l.n5,l.hq,Z.d,_.Ro,r._Y,r.JL,r.sg]}),i})(),le=(()=>{class i extends T.K{constructor(){super()}create(t){return this.post("AttendanceSetup/ProjLocationType/Create",t)}update(t){return this.post("AttendanceSetup/ProjLocationType/Edit",t)}getList(t){return this.get("AttendanceSetup/ProjLocationType/GetList",{params:t})}getAll(){return this.get("AttendanceSetup/ProjLocationType/GetAll")}Delete(t){return this.delete("AttendanceSetup/ProjLocationType/Delete",{params:{Id:t}})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function de(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",12),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}let me=(()=>{class i extends h.d{constructor(t){super(),this.locationService=t,this.submitted=!1,this.mandatoryColomns=["Ser","id","en_Name","ar_Name","actions"],this.isLoaded=!1,this.optionalColomns=[]}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],ar_Name:[null,[r.kI.required,p.w.whiteSpace]],en_Name:[null,[r.kI.required,p.w.whiteSpace]]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new b.by(null)),this.CheckNoBusinessOrCompany()&&this.getList(this.firstPage)}getList(t,a){this.page.pageIndex=t,a&&(this.page.pageSize=a);let s={PageNumber:t,pageSize:this.page.pageSize};this.showLoading(),this.locationService.getList(s).subscribe(n=>{n.message.messageType==d.u.Success?(this.dataSource=new b.by(n.data),this.isLoaded=!0,this.page.length=n.meta.totalItemCount):this.errorList(n.message.messages)})}submit(){if(this.submitted=!0,this.form.valid){const t={ID:this.form.value.id,Ar_Name:this.form.value.ar_Name,En_Name:this.form.value.en_Name};0==t.ID?this.create(t):this.update(t)}}create(t){this.showLoading(),this.locationService.create(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.clearForm(),this.getList(this.lastPage,this.page.pageSize),this.addSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a.message.messages),this.hideLoading()})}update(t){this.showLoading(),this.locationService.update(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.clearForm(),this.getList(this.currentPage,this.page.pageSize),this.updateSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a?.message?.messages),this.hideLoading()})}locationToEdit(t){this.form.patchValue(t)}onDelete(t){let a=this.msgTranslate(t.ar_Name,t.en_Name);this.deleateDialog(a).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.locationService.Delete(t.id).subscribe(a=>{a.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(a?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),t.id==this.formCtrls.id.value&&this.clearForm()):this.errorList(a?.message?.messages)})}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(le))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-location"]],features:[e.qOj],decls:18,vars:14,consts:[[1,"row"],[1,"col-12"],["addTitle","location","editTitle","editLocation",3,"id"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","en_Name",3,"control","submitted"],["label","ar_Name",3,"control","submitted"],["align","end"],[3,"id","onClick"],[3,"click",4,"ngIf"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","onChangePage","editRow","deleteRow"],[3,"click"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card")(4,"mat-card-title"),e._UZ(5,"page-title",2),e.qZA(),e.TgZ(6,"mat-card-content",3)(7,"form",4)(8,"div",0)(9,"div",5),e._UZ(10,"app-input",6),e.qZA(),e.TgZ(11,"div",5),e._UZ(12,"app-input",7),e.qZA()()()(),e.TgZ(13,"mat-card-actions",8)(14,"submit-btn",9),e.NdJ("onClick",function(){return a.submit()}),e.qZA(),e.YNc(15,de,1,0,"reset-form-btn",10),e.qZA(),e._UZ(16,"mat-divider"),e.TgZ(17,"app-material-table",11),e.NdJ("onChangePage",function(n){return a.getList(n.pageIndex+1,n.pageSize)})("editRow",function(n){return a.locationToEdit(n)})("deleteRow",function(n){return a.onDelete(n)}),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("id",a.formCtrls.id.value),e.xp6(2),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.en_Name)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.ar_Name)("submitted",a.submitted),e.xp6(2),e.Q6J("id",a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",a.formCtrls.id.value>0),e.xp6(2),e.Q6J("isLoaded",a.isLoaded)("dataSource",a.dataSource)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("actions",a.rowFunctions))},dependencies:[g.O5,v.a,y.I,S.J,C.p,f.T,l.a8,l.dn,l.n5,l.hq,Z.d,_.Ro,r._Y,r.JL,r.sg]}),i})();var u=c(43949);let E=(()=>{class i extends T.K{constructor(){super()}create(t){return this.post("AttendanceSetup/PermissionSetup/Create",t)}update(t){return this.post("AttendanceSetup/PermissionSetup/Edit",t)}getList(t){return this.get("AttendanceSetup/PermissionSetup/GetList",{params:t})}getById(t){return this.get("AttendanceSetup/PermissionSetup/GetAll",{params:{$filter:`id eq ${t}`}})}getAll(){return this.get("AttendanceSetup/PermissionSetup/GetAll")}Delete(t){return this.delete("AttendanceSetup/PermissionSetup/Delete",{params:{Id:t}})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var I=c(37167),P=c(65959),D=c(18825),ce=c(71948),N=c(49274);function pe(i,o){if(1&i&&e._UZ(0,"app-add-new-btn",22),2&i){const t=e.oxw();e.MGl("url","/attendance-setup/",t.moduleId,"/permissions/add"),e.Q6J("params",t.pageParams)}}function ue(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",23)(1,"div",0)(2,"div",24)(3,"mat-radio-button",25),e.NdJ("change",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.radioChange(!0))}),e._uU(4),e.ALo(5,"titlecase"),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"div",24)(8,"mat-radio-button",25),e.NdJ("change",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.radioChange(!1))}),e._uU(9),e.ALo(10,"titlecase"),e.ALo(11,"translate"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("checked",t.formCtrls.warningInsertAction.value),e.xp6(1),e.hij(" ",e.lcZ(5,4,e.lcZ(6,6,"warningInsertAction"))," "),e.xp6(4),e.Q6J("checked",t.formCtrls.stopInsertAction.value),e.xp6(1),e.hij(" ",e.lcZ(10,8,e.lcZ(11,10,"stopInsertAction"))," ")}}function he(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",26),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}let R=(()=>{class i extends h.d{constructor(t){super(),this.permissionTypeService=t,this.permissionId=0,this.submitted=!1}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.permissionId=t.permissionId??0}),this.form=this.fb.group({id:[0,{nonNullable:!0}],name:[null,[r.kI.required,p.w.whiteSpace]],code:[null,[r.kI.required,p.w.whiteSpace]],new_Hired_Month_Indecator:[null,[r.kI.required,u.dN.gt(0)]],num_Permission_Per_Year_New_Hired:[null,[r.kI.required,u.dN.gt(0)]],num_Permission_Per_Month:[null,[r.kI.required,u.dN.gt(0)]],num_Permission_Per_Year:[null,[r.kI.required,u.dN.gt(0)]],total_Hour_Per_Month:[null,[r.kI.required,u.dN.gt(0)]],total_Hour_Per_Permission:[null,[r.kI.required,u.dN.gt(0)]],enable_Validation:[!1,[r.kI.required]],warningInsertAction:[!1,[r.kI.required]],stopInsertAction:[!1,[r.kI.required]]},{validators:[p.w.greaterThan("num_Permission_Per_Month","num_Permission_Per_Year"),p.w.greaterThan("total_Hour_Per_Permission","total_Hour_Per_Month")]})}get formCtrls(){return this.form?.controls}onChangeBusinessAndCompanyId(){this.CheckNoBusinessOrCompany()&&this.getPermissionById()}submit(){if(this.submitted=!0,this.form.valid){const t={id:this.form.value.id,name:this.form.value.name,code:this.form.value.code,new_Hired_Month_Indecator:this.form.value.new_Hired_Month_Indecator,num_Permission_Per_Year_New_Hired:this.form.value.num_Permission_Per_Year_New_Hired,enable_Validation:this.form.value.enable_Validation,warningInsertAction:this.form.value.warningInsertAction,stopInsertAction:this.form.value.stopInsertAction,num_Permission_Per_Month:this.form.value.num_Permission_Per_Month,num_Permission_Per_Year:this.form.value.num_Permission_Per_Year,total_Hour_Per_Month:this.form.value.total_Hour_Per_Month,total_Hour_Per_Permission:this.form.value.total_Hour_Per_Permission};0==t.id?this.create(t):this.update(t)}}enableValidation(t){t?(this.formCtrls.warningInsertAction.setValue(!0),this.formCtrls.stopInsertAction.setValue(!1)):(this.formCtrls.warningInsertAction.setValue(!1),this.formCtrls.stopInsertAction.setValue(!1))}radioChange(t){this.formCtrls.warningInsertAction.setValue(t),this.formCtrls.stopInsertAction.setValue(!t)}create(t){this.showLoading(),this.permissionTypeService.create(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.addSuccessfullyMsg(a?.message?.messageTypeName),this.navigateTo(`/attendance-setup/${this.moduleId}/permissions/edit/${a.data.id}`),this.permissionId=a.data.id,this.formCtrls.id.setValue(a.data.id)):this.errorList(a?.message?.messages),this.hideLoading()})}getPermissionById(){this.permissionTypeService.getById(this.permissionId).subscribe(t=>{t.message.messageType==d.u.Success&&this.form.patchValue(t.data[0])})}update(t){this.showLoading(),this.permissionTypeService.update(t).subscribe(a=>{a?.message?.messageType==d.u.Success?this.updateSuccessfullyMsg(a?.message?.messageTypeName):this.errorList(a?.message?.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0,enable_Validation:!1}),this.submitted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(E))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-permission"]],features:[e.qOj],decls:33,vars:25,consts:[[1,"row"],[1,"col-12"],["addTitle","permissionType","editTitle","editpermissionType",3,"id"],["label","addpermission",3,"url","params",4,"ngIf"],[3,"url","params"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-4","col-12"],["label","name",3,"control","submitted"],["label","code",3,"control","submitted"],["type","number","label","num_Permission_Per_Month",3,"control","submitted"],["type","number","label","num_Permission_Per_Year",3,"control","submitted"],["type","number","label","total_Hour_Per_Permission",3,"control","submitted"],["type","number","label","total_Hour_Per_Month",3,"control","submitted"],[1,"col-md-6","col-12"],["type","number","label","num_Permission_Per_Year_New_Hired",3,"control","submitted"],["type","number","label","new_Hired_Month_Indecator",3,"control","submitted"],["label","enable_Validation",3,"control","onChange"],["class","col-md-8 col-12",4,"ngIf"],["align","end"],[3,"id","onClick"],[3,"click",4,"ngIf"],["label","addpermission",3,"url","params"],[1,"col-md-8","col-12"],[1,"col"],[3,"checked","change"],[3,"click"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card")(4,"mat-card-title"),e._UZ(5,"page-title",2),e.YNc(6,pe,1,2,"app-add-new-btn",3),e._UZ(7,"app-back-btn",4),e.qZA(),e.TgZ(8,"mat-card-content",5)(9,"form",6)(10,"div",0)(11,"div",7),e._UZ(12,"app-input",8),e.qZA(),e.TgZ(13,"div",7),e._UZ(14,"app-input",9),e.qZA(),e.TgZ(15,"div",7),e._UZ(16,"app-input",10),e.qZA(),e.TgZ(17,"div",7),e._UZ(18,"app-input",11),e.qZA(),e.TgZ(19,"div",7),e._UZ(20,"app-input",12),e.qZA(),e.TgZ(21,"div",7),e._UZ(22,"app-input",13),e.qZA(),e.TgZ(23,"div",14),e._UZ(24,"app-input",15),e.qZA(),e.TgZ(25,"div",14),e._UZ(26,"app-input",16),e.qZA(),e.TgZ(27,"div",7)(28,"app-check-box",17),e.NdJ("onChange",function(n){return a.enableValidation(n)}),e.qZA()(),e.YNc(29,ue,12,12,"div",18),e.qZA()()(),e.TgZ(30,"mat-card-actions",19)(31,"submit-btn",20),e.NdJ("onClick",function(){return a.submit()}),e.qZA(),e.YNc(32,he,1,0,"reset-form-btn",21),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("id",a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",a.permissionId>0),e.xp6(1),e.MGl("url","/attendance-setup/",a.moduleId,"/permissions/index"),e.Q6J("params",a.pageParams),e.xp6(2),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.name)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.code)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.num_Permission_Per_Month)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.num_Permission_Per_Year)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.total_Hour_Per_Permission)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.total_Hour_Per_Month)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.num_Permission_Per_Year_New_Hired)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.new_Hired_Month_Indecator)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.enable_Validation),e.xp6(1),e.Q6J("ngIf",a.formCtrls.enable_Validation.value),e.xp6(2),e.Q6J("id",a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",a.formCtrls.id.value>0))},dependencies:[g.O5,v.a,I.u,P.a,D.J,S.J,C.p,f.T,ce.U0,l.a8,l.dn,l.n5,l.hq,_.Ro,r._Y,r.JL,r.sg,g.rS,N.X$]}),i})(),ge=(()=>{class i extends h.d{constructor(t){super(),this.permissionService=t,this.isLoaded=!1,this.mandatoryColomns=["Ser","id","name","num_Permission_Per_Month","num_Permission_Per_Year","enable_Validation","actions"],this.optionalColomns=["warningInsertAction","stopInsertAction","total_Hour_Per_Permission","total_Hour_Per_Month"]}ngOnInit(){}onChangeBusinessAndCompanyId(){this.CheckNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,a){this.page.pageIndex=t,a&&(this.page.pageSize=a),this.removePageParams();let s={PageNumber:t,pageSize:this.page.pageSize};this.showLoading(),this.permissionService.getList(s).subscribe(n=>{if(n.message.messageType==d.u.Success){if(0==n.data.length&&t>1)return void this.getList(t-1);this.dataSource=new b.by(n.data),this.isLoaded=!0,this.page.length=n.meta.totalItemCount}else this.errorList(n.message.messages)})}onDelete(t){let a=this.msgTranslate(t.name);this.deleateDialog(a).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.permissionService.Delete(t.id).subscribe(a=>{a.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(a?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(a.message.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(E))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-permission-index"]],features:[e.qOj],decls:8,vars:7,consts:[[1,"row"],[1,"col-12"],[1,"mb-5"],["title","permissionType",3,"globalFunctions"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","onChangePage","deleteRow"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card")(4,"mat-card-title",2),e._UZ(5,"page-title",3),e.qZA(),e._UZ(6,"mat-divider"),e.TgZ(7,"app-material-table",4),e.NdJ("onChangePage",function(n){return a.getList(n.pageIndex+1,n.pageSize)})("deleteRow",function(n){return a.onDelete(n)}),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("globalFunctions",a.globalFunctions),e.xp6(2),e.Q6J("isLoaded",a.isLoaded)("dataSource",a.dataSource)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("actions",a.rowFunctions))},dependencies:[y.I,f.T,l.a8,l.n5,Z.d,_.Ro]}),i})();var _e=c(50617),B=c(78292),Y=c(24724),fe=c(45061),be=c(75288),z=c(3848);let ve=(()=>{class i extends T.K{constructor(){super()}create(t){return this.post("AttendanceSetup/VacationTypes/AddVacationAgeBased",t)}update(t){return this.post("AttendanceSetup/VacationTypes/EditVacationAgeBased",t)}getList(t,a){return this.get("AttendanceSetup/VacationTypes/GetVacationAgeBasedList",{params:{...t,$filter:`vacation_ID eq ${a}`}})}Delete(t){return this.delete("AttendanceSetup/VacationTypes/DeleteVacationAgeBased",{params:{Id:t}})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Ce(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",12),e.NdJ("onClick",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}function Te(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-material-table",13),e.NdJ("editRow",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.vacationAgeToEdit(s))})("deleteRow",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(s))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("page",t.page)("actions",t.rowFunctions)("showPaginator",!1)}}let ye=(()=>{class i extends h.d{constructor(t,a){super(),this.vacationAgeServ=t,this.submitted=!1,this.mandatoryColomns=["Ser","id","From_Age","To_Age","balance","actions"],this.isLoaded=!1,this.optionalColomns=[]}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],Vacation_ID:[0,{nonNullable:!0}],From_Age:[null,[r.kI.required,u.dN.gt(0)]],To_Age:[null,[r.kI.required,u.dN.gt(0)]],balance:[null,[r.kI.required,u.dN.gt(0)]]},{validators:[p.w.greaterThan("From_Age","To_Age")]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new b.by(null)),this.CheckNoBusinessOrCompany()&&this.vacationId>0&&this.getVacationAgeList()}getVacationAgeList(){this.showLoading(),this.vacationAgeServ.getList({PageNumber:1,pageSize:1},this.vacationId).subscribe(a=>{a.message.messageType==d.u.Success?(a.data.map(s=>{s.From_Age=s.from_Age,s.To_Age=s.to_Age}),this.dataSource=new b.by(a.data),this.isLoaded=!0):this.errorList(a.message.messages)})}submit(){if(this.submitted=!0,this.form.valid){const t={id:this.form.value.id,Vacation_ID:this.vacationId,From_Age:this.form.value.From_Age,To_Age:this.form.value.To_Age,Balance:this.form.value.balance};0==t.id?this.create(t):this.update(t)}}create(t){this.showLoading(),this.vacationAgeServ.create(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.getVacationAgeList(),this.addSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a.message.messages),this.hideLoading()})}update(t){this.showLoading(),this.vacationAgeServ.update(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.clearForm(),this.getVacationAgeList(),this.updateSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a?.message?.messages),this.hideLoading()})}vacationAgeToEdit(t){this.form.patchValue(t)}onDelete(t){let a=this.msgTranslate(t.to_Age.toString());this.deleateDialog(a).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.vacationAgeServ.Delete(t.id).subscribe(a=>{a.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(a?.message?.messageTypeName),this.getVacationAgeList(),t.id==this.formCtrls.id.value&&this.clearForm()):this.errorList(a?.message?.messages)})}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ve),e.Y36(e.zs3))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vacation-age"]],inputs:{vacationId:"vacationId"},features:[e.qOj],decls:16,vars:11,consts:[[1,"mt-2"],["addTitle","addvacationAge","editTitle","editvacationAge",3,"id"],[3,"formGroup"],[1,"row"],[1,"col-md-4","col-12"],["type","number","label","From_Age",3,"control","submitted"],["type","number","label","To_Age",3,"control","submitted"],["type","number","label","balance",3,"control","submitted"],["align","end"],[3,"id","onClick"],[3,"onClick",4,"ngIf"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","showPaginator","editRow","deleteRow",4,"ngIf"],[3,"onClick"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","showPaginator","editRow","deleteRow"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"mat-card-subtitle",0),e._UZ(2,"page-title",1),e.qZA(),e.TgZ(3,"mat-card-content")(4,"form",2)(5,"div",3)(6,"div",4),e._UZ(7,"app-input",5),e.qZA(),e.TgZ(8,"div",4),e._UZ(9,"app-input",6),e.qZA(),e.TgZ(10,"div",4),e._UZ(11,"app-input",7),e.qZA()()()(),e.TgZ(12,"mat-card-actions",8)(13,"submit-btn",9),e.NdJ("onClick",function(){return a.submit()}),e.qZA(),e.YNc(14,Ce,1,0,"reset-form-btn",10),e.qZA(),e.YNc(15,Te,1,7,"app-material-table",11)),2&t&&(e.xp6(2),e.Q6J("id",a.formCtrls.id.value),e.xp6(2),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.From_Age)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.To_Age)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.balance)("submitted",a.submitted),e.xp6(2),e.Q6J("id",a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",a.formCtrls.id.value>0),e.xp6(1),e.Q6J("ngIf",null==a.dataSource?null:a.dataSource.data))},dependencies:[g.O5,v.a,y.I,S.J,C.p,f.T,l.dn,l.$j,l.hq,_.Ro,r._Y,r.JL,r.sg]}),i})();var i,L=(()=>{return(i=L||(L={}))[i.outside_Company=1]="outside_Company",i[i.inside_Company=2]="inside_Company",L;var i})();(i=L||(L={})).getValue=function o(t){switch(t){case i.outside_Company:return"outside_Company";case i.inside_Company:return"inside_Company";default:return""}};let Se=(()=>{class i extends T.K{constructor(){super()}create(t){return this.post("AttendanceSetup/VacationTypes/AddVacationInsuranceBased",t)}update(t){return this.post("AttendanceSetup/VacationTypes/EditVacationInsuranceBased",t)}getList(t,a){return this.get("AttendanceSetup/VacationTypes/GetVacationInsuranceBasedList",{params:{...t,$filter:`vacation_ID eq ${a}`}})}Delete(t){return this.delete("AttendanceSetup/VacationTypes/DeleteVacationInsuranceBased",{params:{Id:t}})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Ae(i,o){if(1&i&&(e.TgZ(0,"div",16),e._UZ(1,"app-check-box",17),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("control",t.formCtrls.ignore_Insurance_Date)}}function Ze(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",18),e.NdJ("onClick",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}function Le(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-material-table",19),e.NdJ("editRow",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.vacationInsuranceEdit(s))})("deleteRow",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(s))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("page",t.page)("showPaginator",!1)("actions",t.rowFunctions)}}let Ie=(()=>{class i extends h.d{constructor(t){super(),this.vacationInsServ=t,this.submitted=!1,this.mandatoryColomns=["Ser","id","from_Year","to_Year","balance","inside_CompanyString","actions"],this.optionalColomns=["ignore_Insurance_Date"],this.isLoaded=!1,this.insuranceSide=L,this.insuranceSideRadio=[{value:L.outside_Company,label:"outside_Company"},{value:L.inside_Company,label:"inside_Company"}]}ngOnInit(){this.form=this.fb.group({id:[0,{nonNallable:!0}],Vacation_ID:[0,{nonNullable:!0}],from_Year:[null,[r.kI.required,u.dN.gt(0)]],to_Year:[null,[r.kI.required,u.dN.gt(0)]],balance:[null,[r.kI.required,u.dN.gt(0)]],inside_Company:[null,[r.kI.required]],ignore_Insurance_Date:[!1]},{validators:[p.w.greaterThan("from_Year","to_Year")]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new b.by(null)),this.CheckNoBusinessOrCompany()&&this.vacationId>0&&this.getVacationInsuranceList()}getVacationInsuranceList(){this.showLoading(),this.vacationInsServ.getList({PageNumber:1,pageSize:1},this.vacationId).subscribe(a=>{a.message.messageType==d.u.Success?(a.data.map(s=>{s.inside_CompanyString=this.translate(L.getValue(s.inside_Company))}),this.dataSource=new b.by(a.data),this.isLoaded=!0):this.errorList(a.message.messages)})}submit(){if(this.submitted=!0,this.form.valid){const t={ID:this.form.value.id,Vacation_ID:this.vacationId,From_Year:this.form.value.from_Year,To_Year:this.form.value.to_Year,Balance:this.form.value.balance,inside_Company:this.form.value.inside_Company,ignore_Insurance_Date:this.form.value.ignore_Insurance_Date};0==t.ID?this.create(t):this.update(t)}}create(t){this.showLoading(),this.vacationInsServ.create(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.getVacationInsuranceList(),this.addSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a.message.messages),this.hideLoading()})}update(t){this.showLoading(),this.vacationInsServ.update(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.clearForm(),this.getVacationInsuranceList(),this.updateSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a?.message?.messages),this.hideLoading()})}onDelete(t){let a=this.msgTranslate(t.to_Year.toString());this.deleateDialog(a).subscribe(s=>{s&&this.delete(t)})}vacationInsuranceEdit(t){this.form.patchValue(t)}delete(t){this.showLoading(),this.vacationInsServ.Delete(t.id).subscribe(a=>{a.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(a?.message?.messageTypeName),this.getVacationInsuranceList(),t.id==this.formCtrls.id.value&&this.clearForm()):this.errorList(a?.message?.messages)})}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Se))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vacation-insurance"]],inputs:{vacationId:"vacationId"},features:[e.qOj],decls:27,vars:20,consts:[[1,"row"],[1,"col-12"],["addTitle","addvacationInsurance","editTitle","editvacationInsurance",3,"id"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-4","col-12"],["type","number","label","from_Year",3,"control","submitted"],["type","number","label","to_Year",3,"control","submitted"],["type","number","label","balance",3,"control","submitted"],[1,"col-md-5","col-12"],[3,"control","submitted","radioList"],["class","col-md-3 col-12",4,"ngIf"],["align","end"],[3,"id","onClick"],[3,"onClick",4,"ngIf"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","showPaginator","actions","editRow","deleteRow",4,"ngIf"],[1,"col-md-3","col-12"],["label","ignore_Insurance_Date",3,"control"],[3,"onClick"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","showPaginator","actions","editRow","deleteRow"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card")(4,"mat-card-subtitle"),e._UZ(5,"page-title",2),e.qZA(),e.TgZ(6,"mat-card-content",3)(7,"form",4)(8,"div",0)(9,"div",5),e._UZ(10,"app-input",6),e.qZA(),e.TgZ(11,"div",5),e._UZ(12,"app-input",7),e.qZA(),e.TgZ(13,"div",5),e._UZ(14,"app-input",8),e.qZA()()(),e.TgZ(15,"div",0)(16,"div",5),e._uU(17),e.ALo(18,"titlecase"),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"div",9),e._UZ(21,"app-radio-button",10),e.qZA(),e.YNc(22,Ae,2,1,"div",11),e.qZA()(),e.TgZ(23,"mat-card-actions",12)(24,"submit-btn",13),e.NdJ("onClick",function(){return a.submit()}),e.qZA(),e.YNc(25,Ze,1,0,"reset-form-btn",14),e.qZA(),e.YNc(26,Le,1,7,"app-material-table",15),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("id",a.formCtrls.id.value),e.xp6(2),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.from_Year)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.to_Year)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.balance)("submitted",a.submitted),e.xp6(3),e.hij(" ",e.lcZ(18,16,e.lcZ(19,18,"insuranceSide"))," "),e.xp6(4),e.Q6J("control",a.formCtrls.inside_Company)("submitted",a.submitted)("radioList",a.insuranceSideRadio),e.xp6(1),e.Q6J("ngIf",a.formCtrls.inside_Company.value==a.insuranceSide.inside_Company),e.xp6(2),e.Q6J("id",a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",a.formCtrls.id.value>0),e.xp6(1),e.Q6J("ngIf",null==a.dataSource?null:a.dataSource.data))},dependencies:[g.O5,v.a,Y._,y.I,I.u,S.J,C.p,f.T,l.a8,l.dn,l.$j,l.hq,_.Ro,r._Y,r.JL,r.sg,g.rS,N.X$]}),i})();function we(i,o){if(1&i&&e._UZ(0,"app-add-new-btn",47),2&i){const t=e.oxw();e.MGl("url","/attendance-setup/",t.moduleId,"/vacations/add"),e.Q6J("params",t.pageParams)}}function Pe(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"addvacationType"))," "))}function Ne(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"editvacationType"))," "))}function De(i,o){if(1&i&&(e.TgZ(0,"div",15),e._UZ(1,"app-input",48),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("control",t.formCtrls.relatedVacationPriority)("submitted",t.submitted)}}function Je(i,o){if(1&i&&(e.TgZ(0,"div",25),e._UZ(1,"app-check-box",49),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("control",t.formCtrls.isPostedWithRelatedVacation)}}function qe(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",25),e._UZ(2,"app-check-box",50),e.qZA(),e.TgZ(3,"div",10),e._UZ(4,"app-input",51),e.qZA(),e.TgZ(5,"div",10),e._UZ(6,"app-input",52),e.qZA(),e.TgZ(7,"div",25),e._UZ(8,"app-check-box",53),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("control",t.formCtrls.allow_Post),e.xp6(2),e.Q6J("control",t.formCtrls.max_Post_Days)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.post_Period_Month)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.isPostedPreviousYears)}}function ke(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",54),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}let G=(()=>{class i extends h.d{constructor(t){super(),this.vacationServ=t,this.submitted=!1,this.calculateBalance=[{value:1,label:"hireDate"},{value:2,label:"earningDate"}]}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.vacationId=t.vacationId??0}),this.form=this.fb.group({id:[0,{nonNallable:!0}],en_Name:[null,[r.kI.required]],ar_Name:[null,[r.kI.required]],element_ID:[null],monthes_to_get_Balance:[null],allow_Post:[!1],max_Post_Days:[null,[u.dN.gte(0)]],post_Period_Month:[null,[u.dN.gte(0)]],offecial_Vaction_Included:[!1],day_Off_Included:[!1],isRenew:[!1],renew_Day:[null,[u.dN.gte(0)]],renew_Month:[null,[u.dN.gte(0)]],defaultBalance:[null,[u.dN.gte(0)]],renew_Period:[null,[u.dN.gte(0)]],number_of_Earning:[null,[r.kI.required,u.dN.gte(0)]],isDefault:[!1],is_Paid:[!1],canBeRequestedToday:[!1],deductible_Value:[null,[u.dN.gte(0)]],relatedVacationId:[null],relatedVacationPriority:[null,[u.dN.gte(0)]],hasAttashment:[!1],calculate_Balance:[null],calculate_Balance_By_Contract:[!1],number_Days_month:[null,[u.dN.gte(0)]],reportOrder:[null],gender:[null],isPostedPreviousYears:[!1],isPostedWithRelatedVacation:[!1],isEgyptianLaw:[!1],variableCode:[null,[r.kI.required,r.kI.pattern(_e.g.variableCode_pattern)]],display_In_Result:[!1]})}get formCtrls(){return this.form?.controls}onChangeBusinessAndCompanyId(){this.CheckNoBusinessOrCompany()&&this.getVactionById()}submit(){if(this.submitted=!0,this.form.valid){const t={att_Vacation:{id:this.form.value.id,en_Name:this.form.value.en_Name,ar_Name:this.form.value.ar_Name,element_ID:this.form.value.element_ID,monthes_to_get_Balance:this.form.value.monthes_to_get_Balance,allow_Post:this.form.value.allow_Post,max_Post_Days:this.form.value.max_Post_Days,post_Period_Month:this.form.value.post_Period_Month,offecial_Vaction_Included:this.form.value.offecial_Vaction_Included,day_Off_Included:this.form.value.day_Off_Included,isRenew:this.form.value.isRenew,renew_Day:this.form.value.renew_Day,renew_Month:this.form.value.renew_Month,defaultBalance:this.form.value.defaultBalance,renew_Period:this.form.value.renew_Period,number_of_Earning:this.form.value.number_of_Earning,isDefault:this.form.value.isDefault,is_Paid:this.form.value.is_Paid,canBeRequestedToday:this.form.value.canBeRequestedToday,deductible_Value:this.form.value.deductible_Value,relatedVacationId:this.form.value.relatedVacationId,relatedVacationPriority:this.form.value.relatedVacationPriority,hasAttashment:this.form.value.hasAttashment,calculate_Balance:this.form.value.calculate_Balance,calculate_Balance_By_Contract:this.form.value.calculate_Balance_By_Contract,number_Days_month:this.form.value.number_Days_month,reportOrder:this.form.value.reportOrder,gender:this.form.value.gender,isPostedPreviousYears:this.form.value.isPostedPreviousYears,isPostedWithRelatedVacation:this.form.value.isPostedWithRelatedVacation,isEgyptianLaw:this.form.value.isEgyptianLaw},variableCode:this.form.value.variableCode,display_In_Result:this.form.value.display_In_Result};0==t.att_Vacation.id?this.create(t):this.update(t)}}create(t){this.showLoading(),this.vacationServ.create(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.addSuccessfullyMsg(a.message.messageTypeName),this.vacationId=a.data.att_Vacation.id,this.formCtrls.id.setValue(a.data.att_Vacation.id)):this.errorList(a?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this.vacationServ.update(t).subscribe(a=>{a?.message?.messageType==d.u.Success?this.updateSuccessfullyMsg(a?.message?.messageTypeName):(this.errorList(a?.message?.messages),this.hideLoading())})}getVactionById(){this.vacationServ.getById(this.vacationId).subscribe(t=>{t.message.messageType==d.u.Success&&(this.form.patchValue(t.data[0].att_Vacation),this.formCtrls.variableCode.setValue(t.data[0].paY_Variable.code),this.formCtrls.display_In_Result.setValue(t.data[0].paY_Variable.display_In_Result))})}onSelectVacation(t){let a=t[0];a?(this.formCtrls.renew_Period.setValue(a.renew_Period),this.formCtrls.renew_Day.setValue(a.renew_Day),this.formCtrls.renew_Month.setValue(a.renew_Month),this.formCtrls.renew_Period.disable(),this.formCtrls.renew_Day.disable(),this.formCtrls.renew_Month.disable()):(this.formCtrls.renew_Period.enable(),this.formCtrls.renew_Day.enable(),this.formCtrls.renew_Month.enable())}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(B.P))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vacation-type"]],features:[e.qOj],decls:82,vars:71,consts:[[1,"pright-10","pleft-10"],["title","vacationType"],["label","addvacationType",3,"url","params",4,"ngIf"],[3,"url","params"],[3,"label"],[1,"container-fluid"],[1,"mt-2"],[4,"ngIf"],[3,"formGroup"],[1,"row"],[1,"col-md-3","col-12"],["label","en_Name",3,"control","submitted"],["label","ar_Name",3,"control","submitted"],["type","text","label","variableCode",3,"control","submitted"],[3,"control","submitted","filter"],[1,"col-md-4","col-12"],["type","number","label","defaultBalance",3,"control","submitted"],["type","number","label","number_Days_month",3,"control","submitted"],["type","number","label","number_of_Earning",3,"control","submitted"],[1,"col-12"],[3,"control","submitted","multi","filter","change"],["class","col-md-4 col-12",4,"ngIf"],["class","col-md-3 col-12 p-2",4,"ngIf"],[1,"col-md-4","col-12","p-2"],["label","calculate_Balance_By_Contract",3,"control"],[1,"col-md-3","col-12","p-2"],["label","hasAttashment",3,"control"],[1,"col-md-3","col-12","p-2","mb-4"],["label","isDefault",3,"control"],["label","day_Off_Included",3,"control"],["label","offecial_Vaction_Included",3,"control"],["label","is_Paid",3,"control"],["label","canBeRequestedToday",3,"control"],["label","isRenew",3,"control"],["type","number","label","renew_Period",3,"control","submitted"],["type","number","label","renew_Day",3,"control","submitted"],["type","number","label","renew_Month",3,"control","submitted"],[1,"col-8"],["label","calculateBalance",3,"control","submitted","radioList"],["label","isEgyptianLaw",3,"control"],["type","number","label","deductible_Value",3,"control","submitted"],["type","number","label","monthes_to_get_Balance",3,"control","submitted"],["type","number","label","reportOrder",3,"control","submitted"],["align","end"],[3,"id","onClick"],[3,"click",4,"ngIf"],[3,"vacationId"],["label","addvacationType",3,"url","params"],["type","number","label","relatedVacationPriority",3,"control","submitted"],["label","isPostedWithRelatedVacation",3,"control"],["label","allow_Post",3,"control"],["type","number","label","max_Post_Days",3,"control","submitted"],["type","number","label","post_Period_Month",3,"control","submitted"],["label","isPostedPreviousYears",3,"control"],[3,"click"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"mat-card",0)(2,"mat-card-title"),e._UZ(3,"page-title",1),e.YNc(4,we,1,2,"app-add-new-btn",2),e._UZ(5,"app-back-btn",3),e.qZA(),e.TgZ(6,"mat-tab-group")(7,"mat-tab",4),e.ALo(8,"titlecase"),e.ALo(9,"translate"),e.TgZ(10,"mat-card-content",5)(11,"mat-card-subtitle",6),e.YNc(12,Pe,4,5,"span",7),e.YNc(13,Ne,4,5,"span",7),e.qZA(),e.TgZ(14,"form",8)(15,"div",9)(16,"div",10),e._UZ(17,"app-input",11),e.qZA(),e.TgZ(18,"div",10),e._UZ(19,"app-input",12),e.qZA(),e.TgZ(20,"div",10),e._UZ(21,"app-input",13),e.qZA(),e.TgZ(22,"div",10),e._UZ(23,"app-gender-dropdown",14),e.qZA(),e.TgZ(24,"div",15),e._UZ(25,"app-input",16),e.qZA(),e.TgZ(26,"div",15),e._UZ(27,"app-input",17),e.qZA(),e.TgZ(28,"div",15),e._UZ(29,"app-input",18),e.qZA(),e.TgZ(30,"div",19)(31,"div",9)(32,"div",15)(33,"app-vacation-type-dropdown",20),e.NdJ("change",function(n){return a.onSelectVacation(n)}),e.qZA()(),e.YNc(34,De,2,2,"div",21),e.YNc(35,Je,2,1,"div",22),e.qZA()(),e.TgZ(36,"div",23),e._UZ(37,"app-check-box",24),e.qZA(),e.TgZ(38,"div",25),e._UZ(39,"app-check-box",26),e.qZA(),e.TgZ(40,"div",27),e._UZ(41,"app-check-box",28),e.qZA(),e.TgZ(42,"div",27),e._UZ(43,"app-check-box",29),e.qZA(),e.TgZ(44,"div",25),e._UZ(45,"app-check-box",30),e.qZA(),e.TgZ(46,"div",25),e._UZ(47,"app-check-box",31),e.qZA(),e.TgZ(48,"div",25),e._UZ(49,"app-check-box",32),e.qZA(),e.TgZ(50,"div",19)(51,"div",9)(52,"div",25),e._UZ(53,"app-check-box",33),e.qZA(),e.TgZ(54,"div",10),e._UZ(55,"app-input",34),e.qZA(),e.TgZ(56,"div",10),e._UZ(57,"app-input",35),e.qZA(),e.TgZ(58,"div",10),e._UZ(59,"app-input",36),e.qZA()()(),e.YNc(60,qe,9,6,"ng-container",7),e.TgZ(61,"div",37),e._UZ(62,"app-radio-button",38),e.qZA(),e.TgZ(63,"div",23),e._UZ(64,"app-check-box",39),e.qZA(),e.TgZ(65,"div",15),e._UZ(66,"app-input",40),e.qZA(),e.TgZ(67,"div",15),e._UZ(68,"app-input",41),e.qZA(),e.TgZ(69,"div",15),e._UZ(70,"app-input",42),e.qZA()()()(),e.TgZ(71,"mat-card-actions",43)(72,"submit-btn",44),e.NdJ("onClick",function(){return a.submit()}),e.qZA(),e.YNc(73,ke,1,0,"reset-form-btn",45),e.qZA()(),e.TgZ(74,"mat-tab",4),e.ALo(75,"titlecase"),e.ALo(76,"translate"),e._UZ(77,"app-vacation-age",46),e.qZA(),e.TgZ(78,"mat-tab",4),e.ALo(79,"titlecase"),e.ALo(80,"translate"),e._UZ(81,"app-vacation-insurance",46),e.qZA()()()),2&t&&(e.xp6(4),e.Q6J("ngIf",a.vacationId>0),e.xp6(1),e.MGl("url","/attendance-setup/",a.moduleId,"/vacations/index"),e.Q6J("params",a.pageParams),e.xp6(2),e.s9C("label",e.lcZ(8,59,e.lcZ(9,61,"vacationType"))),e.xp6(5),e.Q6J("ngIf",0==a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",a.formCtrls.id.value>0),e.xp6(1),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.en_Name)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.ar_Name)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.variableCode)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.gender)("submitted",a.submitted)("filter",!1),e.xp6(2),e.Q6J("control",a.formCtrls.defaultBalance)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.number_Days_month)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.number_of_Earning)("submitted",a.submitted),e.xp6(4),e.Q6J("control",a.formCtrls.relatedVacationId)("submitted",a.submitted)("multi",!1)("filter",!0),e.xp6(1),e.Q6J("ngIf",a.formCtrls.relatedVacationId.value>0),e.xp6(1),e.Q6J("ngIf",a.formCtrls.relatedVacationId.value>0),e.xp6(2),e.Q6J("control",a.formCtrls.calculate_Balance_By_Contract),e.xp6(2),e.Q6J("control",a.formCtrls.hasAttashment),e.xp6(2),e.Q6J("control",a.formCtrls.isDefault),e.xp6(2),e.Q6J("control",a.formCtrls.day_Off_Included),e.xp6(2),e.Q6J("control",a.formCtrls.offecial_Vaction_Included),e.xp6(2),e.Q6J("control",a.formCtrls.is_Paid),e.xp6(2),e.Q6J("control",a.formCtrls.canBeRequestedToday),e.xp6(4),e.Q6J("control",a.formCtrls.isRenew),e.xp6(2),e.Q6J("control",a.formCtrls.renew_Period)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.renew_Day)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.renew_Month)("submitted",a.submitted),e.xp6(1),e.Q6J("ngIf",a.formCtrls.isRenew.value&&!a.formCtrls.relatedVacationId.value),e.xp6(2),e.Q6J("control",a.formCtrls.calculate_Balance)("submitted",a.submitted)("radioList",a.calculateBalance),e.xp6(2),e.Q6J("control",a.formCtrls.isEgyptianLaw),e.xp6(2),e.Q6J("control",a.formCtrls.deductible_Value)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.monthes_to_get_Balance)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.reportOrder)("submitted",a.submitted),e.xp6(2),e.Q6J("id",a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",!a.formCtrls.id.value),e.xp6(1),e.s9C("label",e.lcZ(75,63,e.lcZ(76,65,"vacationAge"))),e.xp6(3),e.Q6J("vacationId",a.vacationId),e.xp6(1),e.s9C("label",e.lcZ(79,67,e.lcZ(80,69,"vacationInsurance"))),e.xp6(3),e.Q6J("vacationId",a.vacationId))},dependencies:[g.O5,v.a,Y._,I.u,P.a,D.J,S.J,C.p,fe.t,be.a,f.T,z.SP,z.uX,l.a8,l.dn,l.n5,l.$j,l.hq,_.Ro,r._Y,r.JL,r.sg,ye,Ie,g.rS,N.X$]}),i})(),xe=(()=>{class i extends h.d{constructor(t){super(),this.vacationService=t,this.isLoaded=!1,this.mandatoryColomns=["Ser","id","en_Name","allow_Post","max_Post_Days","offecial_Vaction_Included","actions"],this.optionalColomns=["display_In_Result","defaultBalance","day_Off_Included","isRenew","renew_Day","renew_Month","renew_Period","number_of_Earning","isDefault","is_Paid","canBeRequestedToday","maxRelatedBal","deductible_Value","relatedVacationId","relatedVacationPriority","hasAttashment","calculate_Balance","calculate_Balance_By_Contract","number_Days_month","reportOrder","gender"]}ngOnInit(){}onChangeBusinessAndCompanyId(){this.CheckNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,a){this.page.pageIndex=t,a&&(this.page.pageSize=a),this.removePageParams();const s={PageNumber:t,pageSize:this.page.pageSize};this.showLoading(),this.vacationService.getList(s).subscribe(n=>{if(n.message.messageType===d.u.Success){let m=[];n.data.map(A=>{m.push(A.att_Vacation)}),this.dataSource=new b.by(m),this.isLoaded=!0,this.page.length=n.meta.totalItemCount}else this.errorList(n.message.messages)})}onDelete(t){let a=this.msgTranslate(t.ar_Name,t.en_Name);this.deleateDialog(a).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.vacationService.Delete(t.id).subscribe(a=>{a.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(a.message.messageTypeName),this.getList(1==this.dataSource.data.length&&this.page.pageIndex>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(a.message.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(B.P))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-vacation-index"]],features:[e.qOj],decls:8,vars:7,consts:[[1,"row"],[1,"col-12"],[1,"mb-5"],["title","vacationType",3,"globalFunctions"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","onChangePage","deleteRow"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card")(4,"mat-card-title",2),e._UZ(5,"page-title",3),e.qZA(),e._UZ(6,"mat-divider"),e.TgZ(7,"app-material-table",4),e.NdJ("onChangePage",function(n){return a.getList(n.pageIndex+1,n.pageSize)})("deleteRow",function(n){return a.onDelete(n)}),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("globalFunctions",a.globalFunctions),e.xp6(2),e.Q6J("isLoaded",a.isLoaded)("dataSource",a.dataSource)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("actions",a.rowFunctions))},dependencies:[y.I,f.T,l.a8,l.n5,Z.d,_.Ro]}),i})();var H=c(21854);let Ue=(()=>{class i extends T.K{constructor(){super()}create(t){return this.post("AttendanceSetup/Element/Create",t)}update(t){return this.post("AttendanceSetup/Element/Edit",t)}getList(t){return this.get("AttendanceSetup/Element/GetList",{params:{...t,$expand:`${H.db.Att_Attendance_Element},${H.db.PAY_Variable}`}})}getAll(){this.get("AttendanceSetup/Element/GetAll")}Delete(t){return this.delete("AttendanceSetup/Element/Delete",{params:{Id:t}})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Qe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",15),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}let Fe=(()=>{class i extends h.d{constructor(t){super(),this.attendanceElementService=t,this.submitted=!1,this.mandatoryColomns=["Ser","id","arName","name","code","actions"],this.optionalColomns=["display_In_Result"],this.isLoaded=!1}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],arName:[null,[r.kI.required,p.w.whiteSpace]],name:[null,[r.kI.required,p.w.whiteSpace]],code:[null,[r.kI.required]],display_In_Result:[!1]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.CheckNoBusinessOrCompany()&&this.getList(this.firstPage)}getList(t,a){this.page.pageIndex=t,a&&(this.page.pageSize=a);let s={PageNumber:t,pageSize:this.page.pageSize};this.showLoading(),this.attendanceElementService.getList(s).subscribe(n=>{n.message.messageType==d.u.Success?(n.data.map(m=>{m.arName=m.att_Attendance_Element.ar_Name,m.name=m.att_Attendance_Element.en_Name,m.code=m.att_Attendance_Element.code,m.id=m.att_Attendance_Element.id,m.display_In_Result=m.paY_Variable.display_In_Result}),this.dataSource=new b.by(n.data),this.isLoaded=!0,this.page.length=n.meta.totalItemCount):this.errorList(n.message.messages),this.hideLoading()})}submit(){if(this.submitted=!0,this.form.valid){const t={element:{id:this.form.value.id,en_Name:this.form.value.name,ar_Name:this.form.value.arName,code:this.form.value.code},display_In_Result:this.form.value.display_In_Result};0==t.element.id?this.create(t):this.update(t)}}create(t){this.showLoading(),this.attendanceElementService.create(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.clearForm(),this.getList(this.lastPage,this.page.pageSize),this.addSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a.message.messages),this.hideLoading()})}update(t){this.showLoading(),this.attendanceElementService.update(t).subscribe(a=>{a.message.messageType==d.u.Success?(this.clearForm(),this.getList(this.currentPage,this.page.pageSize),this.updateSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a.message.messages),this.hideLoading()})}attendanceElementToEdit(t){this.form.patchValue(t)}onDelete(t){let a=this.msgTranslate(t.arName,t.name);this.deleateDialog(a).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.attendanceElementService.Delete(t.id).subscribe(a=>{a.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(a?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),t.attendance_Element_ID==this.formCtrls.id.value&&this.clearForm()):this.errorList(a.message.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0,display_In_Result:!1}),this.submitted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ue))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-attendance-element"]],features:[e.qOj],decls:23,vars:17,consts:[[1,"row"],[1,"col-12"],["addTitle","attendance_Element","editTitle","edit_Attendance_Element",3,"id"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-4","col-12"],["label","ar_Name",3,"control","submitted"],["label","en name",3,"control","submitted"],["label","code",3,"control","submitted"],[1,"col-md-4","col-12","p-2","align-text-center"],["label","display_In_Result",3,"control"],["align","end"],[3,"id","onClick"],[3,"click",4,"ngIf"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","onChangePage","deleteRow","editRow"],[3,"click"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card")(4,"mat-card-title"),e._UZ(5,"page-title",2),e.qZA(),e.TgZ(6,"mat-card-content",3)(7,"form",4)(8,"div",0)(9,"div",5),e._UZ(10,"app-input",6),e.qZA(),e.TgZ(11,"div",5),e._UZ(12,"app-input",7),e.qZA(),e.TgZ(13,"div",5),e._UZ(14,"app-input",8),e.qZA()(),e.TgZ(15,"div",0)(16,"div",9),e._UZ(17,"app-check-box",10),e.qZA()()()(),e.TgZ(18,"mat-card-actions",11)(19,"submit-btn",12),e.NdJ("onClick",function(){return a.submit()}),e.qZA(),e.YNc(20,Qe,1,0,"reset-form-btn",13),e.qZA(),e._UZ(21,"mat-divider"),e.TgZ(22,"app-material-table",14),e.NdJ("onChangePage",function(n){return a.getList(n.pageIndex+1,n.pageSize)})("deleteRow",function(n){return a.onDelete(n)})("editRow",function(n){return a.attendanceElementToEdit(n)}),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("id",a.formCtrls.id.value),e.xp6(2),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.arName)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.name)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.code)("submitted",a.submitted),e.xp6(3),e.Q6J("control",a.formCtrls.display_In_Result),e.xp6(2),e.Q6J("id",a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",a.formCtrls.id.value>0),e.xp6(2),e.Q6J("isLoaded",a.isLoaded)("dataSource",a.dataSource)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("actions",a.rowFunctions))},dependencies:[g.O5,v.a,y.I,I.u,S.J,C.p,f.T,l.a8,l.dn,l.n5,l.hq,Z.d,_.Ro,r._Y,r.JL,r.sg]}),i})(),Ve=(()=>{class i extends T.K{constructor(){super()}create(t){return this.post("AttendanceSetup/OverTimeType/Create",t)}update(t){return this.post("AttendanceSetup/OverTimeType/Edit",t)}getList(t){return this.get("AttendanceSetup/OverTimeType/GetList",{params:t})}getAll(){this.get("AttendanceSetup/OverTimeType/GetAll")}Delete(t){return this.delete("AttendanceSetup/OverTimeType/Delete",{params:{Id:t}})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Oe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",12),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}let Me=(()=>{class i extends h.d{constructor(t){super(),this.overTimeTypeService=t,this.submitted=!1,this.mandatoryColomns=["Ser","id","name","ar_Name","actions"],this.isLoaded=!1,this.optionalColomns=[]}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],name:[null,[r.kI.required,p.w.whiteSpace]],ar_Name:[null,[r.kI.required,p.w.whiteSpace]]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.CheckNoBusinessOrCompany()&&this.getList(this.firstPage)}getList(t,a){this.page.pageIndex=t,a&&(this.page.pageSize=a);let s={PageNumber:t,pageSize:this.page.pageSize};this.showLoading(),this.overTimeTypeService.getList(s).subscribe(n=>{n.message.messageType==d.u.Success?(this.dataSource=new b.by(n.data),this.isLoaded=!0,this.page.length=n.meta.totalItemCount):this.errorList(n.message.messages),this.hideLoading()})}submit(){if(this.submitted=!0,this.form.valid){const t={ID:this.form.value.id,Ar_Name:this.form.value.ar_Name,Name:this.form.value.name};0==t.ID?this.create(t):this.update(t)}}create(t){this.showLoading(),this.overTimeTypeService.create(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.clearForm(),this.getList(this.lastPage,this.page.pageSize),this.addSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a.message.messages),this.hideLoading()})}update(t){this.showLoading(),this.overTimeTypeService.update(t).subscribe(a=>{a.message.messageType==d.u.Success?(this.clearForm(),this.getList(this.currentPage,this.page.pageSize),this.updateSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a.message.messages),this.hideLoading()})}attendanceElementToEdit(t){this.form.patchValue(t)}onDelete(t){this.deleateDialog(t.name).subscribe(a=>{a&&this.delete(t)})}delete(t){this.showLoading(),this.overTimeTypeService.Delete(t.id).subscribe(a=>{a.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(a?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),t.id==this.formCtrls.id.value&&this.clearForm()):this.errorList(a.message.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ve))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-over-time-type"]],features:[e.qOj],decls:18,vars:14,consts:[[1,"row"],[1,"col-12"],["addTitle","overtimetype","editTitle","editOverTimeType",3,"id"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","name",3,"control","submitted"],["label","ar_Name",3,"control","submitted"],["align","end"],[3,"id","onClick"],[3,"click",4,"ngIf"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","onChangePage","editRow","deleteRow"],[3,"click"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card")(4,"mat-card-title"),e._UZ(5,"page-title",2),e.qZA(),e.TgZ(6,"mat-card-content",3)(7,"form",4)(8,"div",0)(9,"div",5),e._UZ(10,"app-input",6),e.qZA(),e.TgZ(11,"div",5),e._UZ(12,"app-input",7),e.qZA()()()(),e.TgZ(13,"mat-card-actions",8)(14,"submit-btn",9),e.NdJ("onClick",function(){return a.submit()}),e.qZA(),e.YNc(15,Oe,1,0,"reset-form-btn",10),e.qZA(),e._UZ(16,"mat-divider"),e.TgZ(17,"app-material-table",11),e.NdJ("onChangePage",function(n){return a.getList(n.pageIndex+1,n.pageSize)})("editRow",function(n){return a.attendanceElementToEdit(n)})("deleteRow",function(n){return a.onDelete(n)}),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("id",a.formCtrls.id.value),e.xp6(2),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.name)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.ar_Name)("submitted",a.submitted),e.xp6(2),e.Q6J("id",a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",a.formCtrls.id.value>0),e.xp6(2),e.Q6J("isLoaded",a.isLoaded)("dataSource",a.dataSource)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("actions",a.rowFunctions))},dependencies:[g.O5,v.a,y.I,S.J,C.p,f.T,l.a8,l.dn,l.n5,l.hq,Z.d,_.Ro,r._Y,r.JL,r.sg]}),i})(),J=(()=>{class i extends T.K{constructor(){super()}create(t){return this.post("AttendanceSetup/Shift/Create",t)}update(t){return this.post("AttendanceSetup/Shift/Edit",t)}getList(t){return this.get("AttendanceSetup/Shift/GetList",{params:t})}getById(t){return this.get("AttendanceSetup/Shift/GetAll",{params:{$filter:`id eq ${t}`}})}getAll(){return this.get("AttendanceSetup/Shift/GetAll",{})}Delete(t){return this.delete("AttendanceSetup/Shift/Delete",{params:{Id:t}})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Ee=c(54689);function Re(i,o){if(1&i&&e._UZ(0,"app-add-new-btn",40),2&i){const t=e.oxw();e.MGl("url","/attendance-setup/",t.moduleId,"/shifts/add"),e.Q6J("params",t.pageParams)}}function Be(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",41),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}let j=(()=>{class i extends h.d{constructor(t){super(),this.shiftsService=t,this.shiftId=0,this.submitted=!1}ngOnInit(){this.activatedRoute.paramMap.subscribe(t=>{this.shiftId=Number(t.get("shiftId"))??0}),this.form=this.fb.group({id:[0,{nonNullable:!0}],ar_Name:[null,[r.kI.required,p.w.whiteSpace]],en_Name:[null,[r.kI.required,p.w.whiteSpace]],is_Just_Attend:[!1],is_Target:[!1],hour_Number:[null,[r.kI.required,r.kI.min(0)]],ovt_Target_Factor:[null,r.kI.min(0)],ovt_Target_Max_Limit:[null,r.kI.min(0)],delay_Tolerance:[null,r.kI.min(0)],across_Mid_Night:[!1],isNight:[!1],is_DefaultAttend:[!1],calc_Delay_From:[null],calc_Departure_From:[null],start_Time_Lower_Limit:[null],start_Time_Upper_Limit:[null],end_Time_Lower_Limit:[null,{disable:!0}],end_Time_Upper_Limit:[null],start_Time:[null],end_Time:[null]},{validator:[p.w.timeAfter("end_Time","start_Time"),p.w.timeBefore("start_Time_Lower_Limit","start_Time"),p.w.timeBefore("start_Time_Lower_Limit","end_Time"),p.w.timeAfter("calc_Departure_From","calc_Delay_From"),p.w.timeAfter("calc_Delay_From","start_Time"),p.w.timeBefore("calc_Departure_From","end_Time"),p.w.timeAfter("start_Time_Upper_Limit","start_Time_Lower_Limit"),p.w.timeAfter("end_Time_Upper_Limit","end_Time_Lower_Limit"),p.w.timeAfter("end_Time_Upper_Limit","end_Time"),p.w.timeAfter("start_Time_Upper_Limit","start_Time"),p.w.timeBefore("start_Time_Upper_Limit","end_Time")]}),this.formCtrls.start_Time.valueChanges.subscribe(t=>{this.calcHourNumber()}),this.formCtrls.end_Time.valueChanges.subscribe(t=>{this.calcHourNumber()})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.CheckNoBusinessOrCompany()&&this.getShiftsById()}onchangeJustAttend(t){["hour_Number","ovt_Target_Factor","ovt_Target_Max_Limit","across_Mid_Night","delay_Tolerance","isNight","is_DefaultAttend","end_Time","calc_Delay_From","calc_Departure_From","start_Time"].forEach(s=>{t?(this.formCtrls.is_Target.setValue(!1),this.form.get(s).disable(),this.form.get(s).reset()):this.form.get(s).enable()})}onchangeTarget(t){["start_Time","end_Time","calc_Delay_From","calc_Departure_From","isNight","is_DefaultAttend"].forEach(s=>{t?(this.formCtrls.is_Just_Attend.setValue(!1),this.form.get(s).disable(),this.form.get(s).reset(),this.formCtrls.hour_Number.enable(),this.formCtrls.ovt_Target_Max_Limit.enable(),this.formCtrls.ovt_Target_Factor.enable(),this.formCtrls.across_Mid_Night.enable(),this.formCtrls.delay_Tolerance.enable()):this.form.get(s).enable()})}calcHourNumber(){this.formCtrls?.hour_Number?.disable();let t=new Date("01/01/2000 "+this.formCtrls.start_Time.value),a=new Date("01/01/2000 "+this.formCtrls.end_Time.value);var s=t.getHours(),n=a.getHours(),m=t.getMinutes();let ae=n-s+(a.getMinutes()-m)/60;this.formCtrls.hour_Number.setValue(ae||null)}changeStartTimeUpperLimit(){this.formCtrls.end_Time_Lower_Limit.disable();let t=new Date("01/01/2000 "+this.formCtrls.start_Time_Upper_Limit.value);t.setSeconds(t.getSeconds()+1);var a=t.toTimeString().split(" ")[0];this.formCtrls.end_Time_Lower_Limit.setValue(a),this.formCtrls.end_Time_Lower_Limit.disable()}submit(){if(this.submitted=!0,this.form.valid){const t={id:this.form.value.id,ar_Name:this.form.value.ar_Name,en_Name:this.form.value.en_Name,start_Time:this.form.value.start_Time,end_Time:this.form.value.end_Time,across_Mid_Night:this.form.value.across_Mid_Night,is_Target:this.form.value.is_Target,ovt_Target_Factor:this.form.value.ovt_Target_Factor,delay_Tolerance:this.form.value.delay_Tolerance,calc_Delay_From:this.form.value.calc_Delay_From,calc_Departure_From:this.form.value.calc_Departure_From,is_Just_Attend:this.form.value.is_Just_Attend,is_DefaultAttend:this.form.value.is_DefaultAttend,hour_Number:this.form.value.hour_Number,isNight:this.form.value.isNight,ovt_Target_Max_Limit:this.form.value.ovt_Target_Max_Limit,start_Time_Lower_Limit:this.form.value.start_Time_Lower_Limit,start_Time_Upper_Limit:this.form.value.start_Time_Upper_Limit,end_Time_Lower_Limit:this.form.value.end_Time_Lower_Limit,end_Time_Upper_Limit:this.form.value.end_Time_Upper_Limit};0==t.id?this.create(t):this.update(t)}}create(t){this.showLoading(),this.shiftsService.create(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.addSuccessfullyMsg(a?.message?.messageTypeName),this.shiftId=a.data.id):this.errorList(a?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this.shiftsService.update(t).subscribe(a=>{a.message.messageType==d.u.Success?(this.shiftId=a.data.id,this.updateSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a?.message?.messages),this.hideLoading()})}getShiftsById(){this.shiftsService.getById(this.shiftId).subscribe(t=>{(t.message.messageType=d.u.Success)&&this.form.patchValue(t.data[0])})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(J))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-shifts"]],features:[e.qOj],decls:59,vars:40,consts:[[1,"row"],[1,"col-12"],[1,"p-2"],["addTitle","shifts","editTitle","editShifts",3,"id"],["label","addshifts",3,"url","params",4,"ngIf"],[3,"url","params"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","ar_Name",3,"control","submitted"],["label","en_Name",3,"control","submitted"],[1,"row","mb-2"],[1,"col-md-6","col-6"],["label","is_Just_Attend",3,"control","onChange"],["label","is_Target",3,"control","onChange"],[1,"row","mt-3"],[1,"col-md-3","col-12"],["label","hour_Number","type","number",3,"control","submitted"],["type","number","label","ovtTargetFactor",3,"control","submitted"],["type","number","label","ovtTargetMaxLimit",3,"control","submitted"],[1,"col-md-3","col-6"],["label","delay_Tolerance","type","number",3,"control","submitted"],[1,"row","mt-2"],[1,"col-md-4","col-6"],["label","acrossMidNight",3,"control"],[1,"col-md-4","col-12"],["label","isNight",3,"control"],[1,"col-md-4"],["label","is_DefaultAttend",3,"control"],["label","start_Time",3,"control","submitted"],["label","end_Time",3,"control","submitted"],["label","calc_Delay_From",3,"control","submitted"],["label","calc_Departure_From",3,"control","submitted"],["label","start_Time_Lower_Limit",3,"control","submitted"],["label","start_Time_Upper_Limit",3,"control","submitted","change"],["label"," end_Time_Lower_Limit",3,"control","submitted"],["label","end_Time_Upper_Limit",3,"control","submitted"],["align","end",1,"m-2"],[3,"id","onClick"],[3,"click",4,"ngIf"],["label","addshifts",3,"url","params"],[3,"click"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card",2)(4,"mat-card-title"),e._UZ(5,"page-title",3),e.YNc(6,Re,1,2,"app-add-new-btn",4),e._UZ(7,"app-back-btn",5),e.qZA(),e.TgZ(8,"mat-card-content",6)(9,"form",7)(10,"div",0)(11,"div",8),e._UZ(12,"app-input",9),e.qZA(),e.TgZ(13,"div",8),e._UZ(14,"app-input",10),e.qZA()(),e.TgZ(15,"div",11)(16,"div",12)(17,"app-check-box",13),e.NdJ("onChange",function(n){return a.onchangeJustAttend(n)}),e.qZA()(),e.TgZ(18,"div",12)(19,"app-check-box",14),e.NdJ("onChange",function(n){return a.onchangeTarget(n)}),e.qZA()()(),e.TgZ(20,"div",15)(21,"div",16),e._UZ(22,"app-input",17),e.qZA(),e.TgZ(23,"div",16),e._UZ(24,"app-input",18),e.qZA(),e.TgZ(25,"div",16),e._UZ(26,"app-input",19),e.qZA(),e.TgZ(27,"div",20),e._UZ(28,"app-input",21),e.qZA()(),e.TgZ(29,"div",22)(30,"div",23),e._UZ(31,"app-check-box",24),e.qZA(),e.TgZ(32,"div",25),e._UZ(33,"app-check-box",26),e.qZA(),e.TgZ(34,"div",27),e._UZ(35,"app-check-box",28),e.qZA()(),e.TgZ(36,"div",22)(37,"div",8),e._UZ(38,"app-timepicker",29),e.qZA(),e.TgZ(39,"div",8),e._UZ(40,"app-timepicker",30),e.qZA()(),e.TgZ(41,"div",22)(42,"div",8),e._UZ(43,"app-timepicker",31),e.qZA(),e.TgZ(44,"div",8),e._UZ(45,"app-timepicker",32),e.qZA()(),e.TgZ(46,"div",0)(47,"div",8),e._UZ(48,"app-timepicker",33),e.qZA(),e.TgZ(49,"div",8)(50,"app-timepicker",34),e.NdJ("change",function(){return a.changeStartTimeUpperLimit()}),e.qZA()()(),e.TgZ(51,"div",0)(52,"div",8),e._UZ(53,"app-timepicker",35),e.qZA(),e.TgZ(54,"div",8),e._UZ(55,"app-timepicker",36),e.qZA()()()(),e.TgZ(56,"mat-card-actions",37)(57,"submit-btn",38),e.NdJ("onClick",function(){return a.submit()}),e.qZA(),e.YNc(58,Be,1,0,"reset-form-btn",39),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("id",a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",a.shiftId>0),e.xp6(1),e.MGl("url","/attendance-setup/",a.moduleId,"/shifts/index"),e.Q6J("params",a.pageParams),e.xp6(2),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.ar_Name)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.en_Name)("submitted",a.submitted),e.xp6(3),e.Q6J("control",a.formCtrls.is_Just_Attend),e.xp6(2),e.Q6J("control",a.formCtrls.is_Target),e.xp6(3),e.Q6J("control",a.formCtrls.hour_Number)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.ovt_Target_Factor)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.ovt_Target_Max_Limit)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.delay_Tolerance)("submitted",a.submitted),e.xp6(3),e.Q6J("control",a.formCtrls.across_Mid_Night),e.xp6(2),e.Q6J("control",a.formCtrls.isNight),e.xp6(2),e.Q6J("control",a.formCtrls.is_DefaultAttend),e.xp6(3),e.Q6J("control",a.formCtrls.start_Time)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.end_Time)("submitted",a.submitted),e.xp6(3),e.Q6J("control",a.formCtrls.calc_Delay_From)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.calc_Departure_From)("submitted",a.submitted),e.xp6(3),e.Q6J("control",a.formCtrls.start_Time_Lower_Limit)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.start_Time_Upper_Limit)("submitted",a.submitted),e.xp6(3),e.Q6J("control",a.formCtrls.end_Time_Lower_Limit)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.end_Time_Upper_Limit)("submitted",a.submitted),e.xp6(2),e.Q6J("id",a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",a.formCtrls.id.value>0))},dependencies:[g.O5,v.a,I.u,P.a,Ee.E,D.J,S.J,C.p,f.T,l.a8,l.dn,l.n5,l.hq,_.Ro,r._Y,r.JL,r.sg]}),i})(),Ye=(()=>{class i extends h.d{constructor(t){super(),this.shiftsService=t,this.submitted=!1,this.mandatoryColomns=["Ser","id","ar_Name","en_Name","start_Time","end_Time","isNight","is_Just_Attend","actions"],this.optionalColomns=["end_Time_Lower_Limit","end_Time_Upper_Limit","calc_Delay_From","calc_Departure_From","is_Target","ovt_Target_Factor","ovt_Target_Max_Limit","start_Time_Lower_Limit","start_Time_Upper_Limit","delay_Tolerance","hour_Number","is_DefaultAttend","shift_Type_ID"],this.isLoaded=!1}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new b.by(null)),this.CheckNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,a){this.page.pageIndex=t,a&&(this.page.pageSize=a),this.removePageParams();let s={PageNumber:t,pageSize:this.page.pageSize};this.showLoading(),this.shiftsService.getList(s).subscribe(n=>{if(n.message.messageType==d.u.Success){if(0==n.data.length&&t>1)return void this.getList(this.prevPage);n.data.map(m=>{m.start_Time=this.mapTime(m.start_Time),m.end_Time=this.mapTime(m.end_Time),m.start_Time_Lower_Limit=this.mapTime(m.start_Time_Lower_Limit),m.start_Time_Upper_Limit=this.mapTime(m.start_Time_Upper_Limit),m.end_Time_Lower_Limit=this.mapTime(m.end_Time_Lower_Limit),m.end_Time_Upper_Limit=this.mapTime(m.end_Time_Upper_Limit),m.calc_Departure_From=this.mapTime(m.calc_Departure_From),m.calc_Delay_From=this.mapTime(m.calc_Delay_From)}),this.dataSource=new b.by(n.data),this.isLoaded=!0,this.page.length=n.meta.totalItemCount}else this.errorList(n.message.messages);this.hideLoading()})}onDelete(t){let a=this.msgTranslate(t.ar_Name,t.en_Name);this.deleateDialog(a).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.shiftsService.Delete(t.id).subscribe(a=>{a.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(a?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(a.message.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(J))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-shifts-index"]],features:[e.qOj],decls:8,vars:7,consts:[[1,"row"],[1,"col-12"],[1,"mb-5"],["title","Shifts",3,"globalFunctions"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","onChangePage","deleteRow"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card")(4,"mat-card-title",2),e._UZ(5,"page-title",3),e.qZA(),e._UZ(6,"mat-divider"),e.TgZ(7,"app-material-table",4),e.NdJ("onChangePage",function(n){return a.getList(n.pageIndex+1,n.pageSize)})("deleteRow",function(n){return a.onDelete(n)}),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("globalFunctions",a.globalFunctions),e.xp6(2),e.Q6J("isLoaded",a.isLoaded)("dataSource",a.dataSource)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("actions",a.rowFunctions))},dependencies:[y.I,f.T,l.a8,l.n5,Z.d,_.Ro]}),i})(),w=(()=>{class i extends T.K{constructor(){super()}create(t){return this.post("AttendanceSetup/Plan/Create",t)}update(t){return this.post("AttendanceSetup/Plan/Edit",t)}getList(t){return this.get("AttendanceSetup/Plan/GetList",{params:t})}getById(t){return this.get("AttendanceSetup/Plan/GetAll",{params:{$filter:`id eq ${t}`}})}getDetailsById(t){return this.get("AttendanceSetup/Plan/Details",{params:{planId:`${t}`}})}getAll(){this.get("AttendanceSetup/Plan/GetAll")}Delete(t){return this.delete("AttendanceSetup/Plan/Delete",{params:{Id:t}})}createExtendWithoutChange(t){return this.post("AttendanceSetup/Plan/ExtendWithoutChange",t)}createExtendWithChange(t){return this.post("AttendanceSetup/Plan/ExtendWithChange",t)}createShrink(t){return this.post("AttendanceSetup/Plan/Shrink",t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ze=(()=>{class i extends h.d{constructor(t){super(),this.planService=t,this.submitted=!1,this.mandatoryColomns=["Ser","id","ar_Name","en_Name","actions"],this.optionalColomns=["start_Date","end_Date","group_Days","description"],this.isLoaded=!1}ngOnInit(){}onChangeBusinessAndCompanyId(){this.CheckNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,a){this.page.pageIndex=t,a&&(this.page.pageSize=a),this.removePageParams();let s={PageNumber:t,pageSize:this.page.pageSize};this.showLoading(),this.planService.getList(s).subscribe(n=>{if(n.message.messageType==d.u.Success){if(0==n.data.length&&t>1)return void this.getList(this.prevPage);n.data.map(m=>{m.start_Date=this.mapDate(m.start_Date),m.end_Date=this.mapDate(m.end_Date)}),this.dataSource=new b.by(n.data),this.isLoaded=!0,this.page.length=n.meta.totalItemCount}else this.errorList(n.message.messages);this.hideLoading()})}onDelete(t){let a=this.msgTranslate(t.ar_Name,t.en_Name);this.deleateDialog(a).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.planService.Delete(t.id).subscribe(a=>{a.message.messageType==d.u.Success?(this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),this.deleteSuccessfullyMsg(a?.message?.messageTypeName)):this.errorList(a.message.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-plan-index"]],features:[e.qOj],decls:8,vars:7,consts:[[1,"row"],[1,"col-12"],[1,"mb-5"],["title","attendance_Plans",3,"globalFunctions"],[3,"isLoaded","mandatoryColomns","optionalColomns","page","actions","dataSource","onChangePage","deleteRow"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card")(4,"mat-card-title",2),e._UZ(5,"page-title",3),e.qZA(),e._UZ(6,"mat-divider"),e.TgZ(7,"app-material-table",4),e.NdJ("onChangePage",function(n){return a.getList(n.pageIndex+1,n.pageSize)})("deleteRow",function(n){return a.onDelete(n)}),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("globalFunctions",a.globalFunctions),e.xp6(2),e.Q6J("isLoaded",a.isLoaded)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("actions",a.rowFunctions)("dataSource",a.dataSource))},dependencies:[y.I,f.T,l.a8,l.n5,Z.d,_.Ro]}),i})();function q(i,o){if(o.length<i)throw new TypeError(i+" argument"+(i>1?"s":"")+" required, but only "+o.length+" present")}function Q(i){q(1,arguments);var o=Object.prototype.toString.call(i);return i instanceof Date||"object"==typeof i&&"[object Date]"===o?new Date(i.getTime()):"number"==typeof i||"[object Number]"===o?new Date(i):(("string"==typeof i||"[object String]"===o)&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}var k=6e4;function W(i){return i.getTime()%k}function K(i){var o=new Date(i.getTime()),t=Math.ceil(o.getTimezoneOffset());o.setSeconds(0,0);var s=t>0?(k+W(o))%k:W(o);return t*k+s}function X(i){q(1,arguments);var o=Q(i);return o.setHours(0,0,0,0),o}function He(i,o){q(2,arguments);var t=X(i),a=X(o),s=t.getTime()-K(t),n=a.getTime()-K(a);return Math.round((s-n)/864e5)}function $(i,o){var t=i.getFullYear()-o.getFullYear()||i.getMonth()-o.getMonth()||i.getDate()-o.getDate()||i.getHours()-o.getHours()||i.getMinutes()-o.getMinutes()||i.getSeconds()-o.getSeconds()||i.getMilliseconds()-o.getMilliseconds();return t<0?-1:t>0?1:t}var We=c(32222),Ke=c(7384),Xe=c(10266);function $e(i,o){if(1&i&&e._UZ(0,"app-add-new-btn",16),2&i){const t=e.oxw();e.MGl("url","/attendance-setup/",t.moduleId,"/plan/add"),e.Q6J("params",t.pageParams)}}function et(i,o){if(1&i&&(e.TgZ(0,"div",17),e._UZ(1,"app-input",18),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("control",t.formCtrls.group_Days)("submitted",t.submitted)}}function tt(i,o){if(1&i&&(e.TgZ(0,"div",17),e._UZ(1,"app-input",19),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("control",t.formCtrls.description)("submitted",t.submitted)}}function at(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr",6)(2,"td"),e._UZ(3,"app-input",24),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"translate"),e.ALo(7,"lowercase"),e.qZA(),e.TgZ(8,"td")(9,"app-check-box",25),e.NdJ("onChange",function(s){const m=e.CHM(t).index,A=e.oxw(2);return e.KtG(A.onChangeIsWeekend(s,m))}),e.qZA()(),e.TgZ(10,"td"),e._UZ(11,"app-check-box",26),e.qZA(),e.TgZ(12,"td"),e._UZ(13,"app-prime-dropdown",27),e.qZA(),e.TgZ(14,"td")(15,"a",28),e.NdJ("click",function(){const n=e.CHM(t).index,m=e.oxw(2);return e.KtG(m.repeatShifts(n))}),e.ALo(16,"translate"),e._UZ(17,"i",29),e.qZA()()(),e.BQk()}if(2&i){const t=o.$implicit,a=e.oxw(2);e.xp6(1),e.Q6J("formGroup",t),e.xp6(2),e.Q6J("control",t.controls.dateString)("disabled",!0),e.xp6(2),e.hij(" ",e.lcZ(6,12,e.lcZ(7,14,t.controls.dayName.value))," "),e.xp6(4),e.Q6J("control",t.controls.is_WeekEnd),e.xp6(2),e.Q6J("control",t.controls.is_Basic)("disabled",!t.controls.is_WeekEnd.value),e.xp6(2),e.Q6J("control",t.controls.shift_ID)("submitted",a.submitted)("List",a.shiftList)("filter",!0),e.xp6(2),e.Q6J("matTooltip",e.lcZ(16,16,"repeatShift"))}}function it(i,o){if(1&i&&(e.TgZ(0,"table",20)(1,"thead")(2,"tr",21)(3,"th"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th"),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"th"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e._UZ(18,"th"),e.qZA()(),e.TgZ(19,"tbody"),e.ynx(20,22),e.YNc(21,at,18,18,"ng-container",23),e.BQk(),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,6,"date")," "),e.xp6(3),e.Oqu(e.lcZ(8,8,"dayofweek")),e.xp6(3),e.Oqu(e.lcZ(11,10,"isWeekend")),e.xp6(3),e.Oqu(e.lcZ(14,12,"isBasic")),e.xp6(3),e.Oqu(e.lcZ(17,14,"shift")),e.xp6(5),e.Q6J("ngForOf",t.planShiftDetailsArr.controls)}}let x=(()=>{class i extends h.d{constructor(t,a){super(),this.planService=t,this.shiftsService=a,this.showDaysTable=!0,this.disabelControls=!1,this.isExtendWithChange=!1,this.onSubmit=new e.vpe,this.submitted=!1,this.planId=0,this.activatedRoute.paramMap.subscribe(s=>{this.planId=Number(s.get("planId"))??0,this.planId>0&&this.CheckNoBusinessOrCompany()&&(this.getPlanById(),this.getShifts())}),this.form=this.fb.group({id:[0,{nonNullable:!0}],ar_Name:[null,[r.kI.required,p.w.whiteSpace]],en_Name:[null,[r.kI.required,p.w.whiteSpace]],start_Date:[null,[r.kI.required]],end_Date:[null,[r.kI.required]],group_Days:[null,[r.kI.required,u.dN.digits,r.kI.min(0)]],description:[null],Att_Plan_ShiftList:this.fb.array([])})}ngOnInit(){this.formCtrls.group_Days.valueChanges.subscribe(t=>{t>0&&this.showDaysTable&&this.updateGroupsOfDay()}),this.getShifts()}ngOnChanges(){this.disabelControls&&this.controlsDisabeld()}get formCtrls(){return this.form.controls}get planShiftDetailsArr(){return this.form.controls.Att_Plan_ShiftList}getPlanById(){this.showLoading(),this.planService.getById(this.planId).subscribe(t=>{if(t.message.messageType=d.u.Success){let n=t.data[0];if(this.form.patchValue(n),this.isExtendWithChange){var a=new Date(n.end_Date),s=new Date(n.end_Date);a.setDate(a.getDate()+1),s.setDate(a.getDate()+1+n.group_Days),this.formCtrls.start_Date.setValue(a),this.formCtrls.end_Date.setValue(s)}}this.hideLoading()})}controlsDisabeld(){["ar_Name","en_Name","group_Days","start_Date"].forEach(a=>{this.form.get(a).disable()})}submitForm(){if(this.submitted=!0,this.planShiftDetailsArr.clearValidators(),console.log(this.form),this.form.valid){let t=[];this.planShiftDetailsArr.controls.map((s,n)=>{t.push({id:s.controls.id.value,plan_ID:s.controls.plan_ID.value,shift_ID:s.controls.shift_ID.value,is_WeekEnd:s.controls.is_WeekEnd.value,is_Basic:s.controls.is_Basic.value??!1,date:this.mapDateReverse(s.controls.date.value),iterationNumber:1})});let a={plan:{id:this.formCtrls.id.value,en_Name:this.formCtrls.en_Name.value,ar_Name:this.formCtrls.ar_Name.value,description:this.formCtrls.description.value,start_Date:this.mapDateReverse(this.formCtrls.start_Date.value),end_Date:this.mapDateReverse(this.formCtrls.end_Date.value),group_Days:this.formCtrls.group_Days.value},Att_Plan_ShiftList:t};console.log(a),this.onSubmit.emit(a)}}addPlanShiftDetailsForm(t){let a=this.fb.group({id:[0],plan_ID:[this.formCtrls.id.value],shift_ID:[null,[r.kI.required]],dateString:[this.datePipe.transform(t,"dd/MM/yyyy, h:mm:ss a")],date:[t],is_WeekEnd:[!1],is_Basic:[!1],dayName:[this.getDayName(t)]});this.planShiftDetailsArr.push(a)}updateGroupsOfDay(){this.planShiftDetailsArr.clear();const t=new Date(this.formCtrls.start_Date.value),a=new Date(this.formCtrls.end_Date.value),s=this.formCtrls.group_Days.value,n=function je(i,o){q(2,arguments);var t=Q(i),a=Q(o),s=$(t,a),n=Math.abs(He(t,a));t.setDate(t.getDate()-s*n);var m=$(t,a)===-s,A=s*(n-m);return 0===A?0:A}(a,t);if(s<=n)for(let m=0;m<s;m++){let A=this.getDateInRange(t,m);this.addPlanShiftDetailsForm(A)}}onChangeIsWeekend(t,a){t||this.planShiftDetailsArr.controls[a].controls.is_Basic.setValue(!1)}getDateInRange(t,a){let s=new Date(t);return s.setDate(t.getDate()+a),s}repeatShifts(t){let a;this.planShiftDetailsArr.controls.map((s,n)=>{n==t&&(a=s.controls.shift_ID.value),n>t&&s.controls.shift_ID.setValue(a)})}getShifts(){this.showLoading(),this.shiftsService.getAll().subscribe(t=>{t.message.messageType==d.u.Success?this.shiftList=t.data:this.errorList(t.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w),e.Y36(J))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-plan-form"]],inputs:{showDaysTable:"showDaysTable",disabelControls:"disabelControls",isExtendWithChange:"isExtendWithChange",pageTitle:"pageTitle"},outputs:{onSubmit:"onSubmit"},features:[e.qOj,e.TTD],decls:24,vars:17,consts:[[1,"row"],[1,"col-12"],[1,"p-2"],[3,"title"],["label","add_new_attendance_Plan",3,"url","params",4,"ngIf"],[3,"url","params"],[3,"formGroup"],[1,"col-md-4","col-12"],["label","en_Name",3,"control","submitted"],["label","ar_Name",3,"control","submitted"],["label","start_date",3,"control","submitted"],["label","end_date",3,"control","submitted"],["class","col-md-4",4,"ngIf"],["align","end"],[3,"id","onClick"],["class","w-100",4,"ngIf"],["label","add_new_attendance_Plan",3,"url","params"],[1,"col-md-4"],["label","group_Days","type","number",3,"control","submitted"],["label","description",3,"control","submitted"],[1,"w-100"],[1,"border-bottom-2"],["formArrayName","Att_Plan_ShiftList"],[4,"ngFor","ngForOf"],[1,"pb-0",3,"control","disabled"],[3,"control","onChange"],[3,"control","disabled"],["label","shifts",3,"control","submitted","List","filter"],[1,"btn","btn-info","btn-icon","round","mb-2","ml-1",3,"matTooltip","click"],[1,"pi","pi-copy"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card",2)(4,"mat-card-title"),e._UZ(5,"page-title",3),e.YNc(6,$e,1,2,"app-add-new-btn",4),e._UZ(7,"app-back-btn",5),e.qZA(),e.TgZ(8,"mat-card-content")(9,"form",6)(10,"div",0)(11,"div",7),e._UZ(12,"app-input",8),e.qZA(),e.TgZ(13,"div",7),e._UZ(14,"app-input",9),e.qZA(),e.TgZ(15,"div",7),e._UZ(16,"app-datepicker",10),e.qZA(),e.TgZ(17,"div",7),e._UZ(18,"app-datepicker",11),e.qZA(),e.YNc(19,et,2,2,"div",12),e.YNc(20,tt,2,2,"div",12),e.qZA(),e.TgZ(21,"mat-card-actions",13)(22,"submit-btn",14),e.NdJ("onClick",function(){return a.submitForm()}),e.qZA()(),e.YNc(23,it,22,16,"table",15),e.qZA()()()()()),2&t&&(e.xp6(5),e.Q6J("title",a.pageTitle),e.xp6(1),e.Q6J("ngIf",a.planId>0),e.xp6(1),e.MGl("url","/attendance-setup/",a.moduleId,"/plan/index"),e.Q6J("params",a.pageParams),e.xp6(2),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.en_Name)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.ar_Name)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.start_Date)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.end_Date)("submitted",a.submitted),e.xp6(1),e.Q6J("ngIf",!a.disabelControls||a.disabelControls&&a.isExtendWithChange),e.xp6(1),e.Q6J("ngIf",!a.disabelControls),e.xp6(2),e.Q6J("id",a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",a.formCtrls.group_Days.value&&a.showDaysTable))},dependencies:[g.sg,g.O5,We.Q,v.a,Ke.J,I.u,P.a,D.J,C.p,f.T,l.a8,l.dn,l.n5,l.hq,Xe.gM,_.Ro,r._Y,r.JL,r.sg,r.CE,g.i8,N.X$],styles:["td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:10px!important}  table .mat-form-field-wrapper{padding:0!important}"]}),i})(),ee=(()=>{class i extends h.d{constructor(t,a){super(),this.shiftsService=t,this.planService=a,this.planId=0}ngOnInit(){this.activatedRoute.paramMap.subscribe(t=>{this.planId=Number(t.get("id"))??0})}submit(t){t?.plan?.id>=0&&(0==t.plan.id?this.create(t):this.update(t))}create(t){this.showLoading(),this.planService.create(t).subscribe(a=>{a?.message?.messageType==d.u.Success?this.addSuccessfullyMsg(a?.message?.messageTypeName):this.errorList(a?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this.planService.update(t).subscribe(a=>{a.message.messageType==d.u.Success?this.updateSuccessfullyMsg(a?.message?.messageTypeName):this.errorList(a?.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(J),e.Y36(w))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-plan"]],features:[e.qOj],decls:1,vars:1,consts:[[3,"pageTitle","onSubmit"]],template:function(t,a){1&t&&(e.TgZ(0,"app-plan-form",0),e.NdJ("onSubmit",function(n){return a.submit(n)}),e.qZA()),2&t&&e.Q6J("pageTitle",0==a.planId?"attendance_Plans":"edit_attendance_PlanF")},dependencies:[x]}),i})(),st=(()=>{class i extends T.K{constructor(){super()}create(t){return this.post("AttendanceSetup/AttendancePeriodSetup/Create",t)}update(t){return this.post("AttendanceSetup/AttendancePeriodSetup/Edit",t)}getObject(){return this.get("AttendanceSetup/AttendancePeriodSetup/GetObject")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),nt=(()=>{class i extends h.d{constructor(t){super(),this.periodSetupServ=t,this.submitted=!1}ngOnInit(){this.form=this.fb.group({id:[0,{nonNallable:!0}],startDay:[null,[r.kI.required,u.dN.lte(31),u.dN.gt(0)]],startMonth:[null,[r.kI.required,u.dN.lte(12),u.dN.gt(0)]],inOutAttendence:[!1,[r.kI.required]]})}onChangeBusinessAndCompanyId(){this.CheckNoBusinessOrCompany()&&this.getObject()}get formCtrls(){return this.form.controls}create(t){this.showLoading(),this.periodSetupServ.create(t).subscribe(a=>{a.message.messageType==d.u.Success?this.addSuccessfullyMsg(a.message.messageTypeName):this.errorList(a.message.messages),this.hideLoading()})}submit(){if(this.form.valid){const t={month_setup:{id:this.form.value.id,startDay:this.form.value.startDay,startMonth:this.form.value.startMonth},att_Attendence_setup:{id:this.form.value.id,inOutAttendence:this.form.value.inOutAttendence}};0==t.month_setup.id&&0==t.att_Attendence_setup.id?this.create(t):this.update(t)}}update(t){this.showLoading(),this.periodSetupServ.update(t).subscribe(a=>{a.message.messageType==d.u.Success?this.updateSuccessfullyMsg(a.message.messageTypeName):this.errorList(a.message.messages),this.hideLoading()})}getObject(){this.periodSetupServ.getObject().subscribe(t=>{t.message.messageType==d.u.Success?(this.form.patchValue(t.data.att_Attendence_setup),this.form.patchValue(t.data.month_setup)):this.errorList(t.message.messages)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(st))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-attendance-period"]],features:[e.qOj],decls:17,vars:8,consts:[[1,"row"],[1,"col-12"],["addTitle","attendancePeriod","editTitle","editattendancePeriod",3,"id"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-4","col-12"],["type","number","label","startDay",3,"control","submitted"],["type","number","label","startMonth",3,"control","submitted"],[1,"col-md-4","col-12","p-2"],["label","inOutAttendence",3,"control"],["align","end"],[3,"id","onClick"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card")(4,"mat-card-title"),e._UZ(5,"page-title",2),e.qZA(),e.TgZ(6,"mat-card-content",3)(7,"form",4)(8,"div",0)(9,"div",5),e._UZ(10,"app-input",6),e.qZA(),e.TgZ(11,"div",5),e._UZ(12,"app-input",7),e.qZA(),e.TgZ(13,"div",8),e._UZ(14,"app-check-box",9),e.qZA()()()(),e.TgZ(15,"mat-card-actions",10)(16,"submit-btn",11),e.NdJ("onClick",function(){return a.submit()}),e.qZA()()()()()),2&t&&(e.xp6(5),e.Q6J("id",a.formCtrls.id.value),e.xp6(2),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.startDay)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.startMonth)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.inOutAttendence),e.xp6(2),e.Q6J("id",a.formCtrls.id.value))},dependencies:[v.a,I.u,C.p,f.T,l.a8,l.dn,l.n5,l.hq,_.Ro,r._Y,r.JL,r.sg]}),i})(),ot=(()=>{class i extends T.K{constructor(){super()}create(t){return this.post("AttendanceSetup/AttendancePenaltyDeductionSetup/Create",t)}update(t){return this.post("AttendanceSetup/AttendancePenaltyDeductionSetup/Edit",t)}getObject(){return this.get("AttendanceSetup/AttendancePenaltyDeductionSetup/GetObject")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),rt=(()=>{class i extends h.d{constructor(t){super(),this.penaltySetupServ=t,this.submitted=!1}ngOnInit(){this.form=this.fb.group({id:[0,{nonNallable:!0}],maxDeductionLimitDays:[null,[u.dN.gt(0)]]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.CheckNoBusinessOrCompany()&&this.getObject()}getObject(){this.penaltySetupServ.getObject().subscribe(t=>{t.message.messageType==d.u.Success?this.form.patchValue(t.data):this.errorList(t.message.messages)})}submit(){if(this.form.valid){const t={id:this.form.value.id,maxDeductionLimitDays:this.form.value.maxDeductionLimitDays};0==t.id?this.create(t):this.update(t)}}create(t){this.showLoading(),this.penaltySetupServ.create(t).subscribe(a=>{a.message.messageType==d.u.Success?this.addSuccessfullyMsg(a.message.messageTypeName):this.errorList(a.message.messages),this.hideLoading()})}update(t){this.showLoading(),this.penaltySetupServ.update(t).subscribe(a=>{a.message.messageType==d.u.Success?this.updateSuccessfullyMsg(a.message.messageTypeName):this.errorList(a.message.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ot))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-attendance-penalty-setup"]],features:[e.qOj],decls:13,vars:5,consts:[[1,"row"],[1,"col-12"],["addTitle","attendancePenaltySetup","editTitle","editattendancePenaltySetup",3,"id"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["type","number","label","maxDeductionLimitDays",3,"control","submitted"],["align","end"],[3,"id","onClick"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card")(4,"mat-card-title"),e._UZ(5,"page-title",2),e.qZA(),e.TgZ(6,"mat-card-content",3)(7,"form",4)(8,"div",0)(9,"div",5),e._UZ(10,"app-input",6),e.qZA()()()(),e.TgZ(11,"mat-card-actions",7)(12,"submit-btn",8),e.NdJ("onClick",function(){return a.submit()}),e.qZA()()()()()),2&t&&(e.xp6(5),e.Q6J("id",a.formCtrls.id.value),e.xp6(2),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.maxDeductionLimitDays)("submitted",a.submitted),e.xp6(2),e.Q6J("id",a.formCtrls.id.value))},dependencies:[v.a,C.p,f.T,l.a8,l.dn,l.n5,l.hq,_.Ro,r._Y,r.JL,r.sg]}),i})(),lt=(()=>{class i extends h.d{constructor(t){super(),this.planService=t}ngOnInit(){}submit(t){delete t.plan.description,delete t.plan.group_Days,delete t.Att_Plan_ShiftList,t.plan.id&&this.create(t)}create(t){this.showLoading(),this.planService.createShrink(t).subscribe(a=>{a?.message?.messageType==d.u.Success?this.addSuccessfullyMsg(a?.message?.messageTypeName):this.errorList(a?.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-shrink"]],features:[e.qOj],decls:2,vars:2,consts:[["pageTitle","shrink",3,"showDaysTable","disabelControls","onSubmit"]],template:function(t,a){1&t&&(e.TgZ(0,"app-plan-form",0),e.NdJ("onSubmit",function(n){return a.submit(n)}),e.qZA(),e._UZ(1,"ngx-spinner")),2&t&&e.Q6J("showDaysTable",!1)("disabelControls",!0)},dependencies:[_.Ro,x]}),i})(),dt=(()=>{class i extends h.d{constructor(t){super(),this.planService=t}ngOnInit(){}submit(t){delete t.plan.description,delete t.plan.group_Days,delete t.Att_Plan_ShiftList,t.plan.id&&this.create(t)}create(t){this.showLoading(),this.planService.createExtendWithoutChange(t).subscribe(a=>{a?.message?.messageType==d.u.Success?this.addSuccessfullyMsg(a?.message?.messageTypeName):this.errorList(a?.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-extendwithoutchange"]],features:[e.qOj],decls:2,vars:2,consts:[["pageTitle","extendWithoutChange",3,"showDaysTable","disabelControls","onSubmit"]],template:function(t,a){1&t&&(e.TgZ(0,"app-plan-form",0),e.NdJ("onSubmit",function(n){return a.submit(n)}),e.qZA(),e._UZ(1,"ngx-spinner")),2&t&&e.Q6J("showDaysTable",!1)("disabelControls",!0)},dependencies:[_.Ro,x]}),i})(),mt=(()=>{class i extends h.d{constructor(t){super(),this.planService=t}ngOnInit(){}submit(t){t?.plan?.id>=0&&this.create(t)}create(t){this.showLoading(),this.planService.createExtendWithChange(t).subscribe(a=>{a?.message?.messageType==d.u.Success?this.addSuccessfullyMsg(a?.message?.messageTypeName):this.errorList(a?.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-extendwithchange"]],features:[e.qOj],decls:2,vars:2,consts:[["pageTitle","ExtendWithChange",3,"disabelControls","isExtendWithChange","onSubmit"]],template:function(t,a){1&t&&(e.TgZ(0,"app-plan-form",0),e.NdJ("onSubmit",function(n){return a.submit(n)}),e.qZA(),e._UZ(1,"ngx-spinner")),2&t&&e.Q6J("disabelControls",!0)("isExtendWithChange",!0)},dependencies:[_.Ro,x]}),i})();var F=c(37084);function ct(i,o){if(1&i&&(e.TgZ(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),e._uU(3),e.ALo(4,"titlecase"),e.ALo(5,"translate"),e.qZA()(),e._UZ(6,"app-material-table",8),e.qZA()),2&i){const t=e.oxw().$implicit,a=e.oxw();e.xp6(3),e.AsE(" ",e.lcZ(4,9,e.lcZ(5,11,"iteration"))," ",t.key," "),e.xp6(3),e.Q6J("isLoaded",a.isLoaded)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("showPaginator",!1)("showFilter",!1)("showLoader",!1)("dataSource",t.value)}}function pt(i,o){if(1&i&&(e.TgZ(0,"div",2),e.YNc(1,ct,7,13,"mat-expansion-panel",7),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.value)}}let ut=(()=>{class i extends h.d{constructor(t){super(),this.planServ=t,this.groupedPlans={},this.mandatoryColomns=["date","dayName","is_Basic","is_WeekEnd","time"],this.isLoaded=!1,this.optionalColomns=[]}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.planId=t.planId}),this.getPlansDetailsById(1)}getPlansDetailsById(t,a){this.page.pageIndex=t,a&&(this.page.pageSize=a),this.showLoading(),this.planServ.getDetailsById(this.planId).subscribe(n=>{n?.message?.messageType==d.u.Success?(this.groupedPlans=this.groupPlansByIterationNumber(n.data),n.data.map(m=>{m.dayName=this.getDayName(new Date(m.date)),m.date=this.mapDate(m.date)})):this.errorList(n.message.messages)})}iterationNumberAscending(t,a){return t.key-a.key}groupPlansByIterationNumber(t){let a={};for(let s of t){let n=s.iterationNumber;a[n]||(a[n]=[]),a[n].push(s)}return a}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-plan-details"]],inputs:{planId:"planId"},features:[e.qOj],decls:10,vars:6,consts:[[1,"row"],[1,"col-12"],[1,"mb-2"],[1,"mb-5"],["title","attendancePlansDetails"],[3,"url","params"],["class","mb-2",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"isLoaded","mandatoryColomns","optionalColomns","showPaginator","showFilter","showLoader","dataSource"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card",2)(4,"mat-card-title",3)(5,"div"),e._UZ(6,"page-title",4)(7,"app-back-btn",5),e.qZA()()(),e.YNc(8,pt,2,1,"div",6),e.ALo(9,"keyvalue"),e.qZA()()),2&t&&(e.xp6(7),e.MGl("url","/attendance-setup/",a.moduleId,"/plan/index"),e.Q6J("params",a.pageParams),e.xp6(1),e.Q6J("ngForOf",e.xi3(9,3,a.groupedPlans,a.iterationNumberAscending)))},dependencies:[g.sg,g.O5,y.I,P.a,f.T,l.a8,l.n5,F.ib,F.yz,F.yK,_.Ro,g.rS,g.Nd,N.X$]}),i})();var U=c(36162);const ht=[{path:"attendance-devices",component:re,data:{view:"attendance-devices"}},{path:"official-holidays",component:M,data:{view:"official-holidays"}},{path:"holidays-calendar/:holidayid",component:M,data:{view:"holidays-calendar"}},{path:"location",component:me,data:{view:"location"}},{path:"attendance-element",component:Fe,data:{view:"attendance-element"}},{path:"over-time-type",component:Me,data:{view:"over-time-type"}},{path:"permissions",children:[{path:"",redirectTo:"index",pathMatch:U.U.full},{path:"index",component:ge,data:{view:"permission-index"}},{path:"add",component:R,data:{view:"add-permission"}},{path:"edit/:permissionId",component:R,data:{view:"edit-permission"}}]},{path:"vacations",children:[{path:"",redirectTo:"index",pathMatch:U.U.full},{path:"index",component:xe,data:{view:"vacation-index"}},{path:"add",component:G,data:{view:"add-vacation"}},{path:"edit/:vacationId",component:G,data:{view:"add-vacation"}}]},{path:"shifts",children:[{path:"",redirectTo:"index",pathMatch:U.U.full},{path:"index",component:Ye,data:{view:"shifts-index"}},{path:"add",component:j,data:{view:"add-shift"}},{path:"edit/:shiftId",component:j,data:{view:"add-shift"}}]},{path:"plan",children:[{path:"",redirectTo:"index",pathMatch:U.U.full},{path:"index",component:ze,data:{view:"plan-index"}},{path:"add",component:ee,data:{view:"add-plan"}},{path:"edit/:planId",component:ee,data:{view:"add-plan"}},{path:"shrink/:planId",component:lt,data:{view:"shrink"}},{path:"extend-without-change/:planId",component:dt,data:{view:"extend-without-change"}},{path:"extend-with-change/:planId",component:mt,data:{view:"extend-with-change"}},{path:"details/:planId",component:ut,data:{view:"plan-details"}}]},{path:"attendance-period",component:nt,data:{view:"attendance-period"}},{path:"attendance-penalty-setup",component:rt,data:{view:"attendance-penalty-setup"}}];let gt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[O.Bz.forChild(ht),O.Bz]}),i})();var te=c(78475);let _t=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.ez,gt,te.m]}),i})()}}]);