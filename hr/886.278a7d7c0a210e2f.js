"use strict";(self.webpackChunkhr=self.webpackChunkhr||[]).push([[886],{3710:(y,g,e)=>{e.d(g,{r:()=>h});var r=e(94650),c=e(67579),m=e(24280),v=e(80458);let h=(()=>{class o{constructor(d,a){this.viewsService=d,this.router=a,this.loadingService=(0,r.f3M)(c.b),this.UserModules=this.viewsService.UserModules$.getValue(),this.loading=document.getElementById("page-loading")}canActivate(d,a){let p=d.data?.view;if(this.showLoading(),this.UserModules?.length>0){if(this.viewsService.isViewAllowed(p))return this.hideLoading(),!0;this.router.navigateByUrl("/auth/access-denied"),this.hideLoading()}else this.viewsService.UserModules$.subscribe(f=>{if(f?.length>0){if(this.viewsService.isViewAllowed(p))return this.hideLoading(),!0;this.router.navigateByUrl("/auth/access-denied"),this.hideLoading()}})}showLoading(){this.loading.style.display="block",this.loading.style.opacity="1",this.loading.style.zIndex="998"}hideLoading(){this.loading.style.display="none",this.loading.style.opacity="0",this.loading.style.zIndex="0"}}return o.\u0275fac=function(d){return new(d||o)(r.LFG(m.Z),r.LFG(v.F0))},o.\u0275prov=r.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},84886:(y,g,e)=>{e.r(g),e.d(g,{PMSSetupModule:()=>A});var r=e(36895),c=e(80458),m=e(74513),v=e(3710),h=e(30671),o=e(15602),S=e(95751),d=e(45361),a=e(94650),p=e(12272),f=e(93410),L=e(46896),M=e(29721),C=e(73546);const I=[{path:"unit",component:(()=>{class s extends S.U{constructor(t){super(),this.unitService=t,this.mandatoryColomns=["Ser","id","en_Name","ar_Name","actions"],this.isLoaded=!1,this.optionalColomns=[]}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new h.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.firstPage)}getList(t,i){this.dataSource=new h.by(null),this.isLoaded=!1,this.page.pageIndex=t,i&&(this.page.pageSize=i),this.unitService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==o.u.Success?(this.dataSource=new h.by(n.data),this.isLoaded=!0,this.page.length=n.meta.totalItemCount,this.page.meta=n.meta):this.errorList(n?.message?.messages)})}onDelete(t){let i=this.msgTranslate(t.ar_Name,t.en_Name);this.deleteDialog(i).subscribe(l=>{l&&this.delete(t)})}delete(t){this.showLoading(),this.unitService.Delete(t.id).subscribe(i=>{i.message.messageType==o.u.Success?(this.deleteSuccessfullyMsg("unitRemoved","successfulDelete"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(i?.message?.messages),this.hideLoading()})}openAddEditDialog(t,i){this.dialogsService.addEditDialog(d.M,{data:t},{width:"25vw",minWidth:"400px",maxWidth:"500px",maxHeight:"98vh",disableClose:!0,panelClass:"setup-dialog"}).afterClosed().subscribe(l=>{l&&this.getList(this.currentPage)})}}return s.\u0275fac=function(t){return new(t||s)(a.Y36(p._))},s.\u0275cmp=a.Xpm({type:s,selectors:[["app-unit-index"]],features:[a.qOj],decls:6,vars:8,consts:[[1,"row"],[1,"col-12"],[1,"index-card"],["title","units","TitleHasGlobalFunc","",3,"globalFunctions","action"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","exportService","actions","onChangePage","editRow","deleteRow"]],template:function(t,i){1&t&&(a.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title")(4,"page-title",3),a.NdJ("action",function(){return i.openAddEditDialog(null,!0)}),a.qZA()(),a.TgZ(5,"app-material-table",4),a.NdJ("onChangePage",function(n){return i.getList(n.pageIndex+1,n.pageSize)})("editRow",function(n){return i.openAddEditDialog(n,!1)})("deleteRow",function(n){return i.onDelete(n)}),a.qZA()()()()),2&t&&(a.xp6(4),a.Q6J("globalFunctions",i.globalFunctions),a.xp6(1),a.Q6J("isLoaded",i.isLoaded)("dataSource",i.dataSource)("mandatoryColomns",i.mandatoryColomns)("optionalColomns",i.optionalColomns)("page",i.page)("exportService",i.unitService)("actions",i.rowFunctions))},dependencies:[f.I,L.T,M.X,C.a8,C.n5]}),s})(),data:{view:m.S.unit_index},canActivate:[v.r]}];let w=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=a.oAB({type:s}),s.\u0275inj=a.cJS({imports:[c.Bz.forChild(I),c.Bz]}),s})();var P=e(92634);let A=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=a.oAB({type:s}),s.\u0275inj=a.cJS({imports:[r.ez,w,P.m]}),s})()}}]);