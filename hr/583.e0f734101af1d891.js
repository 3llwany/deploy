"use strict";(self.webpackChunkhr=self.webpackChunkhr||[]).push([[583],{30583:(ra,U,r)=>{r.r(U),r.d(U,{RecruitmentModule:()=>sa});var p=r(36895),N=r(80458),b=r(3710),w=r(36162),g=r(74513),c=r(15602),h=r(95751),m=r(35478),e=r(94650),x=r(65938),O=r(71812),j=r(86405),v=r(49274);let le=(()=>{class i extends h.U{constructor(t){super(),this.dialogRef=t,t.backdropClick().subscribe(()=>this.backToHome())}backToHome(){location.reload()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(x.so))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-candidate-done-dialog"]],features:[e.qOj],decls:12,vars:9,consts:[[3,"name"],["mat-dialog-title",""],[1,"done-title"],[1,"container-fluid","mx-0"],[1,"done-content"],["alt","done",3,"src"],["label","backToHome","mat-dialog-close","",3,"color","onClick"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4",2),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"mat-dialog-content",3)(6,"div",4)(7,"div"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e._UZ(10,"img",5),e.TgZ(11,"app-button",6),e.NdJ("onClick",function(){return a.backToHome()}),e.qZA()()()),2&t&&(e.Q6J("name","dialog"),e.xp6(3),e.hij(" ",e.lcZ(4,5,"finallyAllIsDone")," "),e.xp6(5),e.hij(" ",e.lcZ(9,7,"justWaitOurReplyViaYourEmail")," "),e.xp6(2),e.Q6J("src",a.svg.done,e.LSH),e.xp6(1),e.Q6J("color",a.btn.darkBlue))},dependencies:[O.r,x.ZT,x.uh,x.xY,j.Ro,v.X$],styles:[".candidate-done-dialog .mat-dialog-container{padding:40px 90px;border-radius:10px}  .candidate-done-dialog .done-title{text-align:center;font-size:30px;color:#374761}  .candidate-done-dialog .mat-dialog-content{padding:0}  .candidate-done-dialog .done-content{display:flex;flex-direction:column;gap:30px}  .candidate-done-dialog .done-content>div{align-self:center;color:#5c5c5c;font-size:18px;margin:0}  .candidate-done-dialog .done-content img{width:320px;height:320px;margin-bottom:25px}  .candidate-done-dialog .done-content app-button{align-self:center}  .candidate-done-dialog .done-content app-button .btn{padding:2px 40px}"]}),i})();var y=r(61076),S=r(71180),L=r(61064),D=r(52682),C=r(46896),de=r(20957),d=r(73546),P=r(86257),f=r(37084),M=r(17489),ce=r(20150),pe=r(21508),J=r(44850),l=r(24006),R=r(33975),_=r(78937),I=r(43949),Q=r(70137),A=r(25273),q=r(57566),k=r(2023),me=r(59678),ue=r(2161),ge=r(77900);function he(i,n){if(1&i&&(e.ynx(0,13),e._uU(1),e.BQk()),2&i){const t=e.oxw();let a;e.xp6(1),e.hij(" ",(null!==(a=null==t.formCtrls.national_Id.value?null:t.formCtrls.national_Id.value.length)&&void 0!==a?a:0)+"/"+t.constants.nationalId," ")}}function fe(i,n){if(1&i&&(e.TgZ(0,"div",2),e._UZ(1,"religion-dropdown",14),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("control",t.formCtrls.religioN_ID)("submitted",t.submitted)("filter",!0)}}function _e(i,n){if(1&i&&(e.TgZ(0,"div",2),e._UZ(1,"app-sourcing-type-dropdown",14),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("control",t.formCtrls.resource_Type)("submitted",t.submitted)("filter",!0)}}function be(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",2)(1,"submit-btn",15),e.NdJ("onClick",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.update())}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("id",t.formCtrls.id.value)("color",t.btn.darkBlue)("iconPositionBefore",!1)}}let F=(()=>{class i extends h.U{constructor(t){super(),this.candidateService=t,this.changeDescriptionInfo=new e.vpe,this.isUpdate=new e.vpe,this.candidateId=0,this.submitted=!1,this.constants=R.g,this.isInternal=!0,this.isEgyptian=!1,this.mainNationalidValidators=[l.kI.required,_.w.whiteSpace],this.candidateService.submitted$.subscribe(a=>this.submitted=a),this.candidateId=y.L.candidateId$.getValue(),this.activatedRoute.params.subscribe(a=>{Number(a.requestId)>0&&(this.isInternal=!1)})}onChangeBusinessAndCompanyId(){this.candidateId>0&&this.checkNoBusinessOrCompany()?this.getCandidateById():this.invalidRequiredCount()}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],ar_Name:[null,[l.kI.required,_.w.whiteSpace]],en_Name:[null,[l.kI.required,_.w.whiteSpace]],code:[null],selectedCountry:[null],national_Id:[null,this.mainNationalidValidators],birthDate:[null],hireDate:[null,[l.kI.required]],gender_ID:[null],religioN_ID:[null],resource_Type:[null],resource_Name:[null]}),this.candidateId||this.form.valueChanges.subscribe(t=>{this.invalidRequiredCount(),this.candidateService.candidateData$.next({...this.candidateService.candidateData$.getValue(),GeneralData:this.getGeneralData()})})}get formCtrls(){return this.form.controls}getCandidateById(){this.showLoading(),this.candidateService.candidate$.subscribe(t=>{this.form.patchValue(t),console.log("candidate",t),this.formCtrls.selectedCountry.setValue(t.nationality?.id),this.formCtrls.gender_ID.setValue(t.gender?.id),this.formCtrls.religioN_ID.setValue(t.religion?.id),this.formCtrls.resource_Type.setValue(t.resource_Type?.id),this.changeDescription(!0,0),this.hideLoading()})}getGeneralData(){let t={Core_Person:{ar_Name:this.form.value.ar_Name,en_Name:this.form.value.en_Name,code:this.form.value.code??Math.floor(1e4*Math.random()).toString(),nationalid:this.form.value.national_Id,dob:m.M6.mapDateReverse(this.form.value.birthDate),hireDate:m.M6.mapDateReverse(this.form.value.hireDate),gender_ID:this.form.value.gender_ID,religioN_ID:this.form.value.religioN_ID},selectedCountry:this.form.value.selectedCountry,resource_Type:this.form.value.resource_Type,resource_Name:this.form.value.resource_Name};return this.candidateId>0&&(t.Core_Person.id=this.form.value.id),t}update(){this.submitted=!0,this.form.valid&&(this.showLoading(),this.candidateService.update(this.getGeneralData()).subscribe(t=>{t.message.messageType==c.u.Success?(this.updateSuccessfullyMsg("candidateUpdated"),this.isUpdate.emit(!1)):this.errorList(t?.message?.messages),this.hideLoading()}))}changeDescription(t,a){this.changeDescriptionInfo.emit({isDone:t,noOfRequiredInputs:a})}invalidRequiredCount(){let t=m.M6.noOfInvalidAndRequiredInputs(this.form);this.changeDescription(0==t,t),this.candidateService.isDone$.next({...this.candidateService.isDone$.getValue(),GeneralData:0==t})}onChangeNationality(t){t.length>0&&(t[0].ar_Name.includes("\u0645\u0635\u0631")||t[0].en_NAme.toLowerCase().includes("egypt"))?(this.isEgyptian=!0,this.formCtrls.national_Id.setValidators([...this.mainNationalidValidators,I.dN.number,_.w.Length(R.g.nationalId)])):(this.isEgyptian=!1,this.formCtrls.national_Id.setValidators(this.mainNationalidValidators)),this.formCtrls.national_Id.updateValueAndValidity()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(y.L))},i.\u0275cmp=e.Xpm({type:i,selectors:[["candidate-general-info-form"]],outputs:{changeDescriptionInfo:"changeDescriptionInfo",isUpdate:"isUpdate"},features:[e.qOj],decls:23,vars:22,consts:[[1,"candidate-form",2,"margin-bottom","-20px",3,"formGroup"],[1,"row","ptop-5"],[1,"col-lg-3","col-md-4","col-sm-6","col-12"],["label","ar_Name",3,"control","submitted"],["label","en_Name",3,"control","submitted"],[3,"control","submitted","filter","change"],["label","nationalid",3,"control","submitted"],["class","msg-after",4,"ngIf"],["label","dob",3,"control","submitted"],["label","registrationDate",3,"control","submitted"],[3,"control","submitted"],["class","col-lg-3 col-md-4 col-sm-6 col-12",4,"ngIf"],["label","sourcingName",3,"control","submitted"],[1,"msg-after"],[3,"control","submitted","filter"],["icon","fas fa-pen fa-rotate-270","styleClass","btn-block mt-1","label","update",3,"id","color","iconPositionBefore","onClick"]],template:function(t,a){1&t&&(e.TgZ(0,"form",0),e.ynx(1),e.TgZ(2,"div",1)(3,"div",2),e._UZ(4,"app-input",3),e.qZA(),e.TgZ(5,"div",2),e._UZ(6,"app-input",4),e.qZA(),e.TgZ(7,"div",2)(8,"app-nationality-dropdown",5),e.NdJ("change",function(s){return a.onChangeNationality(s)}),e.qZA()(),e.TgZ(9,"div",2)(10,"app-input",6),e.YNc(11,he,2,1,"ng-container",7),e.qZA()(),e.TgZ(12,"div",2),e._UZ(13,"app-datepicker",8),e.qZA(),e.TgZ(14,"div",2),e._UZ(15,"app-datepicker",9),e.qZA(),e.TgZ(16,"div",2),e._UZ(17,"app-gender-dropdown",10),e.qZA(),e.YNc(18,fe,2,3,"div",11),e.YNc(19,_e,2,3,"div",11),e.TgZ(20,"div",2),e._UZ(21,"app-input",12),e.qZA(),e.YNc(22,be,2,3,"div",11),e.qZA(),e.BQk(),e.qZA()),2&t&&(e.Q6J("formGroup",a.form),e.xp6(4),e.Q6J("control",a.formCtrls.ar_Name)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.en_Name)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.selectedCountry)("submitted",a.submitted)("filter",!0),e.xp6(2),e.Q6J("control",a.formCtrls.national_Id)("submitted",a.submitted),e.xp6(1),e.Q6J("ngIf",a.isEgyptian),e.xp6(2),e.Q6J("control",a.formCtrls.birthDate)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.hireDate)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.gender_ID)("submitted",a.submitted),e.xp6(1),e.Q6J("ngIf",a.isInternal),e.xp6(1),e.Q6J("ngIf",a.isInternal),e.xp6(2),e.Q6J("control",a.formCtrls.resource_Name)("submitted",a.submitted),e.xp6(1),e.Q6J("ngIf",a.candidateId>0))},dependencies:[p.O5,Q.Q,A.a,q.p,k.a,me.w,ue.O,ge.$,l._Y,l.JL,l.sg]}),i})();var ve=r(51170);function Ce(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"mat-expansion-panel",2,3)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"candidate-tab-description",4),e.qZA(),e.TgZ(7,"candidate-general-info-form",5),e.NdJ("changeDescriptionInfo",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.changeDescriptionInfo(o))}),e.qZA()()}if(2&i){const t=e.MAs(1),a=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,4,"generalInfo"),""),e.xp6(2),e.Q6J("isClosedTab",!t.expanded)("isDone",null==a.descriptionInfo?null:a.descriptionInfo.isDone)("noOfRequiredInputs",null==a.descriptionInfo?null:a.descriptionInfo.noOfRequiredInputs)}}function Te(i,n){1&i&&(e.TgZ(0,"mat-card")(1,"mat-card-title"),e._uU(2),e.ALo(3,"titlecase"),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"mat-divider"),e.TgZ(6,"mat-card-content",6),e._UZ(7,"candidate-general-info-form"),e.qZA()()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,e.lcZ(4,3,"generalInfo")),""))}let Ie=(()=>{class i extends h.U{constructor(){super(),this.isView=!1}ngOnInit(){}changeDescriptionInfo(t){this.descriptionInfo={isDone:t.isDone,noOfRequiredInputs:t.noOfRequiredInputs}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["candidate-general-info"]],inputs:{isView:"isView"},features:[e.qOj],decls:2,vars:2,consts:[["expanded","",4,"ngIf"],[4,"ngIf"],["expanded",""],["tab",""],[3,"isClosedTab","isDone","noOfRequiredInputs"],[3,"changeDescriptionInfo"],[1,"mt-5"]],template:function(t,a){1&t&&(e.YNc(0,Ce,8,6,"mat-expansion-panel",0),e.YNc(1,Te,8,5,"mat-card",1)),2&t&&(e.Q6J("ngIf",!a.isView),e.xp6(1),e.Q6J("ngIf",a.isView))},dependencies:[p.O5,d.a8,d.dn,d.n5,J.d,f.ib,f.yz,f.yK,F,ve.X,p.rS,v.X$]}),i})();var xe=r(8574),ye=r(82498),Ae=r(30278),Ze=r(80192),we=r(28322),Se=r(9271),Le=r(24238);const De=["stepper"];function Je(i,n){if(1&i&&(e.TgZ(0,"div",14)(1,"div",15)(2,"span",16),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"span",17),e._uU(6),e.qZA()(),e.TgZ(7,"div",18)(8,"span",16),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"span",17),e._uU(12),e.ALo(13,"date"),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,4,"jobVacancy")," "),e.xp6(3),e.hij(": ",t.jobTitle,""),e.xp6(3),e.hij(" ",e.lcZ(10,6,"validTill")," "),e.xp6(3),e.hij(" : ",e.xi3(13,8,t.requestEndData,"d MMM y")," ")}}function qe(i,n){1&i&&(e.TgZ(0,"div",14)(1,"div",15),e._UZ(2,"p-skeleton",19)(3,"p-skeleton",20),e.qZA(),e.TgZ(4,"div",18),e._UZ(5,"p-skeleton",19)(6,"p-skeleton",20),e.qZA()())}function Ne(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"div",11),e._UZ(2,"page-title",12),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Je,14,11,"div",13),e.YNc(5,qe,7,0,"div",13),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.hYB("parentTitle","",e.lcZ(3,5,"vacancies")," / ",t.jobTitle,""),e.Q6J("id",0),e.xp6(2),e.Q6J("ngIf",t.isLoaded),e.xp6(1),e.Q6J("ngIf",!t.isLoaded)}}function Pe(i,n){if(1&i&&(e._UZ(0,"page-title",21),e.ALo(1,"translate"),e.ALo(2,"translate")),2&i){const t=e.oxw();e.hYB("parentTitle","",e.lcZ(1,5,"recruitment")," / ",e.lcZ(2,7,"candidates"),""),e.MGl("parentTitleLink","/recruitment/",t.moduleId,"/candidate"),e.Q6J("id",0)("parentLinkParams",t.pageParams)}}function Re(i,n){if(1&i&&e._UZ(0,"app-add-new-btn",23),2&i){const t=e.oxw(2);e.MGl("url","/recruitment/",t.moduleId,"/candidate/add"),e.Q6J("params",t.parentParam)}}function Qe(i,n){if(1&i&&(e.ynx(0),e.YNc(1,Re,1,2,"app-add-new-btn",22),e._UZ(2,"app-back-btn",23),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.requestId>0),e.xp6(1),e.MGl("url","/recruitment/",t.moduleId,"/candidate"),e.Q6J("params",t.pageParams)}}function Ue(i,n){1&i&&e._UZ(0,"i",24)}function Oe(i,n){1&i&&e._UZ(0,"i",24)}function je(i,n){1&i&&e._UZ(0,"i",24)}function Me(i,n){1&i&&e._UZ(0,"candidate-related-requests-info")}function ke(i,n){1&i&&e._UZ(0,"candidate-reference-info")}let G=(()=>{class i extends h.U{constructor(t,a,o){super(),this.candidateService=t,this.recruitmentRequestService=a,this.dialog=o,this.requestId=0,this.isInternal=!0,this.isGeneralCompleted=!1,this.isEducationCompleted=!1,this.isWorkExperienceCompleted=!1,this.isLoaded=!1,this.candidateService.isDone$.subscribe(s=>{this.isGeneralCompleted=s.GeneralData&&s.MaritalData&&s.MilitaryData&&s.AddressData&&s.ContactData,this.isEducationCompleted=s.EducationData&&s.TrainingData&&s.CertificationData,this.isWorkExperienceCompleted=s.WorkExperincesData&&s.relatedData&&s.RefrenceData&&s.DocumentData})}onChangeBusinessAndCompanyId(){this.requestId>0&&this.checkNoBusinessOrCompany()&&this.getRequestIdById()}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.requestId=Number(t.requestId??0),this.requestId>0&&(this.isInternal=!1,this.candidateService.isDone$.next({...this.candidateService.isDone$.getValue(),relatedData:!0,RefrenceData:!0}),this.candidateService.candidateData$.next({...this.candidateService.candidateData$.getValue(),relatedData:[{request_ID:this.requestId}]}))})}stepChanged(){this.stepper.selected.interacted=!1}submit(){this.candidateService.submitted$.next(!0);let t=this.candidateService.isDone$.getValue();if(console.log("CreatCandidateRequest=>",this.candidateService.candidateData$.getValue()),Object.keys(t).every(a=>1==t[a])){let a=this.candidateService.candidateData$.getValue(),o=m.M6.objectToFormData(a);this.saveGeneral(o)}else this.warning("pleaseEnterAllRequiredData")}saveGeneral(t){this.showLoading(),this.candidateService.createGeneral(t).subscribe(a=>{a?.message?.messageType==c.u.Success?this.isInternal?(this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newCandidateAdded"),this.router.navigate([`/recruitment/${this.moduleId}/candidate`])):this.openDoneDialog():this.errorList(a.message.messages),this.hideLoading()})}openDoneDialog(){return this.dialog.open(le,{autoFocus:!1,disableClose:!0,panelClass:"candidate-done-dialog"}).afterClosed()}getRequestIdById(){this.isLoaded=!1,this.recruitmentRequestService.getById(this.requestId).subscribe(t=>{t.message.messageType==c.u.Success?(this.jobTitle=this.msgTranslate(t.data[0].job_Title.ar_Name,t.data[0].job_Title.en_Name),this.requestEndData=t.data[0].request.to_Date,this.isLoaded=!0):this.errorList(t?.message?.messages)})}refreshPage(){location.reload()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(y.L),e.Y36(S.O),e.Y36(x.uw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-candidate-core"]],viewQuery:function(t,a){if(1&t&&e.Gf(De,5),2&t){let o;e.iGM(o=e.CRH())&&(a.stepper=o.first)}},features:[e.qOj],decls:34,vars:29,consts:[[1,"add-candidate","title-no-margin","title-section","fixed-title"],[4,"ngIf","ngIfElse"],["internal",""],[4,"ngIf"],[1,"has-fixed-title"],[1,"candidate-stepper",3,"linear","disableRipple","selectionChange"],["stepper",""],[3,"label","completed"],["matStepperIcon","edit"],["multi","",1,"expantion-add-forms"],[3,"stepper","parentParam","showCancel","returnAfterFinish","finish"],[2,"margin","0 20px"],["addTitle","","title","apply",3,"id","parentTitle"],["class","candidate-header-container",4,"ngIf"],[1,"candidate-header-container"],[1,"header-item","start-value"],[1,"header-title"],[1,"header-value"],[1,"header-item","center-value"],["width","8rem","height","2rem"],["width","12rem","height","2rem",1,"value"],["addTitle","addCandidate","title","add",3,"id","parentTitle","parentTitleLink","parentLinkParams"],[3,"url","params",4,"ngIf"],[3,"url","params"],[1,"fas","fa-check"]],template:function(t,a){if(1&t&&(e.TgZ(0,"mat-card-title",0),e.YNc(1,Ne,6,7,"ng-container",1),e.YNc(2,Pe,3,9,"ng-template",null,2,e.W1O),e.YNc(4,Qe,3,3,"ng-container",3),e.qZA(),e.TgZ(5,"mat-card-content",4)(6,"mat-stepper",5,6),e.NdJ("selectionChange",function(){return a.stepChanged()}),e.TgZ(8,"mat-step",7),e.ALo(9,"titlecase"),e.ALo(10,"translate"),e.YNc(11,Ue,1,0,"ng-template",8),e.TgZ(12,"mat-accordion",9),e._UZ(13,"candidate-general-info")(14,"candidate-basic-info")(15,"candidate-contact-info"),e.qZA()(),e.TgZ(16,"mat-step",7),e.ALo(17,"titlecase"),e.ALo(18,"translate"),e.YNc(19,Oe,1,0,"ng-template",8),e.TgZ(20,"mat-accordion",9),e._UZ(21,"candidate-education-info")(22,"candidate-training-info")(23,"candidate-certification-info"),e.qZA()(),e.TgZ(24,"mat-step",7),e.ALo(25,"titlecase"),e.ALo(26,"translate"),e.YNc(27,je,1,0,"ng-template",8),e.TgZ(28,"mat-accordion",9),e._UZ(29,"candidate-work-experience-info"),e.YNc(30,Me,1,0,"candidate-related-requests-info",3),e.YNc(31,ke,1,0,"candidate-reference-info",3),e._UZ(32,"candidate-document-info"),e.qZA()()()(),e.TgZ(33,"steps-footer",10),e.NdJ("finish",function(){return a.submit()}),e.qZA()),2&t){const o=e.MAs(3),s=e.MAs(7);e.xp6(1),e.Q6J("ngIf",!a.isInternal)("ngIfElse",o),e.xp6(3),e.Q6J("ngIf",a.isInternal),e.xp6(2),e.Q6J("linear",!1)("disableRipple",!0),e.xp6(2),e.s9C("label",e.lcZ(9,17,e.lcZ(10,19,"general"))),e.Q6J("completed",a.isGeneralCompleted),e.xp6(8),e.s9C("label",e.lcZ(17,21,e.lcZ(18,23,"education"))),e.Q6J("completed",a.isEducationCompleted),e.xp6(8),e.s9C("label",e.lcZ(25,25,e.lcZ(26,27,a.isInternal?"jobInfo":"workExperience"))),e.Q6J("completed",a.isWorkExperienceCompleted),e.xp6(6),e.Q6J("ngIf",a.isInternal),e.xp6(1),e.Q6J("ngIf",a.isInternal),e.xp6(2),e.Q6J("stepper",s)("parentParam",a.parentParam)("showCancel",!!a.isInternal)("returnAfterFinish",!1)}},dependencies:[p.O5,L.a,D.J,C.T,de.j,d.dn,d.n5,P.C0,P.Vq,P.z9,f.pp,M.O,ce.Y,pe.g,Ie,xe.g,ye.d,Ae.$,Ze.o,we.l,Se.y,Le.L,p.rS,p.uU,v.X$],styles:[".fixed-title[_ngcontent-%COMP%]{display:block}  .candidate-stepper.candidate-stepper.mat-stepper-horizontal .mat-horizontal-content-container{padding:5px}  .candidate-stepper{padding-bottom:30px}  .add-candidate .mat-card-title .page-title{padding-left:20px!important}  .add-candidate .candidate-header-container{display:flex;gap:30px;margin:0 20px}  .add-candidate .candidate-header-container .header-item{display:inline-block}  .add-candidate .candidate-header-container .header-item .header-title{font-size:20px;color:#4e4e4e}  .add-candidate .candidate-header-container .header-item .header-value{font-size:20px;color:#101317}  .add-candidate .candidate-header-container .center-value{margin:auto}  .add-candidate .candidate-header-container p-skeleton div{display:inline-block}  .add-candidate .candidate-header-container p-skeleton.value{margin:0 30px}  .add-candidate.title-no-margin #back_btn,   .add-candidate.title-no-margin #add_new_btn{margin-right:20px}"]}),i})();var Fe=r(50377),B=r(56500),Ge=r(88613),Be=r(85443),Ee=r(15362),Ye=r(50260),ze=r(60887),Ve=r(25677),u=r(30671),E=r(6314),$e=r(92972),T=r(93410),Y=r(93665),He=r(38368),Xe=r(40445),z=r(3848),Ke=r(2138),We=r(75474);function et(i,n){if(1&i&&(e.TgZ(0,"div",8),e._UZ(1,"app-view-data-row-item",9)(2,"app-view-data-row-item",10)(3,"app-view-data-row-item",11)(4,"app-view-data-row-item",12)(5,"app-view-data-row-item",13)(6,"app-view-data-row-item",14)(7,"app-view-data-row-item",15)(8,"app-view-data-row-item",16),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("value",null==t.jobTitle?null:t.jobTitle.ar_Name),e.xp6(1),e.Q6J("value",null==t.jobTitle?null:t.jobTitle.en_Name),e.xp6(1),e.Q6J("value",null==t.jobTitle?null:t.jobTitle.jobFamily),e.xp6(1),e.Q6J("value",null==t.jobTitle?null:t.jobTitle.parentJobTitleName),e.xp6(1),e.Q6J("value",null==t.jobTitle?null:t.jobTitle.remainingVacentPlaces),e.xp6(1),e.Q6J("value",null==t.jobTitle||null==t.jobTitle.core_Grade?null:t.jobTitle.core_Grade.miN_SALARY),e.xp6(1),e.Q6J("value",null==t.jobTitle||null==t.jobTitle.core_Grade?null:t.jobTitle.core_Grade.middel_Salary),e.xp6(1),e.Q6J("value",null==t.jobTitle||null==t.jobTitle.core_Grade?null:t.jobTitle.core_Grade.maX_SALARY)}}function tt(i,n){1&i&&e._UZ(0,"app-view-card-row-skeleton")}function at(i,n){if(1&i&&(e.TgZ(0,"div",8),e._UZ(1,"app-view-data-row-item",17)(2,"app-view-data-row-item",18)(3,"app-view-data-row-item",19)(4,"app-view-data-row-item",20)(5,"app-view-data-row-item",21)(6,"app-view-data-row-item",22),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("value",null==t.jobTitle||null==t.jobTitle.core_Job_Description?null:t.jobTitle.core_Job_Description.joB_PURPOSE)("textEditor",!0),e.xp6(1),e.Q6J("value",null==t.jobTitle||null==t.jobTitle.core_Job_Description?null:t.jobTitle.core_Job_Description.responsibilitieS_DUTIES)("textEditor",!0),e.xp6(1),e.Q6J("value",null==t.jobTitle||null==t.jobTitle.core_Job_Description?null:t.jobTitle.core_Job_Description.knowledgE_SKILLS)("textEditor",!0),e.xp6(1),e.Q6J("value",null==t.jobTitle||null==t.jobTitle.core_Job_Description?null:t.jobTitle.core_Job_Description.education)("textEditor",!0),e.xp6(1),e.Q6J("value",null==t.jobTitle||null==t.jobTitle.core_Job_Description?null:t.jobTitle.core_Job_Description.experience)("textEditor",!0),e.xp6(1),e.Q6J("value",null==t.jobTitle||null==t.jobTitle.core_Job_Description?null:t.jobTitle.core_Job_Description.workinG_CONDITIONS)("textEditor",!0)}}function it(i,n){1&i&&e._UZ(0,"app-view-card-row-skeleton")}function nt(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"div",8),e._UZ(2,"app-view-data-row-item",23)(3,"app-view-data-row-item",24)(4,"app-view-data-row-item",25),e.qZA(),e.TgZ(5,"div",8),e._UZ(6,"app-view-data-row-item",26)(7,"app-view-data-row-item",27)(8,"app-view-data-row-item",28),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("value",t.jobTitle.managerPercentage)("textEditor",!0),e.xp6(1),e.Q6J("value",t.jobTitle.internalColleaguePercentage)("textEditor",!0),e.xp6(1),e.Q6J("value",t.jobTitle.externalColleaguePercentage)("textEditor",!0),e.xp6(2),e.Q6J("value",t.jobTitle.subordinatePercentage)("textEditor",!0),e.xp6(1),e.Q6J("value",t.jobTitle.mySelfPercentage)("textEditor",!0),e.xp6(1),e.Q6J("value",t.jobTitle.customerPercentage)("textEditor",!0)}}function ot(i,n){1&i&&e._UZ(0,"app-view-card-row-skeleton")}let st=(()=>{class i extends h.U{constructor(t){super(),this.jobTitleService=t,this.jobTitleId=0,this.isLoaded=!1,this.kpiMandatoryColomns=["kpi"],this.kpiOptionalColomns=[]}ngOnInit(){}ngOnChanges(t){t.jobTitleId?.currentValue>0&&this.getDetailsById()}onChangeBusinessAndCompanyId(){this.jobTitleId>0&&this.checkNoBusinessOrCompany()&&this.getDetailsById()}getDetailsById(){this.jobTitle=null,this.kpiDataSource=new u.by(null),this.isLoaded=!1,this.jobTitleService.getDetailsById(this.jobTitleId).subscribe(t=>{t.message.messageType==c.u.Success?(this.jobTitle=(0,E.gc)(t.data)[0],this.kpiDataSource=new u.by((0,E.Uh)(t.data[0].core_Job_Title_KPI)),this.isLoaded=!0):this.errorList(t?.message?.messages)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36($e._))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-recruitment-job-details"]],inputs:{jobTitleId:"jobTitleId"},features:[e.qOj,e.TTD],decls:32,vars:49,consts:[[1,"mtop-20"],[1,"col-12","w-100","view-tabs-group",3,"dir"],[3,"label"],[1,"ptop-10"],["class","view-data-row-container",4,"ngIf"],[4,"ngIf"],[3,"jobId","showIndexOnly"],[1,"table-in-forms","small-table",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","showPaginator","showFilter","showSpaceTop"],[1,"view-data-row-container"],["label","ar_Name",1,"w-md-20","mb-2",3,"value"],["label","en_Name",1,"w-md-20","mb-2",3,"value"],["label","jobFamily",1,"w-md-20","mb-2",3,"value"],["label","parentJobTitle",1,"w-md-20","mb-2",3,"value"],["label","remainingVacentPlaces",1,"w-md-20","mb-2",3,"value"],["label","miN_SALARY",1,"w-md-20","mb-2",3,"value"],["label","middel_Salary",1,"w-md-20","mb-2",3,"value"],["label","maX_SALARY",1,"w-md-20","mb-2",3,"value"],["label","jobPurpose",1,"col-sm-4","col-6","px-0","mb-2",3,"value","textEditor"],["label","responsibilitiesDuties",1,"col-sm-4","col-6","px-0","mb-2",3,"value","textEditor"],["label","knowledgeSkills",1,"col-sm-4","col-6","px-0","mb-2",3,"value","textEditor"],["label","education",1,"col-sm-4","col-6","px-0","mb-2",3,"value","textEditor"],["label","experience",1,"col-sm-4","col-6","px-0","mb-2",3,"value","textEditor"],["label","workingConditions",1,"col-sm-4","col-6","px-0","mb-2",3,"value","textEditor"],["label","manager%",1,"col","mb-2",3,"value","textEditor"],["label","internalDepartment%",1,"col","mb-2",3,"value","textEditor"],["label","externalDepartment%",1,"col","mb-2",3,"value","textEditor"],["label","subordinate%",1,"col","mb-2",3,"value","textEditor"],["label","mySelf%",1,"col","mb-2",3,"value","textEditor"],["label","customer%",1,"col","mb-2",3,"value","textEditor"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card",0)(1,"mat-tab-group",1)(2,"mat-tab",2),e.ALo(3,"titlecase"),e.ALo(4,"translate"),e.TgZ(5,"mat-card-content",3),e.YNc(6,et,9,8,"div",4),e.YNc(7,tt,1,0,"app-view-card-row-skeleton",5),e.qZA()(),e.TgZ(8,"mat-tab",2),e.ALo(9,"titlecase"),e.ALo(10,"translate"),e.TgZ(11,"mat-card-content",3),e.YNc(12,at,7,12,"div",4),e.YNc(13,it,1,0,"app-view-card-row-skeleton",5),e.qZA()(),e.TgZ(14,"mat-tab",2),e.ALo(15,"titlecase"),e.ALo(16,"translate"),e._UZ(17,"app-job-career-path",6),e.qZA(),e.TgZ(18,"mat-tab",2),e.ALo(19,"titlecase"),e.ALo(20,"translate"),e._UZ(21,"app-job-competences",6),e.qZA(),e.TgZ(22,"mat-tab",2),e.ALo(23,"uppercase"),e.ALo(24,"translate"),e._UZ(25,"app-material-table",7),e.qZA(),e.TgZ(26,"mat-tab",2),e.ALo(27,"titlecase"),e.ALo(28,"translate"),e.TgZ(29,"mat-card-content",3),e.YNc(30,nt,9,12,"ng-container",5),e.YNc(31,ot,1,0,"app-view-card-row-skeleton",5),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("dir",a.languageService.isArabic?"rtl":"ltr"),e.xp6(1),e.s9C("label",e.lcZ(3,25,e.lcZ(4,27,"generalInfo"))),e.xp6(4),e.Q6J("ngIf",a.isLoaded),e.xp6(1),e.Q6J("ngIf",!a.isLoaded),e.xp6(1),e.s9C("label",e.lcZ(9,29,e.lcZ(10,31,"jobDescription"))),e.xp6(4),e.Q6J("ngIf",a.isLoaded),e.xp6(1),e.Q6J("ngIf",!a.isLoaded),e.xp6(1),e.s9C("label",e.lcZ(15,33,e.lcZ(16,35,"careerPath"))),e.xp6(3),e.Q6J("jobId",a.jobTitleId)("showIndexOnly",!0),e.xp6(1),e.s9C("label",e.lcZ(19,37,e.lcZ(20,39,"competences"))),e.xp6(3),e.Q6J("jobId",a.jobTitleId)("showIndexOnly",!0),e.xp6(1),e.s9C("label",e.lcZ(23,41,e.lcZ(24,43,"kpi"))),e.xp6(3),e.Q6J("isLoaded",a.isLoaded)("dataSource",a.kpiDataSource)("mandatoryColomns",a.kpiMandatoryColomns)("optionalColomns",a.kpiOptionalColomns)("actions",a.rowFunctions)("showPaginator",!1)("showFilter",!1)("showSpaceTop",!1),e.xp6(1),e.s9C("label",e.lcZ(27,45,e.lcZ(28,47,"appraisalMethod"))),e.xp6(4),e.Q6J("ngIf",a.isLoaded),e.xp6(1),e.Q6J("ngIf",!a.isLoaded))},dependencies:[p.O5,T.I,Y.l,He.I,Xe.Lv,z.SP,z.uX,d.a8,d.dn,Ke.x,We.T,p.gd,p.rS,v.X$]}),i})();function rt(i,n){if(1&i&&e._UZ(0,"app-add-new-btn",4),2&i){const t=e.oxw();e.MGl("url","/recruitment/",t.moduleId,"/request/add"),e.Q6J("params",t.parentParam)}}function lt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",30),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.clearForm())}),e.qZA()}}let V=(()=>{class i extends h.U{constructor(t,a){super(),this.recruitmentRequestService=t,this.organizationTypesService=a,this.requestId=0,this.submitted=!1,this.showJobTitleDetails=!1}onChangeBusinessAndCompanyId(){this.requestId>0&&this.checkNoBusinessOrCompany()&&this.getRequestById()}ngOnInit(){this.form=this.fb.group({id:[this.requestId,{nonNullable:!0}],org_type_ID:[null,[l.kI.required]],org_ID:[null,[l.kI.required]],job_Title_ID:[null,[l.kI.required]],employementType_ID:[null,[l.kI.required]],request_Reason_ID:[null,[l.kI.required]],gender_ID:[null,[l.kI.required]],emp_No:[null,[I.dN.gte(1)]],from_Date:[null,[l.kI.required]],to_Date:[null,[l.kI.required]],other_requirment:[null],note:[null]},{validator:[_.w.compareDates("from_Date","to_Date")]}),this.activatedRoute.params.subscribe(t=>{this.requestId=Number(t.id??0)})}get formCtrls(){return this.form.controls}getRequestById(){this.showLoading("form"),this.recruitmentRequestService.getById(this.requestId).subscribe(t=>{t.message.messageType==c.u.Success?(this.form.patchValue(t.data[0].request),this.formCtrls.gender_ID.setValue(t.data[0].gender_ID),this.getOrgTypeByOrgId(t.data[0].org.id,t.data[0].job_Title.id)):(this.errorList(t?.message?.messages),this.hideLoading("form"))})}getOrgTypeByOrgId(t,a){this.organizationTypesService.GetAll_CurrentStructure(t).subscribe(o=>{o.message.messageType==c.u.Success?(this.formCtrls.org_type_ID.setValue(o.data[0].id),this.formCtrls.org_ID.setValue(t),this.formCtrls.job_Title_ID.setValue(a),this.hideLoading("form")):this.errorList(o?.message?.messages)})}submit(){if(this.submitted=!0,this.form.valid){let t={rec_Request:{id:this.form.value.id,emp_No:this.form.value.emp_No,from_Date:m.M6.mapDateReverse(this.form.value.from_Date),to_Date:m.M6.mapDateReverse(this.form.value.to_Date),request_Reason_ID:this.form.value.request_Reason_ID,employementType_ID:this.form.value.employementType_ID,other_requirment:this.form.value.other_requirment,note:this.form.value.note},org_ID:this.form.value.org_ID,job_Title_ID:this.form.value.job_Title_ID,gender_ID:this.form.value.gender_ID};0==t.rec_Request.id?this.create(t):this.update(t)}}create(t){this.showLoading("form"),this.recruitmentRequestService.create(t).subscribe(a=>{a?.message?.messageType==c.u.Success?(this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newRequestAdded"),this.requestId=a.data.rec_Request.id,this.formCtrls.id.setValue(this.requestId),this.navigateTo(`/recruitment/${this.moduleId}/request/edit/${this.requestId}`)):this.errorList(a?.message?.messages),this.hideLoading("form")})}update(t){this.showLoading("form"),this.recruitmentRequestService.update(t).subscribe(a=>{a?.message?.messageType==c.u.Success?this.updateSuccessfullyMsg("requestUpdated"):this.errorList(a?.message?.messages),this.hideLoading("form")})}clearForm(){this.form.reset(),this.submitted=!1}onChangeJobTitle(t){this.showJobTitleDetails=t?.length>0}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(S.O),e.Y36(Fe.w))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-recruitment-request"]],features:[e.qOj],decls:48,vars:61,consts:[[3,"name"],[1,"title-no-margin","title-section","fixed-title"],["addTitle","addRecruitmentRequest","editTitle","editRecruitmentRequest",3,"id","parentTitle","parentTitleLink","title","parentLinkParams"],[3,"url","params",4,"ngIf"],[3,"url","params"],[1,"row"],[1,"col-12","has-fixed-title"],[1,"form-card"],["container",""],[1,"title-no-margin"],["title","generalInfoAboutRequest"],[1,"container-fluid","mtop-20"],[1,"col-12"],[3,"formGroup"],[1,"col-md-6","col-lg-3","col-12"],[3,"control","submitted","filter"],[3,"control","orgTypeControl","submitted","filter"],[3,"control","organizationControl","organizationControlRequired","submitted","filter","change"],["styleClass","mtop-12 mbottom-12",3,"label","icon","color","iconPositionBefore","disabled","onClick"],[3,"control","submitted","inculdeBoth"],["type","number","label","vacantPlaces",3,"control","submitted"],["label","fromDateExpected",3,"control","submitted"],["label","toDateExpected",3,"control","submitted"],["label","otherRequirment",3,"control","submitted"],["label","notes",3,"control","submitted"],["label","jobDescription","initialContent","initial content","footerId","note-footer",3,"control","submitted"],["align","end"],[3,"click",4,"ngIf"],["icon","pi pi-plus-circle",3,"id","color","iconPositionBefore","onClick"],[3,"jobTitleId"],[3,"click"]],template:function(t,a){1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"mat-card-title",1),e._UZ(2,"page-title",2),e.ALo(3,"translate"),e.ALo(4,"translate"),e.YNc(5,rt,1,2,"app-add-new-btn",3),e._UZ(6,"app-back-btn",4),e.qZA(),e.TgZ(7,"div",5)(8,"div",6)(9,"mat-card",7,8)(11,"mat-card-title",9),e._UZ(12,"page-title",10),e.qZA(),e.TgZ(13,"mat-card-content",11)(14,"div",5)(15,"div",12)(16,"form",13)(17,"div",5)(18,"div",14),e._UZ(19,"app-org-types-dropdown-current-structure",15),e.qZA(),e.TgZ(20,"div",14),e._UZ(21,"app-organization-by-org-type-dropdown",16),e.qZA(),e.TgZ(22,"div",14)(23,"app-job-title-by-org-dropdown",17),e.NdJ("change",function(s){return a.onChangeJobTitle(s)}),e.qZA()(),e.TgZ(24,"div",14)(25,"app-button",18),e.NdJ("onClick",function(){return a.showJobTitleDetails=!a.showJobTitleDetails}),e.qZA()(),e.TgZ(26,"div",14),e._UZ(27,"app-employment-type-dropdown",15),e.qZA(),e.TgZ(28,"div",14),e._UZ(29,"app-request-reason-dropdown",15),e.qZA(),e.TgZ(30,"div",14),e._UZ(31,"app-gender-dropdown",19),e.qZA(),e.TgZ(32,"div",14),e._UZ(33,"app-input",20),e.qZA(),e.TgZ(34,"div",14),e._UZ(35,"app-datepicker",21),e.qZA(),e.TgZ(36,"div",14),e._UZ(37,"app-datepicker",22),e.qZA(),e.TgZ(38,"div",14),e._UZ(39,"app-input",23),e.qZA(),e.TgZ(40,"div",14),e._UZ(41,"app-input",24),e.qZA(),e.TgZ(42,"div",12),e._UZ(43,"app-text-editor",25),e.qZA()()()()()(),e.TgZ(44,"mat-card-actions",26),e.YNc(45,lt,1,0,"reset-form-btn",27),e.TgZ(46,"submit-btn",28),e.NdJ("onClick",function(){return a.submit()}),e.qZA()()(),e._UZ(47,"app-add-recruitment-job-details",29),e.qZA()()),2&t&&(e.Q6J("name","form"),e.xp6(2),e.hYB("parentTitle","",e.lcZ(3,57,"recruitment")," / ",e.lcZ(4,59,"recruitmentRequest"),""),e.MGl("parentTitleLink","/recruitment/",a.moduleId,"/request"),e.Q6J("id",a.requestId)("title",a.formCtrls.id.value>0?"edit":"add")("parentLinkParams",a.pageParams),e.xp6(3),e.Q6J("ngIf",a.requestId>0),e.xp6(1),e.MGl("url","/recruitment/",a.moduleId,"/request/index"),e.Q6J("params",a.pageParams),e.xp6(10),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.org_type_ID)("submitted",a.submitted)("filter",!0),e.xp6(2),e.Q6J("control",a.formCtrls.org_ID)("orgTypeControl",a.formCtrls.org_type_ID)("submitted",a.submitted)("filter",!0),e.xp6(2),e.Q6J("control",a.formCtrls.job_Title_ID)("organizationControl",a.formCtrls.org_ID)("organizationControlRequired",!0)("submitted",a.submitted)("filter",!0),e.xp6(2),e.Q6J("label",a.showJobTitleDetails?"hideDetails":"showDetails")("icon",a.showJobTitleDetails?"fas fa-chevron-up":"fas fa-chevron-down")("color",a.btn.darkBlue)("iconPositionBefore",!1)("disabled",!a.formCtrls.job_Title_ID.value),e.xp6(2),e.Q6J("control",a.formCtrls.employementType_ID)("submitted",a.submitted)("filter",!0),e.xp6(2),e.Q6J("control",a.formCtrls.request_Reason_ID)("submitted",a.submitted)("filter",!0),e.xp6(2),e.Q6J("control",a.formCtrls.gender_ID)("submitted",a.submitted)("inculdeBoth",!0),e.xp6(2),e.Q6J("control",a.formCtrls.emp_No)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.from_Date)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.to_Date)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.other_requirment)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.note)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.note)("submitted",a.submitted),e.xp6(2),e.Q6J("ngIf",0==a.formCtrls.id.value),e.xp6(1),e.Q6J("id",a.formCtrls.id.value)("color",a.btn.darkBlue)("iconPositionBefore",!1)("id",a.formCtrls.id.value),e.xp6(1),e.ekj("hidden",!a.showJobTitleDetails),e.Q6J("jobTitleId",a.formCtrls.job_Title_ID.value))},dependencies:[p.O5,Q.Q,A.a,L.a,D.J,B.J,q.p,C.T,Ge.d,O.r,d.a8,d.dn,d.n5,d.hq,j.Ro,Be.A,Ee.s,k.a,Ye.v,ze.p,Ve.W,l._Y,l.JL,l.sg,st,v.X$]}),i})();var $=r(87181),H=r(60544),X=r(76411),Z=r(29721);let dt=(()=>{class i extends h.U{constructor(t){super(),this.recruitmentRequestService=t,this.isLoaded=!1,this.mandatoryColomns=["Ser","id","jobTitle","vacantPlaces","fromDateExpected","toDateExpected","notes","actions"],this.optionalColomns=[]}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new u.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}ngOnInit(){}getList(t,a){this.dataSource=new u.by(null),this.isLoaded=!1,this.page.pageIndex=t,a&&(this.page.pageSize=a),this.removePageParams(),this.recruitmentRequestService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(s=>{if(s.message.messageType==c.u.Success){if(0==s.data.length&&t>1)return void this.getList(this.prevPage);this.dataSource=new u.by((0,$.j)(s.data)),this.isLoaded=!0,this.page.length=s.meta.totalItemCount,this.page.meta=s.meta}else this.errorList(s?.message?.messages)})}onDelete(t){this.deleteDialog(`${t.jobTitle} - ${t.fromDateExpected} - ${t.toDateExpected}`).subscribe(o=>{o&&this.delete(t)})}delete(t){this.showLoading(),this.recruitmentRequestService.Delete(t.id).subscribe(a=>{a.message.messageType==c.u.Success?(this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),this.deleteSuccessfullyMsg("requestDeleted")):this.errorList(a?.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(S.O))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-recruitment-request-index"]],features:[e.qOj],decls:8,vars:13,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","recruitmentRequest","parentTitle","recruitment","TitleHasGlobalFunc","",3,"globalFunctions"],[1,"index-card"],[3,"isLoaded","mandatoryColomns","optionalColomns","page","actions","dataSource","exportService","onChangePage","deleteRow"],[3,"title"],[3,"serviceId","moduleId"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.qZA(),e.TgZ(2,"mat-card",2)(3,"mat-card-content")(4,"app-material-table",3),e.NdJ("onChangePage",function(s){return a.getList(s.pageIndex+1,s.pageSize)})("deleteRow",function(s){return a.onDelete(s)}),e.qZA()()(),e.TgZ(5,"side-helping-menu",4),e.ALo(6,"translate"),e._UZ(7,"app-dashboard-display",5),e.qZA()),2&t&&(e.xp6(1),e.Q6J("globalFunctions",a.globalFunctions),e.xp6(3),e.Q6J("isLoaded",a.isLoaded)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("actions",a.rowFunctions)("dataSource",a.dataSource)("exportService",a.recruitmentRequestService),e.xp6(1),e.s9C("title",e.lcZ(6,11,"Dashboard")),e.xp6(2),e.Q6J("serviceId",a.getCurrentServiceId())("moduleId",a.moduleId))},dependencies:[T.I,C.T,H.c,X.b,Z.X,d.a8,d.dn,d.n5,v.X$]}),i})();function K(i){return i.map(n=>({...n,fullName:(0,m._f)(n.ar_Name,n.en_Name),jobTitleName:(0,m._f)(n.jobTitleNameAr,n.jobTitleName),organization:(0,m._f)(n.organizationAr,n.organization),statusProperty:(0,m._f)(n.statusPropertyAr,n.statusProperty),phone:n.contacts?.map(t=>t.value).join(", "),photo:n.img?"/"+n.img:""}))}var W=r(28255);function ct(i,n){1&i&&(e.TgZ(0,"mat-card-title",10)(1,"div",11)(2,"span",12),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"span",12),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"span",12),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"span",12),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"span",13),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"span",14),e._uU(18),e.ALo(19,"translate"),e.qZA()()()),2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,6,"JobRequisitions")," "),e.xp6(3),e.hij(" ",e.lcZ(7,8,"OpenVacances")," "),e.xp6(3),e.hij(" ",e.lcZ(10,10,"NoOfCandidates")," "),e.xp6(3),e.hij(" ",e.lcZ(13,12,"Pending")," "),e.xp6(3),e.hij(" ",e.lcZ(16,14,"Accepted")," "),e.xp6(3),e.hij(" ",e.lcZ(19,16,"Rejected")," "))}function pt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-material-table",17),e.NdJ("onChangePage",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.getList(o.pageIndex+1,o.pageSize))})("deleteRow",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.onDelete(o))}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("isLoaded",t.isLoaded)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("page",t.page)("dataSource",t.dataSource)("actions",t.rowFunctions)("exportService",t.candidateService)}}function mt(i,n){if(1&i&&(e.TgZ(0,"mat-card",15),e.YNc(1,pt,1,7,"app-material-table",16),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isTable)}}function ut(i,n){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.email," ")}}function gt(i,n){if(1&i&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.phone," ")}}const ht=function(i){return{"border-color":i}},ft=function(i){return{parentView:i}},_t=function(i){return{"background-color":i}};function bt(i,n){if(1&i&&(e.TgZ(0,"div",28)(1,"mat-card",29),e._UZ(2,"img",30),e.TgZ(3,"div",31),e._UZ(4,"i",32)(5,"mat-menu",33,34),e.qZA(),e.TgZ(7,"mat-card-content")(8,"h4"),e._uU(9),e.qZA(),e._UZ(10,"mat-divider",35),e.YNc(11,ut,2,1,"p",9),e.YNc(12,gt,2,1,"p",9),e.qZA(),e.TgZ(13,"mat-card-footer",36),e._UZ(14,"i",37),e._uU(15),e.qZA()()()),2&i){const t=n.$implicit,a=e.MAs(6),o=e.oxw(3);e.xp6(1),e.hYB("routerLink","/recruitment/",o.moduleId,"/candidate/view/",t.id,""),e.Q6J("ngStyle",e.VKq(11,ht,"1"==t.status?"#258f6e":"7"==t.status?"#da0000":"#374761"))("queryParams",e.VKq(13,ft,o.getViewName)),e.xp6(1),e.Q6J("src",o.fileService.preview(t.img),e.LSH),e.xp6(1),e.Q6J("matMenuTriggerFor",a),e.xp6(6),e.Oqu(t.fullName),e.xp6(2),e.Q6J("ngIf",t.email),e.xp6(1),e.Q6J("ngIf",t.phone),e.xp6(1),e.Q6J("ngStyle",e.VKq(15,_t,"1"==t.status?"#258f6e":"7"==t.status?"#da0000":"#374761")),e.xp6(2),e.hij(" ",t.statusProperty," ")}}function vt(i,n){if(1&i&&(e.TgZ(0,"mat-expansion-panel",20,21)(2,"mat-expansion-panel-header")(3,"mat-panel-title",22)(4,"h4",12),e._uU(5),e.qZA(),e.TgZ(6,"h4",23),e._uU(7),e.qZA(),e.TgZ(8,"h4",23),e._uU(9),e.qZA(),e.TgZ(10,"h4",23),e._uU(11),e.qZA(),e.TgZ(12,"h4",24),e._uU(13),e.qZA(),e.TgZ(14,"h4",25),e._uU(15),e.qZA()()(),e.TgZ(16,"div",26),e.YNc(17,bt,16,17,"div",27),e.qZA()()),2&i){const t=n.$implicit,a=n.index,o=e.oxw(2);e.Q6J("expanded",0==a),e.xp6(5),e.hij(" ",o.msgTranslate(t.jobTitleNameAr,t.jobTitleName)," "),e.xp6(2),e.hij(" ",t.openVacances," "),e.xp6(2),e.hij(" ",t.numOfCandidates," "),e.xp6(2),e.hij(" ",t.pendingNum," "),e.xp6(2),e.hij(" ",t.acceptededNum," "),e.xp6(2),e.hij(" ",t.rejectedNum," "),e.xp6(2),e.Q6J("ngForOf",t.candidateList)}}function Ct(i,n){1&i&&(e.TgZ(0,"div",40),e._UZ(1,"p-skeleton",41),e.qZA())}const Tt=function(){return[]};function It(i,n){1&i&&(e.ynx(0),e.TgZ(1,"div",38),e.YNc(2,Ct,2,0,"div",39),e.qZA(),e.BQk()),2&i&&(e.xp6(2),e.Q6J("ngForOf",e.DdM(1,Tt).constructor(6)))}function xt(i,n){if(1&i&&(e.TgZ(0,"div")(1,"div",18),e.YNc(2,vt,18,8,"mat-expansion-panel",19),e.qZA(),e.YNc(3,It,3,2,"ng-container",9),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.candidateList),e.xp6(1),e.Q6J("ngIf",!t.isCardLoaded)}}let yt=(()=>{class i extends h.U{constructor(t,a){super(),this.candidateService=t,this.dialog=a,this.isLoaded=!1,this.isCardLoaded=!1,this.isTable=!0,this.mandatoryColomns=["id","code","photo","fullName","organization","jobTitleName","phone","email","actions"],this.optionalColomns=[],this.candidateList=[]}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new u.by(null)),this.checkNoBusinessOrCompany()&&(this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage),this.getListCard())}ngOnInit(){}getList(t,a){this.dataSource=new u.by(null),this.isLoaded=!1,this.page.pageIndex=t,a&&(this.page.pageSize=a),this.removePageParams(),this.candidateService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(s=>{if(s.message.messageType==c.u.Success){if(0==s.data.length&&t>1)return void this.getList(this.prevPage);this.dataSource=new u.by(K(s.data)),this.isLoaded=!0,this.page.length=s.meta.totalItemCount,this.page.meta=s.meta}else this.errorList(s?.message?.messages)})}getListCard(){this.isCardLoaded=!1,this.candidateService.getListCard().pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==c.u.Success?t.data.forEach(a=>{this.candidateList.push({requestID:a.requestID,jobTitleName:a.jobTitleName,jobTitleNameAr:a.jobTitleNameAr,candidateList:K(a.candidateList),numOfCandidates:a.numOfCandidates,pendingNum:a.pendingNum,rejectedNum:a.rejectedNum,acceptededNum:a.acceptededNum,openVacances:a.openVacances}),this.isCardLoaded=!0}):this.errorList(t?.message?.messages)})}onDelete(t){let a=this.msgTranslate(t.ar_Name,t.en_Name);this.deleteDialog(a).subscribe(o=>{o&&this.delete(t)})}delete(t){this.showLoading(),this.candidateService.Delete(t.id).subscribe(a=>{a.message.messageType==c.u.Success?(this.isTable?this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize):(this.candidateList=[],this.getListCard()),this.deleteSuccessfullyMsg("candidateDeleted")):this.errorList(a?.message?.messages),this.hideLoading()})}switchTable(t){this.isTable=t,0==this.candidateList.length&&this.getListCard()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(y.L),e.Y36(x.uw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-candidate-index"]],features:[e.qOj],decls:11,vars:6,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","candidates","parentTitle","recruitment","TitleHasGlobalFunc","",3,"globalFunctions"],["data-toggle","buttons",1,"btn-group","btn-group-toggle","float-right","candidate-btn-group","mr-2","ml-2"],[3,"ngClass","click"],[1,"pi","pi-list"],[1,"fa","fa-bars"],[1,"clearfix"],["class","title-section second-section my-2",4,"ngIf"],["class","index-card mt-2",4,"ngIf"],[4,"ngIf"],[1,"title-section","second-section","my-2"],[1,"row","has-title","text-center"],[1,"col-6","col-md-2"],[1,"col-6","col-md-2","accepted"],["color","#da0000",1,"col-6","col-md-2","danger"],[1,"index-card","mt-2"],[3,"isLoaded","mandatoryColomns","optionalColomns","page","dataSource","actions","exportService","onChangePage","deleteRow",4,"ngIf"],[3,"isLoaded","mandatoryColomns","optionalColomns","page","dataSource","actions","exportService","onChangePage","deleteRow"],[1,"candidate-index-cards"],["class","mt-2",3,"expanded",4,"ngFor","ngForOf"],[1,"mt-2",3,"expanded"],["tab",""],[1,"row","text-center"],[1,"col-3","col-md-2"],[1,"col-3","col-md-2","accepted"],[1,"col-3","col-md-2","danger"],[1,"cards-container","row","mt-3","mb-2"],["class","col-12 col-sm-6 col-md-4 col-lg-3 col-xl-2 pbottom-15",4,"ngFor","ngForOf"],[1,"col-12","col-sm-6","col-md-4","col-lg-3","col-xl-2","pbottom-15"],[1,"card","mb-5","text-center",3,"ngStyle","routerLink","queryParams"],["mat-card-image","",3,"src"],[1,"card-icon","text-center",3,"matMenuTriggerFor"],[1,"ft-more-vertical"],["xPosition","before",1,"text-center"],["menuRow","matMenu"],[1,"mbottom-7"],[3,"ngStyle"],[1,"pi","pi-circle-on"],[1,"row"],["class","col-2",4,"ngFor","ngForOf"],[1,"col-2"],["size","15rem"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return a.switchTable(!0)}),e._UZ(4,"i",4),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return a.switchTable(!1)}),e._UZ(6,"i",5),e.qZA()(),e._UZ(7,"div",6),e.qZA(),e.YNc(8,ct,20,18,"mat-card-title",7),e.YNc(9,mt,2,1,"mat-card",8),e.YNc(10,xt,4,2,"div",9)),2&t&&(e.xp6(1),e.Q6J("globalFunctions",a.globalFunctions),e.xp6(2),e.Q6J("ngClass",a.isTable?"btn btn-darkBlue float-right":"btn float-right"),e.xp6(2),e.Q6J("ngClass",a.isTable?"btn float-right":"btn  btn-darkBlue float-right"),e.xp6(3),e.Q6J("ngIf",!a.isTable),e.xp6(1),e.Q6J("ngIf",a.isTable),e.xp6(1),e.Q6J("ngIf",!a.isTable))},dependencies:[p.mk,p.sg,p.O5,p.PC,N.rH,T.I,C.T,Z.X,d.a8,d.dn,d.n5,d.rt,d.G2,J.d,f.ib,f.yz,f.yK,W.VK,W.p6,M.O,v.X$],styles:[".has-fixed-title[_ngcontent-%COMP%]{margin-top:45px!important}.sub-fixed-section[_ngcontent-%COMP%]{margin-top:115px!important}.has-title[_ngcontent-%COMP%]{color:#5e6366;font-size:23px;font-weight:500}.second-section[_ngcontent-%COMP%], .candidate-index-cards[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]{border-radius:10px}.candidate-index-cards[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{padding-bottom:40px;padding-top:40px;height:-moz-fit-content;height:fit-content}.candidate-index-cards[_ngcontent-%COMP%]   .mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{border-radius:0;border-bottom:2px solid #eaeaea}.candidate-index-cards[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{font-size:24px;font-weight:300;color:#374761}.candidate-index-cards[_ngcontent-%COMP%]   .cards-container[_ngcontent-%COMP%]{flex-wrap:nowrap;overflow-x:auto}.candidate-index-cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border:3px solid #374761;padding:16px 7px!important;height:100%;margin-bottom:0!important;margin-top:0!important;position:relative;cursor:pointer}.candidate-index-cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:14.8px;text-align:center;color:#101317}.candidate-index-cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12.2px;text-align:start;color:#555}.candidate-index-cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:160px;margin-bottom:8px}.candidate-index-cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{position:absolute;top:10px;right:9px;width:30px;height:30px;border-radius:50%;background-color:#0009;padding:5px;color:#f0f8ff;cursor:pointer}.candidate-index-cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .mat-card-image[_ngcontent-%COMP%]{width:calc(100% + 14px);margin:-16px -7px 8px}.candidate-index-cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .mat-card-content[_ngcontent-%COMP%]{margin-bottom:30px}.candidate-index-cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .mat-card-footer[_ngcontent-%COMP%]{background-color:#374761;color:#f0f8ff;padding:10px;margin:0 -7px -16px;bottom:16px;width:100%;position:absolute;border-radius:0 0 7px 7px}.candidate-index-cards[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .mat-card-footer[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:10px;margin-right:3px}.candidate-index-cards[_ngcontent-%COMP%]   .mat-menu-item[_ngcontent-%COMP%]{color:#f0f8ff;margin:10px}  .candidate-index-cards .mat-expansion-indicator:after{padding:4px!important;border-width:0px 3px 3px 0px!important;color:#374761}  .candidate-index-cards .mat-menu-panel{background-color:#0009;border-radius:18px!important;margin-right:40px;margin-top:-28px}  .candidate-index-cards mat-divider{color:#eaeaea}.accepted[_ngcontent-%COMP%]{color:#258f6e}@media (min-width: 500px) and (max-width: 1550px){.sub-fixed-section[_ngcontent-%COMP%]{margin-top:165px!important}.mat-expansion-panel-header[_ngcontent-%COMP%]{height:120px!important;padding-bottom:30px}.has-fixed-title[_ngcontent-%COMP%]{margin-top:55px!important}}.danger[_ngcontent-%COMP%]{color:#da0000!important}.title-no-margin[_ngcontent-%COMP%]{padding-left:42px!important;padding-right:40px!important;font-size:27}.btn[_ngcontent-%COMP%]{border:solid 1.5px #374761}@media (min-width: 500px){.candidate-btn-group[_ngcontent-%COMP%]{position:relative;top:-42px;right:180px}.candidate-btn-group[_ngcontent-%COMP%] ~ div[_ngcontent-%COMP%]{height:0}}"]}),i})();var ee=r(2456),Zt=r(93268),wt=r(7214);let St=(()=>{class i extends h.U{constructor(t){super(),this.activitySetupService=t,this.mandatoryColomns=["Ser","id","en_Name","ar_Name","totalScore","scoreToPass","activityType","cost","actions"],this.isLoaded=!1,this.optionalColomns=["description"]}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new u.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.firstPage)}getList(t,a){this.dataSource=new u.by(null),this.isLoaded=!1,this.page.pageIndex=t,a&&(this.page.pageSize=a),this.activitySetupService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(s=>{s.message.messageType==c.u.Success?(this.dataSource=new u.by(function At(i){return i.map(n=>({...n,activityType:(0,m._f)(n.rec_ActivityType?.ar_Name,n.rec_ActivityType?.en_Name)}))}(s.data)),this.isLoaded=!0,this.page.length=s.meta.totalItemCount,this.page.meta=s.meta):this.errorList(s?.message?.messages)})}onDelete(t){let a=this.msgTranslate(t.ar_Name,t.en_Name);this.deleteDialog(a).subscribe(o=>{o&&this.delete(t)})}delete(t){this.showLoading(),this.activitySetupService.Delete(t.id).subscribe(a=>{a.message.messageType==c.u.Success?(this.deleteSuccessfullyMsg("activityRemoved"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(a?.message?.messages),this.hideLoading()})}openAddEditDialog(t,a){this.dialogsService.addEditDialog(Zt.Y,{data:t},{width:"55vw",minWidth:"400px",maxWidth:"1000px",maxHeight:"98vh",disableClose:!0,panelClass:"setup-dialog"}).afterClosed().subscribe(o=>{o&&this.getList(a?this.lastPage:this.currentPage)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(wt.x))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-activity-setup-index"]],features:[e.qOj],decls:4,vars:8,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","activitySetup","parentTitle","recruitment","TitleHasGlobalFunc","",3,"globalFunctions","action"],[1,"index-card"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","exportService","actions","onChangePage","editRow","deleteRow"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card-title",0)(1,"page-title",1),e.NdJ("action",function(){return a.openAddEditDialog(null,!0)}),e.qZA()(),e.TgZ(2,"mat-card",2)(3,"app-material-table",3),e.NdJ("onChangePage",function(s){return a.getList(s.pageIndex+1,s.pageSize)})("editRow",function(s){return a.openAddEditDialog(s,!1)})("deleteRow",function(s){return a.onDelete(s)}),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("globalFunctions",a.globalFunctions),e.xp6(2),e.Q6J("isLoaded",a.isLoaded)("dataSource",a.dataSource)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("exportService",a.activitySetupService)("actions",a.rowFunctions))},dependencies:[T.I,C.T,Z.X,d.a8,d.n5]}),i})();var te=r(26680);let Dt=(()=>{class i extends h.U{constructor(t){super(),this.recruitmentPlanService=t,this.isLoaded=!1,this.mandatoryColomns=["Ser","id","ar_Name","en_Name","from_Date","to_Date","noOfRequisitions","vacantPlaces","actions"],this.optionalColomns=[]}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new u.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}ngOnInit(){}getList(t,a){this.dataSource=new u.by(null),this.isLoaded=!1,this.page.pageIndex=t,a&&(this.page.pageSize=a),this.removePageParams(),this.recruitmentPlanService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(s=>{if(s.message.messageType==c.u.Success){if(0==s.data.length&&t>1)return void this.getList(this.prevPage);this.dataSource=new u.by(function Lt(i){return i.map(n=>({...n.rec_Plan,noOfRequisitions:n.noOfRequisition,from_Date:m.M6.mapDate(n.rec_Plan?.from_Date),to_Date:m.M6.mapDate(n.rec_Plan?.to_Date),vacantPlaces:n.vacantPlaces}))}(s.data)),this.isLoaded=!0,this.page.length=s.meta.totalItemCount,this.page.meta=s.meta}else this.errorList(s?.message?.messages)})}onDelete(t){let a=this.msgTranslate(t.ar_Name,t.en_Name);this.deleteDialog(a).subscribe(o=>{o&&this.delete(t)})}delete(t){this.showLoading(),this.recruitmentPlanService.Delete(t.id).subscribe(a=>{a.message.messageType==c.u.Success?(this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),this.deleteSuccessfullyMsg("recruitmentPlanRemoved")):this.errorList(a?.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(te.J))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-recruitment-plan-index"]],features:[e.qOj],decls:8,vars:13,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","recruitmentPlans","parentTitle","recruitment","TitleHasGlobalFunc","",3,"globalFunctions"],[1,"index-card"],[3,"isLoaded","mandatoryColomns","optionalColomns","page","actions","dataSource","exportService","onChangePage","deleteRow"],[3,"title"],[3,"serviceId","moduleId"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.qZA(),e.TgZ(2,"mat-card",2)(3,"mat-card-content")(4,"app-material-table",3),e.NdJ("onChangePage",function(s){return a.getList(s.pageIndex+1,s.pageSize)})("deleteRow",function(s){return a.onDelete(s)}),e.qZA()()(),e.TgZ(5,"side-helping-menu",4),e.ALo(6,"translate"),e._UZ(7,"app-dashboard-display",5),e.qZA()),2&t&&(e.xp6(1),e.Q6J("globalFunctions",a.globalFunctions),e.xp6(3),e.Q6J("isLoaded",a.isLoaded)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("actions",a.rowFunctions)("dataSource",a.dataSource)("exportService",a.recruitmentPlanService),e.xp6(1),e.s9C("title",e.lcZ(6,11,"Dashboard")),e.xp6(2),e.Q6J("serviceId",a.getCurrentServiceId())("moduleId",a.moduleId))},dependencies:[T.I,C.T,H.c,X.b,Z.X,d.a8,d.dn,d.n5,v.X$]}),i})(),ae=(()=>{class i extends h.U{constructor(){super(),this.planId=0,this.submitted=!1}onChangeBusinessAndCompanyId(){}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],ar_Name:[null,[l.kI.required,_.w.whiteSpace]],en_Name:[null,[l.kI.required,_.w.whiteSpace]],from_Date:[null,[l.kI.required]],to_Date:[null,[l.kI.required]],note:[null]},{validator:[_.w.compareDates("from_Date","to_Date")]})}get formCtrls(){return this.form.controls}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-recruitment-plan-general-info"]],inputs:{planId:"planId",submitted:"submitted"},features:[e.qOj],decls:13,vars:11,consts:[[3,"formGroup"],[1,"row","ptop-5"],[1,"col-lg-3","col-md-4","col-sm-6","col-12"],["label","en_Name",3,"control","submitted"],["label","ar_Name",3,"control","submitted"],["label","start_date",3,"control","submitted"],["label","end_date",3,"control","submitted"],["label","notes",3,"control","submitted"]],template:function(t,a){1&t&&(e.TgZ(0,"form",0),e.ynx(1),e.TgZ(2,"div",1)(3,"div",2),e._UZ(4,"app-input",3),e.qZA(),e.TgZ(5,"div",2),e._UZ(6,"app-input",4),e.qZA(),e.TgZ(7,"div",2),e._UZ(8,"app-datepicker",5),e.qZA(),e.TgZ(9,"div",2),e._UZ(10,"app-datepicker",6),e.qZA(),e.TgZ(11,"div",2),e._UZ(12,"app-input",7),e.qZA()(),e.BQk(),e.qZA()),2&t&&(e.Q6J("formGroup",a.form),e.xp6(4),e.Q6J("control",a.formCtrls.en_Name)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.ar_Name)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.from_Date)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.to_Date)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.note)("submitted",a.submitted))},dependencies:[Q.Q,A.a,l._Y,l.JL,l.sg]}),i})();const Jt=function(){return[]};let ie=(()=>{class i extends h.U{constructor(t){super(),this.recruitmentRequestService=t,this.planId=0,this.isLoaded=!1,this.displayedColumns=["jobTitle","organization","vacantPlaces","startDate","endDate","employmentType",R.g.selectAllColumnName]}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&this.getAllRequests()}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],requestIds:[[],[l.kI.required]]}),this.page.pageSize=5}ngOnChanges(t){}get formCtrls(){return this.form.controls}getAllRequests(){this.recruitmentRequestService.getAll().subscribe(t=>{t.message.messageType==c.u.Success?(this.allRequests=(0,$.y)(t.data),this.page.length=this.allRequests.length,this.isLoaded=!0):this.errorList(t?.message?.messages)})}getSelectedEmployees(t){this.formCtrls.requestIds.setValue(t.map(a=>a.id)??[])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(S.O))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-recruitment-plan-requests"]],inputs:{planId:"planId"},features:[e.qOj,e.TTD],decls:1,vars:9,consts:[[1,"table-in-forms",3,"isLoaded","mandatoryColomns","optionalColomns","allDataTable","page","showFilter","isCenterPaginator","showSpaceTop","selectedItems"]],template:function(t,a){1&t&&(e.TgZ(0,"app-material-table",0),e.NdJ("selectedItems",function(s){return a.getSelectedEmployees(s)}),e.qZA()),2&t&&e.Q6J("isLoaded",a.isLoaded)("mandatoryColomns",a.displayedColumns)("optionalColomns",e.DdM(8,Jt))("allDataTable",a.allRequests)("page",a.page)("showFilter",!0)("isCenterPaginator",!0)("showSpaceTop",!1)},dependencies:[T.I]}),i})();var ne=r(78192);function qt(i,n){if(1&i&&e._UZ(0,"app-add-new-btn",3),2&i){const t=e.oxw();e.MGl("url","/recruitment/",t.moduleId,"/plan/add"),e.Q6J("params",t.parentParam)}}let Nt=(()=>{class i extends h.U{constructor(t){super(),this.recruitmentPlanService=t,this.isAdd=!0,this.submitted=!1}ngOnInit(){}submit(){if(this.submitted=!0,0==this.requestsComponent.formCtrls.requestIds.value.length)return this.warning("selectOneJobRequisition","validation");let t=this.generalInfoComponent.formCtrls;if(this.generalInfoComponent.form.valid){let a={rec_Plan:{ar_Name:t.ar_Name.value,en_Name:t.en_Name.value,from_Date:t.from_Date.value,to_Date:t.to_Date.value,note:t.note.value},rec_Plan_Requests:[]};this.requestsComponent.formCtrls.requestIds.value.forEach(o=>{a.rec_Plan_Requests.push({request_ID:o})}),this.create(a)}}create(t){this.showLoading(),this.recruitmentPlanService.create(t).subscribe(a=>{a?.message?.messageType==c.u.Success?(this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newRecruitmentPlanAdded"),this.router.navigate([`/recruitment/${this.moduleId}/plan`],{queryParams:this.pageParams})):this.errorList(a?.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(te.J))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-recruitment-plan-core"]],viewQuery:function(t,a){if(1&t&&(e.Gf(ae,5),e.Gf(ie,5)),2&t){let o;e.iGM(o=e.CRH())&&(a.generalInfoComponent=o.first),e.iGM(o=e.CRH())&&(a.requestsComponent=o.first)}},features:[e.qOj],decls:20,vars:23,consts:[[1,"title-no-margin","title-section","fixed-title"],["addTitle","addRecruitmentPlan","editTitle","editRecruitmentPlan",3,"id","parentTitle","parentTitleLink","title","parentLinkParams"],[3,"url","params",4,"ngIf"],[3,"url","params"],["multi","",1,"add-forms-expansions"],["expanded","",1,"mtop-20"],[3,"submitted"],["expanded","",1,"mtop-20","mbottom-30"],["saveLabel","add",3,"id","url","pageParams","submit"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.YNc(4,qt,1,2,"app-add-new-btn",2),e._UZ(5,"app-back-btn",3),e.qZA(),e.TgZ(6,"mat-accordion",4)(7,"mat-expansion-panel",5)(8,"mat-expansion-panel-header")(9,"mat-panel-title"),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e._UZ(12,"app-add-recruitment-plan-general-info",6),e.qZA(),e.TgZ(13,"mat-expansion-panel",7)(14,"mat-expansion-panel-header")(15,"mat-panel-title"),e._uU(16),e.ALo(17,"translate"),e.qZA()(),e._UZ(18,"app-add-recruitment-plan-requests"),e.qZA()(),e.TgZ(19,"app-fixed-card-actions",8),e.NdJ("submit",function(){return a.submit()}),e.qZA()),2&t&&(e.xp6(1),e.hYB("parentTitle","",e.lcZ(2,15,"recruitment")," / ",e.lcZ(3,17,"recruitmentPlans"),""),e.MGl("parentTitleLink","/recruitment/",a.moduleId,"/plan"),e.Q6J("id",a.isAdd?0:1)("title",a.isAdd?"add":"edit")("parentLinkParams",a.pageParams),e.xp6(3),e.Q6J("ngIf",!a.isAdd),e.xp6(1),e.MGl("url","/recruitment/",a.moduleId,"/plan/index"),e.Q6J("params",a.pageParams),e.xp6(5),e.hij(" ",e.lcZ(11,19,"generalInfo"),""),e.xp6(2),e.Q6J("submitted",a.submitted),e.xp6(4),e.hij(" ",e.lcZ(17,21,"JobRequisition"),""),e.xp6(3),e.MGl("url","/recruitment/",a.moduleId,"/plan"),e.Q6J("id",a.isAdd?0:1)("pageParams",a.pageParams))},dependencies:[p.O5,L.a,D.J,C.T,ne.C,d.n5,f.pp,f.ib,f.yz,f.yK,ae,ie,v.X$]}),i})();var Pt=r(69846),oe=r(18521);let se=(()=>{class i extends oe.K{constructor(){super()}create(t){return this.post("Recruitment/RecTemplate/Create",t)}update(t){return this.post("Recruitment/RecTemplate/Edit",t)}getList(t){return this.get("Recruitment/RecTemplate/GetList",{params:{...t}})}getAll(t){return this.get("Recruitment/RecTemplate/GetAll",{params:t>0?{$filter:`id eq ${t}`}:{}})}Delete(t){return this.delete("Recruitment/RecTemplate/Delete",{params:{Id:t}})}exportExcel(){this.getAll()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Ut=(()=>{class i extends h.U{constructor(t){super(),this.recTemplatesService=t,this.mandatoryColomns=["Ser","id","en_Name","ar_Name","relatedJobTitles","activities","actions"],this.isLoaded=!1,this.optionalColomns=[],this.cellWithDifferentHoverList=[{col:"relatedJobTitles",hoverProperty:"hoverJobTitles",checkProperty:"showJobTitlesHover"},{col:"activities",hoverProperty:"hoverActivities",checkProperty:"showActivitiesHover"}]}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new u.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,a){this.dataSource=new u.by(null),this.isLoaded=!1,this.page.pageIndex=t,a&&(this.page.pageSize=a),this.removePageParams(),this.recTemplatesService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(s=>{if(s.message.messageType==c.u.Success){if(0==s.data.length&&t>1)return void this.getList(this.prevPage);this.dataSource=new u.by(function Rt(i,n){let t=new Pt.El;return i.map(a=>({id:a.rec_Template?.id,en_Name:a.rec_Template?.en_Name,ar_Name:a.rec_Template?.ar_Name,relatedJobTitles:0==a.core_Job_Title.length?"":1==a.core_Job_Title.length?(0,m._f)(a.core_Job_Title[0].ar_Name,a.core_Job_Title[0].en_Name):`<span class="item-table-background-blue pointer"> <img src="${t.multi_items}" width="12" /> ${m.M6.translate("multipleJobs",n)}</span>`,hoverJobTitles:"<span>"+(a.core_Job_Title.length>0?a.core_Job_Title.map(o=>(0,m._f)(o.ar_Name,o.en_Name)).join("<hr />"):"")+"</span>",showJobTitlesHover:a.core_Job_Title.length>1,activities:0==a.rec_Activity.length?"":1==a.rec_Activity.length?(0,m._f)(a.rec_Activity[0].ar_Name,a.rec_Activity[0].en_Name):`<span class="item-table-background-blue pointer"> <img src="${t.multi_items}" width="12" /> ${m.M6.translate("multipleActivities",n)}</span>`,hoverActivities:"<span>"+(a.rec_Activity.length>0?a.rec_Activity.map(o=>(0,m._f)(o.ar_Name,o.en_Name)).join("<hr />"):"")+"</span>",showActivitiesHover:a.rec_Activity.length>1}))}(s.data,this.languageService)),this.isLoaded=!0,this.page.length=s.meta.totalItemCount,this.page.meta=s.meta}else this.errorList(s?.message?.messages)})}onDelete(t){let a=this.msgTranslate(t.en_Name,t.ar_Name);this.deleteDialog(a).subscribe(o=>{o&&this.delete(t)})}delete(t){this.showLoading(),this.recTemplatesService.Delete(t.id).subscribe(a=>{a.message.messageType==c.u.Success?(this.deleteSuccessfullyMsg("activityTemplateRemoved"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(a?.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(se))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-activity-templates-index"]],features:[e.qOj],decls:5,vars:9,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","activityTemplates","parentTitle","recruitment","TitleHasGlobalFunc","",3,"globalFunctions"],[1,"index-card"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","exportService","actions","cellWithDifferentHoverList","onChangePage","deleteRow"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.qZA(),e.TgZ(2,"mat-card",2)(3,"mat-card-content")(4,"app-material-table",3),e.NdJ("onChangePage",function(s){return a.getList(s.pageIndex+1,s.pageSize)})("deleteRow",function(s){return a.onDelete(s)}),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("globalFunctions",a.globalFunctions),e.xp6(3),e.Q6J("isLoaded",a.isLoaded)("dataSource",a.dataSource)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("exportService",a.recTemplatesService)("actions",a.rowFunctions)("cellWithDifferentHoverList",a.cellWithDifferentHoverList))},dependencies:[T.I,C.T,Z.X,d.a8,d.dn,d.n5]}),i})(),Ot=(()=>{class i extends h.U{constructor(t){super(),this.recTemplatesService=t,this.templateId=0,this.changeTemplateId=new e.vpe,this.submitted=!1}onChangeBusinessAndCompanyId(){this.templateId>0&&this.checkNoBusinessOrCompany()&&this.getTemplateById()}ngOnInit(){this.form=this.fb.group({id:[this.templateId,{nonNullable:!0}],ar_Name:[null,[l.kI.required,_.w.whiteSpace]],en_Name:[null,[l.kI.required,_.w.whiteSpace]]})}get formCtrls(){return this.form.controls}getTemplateById(){this.showLoading(),this.recTemplatesService.getAll(this.templateId).subscribe(t=>{t.message.messageType==c.u.Success?this.form.patchValue(t.data[0].rec_Template):this.errorList(t?.message?.messages),this.hideLoading()})}submit(){if(this.submitted=!0,this.form.valid){let t={id:this.form.value.id,en_Name:this.form.value.en_Name,ar_Name:this.form.value.ar_Name};0==t.id?this.create(t):this.update(t)}}create(t){this.showLoading(),this.recTemplatesService.create(t).subscribe(a=>{a?.message?.messageType==c.u.Success?(this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newActivityTemplateAdded"),this.templateId=a.data.id,this.changeTemplateId.emit(this.templateId),this.formCtrls.id.setValue(this.templateId),this.navigateTo(`/recruitment/${this.moduleId}/activity-templates/edit/${this.templateId}`)):this.errorList(a?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this.recTemplatesService.update(t).subscribe(a=>{a?.message?.messageType==c.u.Success?this.updateSuccessfullyMsg("activityTemplateUpdated"):this.errorList(a?.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(se))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-rec-templates-general-info"]],inputs:{templateId:"templateId"},outputs:{changeTemplateId:"changeTemplateId"},features:[e.qOj],decls:9,vars:8,consts:[[3,"formGroup"],[1,"row","ptop-5"],[1,"col-lg-3","col-md-4","col-sm-6","col-12"],["label","en_Name",3,"control","submitted"],["label","ar_Name",3,"control","submitted"],[1,"col"],[1,"row"],["icon","pi pi-plus-circle","styleClass","btn-block mt-1","addLabel","add",3,"id","color","iconPositionBefore","onClick"]],template:function(t,a){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div",2),e._UZ(3,"app-input",3),e.qZA(),e.TgZ(4,"div",2),e._UZ(5,"app-input",4),e.qZA(),e.TgZ(6,"div",5)(7,"div",6)(8,"submit-btn",7),e.NdJ("onClick",function(){return a.submit()}),e.qZA()()()()()),2&t&&(e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.en_Name)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.ar_Name)("submitted",a.submitted),e.xp6(3),e.Q6J("id",a.formCtrls.id.value)("color",a.btn.darkBlue)("iconPositionBefore",!1))},dependencies:[A.a,q.p,l._Y,l.JL,l.sg]}),i})(),jt=(()=>{class i extends oe.K{constructor(){super()}create(t){return this.post("Recruitment/ActivitySetup/Create",t)}update(t){return this.post("Recruitment/ActivitySetup/Edit",t)}getList(t,a){return this.get("Recruitment/ActivitySetup/GetList",{params:{...t,$filter:`Template_ID eq ${a}`}})}getAll(t){return this.get("Recruitment/ActivitySetup/GetAll",{params:{$filter:`Template_ID eq ${t}`}})}Delete(t){return this.delete("Recruitment/ActivitySetup/Delete",{params:{Id:t}})}getAllActivityType(){return this.get("Recruitment/ActivityType/GetAll")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Mt=r(12613),kt=r(64514);function Ft(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",22),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.clearForm())}),e.qZA()}}function Gt(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-card-content"),e._UZ(2,"mat-divider",23),e.TgZ(3,"app-material-table",24),e.NdJ("onChangePage",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.getList(o.pageIndex+1,o.pageSize))})("editRow",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.activityToEdit(o))})("deleteRow",function(o){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(o))}),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("page",t.page)("actions",t.rowFunctions)("showFilter",!1)("isDialogSize",!0)}}let Bt=(()=>{class i extends h.U{constructor(t){super(),this.templateActivitiesService=t,this.templateId=0,this.submitted=!1,this.mandatoryColomns=["activityName","type","totalScore","scoreToPass","noOfResponsible","assets","notes","actions"],this.optionalColomns=[],this.isLoaded=!1}ngOnInit(){this.form=this.fb.group({id:[0,{nonNallable:!0}],en_Name:[null,[l.kI.required,_.w.whiteSpace]],activityType_ID:[null,[l.kI.required]],totalScore:[null,[l.kI.required,I.dN.gte(0)]],pass_Anyway:[!1],scoreToPass:[null,[I.dN.gte(0)]],description:[null],is_Individual:[!1],numberOfResponible:[null,[l.kI.required,I.dN.gte(1)]],is_Assets:[!1],assets:[null,[l.kI.required]],notes:[null]},{validator:[_.w.smallerThanOrEqualNumbers("scoreToPass","totalScore")]}),this.page.pageSize=this.page.dialogSize}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new u.by(null)),this.checkNoBusinessOrCompany()&&this.templateId>0?this.getList(this.firstPage):this.isLoaded=!0}onModulesChanged(){this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,g.S.template_activities)}get formCtrls(){return this.form.controls}getList(t,a){this.dataSource=new u.by(null),this.isLoaded=!1,this.removePageParams(),this.page.pageIndex=t,a&&(this.page.dialogSize=a),this.templateActivitiesService.getList({PageNumber:t,pageSize:this.page.dialogSize},this.templateId).pipe(this.cancelRequest()).subscribe(s=>{s.message.messageType==c.u.Success?(this.dataSource=new u.by(function Qt(i){return i.map(n=>({...n.rec_Activity,activityName:(0,m._f)(n.rec_Activity?.ar_Name,n.rec_Activity?.en_Name),type:(0,m._f)(n.rec_Activity?.rec_ActivityType?.ar_Name,n.rec_Activity?.rec_ActivityType?.en_Name),noOfResponsible:n.rec_Activity?.numberOfResponible}))}(s.data)),this.page.length=s.meta.totalItemCount,this.page.meta=s.meta,this.isLoaded=!0):this.errorList(s?.message?.messages)})}submit(){if(this.submitted=!0,this.form.valid){const t={template_ID:this.templateId,id:this.form.value.id,ar_Name:this.formCtrls.en_Name.value,en_Name:this.formCtrls.en_Name.value,activityType_ID:this.formCtrls.activityType_ID.value,totalScore:this.formCtrls.totalScore.value,scoreToPass:this.formCtrls.scoreToPass.value,description:this.formCtrls.description.value,numberOfResponible:this.formCtrls.numberOfResponible.value,assets:this.formCtrls.assets.value,notes:this.formCtrls.notes.value};0==t.id?this.create(t):this.update(t)}}create(t){this.showLoading(),this.templateActivitiesService.create(t).subscribe(a=>{a?.message?.messageType==c.u.Success?(this.addSuccessfullyMsg("canEditOrRemoveFromIndex","NewActivityAddedToTemplate"),this.clearForm(),this.getList(this.lastPage)):this.errorList(a?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this.templateActivitiesService.update(t).subscribe(a=>{a?.message?.messageType==c.u.Success?(this.updateSuccessfullyMsg("activityOfTemplateUpdated"),this.clearForm(),this.getList(this.currentPage)):this.errorList(a?.message?.messages),this.hideLoading()})}activityToEdit(t){this.form.patchValue(t),this.formCtrls.pass_Anyway.setValue(!t.scoreToPass),this.formCtrls.is_Individual.setValue(1==t.numberOfResponible),this.formCtrls.is_Assets.setValue(!!t.assets)}onDelete(t){let a=this.msgTranslate(t.ar_Name,t.en_Name);this.deleteDialog(a).subscribe(o=>{o&&this.delete(t)})}delete(t){this.showLoading(),this.templateActivitiesService.Delete(t.id).subscribe(a=>{a.message.messageType==c.u.Success?(this.deleteSuccessfullyMsg("activityRemovedFromTemplate"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize),t.id==this.formCtrls.id.value&&this.clearForm()):this.errorList(a?.message?.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0,pass_Anyway:!1,is_Individual:!1,is_Assets:!1}),this.submitted=!1}onChangeTotalScore(t){this.formCtrls.scoreToPass.setValidators(t?[l.kI.required,I.dN.gte(0)]:[I.dN.gte(0)]),this.formCtrls.scoreToPass.updateValueAndValidity()}onChangePassAnyWay(t){t?(this.form.clearValidators(),this.formCtrls.scoreToPass.setValue(null)):this.form.setValidators([_.w.smallerThanOrEqualNumbers("scoreToPass","totalScore")]),this.formCtrls.totalScore.updateValueAndValidity()}onChangeIsIndividual(t){t?this.formCtrls.numberOfResponible.setValue(1):this.formCtrls.numberOfResponible.reset()}onChangeNeedAssets(t){t?this.formCtrls.assets.setValidators([l.kI.required,_.w.whiteSpace]):(this.formCtrls.assets.setValue(null),this.formCtrls.assets.clearValidators()),this.formCtrls.assets.updateValueAndValidity()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(jt))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-rec-templates-activities"]],inputs:{templateId:"templateId"},features:[e.qOj],decls:32,vars:32,consts:[[1,"container-fluid","mtop-45"],[1,"row"],[1,"col-12"],[3,"formGroup"],[1,"col-md-4","col-lg-3","col-12"],["label","activityName",3,"control","submitted"],[1,"col-md-4","col-lg-3","col-12","mb-2"],["label","type",3,"control","submitted","filter"],["label","totalScore","type","number",3,"control","submitted","keyUp"],[1,"col-md-4","col-lg-3","col-12","check-box-container"],["label","passAnyWay","labelPosition","before","styleClass","w-100",3,"control","onChange"],["label","scoreToPass","type","number",3,"control","submitted","disabled"],["label","description",3,"control","submitted"],["label","individualEvaluatedByOneResponsible","labelPosition","before","styleClass","w-100",3,"control","onChange"],["label","noOfResponsible","type","number",3,"control","submitted","disabled"],["label","needAssets","labelPosition","before","styleClass","w-100",3,"control","onChange"],["label","assets",3,"control","submitted","disabled"],["label","notes",3,"control","submitted"],[3,"ngClass"],["icon","pi pi-plus-circle","addLabel","add",3,"disabled","id","color","styleClass","iconPositionBefore","onClick"],["styleClass","float-right",3,"click",4,"ngIf"],[4,"ngIf"],["styleClass","float-right",3,"click"],[1,"w-100","m-auto"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","showFilter","isDialogSize","onChangePage","editRow","deleteRow"]],template:function(t,a){1&t&&(e.ynx(0),e.TgZ(1,"mat-card-content",0)(2,"div",1)(3,"div",2)(4,"form",3)(5,"div",1)(6,"div",4),e._UZ(7,"app-input",5),e.qZA(),e.TgZ(8,"div",6),e._UZ(9,"app-activity-type-dropdown",7),e.qZA(),e.TgZ(10,"div",4)(11,"app-input",8),e.NdJ("keyUp",function(s){return a.onChangeTotalScore(s)}),e.qZA()(),e.TgZ(12,"div",9)(13,"app-check-box",10),e.NdJ("onChange",function(s){return a.onChangePassAnyWay(s)}),e.qZA()(),e.TgZ(14,"div",4),e._UZ(15,"app-input",11),e.qZA(),e.TgZ(16,"div",4),e._UZ(17,"app-input",12),e.qZA(),e.TgZ(18,"div",9)(19,"app-check-box",13),e.NdJ("onChange",function(s){return a.onChangeIsIndividual(s)}),e.qZA()(),e.TgZ(20,"div",4),e._UZ(21,"app-input",14),e.qZA(),e.TgZ(22,"div",9)(23,"app-check-box",15),e.NdJ("onChange",function(s){return a.onChangeNeedAssets(s)}),e.qZA()(),e.TgZ(24,"div",4),e._UZ(25,"app-input",16),e.qZA(),e.TgZ(26,"div",4),e._UZ(27,"app-input",17),e.qZA(),e.TgZ(28,"div",18)(29,"submit-btn",19),e.NdJ("onClick",function(){return a.submit()}),e.qZA(),e.YNc(30,Ft,1,0,"reset-form-btn",20),e.qZA()()()()()(),e.BQk(),e.YNc(31,Gt,4,8,"ng-container",21)),2&t&&(e.xp6(4),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.en_Name)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.activityType_ID)("submitted",a.submitted)("filter",!0),e.xp6(2),e.Q6J("control",a.formCtrls.totalScore)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.pass_Anyway),e.xp6(2),e.Q6J("control",a.formCtrls.scoreToPass)("submitted",a.submitted)("disabled",a.formCtrls.pass_Anyway.value),e.xp6(2),e.Q6J("control",a.formCtrls.description)("submitted",a.submitted),e.xp6(2),e.Q6J("control",a.formCtrls.is_Individual),e.xp6(2),e.Q6J("control",a.formCtrls.numberOfResponible)("submitted",a.submitted)("disabled",a.formCtrls.is_Individual.value),e.xp6(2),e.Q6J("control",a.formCtrls.is_Assets),e.xp6(2),e.Q6J("control",a.formCtrls.assets)("submitted",a.submitted)("disabled",!a.formCtrls.is_Assets.value),e.xp6(2),e.Q6J("control",a.formCtrls.notes)("submitted",a.submitted),e.xp6(1),e.Q6J("ngClass",a.formCtrls.id.value>0?"col-12":"col"),e.xp6(1),e.Q6J("disabled",!a.templateId)("id",a.formCtrls.id.value)("color",a.btn.darkBlue)("styleClass",a.formCtrls.id.value>0?"float-right":"btn-block mt-1")("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",a.formCtrls.id.value>0),e.xp6(1),e.Q6J("ngIf",a.templateId>0))},dependencies:[p.mk,p.O5,A.a,T.I,Mt.u,B.J,q.p,d.dn,J.d,kt.e,l._Y,l.JL,l.sg]}),i})();function Et(i,n){if(1&i&&e._UZ(0,"app-add-new-btn",3),2&i){const t=e.oxw();e.MGl("url","/recruitment/",t.moduleId,"/activity-templates/add"),e.Q6J("params",t.parentParam)}}let re=(()=>{class i extends h.U{constructor(){super(),this.templateId=0,this.activatedRoute.params.subscribe(t=>{this.templateId=Number(t.id??0)})}ngOnInit(){}getTemplateId(t){this.templateId=t}submit(){this.router.navigate(["/recruitment/&{ moduleId }/activity-templates"],{queryParams:this.pageParams})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-rec-templates-core"]],features:[e.qOj],decls:22,vars:27,consts:[[1,"title-no-margin","title-section","fixed-title"],["addTitle","addActivityTemplate","title","add",3,"id","parentTitle","parentTitleLink","parentLinkParams"],[3,"url","params",4,"ngIf"],[3,"url","params"],["multi","",1,"add-forms-expansions"],["expanded","",1,"mtop-20"],[3,"templateId","changeTemplateId"],["expanded","",1,"mtop-20","mbottom-30"],[3,"templateId"],["saveLabel","finish",3,"id","url","pageParams","submit"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.YNc(4,Et,1,2,"app-add-new-btn",2),e._UZ(5,"app-back-btn",3),e.qZA(),e.TgZ(6,"mat-accordion",4)(7,"mat-expansion-panel",5)(8,"mat-expansion-panel-header")(9,"mat-panel-title"),e._uU(10),e.ALo(11,"titlecase"),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"app-add-rec-templates-general-info",6),e.NdJ("changeTemplateId",function(s){return a.getTemplateId(s)}),e.qZA()(),e.TgZ(14,"mat-expansion-panel",7)(15,"mat-expansion-panel-header")(16,"mat-panel-title"),e._uU(17),e.ALo(18,"titlecase"),e.ALo(19,"translate"),e.qZA()(),e._UZ(20,"app-add-rec-templates-activities",8),e.qZA()(),e.TgZ(21,"app-fixed-card-actions",9),e.NdJ("submit",function(){return a.submit()}),e.qZA()),2&t&&(e.xp6(1),e.hYB("parentTitle","",e.lcZ(2,15,"recruitment")," / ",e.lcZ(3,17,"activityTemplates"),""),e.MGl("parentTitleLink","/recruitment/",a.moduleId,"/activity-templates"),e.Q6J("id",0)("parentLinkParams",a.pageParams),e.xp6(3),e.Q6J("ngIf",a.templateId>0),e.xp6(1),e.MGl("url","/recruitment/",a.moduleId,"/activity-templates/index"),e.Q6J("params",a.pageParams),e.xp6(5),e.hij(" ",e.lcZ(11,19,e.lcZ(12,21,"generalInfo"))," "),e.xp6(3),e.Q6J("templateId",a.templateId),e.xp6(4),e.hij(" ",e.lcZ(18,23,e.lcZ(19,25,"activities"))," "),e.xp6(3),e.Q6J("templateId",a.templateId),e.xp6(1),e.MGl("url","/recruitment/",a.moduleId,"/activity-templates"),e.Q6J("id",0)("pageParams",a.pageParams))},dependencies:[p.O5,L.a,D.J,C.T,ne.C,d.n5,f.pp,f.ib,f.yz,f.yK,Ot,Bt,p.rS,v.X$]}),i})();const Yt=[{path:"request",data:{view:g.S.request},children:[{path:"",redirectTo:"index",pathMatch:w.U.full},{path:"index",component:dt,data:{view:g.S.request_index},canActivate:[b.r]},{path:"add",component:V,data:{view:g.S.add_request},canActivate:[b.r]},{path:"edit/:id",component:V,data:{view:g.S.add_request},canActivate:[b.r]}]},{path:"candidate",data:{view:g.S.candidate},children:[{path:"",redirectTo:"index",pathMatch:w.U.full},{path:"index",component:yt,data:{view:g.S.candidate_index},canActivate:[b.r]},{path:"add",component:G,data:{view:g.S.add_candidate},canActivate:[b.r]},{path:"add/:requestId",component:G,data:{view:g.S.add_candidate},canActivate:[b.r]},{path:"view/:candidateId",component:ee.G,data:{view:g.S.view_candidate},canActivate:[b.r]}]},{path:"activity-templates",data:{view:g.S.activity_templates},children:[{path:"",redirectTo:"index",pathMatch:w.U.full},{path:"index",component:Ut,data:{view:g.S.activity_templates_index},canActivate:[b.r]},{path:"add",component:re,data:{view:g.S.add_activity_template},canActivate:[b.r]},{path:"edit/:id",component:re,data:{view:g.S.add_activity_template},canActivate:[b.r]}]},{path:"activity-setup",component:St,data:{view:g.S.activity_setup_index},canActivate:[b.r]},{path:"plan",data:{view:g.S.recruitment_plans},children:[{path:"",redirectTo:"index",pathMatch:w.U.full},{path:"index",component:Dt,data:{view:g.S.recruitment_plan_index},canActivate:[b.r]},{path:"add",component:Nt,data:{view:g.S.add_recruitment_plan},canActivate:[b.r]}]}];let zt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[N.Bz.forChild(Yt),N.Bz]}),i})();var Vt=r(86128),$t=r(78399),Ht=r(51762),Xt=r(95981),Kt=r(4859);function Wt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.isUpdate=!0)}),e._UZ(1,"i",8),e.qZA()}}function ea(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.isUpdate=!1)}),e._UZ(1,"i",9),e.qZA()}}function ta(i,n){if(1&i&&(e.ynx(0),e.TgZ(1,"div",10)(2,"div",11),e._UZ(3,"app-view-data-row-item",12),e.qZA(),e.TgZ(4,"div",11),e._UZ(5,"app-view-data-row-item",13),e.qZA(),e.TgZ(6,"div",11),e._UZ(7,"app-view-data-row-item",14),e.qZA(),e.TgZ(8,"div",11),e._UZ(9,"app-view-data-row-item",15),e.qZA(),e.TgZ(10,"div",11),e._UZ(11,"app-view-data-row-item",16),e.qZA(),e.TgZ(12,"div",11),e._UZ(13,"app-view-data-row-item",17),e.qZA()(),e.TgZ(14,"div",10)(15,"div",18),e._UZ(16,"app-view-data-row-item",19),e.qZA(),e.TgZ(17,"div",18),e._UZ(18,"app-view-data-row-item",20),e.qZA(),e.TgZ(19,"div",18),e._UZ(20,"app-view-data-row-item",21),e.qZA(),e.TgZ(21,"div",18),e._UZ(22,"app-view-data-row-item",22),e.qZA(),e.TgZ(23,"div",11),e._UZ(24,"app-view-data-row-item",23),e.qZA()(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("isDate",!1)("isBool",!1)("value",null==t.candidate?null:t.candidate.code),e.xp6(2),e.Q6J("isDate",!1)("isBool",!1)("value",null==t.candidate?null:t.candidate.ar_Name),e.xp6(2),e.Q6J("isDate",!1)("isBool",!1)("value",null==t.candidate?null:t.candidate.en_Name),e.xp6(2),e.Q6J("isDate",!1)("isBool",!1)("value",t.msgTranslate(null==t.candidate||null==t.candidate.nationality?null:t.candidate.nationality.ar_Name,null==t.candidate||null==t.candidate.nationality?null:t.candidate.nationality.en_NAme)),e.xp6(2),e.Q6J("isDate",!1)("isBool",!1)("value",null==t.candidate?null:t.candidate.national_Id),e.xp6(2),e.Q6J("isDate",!0)("isBool",!1)("value",null==t.candidate?null:t.candidate.birthDate),e.xp6(3),e.Q6J("isDate",!0)("isBool",!1)("value",null==t.candidate?null:t.candidate.hireDate),e.xp6(2),e.Q6J("isDate",!1)("isBool",!1)("value",t.msgTranslate(null==t.candidate||null==t.candidate.gender?null:t.candidate.gender.ar_Name,null==t.candidate||null==t.candidate.gender?null:t.candidate.gender.en_NAme)),e.xp6(2),e.Q6J("isDate",!1)("isBool",!1)("value",t.msgTranslate(null==t.candidate||null==t.candidate.religion?null:t.candidate.religion.ar_Name,null==t.candidate||null==t.candidate.religion?null:t.candidate.religion.en_Name)),e.xp6(2),e.Q6J("isDate",!1)("isBool",!1)("value",t.msgTranslate(null==t.candidate||null==t.candidate.resource_Type?null:t.candidate.resource_Type.ar_Name,null==t.candidate||null==t.candidate.resource_Type?null:t.candidate.resource_Type.en_Name)),e.xp6(2),e.Q6J("isDate",!1)("isBool",!1)("value",null==t.candidate?null:t.candidate.resource_Name)}}function aa(i,n){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"candidate-general-info-form",24),e.NdJ("isUpdate",function(o){e.CHM(t);const s=e.oxw(2);return e.KtG(s.backToView(o))}),e.qZA(),e.BQk()}}function ia(i,n){if(1&i&&(e.TgZ(0,"mat-card")(1,"mat-card-title"),e._UZ(2,"page-title",2),e.YNc(3,Wt,2,0,"button",3),e.YNc(4,ea,2,0,"button",3),e.qZA(),e._UZ(5,"mat-divider",4),e.TgZ(6,"mat-card-content",5),e.YNc(7,ta,25,33,"ng-container",6),e.YNc(8,aa,2,0,"ng-container",6),e.qZA()()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",!t.isUpdate),e.xp6(1),e.Q6J("ngIf",t.isUpdate),e.xp6(3),e.Q6J("ngIf",!t.isUpdate),e.xp6(1),e.Q6J("ngIf",t.isUpdate)}}function na(i,n){1&i&&e._UZ(0,"app-employee-profile-card-skeleton",25),2&i&&e.Q6J("rowNo",8)}let oa=(()=>{class i extends h.U{constructor(t,a){super(),this.candidateService=t,this.viewCandidateComponent=a,this.isUpdate=!1,this.isLoaded=!1}ngOnInit(){this.candidateService.candidate$.subscribe(t=>{this.candidate=t,null!=this.candidate&&(this.isLoaded=!0)})}onModulesChanged(){this.allowedSections=this.getCustomViewChildren(this.getParentViewName,g.S.candidate_general_info_tab)}backToView(t){this.isUpdate=t,this.viewCandidateComponent.getById()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(y.L),e.Y36(ee.G))},i.\u0275cmp=e.Xpm({type:i,selectors:[["candidate-general-info-card"]],features:[e.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["notLoaded",""],["title","generalInfo","color","font-dark"],["mat-button","","class","float-right section-edit-btn pright-6 pleft-6 darkBlue",3,"click",4,"ngIf"],[1,"mt-2"],[1,"mt-5"],[4,"ngIf"],["mat-button","",1,"float-right","section-edit-btn","pright-6","pleft-6","darkBlue",3,"click"],[1,"fas","fa-pen","font-size-15"],[1,"ft-corner-up-left","font-size-18"],[1,"view-data-row-container","mtop-20"],[1,"col-4","col-lg","mb-2"],["label","code",1,"emp-custom-view",3,"isDate","isBool","value"],["label","ar_Name",1,"emp-custom-view",3,"isDate","isBool","value"],["label","en_Name",1,"emp-custom-view",3,"isDate","isBool","value"],["label","nationality",1,"emp-custom-view",3,"isDate","isBool","value"],["label","nationalid",1,"emp-custom-view",3,"isDate","isBool","value"],["label","birthDate",1,"emp-custom-view",3,"isDate","isBool","value"],[1,"col-4","col-lg-2","mb-2"],["label","registrationDate",1,"emp-custom-view",3,"isDate","isBool","value"],["label","gender",1,"emp-custom-view",3,"isDate","isBool","value"],["label","religion",1,"emp-custom-view",3,"isDate","isBool","value"],["label","sourcingType",1,"emp-custom-view",3,"isDate","isBool","value"],["label","sourcingName",1,"emp-custom-view",3,"isDate","isBool","value"],[3,"isUpdate"],[3,"rowNo"]],template:function(t,a){if(1&t&&(e.YNc(0,ia,9,4,"mat-card",0),e.YNc(1,na,1,1,"ng-template",null,1,e.W1O)),2&t){const o=e.MAs(2);e.Q6J("ngIf",a.isLoaded)("ngIfElse",o)}},dependencies:[p.O5,C.T,Xt.E,Y.l,Kt.lW,d.a8,d.dn,d.n5,J.d,F]}),i})(),sa=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.ez,zt,Vt.m,$t.OrgManagementModule]}),i})();e.B6R(Ht.H,[p.O5,oa],[])}}]);