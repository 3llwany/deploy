"use strict";(self.webpackChunkhr=self.webpackChunkhr||[]).push([[190],{3710:(E,I,l)=>{l.d(I,{r:()=>c});var g=l(94650),L=l(67579),r=l(24280);let c=(()=>{class d{constructor(u){this.viewsService=u,this.loadingService=(0,g.f3M)(L.b),this.UserModules=this.viewsService.UserModules$.getValue(),this.loading=document.getElementById("page-loading")}canActivate(u,h){return!0}showLoading(){this.loading.style.display="block",this.loading.style.opacity="1",this.loading.style.zIndex="998"}hideLoading(){this.loading.style.display="none",this.loading.style.opacity="0",this.loading.style.zIndex="0"}}return d.\u0275fac=function(u){return new(u||d)(g.LFG(r.Z))},d.\u0275prov=g.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},67190:(E,I,l)=>{l.r(I),l.d(I,{PenaltyRegulationsSetupModule:()=>ce});var g=l(36895),L=l(80458),r=l(24006),c=l(30671),d=l(15602),f=l(95751),u=l(78937),h=l(43949),e=l(94650),P=l(1903),w=l(24850);let N=(()=>{class a extends P.K{constructor(){super()}create(t){return this.post("PenalitiesSetup/Create",t)}update(t){return this.post("PenalitiesSetup/Edit",t)}getList(t){return this.get("PenalitiesSetup/GetList",{params:t})}getAll(){return this.get("PenalitiesSetup/GetAll").pipe((0,w.U)(t=>(t.data.map(i=>{i.ar_Name=i.name,i.en_Name=i.name}),t)))}Delete(t){return this.delete("PenalitiesSetup/Delete",{params:{Id:t}})}exportExcel(){this.getAll()}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var b=l(25273),C=l(93410),S=l(56500),T=l(57566),v=l(46896),p=l(73546),R=l(44850);function O(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",13),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}let G=(()=>{class a extends f.U{constructor(t){super(),this.penaltiesService=t,this.submitted=!1,this.mandatoryColomns=["Ser","id","name","penalty_Value","actions"],this.isLoaded=!1,this.optionalColomns=[]}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],name:[null,[r.kI.required,u.w.whiteSpace]],penalty_Value:[null,[r.kI.required,h.dN.gte(0)]]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new c.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.firstPage)}getList(t,i){this.isLoaded=!1,this.page.pageIndex=t,i&&(this.page.pageSize=i),this.penaltiesService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(o=>{o.message.messageType==d.u.Success?(this.dataSource=new c.by(o.data),this.isLoaded=!0,this.page.length=o.meta.totalItemCount,this.page.meta=o.meta):this.errorList(o?.message?.messages)})}submit(){if(this.submitted=!0,this.form.valid){const t={ID:this.form.value.id,Name:this.form.value.name,Penalty_Value:this.form.value.penalty_Value};0==t.ID?this.create(t):this.update(t)}}create(t){this.showLoading(),this.penaltiesService.create(t).subscribe(i=>{i?.message?.messageType==d.u.Success?(this.clearForm(),this.getList(this.lastPage,this.page.pageSize),this.addSuccessfullyMsg(i?.message?.messageTypeName)):this.errorList(i?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this.penaltiesService.update(t).subscribe(i=>{i.message.messageType==d.u.Success?(this.clearForm(),this.getList(this.currentPage,this.page.pageSize),this.updateSuccessfullyMsg(i?.message?.messageTypeName)):this.errorList(i?.message?.messages),this.hideLoading()})}penaltyToEdit(t){this.form.patchValue(t)}onDelete(t){let i=this.msgTranslate(t.name);this.deleteDialog(i).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.penaltiesService.Delete(t.id).subscribe(i=>{i.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(i?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),t.id==this.formCtrls.id.value&&this.clearForm()):this.errorList(i?.message?.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(N))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-penalties"]],features:[e.qOj],decls:19,vars:16,consts:[[1,"row"],[1,"col-12"],[1,"form-card"],["addTitle","penalties","editTitle","editPenalty",3,"id"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","name",3,"control","submitted"],["type","number","label","penalty_Value",3,"control","submitted","isDecimalNumber"],["align","end"],[3,"id","onClick"],[3,"click",4,"ngIf"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","exportService","actions","onChangePage","editRow","deleteRow"],[3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title"),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"mat-card-content",4)(6,"div",0)(7,"div",1)(8,"form",5)(9,"div",0)(10,"div",6),e._UZ(11,"app-input",7),e.qZA(),e.TgZ(12,"div",6),e._UZ(13,"app-input",8),e.qZA()()()()()(),e.TgZ(14,"mat-card-actions",9)(15,"submit-btn",10),e.NdJ("onClick",function(){return i.submit()}),e.qZA(),e.YNc(16,O,1,0,"reset-form-btn",11),e.qZA(),e._UZ(17,"mat-divider"),e.TgZ(18,"app-material-table",12),e.NdJ("onChangePage",function(o){return i.getList(o.pageIndex+1,o.pageSize)})("editRow",function(o){return i.penaltyToEdit(o)})("deleteRow",function(o){return i.onDelete(o)}),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("id",i.formCtrls.id.value),e.xp6(4),e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("control",i.formCtrls.name)("submitted",i.submitted),e.xp6(2),e.Q6J("control",i.formCtrls.penalty_Value)("submitted",i.submitted)("isDecimalNumber",!0),e.xp6(2),e.Q6J("id",i.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",i.formCtrls.id.value>0),e.xp6(2),e.Q6J("isLoaded",i.isLoaded)("dataSource",i.dataSource)("mandatoryColomns",i.mandatoryColomns)("optionalColomns",i.optionalColomns)("page",i.page)("exportService",i.penaltiesService)("actions",i.rowFunctions))},dependencies:[g.O5,b.a,C.I,S.J,T.p,v.T,p.a8,p.dn,p.n5,p.hq,R.d,r._Y,r.JL,r.sg]}),a})();var V=l(78304);function z(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",12),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}let Y=(()=>{class a extends f.U{constructor(t){super(),this.violationTypesService=t,this.submitted=!1,this.mandatoryColomns=["Ser","id","name","actions"],this.isLoaded=!1,this.optionalColomns=[]}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],name:[null,[r.kI.required,u.w.whiteSpace]]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new c.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.firstPage)}getList(t,i){this.isLoaded=!1,this.page.pageIndex=t,i&&(this.page.pageSize=i),this.violationTypesService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(o=>{o.message.messageType==d.u.Success?(this.dataSource=new c.by(o.data),this.isLoaded=!0,this.page.length=o.meta.totalItemCount,this.page.meta=o.meta):this.errorList(o?.message?.messages)})}submit(){if(this.submitted=!0,this.form.valid){const t={ID:this.form.value.id,Name:this.form.value.name};0==t.ID?this.create(t):this.update(t)}}create(t){this.showLoading(),this.violationTypesService.create(t).subscribe(i=>{i?.message?.messageType==d.u.Success?(this.clearForm(),this.getList(this.lastPage,this.page.pageSize),this.addSuccessfullyMsg(i?.message?.messageTypeName)):this.errorList(i?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this.violationTypesService.update(t).subscribe(i=>{i.message.messageType==d.u.Success?(this.clearForm(),this.getList(this.currentPage,this.page.pageSize),this.updateSuccessfullyMsg(i?.message?.messageTypeName)):this.errorList(i?.message?.messages),this.hideLoading()})}violationTypeToEdit(t){this.form.patchValue(t)}onDelete(t){let i=this.msgTranslate(t.name);this.deleteDialog(i).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.violationTypesService.Delete(t.id).subscribe(i=>{i.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(i?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),t.id==this.formCtrls.id.value&&this.clearForm()):this.errorList(i?.message?.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(V.X))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-violation-types"]],features:[e.qOj],decls:17,vars:13,consts:[[1,"row"],[1,"col-12"],[1,"form-card"],["addTitle","violationTypes","editTitle","editViolationType",3,"id"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","name",3,"control","submitted"],["align","end"],[3,"id","onClick"],[3,"click",4,"ngIf"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","exportService","actions","onChangePage","editRow","deleteRow"],[3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title"),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"mat-card-content",4)(6,"div",0)(7,"div",1)(8,"form",5)(9,"div",0)(10,"div",6),e._UZ(11,"app-input",7),e.qZA()()()()()(),e.TgZ(12,"mat-card-actions",8)(13,"submit-btn",9),e.NdJ("onClick",function(){return i.submit()}),e.qZA(),e.YNc(14,z,1,0,"reset-form-btn",10),e.qZA(),e._UZ(15,"mat-divider"),e.TgZ(16,"app-material-table",11),e.NdJ("onChangePage",function(o){return i.getList(o.pageIndex+1,o.pageSize)})("editRow",function(o){return i.violationTypeToEdit(o)})("deleteRow",function(o){return i.onDelete(o)}),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("id",i.formCtrls.id.value),e.xp6(4),e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("control",i.formCtrls.name)("submitted",i.submitted),e.xp6(2),e.Q6J("id",i.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",i.formCtrls.id.value>0),e.xp6(2),e.Q6J("isLoaded",i.isLoaded)("dataSource",i.dataSource)("mandatoryColomns",i.mandatoryColomns)("optionalColomns",i.optionalColomns)("page",i.page)("exportService",i.violationTypesService)("actions",i.rowFunctions))},dependencies:[g.O5,b.a,C.I,S.J,T.p,v.T,p.a8,p.dn,p.n5,p.hq,R.d,r._Y,r.JL,r.sg]}),a})(),D=(()=>{class a extends P.K{constructor(){super()}create(t){return this.post("PenaltyRegSetup/Create",t)}update(t){return this.post("PenaltyRegSetup/Edit",t)}getList(t){return this.get("PenaltyRegSetup/GetList",{params:t})}getAll(){return this.get("PenaltyRegSetup/GetAll")}getById(t){return this.get("PenaltyRegSetup/GetAll",{params:{$filter:`id eq ${t}`}})}Delete(t){return this.delete("PenaltyRegSetup/Delete",{params:{Id:t}})}exportExcel(){this.getAll()}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),$=(()=>{class a extends f.U{constructor(t){super(),this.penaltyRegulationsService=t,this.mandatoryColomns=["Ser","id","name","actions"],this.isLoaded=!1,this.optionalColomns=[]}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new c.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,i){this.isLoaded=!1,this.removePageParams(),this.page.pageIndex=t,i&&(this.page.pageSize=i),this.penaltyRegulationsService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(o=>{if(o.message.messageType==d.u.Success){if(0==o.data.length&&t>1)return void this.getList(this.prevPage);this.dataSource=new c.by(o.data),this.isLoaded=!0,this.page.length=o.meta.totalItemCount,this.page.meta=o.meta}else this.errorList(o?.message?.messages)})}onDelete(t){let i=this.msgTranslate(t.name);this.deleteDialog(i).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.penaltyRegulationsService.Delete(t.id).subscribe(i=>{i.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(i?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(i?.message?.messages),this.hideLoading()})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(D))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-penalty-regulations-index"]],features:[e.qOj],decls:6,vars:8,consts:[[1,"row"],[1,"col-12"],[1,"index-card"],["title","penaltyRegulations",3,"globalFunctions"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","exportService","actions","onChangePage","deleteRow"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title"),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"app-material-table",4),e.NdJ("onChangePage",function(o){return i.getList(o.pageIndex+1,o.pageSize)})("deleteRow",function(o){return i.onDelete(o)}),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("globalFunctions",i.globalFunctions),e.xp6(1),e.Q6J("isLoaded",i.isLoaded)("dataSource",i.dataSource)("mandatoryColomns",i.mandatoryColomns)("optionalColomns",i.optionalColomns)("page",i.page)("exportService",i.penaltyRegulationsService)("actions",i.rowFunctions))},dependencies:[C.I,v.T,p.a8,p.n5]}),a})();var J=l(61064),F=l(52682),K=l(40445),Q=l(3848),X=l(35478),A=l(7368);let H=(()=>{class a extends P.K{constructor(){super()}create(t){return this.post("PenaltyRegSetup/Create_Penalty_Regulation_Details",t)}update(t){return this.post("PenaltyRegSetup/Edit_Penalty_Regulation_Details",t)}getAllByPenaltyRegulationId(t){return this.get("PenaltyRegSetup/GetAll_Penalty_Regulation_Details",{params:{Penalty_Regulation_ID:t}})}Delete(t){return this.delete("PenaltyRegSetup/Delete_Penalty_Regulation_Details",{params:t})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var m=l(26315);let Z=(()=>{class a extends P.K{constructor(){super()}create(t){return this.post("ViolationSetup/Create",t)}update(t){return this.post("ViolationSetup/Edit",t)}getList(t){return this.get("ViolationSetup/GetList",{params:{...t,$expand:`${m.db.Att_Attendance_Element}.${m.db.Att_Violation}/${m.db.Att_Type},${m.db.Att_Attendance_Element}.${m.db.Att_Violation}/${m.db.Att_Violation_Type}`}})}getAll(){return this.get("ViolationSetup/GetAll",{params:{$expand:`${m.db.Att_Attendance_Element}.${m.db.Att_Violation}`}})}getById(t){return this.get("ViolationSetup/GetAll",{params:{$expand:`${m.db.Att_Attendance_Element}.${m.db.Att_Violation}/${m.db.Att_Type},${m.db.Att_Attendance_Element}.${m.db.Att_Violation}/${m.db.Att_Violation_Type}`,$filter:`id eq ${t}`}})}Delete(t){return this.delete("ViolationSetup/Delete",{params:{Id:t}})}getAllTypes(){return this.get("ViolationSetup/GetAll_Type").pipe((0,w.U)(t=>(t.data.map(i=>{i.ar_Name=i.en_Name}),t)))}exportExcel(){this.getAll()}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var U=l(68506);function W(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",13),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}function ee(a,n){if(1&a){const t=e.EpF();e.ynx(0),e._UZ(1,"mat-divider"),e.TgZ(2,"app-material-table",14),e.NdJ("editRow",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.penaltyRegulationToEdit(s))})("deleteRow",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.onDelete(s))}),e.qZA(),e.BQk()}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("showPaginator",!1)}}const M=function(a){return{"hidden-field":a}};let te=(()=>{class a extends f.U{constructor(t,i,s){super(),this.penaltyRegulationsDetailsService=t,this.violationsService=i,this.penaltiesService=s,this.selectedPenaltyRegulationDetails=null,this.submitted=!1,this.mandatoryColomns=["Ser","violation","repetition_No","penalty","actions"],this.isLoaded=!1,this.optionalColomns=[],this.violationsList=[],this.penaltiesList=[],this.selectedViolation=null}ngOnInit(){this.form=this.fb.group({violation_ID:[null,[r.kI.required]],repetition_No:[null,[r.kI.required,h.dN.digits,h.dN.gte(0)]],penalty_ID:[null,[r.kI.required]]})}ngOnChanges(t){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new c.by(null)),this.checkNoBusinessOrCompany()&&(this.getAllViolations(),this.getAllPenalties(),this.penaltyRegulationId>0&&this.getAll())}get formCtrls(){return this.form.controls}getAll(){this.penaltyRegulationsDetailsService.getAllByPenaltyRegulationId(this.penaltyRegulationId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==d.u.Success?(this.dataSource=new c.by(function j(a){return a.map(n=>({...n,violation:(0,X._)(n.att_Violation?.ar_Name,n.att_Violation?.en_Name),penalty:n.att_Penalty?.name}))}(t.data)),this.isLoaded=!0):this.errorList(t?.message?.messages)})}penaltyRegulationToEdit(t){this.form.patchValue(t),this.onChangeViolation([t.att_Violation]),this.selectedPenaltyRegulationDetails=t}submit(){if(this.submitted=!0,this.form.valid){const t=[{Penalty_Regulation_ID:this.penaltyRegulationId,Violation_ID:this.form.value.violation_ID,Repetition_No:this.form.value.repetition_No??0,Penalty_ID:this.form.value.penalty_ID}];this.selectedPenaltyRegulationDetails?this.update(t):this.create(t)}}create(t){this.showLoading(),this.penaltyRegulationsDetailsService.create(t).subscribe(i=>{i?.message?.messageType==d.u.Success?(this.clearForm(),this.addSuccessfullyMsg(i?.message?.messageTypeName),this.getAll()):this.errorList(i?.message?.messages),this.hideLoading()})}update(t){let i={NewPenalityDetails:t[0],OldPenalityDetails:{Penalty_Regulation_ID:this.selectedPenaltyRegulationDetails.penalty_Regulation_ID,Violation_ID:this.selectedPenaltyRegulationDetails.violation_ID,Repetition_No:this.selectedPenaltyRegulationDetails.repetition_No??0,Penalty_ID:this.selectedPenaltyRegulationDetails.penalty_ID}};this.showLoading(),this.penaltyRegulationsDetailsService.update(i).subscribe(s=>{s.message.messageType==d.u.Success?(this.clearForm(),this.updateSuccessfullyMsg(s?.message?.messageTypeName),this.getAll()):this.errorList(s?.message?.messages),this.hideLoading()})}onDelete(t){let i=this.msgTranslate(`${t.att_Violation.ar_Name} - ${t.repetition_No}`,`${t.att_Violation.en_Name} - ${t.repetition_No}`);this.deleteDialog(i).subscribe(s=>{s&&this.delete(t)})}delete(t){let i={Penalty_Regulation_ID:t.penalty_Regulation_ID,Repetition_No:t.repetition_No,Violation_ID:t.violation_ID};this.showLoading(),this.penaltyRegulationsDetailsService.Delete(i).subscribe(s=>{s.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(s?.message?.messageTypeName),this.getAll(),t.penalty_Regulation_ID==this.selectedPenaltyRegulationDetails?.penalty_Regulation_ID&&t.violation_ID==this.selectedPenaltyRegulationDetails?.violation_ID&&t.repetition_No==this.selectedPenaltyRegulationDetails?.repetition_No&&this.clearForm()):this.errorList(s?.message?.messages),this.hideLoading()})}clearForm(){this.form.reset(),this.submitted=!1,this.selectedViolation=null,this.selectedPenaltyRegulationDetails=null}getAllViolations(){this.showLoading(),this.violationsService.getAll().subscribe(t=>{(t.message.messageType=d.u.Success)?this.violationsList=(0,A.s)(t.data):this.errorList(t?.message?.messages),this.hideLoading()})}getAllPenalties(){this.showLoading(),this.penaltiesService.getAll().subscribe(t=>{(t.message.messageType=d.u.Success)?this.penaltiesList=t.data:this.errorList(t?.message?.messages),this.hideLoading()})}onChangeViolation(t){this.selectedViolation=t[0],this.selectedViolation?.ismoney?(this.formCtrls.repetition_No.clearValidators(),this.formCtrls.penalty_ID.clearValidators()):(this.formCtrls.repetition_No.setValidators([r.kI.required,h.dN.gte(0)]),this.formCtrls.penalty_ID.setValidators([r.kI.required])),this.formCtrls.repetition_No.updateValueAndValidity(),this.formCtrls.penalty_ID.updateValueAndValidity()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(H),e.Y36(Z),e.Y36(N))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-penalty-regulations-details"]],inputs:{penaltyRegulationId:"penaltyRegulationId"},features:[e.qOj,e.TTD],decls:15,vars:21,consts:[[1,"container-fluid","mb-0"],[1,"row"],[1,"col-12"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","violation","appendTo","body",3,"control","List","submitted","filter","change"],[1,"col-md-6","col-12",3,"ngClass"],["label","repetition_No","type","number",3,"control","submitted"],["label","penalty","appendTo","body",3,"control","List","submitted","filter"],["align","end"],[3,"id","disabled","onClick"],[3,"click",4,"ngIf"],[4,"ngIf"],[3,"click"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","showPaginator","editRow","deleteRow"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card-content",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",1)(5,"div",4)(6,"app-prime-dropdown",5),e.NdJ("change",function(o){return i.onChangeViolation(o)}),e.qZA()(),e.TgZ(7,"div",6),e._UZ(8,"app-input",7),e.qZA(),e.TgZ(9,"div",6),e._UZ(10,"app-prime-dropdown",8),e.qZA()()()()()(),e.TgZ(11,"mat-card-actions",9)(12,"submit-btn",10),e.NdJ("onClick",function(){return i.submit()}),e.qZA(),e.YNc(13,W,1,0,"reset-form-btn",11),e.qZA(),e.YNc(14,ee,3,6,"ng-container",12)),2&t&&(e.xp6(3),e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("control",i.formCtrls.violation_ID)("List",i.violationsList)("submitted",i.submitted)("filter",!0),e.xp6(1),e.Q6J("ngClass",e.VKq(17,M,null==i.selectedViolation?null:i.selectedViolation.ismoney)),e.xp6(1),e.Q6J("control",i.formCtrls.repetition_No)("submitted",i.submitted),e.xp6(1),e.Q6J("ngClass",e.VKq(19,M,null==i.selectedViolation?null:i.selectedViolation.ismoney)),e.xp6(1),e.Q6J("control",i.formCtrls.penalty_ID)("List",i.penaltiesList)("submitted",i.submitted)("filter",!0),e.xp6(2),e.Q6J("id",i.selectedPenaltyRegulationDetails?1:0)("disabled",!i.penaltyRegulationId),e.xp6(1),e.Q6J("ngIf",i.selectedPenaltyRegulationDetails),e.xp6(1),e.Q6J("ngIf",i.penaltyRegulationId))},dependencies:[g.mk,g.O5,b.a,C.I,S.J,T.p,p.dn,p.hq,R.d,U.t,r._Y,r.JL,r.sg]}),a})();var ie=l(49274);function ae(a,n){if(1&a&&e._UZ(0,"app-add-new-btn",5),2&a){const t=e.oxw();e.MGl("url","/penalty-regulations-setup/",t.moduleId,"/penalty-regulations/add"),e.Q6J("params",t.parentParam)}}function se(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",16),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}let k=(()=>{class a extends f.U{constructor(t){super(),this.penaltyRegulationsService=t,this.submitted=!1}ngOnInit(){this.activatedRoute.paramMap.subscribe(t=>{this.penaltyRegulationId=Number(t.get("penaltyRegulationId"))??0}),this.form=this.fb.group({id:[0,{nonNullable:!0}],name:[null,[r.kI.required,u.w.whiteSpace]]})}onChangeBusinessAndCompanyId(){this.penaltyRegulationId>0&&this.checkNoBusinessOrCompany()&&this.getById()}get formCtrls(){return this.form.controls}getById(){this.showLoading(),this.penaltyRegulationsService.getById(this.penaltyRegulationId).subscribe(t=>{t.message.messageType==d.u.Success?this.penaltyRegulationToEdit(t.data[0]):this.errorList(t?.message?.messages),this.hideLoading()})}penaltyRegulationToEdit(t){this.form.patchValue(t)}submit(){if(this.submitted=!0,this.form.valid){const t={ID:this.form.value.id,Name:this.form.value.name};0==t.ID?this.create(t):this.update(t)}}create(t){this.showLoading(),this.penaltyRegulationsService.create(t).subscribe(i=>{i?.message?.messageType==d.u.Success?(this.penaltyRegulationId=i.data.id,this.formCtrls.id.setValue(this.penaltyRegulationId),this.navigateTo(`/penalty-regulations-setup/${this.moduleId}/penalty-regulations/edit/${this.penaltyRegulationId}`),this.addSuccessfullyMsg(i?.message?.messageTypeName)):this.errorList(i?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this.penaltyRegulationsService.update(t).subscribe(i=>{i.message.messageType==d.u.Success?this.updateSuccessfullyMsg(i?.message?.messageTypeName):this.errorList(i?.message?.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(D))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-add-penalty-regulations"]],features:[e.qOj],decls:25,vars:21,consts:[[1,"row"],[1,"col-12"],[1,"form-card"],["addTitle","penaltyRegulations","editTitle","editPenaltyRegulation",3,"id"],[3,"url","params",4,"ngIf"],[3,"url","params"],[1,"col-12","w-100",3,"dir"],[3,"label"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","name",3,"control","submitted"],["align","end"],[3,"id","onClick"],[3,"click",4,"ngIf"],[3,"penaltyRegulationId"],[3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title"),e._UZ(4,"page-title",3),e.YNc(5,ae,1,2,"app-add-new-btn",4),e._UZ(6,"app-back-btn",5),e.qZA(),e.TgZ(7,"mat-tab-group",6)(8,"mat-tab",7),e.ALo(9,"titlecase"),e.ALo(10,"translate"),e.TgZ(11,"mat-card-content",8)(12,"div",0)(13,"div",1)(14,"form",9)(15,"div",0)(16,"div",10),e._UZ(17,"app-input",11),e.qZA()()()()()(),e.TgZ(18,"mat-card-actions",12)(19,"submit-btn",13),e.NdJ("onClick",function(){return i.submit()}),e.qZA(),e.YNc(20,se,1,0,"reset-form-btn",14),e.qZA()(),e.TgZ(21,"mat-tab",7),e.ALo(22,"titlecase"),e.ALo(23,"translate"),e._UZ(24,"app-penalty-regulations-details",15),e.qZA()()()()()),2&t&&(e.xp6(4),e.Q6J("id",i.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",i.formCtrls.id.value>0),e.xp6(1),e.MGl("url","/penalty-regulations-setup/",i.moduleId,"/penalty-regulations/index"),e.Q6J("params",i.pageParams),e.xp6(1),e.Q6J("dir",i.languageService.isArabic?"rtl":"ltr"),e.xp6(1),e.s9C("label",e.lcZ(9,13,e.lcZ(10,15,"penaltyRegulations"))),e.xp6(6),e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("control",i.formCtrls.name)("submitted",i.submitted),e.xp6(2),e.Q6J("id",i.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",0==i.formCtrls.id.value),e.xp6(1),e.s9C("label",e.lcZ(22,17,e.lcZ(23,19,"penaltyRegulationDetails"))),e.xp6(3),e.Q6J("penaltyRegulationId",i.penaltyRegulationId))},dependencies:[g.O5,b.a,J.a,F.J,S.J,T.p,v.T,K.Lv,Q.SP,Q.uX,p.a8,p.dn,p.n5,p.hq,r._Y,r.JL,r.sg,te,g.rS,ie.X$]}),a})(),oe=(()=>{class a extends f.U{constructor(t){super(),this.violationsService=t,this.mandatoryColomns=["Ser","id","en_Name","ar_Name","actions"],this.optionalColomns=["variableCode","display_In_Result","violationType","renew_Day","fromValue","toValue","typeName","moneyOrPenalty","renew_By_Period"],this.isLoaded=!1}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new c.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,i){this.isLoaded=!1,this.removePageParams(),this.page.pageIndex=t,i&&(this.page.pageSize=i),this.violationsService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(o=>{if(o.message.messageType==d.u.Success){if(0==o.data.length&&t>1)return void this.getList(this.prevPage);o.data.map(B=>{B.att_Violation.moneyOrPenalty=this.translate(B.att_Violation.ismoney?"money":"penalty")}),this.dataSource=new c.by((0,A.s)(o.data)),this.isLoaded=!0,this.page.length=o.meta.totalItemCount,this.page.meta=o.meta}else this.errorList(o?.message?.messages)})}onDelete(t){let i=this.msgTranslate(t.ar_Name,t.en_Name);this.deleteDialog(i).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.violationsService.Delete(t.id).subscribe(i=>{i.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(i?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(i?.message?.messages),this.hideLoading()})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Z))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-violations-index"]],features:[e.qOj],decls:6,vars:8,consts:[[1,"row"],[1,"col-12"],[1,"index-card"],["title","violations",3,"globalFunctions"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","exportService","actions","onChangePage","deleteRow"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title"),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"app-material-table",4),e.NdJ("onChangePage",function(o){return i.getList(o.pageIndex+1,o.pageSize)})("deleteRow",function(o){return i.onDelete(o)}),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("globalFunctions",i.globalFunctions),e.xp6(1),e.Q6J("isLoaded",i.isLoaded)("dataSource",i.dataSource)("mandatoryColomns",i.mandatoryColomns)("optionalColomns",i.optionalColomns)("page",i.page)("exportService",i.violationsService)("actions",i.rowFunctions))},dependencies:[C.I,v.T,p.a8,p.n5]}),a})();var ne=l(33975),le=l(92393),re=l(12613);function de(a,n){if(1&a&&e._UZ(0,"app-add-new-btn",5),2&a){const t=e.oxw();e.MGl("url","/penalty-regulations-setup/",t.moduleId,"/violations/add"),e.Q6J("params",t.parentParam)}}function pe(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",25),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}let q=(()=>{class a extends f.U{constructor(t,i){super(),this.violationsService=t,this.violationTypesService=i,this.submitted=!1,this.violationTypesList=[],this.typesList=[],this.moneyOrPenaltyRadioList=[{value:!0,label:"money"},{value:!1,label:"penalty"}]}ngOnInit(){this.activatedRoute.paramMap.subscribe(t=>{this.violationId=Number(t.get("violationId"))??0}),this.form=this.fb.group({id:[0,{nonNullable:!0}],en_Name:[null,[r.kI.required,u.w.whiteSpace]],ar_Name:[null,[r.kI.required,u.w.whiteSpace]],variableCode:[null,[r.kI.required,u.w.whiteSpace,u.w.noSpace,r.kI.pattern(ne.g.variableCode_pattern)]],display_In_Result:[!1],renew_Day:[null,[h.dN.gte(0),h.dN.digits]],fromValue:[null,[r.kI.required,h.dN.gte(0),h.dN.digits]],toValue:[null,[r.kI.required,h.dN.gte(0),h.dN.digits]],violation_Type_ID:[null,[r.kI.required]],type:[null,[r.kI.required]],renew_By_Period:[!1],ismoney:[!1]},{validator:u.w.greaterThan("fromValue","toValue")})}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&(this.getAllViolationTypes(),this.getAllTypes(),this.violationId>0&&this.getById())}get formCtrls(){return this.form.controls}getById(){this.showLoading(),this.violationsService.getById(this.violationId).subscribe(t=>{if(t.message.messageType==d.u.Success){let i=(0,A.s)(t.data);this.violationToEdit(i[0])}else this.errorList(t?.message?.messages);this.hideLoading()})}violationToEdit(t){this.form.patchValue(t)}submit(){if(this.submitted=!0,this.form.valid){const t={Violation:{ID:this.form.value.id,En_Name:this.form.value.en_Name,Ar_Name:this.form.value.ar_Name,Renew_Day:this.form.value.renew_Day,FromValue:this.form.value.fromValue,ToValue:this.form.value.toValue,Violation_Type_ID:this.form.value.violation_Type_ID,Type:this.form.value.type,Renew_By_Period:this.form.value.renew_By_Period??!1,Ismoney:this.form.value.ismoney},VariableCode:this.form.value.variableCode,Display_In_Result:this.form.value.display_In_Result??!1};0==t.Violation.ID?this.create(t):this.update(t)}}create(t){this.showLoading(),this.violationsService.create(t).subscribe(i=>{i?.message?.messageType==d.u.Success?(this.violationId=i.data.id,this.formCtrls.id.setValue(this.violationId),this.navigateTo(`/penalty-regulations-setup/${this.moduleId}/violations/edit/${this.violationId}`),this.addSuccessfullyMsg(i?.message?.messageTypeName)):this.errorList(i?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this.violationsService.update(t).subscribe(i=>{i.message.messageType==d.u.Success?this.updateSuccessfullyMsg(i?.message?.messageTypeName):this.errorList(i?.message?.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0,ismoney:!1}),this.submitted=!1}getAllViolationTypes(){this.showLoading(),this.violationTypesService.getAll().subscribe(t=>{(t.message.messageType=d.u.Success)?this.violationTypesList=t.data:this.errorList(t?.message?.messages),this.hideLoading()})}getAllTypes(){this.showLoading(),this.violationsService.getAllTypes().subscribe(t=>{(t.message.messageType=d.u.Success)?this.typesList=t.data:this.errorList(t?.message?.messages),this.hideLoading()})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Z),e.Y36(V.X))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-add-violation"]],features:[e.qOj],decls:37,vars:30,consts:[[1,"row"],[1,"col-12"],[1,"form-card"],["addTitle","violations","editTitle","editViolation",3,"id"],[3,"url","params",4,"ngIf"],[3,"url","params"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","en_Name",3,"control","submitted"],["label","ar_Name",3,"control","submitted"],["label","variableCode",3,"control","submitted"],[1,"col-md-6","col-12","mtop-14"],["label","display_In_Result",3,"control"],[1,"col-md-4","col-12"],["type","number","label","renew_Month",3,"control","submitted"],["type","number","label","fromValue",3,"control","submitted"],["type","number","label","toValue",3,"control","submitted"],["label","violationType",3,"control","submitted","List"],["label","typeName",3,"control","submitted","List"],["label","renew_By_Period",3,"control"],[3,"radioList","control","submitted"],["align","end"],[3,"id","onClick"],[3,"click",4,"ngIf"],[3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title"),e._UZ(4,"page-title",3),e.YNc(5,de,1,2,"app-add-new-btn",4),e._UZ(6,"app-back-btn",5),e.qZA(),e.TgZ(7,"mat-card-content",6)(8,"div",0)(9,"div",1)(10,"form",7)(11,"div",0)(12,"div",8),e._UZ(13,"app-input",9),e.qZA(),e.TgZ(14,"div",8),e._UZ(15,"app-input",10),e.qZA(),e.TgZ(16,"div",8),e._UZ(17,"app-input",11),e.qZA(),e.TgZ(18,"div",12),e._UZ(19,"app-check-box",13),e.qZA(),e.TgZ(20,"div",14),e._UZ(21,"app-input",15),e.qZA(),e.TgZ(22,"div",14),e._UZ(23,"app-input",16),e.qZA(),e.TgZ(24,"div",14),e._UZ(25,"app-input",17),e.qZA(),e.TgZ(26,"div",8),e._UZ(27,"app-prime-dropdown",18),e.qZA(),e.TgZ(28,"div",8),e._UZ(29,"app-prime-dropdown",19),e.qZA(),e.TgZ(30,"div",12),e._UZ(31,"app-check-box",20),e.qZA(),e.TgZ(32,"div",12),e._UZ(33,"app-radio-button",21),e.qZA()()()()()(),e.TgZ(34,"mat-card-actions",22)(35,"submit-btn",23),e.NdJ("onClick",function(){return i.submit()}),e.qZA(),e.YNc(36,pe,1,0,"reset-form-btn",24),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("id",i.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",i.formCtrls.id.value>0),e.xp6(1),e.MGl("url","/penalty-regulations-setup/",i.moduleId,"/violations/index"),e.Q6J("params",i.pageParams),e.xp6(4),e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("control",i.formCtrls.en_Name)("submitted",i.submitted),e.xp6(2),e.Q6J("control",i.formCtrls.ar_Name)("submitted",i.submitted),e.xp6(2),e.Q6J("control",i.formCtrls.variableCode)("submitted",i.submitted),e.xp6(2),e.Q6J("control",i.formCtrls.display_In_Result),e.xp6(2),e.Q6J("control",i.formCtrls.renew_Day)("submitted",i.submitted),e.xp6(2),e.Q6J("control",i.formCtrls.fromValue)("submitted",i.submitted),e.xp6(2),e.Q6J("control",i.formCtrls.toValue)("submitted",i.submitted),e.xp6(2),e.Q6J("control",i.formCtrls.violation_Type_ID)("submitted",i.submitted)("List",i.violationTypesList),e.xp6(2),e.Q6J("control",i.formCtrls.type)("submitted",i.submitted)("List",i.typesList),e.xp6(2),e.Q6J("control",i.formCtrls.renew_By_Period),e.xp6(2),e.Q6J("radioList",i.moneyOrPenaltyRadioList)("control",i.formCtrls.ismoney)("submitted",i.submitted),e.xp6(2),e.Q6J("id",i.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",0==i.formCtrls.id.value))},dependencies:[g.O5,b.a,le._,re.u,J.a,F.J,S.J,T.p,v.T,p.a8,p.dn,p.n5,p.hq,U.t,r._Y,r.JL,r.sg]}),a})();var x=l(36162),y=l(74513),_=l(3710);const me=[{path:"penalties",component:G,data:{view:y.S.penalties},canActivate:[_.r]},{path:"violation-types",component:Y,data:{view:y.S.violation_types},canActivate:[_.r]},{path:"penalty-regulations",data:{view:y.S.penalty_regulations},children:[{path:"",redirectTo:"index",pathMatch:x.U.full},{path:"index",component:$,data:{view:y.S.penalty_regulations_index},canActivate:[_.r]},{path:"add",component:k,data:{view:y.S.add_penalty_regulations},canActivate:[_.r]},{path:"edit/:penaltyRegulationId",component:k,data:{view:y.S.add_penalty_regulations},canActivate:[_.r]}]},{path:"violations",data:{view:"violations"},children:[{path:"",redirectTo:"index",pathMatch:x.U.full},{path:"index",component:oe,data:{view:y.S.violations_index},canActivate:[_.r]},{path:"add",component:q,data:{view:y.S.add_violation},canActivate:[_.r]},{path:"edit/:violationId",component:q,data:{view:y.S.add_violation},canActivate:[_.r]}]}];let ue=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[L.Bz.forChild(me),L.Bz]}),a})();var ge=l(66393);let ce=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[g.ez,ue,ge.m]}),a})()}}]);