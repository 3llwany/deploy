"use strict";(self.webpackChunkhr=self.webpackChunkhr||[]).push([[832],{3710:(me,E,r)=>{r.d(E,{r:()=>d});var h=r(94650),V=r(67579),c=r(24280),p=r(80458);let d=(()=>{class u{constructor(e,w){this.viewsService=e,this.router=w,this.loadingService=(0,h.f3M)(V.b),this.UserModules=this.viewsService.UserModules$.getValue(),this.loading=document.getElementById("page-loading")}canActivate(e,w){let C=e.data?.view;if(this.showLoading(),this.UserModules?.length>0){if(this.viewsService.isViewAllowed(C))return this.hideLoading(),!0;this.router.navigateByUrl("/auth/access-denied"),this.hideLoading()}else this.viewsService.UserModules$.subscribe(g=>{if(g?.length>0){if(this.viewsService.isViewAllowed(C))return this.hideLoading(),!0;this.router.navigateByUrl("/auth/access-denied"),this.hideLoading()}})}showLoading(){this.loading.style.display="block",this.loading.style.opacity="1",this.loading.style.zIndex="998"}hideLoading(){this.loading.style.display="none",this.loading.style.opacity="0",this.loading.style.zIndex="0"}}return u.\u0275fac=function(e){return new(e||u)(h.LFG(c.Z),h.LFG(p.F0))},u.\u0275prov=h.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},91674:(me,E,r)=>{r.r(E),r.d(E,{TrainingModule:()=>zt});var h=r(36895),V=r(80458),c=r(74513),p=r(30671),d=r(15602),u=r(95751),D=r(98949),e=r(94650),w=r(15881),C=r(93410),g=r(46896),y=r(60544),S=r(65731),Z=r(29721),l=r(73546),b=r(49274);let pe=(()=>{class i extends u.U{constructor(t){super(),this.courseService=t,this.isLoaded=!1,this.mandatoryColomns=["Ser","id","courseCode","ar_Name","en_Name","abbrevation","courseSubCategory","courseType","actions"],this.optionalColomns=["isFree","courseValue","isHolding","holdingYears","penaletyPercentege","threeMontheEvalution","sixMontheEvalution"]}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new p.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}ngOnInit(){}getList(t,n){this.dataSource=new p.by(null),this.isLoaded=!1,this.page.pageIndex=t,n&&(this.page.pageSize=n),this.removePageParams(),this.courseService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(s=>{if(s.message.messageType==d.u.Success){if(0==s.data.length&&t>1)return void this.getList(this.prevPage);this.dataSource=new p.by((0,D.o)(s.data)),this.isLoaded=!0,this.page.length=s.meta.totalItemCount,this.page.meta=s.meta}else this.errorList(s?.message?.messages)})}delete(t){this.showLoading(),this.courseService.Delete(t.id).subscribe(n=>{n.message.messageType==d.u.Success?(this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),this.deleteSuccessfullyMsg("courseDeleted")):this.errorList(n?.message?.messages),this.hideLoading()})}onDelete(t){let n=this.msgTranslate(t.ar_Name,t.en_Name);this.deleteDialog(n).subscribe(a=>{a&&this.delete(t)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w.N))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-course-index"]],features:[e.qOj],decls:8,vars:13,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","courses","parentTitle","training","TitleHasGlobalFunc","",3,"globalFunctions"],[1,"index-card"],[3,"isLoaded","mandatoryColomns","optionalColomns","page","actions","dataSource","exportService","onChangePage","deleteRow"],[3,"title"],[3,"serviceId","moduleId"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.qZA(),e.TgZ(2,"mat-card",2)(3,"mat-card-content")(4,"app-material-table",3),e.NdJ("onChangePage",function(s){return n.getList(s.pageIndex+1,s.pageSize)})("deleteRow",function(s){return n.onDelete(s)}),e.qZA()()(),e.TgZ(5,"side-helping-menu",4),e.ALo(6,"translate"),e._UZ(7,"app-dashboard-display",5),e.qZA()),2&t&&(e.xp6(1),e.Q6J("globalFunctions",n.globalFunctions),e.xp6(3),e.Q6J("isLoaded",n.isLoaded)("mandatoryColomns",n.mandatoryColomns)("optionalColomns",n.optionalColomns)("page",n.page)("actions",n.rowFunctions)("dataSource",n.dataSource)("exportService",n.courseService),e.xp6(1),e.s9C("title",e.lcZ(6,11,"Dashboard")),e.xp6(2),e.Q6J("serviceId",n.getCurrentServiceId())("moduleId",n.moduleId))},dependencies:[C.I,g.T,y.c,S.b,Z.X,l.a8,l.dn,l.n5,b.X$]}),i})();var A=r(36162),de=r(41944);let ce=(()=>{class i extends u.U{constructor(t){super(),this.tspService=t,this.isLoaded=!1,this.mandatoryColomns=["Ser","breif_Name","en_Name","ar_Name","location","webSite_URL","actions"],this.optionalColomns=["address","email","mobile","phone","fax","contactPersonName","contactPersonEmail","contactPersonMobile","contactPersonPhone","i_M_C_Code","note"]}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new p.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}ngOnInit(){}getList(t,n){this.dataSource=new p.by(null),this.isLoaded=!1,this.page.pageIndex=t,n&&(this.page.pageSize=n),this.removePageParams(),this.tspService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(s=>{if(s.message.messageType==d.u.Success){if(0==s.data.length&&t>1)return void this.getList(this.prevPage);this.dataSource=new p.by(s.data),this.isLoaded=!0,this.page.length=s.meta.totalItemCount,this.page.meta=s.meta}else this.errorList(s?.message?.messages)})}delete(t){this.showLoading(),this.tspService.Delete(t.id).subscribe(n=>{n.message.messageType==d.u.Success?(this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),this.deleteSuccessfullyMsg("TspRemoved")):this.errorList(n?.message?.messages),this.hideLoading()})}onDelete(t){let n=this.msgTranslate(t.ar_Name,t.en_Name);this.deleteDialog(n).subscribe(a=>{a&&this.delete(t)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(de.D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-tsp-index"]],features:[e.qOj],decls:8,vars:13,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","TSP","parentTitle","training","TitleHasGlobalFunc","",3,"globalFunctions"],[1,"index-card"],[3,"isLoaded","mandatoryColomns","optionalColomns","page","actions","dataSource","exportService","onChangePage","deleteRow"],[3,"title"],[3,"serviceId","moduleId"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.qZA(),e.TgZ(2,"mat-card",2)(3,"mat-card-content")(4,"app-material-table",3),e.NdJ("onChangePage",function(s){return n.getList(s.pageIndex+1,s.pageSize)})("deleteRow",function(s){return n.onDelete(s)}),e.qZA()()(),e.TgZ(5,"side-helping-menu",4),e.ALo(6,"translate"),e._UZ(7,"app-dashboard-display",5),e.qZA()),2&t&&(e.xp6(1),e.Q6J("globalFunctions",n.globalFunctions),e.xp6(3),e.Q6J("isLoaded",n.isLoaded)("mandatoryColomns",n.mandatoryColomns)("optionalColomns",n.optionalColomns)("page",n.page)("actions",n.rowFunctions)("dataSource",n.dataSource)("exportService",n.tspService),e.xp6(1),e.s9C("title",e.lcZ(6,11,"Dashboard")),e.xp6(2),e.Q6J("serviceId",n.getCurrentServiceId())("moduleId",n.moduleId))},dependencies:[C.I,g.T,y.c,S.b,Z.X,l.a8,l.dn,l.n5,b.X$]}),i})();var O=r(25646),ue=r(37763);let ge=(()=>{class i extends u.U{constructor(t){super(),this.instructorService=t,this.isLoaded=!1,this.mandatoryColomns=["Ser","en_Name","ar_Name","job","is_TOT","mobile","actions"],this.optionalColomns=["code","phone","email","qualification","note"]}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new p.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}ngOnInit(){}getList(t,n){this.dataSource=new p.by(null),this.isLoaded=!1,this.page.pageIndex=t,n&&(this.page.pageSize=n),this.removePageParams(),this.instructorService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(s=>{if(s.message.messageType==d.u.Success){if(0==s.data.length&&t>1)return void this.getList(this.prevPage);this.dataSource=new p.by(s.data),this.isLoaded=!0,this.page.length=s.meta.totalItemCount,this.page.meta=s.meta}else this.errorList(s?.message?.messages)})}delete(t){this.showLoading(),this.instructorService.Delete(t.id).subscribe(n=>{n.message.messageType==d.u.Success?(this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),this.deleteSuccessfullyMsg("InstructorRemoved")):this.errorList(n?.message?.messages),this.hideLoading()})}onDelete(t){let n=this.msgTranslate(t.ar_Name,t.en_Name);this.deleteDialog(n).subscribe(a=>{a&&this.delete(t)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ue.u))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-instructor-index"]],features:[e.qOj],decls:8,vars:13,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","instructors","parentTitle","training","TitleHasGlobalFunc","",3,"globalFunctions"],[1,"index-card"],[3,"isLoaded","mandatoryColomns","optionalColomns","page","actions","dataSource","exportService","onChangePage","deleteRow"],[3,"title"],[3,"serviceId","moduleId"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.qZA(),e.TgZ(2,"mat-card",2)(3,"mat-card-content")(4,"app-material-table",3),e.NdJ("onChangePage",function(s){return n.getList(s.pageIndex+1,s.pageSize)})("deleteRow",function(s){return n.onDelete(s)}),e.qZA()()(),e.TgZ(5,"side-helping-menu",4),e.ALo(6,"translate"),e._UZ(7,"app-dashboard-display",5),e.qZA()),2&t&&(e.xp6(1),e.Q6J("globalFunctions",n.globalFunctions),e.xp6(3),e.Q6J("isLoaded",n.isLoaded)("mandatoryColomns",n.mandatoryColomns)("optionalColomns",n.optionalColomns)("page",n.page)("actions",n.rowFunctions)("dataSource",n.dataSource)("exportService",n.instructorService),e.xp6(1),e.s9C("title",e.lcZ(6,11,"Dashboard")),e.xp6(2),e.Q6J("serviceId",n.getCurrentServiceId())("moduleId",n.moduleId))},dependencies:[C.I,g.T,y.c,S.b,Z.X,l.a8,l.dn,l.n5,b.X$]}),i})();var Y=r(91523),j=r(94343),J=r(61064),P=r(52682),H=r(20957),L=r(86257),U=r(86405),m=r(24006),_=r(35478),N=r(18521),I=r(26315);let _e=(()=>{class i extends N.K{constructor(){super()}create(t){return this.post("Training/course/AddCompetenceDetailToCourse",t)}getAllByCourseId(t){return this.get("Training/Course/GetAllCourseCompetenceData",{params:{$filter:`course_id eq ${t}`,$expand:`${I.db.core_Competence_Detail}.${I.db.core_Competence},${I.db.core_Competence_Detail}.${I.db.core_Competence_Level}`}})}Delete(t){return this.delete("Training/Course/DeleteCourseCompetenceDetail",{params:t})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var T=r(57566),v=r(44850),fe=r(18969),Ce=r(52945);function Ie(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-material-table",13),e.NdJ("deleteRow",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(a))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("showPaginator",!1)("showFilter",!1)("showSpaceTop",!1)}}let be=(()=>{class i extends u.U{constructor(t){super(),this.courseCompetenceService=t,this.completed=new e.vpe,this.submitted=!1,this.mandatoryColomns=["competence","competenceLevel","actions"],this.optionalColomns=[],this.isLoaded=!1}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],competenceId:[null,[m.kI.required]],competenceLevelId:[null,[m.kI.required]]})}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new p.by(null)),this.checkNoBusinessOrCompany()&&this.courseId>0?this.getAll():this.isLoaded=!0}get formCtrls(){return this.form.controls}getAll(){this.dataSource=new p.by(null),this.isLoaded=!1,this.courseCompetenceService.getAllByCourseId(this.courseId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==d.u.Success?(this.dataSource=new p.by(function he(i){return i.map(o=>({...o,competence:(0,_._f)(o.core_Competence_Detail?.core_Competence?.ar_Name,o.core_Competence_Detail?.core_Competence?.en_Name),competenceLevel:(0,_._f)(o.core_Competence_Detail?.core_Competence_Level?.ar_Name,o.core_Competence_Detail?.core_Competence_Level?.en_Name)}))}(t.data)),this.isLoaded=!0):this.errorList(t?.message?.messages)})}submit(){this.submitted=!0,this.form.valid&&this.create({course_ID:this.courseId,competence_ID:this.form.value.competenceId,competence_Level_ID:this.form.value.competenceLevelId})}create(t){this.showLoading(),this.courseCompetenceService.create(t).subscribe(n=>{n?.message?.messageType==d.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canRemoveFromIndex","newCourseCompetenceAdded"),this.getAll(),this.completed.emit(!0)):this.errorList(n?.message?.messages),this.hideLoading()})}onDelete(t){this.deleteDialog(t.competence+" - "+t.competenceLevel).subscribe(a=>{a&&this.delete(t)})}delete(t){let n={CourseId:this.courseId,CompetenceDetailId:t.competence_Detail_ID};this.showLoading(),this.courseCompetenceService.Delete(n).subscribe(a=>{a.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg("courseCompetenceRemoved"),this.getAll()):this.errorList(a?.message?.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_e))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-course-competence"]],inputs:{courseId:"courseId"},outputs:{completed:"completed"},features:[e.qOj],decls:19,vars:12,consts:[[1,"row"],[1,"col-12"],["container",""],["title","courseCompetence"],[1,"container-fluid","mtop-40"],[3,"formGroup"],[1,"row","justify-content-between"],[1,"col-md-4","col-12"],[3,"control","submitted","filter"],[3,"control","competenceControl","submitted","filter"],[1,"col-md-3","col-12"],["icon","pi pi-plus-circle","styleClass","btn-large mt-1",3,"disabled","color","iconPositionBefore","onClick"],["class","table-in-forms small-table",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","showPaginator","showFilter","showSpaceTop","deleteRow",4,"ngIf"],[1,"table-in-forms","small-table",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","showPaginator","showFilter","showSpaceTop","deleteRow"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",null,2)(4,"mat-card-title"),e._UZ(5,"page-title",3),e.qZA(),e._UZ(6,"mat-divider"),e.TgZ(7,"mat-card-content",4)(8,"div",0)(9,"div",1)(10,"form",5)(11,"div",6)(12,"div",7),e._UZ(13,"app-competence-dropdown",8),e.qZA(),e.TgZ(14,"div",7),e._UZ(15,"app-competence-level-by-competence-dropdown",9),e.qZA(),e.TgZ(16,"div",10)(17,"submit-btn",11),e.NdJ("onClick",function(){return n.submit()}),e.qZA()()()()()()(),e.YNc(18,Ie,1,8,"app-material-table",12),e.qZA()()()),2&t&&(e.xp6(10),e.Q6J("formGroup",n.form),e.xp6(3),e.Q6J("control",n.formCtrls.competenceId)("submitted",n.submitted)("filter",!0),e.xp6(2),e.Q6J("control",n.formCtrls.competenceLevelId)("competenceControl",n.formCtrls.competenceId)("submitted",n.submitted)("filter",!0),e.xp6(2),e.Q6J("disabled",!n.courseId)("color",n.btn.darkBlue)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",n.courseId>0))},dependencies:[h.O5,C.I,T.p,g.T,l.a8,l.dn,l.n5,v.d,fe.y,Ce.f,m._Y,m.JL,m.sg]}),i})();var z=r(47941),$=r(19822);function ve(i,o){if(1&i&&(e.ynx(0),e._UZ(1,"app-material-table",14),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("isLoaded",t.isLoaded)("dataSource",t.tspDataSource)("mandatoryColomns",t.mandatoryTspColomns)("optionalColomns",t.optionalTspColomns)("showPaginator",!1)("showFilter",!1)("showSpaceTop",!1)}}function Te(i,o){if(1&i&&(e.ynx(0),e._UZ(1,"app-material-table",14),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("isLoaded",t.isLoaded)("dataSource",t.instructorDataSource)("mandatoryColomns",t.mandatoryIsnstructorColomns)("optionalColomns",t.optionalIsnstructorColomns)("showPaginator",!1)("showFilter",!1)("showSpaceTop",!1)}}let we=(()=>{class i extends u.U{constructor(t,n){super(),this.courseService=t,this.courseGeneralService=n,this.completed=new e.vpe,this.isLoaded=!0,this.submitted=!1,this.mandatoryTspColomns=["Name","location"],this.optionalTspColomns=[],this.mandatoryIsnstructorColomns=["Name","jobTitle"],this.optionalIsnstructorColomns=[],this.course=this.courseGeneralService.course$.getValue()}ngOnInit(){this.tspform=this.fb.group({tsP_IDs:[[],[m.kI.required]]}),this.intstrucorForm=this.fb.group({instructor_IDs:[[],[m.kI.required]]})}onChangeBusinessAndCompanyId(){this.tspDataSource?.data?.length>0&&(this.tspDataSource=new p.by(null)),this.instructorDataSource?.data?.length>0&&(this.instructorDataSource=new p.by(null)),this.checkNoBusinessOrCompany()&&this.courseId>0?this.getCourseById():this.isLoaded=!0}submitTsp(){if(this.submitted=!0,this.tspform.valid){let t={};t.Course_ID=this.courseId,t.TSP_IDs=this.tspform.controls.tsP_IDs.value,this.showLoading("tsp"),this.courseService.addTSPToCourse(t).subscribe(n=>{n.message.messageType==d.u.Success?(this.addSuccessfullyMsg("NewTspAddToCourse","successfulAdd"),this.getCourseById(),this.submitted=!1,this.completed.emit(!0)):this.errorList(n?.message?.messages),this.hideLoading("tsp")})}}submitInstructor(){if(this.submitted=!0,this.intstrucorForm.valid){let t={};t.Course_ID=this.courseId,t.Instructor_IDs=this.intstrucorForm.controls.instructor_IDs.value,this.showLoading("tsp"),this.courseService.addInstructorToCourse(t).subscribe(n=>{n.message.messageType==d.u.Success?(this.addSuccessfullyMsg("NewInstructorAddToCourse","successfulAdd"),this.getCourseById(),this.completed.emit(!0),this.submitted=!1):this.errorList(n?.message?.messages),this.hideLoading("tsp")})}}getCourseById(){this.tspDataSource=new p.by(null),this.instructorDataSource=new p.by(null),this.isLoaded=!1,this.courseService.getById(this.courseId).subscribe(t=>{if(t.message.messageType==d.u.Success){this.course=(0,D.o)(t.data)[0],this.instructorDataSource=new p.by(this.course.trA_Instructor_Course),this.tspDataSource=new p.by(this.course.trA_TSP_Course);let n=[],a=[];this.course.trA_Instructor_Course.forEach(s=>{n.push(s.instructor_ID)}),this.course.trA_TSP_Course.forEach(s=>{a.push(s.tsP_ID)}),this.intstrucorForm.controls.instructor_IDs.setValue(n),this.tspform.controls.tsP_IDs.setValue(a)}else this.errorList(t?.message?.messages)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w.N),e.Y36(j.b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-course-tsp-and-instructor"]],inputs:{courseId:"courseId"},outputs:{completed:"completed"},features:[e.qOj],decls:33,vars:19,consts:[[3,"name"],[1,"row"],[1,"col-12"],["tspContainer",""],["title","TSP"],[3,"formGroup"],[1,"container-fluid","mtop-25"],[1,"row","justify-content-between"],[1,"col-md-4","col-12"],[3,"control","multi","filter","submitted"],["icon","pi pi-plus-circle","styleClass","btn-large mt-1",3,"color","disabled","iconPositionBefore","onClick"],[4,"ngIf"],[1,"col-12","mt-3"],["title","instructors"],[1,"table-in-forms","small-table",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","showPaginator","showFilter","showSpaceTop"]],template:function(t,n){1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"div",2)(3,"mat-card",null,3)(5,"mat-card-title"),e._UZ(6,"page-title",4),e.qZA(),e._UZ(7,"mat-divider"),e.TgZ(8,"div",1)(9,"div",2)(10,"form",5)(11,"mat-card-content",6)(12,"div",7)(13,"div",8),e._UZ(14,"app-tsp-dropdown",9),e.qZA(),e.TgZ(15,"div",8)(16,"submit-btn",10),e.NdJ("onClick",function(){return n.submitTsp()}),e.qZA()()()(),e.YNc(17,ve,2,7,"ng-container",11),e.qZA()()()()(),e.TgZ(18,"div",12)(19,"mat-card")(20,"mat-card-title"),e._UZ(21,"page-title",13),e.qZA(),e._UZ(22,"mat-divider"),e.TgZ(23,"div",1)(24,"div",2)(25,"form",5)(26,"mat-card-content",6)(27,"div",7)(28,"div",8),e._UZ(29,"app-instructor-dropdown",9),e.qZA(),e.TgZ(30,"div",8)(31,"submit-btn",10),e.NdJ("onClick",function(){return n.submitInstructor()}),e.qZA()()()(),e.YNc(32,Te,2,7,"ng-container",11),e.qZA()()()()()()),2&t&&(e.Q6J("name","tsp"),e.xp6(10),e.Q6J("formGroup",n.tspform),e.xp6(4),e.Q6J("control",n.tspform.controls.tsP_IDs)("multi",!0)("filter",!0)("submitted",n.submitted),e.xp6(2),e.Q6J("color",n.btn.darkBlue)("disabled",!n.courseId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",n.courseId),e.xp6(8),e.Q6J("formGroup",n.intstrucorForm),e.xp6(4),e.Q6J("control",n.intstrucorForm.controls.instructor_IDs)("multi",!0)("filter",!0)("submitted",n.submitted),e.xp6(2),e.Q6J("color",n.btn.darkBlue)("disabled",!n.courseId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",n.courseId))},dependencies:[h.O5,C.I,T.p,g.T,l.a8,l.dn,l.n5,v.d,U.Ro,z.M,$.W,m._Y,m.JL,m.sg]}),i})();var ye=r(12054);const Se=["stepper"];function Ze(i,o){if(1&i&&e._UZ(0,"app-add-new-btn",4),2&i){const t=e.oxw();e.MGl("url","/training/",t.moduleId,"/course/add"),e.Q6J("params",t.parentParam)}}function Ae(i,o){1&i&&e._UZ(0,"i",14)}function Le(i,o){1&i&&e._UZ(0,"i",14)}function xe(i,o){1&i&&e._UZ(0,"i",14)}function De(i,o){1&i&&e._UZ(0,"i",14)}let X=(()=>{class i extends u.U{constructor(t,n){super(),this.courseService=t,this.courseGeneralService=n,this.courseId=0,this.isloaded=!1,this.isGeneraCompleted=!1,this.isTspInstructor=!1,this.isCompetence=!1,this.isOutline=!1,this.isEdit=!1,this.courseGeneralService.course$.next(null)}ngOnInit(){this.activatedRoute.paramMap.subscribe(t=>{this.courseId=Number(t.get("id"))??0,this.courseId>0&&(this.isEdit=!0)}),this.courseId>0&&this.checkNoBusinessOrCompany()?this.getCourseById():this.isloaded=!0}getCourseById(){this.showLoading("core"),this.courseService.getById(this.courseId).subscribe(t=>{t.message.messageType==d.u.Success?(this.course=(0,D.o)(t.data)[0],this.courseGeneralService.course$.next(this.course),this.isloaded=!0):this.errorList(t?.message?.messages),this.hideLoading("core")})}getCourseId(t){this.courseId=t}OnDestroy(){this.courseGeneralService.course$.next(null)}stepChanged(){this.stepper.selected.interacted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w.N),e.Y36(j.b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-course"]],viewQuery:function(t,n){if(1&t&&e.Gf(Se,5),2&t){let a;e.iGM(a=e.CRH())&&(n.stepper=a.first)}},features:[e.qOj],decls:32,vars:49,consts:[[3,"name"],[1,"title-no-margin","title-section","fixed-title"],["addTitle","addCourse","editTitle","editCourse",3,"id","parentTitle","parentTitleLink","title","parentLinkParams"],[3,"url","params",4,"ngIf"],[3,"url","params"],[1,"has-fixed-title"],[3,"linear","disableRipple","selectionChange"],["stepper",""],[3,"label","completed"],["matStepperIcon","edit"],[3,"isGeneral","changeCourseId","completed"],[3,"courseId","completed"],[3,"isOutline","courseId","completed"],[3,"stepper","parentParam","url","pageParams"],[1,"fas","fa-check"]],template:function(t,n){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"mat-card-title",1),e._UZ(2,"page-title",2),e.ALo(3,"translate"),e.ALo(4,"translate"),e.YNc(5,Ze,1,2,"app-add-new-btn",3),e._UZ(6,"app-back-btn",4),e.qZA(),e.ynx(7),e.TgZ(8,"mat-card-content",5)(9,"mat-stepper",6,7),e.NdJ("selectionChange",function(){return n.stepChanged()}),e.TgZ(11,"mat-step",8),e.ALo(12,"titlecase"),e.ALo(13,"translate"),e.YNc(14,Ae,1,0,"ng-template",9),e.TgZ(15,"app-add-course-form",10),e.NdJ("changeCourseId",function(s){return n.getCourseId(s)})("completed",function(s){return n.isGeneraCompleted=s}),e.qZA()(),e.TgZ(16,"mat-step",8),e.ALo(17,"titlecase"),e.ALo(18,"translate"),e.YNc(19,Le,1,0,"ng-template",9),e.TgZ(20,"app-course-tsp-and-instructor",11),e.NdJ("completed",function(s){return n.isTspInstructor=s}),e.qZA()(),e.TgZ(21,"mat-step",8),e.ALo(22,"titlecase"),e.ALo(23,"translate"),e.YNc(24,xe,1,0,"ng-template",9),e.TgZ(25,"app-course-competence",11),e.NdJ("completed",function(s){return n.isCompetence=s}),e.qZA()(),e.TgZ(26,"mat-step",8),e.ALo(27,"titlecase"),e.ALo(28,"translate"),e.YNc(29,De,1,0,"ng-template",9),e.TgZ(30,"app-add-course-form",12),e.NdJ("completed",function(s){return n.isOutline=s}),e.qZA()()()(),e._UZ(31,"steps-footer",13),e.BQk()),2&t){const a=e.MAs(10);e.Q6J("name","core"),e.xp6(2),e.hYB("parentTitle","",e.lcZ(3,29,"training")," / ",e.lcZ(4,31,"courses"),""),e.MGl("parentTitleLink","/training/",n.moduleId,"/course"),e.Q6J("id",n.isEdit?1:0)("title",n.isEdit?"edit":"add")("parentLinkParams",n.pageParams),e.xp6(3),e.Q6J("ngIf",n.courseId>0),e.xp6(1),e.MGl("url","/training/",n.moduleId,"/course/index"),e.Q6J("params",n.pageParams),e.xp6(3),e.Q6J("linear",!1)("disableRipple",!0),e.xp6(2),e.s9C("label",e.lcZ(12,33,e.lcZ(13,35,"general"))),e.Q6J("completed",n.isGeneraCompleted),e.xp6(4),e.Q6J("isGeneral",!0),e.xp6(1),e.s9C("label",e.lcZ(17,37,e.lcZ(18,39,"tspAndInstructor"))),e.Q6J("completed",n.isTspInstructor),e.xp6(4),e.Q6J("courseId",n.courseId),e.xp6(1),e.s9C("label",e.lcZ(22,41,e.lcZ(23,43,"courseCompetence"))),e.Q6J("completed",n.isCompetence),e.xp6(4),e.Q6J("courseId",n.courseId),e.xp6(1),e.s9C("label",e.lcZ(27,45,e.lcZ(28,47,"outlineAndAttachments"))),e.Q6J("completed",n.isOutline),e.xp6(4),e.Q6J("isOutline",!0)("courseId",n.courseId),e.xp6(1),e.MGl("url","/training/",n.moduleId,"/course"),e.Q6J("stepper",a)("parentParam",n.parentParam)("pageParams",n.pageParams)}},dependencies:[h.O5,J.a,P.J,g.T,H.j,l.dn,l.n5,L.C0,L.Vq,L.z9,U.Ro,be,we,ye.F,h.rS,b.X$]}),i})();var Je=r(34879),K=r(24714);let Pe=(()=>{class i extends u.U{constructor(t){super(),this.trainingRequestService=t,this.isLoaded=!1,this.mandatoryColomns=["Ser","course_name","reason","fromDate","toDate","actions"],this.optionalColomns=["note"]}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new p.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}ngOnInit(){}getList(t,n){this.dataSource=new p.by(null),this.isLoaded=!1,this.page.pageIndex=t,n&&(this.page.pageSize=n),this.removePageParams(),this.trainingRequestService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(s=>{if(s.message.messageType==d.u.Success){if(0==s.data.length&&t>1)return void this.getList(this.prevPage);this.dataSource=new p.by((0,Je.x)(s.data)),this.isLoaded=!0,this.page.length=s.meta.totalItemCount,this.page.meta=s.meta}else this.errorList(s?.message?.messages)})}delete(t){this.showLoading(),this.trainingRequestService.Delete(t.id).subscribe(n=>{n.message.messageType==d.u.Success?(this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),this.deleteSuccessfullyMsg("TrainingRequestRemoved")):this.errorList(n?.message?.messages),this.hideLoading()})}onDelete(t){let n=this.msgTranslate(t.course_name);this.deleteDialog(n).subscribe(a=>{a&&this.delete(t)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(K.M))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-training-request-index"]],features:[e.qOj],decls:8,vars:13,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","trainingRequest","parentTitle","training","TitleHasGlobalFunc","",3,"globalFunctions"],[1,"index-card"],[3,"isLoaded","mandatoryColomns","optionalColomns","page","actions","dataSource","exportService","onChangePage","deleteRow"],[3,"title"],[3,"serviceId","moduleId"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.qZA(),e.TgZ(2,"mat-card",2)(3,"mat-card-content")(4,"app-material-table",3),e.NdJ("onChangePage",function(s){return n.getList(s.pageIndex+1,s.pageSize)})("deleteRow",function(s){return n.onDelete(s)}),e.qZA()()(),e.TgZ(5,"side-helping-menu",4),e.ALo(6,"translate"),e._UZ(7,"app-dashboard-display",5),e.qZA()),2&t&&(e.xp6(1),e.Q6J("globalFunctions",n.globalFunctions),e.xp6(3),e.Q6J("isLoaded",n.isLoaded)("mandatoryColomns",n.mandatoryColomns)("optionalColomns",n.optionalColomns)("page",n.page)("actions",n.rowFunctions)("dataSource",n.dataSource)("exportService",n.trainingRequestService),e.xp6(1),e.s9C("title",e.lcZ(6,11,"Dashboard")),e.xp6(2),e.Q6J("serviceId",n.getCurrentServiceId())("moduleId",n.moduleId))},dependencies:[C.I,g.T,y.c,S.b,Z.X,l.a8,l.dn,l.n5,b.X$]}),i})();var R=r(78937),B=r(70137),k=r(25273),G=r(56500),Ue=r(70502),Ne=r(91621),Qe=r(23458),qe=r(16177),Ee=r(8815),Ve=r(92963);function Re(i,o){if(1&i&&e._UZ(0,"app-add-new-btn",3),2&i){const t=e.oxw();e.MGl("url","/training/",t.moduleId,"/training-request/add"),e.Q6J("params",t.parentParam)}}function ke(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",26),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clearForm())}),e.qZA()}}let W=(()=>{class i extends u.U{constructor(t){super(),this.trainingRequestService=t,this.trainingRequestId=0,this.submitted=!1,this.allowBusinessObjective=!1,this.activatedRoute.params.subscribe(n=>{this.trainingRequestId=Number(n.id??0)})}onChangeBusinessAndCompanyId(){this.trainingRequestId>0&&this.checkNoBusinessOrCompany()&&this.getTrainingRequestById()}ngOnInit(){this.form=this.fb.group({id:[this.trainingRequestId,{nonNullable:!0}],course_Category_ID:[null,m.kI.required],sub_Category_ID:[null,m.kI.required],course_ID:[null,[m.kI.required]],reason_ID:[null,[m.kI.required]],from_Date:[null,m.kI.required],to_Date:[null,m.kI.required],note:[null],employee_id:[null,m.kI.required],SelectedBusinessObjectiveIDs:[]},{validator:R.w.compareDates("from_Date","to_Date")})}get formCtrls(){return this.form.controls}submit(){if(this.submitted=!0,this.form.valid){let t={training_request:{id:this.formCtrls.id.value,course_ID:this.formCtrls.course_ID.value,reason_ID:this.formCtrls.reason_ID.value,from_Date:this.formCtrls.from_Date.value,to_Date:this.formCtrls.to_Date.value,note:this.formCtrls.note.value},SelectedSubOrdenateEmployeeInstanceIDs:this.formCtrls.employee_id.value,SelectedBusinessObjectiveIDs:this.formCtrls.SelectedBusinessObjectiveIDs.value};t.training_request.id>0?this.update(t):this.create(t)}}getTrainingRequestById(){this.showLoading(),this.trainingRequestService.getById(this.trainingRequestId).subscribe(t=>{t.message.messageType==d.u.Success&&(this.formCtrls.course_Category_ID.setValue(t.data.training_request.trA_Course?.trA_Course_Sub_Category?.category_ID),this.form.patchValue(t.data.training_request),this.formCtrls.SelectedBusinessObjectiveIDs.setValue(t.data.selectedBusinessObjectiveIDs),this.formCtrls.employee_id.setValue(t.data.selectedSubOrdenateEmployeeInstanceIDs),setTimeout(()=>{this.formCtrls.sub_Category_ID.setValue(t.data.training_request.trA_Course?.course_Sub_Category_ID),this.formCtrls.course_ID.setValue(t.data.training_request.course_ID)},500),this.onReasonChange([t.data.training_request.trA_Reason])),this.errorList(t?.message?.messages),this.hideLoading()})}create(t){this.showLoading(),this.trainingRequestService.create(t).subscribe(n=>{n?.message?.messageType==d.u.Success?(this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newTrainingRequestAdded"),this.trainingRequestId=n.data.training_request.id,this.formCtrls.id.setValue(this.trainingRequestId),this.navigateTo(`/training/${this.moduleId}/training-request/edit/${this.trainingRequestId}`)):this.errorList(n?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this.trainingRequestService.update(t).subscribe(n=>{n?.message?.messageType==d.u.Success?this.updateSuccessfullyMsg("TrainingRequestUpdated"):this.errorList(n?.message?.messages),this.hideLoading()})}onReasonChange(t){t&&t[0]?.hasBusinessObjectives?(this.allowBusinessObjective=!0,this.formCtrls?.SelectedBusinessObjectiveIDs.addValidators([m.kI.required])):(this.allowBusinessObjective=!1,this.formCtrls?.SelectedBusinessObjectiveIDs.setValue([]),this.formCtrls?.SelectedBusinessObjectiveIDs.removeValidators([m.kI.required]))}clearForm(){this.form.reset(),this.submitted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(K.M))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-training-request"]],features:[e.qOj],decls:39,vars:49,consts:[[1,"title-no-margin","title-section","fixed-title"],["addTitle","addTrainingRequest","editTitle","editTrainingRequest",3,"id","parentTitle","parentTitleLink","title","parentLinkParams"],[3,"url","params",4,"ngIf"],[3,"url","params"],[1,"row"],[1,"col-12"],[1,"form-card"],["container",""],[1,"title-no-margin"],["title","generalInfo"],[1,"container-fluid","mt-2"],[3,"formGroup"],[1,"col-md-4","col-12"],["label","employees",3,"control","submitted","multi","filter"],[3,"control","submitted","filter"],[3,"control","categoryControl","submitted","filter"],[1,"col-md-4","col-12","ptop-15"],[3,"control","subCategoryControl","submitted","filter"],[3,"control","submitted","filter","multi","change"],[3,"control","submitted","filter","multi","disable"],["label","froM_DATE",3,"control","submitted"],["label","tO_DATE",3,"control","submitted"],["label","notes",3,"control","submitted"],["align","end"],[3,"click",4,"ngIf"],["icon","pi pi-plus-circle",3,"id","color","iconPositionBefore","onClick"],[3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ynx(4),e.YNc(5,Re,1,2,"app-add-new-btn",2),e._UZ(6,"app-back-btn",3),e.BQk(),e.qZA(),e.TgZ(7,"div",4)(8,"div",5)(9,"mat-card",6,7)(11,"mat-card-title",8),e._UZ(12,"page-title",9),e.qZA(),e.TgZ(13,"mat-card-content",10)(14,"div",4)(15,"div",5)(16,"form",11)(17,"div",4)(18,"div",12),e._UZ(19,"app-employee-dropdown",13),e.qZA(),e.TgZ(20,"div",12),e._UZ(21,"app-course-category-dropdown",14),e.qZA(),e.TgZ(22,"div",12),e._UZ(23,"app-course-sub-category-dropdown",15),e.qZA(),e.TgZ(24,"div",16),e._UZ(25,"course-by-subCategory-dropdown",17),e.qZA(),e.TgZ(26,"div",16)(27,"app-reason-dropdown",18),e.NdJ("change",function(s){return n.onReasonChange(s)}),e.qZA()(),e.TgZ(28,"div",16),e._UZ(29,"business-objective-dropdown",19),e.qZA(),e.TgZ(30,"div",16),e._UZ(31,"app-datepicker",20),e.qZA(),e.TgZ(32,"div",16),e._UZ(33,"app-datepicker",21),e.qZA(),e.TgZ(34,"div",16),e._UZ(35,"app-input",22),e.qZA()()()()()(),e.TgZ(36,"mat-card-actions",23),e.YNc(37,ke,1,0,"reset-form-btn",24),e.TgZ(38,"submit-btn",25),e.NdJ("onClick",function(){return n.submit()}),e.qZA()()()()()),2&t&&(e.xp6(1),e.hYB("parentTitle","",e.lcZ(2,45,"training")," / ",e.lcZ(3,47,"trainingRequest"),""),e.MGl("parentTitleLink","/training/",n.moduleId,"/training-request"),e.Q6J("id",n.formCtrls.id.value)("title",n.formCtrls.id.value>0?"edit":"add")("parentLinkParams",n.pageParams),e.xp6(4),e.Q6J("ngIf",n.trainingRequestId>0),e.xp6(1),e.MGl("url","/training/",n.moduleId,"/training-request/index"),e.Q6J("params",n.pageParams),e.xp6(10),e.Q6J("formGroup",n.form),e.xp6(3),e.Q6J("control",n.formCtrls.employee_id)("submitted",n.submitted)("multi",!0)("filter",!0),e.xp6(2),e.Q6J("control",n.formCtrls.course_Category_ID)("submitted",n.submitted)("filter",!0),e.xp6(2),e.Q6J("control",n.formCtrls.sub_Category_ID)("categoryControl",n.formCtrls.course_Category_ID)("submitted",n.submitted)("filter",!0),e.xp6(2),e.Q6J("control",n.formCtrls.course_ID)("subCategoryControl",n.formCtrls.sub_Category_ID)("submitted",n.submitted)("filter",!0),e.xp6(2),e.Q6J("control",n.formCtrls.reason_ID)("submitted",n.submitted)("filter",!0)("multi",!1),e.xp6(2),e.Q6J("control",n.formCtrls.SelectedBusinessObjectiveIDs)("submitted",n.submitted)("filter",!0)("multi",!0)("disable",!n.allowBusinessObjective),e.xp6(2),e.Q6J("control",n.formCtrls.from_Date)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.formCtrls.to_Date)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.formCtrls.note)("submitted",n.submitted),e.xp6(2),e.Q6J("ngIf",0==n.formCtrls.id.value),e.xp6(1),e.Q6J("id",n.formCtrls.id.value)("color",n.btn.darkBlue)("iconPositionBefore",!1)("id",n.formCtrls.id.value))},dependencies:[h.O5,B.Q,k.a,J.a,P.J,G.J,T.p,g.T,Ue.J,l.a8,l.dn,l.n5,l.hq,Ne.Z,Qe.e,qe.P,Ee.W,Ve._,m._Y,m.JL,m.sg,b.X$]}),i})();var ee=r(84656);let Fe=(()=>{class i extends u.U{constructor(t){super(),this.TrainingPlanIndexService=t,this.isLoaded=!1,this.mandatoryColomns=["Ser","id","ar_Name","en_Name","from_Date","to_Date","budget","count_Courses","count_Persons","actions"],this.optionalColomns=[]}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new p.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}ngOnInit(){}getList(t,n){this.dataSource=new p.by(null),this.isLoaded=!1,this.page.pageIndex=t,n&&(this.page.pageSize=n),this.removePageParams(),this.TrainingPlanIndexService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(s=>{if(s.message.messageType==d.u.Success){if(0==s.data.length&&t>1)return void this.getList(this.prevPage);s.data.map(x=>{x.id=x.plan_ID,x.from_Date=_.M6.mapDate(x.from_Date),x.to_Date=_.M6.mapDate(x.to_Date)}),this.dataSource=new p.by(s.data),this.isLoaded=!0,this.page.length=s.meta.totalItemCount,this.page.meta=s.meta}else this.errorList(s?.message?.messages)})}delete(t){this.showLoading(),this.TrainingPlanIndexService.Delete(t.id).subscribe(n=>{n.message.messageType==d.u.Success?(this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),this.deleteSuccessfullyMsg("TrainingPlanRemoved")):this.errorList(n?.message?.messages),this.hideLoading()})}onDelete(t){let n=this.msgTranslate(t.ar_Name,t.en_Name);this.deleteDialog(n).subscribe(a=>{a&&this.delete(t)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ee.H))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-training-plan-index"]],features:[e.qOj],decls:8,vars:14,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","trainingPlanIndex","parentTitle","training","TitleHasGlobalFunc","",3,"globalFunctions"],[1,"index-card"],[3,"isRowClickable","isLoaded","mandatoryColomns","optionalColomns","page","actions","dataSource","exportService","onChangePage","deleteRow"],[3,"title"],[3,"serviceId","moduleId"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.qZA(),e.TgZ(2,"mat-card",2)(3,"mat-card-content")(4,"app-material-table",3),e.NdJ("onChangePage",function(s){return n.getList(s.pageIndex+1,s.pageSize)})("deleteRow",function(s){return n.onDelete(s)}),e.qZA()()(),e.TgZ(5,"side-helping-menu",4),e.ALo(6,"translate"),e._UZ(7,"app-dashboard-display",5),e.qZA()),2&t&&(e.xp6(1),e.Q6J("globalFunctions",n.globalFunctions),e.xp6(3),e.Q6J("isRowClickable",!0)("isLoaded",n.isLoaded)("mandatoryColomns",n.mandatoryColomns)("optionalColomns",n.optionalColomns)("page",n.page)("actions",n.rowFunctions)("dataSource",n.dataSource)("exportService",n.TrainingPlanIndexService),e.xp6(1),e.s9C("title",e.lcZ(6,12,"Dashboard")),e.xp6(2),e.Q6J("serviceId",n.getCurrentServiceId())("moduleId",n.moduleId))},dependencies:[C.I,g.T,y.c,S.b,Z.X,l.a8,l.dn,l.n5,b.X$]}),i})();var Be=r(20430),te=r(93665),ne=r(38368),Q=r(4859),Ge=r(84724);function Me(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.isUpdate=!0)}),e._UZ(1,"i",10),e.qZA()}}function Oe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.isUpdate=!1)}),e._UZ(1,"i",11),e.qZA()}}function Ye(i,o){if(1&i&&(e.TgZ(0,"div",15),e._UZ(1,"app-view-data-row-item",16)(2,"app-view-data-row-item",17)(3,"app-view-data-row-item",18)(4,"app-view-data-row-item",19)(5,"app-view-data-row-item",20)(6,"app-view-data-row-item",21),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("value",null==t.plan?null:t.plan.en_Name),e.xp6(1),e.Q6J("value",null==t.plan?null:t.plan.ar_Name),e.xp6(1),e.Q6J("value",null==t.plan?null:t.plan.from_Date)("isDate",!0),e.xp6(1),e.Q6J("value",null==t.plan?null:t.plan.to_Date)("isDate",!0),e.xp6(1),e.Q6J("value",null==t.plan?null:t.plan.budget),e.xp6(1),e.Q6J("value",null==t.plan?null:t.plan.note)}}function je(i,o){1&i&&e._UZ(0,"app-view-card-row-skeleton")}function He(i,o){if(1&i&&(e.TgZ(0,"div",12),e.YNc(1,Ye,7,8,"div",13),e.YNc(2,je,1,0,"app-view-card-row-skeleton",14),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isLoaded),e.xp6(1),e.Q6J("ngIf",!t.isLoaded)}}function ze(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-plan-general-data",22),e.NdJ("closeAfterUpdate",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.returnToView(a))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("plan",t.plan)}}let ie=(()=>{class i extends u.U{constructor(t){super(),this.trainingPlanIndexService=t,this.isUpdate=!1,this.planId=0,this.isLoaded=!1}onChangeBusinessAndCompanyId(){this.planId>0&&this.checkNoBusinessOrCompany()&&this.getPlanById()}ngOnInit(){}getPlanById(){this.isLoaded=!1,this.trainingPlanIndexService.getById(this.planId).subscribe(t=>{t.message.messageType==d.u.Success?(this.plan=t.data[0],this.isLoaded=!0):this.errorList(t?.message?.messages)})}returnToView(t){this.isUpdate=!1,this.plan=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ee.H))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-general-info-plan-view"]],inputs:{planId:"planId"},features:[e.qOj],decls:13,vars:4,consts:[[1,"row"],[1,"col-12"],["container",""],[1,"title-no-margin"],["title","generalInfo",1,"stepper-section-title"],["mat-button","","class","float-right section-edit-btn pright-6 pleft-6 darkBlue",3,"click",4,"ngIf"],[1,"mt-2"],["class","mtop-30",4,"ngIf","ngIfElse"],["form",""],["mat-button","",1,"float-right","section-edit-btn","pright-6","pleft-6","darkBlue",3,"click"],[1,"ft-edit-1","font-medium-3"],[1,"ft-corner-up-left","font-medium-3"],[1,"mtop-30"],["class","view-data-row-container",4,"ngIf"],[4,"ngIf"],[1,"view-data-row-container"],["label","en_Name",1,"col-4","col-md",3,"value"],["label","ar_Name",1,"col-4","col-md",3,"value"],["label","froM_DATE",1,"col-4","col-md",3,"value","isDate"],["label","tO_DATE",1,"col-4","col-md",3,"value","isDate"],["label","budget",1,"col-4","col-md",3,"value"],["label","notes",1,"col-4","col-md",3,"value"],[3,"plan","closeAfterUpdate"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",null,2)(4,"mat-card-title",3),e._UZ(5,"page-title",4),e.YNc(6,Me,2,0,"button",5),e.YNc(7,Oe,2,0,"button",5),e.qZA(),e._UZ(8,"mat-divider",6),e.TgZ(9,"mat-card-content"),e.YNc(10,He,3,2,"div",7),e.YNc(11,ze,1,1,"ng-template",null,8,e.W1O),e.qZA()()()()),2&t){const a=e.MAs(12);e.xp6(6),e.Q6J("ngIf",!n.isUpdate),e.xp6(1),e.Q6J("ngIf",n.isUpdate),e.xp6(3),e.Q6J("ngIf",!n.isUpdate)("ngIfElse",a)}},dependencies:[h.O5,g.T,te.l,ne.I,Q.lW,l.a8,l.dn,l.n5,v.d,Ge.Q]}),i})();var $e=r(8656),Xe=r(70486);let Ke=(()=>{class i extends u.U{constructor(){super(),this.showTna=!1,this.showCourses=!1,this.updateCourseDropdown=!1,this.viewsManager=c.S}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.planId=Number(t.id)??0})}scrollToSection(t){const n=document.getElementById(t);n&&n.scrollIntoView({behavior:"smooth",block:"start"})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-plan-view-core"]],viewQuery:function(t,n){if(1&t&&e.Gf(ie,5),2&t){let a;e.iGM(a=e.CRH())&&(n.generalInfoComponent=a.first)}},features:[e.qOj],decls:10,vars:27,consts:[[1,"title-no-margin","title-section","fixed-title"],[3,"title","parentTitle","parentTitleLink","parentLinkParams"],[3,"url","params"],[3,"planId"],[3,"id","isView","planId","updateViewDisplay","updateCourseDropdown"],[3,"id","isView","planId","updateCourseDropdown","updateViewDisplay"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ynx(4),e._UZ(5,"app-add-new-btn",2)(6,"app-back-btn",2),e.BQk(),e.qZA(),e._UZ(7,"app-general-info-plan-view",3),e.TgZ(8,"app-training-needs-analysis",4),e.NdJ("updateViewDisplay",function(s){return n.showTna=s,n.scrollToSection(n.viewsManager.plan_tna)})("updateCourseDropdown",function(){return n.updateCourseDropdown=!n.updateCourseDropdown}),e.qZA(),e.TgZ(9,"app-plan-courses-and-expensis",5),e.NdJ("updateViewDisplay",function(s){return n.showCourses=s,n.scrollToSection(n.viewsManager.plan_course)}),e.qZA()),2&t&&(e.xp6(1),e.hYB("parentTitle","",e.lcZ(2,23,"training")," / ",e.lcZ(3,25,"trainingPlanIndex"),""),e.MGl("parentTitleLink","/training/",n.moduleId,"/training-plan"),e.Q6J("title",n.msgTranslate(null==n.generalInfoComponent||null==n.generalInfoComponent.plan?null:n.generalInfoComponent.plan.ar_Name,null==n.generalInfoComponent||null==n.generalInfoComponent.plan?null:n.generalInfoComponent.plan.en_Name))("parentLinkParams",n.pageParams),e.xp6(4),e.MGl("url","/training/",n.moduleId,"/training-plan/add"),e.Q6J("params",n.parentParam),e.xp6(1),e.MGl("url","/training/",n.moduleId,"/training-plan/index"),e.Q6J("params",n.pageParams),e.xp6(1),e.ekj("hidden",n.showCourses||n.showTna),e.Q6J("planId",n.planId),e.xp6(1),e.ekj("hidden",n.showCourses),e.Q6J("id",n.viewsManager.plan_tna)("isView",!0)("planId",n.planId),e.xp6(1),e.ekj("hidden",n.showTna),e.Q6J("id",n.viewsManager.plan_course)("isView",!0)("planId",n.planId)("updateCourseDropdown",n.updateCourseDropdown))},dependencies:[J.a,P.J,g.T,l.n5,$e.j,Xe.j,ie,b.X$],styles:[".title-section[_ngcontent-%COMP%]{border-radius:10px!important;margin-bottom:20px!important}"]}),i})();function ae(i){return i.map(o=>({...o,plan:(0,_._f)(o.trA_Plan_Course?.trA_PLan?.ar_Name,o.trA_Plan_Course?.trA_PLan?.en_Name),course:o.trA_Plan_Course?.name,fromDate:_.M6.mapDate(o.from_Date),toDate:_.M6.mapDate(o.to_Date),instructor:(0,_._f)(o.trA_Instructor?.ar_Name,o.trA_Instructor?.en_Name),tsp:(0,_._f)(o.trA_TSP?.ar_Name,o.trA_TSP?.en_Name)}))}var it=r(24850);let M=(()=>{class i extends N.K{constructor(){super()}create(t){return this.post("training/Implementation/Create",t)}update(t){return this.post("training/Implementation/Edit",t)}getAll(){return this.get("training/Implementation/GetAll",{params:{$expand:`${I.db.TRA_plan_course}.${I.db.trA_PLan},${I.db.TRA_plan_course}.${I.db.TRA_Course}`}})}getById(t){return this.get("Training/Implementation/GetAll",{params:{$filter:`ID eq ${t}`,$expand:`${I.db.TRA_plan_course}.${I.db.trA_PLan},${I.db.Tra_Instructor},${I.db.TRA_TSP}`}})}getList(t){return this.get("training/Implementation/GetList",{params:t})}Delete(t){return this.delete("training/Implementation/Delete",{params:{Id:t}})}exportExcel(){return this.getAll().pipe((0,it.U)(t=>(t.data=ae(t.data),t)))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),at=(()=>{class i extends u.U{constructor(t){super(),this.implementationService=t,this.mandatoryColomns=["Ser","id","planName","course","from_Date","to_Date","count_Employees","actions"],this.optionalColomns=[],this.isLoaded=!1}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new p.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,n){this.dataSource=new p.by(null),this.isLoaded=!1,this.removePageParams(),this.page.pageIndex=t,n&&(this.page.pageSize=n),this.implementationService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(s=>{if(1==s.message.messageType){if(0==s.data.length&&t>1)return void this.getList(this.prevPage);this.dataSource=new p.by(function We(i){return i.map(o=>({...o,id:o.impelementation_ID,planName:(0,_._f)(o.plan?.ar_Name,o.plan?.en_Name),course:o.plan_Course?.name,from_Date:_.M6.mapDate(o.from_Date),to_Date:_.M6.mapDate(o.to_Date)}))}(s.data)),this.isLoaded=!0,this.page.length=s.meta.totalItemCount,this.page.meta=s.meta}else this.errorList(s?.message?.messages)})}onDelete(t){this.deleteDialog(t.planName+" - "+t.course).subscribe(a=>{a&&this.delete(t)})}delete(t){this.showLoading(),this.implementationService.Delete(t.id).subscribe(n=>{1==n.message.messageType?(this.deleteSuccessfullyMsg("implementationRemoved"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(n?.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(M))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-implementation-index"]],features:[e.qOj],decls:9,vars:14,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","implementation","parentTitle","training","TitleHasGlobalFunc","",3,"globalFunctions"],[1,"row"],[1,"col-12"],[1,"index-card"],[3,"isRowClickable","isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","exportService","onChangePage","deleteRow"],[3,"title"],[3,"serviceId","moduleId"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.qZA(),e.TgZ(2,"div",2)(3,"div",3)(4,"mat-card",4)(5,"app-material-table",5),e.NdJ("onChangePage",function(s){return n.getList(s.pageIndex+1,s.pageSize)})("deleteRow",function(s){return n.onDelete(s)}),e.qZA()()()(),e.TgZ(6,"side-helping-menu",6),e.ALo(7,"translate"),e._UZ(8,"app-dashboard-display",7),e.qZA()),2&t&&(e.xp6(1),e.Q6J("globalFunctions",n.globalFunctions),e.xp6(4),e.Q6J("isRowClickable",!0)("isLoaded",n.isLoaded)("dataSource",n.dataSource)("mandatoryColomns",n.mandatoryColomns)("optionalColomns",n.optionalColomns)("page",n.page)("actions",n.rowFunctions)("exportService",n.implementationService),e.xp6(1),e.s9C("title",e.lcZ(7,12,"Dashboard")),e.xp6(2),e.Q6J("serviceId",n.getCurrentServiceId())("moduleId",n.moduleId))},dependencies:[C.I,g.T,y.c,S.b,Z.X,l.a8,l.n5,b.X$]}),i})(),ot=(()=>{class i extends N.K{constructor(){super()}create(t){return this.post("training/ImplementationEmployees/Create",t)}getAll(t){return this.get("Training/ImplementationEmployees/GetEmployees",{params:{Implementation_ID:t}})}Delete(t){return this.delete("Training/ImplementationEmployees/Delete",{params:t})}DeleteAll(t){return this.delete("Training/ImplementationEmployees/DeleteAll",{params:{implementation_id:t}})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var st=r(71812);function rt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.isViewUpdate=!0)}),e._UZ(1,"i",12),e.qZA()}}function lt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.isViewUpdate=!1)}),e._UZ(1,"i",13),e.qZA()}}function mt(i,o){if(1&i&&(e.ynx(0),e.YNc(1,rt,2,0,"button",10),e.YNc(2,lt,2,0,"button",10),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isViewUpdate),e.xp6(1),e.Q6J("ngIf",t.isViewUpdate)}}function pt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-button",14),e.NdJ("onClick",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onClearAll())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("color",t.btn.darkBlueBorder)("disabled",!t.isLoaded||!t.dataSourceSelected||0==(null==t.dataSourceSelected||null==t.dataSourceSelected.data?null:t.dataSourceSelected.data.length))}}function dt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"submit-btn",15),e.NdJ("onClick",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.submit())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("color",t.btn.darkBlue)("iconPositionBefore",!1)("disabled",!t.implementationId)}}let F=(()=>{class i extends u.U{constructor(t){super(),this.implementationEmployeeService=t,this.implementationId=0,this.isView=!1,this.completed=new e.vpe,this.mandatoryColomns=["code","employee","department","job","selectAll"],this.mandatoryColomnsView=["code","employee","department","job","actions"],this.isLoaded=!1,this.optionalColomns=[],this.isViewUpdate=!1}ngOnInit(){}ngOnChanges(t){t.implementationId.currentValue>0&&!t.implementationId.previousValue&&!t.implementationId.firstChange&&this.checkNoBusinessOrCompany()&&this.getAll()}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new p.by(null)),this.checkNoBusinessOrCompany()&&this.implementationId>0?this.getAll():this.isLoaded=!0}onModulesChanged(){this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,c.S.implementation_employees)}getAll(){this.dataSource=new p.by(null),this.dataSourceSelected=new p.by(null),this.isLoaded=!1,this.implementationEmployeeService.getAll(this.implementationId).pipe(this.cancelRequest()).subscribe(t=>{if(t.message.messageType==d.u.Success){t.data.sort((a,s)=>a.isSelected===s.isSelected?0:a.isSelected?-1:1);let n=function tt(i){return i.map(o=>({...o,code:o.person?.code,employee:(0,_._f)(o.person?.ar_Name,o.person?.en_Name),department:(0,_._f)(o.org?.ar_Name,o.org?.en_Name),job:(0,_._f)(o.job_Title?.ar_Name,o.job_Title?.en_Name)}))}(t.data);this.dataSource=new p.by(n),this.dataSourceSelected=new p.by(n.filter(a=>a.isSelected)),this.isLoaded=!0}else this.errorList(t?.message?.messages)})}submit(){const t={Implementation_ID:this.implementationId,SelectedEmployees:[]};this.dataSource?.data.filter(n=>n.isSelected).forEach(n=>{t.SelectedEmployees.push(n.person.core_Person_Instance[0].id)}),0!=t.SelectedEmployees.length?this.create(t):this.warning("selectOneEmployee")}create(t){this.showLoading(),this.implementationEmployeeService.create(t).subscribe(n=>{n?.message?.messageType==d.u.Success?(this.addSuccessfullyMsg("canRemoveFromIndex","EmployeeAddedToImplementation"),this.getAll(),this.isView&&(this.isViewUpdate=!1),this.completed.emit(!0)):this.errorList(n?.message?.messages),this.hideLoading()})}onDelete(t){this.deleteDialog(t.employee).subscribe(a=>{a&&this.delete(t)})}delete(t){let n={implementation_id:this.implementationId,person_instance_id:t.person.id};this.showLoading(),this.implementationEmployeeService.Delete(n).subscribe(a=>{a.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg("EmployeeRemovedFromImplementation"),this.getAll()):this.errorList(a?.message?.messages),this.hideLoading()})}onClearAll(){let t=this.translate("allEmployees");this.deleteDialog(t).subscribe(n=>{n&&this.clearAll()})}clearAll(){this.showLoading(),this.implementationEmployeeService.DeleteAll(this.implementationId).subscribe(t=>{t.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg("AllEmployeeRemovedFromImplementation"),this.dataSourceSelected=new p.by([]),this.dataSource.data.map(n=>n.isSelected=!1)):this.errorList(t?.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ot))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-implementation-employees"]],inputs:{implementationId:"implementationId",isView:"isView"},outputs:{completed:"completed"},features:[e.qOj,e.TTD],decls:13,vars:10,consts:[[1,"row"],[1,"col-12"],["container",""],["title","employees",1,"stepper-section-title"],[4,"ngIf"],[1,"container-fluid","mtop-45","p-0"],["isSelectedColName","isSelected",1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","showPaginator","showSpaceTop","deleteRow"],["align","end"],["label","clearAll","styleClass","clearAllBtn",3,"color","disabled","onClick",4,"ngIf"],["icon","pi pi-plus-circle",3,"color","iconPositionBefore","disabled","onClick",4,"ngIf"],["mat-button","","class","float-right section-edit-btn pright-6 pleft-6 darkBlue",3,"click",4,"ngIf"],["mat-button","",1,"float-right","section-edit-btn","pright-6","pleft-6","darkBlue",3,"click"],[1,"fas","fa-pen","font-size-15"],[1,"ft-corner-up-left","font-size-18"],["label","clearAll","styleClass","clearAllBtn",3,"color","disabled","onClick"],["icon","pi pi-plus-circle",3,"color","iconPositionBefore","disabled","onClick"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",null,2)(4,"mat-card-title"),e._UZ(5,"page-title",3),e.YNc(6,mt,3,2,"ng-container",4),e.qZA(),e._UZ(7,"mat-divider"),e.TgZ(8,"mat-card-content",5)(9,"app-material-table",6),e.NdJ("deleteRow",function(s){return n.onDelete(s)}),e.qZA()(),e.TgZ(10,"mat-card-actions",7),e.YNc(11,pt,1,2,"app-button",8),e.YNc(12,dt,1,3,"submit-btn",9),e.qZA()()()()),2&t&&(e.xp6(6),e.Q6J("ngIf",n.isView),e.xp6(3),e.Q6J("isLoaded",n.isLoaded)("dataSource",n.isView&&n.isViewUpdate||!n.isView?n.dataSource:n.dataSourceSelected)("mandatoryColomns",n.isView&&n.isViewUpdate||!n.isView?n.mandatoryColomns:n.mandatoryColomnsView)("optionalColomns",n.optionalColomns)("actions",n.rowFunctions)("showPaginator",!1)("showSpaceTop",!1),e.xp6(2),e.Q6J("ngIf",n.isView&&!(n.isLoaded&&0==(null==n.dataSource||null==n.dataSource.data?null:n.dataSource.data.length))),e.xp6(1),e.Q6J("ngIf",n.isView&&n.isViewUpdate||!n.isView))},dependencies:[h.O5,C.I,T.p,g.T,st.r,Q.lW,l.a8,l.dn,l.n5,l.hq,v.d]}),i})();var q=r(43949),ct=r(48036),ut=r(44221);function gt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clearForm())}),e.qZA()}}let oe=(()=>{class i extends u.U{constructor(t){super(),this.implementationService=t,this.submitted=!1,this.implementationId=0,this.changeImplementationId=new e.vpe,this.updateEmployeeIndex=new e.vpe,this.completed=new e.vpe,this.closeAfterUpdate=new e.vpe}onChangeBusinessAndCompanyId(){this.implementationId>0&&this.checkNoBusinessOrCompany()&&this.getImplementationById()}ngOnInit(){this.form=this.fb.group({id:[this.implementationId,{nonNullable:!0}],plan_ID:[null,[m.kI.required]],plan_Course_ID:[null,[m.kI.required]],instructor_ID:[null,[m.kI.required]],tsP_ID:[null,[m.kI.required]],from_Date:[null,[m.kI.required]],to_Date:[null,[m.kI.required]],no_Evaluation_Day:[null,[m.kI.required,q.dN.gte(0),q.dN.lte(100)]],attendance_Percentage:[null,[m.kI.required,q.dN.gte(0),q.dN.lte(100)]],note:[null]},{validator:R.w.compareDates("from_Date","to_Date")}),this.implementation&&(this.implementationId=this.implementation.id)}get formCtrls(){return this.form.controls}submit(){if(this.submitted=!0,this.form.valid){let t={id:this.formCtrls.id.value,plan_Course_ID:this.formCtrls.plan_Course_ID.value,instructor_ID:this.formCtrls.instructor_ID.value,tsP_ID:this.formCtrls.tsP_ID.value,from_Date:this.formCtrls.from_Date.value,to_Date:this.formCtrls.to_Date.value,attendance_Percentage:this.formCtrls.attendance_Percentage.value,no_evaluation_day:this.formCtrls.no_Evaluation_Day.value,note:this.formCtrls.note.value};0==t.id?this.create(t):this.update(t)}}getImplementationById(){this.implementation?(this.formCtrls.plan_ID.setValue(this.implementation.trA_Plan_Course.plan_ID),this.form.patchValue(this.implementation)):(this.showLoading("general"),this.implementationService.getById(this.implementationId).subscribe(t=>{t.message.messageType==d.u.Success?(this.form.patchValue(t.data[0]),this.formCtrls.plan_ID.setValue(t.data[0].trA_Plan_Course?.plan_ID),this.formCtrls.plan_Course_ID.setValue(t.data[0].plan_Course_ID)):this.errorList(t?.message?.messages),this.hideLoading("general")}))}create(t){this.showLoading("general"),this.implementationService.create(t).subscribe(n=>{n?.message?.messageType==d.u.Success?(this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newImplementationAdded"),this.implementationId=n.data.id,this.formCtrls.id.setValue(this.implementationId),this.navigateTo(`/training/${this.moduleId}/implementation/edit/${this.implementationId}`),this.changeImplementationId.emit(this.implementationId),this.completed.emit(!0)):this.errorList(n?.message?.messages),this.hideLoading("general")})}update(t){this.showLoading("general"),this.implementationService.update(t).subscribe(n=>{n?.message?.messageType==d.u.Success?(this.updateSuccessfullyMsg("implementationUpdated"),this.closeAfterUpdate.emit(!0),this.updateEmployeeIndex.emit(),this.completed.emit(!0)):this.errorList(n?.message?.messages),this.hideLoading("general")})}clearForm(){this.form.reset(),this.submitted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(M))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-implementation-general-data"]],inputs:{implementationId:"implementationId",implementation:"implementation"},outputs:{changeImplementationId:"changeImplementationId",updateEmployeeIndex:"updateEmployeeIndex",completed:"completed",closeAfterUpdate:"closeAfterUpdate"},features:[e.qOj],decls:28,vars:29,consts:[[3,"name"],[1,"container-fluid","mtop-40"],[1,"row"],[1,"col-12"],[3,"formGroup"],[1,"col-md-4","col-lg-3","col-12"],[3,"control","submitted","filter"],[3,"control","planControl","submitted","filter"],["label","from_Date",3,"control","submitted"],["label","to_Date",3,"control","submitted"],["label","attendance_Percentage","type","number",3,"control","submitted"],["label","NoEvaluationDay","type","number",3,"control","submitted"],["label","notes",3,"control","submitted"],["align","end",1,"mb-0"],[3,"click",4,"ngIf"],["icon","pi pi-plus-circle",3,"id","color","iconPositionBefore","onClick"],[1,"clearfix"],[3,"click"]],template:function(t,n){1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"mat-card-content",1)(2,"div",2)(3,"div",3)(4,"form",4)(5,"div",2)(6,"div",5),e._UZ(7,"app-training-plan-dropdown",6),e.qZA(),e.TgZ(8,"div",5),e._UZ(9,"app-course-by-training-plan-dropdown",7),e.qZA(),e.TgZ(10,"div",5),e._UZ(11,"app-instructor-dropdown",6),e.qZA(),e.TgZ(12,"div",5),e._UZ(13,"app-tsp-dropdown",6),e.qZA(),e.TgZ(14,"div",5),e._UZ(15,"app-datepicker",8),e.qZA(),e.TgZ(16,"div",5),e._UZ(17,"app-datepicker",9),e.qZA(),e.TgZ(18,"div",5),e._UZ(19,"app-input",10),e.qZA(),e.TgZ(20,"div",5),e._UZ(21,"app-input",11),e.qZA(),e.TgZ(22,"div",5),e._UZ(23,"app-input",12),e.qZA()()()()()(),e.TgZ(24,"mat-card-actions",13),e.YNc(25,gt,1,0,"reset-form-btn",14),e.TgZ(26,"submit-btn",15),e.NdJ("onClick",function(){return n.submit()}),e.qZA(),e._UZ(27,"div",16),e.qZA()),2&t&&(e.Q6J("name","general"),e.xp6(4),e.Q6J("formGroup",n.form),e.xp6(3),e.Q6J("control",n.formCtrls.plan_ID)("submitted",n.submitted)("filter",!0),e.xp6(2),e.Q6J("control",n.formCtrls.plan_Course_ID)("planControl",n.formCtrls.plan_ID)("submitted",n.submitted)("filter",!0),e.xp6(2),e.Q6J("control",n.formCtrls.instructor_ID)("submitted",n.submitted)("filter",!0),e.xp6(2),e.Q6J("control",n.formCtrls.tsP_ID)("submitted",n.submitted)("filter",!0),e.xp6(2),e.Q6J("control",n.formCtrls.from_Date)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.formCtrls.to_Date)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.formCtrls.attendance_Percentage)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.formCtrls.no_Evaluation_Day)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.formCtrls.note)("submitted",n.submitted),e.xp6(2),e.Q6J("ngIf",0==n.formCtrls.id.value),e.xp6(1),e.Q6J("id",n.formCtrls.id.value)("color",n.btn.darkBlue)("iconPositionBefore",!1))},dependencies:[h.O5,B.Q,k.a,G.J,T.p,l.dn,l.hq,U.Ro,z.M,$.W,ct._,ut.O,m._Y,m.JL,m.sg]}),i})(),ht=(()=>{class i extends N.K{constructor(){super()}getAll(t){return this.get("Training/ImplementationLecture/GetAll",{params:{$filter:`Implementation_ID eq ${t}`}})}create(t){return this.post("Training/ImplementationLecture/Create",t)}update(t){return this.post("Training/ImplementationLecture/Edit",t)}Delete(t){return this.delete("Training/ImplementationLecture/Delete",{params:{lecture_id:t}})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var _t=r(12613),ft=r(47383),Ct=r(93054);function It(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.changeIsViewUpdate(!0))}),e._UZ(1,"i",8),e.qZA()}}function bt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.changeIsViewUpdate(!1))}),e._UZ(1,"i",9),e.qZA()}}function vt(i,o){if(1&i&&(e.ynx(0),e.YNc(1,It,2,0,"button",6),e.YNc(2,bt,2,0,"button",6),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isViewUpdate),e.xp6(1),e.Q6J("ngIf",t.isViewUpdate)}}function Tt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",29),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.clearForm())}),e.qZA()}}function wt(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-card-content",10)(2,"div",1)(3,"div",2)(4,"courseForm",11)(5,"div",1)(6,"div",12),e._UZ(7,"app-input",13),e.qZA(),e.TgZ(8,"div",12),e._UZ(9,"app-input",14),e.qZA(),e.TgZ(10,"div",15)(11,"app-datepicker",16),e.ynx(12,17),e._UZ(13,"app-check-box",18),e.BQk(),e.qZA()(),e.TgZ(14,"div",12),e._UZ(15,"app-datepicker",19),e.qZA(),e.TgZ(16,"div",20),e._UZ(17,"weekdays-checkboxes",21),e.qZA(),e.TgZ(18,"div",12),e._UZ(19,"app-timepicker",22),e.qZA(),e.TgZ(20,"div",12),e._UZ(21,"app-timepicker",23),e.qZA(),e.TgZ(22,"div",12),e._UZ(23,"app-input",24),e.qZA(),e.TgZ(24,"div",12),e._UZ(25,"app-input",25),e.qZA()()()()()(),e.TgZ(26,"mat-card-actions",26),e.YNc(27,Tt,1,0,"reset-form-btn",27),e.TgZ(28,"submit-btn",28),e.NdJ("onClick",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.submit())}),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(3),e.Q6J("control",t.formCtrls.ar_Name)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.en_Name)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.day_Date)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.isRepeated),e.xp6(2),e.Q6J("control",t.formCtrls.repeatEndDate)("submitted",t.submitted)("disable",!t.formCtrls.isRepeated.value),e.xp6(1),e.ekj("hidden",!t.formCtrls.isRepeated.value),e.xp6(1),e.Q6J("control",t.formCtrls.days)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.start_Houre)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.end_Houre)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.location)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.note)("submitted",t.submitted),e.xp6(2),e.Q6J("ngIf",t.formCtrls.id.value>0),e.xp6(1),e.Q6J("disabled",!t.implementationId)("id",t.formCtrls.id.value)("color",t.btn.darkBlue)("iconPositionBefore",!1)}}function yt(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-card-content"),e._UZ(2,"mat-divider",30),e.TgZ(3,"app-material-table",31),e.NdJ("editRow",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.lectureToEdit(a))})("deleteRow",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(a))}),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("isRowClickable",!1)("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("showFilter",!1)("showPaginator",!1)}}let se=(()=>{class i extends u.U{constructor(t){super(),this.implementationLectureService=t,this.implementationId=0,this.isView=!1,this.completed=new e.vpe,this.submitted=!1,this.mandatoryColomns=["ar_Name","en_Name","dayDate","startHour","endHour","location","notes","actions"],this.optionalColomns=[],this.isLoaded=!1,this.isViewUpdate=!1}ngOnInit(){this.form=this.fb.group({id:[0,{nonNallable:!0}],ar_Name:[null,[m.kI.required]],en_Name:[null,[m.kI.required]],day_Date:[null,[m.kI.required]],start_Houre:[null,[m.kI.required]],end_Houre:[null,[m.kI.required]],location:[null],note:[null],isRepeated:[null],repeatEndDate:[null],days:[[]]},{validator:[R.w.timeBefore("start_Houre","end_Houre"),R.w.compareDates("day_Date","repeatEndDate")]}),this.formCtrls.isRepeated.valueChanges.subscribe(t=>this.onChangeIsRepeated(t)),this.isView&&this.changeIsViewUpdate(!1)}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new p.by(null)),this.checkNoBusinessOrCompany()&&this.implementationId>0?this.getAll():this.isLoaded=!0}onModulesChanged(){this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,c.S.implementation_lecture)}get formCtrls(){return this.form.controls}getAll(){this.dataSource=new p.by(null),this.isLoaded=!1,this.implementationLectureService.getAll(this.implementationId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==d.u.Success?(this.dataSource=new p.by(function nt(i){return i.map(o=>({...o,dayDate:_.M6.mapDate(o.day_Date),startHour:_.M6.mapTime(o.start_Houre),endHour:_.M6.mapTime(o.end_Houre),notes:o.note}))}(t.data)),this.isLoaded=!0):this.errorList(t?.message?.messages)})}submit(){if(this.submitted=!0,this.form.valid){const t={implementation_ID:this.implementationId,id:this.form.value.id,ar_Name:this.form.value.ar_Name,en_Name:this.form.value.en_Name,day_Date:this.form.value.day_Date,start_Houre:this.form.value.start_Houre,end_Houre:this.form.value.end_Houre,location:this.form.value.location,note:this.form.value.note,isRepeated:this.form.value.isRepeated??!1,repeatEndDate:null,weekDays:[]};t.isRepeated&&(t.repeatEndDate=this.form.value.repeatEndDate,t.weekDays=this.form.value.days??[]),0==t.id?this.create(t):this.update(t)}}create(t){this.showLoading("lecture"),this.implementationLectureService.create(t).subscribe(n=>{n?.message?.messageType==d.u.Success?(this.addSuccessfullyMsg("canEditOrRemoveFromIndex","NewLectureAddedToImplementation"),this.clearForm(),this.getAll(),this.completed.emit(!0)):this.errorList(n?.message?.messages),this.hideLoading("lecture")})}update(t){this.showLoading("lecture"),this.implementationLectureService.update(t).subscribe(n=>{n?.message?.messageType==d.u.Success?(this.updateSuccessfullyMsg("lectureImplementationUpdated"),this.clearForm(),this.getAll(),this.completed.emit(!0)):this.errorList(n?.message?.messages),this.hideLoading("lecture")})}lectureToEdit(t){this.form.patchValue(t)}onDelete(t){let n=this.msgTranslate(t.ar_Name,t.en_Name);this.deleteDialog(n).subscribe(a=>{a&&this.delete(t)})}delete(t){this.showLoading("lecture"),this.implementationLectureService.Delete(t.id).subscribe(n=>{n.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg("lectureRemovedFromImplementation"),this.formCtrls.id.value==t.id&&this.clearForm(),this.getAll()):this.errorList(n?.message?.messages),this.hideLoading("lecture")})}clearForm(){this.form.reset({id:0,days:[],isRepeated:!1}),this.submitted=!1}onChangeIsRepeated(t){t?(this.formCtrls.repeatEndDate.addValidators([m.kI.required]),this.formCtrls.days.addValidators([m.kI.required])):(this.formCtrls.repeatEndDate.clearValidators(),this.formCtrls.days.clearValidators()),this.formCtrls.repeatEndDate.updateValueAndValidity(),this.formCtrls.days.updateValueAndValidity()}changeIsViewUpdate(t){this.isViewUpdate=t;let n=this.mandatoryColomns.findIndex(s=>"actions"==s),a=this.mandatoryColomns.slice();t&&n<0?a.push("actions"):!t&&n>=0&&a.pop(),this.mandatoryColomns=a}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ht))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-implementation-lectures"]],inputs:{implementationId:"implementationId",isView:"isView"},outputs:{completed:"completed"},features:[e.qOj],decls:11,vars:4,consts:[[3,"name"],[1,"row"],[1,"col-12"],["container",""],["title","lectures",1,"stepper-section-title"],[4,"ngIf"],["mat-button","","class","float-right section-edit-btn pright-6 pleft-6 darkBlue",3,"click",4,"ngIf"],["mat-button","",1,"float-right","section-edit-btn","pright-6","pleft-6","darkBlue",3,"click"],[1,"fas","fa-pen","font-size-15"],[1,"ft-corner-up-left","font-size-18"],[1,"container-fluid","mtop-45"],[3,"formGroup"],[1,"col-md-4","col-lg-3","col-12"],["label","ar_Name",3,"control","submitted"],["label","en_Name",3,"control","submitted"],[1,"col-md-4","col-lg-3","col-12","mb-2"],["label","dayDate",1,"display-in-msg",3,"control","submitted"],[1,"msg"],["label","isRepeated","labelPosition","before","styleClass","p-0 m-0",3,"control"],["label","repeatEndDate",3,"control","submitted","disable"],[1,"col-12","pright-15","pleft-15","mbottom-15","mt-2"],[3,"control","submitted"],["label","startHour",3,"control","submitted"],["label","endHour",3,"control","submitted"],["label","location",3,"control","submitted"],["label","notes",3,"control","submitted"],["align","end"],[3,"click",4,"ngIf"],["icon","pi pi-plus-circle",3,"disabled","id","color","iconPositionBefore","onClick"],[3,"click"],[1,"w-75","m-auto"],[1,"table-in-forms",3,"isRowClickable","isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","showFilter","showPaginator","editRow","deleteRow"]],template:function(t,n){1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"div",2)(3,"mat-card",null,3)(5,"mat-card-title"),e._UZ(6,"page-title",4),e.YNc(7,vt,3,2,"ng-container",5),e.qZA(),e._UZ(8,"mat-divider"),e.YNc(9,wt,29,28,"ng-container",5),e.YNc(10,yt,4,8,"ng-container",5),e.qZA()()()),2&t&&(e.Q6J("name","lecture"),e.xp6(7),e.Q6J("ngIf",n.isView),e.xp6(2),e.Q6J("ngIf",!n.isView||n.isViewUpdate),e.xp6(1),e.Q6J("ngIf",n.implementationId>0))},dependencies:[h.O5,B.Q,k.a,C.I,_t.u,ft.E,G.J,T.p,g.T,Ct.M,Q.lW,l.a8,l.dn,l.n5,l.hq,v.d,U.Ro,m.JL,m.sg],styles:[".mat-checkbox-inner-container{margin-right:2px!important;margin-left:2px!important}"]}),i})(),St=(()=>{class i extends N.K{constructor(){super()}getAll(t){return this.get("Training/ImplementationExpenses/GetAll",{params:{$filter:`Implementation_ID eq ${t}`,$expand:`${I.db.TRA_expense}`}})}create(t){return this.post("Training/ImplementationExpenses/Create",t)}Delete(t){return this.delete("Training/ImplementationExpenses/Delete",{params:t})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Zt=r(85917);function At(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.changeIsViewUpdate(!0))}),e._UZ(1,"i",8),e.qZA()}}function Lt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.changeIsViewUpdate(!1))}),e._UZ(1,"i",9),e.qZA()}}function xt(i,o){if(1&i&&(e.ynx(0),e.YNc(1,At,2,0,"button",6),e.YNc(2,Lt,2,0,"button",6),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isViewUpdate),e.xp6(1),e.Q6J("ngIf",t.isViewUpdate)}}function Dt(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-card-content",10)(2,"div",1)(3,"div",2)(4,"courseForm",11)(5,"div",1)(6,"div",12),e._UZ(7,"app-expenses-dropdown",13),e.qZA(),e.TgZ(8,"div",12),e._UZ(9,"app-input",14),e.qZA(),e.TgZ(10,"div",15)(11,"submit-btn",16),e.NdJ("onClick",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.submit())}),e.qZA()()()()()()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(3),e.Q6J("control",t.formCtrls.expenseId)("submitted",t.submitted)("filter",!0),e.xp6(2),e.Q6J("control",t.formCtrls.budget)("submitted",t.submitted),e.xp6(2),e.Q6J("disabled",!t.implementationId)("color",t.btn.darkBlue)("iconPositionBefore",!1)}}function Jt(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-card-content"),e._UZ(2,"mat-divider",17),e.TgZ(3,"app-material-table",18),e.NdJ("deleteRow",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(a))}),e.qZA()(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("showPaginator",!1)("showFilter",!1)}}let re=(()=>{class i extends u.U{constructor(t){super(),this.implementationExpensesService=t,this.implementationId=0,this.isView=!1,this.completed=new e.vpe,this.submitted=!1,this.mandatoryColomns=["expense","value","actions"],this.optionalColomns=[],this.isLoaded=!1,this.isViewUpdate=!1}ngOnInit(){this.form=this.fb.group({expenseId:[null,[m.kI.required]],budget:[null,[m.kI.required,q.dN.gte(0)]]}),this.isView&&this.changeIsViewUpdate(!1)}ngOnChanges(t){t.implementationId?.currentValue>0&&this.checkNoBusinessOrCompany()&&this.getAll()}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new p.by(null)),this.checkNoBusinessOrCompany()&&this.implementationId>0?this.getAll():this.isLoaded=!0}onModulesChanged(){this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,c.S.implementation_expense)}get formCtrls(){return this.form.controls}getAll(){this.dataSource=new p.by(null),this.isLoaded=!1,this.implementationExpensesService.getAll(this.implementationId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==d.u.Success?(this.dataSource=new p.by(function et(i){return i.map(o=>({...o,expense:(0,_._f)(o.trA_Expense?.ar_Name,o.trA_Expense?.en_Name),value:o.expense_Value}))}(t.data)),this.isLoaded=!0):this.errorList(t?.message?.messages)})}submit(){this.submitted=!0,this.form.valid&&this.create({implementation_ID:this.implementationId,expense_ID:this.form.value.expenseId,expense_Value:this.form.value.budget})}create(t){this.showLoading("expenses"),this.implementationExpensesService.create(t).subscribe(n=>{n?.message?.messageType==d.u.Success?(this.addSuccessfullyMsg("canRemoveFromIndex","NewImplementationExpensesAdded"),this.clearForm(),this.getAll(),this.completed.emit(!0)):this.errorList(n?.message?.messages),this.hideLoading("expenses")})}onDelete(t){this.deleteDialog(t.expense+" - "+t.value).subscribe(a=>{a&&this.delete(t)})}delete(t){let n={implementation_id:t.implementation_ID,expense_id:t.expense_ID};this.showLoading("expenses"),this.implementationExpensesService.Delete(n).subscribe(a=>{a.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg("ImplementationExpensesRemoved"),this.getAll()):this.errorList(a?.message?.messages),this.hideLoading("expenses")})}clearForm(){this.form.reset(),this.submitted=!1}changeIsViewUpdate(t){this.isViewUpdate=t;let n=this.mandatoryColomns.findIndex(s=>"actions"==s),a=this.mandatoryColomns.slice();t&&n<0?a.push("actions"):!t&&n>=0&&a.pop(),this.mandatoryColomns=a}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(St))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-implementation-expenses"]],inputs:{implementationId:"implementationId",isView:"isView"},outputs:{completed:"completed"},features:[e.qOj,e.TTD],decls:11,vars:4,consts:[[3,"name"],[1,"row"],[1,"col-12"],["container",""],["title","expenses",1,"stepper-section-title"],[4,"ngIf"],["mat-button","","class","float-right section-edit-btn pright-6 pleft-6 darkBlue",3,"click",4,"ngIf"],["mat-button","",1,"float-right","section-edit-btn","pright-6","pleft-6","darkBlue",3,"click"],[1,"fas","fa-pen","font-size-15"],[1,"ft-corner-up-left","font-size-18"],[1,"container-fluid","mtop-45"],[3,"formGroup"],[1,"col-md-4","col-12"],[3,"control","submitted","filter"],["label","budget","type","number",3,"control","submitted"],[1,"col-md-3","col-12"],["icon","pi pi-plus-circle","styleClass","btn-large mt-1",3,"disabled","color","iconPositionBefore","onClick"],[1,"w-75","m-auto"],[1,"table-in-forms","small-table","no-margin",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","showPaginator","showFilter","deleteRow"]],template:function(t,n){1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"div",2)(3,"mat-card",null,3)(5,"mat-card-title"),e._UZ(6,"page-title",4),e.YNc(7,xt,3,2,"ng-container",5),e.qZA(),e._UZ(8,"mat-divider"),e.YNc(9,Dt,12,9,"ng-container",5),e.YNc(10,Jt,4,7,"ng-container",5),e.qZA()()()),2&t&&(e.Q6J("name","expenses"),e.xp6(7),e.Q6J("ngIf",n.isView),e.xp6(2),e.Q6J("ngIf",!n.isView||n.isViewUpdate),e.xp6(1),e.Q6J("ngIf",n.implementationId>0))},dependencies:[h.O5,k.a,C.I,T.p,g.T,Q.lW,l.a8,l.dn,l.n5,v.d,U.Ro,Zt.b,m.JL,m.sg]}),i})();const Pt=["stepper"];function Ut(i,o){if(1&i&&e._UZ(0,"app-add-new-btn",3),2&i){const t=e.oxw();e.MGl("url","/training/",t.moduleId,"/implementation/add"),e.Q6J("params",t.parentParam)}}function Nt(i,o){1&i&&e._UZ(0,"i",18)}function Qt(i,o){1&i&&e._UZ(0,"i",18)}function qt(i,o){1&i&&e._UZ(0,"i",18)}function Et(i,o){1&i&&e._UZ(0,"i",18)}let Vt=(()=>{class i extends u.U{constructor(){super(),this.implementationId=0,this.isGeneraCompleted=!1,this.isEmployeesCompleted=!1,this.isLecturesCompleted=!1,this.isExpensesCompleted=!1}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.implementationId=Number(t.id??0)})}pr(){console.log("isGeneraCompleted",this.isGeneraCompleted)}stepChanged(){this.stepper.selected.interacted=!1}getImplementationId(t){this.implementationId=t}updateEmployeeIndex(){this.implementationEmployeesComponent.getAll()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-implementation-core"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Pt,5),e.Gf(F,5)),2&t){let a;e.iGM(a=e.CRH())&&(n.stepper=a.first),e.iGM(a=e.CRH())&&(n.implementationEmployeesComponent=a.first)}},features:[e.qOj],decls:39,vars:46,consts:[[1,"title-no-margin","title-section","fixed-title"],["addTitle","addImplementation","title","add",3,"id","parentTitle","parentTitleLink","parentLinkParams"],[3,"url","params",4,"ngIf"],[3,"url","params"],[1,"has-fixed-title"],[3,"linear","disableRipple","selectionChange"],["stepper",""],[3,"label","completed"],["matStepperIcon","edit"],[1,"row"],[1,"col-12"],[1,"title-no-margin"],["title","generalInfo",1,"stepper-section-title"],[1,"mt-2"],[1,"clearfix"],[3,"implementationId","changeImplementationId","updateEmployeeIndex","completed"],[3,"implementationId","completed"],[3,"stepper","parentParam","url","pageParams"],[1,"fas","fa-check"]],template:function(t,n){if(1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ynx(4),e.YNc(5,Ut,1,2,"app-add-new-btn",2),e._UZ(6,"app-back-btn",3),e.BQk(),e.qZA(),e.ynx(7),e.TgZ(8,"mat-card-content",4)(9,"mat-stepper",5,6),e.NdJ("selectionChange",function(){return n.stepChanged()}),e.TgZ(11,"mat-step",7),e.ALo(12,"titlecase"),e.ALo(13,"translate"),e.YNc(14,Nt,1,0,"ng-template",8),e.TgZ(15,"div",9)(16,"div",10)(17,"mat-card")(18,"mat-card-title",11),e._UZ(19,"page-title",12),e.qZA(),e._UZ(20,"mat-divider",13)(21,"div",14),e.TgZ(22,"app-implementation-general-data",15),e.NdJ("changeImplementationId",function(s){return n.getImplementationId(s)})("updateEmployeeIndex",function(){return n.updateEmployeeIndex()})("completed",function(s){return n.isGeneraCompleted=s}),e.qZA()()()()(),e.TgZ(23,"mat-step",7),e.ALo(24,"titlecase"),e.ALo(25,"translate"),e.YNc(26,Qt,1,0,"ng-template",8),e.TgZ(27,"app-implementation-employees",16),e.NdJ("completed",function(s){return n.isEmployeesCompleted=s}),e.qZA()(),e.TgZ(28,"mat-step",7),e.ALo(29,"titlecase"),e.ALo(30,"translate"),e.YNc(31,qt,1,0,"ng-template",8),e.TgZ(32,"app-implementation-lectures",16),e.NdJ("completed",function(s){return n.isLecturesCompleted=s}),e.qZA()(),e.TgZ(33,"mat-step",7),e.ALo(34,"titlecase"),e.ALo(35,"translate"),e.YNc(36,Et,1,0,"ng-template",8),e.TgZ(37,"app-implementation-expenses",16),e.NdJ("completed",function(s){return n.isExpensesCompleted=s}),e.qZA()()()(),e._UZ(38,"steps-footer",17),e.BQk()),2&t){const a=e.MAs(10);e.xp6(1),e.hYB("parentTitle","",e.lcZ(2,26,"training")," / ",e.lcZ(3,28,"implementation"),""),e.MGl("parentTitleLink","/training/",n.moduleId,"/implementation"),e.Q6J("id",0)("parentLinkParams",n.pageParams),e.xp6(4),e.Q6J("ngIf",n.implementationId>0),e.xp6(1),e.MGl("url","/training/",n.moduleId,"/implementation/index"),e.Q6J("params",n.pageParams),e.xp6(3),e.Q6J("linear",!1)("disableRipple",!0),e.xp6(2),e.s9C("label",e.lcZ(12,30,e.lcZ(13,32,"general"))),e.Q6J("completed",n.isGeneraCompleted),e.xp6(11),e.Q6J("implementationId",n.implementationId),e.xp6(1),e.s9C("label",e.lcZ(24,34,e.lcZ(25,36,"employees"))),e.Q6J("completed",n.isEmployeesCompleted),e.xp6(4),e.Q6J("implementationId",n.implementationId),e.xp6(1),e.s9C("label",e.lcZ(29,38,e.lcZ(30,40,"lectures"))),e.Q6J("completed",n.isLecturesCompleted),e.xp6(4),e.Q6J("implementationId",n.implementationId),e.xp6(1),e.s9C("label",e.lcZ(34,42,e.lcZ(35,44,"expenses"))),e.Q6J("completed",n.isExpensesCompleted),e.xp6(4),e.Q6J("implementationId",n.implementationId),e.xp6(1),e.MGl("url","/training/",n.moduleId,"/implementation"),e.Q6J("stepper",a)("parentParam",n.parentParam)("pageParams",n.pageParams)}},dependencies:[h.O5,J.a,P.J,g.T,H.j,l.a8,l.dn,l.n5,v.d,L.C0,L.Vq,L.z9,oe,F,se,re,h.rS,b.X$]}),i})();var f=r(3710);function Rt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.isView=!1)}),e._UZ(1,"i",11),e.qZA()}}function kt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.isView=!0)}),e._UZ(1,"i",12),e.qZA()}}function Ft(i,o){if(1&i&&(e.TgZ(0,"div",16),e._UZ(1,"app-view-data-row-item",17)(2,"app-view-data-row-item",18)(3,"app-view-data-row-item",19)(4,"app-view-data-row-item",20)(5,"app-view-data-row-item",21)(6,"app-view-data-row-item",22)(7,"app-view-data-row-item",23)(8,"app-view-data-row-item",24),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("value",null==t.implementation?null:t.implementation.plan),e.xp6(1),e.Q6J("value",null==t.implementation?null:t.implementation.course),e.xp6(1),e.Q6J("value",null==t.implementation?null:t.implementation.instructor),e.xp6(1),e.Q6J("value",null==t.implementation?null:t.implementation.tsp),e.xp6(1),e.Q6J("value",null==t.implementation?null:t.implementation.attendance_Percentage),e.xp6(1),e.Q6J("value",null==t.implementation?null:t.implementation.fromDate),e.xp6(1),e.Q6J("value",null==t.implementation?null:t.implementation.toDate),e.xp6(1),e.Q6J("value",null==t.implementation?null:t.implementation.note)}}function Bt(i,o){1&i&&e._UZ(0,"app-view-card-row-skeleton")}function Gt(i,o){if(1&i&&(e.TgZ(0,"div",13),e.YNc(1,Ft,9,8,"div",14),e.YNc(2,Bt,1,0,"app-view-card-row-skeleton",15),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isLoaded),e.xp6(1),e.Q6J("ngIf",!t.isLoaded)}}function Mt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-implementation-general-data",25),e.NdJ("closeAfterUpdate",function(a){e.CHM(t);const s=e.oxw();return e.KtG(s.returnToView(a))})("updateEmployeeIndex",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.updateEmployeeIndex.emit())}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("implementation",t.implementation)}}let le=(()=>{class i extends u.U{constructor(t){super(),this.implementationService=t,this.isView=!0,this.implementationId=0,this.isLoaded=!1,this.updateEmployeeIndex=new e.vpe}onChangeBusinessAndCompanyId(){this.implementationId>0&&this.checkNoBusinessOrCompany()&&this.getImplementationById()}ngOnInit(){}getImplementationById(){this.isLoaded=!1,this.implementationService.getById(this.implementationId).subscribe(t=>{t.message.messageType==d.u.Success?(this.implementation=ae(t.data)[0],this.isLoaded=!0):this.errorList(t?.message?.messages)})}returnToView(t){this.isView=!0,t&&this.getImplementationById()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(M))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-implementation-general-data-view"]],inputs:{implementationId:"implementationId"},outputs:{updateEmployeeIndex:"updateEmployeeIndex"},features:[e.qOj],decls:13,vars:4,consts:[[1,"row"],[1,"col-12"],[1,"pb-0"],["container",""],[1,"title-no-margin"],["title","generalInfo",1,"stepper-section-title"],["mat-button","","class","float-right section-edit-btn pright-6 pleft-6 darkBlue",3,"click",4,"ngIf"],[1,"mt-2"],["class","mtop-30",4,"ngIf","ngIfElse"],["form",""],["mat-button","",1,"float-right","section-edit-btn","pright-6","pleft-6","darkBlue",3,"click"],[1,"fas","fa-pen","font-size-15"],[1,"ft-corner-up-left","font-size-18"],[1,"mtop-30"],["class","view-data-row-container",4,"ngIf"],[4,"ngIf"],[1,"view-data-row-container"],["label","plan",1,"col-md-2_4","col-md-3","col-sm-4","col-6","mbottom-20","p-0",3,"value"],["label","planCourse",1,"col-md-2_4","col-md-3","col-sm-4","col-6","mbottom-20","p-0",3,"value"],["label","instructor",1,"col-md-2_4","col-md-3","col-sm-4","col-6","mbottom-20","p-0",3,"value"],["label","tsp",1,"col-md-2_4","col-md-3","col-sm-4","col-6","mbottom-20","p-0",3,"value"],["label","attendance_Percentage",1,"col-md-2_4","col-md-3","col-sm-4","col-6","mbottom-20","p-0",3,"value"],["label","from_Date",1,"col-md-2_4","col-md-3","col-sm-4","col-6","mbottom-20","p-0",3,"value"],["label","to_Date",1,"col-md-2_4","col-md-3","col-sm-4","col-6","mbottom-20","p-0",3,"value"],["label","notes",1,"col-md-2_4","col-md-3","col-sm-4","col-6","mbottom-20","p-0",3,"value"],[3,"implementation","closeAfterUpdate","updateEmployeeIndex"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2,3)(4,"mat-card-title",4),e._UZ(5,"page-title",5),e.YNc(6,Rt,2,0,"button",6),e.YNc(7,kt,2,0,"button",6),e.qZA(),e._UZ(8,"mat-divider",7),e.TgZ(9,"mat-card-content"),e.YNc(10,Gt,3,2,"div",8),e.YNc(11,Mt,1,1,"ng-template",null,9,e.W1O),e.qZA()()()()),2&t){const a=e.MAs(12);e.xp6(6),e.Q6J("ngIf",n.isView),e.xp6(1),e.Q6J("ngIf",!n.isView),e.xp6(3),e.Q6J("ngIf",n.isView)("ngIfElse",a)}},dependencies:[h.O5,g.T,te.l,ne.I,Q.lW,l.a8,l.dn,l.n5,v.d,oe],styles:["@media (min-width: 991px){.col-md-2_4[_ngcontent-%COMP%]{flex:0 0 20%;max-width:20%}}"]}),i})();const Yt=[{path:c.S.course,data:{view:c.S.course},children:[{path:"",redirectTo:"index",pathMatch:A.U.full},{path:"index",component:pe,data:{view:c.S.course_index},canActivate:[f.r]},{path:"add",component:X,data:{view:c.S.add_course},canActivate:[f.r]},{path:"edit/:id",component:X,data:{view:c.S.add_course},canActivate:[f.r]}]},{path:"tsp",data:{view:c.S.tsp},children:[{path:"",redirectTo:"index",pathMatch:A.U.full},{path:"index",component:ce,data:{view:c.S.tsp_index},canActivate:[f.r]},{path:"add",component:O.j,data:{view:c.S.add_tsp},canActivate:[f.r]},{path:"edit/:id",component:O.j,data:{view:c.S.add_tsp},canActivate:[f.r]}]},{path:"instructor",data:{view:c.S.instructor},children:[{path:"",redirectTo:"index",pathMatch:A.U.full},{path:"index",component:ge,data:{view:c.S.instructor_index},canActivate:[f.r]},{path:"add",component:Y.h,data:{view:c.S.add_instructor},canActivate:[f.r]},{path:"edit/:id",component:Y.h,data:{view:c.S.add_instructor},canActivate:[f.r]}]},{path:"training-request",data:{view:c.S.training_request},children:[{path:"",redirectTo:"index",pathMatch:A.U.full},{path:"index",component:Pe,data:{view:c.S.training_request_index},canActivate:[f.r]},{path:"add",component:W,data:{view:c.S.add_training_request},canActivate:[f.r]},{path:"edit/:id",component:W,data:{view:c.S.add_training_request},canActivate:[f.r]}]},{path:"training-plan",data:{view:c.S.training_plan},children:[{path:"",redirectTo:"index",pathMatch:A.U.full},{path:"index",component:Fe,data:{view:c.S.training_plan_index},canActivate:[f.r]},{path:"add",component:Be.j,data:{view:c.S.add_training_plan},canActivate:[f.r]},{path:"edit/:id",component:Ke,data:{view:c.S.add_training_plan},canActivate:[f.r]}]},{path:"implementation",data:{view:c.S.implementation},children:[{path:"",redirectTo:"index",pathMatch:A.U.full},{path:"index",component:at,data:{view:c.S.implementation_index},canActivate:[f.r]},{path:"add",component:Vt,data:{view:c.S.add_implementation},canActivate:[f.r]},{path:"edit/:id",component:(()=>{class i extends u.U{constructor(){super()}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.implementationId=Number(t.id)??0})}updateEmployeeIndex(){this.implementationEmployeesComponent.getAll()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-implementation-view-core"]],viewQuery:function(t,n){if(1&t&&(e.Gf(le,5),e.Gf(F,5)),2&t){let a;e.iGM(a=e.CRH())&&(n.generalInfoComponent=a.first),e.iGM(a=e.CRH())&&(n.implementationEmployeesComponent=a.first)}},features:[e.qOj],decls:13,vars:20,consts:[[1,"title-no-margin","title-section","fixed-title"],[3,"title","parentTitle","parentTitleLink","parentLinkParams"],[3,"url","params"],[3,"implementationId","updateEmployeeIndex"],[1,"mtop-20"],[3,"isView","implementationId"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.ALo(2,"translate"),e.ALo(3,"translate"),e._UZ(4,"app-add-new-btn",2)(5,"app-back-btn",2),e.qZA(),e.TgZ(6,"app-implementation-general-data-view",3),e.NdJ("updateEmployeeIndex",function(){return n.updateEmployeeIndex()}),e.qZA(),e._UZ(7,"div",4)(8,"app-implementation-employees",5)(9,"div",4)(10,"app-implementation-lectures",5)(11,"div",4)(12,"app-implementation-expenses",5)),2&t&&(e.xp6(1),e.hYB("parentTitle","",e.lcZ(2,16,"training")," / ",e.lcZ(3,18,"implementation"),""),e.MGl("parentTitleLink","/training/",n.moduleId,"/implementation"),e.Q6J("title",null==n.generalInfoComponent||null==n.generalInfoComponent.implementation?null:n.generalInfoComponent.implementation.plan)("parentLinkParams",n.pageParams),e.xp6(3),e.MGl("url","/training/",n.moduleId,"/implementation/add"),e.Q6J("params",n.parentParam),e.xp6(1),e.MGl("url","/training/",n.moduleId,"/implementation/index"),e.Q6J("params",n.pageParams),e.xp6(1),e.Q6J("implementationId",n.implementationId),e.xp6(2),e.Q6J("isView",!0)("implementationId",n.implementationId),e.xp6(2),e.Q6J("isView",!0)("implementationId",n.implementationId),e.xp6(2),e.Q6J("isView",!0)("implementationId",n.implementationId))},dependencies:[J.a,P.J,g.T,l.n5,F,se,re,le,b.X$],styles:[".title-section[_ngcontent-%COMP%]{border-radius:10px!important;margin-bottom:20px!important}"]}),i})(),data:{view:c.S.add_implementation},canActivate:[f.r]}]}];let jt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[V.Bz.forChild(Yt),V.Bz]}),i})();var Ht=r(92634);let zt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.ez,jt,Ht.m]}),i})()}}]);