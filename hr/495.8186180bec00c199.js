"use strict";(self.webpackChunkhr=self.webpackChunkhr||[]).push([[495],{49495:($,J,s)=>{s.r(J),s.d(J,{OrgManagementModule:()=>Ja});var c=s(36895),g=s(80458),u=s(30671),d=s(35478);function p(o,n){let a,t=[],i=[];for(;i.length<o.core_Org_Structure_Org.length;)v(o.core_Org_Structure_Org,i,t);return a=[{label:"structure",type:"org",styleClass:"structure-node",expanded:!0,data:{parentId:null,org:null,orgType:null,numEmp:0,structure:{id:null,ar_Name:o.ar_Name,en_Name:o.en_Name}},children:[]}],i.map(r=>{let f={label:`${r.core_Org?.code} - ${(0,d._f)(r.core_Org?.ar_Name,r.core_Org?.en_Name)}`,type:"org",styleClass:"org-node",expanded:!1,data:{parentId:r.parenT_ID,org:r.core_Org,orgType:{id:r.core_Org_TYPE?.id,ar_Name:r.core_Org_TYPE?.ar_Name,en_Name:r.core_Org_TYPE?.en_Name},structure:null,structureId:n,numEmp:r.numEmp},children:[]};r.parenT_ID?h(f,a[0].children):a[0].children.push(f)}),a}function v(o,n,t){o.forEach(i=>{(null==i.parenT_ID||t.includes(i.parenT_ID))&&!t.includes(i.orG_ID)&&(n.push(i),t.push(i.orG_ID))})}function h(o,n){n.map(t=>{t.data.org?.id!=o.data.parentId||t.children.push(o)}),n.map(t=>{h(o,t.children)})}function P(o){let n=[{label:o[0].code,type:"job-title",styleClass:"job-title-node",expanded:!1,data:o[0],children:[]}];return A(n[0]),n}function A(o){o.data.chiledJobTitles?.map(n=>{let t={label:n.code,type:"job-title",styleClass:"job-title-node",expanded:!1,data:n,children:[]};o.children.push(t),A(t)})}function S(o,n){let t=o.findIndex(a=>a.id==n),i=[];return t>=0&&(i=[{label:(0,d._f)(o[t]?.ar_Name,o[t]?.en_Name),type:"resources",styleClass:o[t].isSolidEmp?"":"dashed-border",expanded:!1,data:o[t],children:[]}],o.filter(a=>a.id!=n).map(a=>{let r={label:(0,d._f)(a.ar_Name,a.en_Name),type:"resources",styleClass:a.isSolidEmp?"":"dashed-border",expanded:!1,data:a,children:[]};a.parentID==n?i[0].children.push(r):a.id!=n&&R(r,i[0].children)})),i}function R(o,n){n.map(t=>{t.data.id!=o.data.parentID||t.children.push(o)}),n.map(t=>{R(o,t.children)})}var _=s(15602),y=s(95751),b=s(74513),B=s(29341),l=s(24006),e=s(94650),q=s(56808),G=s(70137),tt=s(91347),Y=s(25273),it=s(92393),N=s(57566),I=s(46896),m=s(73546),Z=s(65938),ve=s(32399),x=s(49274);function ot(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",4)(1,"org-structure-dropdown",12),e.NdJ("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.getStructureById())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.MGl("param","From_Date ge ",t.currentDate,""),e.Q6J("control",t.formCtrls.structureId)("submitted",t.submitted)("filter",!0)}}function nt(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"div",4),e._UZ(2,"app-input",13),e.qZA(),e.TgZ(3,"div",4),e._UZ(4,"app-input",14),e.qZA(),e.TgZ(5,"div",4),e._UZ(6,"app-datepicker",15),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("control",t.formCtrls.ar_Name)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.en_Name)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.EffectiveDate)("submitted",t.submitted)}}let at=(()=>{class o extends y.U{constructor(t){super(),this.orgStructureService=t,this.submitted=!1,this.modeList=[{value:!0,label:"addMode"},{value:!1,label:"editMode"}],this.currentDate=this.datePipe.transform(new Date,"yyyy-MM-dd")}ngOnInit(){this.form=this.fb.group({uploadfile:["orgStructure.xlsx"],file:[null,l.kI.required],AddMode:[!0,l.kI.required],ar_Name:[null],en_Name:[null],EffectiveDate:[null,l.kI.required],structureId:[null]})}get formCtrls(){return this.form.controls}upload(){this.submitted=!0;let i=d.M6.objectToFormData({file:this.formCtrls.file.value,AddMode:this.formCtrls.AddMode.value,ArabicName:this.formCtrls.ar_Name.value,EnglishName:this.formCtrls.en_Name.value,SelectedStructureToEdit:this.formCtrls.structureId.value,EffectiveDate:this.formCtrls.EffectiveDate.value});this.formCtrls.AddMode.value?(this.formCtrls.ar_Name.setValidators([l.kI.required]),this.formCtrls.en_Name.setValidators([l.kI.required]),this.formCtrls.structureId.removeValidators([l.kI.required])):(this.formCtrls.ar_Name.removeValidators([l.kI.required]),this.formCtrls.en_Name.removeValidators([l.kI.required]),this.formCtrls.structureId.setValidators([l.kI.required])),this.formCtrls.ar_Name.updateValueAndValidity(),this.formCtrls.en_Name.updateValueAndValidity(),this.formCtrls.structureId.updateValueAndValidity(),this.form.valid&&(this.showLoading(),this.orgStructureService.upload(i).subscribe(a=>{a.message.messageType==_.u.Success?(this.success("successfulUpload"),this.submitted=!1):this.errorList(a.message.messages),this.hideLoading()}))}download(){this.orgStructureService.download().subscribe(t=>{this.fileService.downloadBufferFile(t,"orgStructure.xlsx")})}changeMode(){this.formCtrls.ar_Name.setValue(null),this.formCtrls.en_Name.setValue(null),this.formCtrls.EffectiveDate.setValue(null),this.formCtrls.structureId.setValidators(this.formCtrls.addMode?null:l.kI.required)}getStructureById(){this.orgStructureService.getById(this.formCtrls.structureId.value).subscribe(t=>{this.form.patchValue(t.data[0]),this.formCtrls.EffectiveDate.setValue(t.data[0]?.froM_DATE)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(q._))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-upload-org-structure-dialog"]],features:[e.qOj],decls:18,vars:17,consts:[["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["parentTitle","orgStructure","title","upload",1,"d-inline-block","mtop-10",3,"id"],[1,"container-fluid","mx-0"],[1,"row"],[1,"col-12"],["suffixIcon","pi pi-download",3,"control","prefixIcon","isPrefixSvg","readonly","clickSuffixIcon"],[3,"control","submitted","radioList","change"],["class","col-12",4,"ngIf"],[4,"ngIf"],[3,"control","submitted"],["align","end",1,"mb-0","mt-1"],["icon","pi pi-upload","label","upload",1,"w-95","m-auto","d-block",3,"styleClass","iconPositionBefore","onClick"],[3,"control","submitted","filter","param","change"],["label","ar_Name",3,"control","submitted"],["label","en_Name",3,"control","submitted"],["label","start_date",3,"control","submitted"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h4"),e._UZ(2,"page-title",1),e.qZA()(),e.TgZ(3,"mat-dialog-content",2)(4,"mat-card-subtitle"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",3)(8,"div",4)(9,"app-input",5),e.NdJ("clickSuffixIcon",function(){return i.download()}),e.qZA()(),e.TgZ(10,"div",4)(11,"app-radio-button",6),e.NdJ("change",function(){return i.changeMode()}),e.qZA()(),e.YNc(12,ot,2,4,"div",7),e.YNc(13,nt,7,6,"ng-container",8),e.TgZ(14,"div",4),e._UZ(15,"app-file-input",9),e.qZA()(),e.TgZ(16,"mat-card-actions",10)(17,"submit-btn",11),e.NdJ("onClick",function(){return i.upload()}),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("id",0),e.xp6(3),e.hij(" ",e.lcZ(6,15,"downloadTemplateAndFillItWithData")," "),e.xp6(4),e.Q6J("control",i.formCtrls.uploadfile)("prefixIcon",i.svg.excel)("isPrefixSvg",!0)("readonly",!0),e.xp6(2),e.Q6J("control",i.formCtrls.AddMode)("submitted",i.submitted)("radioList",i.modeList),e.xp6(1),e.Q6J("ngIf",!i.formCtrls.AddMode.value),e.xp6(1),e.Q6J("ngIf",i.formCtrls.AddMode.value),e.xp6(2),e.Q6J("control",i.formCtrls.file)("submitted",i.submitted),e.xp6(2),e.MGl("styleClass","",i.btn.block," m-auto"),e.Q6J("iconPositionBefore",!1))},dependencies:[c.O5,G.Q,tt.Y,Y.a,it._,N.p,I.T,m.$j,m.hq,Z.uh,Z.xY,ve.s,x.X$]}),o})();var V=s(92510),Ce=s(72986),H=s(73978);const rt=[{name:(0,d._f)("\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064a","Arabic Name"),id:"ar_Name",dataType:H.n.string},{name:(0,d._f)("\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0627\u0646\u062c\u0644\u064a\u0632\u064a","English Name"),id:"en_Name",dataType:H.n.string},{name:(0,d._f)("\u0645\u0646 \u062a\u0627\u0631\u064a\u062e","From Date"),id:"from_date",dataType:H.n.date},{name:(0,d._f)("\u0627\u0644\u064a \u062a\u0627\u0631\u064a\u062e","To Date"),id:"to_date",dataType:H.n.date}];var K=s(93410),le=s(60544),ce=s(65731),Te=s(24369),ne=s(29721),U=s(78575);let st=(()=>{class o extends y.U{constructor(){super(),this.onChange=new e.vpe}ngOnInit(){this.form=this.fb.group({name:[null],orgIds:[null],from_date:[null],to_date:[null]}),this.currentFilter&&this.form.patchValue(this.currentFilter,{emitEvent:!1})}get formCtrls(){return this.form.controls}getConditionString(t){return[t.orgIds?(0,U.In)("id",t.orgIds):"",t.name?`${(0,U.yi)("ar_Name",t.name)} or ${(0,U.yi)("en_Name",t.name)}`:"",t.from_date?(0,U.J0)("from_date",t.from_date):"",t.to_date?(0,U.VE)("to_date",t.to_date):""].filter(Boolean).join(" and ")}ngOnDestroy(){const t=this.getConditionString(this.form.value);this.onChange.emit({conditionString:t,groups:this.form.value})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["org-structure-simple-search"]],inputs:{currentFilter:"currentFilter"},outputs:{onChange:"onChange"},features:[e.qOj],decls:10,vars:8,consts:[[3,"formGroup"],[1,"row"],[1,"col-md-6","col-lg-3","col-12"],["label","structure",3,"control","filter","multi"],["label","name",3,"control","disabled"],[1,"col-md-4","col-lg-3","col-sm-6","col-12","mb-2"],["label","from_Date",3,"control"],[1,"col-md-4","col-lg-3","col-sm-6","col-12"],["label","to_Date",3,"control"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div",2),e._UZ(3,"org-structure-dropdown",3),e.qZA(),e.TgZ(4,"div",2),e._UZ(5,"app-input",4),e.qZA(),e.TgZ(6,"div",5),e._UZ(7,"app-datepicker",6),e.qZA(),e.TgZ(8,"div",7),e._UZ(9,"app-datepicker",8),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("control",i.formCtrls.orgIds)("filter",!0)("multi",!0),e.xp6(2),e.Q6J("control",i.formCtrls.name)("disabled",(null==i.formCtrls.orgIds.value?null:i.formCtrls.orgIds.value.length)>0),e.xp6(2),e.Q6J("control",i.formCtrls.from_date),e.xp6(2),e.Q6J("control",i.formCtrls.to_date))},dependencies:[G.Q,Y.a,ve.s,l._Y,l.JL,l.sg]}),o})();const lt=["dialogTemplate"];function ct(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-simple-advanced-search",7),e.NdJ("advancedResults",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.getAdvanced(a))}),e.ynx(1,8),e.TgZ(2,"org-structure-simple-search",9),e.NdJ("onChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.getSimple(a))}),e.qZA(),e.BQk(),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("currentFilter",t.advancedGroups)("ope",t.advancedOpe)("AdvancedColumns",t.AdvancedColumns),e.xp6(2),e.Q6J("currentFilter",t.simpleGroups)}}let pt=(()=>{class o extends y.U{constructor(t){super(),this.orgStructureService=t,this.mandatoryColomns=["Ser","id","en_Name","ar_Name","froM_DATE","tO_DATE","actions"],this.isLoaded=!1,this.optionalColomns=[],this.dialogRef=null,this.usingSimple=!1,this.usingAdvanced=!1,this.AdvancedColumns=rt}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new u.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,i){let r;this.dataSource=new u.by(null),this.isLoaded=!1,this.removePageParams(),this.page.pageIndex=t,i&&(this.page.pageSize=i),r=this.usingSimple?this.simpleCondition:this.usingAdvanced?this.advancedCondition:null,this.orgStructureService.getList({PageNumber:t,pageSize:this.page.pageSize},r).pipe(this.cancelRequest()).subscribe(f=>{if(f.message.messageType==_.u.Success){if(0==f.data.length&&t>1)return void this.getList(this.prevPage);this.dataSource=new u.by(function D(o){return o.map(n=>({...n,froM_DATE:d.M6.mapDate(n.froM_DATE),tO_DATE:d.M6.mapDate(n.tO_DATE)}))}(f.data)),this.isLoaded=!0,this.page.length=f.meta.totalItemCount,this.page.meta=f.meta}else this.errorList(f?.message?.messages)})}onDelete(t){let i=this.msgTranslate(t.ar_Name,t.en_Name);this.deleteDialog(i).subscribe(a=>{a&&this.delete(t)})}delete(t){this.showLoading(),this.orgStructureService.Delete(t.id).subscribe(i=>{i.message.messageType==_.u.Success?(this.deleteSuccessfullyMsg("orgStructureRemoved"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(i?.message?.messages),this.hideLoading()})}globalFunctionActions(t){t.viewName==b.S.upload_org_structure&&this.openUploadStructureDialog(),t.viewName==b.S.upload_org_kpi&&this.openUploadDialog({uploadPath:B.Z.upload_org_kpi,downloadPath:B.Z.download_org_kpi,name:"orgKpis"})}openUploadDialog(t){this.dialogsService.uploadDownloadDialog(t,{}).afterClosed().subscribe(i=>{})}openUploadStructureDialog(){this.dialogsService.addEditDialog(at,{},{maxWidth:"500px",panelClass:"dialog-emp-form"}).afterClosed().subscribe(t=>{})}onChangeFilterDrop(t){t==V.U.simple?this.openSearchDialog(V.U.simple):t==V.U.advanced?this.openSearchDialog(V.U.advanced):(this.usingSimple=!1,this.usingAdvanced=!1,this.advancedGroups=null,this.simpleGroups=null,this.getList(this.firstPage))}getSimple(t){this.simpleCondition=t.conditionString,this.simpleGroups=t.groups}getAdvanced(t){this.advancedCondition=t.conditionString,this.advancedGroups=t.groups,this.advancedOpe=t.ope}openSearchDialog(t){this.dialogRef&&this.dialogRef.close(),this.dialogRef=this.dialogsService.addEditDialog(this.dialogTemplate,t,{width:"60%"}),this.dialogRef.afterClosed().pipe((0,Ce.q)(1)).subscribe(i=>{i?.isSimple?(this.usingSimple=!0,this.getList(this.firstPage,this.page.pageSize)):0==i?.isSimple?(this.usingAdvanced=!0,this.getList(this.firstPage,this.page.pageSize)):(this.usingSimple=!1,this.usingAdvanced=!1,this.resetDropdown=null,this.advancedGroups=null,this.simpleGroups=null,(this.simpleCondition||this.advancedCondition)&&this.getList(this.firstPage))})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(q._))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-org-structure-index"]],viewQuery:function(t,i){if(1&t&&e.Gf(lt,5),2&t){let a;e.iGM(a=e.CRH())&&(i.dialogTemplate=a.first)}},features:[e.qOj],decls:9,vars:16,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","orgStructure","parentTitle","orgManagement","TitleHasGlobalFunc","",3,"globalFunctions","action"],[1,"index-card"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","exportService","actions","showSearchDropdown","searchDropdownList","selectedValueInSearchDropdown","selectSearchItem","onChangePage","deleteRow"],["dialogTemplate",""],[3,"title"],[3,"serviceId","moduleId"],[3,"currentFilter","ope","AdvancedColumns","advancedResults"],[1,"simple"],[3,"currentFilter","onChange"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card-title",0)(1,"page-title",1),e.NdJ("action",function(r){return i.globalFunctionActions(r)}),e.qZA()(),e.TgZ(2,"mat-card",2)(3,"app-material-table",3),e.NdJ("selectSearchItem",function(r){return i.onChangeFilterDrop(r)})("onChangePage",function(r){return i.getList(r.pageIndex+1,r.pageSize)})("deleteRow",function(r){return i.onDelete(r)}),e.qZA()(),e.YNc(4,ct,3,4,"ng-template",null,4,e.W1O),e.TgZ(6,"side-helping-menu",5),e.ALo(7,"translate"),e._UZ(8,"app-dashboard-display",6),e.qZA()),2&t&&(e.xp6(1),e.Q6J("globalFunctions",i.globalFunctions),e.xp6(2),e.Q6J("isLoaded",i.isLoaded)("dataSource",i.dataSource)("mandatoryColomns",i.mandatoryColomns)("optionalColomns",i.optionalColomns)("page",i.page)("exportService",i.orgStructureService)("actions",i.rowFunctions)("showSearchDropdown",!0)("searchDropdownList",i.simpleAdvancedSearch)("selectedValueInSearchDropdown",i.resetDropdown),e.xp6(3),e.s9C("title",e.lcZ(7,14,"Dashboard")),e.xp6(2),e.Q6J("serviceId",i.getCurrentServiceId())("moduleId",i.moduleId))},dependencies:[K.I,I.T,le.c,ce.b,Te.c,ne.X,m.a8,m.n5,st,x.X$]}),o})();var W=s(78937),ie=s(61064),pe=s(52682),dt=s(56500),ae=s(68506),z=s(10805),re=s(57772),ut=s(12574),xe=s(77304),O=s(4859),De=s(26941);let mt=(()=>{class o extends y.U{constructor(t,i,a,r){super(),this.orgStructureService=t,this.organizationsService=i,this.dialogRef=a,this.data=r,this.submitted=!1,this.viewName=b.S.add_organization}ngOnInit(){this.form=this.fb.group({org_Structure_ID:[null],parenT_ID:[null],orG_TYPE_ID:[null,[l.kI.required]],orG_ID:[null,[l.kI.required]]}),this.getFormValues()}onChangeBusinessAndCompanyId(){this.formCtrls.org_Structure_ID.value>0&&this.checkNoBusinessOrCompany()&&this.getAllUnAssignedOrganizationsByStructureId()}getFormValues(){this.form.patchValue(this.data),setTimeout(()=>{this.form.value.parenT_ID||(this.formCtrls.orG_TYPE_ID.disable(),this.formCtrls.orG_TYPE_ID.setValue(1))},100)}get formCtrls(){return this.form.controls}submit(){this.submitted=!0,this.form.valid&&this.create({core_Org_Structure_Org:{org_Structure_ID:this.formCtrls.org_Structure_ID.value,orG_TYPE_ID:this.formCtrls.orG_TYPE_ID.value,orG_ID:this.formCtrls.orG_ID.value,parenT_ID:this.formCtrls.parenT_ID.value}})}create(t){this.showLoading(),this.orgStructureService.createNode(t).subscribe(i=>{i?.message?.messageType==_.u.Success?(this.addSuccessfullyMsg("canRemoveFromIndex","newOrgStructureNodeAdded"),this.dialogRef.close(!0)):this.errorList(i?.message?.messages),this.hideLoading()})}getAllUnAssignedOrganizationsByStructureId(t){this.organizationList=null,this.organizationsService.GetAllUnAssignedByStructureId(this.formCtrls.org_Structure_ID.value).pipe(this.cancelRequest()).subscribe(i=>{i.message.messageType==_.u.Success?(this.organizationList=i.data,t&&this.formCtrls.orG_ID.setValue(t)):this.errorList(i?.message?.messages)})}createDialog(t){this.dialogsService.addFromDropdownDialog(ut.$,t,0,{width:"25vw",minWidth:"400px",maxWidth:"500px",panelClass:"setup-dialog"}).afterClosed().subscribe(i=>{this.getAllUnAssignedOrganizationsByStructureId(i.newId)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(q._),e.Y36(xe.z),e.Y36(Z.so),e.Y36(Z.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-org-structure-node"]],features:[e.qOj],decls:17,vars:14,consts:[["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","orgStructureNode",1,"d-inline-block","mtop-5","mbottom-10"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"mat-dialog-close"],[1,"pi","pi-times"],[1,"clearfix"],["dialogContainer",""],[1,"row"],[1,"col-12","mtop-5"],[3,"formGroup"],[1,"col-md-6","col-12"],[3,"control","submitted","disableCompany","appendTo","filter"],["label","organization","optionDisabled","assignStr",3,"control","submitted","List","appendTo","filter","viewName","createNewDialog"],["align","end"],[3,"id","onClick"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e._UZ(1,"page-title",1),e.TgZ(2,"button",2),e._UZ(3,"i",3),e.qZA(),e._UZ(4,"div",4),e.qZA(),e.TgZ(5,"mat-dialog-content",null,5)(7,"div",6)(8,"div",7)(9,"form",8)(10,"div",6)(11,"div",9),e._UZ(12,"app-org-types-dropdown",10),e.qZA(),e.TgZ(13,"div",9)(14,"app-prime-dropdown",11),e.NdJ("createNewDialog",function(r){return i.createDialog(r)}),e.qZA()()()()()()(),e.TgZ(15,"mat-dialog-actions",12)(16,"submit-btn",13),e.NdJ("onClick",function(){return i.submit()}),e.qZA()()),2&t){const a=e.MAs(6);e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(7),e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("control",i.formCtrls.orG_TYPE_ID)("submitted",i.submitted)("disableCompany",!!i.formCtrls.parenT_ID.value)("appendTo",a)("filter",!0),e.xp6(2),e.Q6J("control",i.formCtrls.orG_ID)("submitted",i.submitted)("List",i.organizationList)("appendTo",a)("filter",!0)("viewName",i.viewName),e.xp6(2),e.Q6J("id",0)}},dependencies:[N.p,I.T,O.lW,Z.ZT,Z.uh,Z.xY,Z.H8,ae.t,De.q,l._Y,l.JL,l.sg],styles:[".add-structure-node .mat-dialog-container{padding:24px}@media (min-width: 320px) and (max-width: 991px){  .page-title{font-size:13px!important}}"]}),o})();var _t=s(52614),Ze=s(20408),gt=s(91365),Ie=s(25054);function ht(o,n){if(1&o&&(e._UZ(0,"p-image",14),e.ALo(1,"translate")),2&o){const t=e.oxw(2);e.s9C("alt",e.lcZ(1,2,"img")),e.Q6J("src",t.fileService.preview(t.employeeData.img))}}function ft(o,n){1&o&&(e.TgZ(0,"div",15),e._UZ(1,"i",16),e.qZA())}function yt(o,n){if(1&o&&(e.TgZ(0,"p"),e._UZ(1,"i",17),e.TgZ(2,"span",18),e._uU(3),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(3),e.Oqu(t.employeeData.contact)}}function bt(o,n){if(1&o&&(e.TgZ(0,"p"),e._UZ(1,"i",19),e.TgZ(2,"span",18),e._uU(3),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(3),e.Oqu(t.employeeData.email)}}function vt(o,n){1&o&&(e.TgZ(0,"span",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"active")," "))}function Ct(o,n){1&o&&(e.TgZ(0,"span",26),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"notActive")," "))}function Tt(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"p"),e.YNc(2,vt,3,3,"span",20),e.YNc(3,Ct,3,3,"ng-template",null,21,e.W1O),e.qZA(),e.TgZ(5,"p",22),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"p",23)(9,"span",24),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"span"),e._uU(13),e.qZA()(),e.TgZ(14,"p",23)(15,"span",24),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"span"),e._uU(19),e.qZA()(),e.BQk()),2&o){const t=e.MAs(4),i=e.oxw(2);e.xp6(2),e.Q6J("ngIf",i.employeeData.isActive)("ngIfElse",t),e.xp6(4),e.hij(" ",e.lcZ(7,7,"noOfEmployeeReporting")," "),e.xp6(4),e.hij(" ",e.lcZ(11,9,"asSolidManager")," : "),e.xp6(3),e.hij(" ",null==i.employeeData?null:i.employeeData.manageSolidEmpNo,""),e.xp6(3),e.hij(" ",e.lcZ(17,11,"asDottedManager")," : "),e.xp6(3),e.hij(" ",null==i.employeeData?null:i.employeeData.manageDotesEmpNo,"")}}function xt(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"div",6)(2,"div",7),e.YNc(3,ht,2,4,"p-image",8),e.YNc(4,ft,2,0,"ng-template",null,9,e.W1O),e.qZA(),e.TgZ(6,"div",10)(7,"p",11),e._uU(8),e.qZA(),e.YNc(9,yt,4,1,"p",5),e.YNc(10,bt,4,1,"p",5),e.qZA()(),e.TgZ(11,"div",12)(12,"p",13),e._uU(13),e.ALo(14,"titlecase"),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"p"),e._uU(17),e.qZA(),e.TgZ(18,"p"),e._uU(19),e.qZA(),e.YNc(20,Tt,20,13,"ng-container",5),e.qZA(),e.BQk()),2&o){const t=e.MAs(5),i=e.oxw();e.xp6(3),e.Q6J("ngIf",i.employeeData.img&&""!=i.employeeData.img)("ngIfElse",t),e.xp6(5),e.hij(" ",i.msgTranslate(i.employeeData.ar_Name,i.employeeData.en_Name)," "),e.xp6(1),e.Q6J("ngIf",i.employeeData.contact),e.xp6(1),e.Q6J("ngIf",i.employeeData.email),e.xp6(3),e.hij(" ",e.lcZ(14,9,e.lcZ(15,11,"employment"))," "),e.xp6(4),e.hij(" ",i.employeeData.jobTitleName," "),e.xp6(2),e.hij(" ",i.employeeData.organization," "),e.xp6(1),e.Q6J("ngIf",!i.showMainData)}}function Dt(o,n){1&o&&(e._UZ(0,"span",29),e.TgZ(1,"div",30),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"noEmployeeData")," "))}function Zt(o,n){1&o&&(e.ynx(0),e.TgZ(1,"p-messages",27),e.YNc(2,Dt,4,3,"ng-template",28),e.qZA(),e.BQk())}function It(o,n){1&o&&(e.ynx(0),e._UZ(1,"app-structure-employee-card-skeleton"),e.BQk())}let de=(()=>{class o extends y.U{constructor(t,i,a){super(),this.employeesService=t,this.dialogRef=i,this.data=a,this.loaded=!1,this.showMainData=!1,a&&(this.employeeId=a.employeeId,this.showMainData=a.showMainData??!1)}ngOnInit(){const t=document.querySelectorAll(".cdk-overlay-backdrop");t.length>0&&t[t.length-1].classList.add("no-overlay")}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&this.employeeId>0&&this.getEmployeeData()}getEmployeeData(){this.employeesService.getEmployeeCardById(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==_.u.Success?(t.data.length>0&&(this.employeeData=(0,_t.A)(t.data)[0]),this.loaded=!0):this.errorList(t?.message?.messages)})}onWindowResize(t){this.dialogRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Ze.M),e.Y36(Z.so),e.Y36(Z.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-employee-card"]],hostBindings:function(t,i){1&t&&e.NdJ("resize",function(r){return i.onWindowResize(r)},!1,e.Jf7)},features:[e.qOj],decls:11,vars:11,consts:[[1,"title"],[1,"type-name","info"],["mat-icon-button","",1,"float-right","mb-1",3,"mat-dialog-close"],[1,"pi","pi-times"],[1,"employee-card"],[4,"ngIf"],[1,"row"],[1,"col-md-4","col-12","img-container"],["preview","true",3,"src","alt",4,"ngIf","ngIfElse"],["noImg",""],[1,"col-md-8","col-12","text-break"],[1,"mtop-5"],[1,"mtop-20"],[1,"mbottom-14",2,"font-weight","bold"],["preview","true",3,"src","alt"],[1,"alt-img-preview"],[1,"pi","pi-user"],[1,"pi","pi-phone"],[1,"mx-1"],[1,"fa","fa-envelope"],["class","badge bg-light-success",4,"ngIf","ngIfElse"],["no",""],[1,"mbottom-14","mtop-14",2,"font-weight","bold"],[1,"font-size-14"],[1,"d-inline-block"],[1,"badge","bg-light-success"],[1,"badge","bg-light-danger"],["severity","warn"],["pTemplate",""],[1,"p-message-icon","pi","pi-exclamation-triangle"],[1,"p-message-detail"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h6",1),e._uU(2),e.ALo(3,"titlecase"),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",2),e._UZ(6,"i",3),e.qZA()(),e.TgZ(7,"mat-dialog-content",4),e.YNc(8,xt,21,13,"ng-container",5),e.YNc(9,Zt,3,0,"ng-container",5),e.YNc(10,It,2,0,"ng-container",5),e.qZA()),2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,7,e.lcZ(4,9,"employeeDetails"))," "),e.xp6(3),e.ekj("ar",i.languageService.isArabic),e.Q6J("mat-dialog-close",!1),e.xp6(3),e.Q6J("ngIf",i.employeeData&&i.loaded),e.xp6(1),e.Q6J("ngIf",!i.employeeData&&i.loaded),e.xp6(1),e.Q6J("ngIf",!i.employeeData&&!i.loaded))},dependencies:[c.O5,gt.v,O.lW,Z.ZT,Z.xY,z.jx,Ie.E,re.V,c.rS,x.X$],styles:[".title[_ngcontent-%COMP%]{background-color:#0000000a;margin:-24px;padding:24px 18px}.title[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{display:inline-block;margin-bottom:0;font-size:16px}.title[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:-10px;margin-right:-15px}.title[_ngcontent-%COMP%]   button.ar[_ngcontent-%COMP%]{margin-left:-15px!important}  .mat-dialog-content.employee-card{margin-top:40px}  .mat-dialog-content.employee-card p{margin-bottom:.5rem;font-size:14px}"]}),o})();var Se=s(58350),we=s(31534),C=s(37084);function St(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"p",16),e.NdJ("click",function(a){const f=e.CHM(t).$implicit,M=e.oxw(3);return e.KtG(M.openEmployeeCardDialog(a.target,f.id))}),e.TgZ(1,"span",17),e._UZ(2,"i",18),e.qZA(),e.TgZ(3,"span",19),e._uU(4),e.qZA()()}if(2&o){const t=n.$implicit,i=e.oxw(3);e.xp6(1),e.Tol(i.msgTranslate("mleft-10","mright-10")),e.xp6(3),e.hij(" ",i.msgTranslate(t.ar_Name,t.en_Name)," ")}}function wt(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"div",13),e._uU(2),e.qZA(),e.TgZ(3,"div",14),e.YNc(4,St,5,3,"p",15),e.qZA(),e.BQk()),2&o){const t=n.$implicit;e.xp6(2),e.Oqu(t.key),e.xp6(2),e.Q6J("ngForOf",t.List)}}function At(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"input",11),e.NdJ("keyup",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.searchEmployees(a.target.value))}),e.ALo(2,"translate"),e.qZA(),e.YNc(3,wt,5,2,"ng-container",12),e.BQk()}if(2&o){const t=e.oxw();e.xp6(1),e.s9C("placeholder",e.lcZ(2,2,"search")),e.xp6(2),e.Q6J("ngForOf",t.employeesGroupsFiltered)}}function Pt(o,n){1&o&&(e.ynx(0),e._UZ(1,"app-org-details-employees-list-skeleton"),e.BQk())}function Jt(o,n){1&o&&(e._UZ(0,"span",22),e.TgZ(1,"div",23),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"noEmployeeInOrg")," "))}function Nt(o,n){1&o&&(e.ynx(0),e.TgZ(1,"p-messages",20),e.YNc(2,Jt,4,3,"ng-template",21),e.qZA(),e.BQk())}let Lt=(()=>{class o extends y.U{constructor(t,i,a,r){super(),this.employeesService=t,this.groupByService=i,this.dialogRef=a,this.data=r,this.expandedIndex=0,this.employees=[],this.loaded=!1,this.expandedIndex=r.expandedIndex,this.nodeData=r.nodeData}ngOnInit(){this.checkNoBusinessOrCompany()&&this.nodeData.structureId>0&&this.nodeData.org.id>0&&this.getEmployeesByOrgId();const t=document.querySelectorAll(".cdk-overlay-backdrop");t.length>0&&t[t.length-1].classList.add("no-overlay")}getEmployeesByOrgId(){this.employeesService.getAllByStructureAndOrgId(this.nodeData.structureId,this.nodeData.org.id).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==_.u.Success?(this.employees=t.data,this.employees.length>0?this.sortAndGroupEmployees():this.loaded=!0):this.errorList(t?.message?.messages)})}sortAndGroupEmployees(){this.employeesGroups=this.groupByService.groupByPartOfProperty(this.employees,this.languageService.isArabic?"ar_Name":"en_Name",1).sort((t,i)=>t.key<i.key?-1:t.key>i.key?1:0),this.employeesGroupsFiltered=this.employeesGroups.slice(),this.loaded=!0}openEmployeeCardDialog(t,i){let a=this.getHeaderElement(t),r={employeeId:i};this.dialogsService.dialogLeftOrRightCard(de,a.getBoundingClientRect(),350,!0,"80hv",r)}getHeaderElement(t){return t.classList.contains("mat-expansion-panel-body")?t:this.getHeaderElement(t.parentElement)}searchEmployees(t){this.employeesGroupsFiltered=this.employeesGroups.map(i=>({key:i.key,List:i.List.filter(a=>a.en_Name.toLowerCase().includes(t.toLowerCase())||a.ar_Name.toLowerCase().includes(t.toLowerCase()))})).filter(i=>i.List.length>0)}onWindowResize(t){this.dialogRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Ze.M),e.Y36(Se.$),e.Y36(Z.so),e.Y36(Z.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-org-details-employees"]],hostBindings:function(t,i){1&t&&e.NdJ("resize",function(r){return i.onWindowResize(r)},!1,e.Jf7)},features:[e.qOj],decls:19,vars:11,consts:[[1,"details-dialog-title"],[1,"mb-2"],[1,"type-name","info"],["mat-icon-button","",1,"float-right","mb-1",3,"mat-dialog-close"],[1,"pi","pi-times"],[1,"org-name"],[1,"details-dialog","company"],["multi",""],[3,"expanded"],[1,"expantion-body"],[4,"ngIf"],[1,"form-control","mbottom-15",3,"placeholder","keyup"],[4,"ngFor","ngForOf"],[1,"key-emp"],["role","button"],["class","name-container",3,"click",4,"ngFor","ngForOf"],[1,"name-container",3,"click"],[1,"img-small-icon"],[1,"pi","pi-user"],[1,"emp-name"],["severity","warn"],["pTemplate",""],[1,"p-message-icon","pi","pi-exclamation-triangle"],[1,"p-message-detail"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h6",2),e._uU(3),e.qZA(),e.TgZ(4,"button",3),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"p",5),e._uU(7),e.qZA()(),e.TgZ(8,"mat-dialog-content",6)(9,"mat-accordion",7)(10,"mat-expansion-panel",8)(11,"mat-expansion-panel-header")(12,"mat-panel-title"),e._uU(13),e.ALo(14,"translate"),e.qZA()(),e.TgZ(15,"div",9),e.YNc(16,At,4,4,"ng-container",10),e.YNc(17,Pt,2,0,"ng-container",10),e.YNc(18,Nt,3,0,"ng-container",10),e.qZA()()()()),2&t&&(e.xp6(3),e.AsE(" ",i.nodeData.org.code," - ",i.msgTranslate(i.nodeData.org.ar_Name,i.nodeData.org.en_Name)," "),e.xp6(1),e.Q6J("mat-dialog-close",!1),e.xp6(3),e.hij(" ",i.msgTranslate(i.nodeData.orgType.ar_Name,i.nodeData.orgType.en_Name)," "),e.xp6(3),e.Q6J("expanded",1==i.expandedIndex),e.xp6(3),e.Oqu(e.lcZ(14,9,"employees")),e.xp6(3),e.Q6J("ngIf",i.employees.length>0&&i.loaded),e.xp6(1),e.Q6J("ngIf",0==i.employees.length&&!i.loaded),e.xp6(1),e.Q6J("ngIf",0==i.employees.length&&i.loaded))},dependencies:[c.sg,c.O5,we.b,O.lW,Z.ZT,Z.xY,C.pp,C.ib,C.yz,C.yK,z.jx,re.V,x.X$]}),o})();var ue=s(44132),X=s(79417),me=s(75885),Ae=s(40445),Pe=s(3848),Ot=s(10266),Gt=s(12453),_e=s(86467),L=s(44850);function Ut(o,n){if(1&o&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=n.$implicit,i=e.oxw(2);let a;e.xp6(1),e.HOy(" ",i.msgTranslate(null==t.core_Org?null:t.core_Org.ar_Name,null==t.core_Org?null:t.core_Org.en_Name)," ( ",null!==(a=t.currentEmployeeNumber)&&void 0!==a?a:0," ",e.lcZ(2,4,"of")," ",0==t.max_Employee?i.translate("unlimited"):t.max_Employee," FTE ) ")}}function jt(o,n){if(1&o&&(e.TgZ(0,"div",14),e.YNc(1,Ut,3,6,"p",15),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.nodeData.core_Org_Job_Title)}}function Et(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"p",20),e.NdJ("click",function(a){const f=e.CHM(t).$implicit,M=e.oxw(3);return e.KtG(M.openEmployeeCardDialog(a.target,f.id))}),e.TgZ(1,"span",21),e._UZ(2,"i",22),e.qZA(),e.TgZ(3,"span",23),e._uU(4),e.qZA()()}if(2&o){const t=n.$implicit,i=e.oxw(3);e.xp6(1),e.Tol(i.msgTranslate("mleft-10","mright-10")),e.xp6(3),e.hij(" ",i.msgTranslate(t.ar_Name,t.en_Name)," ")}}function qt(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"div",17),e._uU(2),e.qZA(),e.TgZ(3,"div",18),e.YNc(4,Et,5,3,"p",19),e.qZA(),e.BQk()),2&o){const t=n.$implicit;e.xp6(2),e.Oqu(t.key),e.xp6(2),e.Q6J("ngForOf",t.List)}}function Qt(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"input",16),e.NdJ("keyup",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.searchEmployees(a.target.value))}),e.ALo(2,"translate"),e.qZA(),e.YNc(3,qt,5,2,"ng-container",15),e.BQk()}if(2&o){const t=e.oxw();e.xp6(1),e.s9C("placeholder",e.lcZ(2,2,"search")),e.xp6(2),e.Q6J("ngForOf",t.employeesGroupsFiltered)}}function Mt(o,n){1&o&&(e.ynx(0),e._UZ(1,"app-org-details-employees-list-skeleton"),e.BQk())}function Rt(o,n){1&o&&(e._UZ(0,"span",26),e.TgZ(1,"div",27),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"noEmployeeInJob")," "))}function Vt(o,n){1&o&&(e.ynx(0),e.TgZ(1,"p-messages",24),e.YNc(2,Rt,4,3,"ng-template",25),e.qZA(),e.BQk())}let Ft=(()=>{class o extends y.U{constructor(t,i,a){super(),this.groupByService=t,this.dialogRef=i,this.data=a,this.expandedIndex=0,this.employees=[],this.loaded=!1,this.expandedIndex=a.expandedIndex,this.nodeData=a.nodeData,this.employees=this.nodeData.core_Person_Instance_Job_Title.map(r=>r.core_Person_Instance?.core_Person),this.employees.length>0?this.sortAndGroupEmployees():this.loaded=!0}ngOnInit(){const t=document.querySelectorAll(".cdk-overlay-backdrop");t.length>0&&t[t.length-1].classList.add("no-overlay")}sortAndGroupEmployees(){this.employees=this.employees.filter(t=>{if(t)return t}),this.employeesGroups=this.groupByService.groupByPartOfProperty(this.employees,this.languageService.isArabic?"ar_Name":"en_Name",1).sort((t,i)=>t.key<i.key?-1:t.key>i.key?1:0),this.employeesGroupsFiltered=this.employeesGroups.slice(),this.loaded=!0}openEmployeeCardDialog(t,i){let a=this.getHeaderElement(t),r={employeeId:i};this.dialogsService.dialogLeftOrRightCard(de,a.getBoundingClientRect(),350,!0,"80hv",r)}getHeaderElement(t){return t.classList.contains("mat-expansion-panel-body")?t:this.getHeaderElement(t.parentElement)}searchEmployees(t){this.employeesGroupsFiltered=this.employeesGroups.map(i=>({key:i.key,List:i.List.filter(a=>a.en_Name.toLowerCase().includes(t.toLowerCase())||a.ar_Name.toLowerCase().includes(t.toLowerCase()))})).filter(i=>i.List.length>0)}onWindowResize(t){this.dialogRef.close()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Se.$),e.Y36(Z.so),e.Y36(Z.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-job-title-details-dialog"]],hostBindings:function(t,i){1&t&&e.NdJ("resize",function(r){return i.onWindowResize(r)},!1,e.Jf7)},features:[e.qOj],decls:50,vars:32,consts:[[1,"details-dialog-title"],[1,"mb-2"],["mat-icon-button","",1,"float-right","mb-1",3,"mat-dialog-close"],[1,"pi","pi-times"],[1,"type-name","info"],[1,"clearfix"],[1,"details-dialog","jobtitle"],["multi",""],[3,"expanded"],[1,"expantion-body"],[1,"table-container"],["class","no-employees",4,"ngIf"],[1,"expantion-body","employee-body"],[4,"ngIf"],[1,"no-employees"],[4,"ngFor","ngForOf"],[1,"form-control","mbottom-15",3,"placeholder","keyup"],[1,"key-emp"],["role","button"],["class","name-container",3,"click",4,"ngFor","ngForOf"],[1,"name-container",3,"click"],[1,"img-small-icon"],[1,"pi","pi-user"],[1,"emp-name"],["severity","warn"],["pTemplate",""],[1,"p-message-icon","pi","pi-exclamation-triangle"],[1,"p-message-detail"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"button",2),e._UZ(3,"i",3),e.qZA(),e.TgZ(4,"h6",4),e._uU(5),e.qZA()(),e._UZ(6,"p",5),e.qZA(),e.TgZ(7,"mat-dialog-content",6)(8,"mat-accordion",7)(9,"mat-expansion-panel",8)(10,"mat-expansion-panel-header")(11,"mat-panel-title"),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"div",9)(15,"div",10)(16,"table")(17,"tbody")(18,"tr")(19,"th"),e._uU(20),e.ALo(21,"titlecase"),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"td"),e._uU(24),e.qZA()(),e.TgZ(25,"tr")(26,"th"),e._uU(27),e.ALo(28,"titlecase"),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"td"),e._uU(31),e.qZA()(),e.TgZ(32,"tr")(33,"th"),e._uU(34),e.ALo(35,"titlecase"),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"td"),e._uU(38),e.qZA()()()()(),e._UZ(39,"mat-divider"),e.YNc(40,jt,2,1,"div",11),e.qZA()(),e.TgZ(41,"mat-expansion-panel",8)(42,"mat-expansion-panel-header")(43,"mat-panel-title"),e._uU(44),e.ALo(45,"translate"),e.qZA()(),e.TgZ(46,"div",12),e.YNc(47,Qt,4,4,"ng-container",13),e.YNc(48,Mt,2,0,"ng-container",13),e.YNc(49,Vt,3,0,"ng-container",13),e.qZA()()()()),2&t&&(e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(3),e.hij(" ",i.msgTranslate(i.nodeData.ar_Name,i.nodeData.en_Name)," "),e.xp6(4),e.Q6J("expanded",0==i.expandedIndex),e.xp6(3),e.Oqu(e.lcZ(13,16,"details")),e.xp6(8),e.Oqu(e.lcZ(21,18,e.lcZ(22,20,"code"))),e.xp6(4),e.Oqu(i.nodeData.code),e.xp6(3),e.Oqu(e.lcZ(28,22,e.lcZ(29,24,"jobTitle"))),e.xp6(4),e.hij(" ",i.msgTranslate(i.nodeData.ar_Name,i.nodeData.en_Name)," "),e.xp6(3),e.Oqu(e.lcZ(35,26,e.lcZ(36,28,"jobFamily"))),e.xp6(4),e.hij(" ",i.msgTranslate(null==i.nodeData.core_Job_Title_Family?null:i.nodeData.core_Job_Title_Family.ar_Name,null==i.nodeData.core_Job_Title_Family?null:i.nodeData.core_Job_Title_Family.en_Name)," "),e.xp6(2),e.Q6J("ngIf",i.nodeData.core_Org_Job_Title.length>0),e.xp6(1),e.Q6J("expanded",1==i.expandedIndex),e.xp6(3),e.Oqu(e.lcZ(45,30,"employees")),e.xp6(3),e.Q6J("ngIf",i.employees.length>0&&i.loaded),e.xp6(1),e.Q6J("ngIf",0==i.employees.length&&!i.loaded),e.xp6(1),e.Q6J("ngIf",0==i.employees.length&&i.loaded))},dependencies:[c.sg,c.O5,we.b,O.lW,L.d,Z.ZT,Z.xY,C.pp,C.ib,C.yz,C.yK,z.jx,re.V,c.rS,x.X$],styles:[".mat-dialog-content.details-dialog.jobtitle .mat-expansion-panel-body{padding:0}  .mat-dialog-content.details-dialog.jobtitle .table-container{padding:0 24px 16px}  .mat-dialog-content.details-dialog.jobtitle .no-employees,   .mat-dialog-content.details-dialog.jobtitle .employee-body{padding:16px 24px 0}"]}),o})();var ee=s(26315),oe=s(18521);let kt=(()=>{class o extends oe.K{constructor(){super()}getJobTitleHierarchy(t){return this.get("OrgManagement/JobTitle/GetAll_Structure",{params:{$filter:`id eq ${t}`,$expand:`${ee.db.core_Org_Job_Title}/${ee.db.core_Org},${ee.db.Core_Person_Instance_Job_Title}.${ee.db.Core_Person_Instance}.${ee.db.Core_Person},${ee.db.Core_Job_Title_Family}`}})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var Bt=s(89609),Je=s(70502),ge=s(62160);const Yt=["jobTitleChart"];function Ht(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-job-title-dropdown",13),e.NdJ("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onChangeSearchValue())}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("control",t.formCtrls.jobTitleId)("filter",!0)}}function zt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-employee-dropdown",13),e.NdJ("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.getAllEmployeeJobTitles())}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("control",t.formCtrls.employeeId)("filter",!0)}}function $t(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",3)(1,"app-prime-dropdown",14),e.NdJ("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onChangeSearchValue())}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("control",t.formCtrls.jobTitleId)("filter",!0)("List",t.employeeJobTitles)}}function Kt(o,n){if(1&o&&(e.TgZ(0,"div",3),e._UZ(1,"export-chart-buttons",15),e.qZA()),2&o){const t=e.oxw(),i=e.MAs(12);e.ekj("col-md-6",!(t.formCtrls.employeeId.value>0)),e.xp6(1),e.Q6J("resource",i)}}function Wt(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.upOneLevel())}),e._UZ(2,"i",24),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"div"),e.BQk()}if(2&o){const t=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.Udp("left",i.upOneLevelBtnPositions.btnLeft,"px"),e.xp6(2),e.AsE(" ",e.lcZ(4,6,"upOneLevel")," ",t.parent," "),e.xp6(2),e.Udp("left",i.upOneLevelBtnPositions.lineLeft,"px")}}function Xt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",25)(1,"i",26),e.NdJ("click",function(a){e.CHM(t);const r=e.oxw().$implicit,f=e.oxw();return e.KtG(f.openJobTitleDetailsDialog(a.target,r.data,1))}),e.TgZ(2,"span"),e._uU(3),e.qZA()()()}if(2&o){const t=e.oxw().$implicit;e.xp6(3),e.hij(" ",t.data.core_Person_Instance_Job_Title.length," ")}}function ei(o,n){if(1&o&&(e.TgZ(0,"p"),e._uU(1),e.qZA()),2&o){const t=n.$implicit,i=e.oxw(3);let a;e.xp6(1),e.lnq(" ",i.msgTranslate(null==t.core_Org?null:t.core_Org.ar_Name,null==t.core_Org?null:t.core_Org.en_Name)," ( ",null!==(a=t.currentEmployeeNumber)&&void 0!==a?a:0," / ",0==t.max_Employee?i.translate("unlimited"):t.max_Employee," FTE ) ")}}function ti(o,n){if(1&o&&(e.TgZ(0,"div",27),e.YNc(1,ei,2,3,"p",28),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.data.core_Org_Job_Title)}}function ii(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",29),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw();return r.expandNode(a),e.KtG(r.changePositions())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.xp6(1),e.AsE(" ",t.children.length," ",e.lcZ(2,2,1==t.children.length?"jobTitleBelow":"jobTitlesBelow")," ")}}function oi(o,n){if(1&o){const t=e.EpF();e.YNc(0,Wt,6,8,"ng-container",16),e.TgZ(1,"div",17),e.NdJ("click",function(a){const f=e.CHM(t).$implicit,M=e.oxw();return e.KtG(M.openJobTitleDetailsDialog(a.target,f.data,0))}),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.TgZ(4,"div",18)(5,"p"),e._uU(6),e.qZA()()(),e.TgZ(7,"div",19),e.YNc(8,Xt,4,1,"div",20),e.YNc(9,ti,2,1,"div",21),e.YNc(10,ii,3,4,"div",22),e.qZA()}if(2&o){const t=n.$implicit,i=e.oxw();e.Q6J("ngIf",i.jobTitleOrgChart&&(null==i.jobTitleOrgChart[0]||null==i.jobTitleOrgChart[0].data?null:i.jobTitleOrgChart[0].data.parentJobTitleID)>0&&1==t.data.currentFirstNode),e.xp6(1),e.Q6J("id",t.data.id),e.xp6(2),e.AsE(" ",t.data.code," - ",i.msgTranslate(t.data.ar_Name,t.data.en_Name)," "),e.xp6(3),e.hij(" ",i.msgTranslate(null==t.data.core_Job_Title_Family?null:t.data.core_Job_Title_Family.ar_Name,null==t.data.core_Job_Title_Family?null:t.data.core_Job_Title_Family.en_Name)," "),e.xp6(2),e.Q6J("ngIf",(null==t.data.core_Person_Instance_Job_Title?null:t.data.core_Person_Instance_Job_Title.length)>0),e.xp6(1),e.Q6J("ngIf",(null==t.data.core_Org_Job_Title?null:t.data.core_Org_Job_Title.length)>0),e.xp6(1),e.Q6J("ngIf",t.children.length>0)}}function ni(o,n){1&o&&e._UZ(0,"app-chart-skeleton",30),2&o&&e.Q6J("width",280)}let ai=(()=>{class o extends y.U{constructor(t,i){super(),this.jobTitleChartService=t,this.employeeJobInformationService=i,this.loading=!1,this.lastSelectedJobId=0,this.searchTypeList=[],this.employeeJobTitles=[],this.upOneLevelBtnPositions={btnLeft:0,lineLeft:0}}ngOnInit(){this.form=this.fb.group({searchTypeId:[null],jobTitleId:[null],employeeId:[null]}),setTimeout(()=>{this.searchTypeList=[{id:1,ar_Name:"\u0627\u0644\u0648\u0638\u0627\u0626\u0641",en_Name:"Job titles"},{id:2,ar_Name:"\u0627\u0644\u0645\u0648\u0638\u0641\u064a\u0646",en_Name:"Employees"}]},100)}onChangeBusinessAndCompanyId(){this.jobTitleOrgChart=null,this.checkNoBusinessOrCompany()&&this.getJobTitleOrgChart(this.formCtrls.jobTitleId.value)}get formCtrls(){return this.form.controls}getJobTitleOrgChart(t){t>0&&(this.lastSelectedJobId=t,this.jobTitleOrgChart=null,this.loading=!0,this.jobTitleChartService.getJobTitleHierarchy(t).pipe(this.cancelRequest()).subscribe(i=>{i.message.messageType==_.u.Success?(this.jobTitleOrgChart=P(i.data),this.jobTitleOrgChart[0].data.currentFirstNode=!0,this.changePositions(),this.lastSelectedJobId==t&&(this.loading=!1)):(this.errorList(i?.message?.messages),this.loading=!1)}))}changePositions(){setTimeout(()=>{this.setPositionBtnUpOneLevel(),this.setPositionUpOneLevelLine()},100)}onChangeSearchType(){this.formCtrls.jobTitleId.reset(),this.formCtrls.employeeId.reset()}onChangeSearchValue(){this.getJobTitleOrgChart(this.formCtrls.jobTitleId.value)}upOneLevel(){1==this.formCtrls.searchTypeId.value?this.formCtrls.jobTitleId.setValue(this.jobTitleOrgChart[0].data.parentJobTitleID):2==this.formCtrls.searchTypeId.value&&(this.onChangeSearchType(),this.getJobTitleOrgChart(this.jobTitleOrgChart[0].data.parentJobTitleID))}setPositionBtnUpOneLevel(){let t=document.querySelector(".upOneLevel-btn")?.getBoundingClientRect().width,i=document.querySelector(".p-organizationchart-node-content")?.getBoundingClientRect();this.upOneLevelBtnPositions.btnLeft=i?.width/2-t/2}setPositionUpOneLevelLine(){let t=document.querySelector(".p-organizationchart-node-content")?.getBoundingClientRect();this.upOneLevelBtnPositions.lineLeft=t?.width/2}openJobTitleDetailsDialog(t,i,a){let r=this.getHeaderElement(t),f={nodeData:i,expandedIndex:a};this.dialogsService.dialogLeftOrRightCard(Ft,r.getBoundingClientRect(),350,!1,"90hv",f)}getHeaderElement(t){return t.classList.contains("p-organizationchart-node-content")?t:this.getHeaderElement(t.parentElement)}expandNode(t){t.expanded=!t.expanded}onWindowResize(t){this.setPositionBtnUpOneLevel(),this.setPositionUpOneLevelLine()}getAllEmployeeJobTitles(){let t=this.formCtrls.employeeId.value;t>0&&(this.showLoading(),this.employeeJobInformationService.getAllCurrentJobsByEmployeeId(t).pipe(this.cancelRequest()).subscribe(i=>{i.message.messageType==_.u.Success?this.employeeJobTitles=i.data:this.errorList(i?.message?.messages),this.hideLoading()}))}onScroll(t){this.changePositions()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(kt),e.Y36(Bt._))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-job-title-org-chart"]],viewQuery:function(t,i){if(1&t&&e.Gf(Yt,5),2&t){let a;e.iGM(a=e.CRH())&&(i.jobTitleChart=a.first)}},hostBindings:function(t,i){1&t&&e.NdJ("resize",function(r){return i.onWindowResize(r)},!1,e.Jf7)},features:[e.qOj],decls:15,vars:10,consts:[[1,"organizationchart-container","job-title-chart"],[1,"mbottom-20",3,"formGroup"],[1,"row","mx-0"],[1,"col-md-3","col-12"],["label","searchBy",3,"control","List","change"],[3,"control","filter","change",4,"ngIf"],["class","col-md-3 col-12",4,"ngIf"],["class","col-md-3 col-12",3,"col-md-6",4,"ngIf"],["id","jobTitleChart","appScrollableHorizontal","",3,"scroll"],[3,"value","preserveSpace","onNodeExpand","onNodeCollapse"],["jobTitleChart",""],["pTemplate","job-title"],[3,"width",4,"ngIf"],[3,"control","filter","change"],["label","jobTitle",3,"control","filter","List","change"],["elementId","jobTitleChart",3,"resource"],[4,"ngIf"],[1,"node-header",3,"id","click"],[1,"node-content","main-data"],[1,"node-content"],["class","employees-no-section",4,"ngIf"],["class","fte-content",4,"ngIf"],["class","node-footer info",3,"click",4,"ngIf"],["mat-button","",1,"btn","bg-light-info","upOneLevel-btn",3,"click"],[1,"pi","pi-angle-up"],[1,"employees-no-section"],[1,"pi","pi-users",3,"click"],[1,"fte-content"],[4,"ngFor","ngForOf"],[1,"node-footer","info",3,"click"],[3,"width"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"app-prime-dropdown",4),e.NdJ("change",function(){return i.onChangeSearchType()}),e.qZA()(),e.TgZ(5,"div",3),e.YNc(6,Ht,1,2,"app-job-title-dropdown",5),e.YNc(7,zt,1,2,"app-employee-dropdown",5),e.qZA(),e.YNc(8,$t,2,3,"div",6),e.YNc(9,Kt,2,3,"div",7),e.qZA()(),e.TgZ(10,"div",8),e.NdJ("scroll",function(r){return i.onScroll(r)}),e.TgZ(11,"p-organizationChart",9,10),e.NdJ("onNodeExpand",function(){return i.changePositions()})("onNodeCollapse",function(){return i.changePositions()}),e.YNc(13,oi,11,8,"ng-template",11),e.qZA()(),e.YNc(14,ni,1,1,"app-chart-skeleton",12),e.qZA()),2&t&&(e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("control",i.formCtrls.searchTypeId)("List",i.searchTypeList),e.xp6(2),e.Q6J("ngIf",1==i.formCtrls.searchTypeId.value),e.xp6(1),e.Q6J("ngIf",2==i.formCtrls.searchTypeId.value),e.xp6(1),e.Q6J("ngIf",i.formCtrls.employeeId.value>0),e.xp6(1),e.Q6J("ngIf",null!=i.jobTitleOrgChart),e.xp6(2),e.Q6J("value",i.jobTitleOrgChart)("preserveSpace",!1),e.xp6(3),e.Q6J("ngIf",i.loading))},dependencies:[c.sg,c.O5,ue.$,Je.J,X.c,me.a,O.lW,ae.t,ge.W,l._Y,l.JL,l.sg,z.jx,_e.OE,x.X$],styles:[".job-title-chart .p-organizationchart-node-content{border-radius:10px;width:280px!important}  .job-title-chart .main-data p{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}  .job-title-chart .node-header{border-top-left-radius:10px;border-top-right-radius:10px;cursor:pointer}  .job-title-chart .node-footer{background-color:inherit;border-bottom-left-radius:10px;border-bottom-right-radius:10px;padding-bottom:10px;padding-top:10px;font-size:13px}  .job-title-chart .node-footer:hover{background-color:#f2f4f5;color:#525050!important}  .job-title-chart .p-organizationchart-node-content .node-header:hover{background:#f2f4f5!important}  .job-title-chart .no-employees{margin-top:1.8rem;text-align:start;color:#525050;padding-bottom:.3rem}  .job-title-chart .employees-no-section{border-bottom:1px solid #dee2e6!important}  .job-title-chart .fte-content{padding:15px .7rem 0;text-align:start}  .job-title-chart .ft-image,   .job-title-chart .ft-file{cursor:pointer}"]}),o})(),ri=(()=>{class o extends oe.K{constructor(){super()}getEmployeesChart(t){return this.get("personnel/Employees/GetAll_EmployeesCard_Structure",{params:{PerinsID:t}})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const si=["resourceChart"];function li(o,n){if(1&o&&(e.TgZ(0,"div",11),e._UZ(1,"export-chart-buttons",12),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("resource",t.resourcesChart)}}function ci(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",22),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.upOneLevel())}),e._UZ(2,"i",23),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"div"),e.BQk()}if(2&o){const t=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.Udp("left",i.upOneLevelBtnPositions.btnLeft,"px"),e.xp6(2),e.AsE(" ",e.lcZ(4,6,"upOneLevel")," ",t.parent," "),e.xp6(2),e.Udp("left",i.upOneLevelBtnPositions.lineLeft,"px")}}function pi(o,n){if(1&o&&(e._UZ(0,"p-image",24),e.ALo(1,"translate")),2&o){const t=e.oxw().$implicit,i=e.oxw();e.s9C("alt",e.lcZ(1,2,"img")),e.Q6J("src",i.fileService.preview(t.data.img))}}function di(o,n){1&o&&(e.TgZ(0,"div",25),e._UZ(1,"i",26),e.qZA())}function ui(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw();return r.expandNode(a),e.KtG(r.changePositions())}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.children.length," ")}}function mi(o,n){if(1&o){const t=e.EpF();e.YNc(0,ci,6,8,"ng-container",10),e.TgZ(1,"div",13)(2,"div",14)(3,"div",15),e.YNc(4,pi,2,4,"p-image",16),e.YNc(5,di,2,0,"ng-template",null,17,e.W1O),e.qZA(),e.TgZ(7,"div",18),e.NdJ("click",function(a){const f=e.CHM(t).$implicit,M=e.oxw();return e.KtG(M.openEmployeeDetailsDialog(a.target,f.data))}),e.TgZ(8,"p",19),e._uU(9),e.ALo(10,"titlecase"),e.qZA(),e.TgZ(11,"p"),e._uU(12),e.ALo(13,"titlecase"),e.qZA(),e.TgZ(14,"p"),e._uU(15),e.ALo(16,"date"),e.qZA()()()(),e.TgZ(17,"div",20),e.YNc(18,ui,2,1,"div",21),e.qZA()}if(2&o){const t=n.$implicit,i=e.MAs(6),a=e.oxw();e.Q6J("ngIf",a.resourcesChart&&(null==a.resourcesChart[0]||null==a.resourcesChart[0].data?null:a.resourcesChart[0].data.parentID)>0&&1==t.data.currentFirstNode),e.xp6(1),e.Q6J("id",t.data.id),e.xp6(3),e.Q6J("ngIf",t.data.img&&"/"!=t.data.img)("ngIfElse",i),e.xp6(5),e.hij(" ",e.lcZ(10,8,a.msgTranslate(t.data.ar_Name,t.data.en_Name))," "),e.xp6(3),e.hij(" ",e.lcZ(13,10,a.msgTranslate(t.data.jobTitleNameAr,t.data.jobTitleName))," "),e.xp6(3),e.hij(" ",e.xi3(16,12,t.data.joiningDate,"dd-MM-yyyy")," "),e.xp6(3),e.Q6J("ngIf",t.children.length>0)}}function _i(o,n){1&o&&e._UZ(0,"app-chart-skeleton")}let gi=(()=>{class o extends y.U{constructor(t){super(),this.resourcesChartService=t,this.loading=!1,this.lastSelectedEmpId=0,this.upOneLevelBtnPositions={btnLeft:0,lineLeft:0}}ngOnInit(){this.form=this.fb.group({employeeId:[null]})}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&this.getResourcesChart(this.formCtrls.employeeId.value)}get formCtrls(){return this.form.controls}getResourcesChart(t){t>0&&(this.lastSelectedEmpId=t,this.resourcesChart=null,this.loading=!0,this.resourcesChartService.getEmployeesChart(t).pipe(this.cancelRequest()).subscribe(i=>{i.message.messageType==_.u.Success?(this.resourcesChart=S(i.data,this.lastSelectedEmpId),this.resourcesChart[0].data.currentFirstNode=!0,this.changePositions(),this.lastSelectedEmpId==t&&(this.loading=!1)):(this.errorList(i?.message?.messages),this.loading=!1)}))}changePositions(){setTimeout(()=>{this.setPositionBtnUpOneLevel(),this.setPositionUpOneLevelLine()},100)}onChangeEmployee(){this.getResourcesChart(this.formCtrls.employeeId.value)}upOneLevel(){this.formCtrls.employeeId.setValue(this.resourcesChart[0].data.parentID)}setPositionBtnUpOneLevel(){let t=document.querySelector(".upOneLevel-btn")?.getBoundingClientRect().width,i=document.querySelector(".p-organizationchart-node-content")?.getBoundingClientRect();this.upOneLevelBtnPositions.btnLeft=i?.width/2-t/2||0}setPositionUpOneLevelLine(){let t=document.querySelector(".p-organizationchart-node-content")?.getBoundingClientRect();this.upOneLevelBtnPositions.lineLeft=t?.width/2||0}openEmployeeDetailsDialog(t,i){let a=this.getHeaderElement(t),r={employeeId:i.id};this.dialogsService.dialogLeftOrRightCard(de,a.getBoundingClientRect(),350,!0,"80hv",r,!0)}getHeaderElement(t){return t.classList.contains("p-organizationchart-node-content")?t:this.getHeaderElement(t.parentElement)}expandNode(t){t.expanded=!t.expanded}onWindowResize(t){this.setPositionBtnUpOneLevel(),this.setPositionUpOneLevelLine()}onScroll(t){this.changePositions()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ri))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-resources-chart"]],viewQuery:function(t,i){if(1&t&&e.Gf(si,5),2&t){let a;e.iGM(a=e.CRH())&&(i.resourceChart=a.first)}},hostBindings:function(t,i){1&t&&e.NdJ("resize",function(r){return i.onWindowResize(r)},!1,e.Jf7)},features:[e.qOj],decls:11,vars:7,consts:[[1,"organizationchart-container","resources-chart"],[1,"mbottom-20",3,"formGroup"],[1,"row","mx-0"],[1,"col-lg-4","col-md-6","col-12"],[3,"control","filter","change"],["class","col-lg-4 offset-lg-4 col-md-4 offset-md-2 col-12",4,"ngIf"],["id","resourceChart","appScrollableHorizontal","",3,"scroll"],[3,"value","preserveSpace","onNodeExpand","onNodeCollapse"],["resourceChart",""],["pTemplate","resources"],[4,"ngIf"],[1,"col-lg-4","offset-lg-4","col-md-4","offset-md-2","col-12"],["elementId","resourceChart",3,"resource"],[1,"node-header",3,"id"],[1,"node-content","main-data"],[1,"img-emp-chart"],["preview","true",3,"src","alt",4,"ngIf","ngIfElse"],["noImg",""],[1,"p-2","info-content",3,"click"],[1,"info"],[1,"node-content"],["class","node-footer",3,"click",4,"ngIf"],["mat-button","",1,"btn","bg-light-info","upOneLevel-btn",3,"click"],[1,"pi","pi-angle-up"],["preview","true",3,"src","alt"],[1,"alt-img-preview"],[1,"pi","pi-user"],[1,"node-footer",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"app-employee-dropdown",4),e.NdJ("change",function(){return i.onChangeEmployee()}),e.qZA()(),e.YNc(5,li,2,1,"div",5),e.qZA()(),e.TgZ(6,"div",6),e.NdJ("scroll",function(r){return i.onScroll(r)}),e.TgZ(7,"p-organizationChart",7,8),e.NdJ("onNodeExpand",function(){return i.changePositions()})("onNodeCollapse",function(){return i.changePositions()}),e.YNc(9,mi,19,15,"ng-template",9),e.qZA()(),e.YNc(10,_i,1,0,"app-chart-skeleton",10),e.qZA()),2&t&&(e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("control",i.formCtrls.employeeId)("filter",!0),e.xp6(1),e.Q6J("ngIf",null!=i.resourcesChart),e.xp6(2),e.Q6J("value",i.resourcesChart)("preserveSpace",!1),e.xp6(3),e.Q6J("ngIf",i.loading))},dependencies:[c.O5,ue.$,Je.J,X.c,me.a,O.lW,l._Y,l.JL,l.sg,z.jx,_e.OE,Ie.E,c.rS,c.uU,x.X$],styles:[".resources-chart .p-organizationchart-node-content{width:150px!important;border-color:#c1c3c4}  .resources-chart .p-organizationchart-node-content.dashed-border{border-style:dashed}  .resources-chart .info-content{cursor:pointer;margin-top:-10px}  .resources-chart .node-header{padding:0}  .resources-chart .node-header p{margin:0 0 5px}  .resources-chart .img-emp-chart{display:flex;align-items:center;justify-content:center;height:90px}  .resources-chart .img-emp-chart p-image,   .resources-chart .img-emp-chart .p-image-preview-container>img{height:70px;width:70px;border-radius:50%}  .resources-chart .img-emp-chart .p-image-preview-indicator{border-radius:50%}  .resources-chart .img-emp-chart .alt-img-preview{background-color:#00000024;display:flex;align-items:center;justify-content:center;height:70px;width:70px;border-radius:50%}  .resources-chart .img-emp-chart .alt-img-preview i{font-size:2.5rem;color:#000000ad}  .resources-chart .ft-image,   .resources-chart .ft-file{cursor:pointer}"]}),o})();const hi=["companyChart"];function fi(o,n){if(1&o&&(e.TgZ(0,"div",12),e._UZ(1,"export-chart-buttons",16),e.qZA()),2&o){e.oxw(2);const t=e.MAs(9);e.xp6(1),e.Q6J("resource",t)}}function yi(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",11)(1,"div",12)(2,"app-org-types-dropdown",13),e.NdJ("change",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.getAllOrganizationsByOrgType())}),e.qZA()(),e.TgZ(3,"div",12),e._UZ(4,"app-prime-dropdown",14),e.qZA(),e.YNc(5,fi,2,1,"div",15),e.qZA()}if(2&o){e.oxw();const t=e.MAs(9),i=e.oxw();e.xp6(2),e.Q6J("control",i.formCtrls.organizationTypeId)("filter",!0),e.xp6(2),e.Q6J("control",i.formCtrls.organization_ID)("List",i.organizationList),e.xp6(1),e.Q6J("ngIf",t)}}function bi(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.upOneLevel())}),e._UZ(2,"i",24),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"div"),e.BQk()}if(2&o){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(1),e.Udp("left",i.upOneLevelBtnPositions.btnLeft,"px"),e.xp6(2),e.AsE(" ",e.lcZ(4,6,"upOneLevel")," ",t.parent," "),e.xp6(2),e.Udp("left",i.upOneLevelBtnPositions.lineLeft,"px")}}function vi(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"i",28),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.onDelete(a))}),e.ALo(1,"translate"),e.qZA()}2&o&&e.s9C("matTooltip",e.lcZ(1,1,"delete"))}function Ci(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",25),e.YNc(1,vi,2,3,"i",26),e.TgZ(2,"i",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.openAddEditDialog(a))}),e.ALo(3,"translate"),e.qZA()()}if(2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.data.org),e.xp6(1),e.s9C("matTooltip",e.lcZ(3,2,"add"))}}function Ti(o,n){if(1&o&&(e.TgZ(0,"div",29)(1,"p"),e._uU(2),e.qZA()()),2&o){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(2),e.hij(" ",i.msgTranslate(null==t.data.orgType?null:t.data.orgType.ar_Name,null==t.data.orgType?null:t.data.orgType.en_Name)," ")}}function xi(o,n){if(1&o&&(e.TgZ(0,"div",29)(1,"p"),e._uU(2),e.qZA()()),2&o){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(2),e.hij(" ",i.msgTranslate(t.data.structure.ar_Name,t.data.structure.en_Name)," ")}}function Di(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",30)(1,"i",31),e.NdJ("click",function(a){e.CHM(t);const r=e.oxw().$implicit,f=e.oxw(2);return e.KtG(f.openOrgDetailsDialog(a.target,r.data,1))}),e.TgZ(2,"span"),e._uU(3),e.qZA()()()}if(2&o){const t=e.oxw().$implicit;e.xp6(3),e.hij(" ",t.data.numEmp," ")}}function Zi(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",32),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(2);return r.expandNode(a),e.KtG(r.changePositions())}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.children.length," ")}}function Ii(o,n){if(1&o&&(e.YNc(0,bi,6,8,"ng-container",10),e.TgZ(1,"div",17)(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.YNc(5,Ci,4,4,"div",18),e.YNc(6,Ti,3,1,"div",19),e.YNc(7,xi,3,1,"div",19),e.qZA(),e.TgZ(8,"div",20),e.YNc(9,Di,4,1,"div",21),e.YNc(10,Zi,2,1,"div",22),e.qZA()),2&o){const t=n.$implicit,i=e.oxw(2);let a;e.Q6J("ngIf",i.orgStructureDetailsFiltered&&(null==i.orgStructureDetailsFiltered[0]||null==i.orgStructureDetailsFiltered[0].data?null:i.orgStructureDetailsFiltered[0].data.parentId)>0&&1==t.data.currentFirstNode),e.xp6(1),e.ekj("text-start",!i.canNotEdit),e.Q6J("id",null!==(a=null==t.data.org?null:t.data.org.id)&&void 0!==a?a:null),e.xp6(2),e.hij(" ",t.data.structure?e.lcZ(4,10,t.label):t.label," "),e.xp6(2),e.Q6J("ngIf",!i.canNotEdit),e.xp6(1),e.Q6J("ngIf",t.data.org),e.xp6(1),e.Q6J("ngIf",t.data.structure),e.xp6(2),e.Q6J("ngIf",t.data.numEmp>0),e.xp6(1),e.Q6J("ngIf",t.children.length>0)}}function Si(o,n){1&o&&e._UZ(0,"app-chart-skeleton")}function wi(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"mat-tab-group",1)(1,"mat-tab",2),e.ALo(2,"titlecase"),e.ALo(3,"translate"),e.TgZ(4,"div",3)(5,"form",4),e.YNc(6,yi,6,5,"div",5),e.qZA(),e.TgZ(7,"div",6),e.NdJ("scroll",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.onScroll(a))}),e.TgZ(8,"p-organizationChart",7,8),e.NdJ("onNodeExpand",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.changePositions())})("onNodeCollapse",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.changePositions())}),e.YNc(10,Ii,11,12,"ng-template",9),e.qZA()(),e.YNc(11,Si,1,0,"app-chart-skeleton",10),e.qZA()(),e.TgZ(12,"mat-tab",2),e.ALo(13,"titlecase"),e.ALo(14,"translate"),e._UZ(15,"app-job-title-org-chart"),e.qZA(),e.TgZ(16,"mat-tab",2),e.ALo(17,"titlecase"),e.ALo(18,"translate"),e._UZ(19,"app-resources-chart"),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("dir",t.languageService.isArabic?"rtl":"ltr"),e.xp6(1),e.s9C("label",e.lcZ(2,11,e.lcZ(3,13,"companyOrgStructure"))),e.xp6(3),e.ekj("ar",t.languageService.isArabic),e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("ngIf",!t.loading),e.xp6(2),e.Q6J("value",t.orgStructureDetailsFiltered)("preserveSpace",!1),e.xp6(3),e.Q6J("ngIf",t.loading),e.xp6(1),e.s9C("label",e.lcZ(13,15,e.lcZ(14,17,"jobtitleChart"))),e.xp6(4),e.s9C("label",e.lcZ(17,19,e.lcZ(18,21,"resources")))}}let Ne=(()=>{class o extends y.U{constructor(t,i,a){super(),this.orgStructureService=t,this.organizationsService=i,this.dialog=a,this.orgStructureDetailsFiltered=[],this.organizationList=[],this.loading=!0,this.expandAll=!1,this.firstOnChange=!0,this.upOneLevelBtnPositions={btnLeft:0,lineLeft:0},this.upOneLevelLastPositionsBeforeScroll={btnLeft:0,lineLeft:0}}ngOnInit(){this.form=this.fb.group({organizationTypeId:[null],organization_ID:[{value:null,disabled:!0}]}),this.formCtrls.organization_ID.valueChanges.subscribe(t=>{(null==t||t>0)&&this.onChangeOrg(t)})}ngOnChanges(t){t.orgStructureId&&(this.firstOnChange?this.firstOnChange=!1:this.onChangeBusinessAndCompanyId())}onChangeBusinessAndCompanyId(){this.orgStructureId>0&&this.checkNoBusinessOrCompany()&&this.getStructureDetails()}get formCtrls(){return this.form.controls}getStructureDetails(){this.loading=!0,this.orgStructureDetails=null,this.orgStructureDetailsFiltered=[],this.orgStructureService.getByIdWithHierarchy(this.orgStructureId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==_.u.Success?(this.orgStructureDetails=p(t.data[0],this.orgStructureId),this.orgStructureDetailsFiltered=this.orgStructureDetails.slice(),this.loading=!1):(this.errorList(t?.message?.messages),this.loading=!1)})}onChangeOrg(t){this.orgStructureDetailsFiltered=[],t>0?this.getChartDataByOrg(t,this.orgStructureDetails[0]):this.orgStructureDetailsFiltered=this.orgStructureDetails}getChartDataByOrg(t,i,a=!1){i.children.map(r=>{if(r.data.org?.id==t)return this.orgStructureDetailsFiltered=[r],this.orgStructureDetailsFiltered[0].data.currentFirstNode=!0,a&&(this.formCtrls.organizationTypeId.setValue(r.data.orgType.id),this.formCtrls.organization_ID.setValue(r.data.org.id)),void this.changePositions()}),i.children.map(r=>this.getChartDataByOrg(t,r,a))}changePositions(){setTimeout(()=>{this.setPositionBtnUpOneLevel(),this.setPositionUpOneLevelLine()},50)}upOneLevel(){this.orgStructureDetailsFiltered[0].data.currentFirstNode=!1,this.formCtrls.organization_ID.setValue(0);let t=this.orgStructureDetailsFiltered[0].data.parentId;t?this.getChartDataByOrg(t,this.orgStructureDetails[0],!0):this.orgStructureDetailsFiltered=this.orgStructureDetails}setPositionBtnUpOneLevel(){let t=document.querySelector(".upOneLevel-btn")?.getBoundingClientRect().width,i=document.querySelector(".p-organizationchart-node-content")?.getBoundingClientRect();this.upOneLevelBtnPositions.btnLeft=i?.width/2-t/2}setPositionUpOneLevelLine(){let t=document.querySelector(".p-organizationchart-node-content")?.getBoundingClientRect();this.upOneLevelBtnPositions.lineLeft=t?.width/2}onDelete(t){let i=this.msgTranslate(t.data.org.ar_Name,t.data.org.en_Name);this.deleteDialog(i).subscribe(a=>{a&&this.deleteNode(t)})}deleteNode(t){let i={StructureID:this.orgStructureId,OrgID:t.data.org.id};this.showLoading(),this.orgStructureService.DeleteNode(i).subscribe(a=>{a.message.messageType==_.u.Success?(this.deleteSuccessfullyMsg("orgStructureNodeRemoved"),this.getStructureDetails(),this.getAllOrganizationsByOrgType()):this.errorList(a?.message?.messages),this.hideLoading()})}openAddEditDialog(t){return this.dialog.open(mt,{data:{org_Structure_ID:this.orgStructureId,parenT_ID:t.data.org?.id??null},minWidth:"50vw",panelClass:"add-structure-node",autoFocus:!1}).afterClosed().subscribe(i=>{i&&(this.getStructureDetails(),this.getAllOrganizationsByOrgType())})}openOrgDetailsDialog(t,i,a){let r=this.getHeaderElement(t),f={org_Structure_ID:this.orgStructureId,nodeData:i,expandedIndex:a};this.dialogsService.dialogLeftOrRightCard(Lt,r.getBoundingClientRect(),350,!1,"90hv",f)}getHeaderElement(t){return t.classList.contains("p-organizationchart-node-content")?t:this.getHeaderElement(t.parentElement)}expandNode(t){t.expanded=!t.expanded}getAllOrganizationsByOrgType(){let t=this.formCtrls.organizationTypeId.value;this.formCtrls.organization_ID.setValue(null),t>0?(this.organizationsService.GetAllByOrgTypeAndStructure(t,this.orgStructureId).pipe(this.cancelRequest()).subscribe(i=>{i.message.messageType==_.u.Success?this.organizationList=i.data:this.errorList(i?.message?.messages)}),this.formCtrls.organization_ID.enable()):this.formCtrls.organization_ID.disable()}onWindowResize(t){this.changePositions()}onScroll(t){this.changePositions()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(q._),e.Y36(xe.z),e.Y36(Z.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-org-structure-hierarchy-details"]],viewQuery:function(t,i){if(1&t&&e.Gf(hi,5),2&t){let a;e.iGM(a=e.CRH())&&(i.companyChart=a.first)}},hostBindings:function(t,i){1&t&&e.NdJ("resize",function(r){return i.onWindowResize(r)},!1,e.Jf7)},inputs:{orgStructureId:"orgStructureId",canNotEdit:"canNotEdit"},features:[e.qOj,e.TTD],decls:2,vars:1,consts:[["class","col-12 w-100 view-tabs-group",3,"dir",4,"ngIf"],[1,"col-12","w-100","view-tabs-group",3,"dir"],[3,"label"],[1,"organizationchart-container","company-chart"],[1,"mbottom-20",3,"formGroup"],["class","row mx-0",4,"ngIf"],["id","companyChart","appScrollableHorizontal","",3,"scroll"],["styleClass","company",3,"value","preserveSpace","onNodeExpand","onNodeCollapse"],["companyChart",""],["pTemplate","org"],[4,"ngIf"],[1,"row","mx-0"],[1,"col-md-4","col-12"],[3,"control","filter","change"],["label","organization",3,"control","List"],["class","col-md-4 col-12",4,"ngIf"],["elementId","companyChart",3,"resource"],[1,"node-header",3,"id"],["class","action-icons",4,"ngIf"],["class","node-content main-data",4,"ngIf"],[1,"node-content"],["class","employees-no-section",4,"ngIf"],["class","node-footer",3,"click",4,"ngIf"],["mat-button","",1,"btn","bg-light-info","upOneLevel-btn",3,"click"],[1,"pi","pi-angle-up"],[1,"action-icons"],["mat-icon-button","","class","pi pi-trash danger",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","",1,"pi","pi-plus","info",3,"matTooltip","click"],["mat-icon-button","",1,"pi","pi-trash","danger",3,"matTooltip","click"],[1,"node-content","main-data"],[1,"employees-no-section"],[1,"pi","pi-users",3,"click"],[1,"node-footer",3,"click"]],template:function(t,i){1&t&&(e._UZ(0,"p-toast"),e.YNc(1,wi,20,23,"mat-tab-group",0)),2&t&&(e.xp6(1),e.Q6J("ngIf",i.orgStructureId>0))},dependencies:[c.O5,ue.$,X.c,me.a,O.lW,Ae.Lv,Pe.SP,Pe.uX,Ot.gM,ae.t,De.q,l._Y,l.JL,l.sg,z.jx,Gt.FN,_e.OE,ai,gi,c.rS,x.X$],styles:[".mat-tab-body-content{padding:0;overflow-y:auto!important}  .view-tabs-group .mat-tab-header .mat-tab-labels{justify-content:flex-start}  .mat-dialog-content{max-height:65vh!important}[_nghost-%COMP%]     .company-chart .node-header i{font-size:16px;cursor:pointer}[_nghost-%COMP%]     .company-chart .p-organizationchart .node-header{position:relative}[_nghost-%COMP%]     .company-chart .p-organizationchart .node-header span{display:inline-block;max-width:calc(100% - 44px)}[_nghost-%COMP%]     .company-chart .p-organizationchart .action-icons{float:right;position:absolute;top:12px;right:0}[_nghost-%COMP%]     .company-chart .p-organizationchart .action-icons i{font-size:1rem;margin-right:10px}.ar[_ngcontent-%COMP%]   .action-icons[_ngcontent-%COMP%]{float:left!important;left:0!important;right:auto!important;right:initial!important}.ar[_ngcontent-%COMP%]   .action-icons[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:10px;margin-right:0}.ft-image[_ngcontent-%COMP%], .ft-file[_ngcontent-%COMP%]{cursor:pointer}"]}),o})();function Ai(o,n){if(1&o&&e._UZ(0,"app-add-new-btn",3),2&o){const t=e.oxw();e.MGl("url","/org-management/",t.moduleId,"/org-structure/add"),e.Q6J("params",t.parentParam)}}function Pi(o,n){if(1&o&&e._UZ(0,"app-prime-dropdown",19),2&o){const t=e.oxw();e.Q6J("control",t.formCtrls.CopyStructureID)("submitted",t.submitted)("List",t.structureList)}}function Ji(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"reset-form-btn",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clearForm())}),e.qZA()}}function Ni(o,n){1&o&&(e._UZ(0,"span",23),e.TgZ(1,"div",24),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"canNotEditOrgStructure")," "))}function Li(o,n){1&o&&(e.TgZ(0,"p-messages",21),e.YNc(1,Ni,4,3,"ng-template",22),e.qZA())}let Le=(()=>{class o extends y.U{constructor(t){super(),this.orgStructureService=t,this.submitted=!1,this.todayDate=new Date,this.structureList=[],this.todayDate.setHours(0,0,0,0)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],en_Name:[null,[l.kI.required,W.w.whiteSpace]],ar_Name:[null,[l.kI.required,W.w.whiteSpace]],froM_DATE:[null,[l.kI.required]],CopyStructureID:[null]}),this.activatedRoute.paramMap.subscribe(t=>{this.orgStructureId=Number(t.get("orgStructureId"))??0})}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&(0==this.orgStructureId?this.getAllStructures():this.getById())}get formCtrls(){return this.form.controls}getById(){this.showLoading(),this.orgStructureService.getById(this.orgStructureId).pipe(this.cancelRequest()).subscribe(t=>{t?.message?.messageType==_.u.Success?(this.orgStructure=t.data[0],this.orgStructureToEdit()):this.errorList(t?.message?.messages),this.hideLoading()})}orgStructureToEdit(){this.form.patchValue(this.orgStructure)}submit(){this.submitted=!0,this.form.valid&&(0==this.formCtrls.id.value?this.create():this.update())}create(){const t={Core_Org_Structure:{en_Name:this.form.value.en_Name,ar_Name:this.form.value.ar_Name,froM_DATE:this.form.value.froM_DATE??this.orgStructure?.froM_DATE},CopyStructureID:this.formCtrls.CopyStructureID.value};this.showLoading(),this.orgStructureService.create(t).subscribe(i=>{i?.message?.messageType==_.u.Success?(this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newOrgStructureAdded"),this.orgStructureId=i.data.id,this.formCtrls.id.setValue(this.orgStructureId),this.navigateTo(`/org-management/${this.moduleId}/org-structure/edit/${this.orgStructureId}`),this.orgStructure=i.data,this.formCtrls.CopyStructureID.reset()):this.errorList(i?.message?.messages),this.hideLoading()})}update(){const t={id:this.form.value.id,en_Name:this.form.value.en_Name,ar_Name:this.form.value.ar_Name,froM_DATE:this.form.value.froM_DATE??this.orgStructure?.froM_DATE,to_DATE:this.orgStructure.tO_DATE};this.showLoading(),this.orgStructureService.update(t).subscribe(i=>{i.message.messageType==_.u.Success?(this.updateSuccessfullyMsg("orgStructureUpdated"),this.orgStructure=i.data):this.errorList(i?.message?.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0}),this.submitted=!1}canNotEdit(){return new Date(this.todayDate).getTime()>=new Date(this.orgStructure?.froM_DATE).getTime()}getAllStructures(){this.orgStructureService.getAll().pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==_.u.Success?this.structureList=[{id:0,ar_Name:"\u0627\u0646\u0634\u0627\u0621 \u062c\u062f\u064a\u062f",en_Name:"Create new"},...t.data]:this.errorList(t?.message?.messages)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(q._))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-org-structure"]],features:[e.qOj],decls:25,vars:28,consts:[[1,"title-no-margin","title-section","fixed-title"],["addTitle","orgStructure","editTitle","editOrgStructure",3,"id","parentTitle","parentTitleLink","title","parentLinkParams"],[3,"url","params",4,"ngIf"],[3,"url","params"],[1,"form-card"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[3,"formGroup"],[1,"col-md-3","col-12"],["label","en_Name",3,"control","submitted"],["label","ar_Name",3,"control","submitted"],["label","froM_DATE",3,"control","submitted","minDate","disable"],["label","copyFromPreviousStructure",3,"control","submitted","List",4,"ngIf"],["align","end"],[3,"click",4,"ngIf"],[3,"id","onClick"],["severity","warn",4,"ngIf"],[3,"orgStructureId","canNotEdit"],["label","copyFromPreviousStructure",3,"control","submitted","List"],[3,"click"],["severity","warn"],["pTemplate",""],[1,"p-message-icon","pi","pi-exclamation-triangle"],[1,"p-message-detail"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.YNc(4,Ai,1,2,"app-add-new-btn",2),e._UZ(5,"app-back-btn",3),e.qZA(),e.TgZ(6,"mat-card",4)(7,"mat-card-content",5)(8,"div",6)(9,"div",7)(10,"form",8)(11,"div",6)(12,"div",9),e._UZ(13,"app-input",10),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"app-input",11),e.qZA(),e.TgZ(16,"div",9),e._UZ(17,"app-datepicker",12),e.qZA(),e.TgZ(18,"div",9),e.YNc(19,Pi,1,3,"app-prime-dropdown",13),e.qZA()()()()()(),e.TgZ(20,"mat-card-actions",14),e.YNc(21,Ji,1,0,"reset-form-btn",15),e.TgZ(22,"submit-btn",16),e.NdJ("onClick",function(){return i.submit()}),e.qZA()(),e.YNc(23,Li,2,0,"p-messages",17),e._UZ(24,"app-org-structure-hierarchy-details",18),e.qZA()),2&t&&(e.xp6(1),e.hYB("parentTitle","",e.lcZ(2,24,"orgManagement")," / ",e.lcZ(3,26,"orgStructure"),""),e.MGl("parentTitleLink","/org-management/",i.moduleId,"/org-structure"),e.Q6J("id",i.formCtrls.id.value)("title",i.formCtrls.id.value>0?"edit":"wizard")("parentLinkParams",i.pageParams),e.xp6(3),e.Q6J("ngIf",i.formCtrls.id.value>0),e.xp6(1),e.MGl("url","/org-management/",i.moduleId,"/org-structure/index"),e.Q6J("params",i.pageParams),e.xp6(5),e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("control",i.formCtrls.en_Name)("submitted",i.submitted),e.xp6(2),e.Q6J("control",i.formCtrls.ar_Name)("submitted",i.submitted),e.xp6(2),e.Q6J("control",i.formCtrls.froM_DATE)("submitted",i.submitted)("minDate",i.todayDate)("disable",i.canNotEdit()),e.xp6(2),e.Q6J("ngIf",0==i.form.value.id),e.xp6(2),e.Q6J("ngIf",0==i.formCtrls.id.value),e.xp6(1),e.Q6J("id",i.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",i.canNotEdit()),e.xp6(1),e.Q6J("orgStructureId",i.orgStructureId||i.formCtrls.CopyStructureID.value)("canNotEdit",0==i.orgStructureId||i.canNotEdit()))},dependencies:[c.O5,G.Q,Y.a,ie.a,pe.J,dt.J,N.p,I.T,m.a8,m.dn,m.n5,m.hq,ae.t,l._Y,l.JL,l.sg,z.jx,re.V,Ne,x.X$]}),o})();var se=s(36162);function Oi(o,n){if(1&o&&e._UZ(0,"app-org-structure-hierarchy-details",5),2&o){const t=e.oxw();e.Q6J("orgStructureId",t.orgStructureId)("canNotEdit",!0)}}let Gi=(()=>{class o extends y.U{constructor(){super(),this.orgStructureId=0}ngOnInit(){this.activatedRoute.paramMap.subscribe(t=>{this.orgStructureId=Number(t.get("orgStructureId"))??0})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-org-structure-details"]],features:[e.qOj],decls:7,vars:11,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","orgStructureDetails",3,"parentTitle","parentTitleLink","parentLinkParams"],[3,"url","params"],[1,"mtop-15"],[3,"orgStructureId","canNotEdit",4,"ngIf"],[3,"orgStructureId","canNotEdit"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.ALo(2,"translate"),e.ALo(3,"translate"),e._UZ(4,"app-back-btn",2),e.qZA(),e.TgZ(5,"mat-card",3),e.YNc(6,Oi,1,2,"app-org-structure-hierarchy-details",4),e.qZA()),2&t&&(e.xp6(1),e.hYB("parentTitle","",e.lcZ(2,7,"orgManagement")," / ",e.lcZ(3,9,"orgStructure"),""),e.MGl("parentTitleLink","/org-management/",i.moduleId,"/org-structure"),e.Q6J("parentLinkParams",i.pageParams),e.xp6(3),e.MGl("url","/org-management/",i.moduleId,"/org-structure/index"),e.Q6J("params",i.pageParams),e.xp6(2),e.Q6J("ngIf",i.orgStructureId>0))},dependencies:[c.O5,ie.a,I.T,m.a8,m.n5,Ne,x.X$]}),o})();var Oe=s(70057),Ui=s(69746),ji=s(52912),te=s(26427);function Ge(o){if(o)return o.objectTypesIds=o.core_SS_Template_PolicyGroups?.map(n=>n.core_SS_ObjectType?.id),o.policyPermissionSetups?.map(n=>{n.permission=n.att_Permission_Setup?.name,n.effectiveDate=d.M6.mapDate(n.fromDate),n.endDate=d.M6.mapDate(n.toDate)}),o.policyVacations?.map(n=>{n.vacation=(0,d._f)(n.att_Vacation?.ar_Name,n.att_Vacation?.en_Name),n.effectiveDate=d.M6.mapDate(n.fromDate),n.endDate=d.M6.mapDate(n.toDate)}),o.policyOfficialHolidaies?.map(n=>{n.officialHoliday=(0,d._f)(n.att_Official_Holiday?.ar_Name,n.att_Official_Holiday?.en_Name),n.effectiveDate=d.M6.mapDate(n.fromDate),n.endDate=d.M6.mapDate(n.toDate)}),o.policyPlans?.map(n=>{n.plan=(0,d._f)(n.att_Plan?.ar_Name,n.att_Plan?.en_Name),n.effectiveDate=d.M6.mapDate(n.fromDate),n.endDate=d.M6.mapDate(n.toDate)}),o.policyPayments?.map(n=>{n.payment=(0,d._f)(n.paY_Payment?.ar_Name,n.paY_Payment?.en_Name),n.effectiveDate=d.M6.mapDate(n.fromDate),n.endDate=d.M6.mapDate(n.toDate)}),o.core_SS_Template_PolicyGroups?.map(n=>{n.template=(0,d._f)(n.core_SS_Template?.ar_Name,n.core_SS_Template?.en_Name),n.objectType=(0,d._f)(n.core_SS_ObjectType?.ar_Name,n.core_SS_ObjectType?.en_Name),n.effectiveDate=d.M6.mapDate(n.from_Date),n.endDate=d.M6.mapDate(n.to_Date)}),o.penaltyRegulations?.map(n=>{n.penaltyRegulations=n.att_Penalty_Regulation?.name,n.effectiveDate=d.M6.mapDate(n.fromDate),n.endDate=d.M6.mapDate(n.toDate)}),o}var Q=s(90376);const qi=function(){return[]};let Qi=(()=>{class o extends y.U{constructor(t){super(),this.policyGroupService=t,this.mandatoryColomns=["Ser","id","ar_Name","en_Name","policyGroupType","groupingType","noOfEmployees","actions"],this.isLoaded=!1}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new u.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,i){this.isLoaded=!1,this.removePageParams(),this.page.pageIndex=t,i&&(this.page.pageSize=i),this.policyGroupService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(r=>{if(1==r.message.messageType){if(0==r.data.length&&t>1)return void this.getList(this.prevPage);this.dataSource=new u.by(function Ei(o){return o.map(n=>({id:n?.core_PolicyGroup?.id,ar_Name:n?.core_PolicyGroup?.ar_Name,en_Name:n?.core_PolicyGroup?.en_Name,policyGroupType:(0,d._f)(n?.core_PolicyGroup?.core_PolicyGroup_Type?.ar_Name,n?.core_PolicyGroup?.core_PolicyGroup_Type?.en_Name),noOfEmployees:n.countEmpsOnPolicy,groupingType:te.n$.find(t=>t.value==n.core_PolicyGroup?.groupingType)?.label??""}))}(r.data)),this.isLoaded=!0,this.page.length=r.meta.totalItemCount,this.page.meta=r.meta}else this.errorList(r?.message?.messages)})}onDelete(t){let i=this.msgTranslate(t.ar_Name,t.en_Name);this.deleteDialog(i).subscribe(a=>{a&&this.delete(t)})}delete(t){this.showLoading(),this.policyGroupService.Delete(t.id).subscribe(i=>{i.message.messageType==_.u.Success?(this.deleteSuccessfullyMsg("policyGroupRemoved"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(i?.message?.messages),this.hideLoading()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Q.B))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-policy-group-index"]],features:[e.qOj],decls:7,vars:14,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","policyGroups","parentTitle","orgManagement","TitleHasGlobalFunc","",3,"globalFunctions"],[1,"index-card"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","exportService","onChangePage","deleteRow"],[3,"title"],[3,"serviceId","moduleId"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.qZA(),e.TgZ(2,"mat-card",2)(3,"app-material-table",3),e.NdJ("onChangePage",function(r){return i.getList(r.pageIndex+1,r.pageSize)})("deleteRow",function(r){return i.onDelete(r)}),e.qZA()(),e.TgZ(4,"side-helping-menu",4),e.ALo(5,"translate"),e._UZ(6,"app-dashboard-display",5),e.qZA()),2&t&&(e.xp6(1),e.Q6J("globalFunctions",i.globalFunctions),e.xp6(2),e.Q6J("isLoaded",i.isLoaded)("dataSource",i.dataSource)("mandatoryColomns",i.mandatoryColomns)("optionalColomns",e.DdM(13,qi))("page",i.page)("actions",i.rowFunctions)("exportService",i.policyGroupService),e.xp6(1),e.s9C("title",e.lcZ(5,11,"Dashboard")),e.xp6(2),e.Q6J("serviceId",i.getCurrentServiceId())("moduleId",i.moduleId))},dependencies:[K.I,I.T,le.c,ce.b,ne.X,m.a8,m.n5,x.X$]}),o})();var Mi=s(20957),Ue=s(86257),he=s(19881),j=s(79395),Ri=s(92665),F=s(44389),Vi=s(97476);function Fi(o,n){1&o&&(e.TgZ(0,"mat-card-title",15),e._UZ(1,"page-title",16),e.qZA())}function ki(o,n){1&o&&e._UZ(0,"mat-divider",17)}function Bi(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-split-table",18),e.NdJ("currentTableNumber",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.currentTableNumber=a)}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("isLoaded",t.isLoaded)("dataSource",t.paymentDataSource)("displayedColumns",t.Colomns)("hasPaginator",!0)("showFilter",!1)}}function Yi(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"mat-card"),e.YNc(1,Fi,2,0,"mat-card-title",2),e.YNc(2,ki,1,0,"mat-divider",3),e.TgZ(3,"mat-card-content",4)(4,"div",5)(5,"div",6),e._UZ(6,"payment-for-policy-details-dropdown",7),e.qZA(),e.TgZ(7,"div",8),e._UZ(8,"app-datepicker",9),e.qZA(),e.TgZ(9,"div",10)(10,"submit-btn",11),e.NdJ("onClick",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.paymentSubmit())}),e.qZA()()(),e._UZ(11,"mat-divider"),e.TgZ(12,"div",12)(13,"div",13),e.YNc(14,Bi,1,5,"app-split-table",14),e.qZA()()()()}if(2&o){const t=e.oxw();e.ekj("mt-3",t.hideTitle),e.xp6(1),e.Q6J("ngIf",!t.hideTitle),e.xp6(1),e.Q6J("ngIf",!t.hideTitle),e.xp6(4),e.Q6J("control",t.paymentCtrl)("submitted",t.submitted)("filter",!0)("multi",!0),e.xp6(2),e.Q6J("control",t.from_DateCtrl)("submitted",t.submitted),e.xp6(2),e.Q6J("color",t.btn.darkBlue)("iconPositionBefore",!1),e.xp6(3),e.Tol(t.currentTableNumber>1?"col-md-10":"col-md-6"),e.xp6(1),e.Q6J("ngIf",t.policyId>0)}}function Hi(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-split-table",18),e.NdJ("currentTableNumber",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.currentTableNumber=a)}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("isLoaded",t.isLoaded)("dataSource",t.paymentDataSource)("displayedColumns",t.Colomns)("hasPaginator",!0)("showFilter",!1)}}function zi(o,n){if(1&o&&(e.TgZ(0,"div",12)(1,"div",13),e.YNc(2,Hi,1,5,"app-split-table",14),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.Tol(t.currentTableNumber>1?"col-md-10":"col-md-6"),e.xp6(1),e.Q6J("ngIf",t.policyId>0)}}let je=(()=>{class o extends y.U{constructor(t,i){super(),this.policyDetailsService=t,this.policyGroupService=i,this.getPolicyDetails=new e.vpe,this.submitted=!1,this.isLoaded=!1,this.from_DateCtrl=new l.NI("",l.kI.required),this.paymentCtrl=new l.NI([],l.kI.required),this.Colomns=["payment","effectiveDate","endDate"],this.policyId=i.policyGroup$.getValue().id,this.policyGroupDetails=t.policyGroupDetails$.getValue()}ngOnInit(){this.policyGroupService.policyGroup$.pipe(this.cancelRequest()).subscribe(t=>{this.policyId=t?.id??0}),this.policyDetailsService.policyGroupDetails$.pipe(this.cancelRequest()).subscribe(t=>{this.policyGroupDetails=t,this.isLoaded=!0,t&&(this.paymentCtrl.setValue(t.paymentsIds),this.paymentDataSource=new u.by(t.policyPayments))})}paymentSubmit(){if(this.submitted=!0,this.paymentCtrl.valid&&this.from_DateCtrl.valid){let t={PaymentsIds:this.paymentCtrl.value,policyId:this.policyId,from_Date:d.M6.mapDateReverse(this.from_DateCtrl.value)};this.showLoading(),this.policyDetailsService.SavePolicyDetailsPayments(t).subscribe(i=>{i?.message?.messageType==_.u.Success?(this.submitted=!1,this.from_DateCtrl.reset(),this.addSuccessfullyMsg("newPaymentAddedToPolicyGroup"),this.getPolicyDetails.emit(!0)):this.errorList(i?.message?.messages),this.hideLoading()})}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(j.P),e.Y36(Q.B))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-payroll-details"]],inputs:{isView:"isView",hideTitle:"hideTitle"},outputs:{getPolicyDetails:"getPolicyDetails"},features:[e.qOj],decls:2,vars:2,consts:[[3,"mt-3",4,"ngIf"],["class","row mt-3",4,"ngIf"],["class","title-no-margin",4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"container-fluid","mt-4"],[1,"row"],[1,"col-12","col-md-5"],[3,"control","submitted","filter","multi"],[1,"col-12","col-md-4"],["label","effectiveDate",3,"control","submitted"],[1,"col-12","col-md-2","text-center"],["icon","pi pi-plus-circle","label","add",1,"d-block","mt-1",3,"color","iconPositionBefore","onClick"],[1,"row","mt-3"],[1,"col"],["class","table-in-forms",3,"isLoaded","dataSource","displayedColumns","hasPaginator","showFilter","currentTableNumber",4,"ngIf"],[1,"title-no-margin"],["title","payments"],[1,"mt-2"],[1,"table-in-forms",3,"isLoaded","dataSource","displayedColumns","hasPaginator","showFilter","currentTableNumber"]],template:function(t,i){1&t&&(e.YNc(0,Yi,15,15,"mat-card",0),e.YNc(1,zi,3,3,"div",1)),2&t&&(e.Q6J("ngIf",!i.isView),e.xp6(1),e.Q6J("ngIf",i.isView))},dependencies:[c.O5,G.Q,N.p,I.T,F.M,m.a8,m.dn,m.n5,L.d,Vi.v]}),o})();var $i=s(71353);function Ki(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6),e._UZ(2,"app-permission-type-dropdown",7),e.qZA(),e.TgZ(3,"div",8),e._UZ(4,"app-datepicker",9),e.qZA(),e.TgZ(5,"div",10)(6,"submit-btn",11),e.NdJ("onClick",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.permissionSubmit())}),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("control",t.permissionIdsCtrl)("submitted",t.submitted)("filter",!0)("multi",!0),e.xp6(2),e.Q6J("control",t.from_DateCtrl)("submitted",t.submitted),e.xp6(2),e.Q6J("color",t.btn.darkBlue)("iconPositionBefore",!1)}}function Wi(o,n){1&o&&e._UZ(0,"mat-divider")}let Ee=(()=>{class o extends y.U{constructor(t){super(),this.policyDetailsService=t,this.isView=!1,this.getPolicyDetails=new e.vpe,this.submitted=!1,this.from_DateCtrl=new l.NI("",l.kI.required),this.permissionIdsCtrl=new l.NI([],l.kI.required),this.Colomns=["permission","effectiveDate","endDate"]}ngOnChanges(t){t.value&&this.permissionIdsCtrl.setValue(this.value)}permissionSubmit(){if(this.submitted=!0,this.permissionIdsCtrl.valid&&this.from_DateCtrl.valid){let t={PermissionSetup_SelectedIds:this.permissionIdsCtrl.value,policyId:this.policyId,from_Date:d.M6.mapDateReverse(this.from_DateCtrl.value)};this.showLoading(),this.policyDetailsService.SavePolicyDetailsPermissions(t).subscribe(i=>{i?.message?.messageType==_.u.Success?(this.submitted=!1,this.from_DateCtrl.reset(),this.addSuccessfullyMsg("newPermissionAddedToPolicyGroup"),this.getPolicyDetails.emit(!0)):this.errorList(i?.message?.messages),this.hideLoading()})}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(j.P))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-permission-policy-details"]],inputs:{isView:"isView",isLoaded:"isLoaded",policyId:"policyId",value:"value",dataSource:"dataSource"},outputs:{getPolicyDetails:"getPolicyDetails"},features:[e.qOj,e.TTD],decls:5,vars:9,consts:[["class","row",4,"ngIf"],[4,"ngIf"],[1,"row","mt-3"],[1,"col"],[1,"table-in-forms",3,"isLoaded","dataSource","displayedColumns","hasPaginator","showFilter","currentTableNumber"],[1,"row"],[1,"col-12","col-md-5"],["label","permission",3,"control","submitted","filter","multi"],[1,"col-12","col-md-4"],["label","effectiveDate",3,"control","submitted"],[1,"col-12","col-md-2","text-center"],["icon","pi pi-plus-circle","label","add",1,"d-block","mt-1",3,"color","iconPositionBefore","onClick"]],template:function(t,i){1&t&&(e.YNc(0,Ki,7,8,"div",0),e.YNc(1,Wi,1,0,"mat-divider",1),e.TgZ(2,"div",2)(3,"div",3)(4,"app-split-table",4),e.NdJ("currentTableNumber",function(r){return i.currentTableNumber=r}),e.qZA()()()),2&t&&(e.Q6J("ngIf",!i.isView),e.xp6(1),e.Q6J("ngIf",!i.isView),e.xp6(2),e.Tol(i.currentTableNumber>1?"col-md-10":"col-md-6"),e.xp6(1),e.Q6J("isLoaded",i.isLoaded)("dataSource",i.dataSource)("displayedColumns",i.Colomns)("hasPaginator",!0)("showFilter",!1))},dependencies:[c.O5,G.Q,N.p,F.M,L.d,$i._]}),o})();var Xi=s(81031);function eo(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6),e._UZ(2,"app-official-holidays-dropdown",7),e.qZA(),e.TgZ(3,"div",8),e._UZ(4,"app-datepicker",9),e.qZA(),e.TgZ(5,"div",10)(6,"submit-btn",11),e.NdJ("onClick",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.SavePolicyDetailsOfficialHolidays())}),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("control",t.officialHolidaysCtrl)("submitted",t.submitted)("filter",!0)("multi",!0),e.xp6(2),e.Q6J("control",t.from_DateCtrl)("submitted",t.submitted),e.xp6(2),e.Q6J("color",t.btn.darkBlue)("iconPositionBefore",!1)}}function to(o,n){1&o&&e._UZ(0,"mat-divider")}let qe=(()=>{class o extends y.U{constructor(t){super(),this.policyDetailsService=t,this.isView=!1,this.getPolicyDetails=new e.vpe,this.submitted=!1,this.from_DateCtrl=new l.NI("",l.kI.required),this.officialHolidaysCtrl=new l.NI([],l.kI.required),this.Colomns=["officialHoliday","effectiveDate","endDate"]}ngOnChanges(t){t.value&&this.officialHolidaysCtrl.setValue(this.value)}ngOnInit(){}SavePolicyDetailsOfficialHolidays(){if(this.submitted=!0,this.officialHolidaysCtrl.valid&&this.from_DateCtrl.valid){let t={OfficailHoliday_SelectedIds:this.officialHolidaysCtrl.value,policyId:this.policyId,from_Date:d.M6.mapDateReverse(this.from_DateCtrl.value)};this.showLoading(),this.policyDetailsService.SavePolicyDetailsOfficialHolidays(t).subscribe(i=>{i?.message?.messageType==_.u.Success?(this.submitted=!1,this.from_DateCtrl.reset(),this.addSuccessfullyMsg("newOfficialHolidaysAddedToPolicyGroup"),this.getPolicyDetails.emit(!0)):this.errorList(i?.message?.messages),this.hideLoading()})}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(j.P))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-official-holidays-policy-details"]],inputs:{isView:"isView",isLoaded:"isLoaded",policyId:"policyId",value:"value",dataSource:"dataSource"},outputs:{getPolicyDetails:"getPolicyDetails"},features:[e.qOj,e.TTD],decls:5,vars:9,consts:[["class","row",4,"ngIf"],[4,"ngIf"],[1,"row","mt-3"],[1,"col"],[1,"table-in-forms",3,"isLoaded","dataSource","displayedColumns","hasPaginator","showFilter","currentTableNumber"],[1,"row"],[1,"col-12","col-md-5"],[3,"control","submitted","filter","multi"],[1,"col-12","col-md-4"],["label","effectiveDate",3,"control","submitted"],[1,"col-12","col-md-2","text-center"],["icon","pi pi-plus-circle","label","add",1,"d-block","mt-1",3,"color","iconPositionBefore","onClick"]],template:function(t,i){1&t&&(e.YNc(0,eo,7,8,"div",0),e.YNc(1,to,1,0,"mat-divider",1),e.TgZ(2,"div",2)(3,"div",3)(4,"app-split-table",4),e.NdJ("currentTableNumber",function(r){return i.currentTableNumber=r}),e.qZA()()()),2&t&&(e.Q6J("ngIf",!i.isView),e.xp6(1),e.Q6J("ngIf",!i.isView),e.xp6(2),e.Tol(i.currentTableNumber>1?"col-md-10":"col-md-6"),e.xp6(1),e.Q6J("isLoaded",i.isLoaded)("dataSource",i.dataSource)("displayedColumns",i.Colomns)("hasPaginator",!0)("showFilter",!1))},dependencies:[c.O5,G.Q,N.p,F.M,L.d,Xi.p]}),o})();var io=s(47414);function oo(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6),e._UZ(2,"app-attendance-plan-dropdown",7),e.qZA(),e.TgZ(3,"div",8),e._UZ(4,"app-datepicker",9),e.qZA(),e.TgZ(5,"div",10)(6,"submit-btn",11),e.NdJ("onClick",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.SavePolicyDetailsPlans())}),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("control",t.planCtrl)("submitted",t.submitted)("filter",!0)("multi",!0),e.xp6(2),e.Q6J("control",t.from_DateCtrl)("submitted",t.submitted),e.xp6(2),e.Q6J("color",t.btn.darkBlue)("iconPositionBefore",!1)}}function no(o,n){1&o&&e._UZ(0,"mat-divider")}let Qe=(()=>{class o extends y.U{constructor(t){super(),this.policyDetailsService=t,this.isView=!1,this.getPolicyDetails=new e.vpe,this.submitted=!1,this.from_DateCtrl=new l.NI("",l.kI.required),this.planCtrl=new l.NI([],l.kI.required),this.Colomns=["plan","effectiveDate","endDate"]}ngOnChanges(t){t.value&&this.planCtrl.setValue(this.value)}SavePolicyDetailsPlans(){if(this.submitted=!0,this.planCtrl.valid&&this.from_DateCtrl.valid){let t={plans_SelectedIds:this.planCtrl.value,policyId:this.policyId,from_Date:d.M6.mapDateReverse(this.from_DateCtrl.value)};this.showLoading(),this.policyDetailsService.SavePolicyDetailsPlans(t).subscribe(i=>{i?.message?.messageType==_.u.Success?(this.submitted=!1,this.from_DateCtrl.reset(),this.addSuccessfullyMsg("newPlanAddedToPolicyGroup"),this.getPolicyDetails.emit(!0)):this.errorList(i?.message?.messages),this.hideLoading()})}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(j.P))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-plan-policy-details"]],inputs:{isView:"isView",isLoaded:"isLoaded",policyId:"policyId",value:"value",dataSource:"dataSource"},outputs:{getPolicyDetails:"getPolicyDetails"},features:[e.qOj,e.TTD],decls:5,vars:9,consts:[["class","row",4,"ngIf"],[4,"ngIf"],[1,"row","mt-3"],[1,"col"],[1,"table-in-forms",3,"isLoaded","dataSource","displayedColumns","hasPaginator","showFilter","currentTableNumber"],[1,"row"],[1,"col-12","col-md-5"],[3,"control","submitted","filter","multi"],[1,"col-12","col-md-4"],["label","effectiveDate",3,"control","submitted"],[1,"col-12","col-md-2","text-center"],["icon","pi pi-plus-circle","label","add",1,"d-block","mt-1",3,"color","iconPositionBefore","onClick"]],template:function(t,i){1&t&&(e.YNc(0,oo,7,8,"div",0),e.YNc(1,no,1,0,"mat-divider",1),e.TgZ(2,"div",2)(3,"div",3)(4,"app-split-table",4),e.NdJ("currentTableNumber",function(r){return i.currentTableNumber=r}),e.qZA()()()),2&t&&(e.Q6J("ngIf",!i.isView),e.xp6(1),e.Q6J("ngIf",!i.isView),e.xp6(2),e.Tol(i.currentTableNumber>1?"col-md-10":"col-md-6"),e.xp6(1),e.Q6J("isLoaded",i.isLoaded)("dataSource",i.dataSource)("displayedColumns",i.Colomns)("hasPaginator",!0)("showFilter",!1))},dependencies:[c.O5,G.Q,N.p,F.M,L.d,io.B]}),o})();var ao=s(72370);function ro(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6),e._UZ(2,"app-vacation-type-dropdown",7),e.qZA(),e.TgZ(3,"div",8),e._UZ(4,"app-datepicker",9),e.qZA(),e.TgZ(5,"div",10)(6,"submit-btn",11),e.NdJ("onClick",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.vacationSubmit())}),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("control",t.vacationIdsCtrl)("submitted",t.submitted)("filter",!0)("multi",!0),e.xp6(2),e.Q6J("control",t.from_DateCtrl)("submitted",t.submitted),e.xp6(2),e.Q6J("color",t.btn.darkBlue)("iconPositionBefore",!1)}}function so(o,n){1&o&&e._UZ(0,"mat-divider")}let Me=(()=>{class o extends y.U{constructor(t){super(),this.policyDetailsService=t,this.getPolicyDetails=new e.vpe,this.submitted=!1,this.from_DateCtrl=new l.NI("",l.kI.required),this.vacationIdsCtrl=new l.NI([],l.kI.required),this.Colomns=["vacation","effectiveDate","endDate"]}ngOnChanges(t){t.value&&this.vacationIdsCtrl.setValue(this.value)}vacationSubmit(){if(this.submitted=!0,this.vacationIdsCtrl.valid&&this.from_DateCtrl.valid){let t={VacitionsIds:this.vacationIdsCtrl.value,policyId:this.policyId,from_Date:d.M6.mapDateReverse(this.from_DateCtrl.value)};this.showLoading(),this.policyDetailsService.SavePolicyDetailsVacations(t).subscribe(i=>{i?.message?.messageType==_.u.Success?(this.submitted=!1,this.from_DateCtrl.reset(),this.addSuccessfullyMsg("newVacationAddedToPolicyGroup"),this.getPolicyDetails.emit(!0)):this.errorList(i?.message?.messages),this.hideLoading()})}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(j.P))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-vacations-policy-details"]],inputs:{isView:"isView",isLoaded:"isLoaded",policyId:"policyId",value:"value",dataSource:"dataSource"},outputs:{getPolicyDetails:"getPolicyDetails"},features:[e.qOj,e.TTD],decls:5,vars:9,consts:[["class","row",4,"ngIf"],[4,"ngIf"],[1,"row","mt-3"],[1,"col"],[1,"table-in-forms",3,"isLoaded","dataSource","displayedColumns","hasPaginator","showFilter","currentTableNumber"],[1,"row"],[1,"col-12","col-md-5"],["label","vacation",3,"control","submitted","filter","multi"],[1,"col-12","col-md-4"],["label","effectiveDate",3,"control","submitted"],[1,"col-12","col-md-2","text-center"],["icon","pi pi-plus-circle","label","add",1,"d-block","mt-1",3,"color","iconPositionBefore","onClick"]],template:function(t,i){1&t&&(e.YNc(0,ro,7,8,"div",0),e.YNc(1,so,1,0,"mat-divider",1),e.TgZ(2,"div",2)(3,"div",3)(4,"app-split-table",4),e.NdJ("currentTableNumber",function(r){return i.currentTableNumber=r}),e.qZA()()()),2&t&&(e.Q6J("ngIf",!i.isView),e.xp6(1),e.Q6J("ngIf",!i.isView),e.xp6(2),e.Tol(i.currentTableNumber>1?"col-md-10":"col-md-6"),e.xp6(1),e.Q6J("isLoaded",i.isLoaded)("dataSource",i.dataSource)("displayedColumns",i.Colomns)("hasPaginator",!0)("showFilter",!1))},dependencies:[c.O5,G.Q,N.p,F.M,L.d,ao.t]}),o})();var lo=s(60087);function co(o,n){if(1&o&&(e.TgZ(0,"div",10),e._UZ(1,"app-datepicker",11),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("control",t.from_DateCtrl)("submitted",t.submitted)}}function po(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",12)(1,"submit-btn",13),e.NdJ("onClick",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.SavePolicyDetailsPenalty())}),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("color",t.btn.darkBlue)("iconPositionBefore",!1)}}function uo(o,n){if(1&o&&(e.TgZ(0,"div",5)(1,"div",6),e._UZ(2,"app-penalty-regulation-dropdown",7),e.qZA(),e.YNc(3,co,2,2,"div",8),e.YNc(4,po,2,2,"div",9),e.qZA()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("control",t.penaltyCtrl)("submitted",t.submitted)("filter",!0),e.xp6(1),e.Q6J("ngIf",!t.isView),e.xp6(1),e.Q6J("ngIf",!t.isView)}}function mo(o,n){1&o&&e._UZ(0,"mat-divider")}let Re=(()=>{class o extends y.U{constructor(t){super(),this.policyDetailsService=t,this.isView=!1,this.getPolicyDetails=new e.vpe,this.submitted=!1,this.from_DateCtrl=new l.NI("",l.kI.required),this.penaltyCtrl=new l.NI(null),this.Colomns=["penaltyRegulations","effectiveDate","endDate"]}ngOnChanges(t){t.value&&this.penaltyCtrl.setValue(this.value>0?this.value:null)}ngOnInit(){}SavePolicyDetailsPenalty(){if(this.submitted=!0,this.penaltyCtrl.valid&&this.from_DateCtrl.valid){let t={PenalityReguration_SelectedId:this.penaltyCtrl.value,policyId:this.policyId,from_Date:d.M6.mapDateReverse(this.from_DateCtrl.value)};this.showLoading(),this.policyDetailsService.SavePolicyDetailsPenalty(t).subscribe(i=>{i?.message?.messageType==_.u.Success?(this.submitted=!1,this.from_DateCtrl.reset(),this.addSuccessfullyMsg("newPenaltyAddedToPolicyGroup"),this.getPolicyDetails.emit(!0)):this.errorList(i?.message?.messages),this.hideLoading()})}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(j.P))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-penalty-policy-details"]],inputs:{isView:"isView",isLoaded:"isLoaded",policyId:"policyId",value:"value",dataSource:"dataSource"},outputs:{getPolicyDetails:"getPolicyDetails"},features:[e.qOj,e.TTD],decls:5,vars:9,consts:[["class","row",4,"ngIf"],[4,"ngIf"],[1,"row","mt-3"],[1,"col"],[1,"table-in-forms",3,"isLoaded","dataSource","displayedColumns","hasPaginator","showFilter","currentTableNumber"],[1,"row"],[1,"col-12","col-md-5"],[3,"control","submitted","filter"],["class","col-12 col-md-4",4,"ngIf"],["class","col-12 col-md-2 text-center",4,"ngIf"],[1,"col-12","col-md-4"],["label","effectiveDate",3,"control","submitted"],[1,"col-12","col-md-2","text-center"],["icon","pi pi-plus-circle","label","add",1,"d-block","mt-1",3,"color","iconPositionBefore","onClick"]],template:function(t,i){1&t&&(e.YNc(0,uo,5,5,"div",0),e.YNc(1,mo,1,0,"mat-divider",1),e.TgZ(2,"div",2)(3,"div",3)(4,"app-split-table",4),e.NdJ("currentTableNumber",function(r){return i.currentTableNumber=r}),e.qZA()()()),2&t&&(e.Q6J("ngIf",!i.isView),e.xp6(1),e.Q6J("ngIf",!i.isView),e.xp6(2),e.Tol(i.currentTableNumber>1?"col-md-10":"col-md-6"),e.xp6(1),e.Q6J("isLoaded",i.isLoaded)("dataSource",i.dataSource)("displayedColumns",i.Colomns)("hasPaginator",!0)("showFilter",!1))},dependencies:[c.O5,G.Q,N.p,F.M,L.d,lo.b]}),o})();function _o(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"app-permission-policy-details",5),e.NdJ("getPolicyDetails",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.reGetPolicyDetails())}),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("isLoaded",t.isLoaded)("policyId",t.policyId)("value",t.permissionSetup_SelectedIds)("dataSource",t.permissionDataSource)}}function go(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"app-vacations-policy-details",5),e.NdJ("getPolicyDetails",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.reGetPolicyDetails())}),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("isLoaded",t.isLoaded)("policyId",t.policyId)("value",t.vacitionsIds)("dataSource",t.vacationDataSource)}}function ho(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"app-official-holidays-policy-details",5),e.NdJ("getPolicyDetails",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.reGetPolicyDetails())}),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("isLoaded",t.isLoaded)("policyId",t.policyId)("value",t.officailHoliday_SelectedIds)("dataSource",t.officialHolidaysDataSource)}}function fo(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"app-plan-policy-details",5),e.NdJ("getPolicyDetails",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.reGetPolicyDetails())}),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("isLoaded",t.isLoaded)("policyId",t.policyId)("value",t.plans_SelectedIds)("dataSource",t.planDataSource)}}function yo(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"app-penalty-policy-details",6),e.NdJ("getPolicyDetails",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.reGetPolicyDetails())}),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("isLoaded",t.isLoaded)("value",t.penalityReguration_SelectedId)("policyId",t.policyId)("dataSource",t.penaltyDataSource)}}function bo(o,n){if(1&o&&(e.TgZ(0,"mat-expansion-panel",2)(1,"mat-expansion-panel-header")(2,"mat-panel-title",3),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.YNc(5,_o,2,4,"div",4),e.YNc(6,go,2,4,"div",4),e.YNc(7,ho,2,4,"div",4),e.YNc(8,fo,2,4,"div",4),e.YNc(9,yo,2,4,"div",4),e.qZA()),2&o){const t=n.$implicit,i=n.index,a=e.oxw();e.Q6J("expanded",0===i),e.xp6(3),e.hij(" ",e.lcZ(4,7,t)," "),e.xp6(2),e.Q6J("ngIf",t==a.collapseEnum.permission),e.xp6(1),e.Q6J("ngIf",t==a.collapseEnum.vacations),e.xp6(1),e.Q6J("ngIf",t==a.collapseEnum.officialHolidays),e.xp6(1),e.Q6J("ngIf",t==a.collapseEnum.plan),e.xp6(1),e.Q6J("ngIf",t==a.collapseEnum.penalty)}}var T=(()=>{return(o=T||(T={})).permission="permission",o.officialHolidays="officialHolidays",o.plan="plan",o.vacations="vacations",o.penalty="penalty",T;var o})();let vo=(()=>{class o extends y.U{constructor(t,i){super(),this.policyDetailsService=t,this.policyGroupService=i,this.isView=!1,this.getPolicyDetails=new e.vpe,this.isLoaded=!1,this.collapseEnum=T,this.collapseList=[T.permission,T.officialHolidays,T.plan,T.vacations,T.penalty],this.policyId=i.policyGroup$.getValue()?.id,this.policyGroupDetails=t.policyGroupDetails$.getValue()}ngOnInit(){this.policyGroupService.policyGroup$.pipe(this.cancelRequest()).subscribe(t=>{this.policyId=t?.id??0}),this.policyDetailsService.policyGroupDetails$.pipe(this.cancelRequest()).subscribe(t=>{this.policyGroupDetails=t,t&&(this.isLoaded=!0,this.permissionSetup_SelectedIds=t.permissionSetup_SelectedIds,this.permissionDataSource=new u.by(t.policyPermissionSetups),this.vacitionsIds=t.vacitionsIds,this.vacationDataSource=new u.by(t.policyVacations),this.officailHoliday_SelectedIds=t.officailHoliday_SelectedIds,this.officialHolidaysDataSource=new u.by(t.policyOfficialHolidaies),this.plans_SelectedIds=t.plans_SelectedIds,this.planDataSource=new u.by(t.policyPlans),this.penalityReguration_SelectedId=t.penalityReguration_SelectedId,this.penaltyDataSource=new u.by(t.penaltyRegulations))})}reGetPolicyDetails(){this.getPolicyDetails.emit(!0)}ngOnDestroy(){this.policyDetailsService.policyGroupDetails$.next(null),this.policyGroupService.policyGroup$.next(null)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(j.P),e.Y36(Q.B))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-attendance-details"]],inputs:{isView:"isView",hideTitle:"hideTitle"},outputs:{getPolicyDetails:"getPolicyDetails"},features:[e.qOj],decls:2,vars:1,consts:[[1,"d-block","mt-2"],["class","mb-2",3,"expanded",4,"ngFor","ngForOf"],[1,"mb-2",3,"expanded"],[1,"page-title"],[4,"ngIf"],[3,"isLoaded","policyId","value","dataSource","getPolicyDetails"],[3,"isLoaded","value","policyId","dataSource","getPolicyDetails"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-accordion",0),e.YNc(1,bo,10,9,"mat-expansion-panel",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",i.collapseList))},dependencies:[c.sg,c.O5,C.pp,C.ib,C.yz,C.yK,Ee,qe,Qe,Me,Re,x.X$],styles:["mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:0 4px 4px #84848440!important}.mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{border-bottom:1px solid #eaeaea!important;border-radius:0;margin-bottom:20px}"]}),o})();var Co=s(24200),To=s(64189);function xo(o,n){1&o&&e._UZ(0,"mat-divider",16)}function Do(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-split-table",17),e.NdJ("currentTableNumber",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.currentTableNumber=a)}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("displayedColumns",t.Colomns)("hasPaginator",!0)("showFilter",!1)}}function Zo(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"mat-card")(1,"mat-card-title",2),e._UZ(2,"page-title",3),e.qZA(),e.YNc(3,xo,1,0,"mat-divider",4),e.TgZ(4,"mat-card-content",5)(5,"div",6)(6,"div",7),e._UZ(7,"app-template-dropdown",8),e.qZA(),e.TgZ(8,"div",7),e._UZ(9,"app-object-types-dropdown",9),e.qZA(),e.TgZ(10,"div",7),e._UZ(11,"app-datepicker",10),e.qZA(),e.TgZ(12,"div",11)(13,"submit-btn",12),e.NdJ("onClick",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.SavePolicyDetailsTemplate())}),e.qZA()()(),e._UZ(14,"mat-divider"),e.TgZ(15,"div",13)(16,"div",14),e.YNc(17,Do,1,5,"app-split-table",15),e.qZA()()()()}if(2&o){const t=e.oxw();e.ekj("mt-3",t.hideTitle),e.xp6(3),e.Q6J("ngIf",!t.hideTitle),e.xp6(4),e.Q6J("control",t.templateIdCtrl)("submitted",t.submitted)("filter",!0),e.xp6(2),e.Q6J("control",t.objectTypesCtrl)("submitted",t.submitted)("filter",!0)("multi",!0),e.xp6(2),e.Q6J("control",t.from_DateCtrl)("submitted",t.submitted),e.xp6(2),e.Q6J("color",t.btn.darkBlue)("iconPositionBefore",!1),e.xp6(3),e.Tol(t.currentTableNumber>1?"col-md-10":"col-md-6"),e.xp6(1),e.Q6J("ngIf",t.policyId>0)}}function Io(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-split-table",17),e.NdJ("currentTableNumber",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.currentTableNumber=a)}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("displayedColumns",t.Colomns)("hasPaginator",!0)("showFilter",!1)}}function So(o,n){if(1&o&&(e.TgZ(0,"div",13)(1,"div",14),e.YNc(2,Io,1,5,"app-split-table",15),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.Tol(t.currentTableNumber>1?"col-md-10":"col-md-6"),e.xp6(1),e.Q6J("ngIf",t.policyId>0)}}let Ve=(()=>{class o extends y.U{constructor(t,i){super(),this.policyDetailsService=t,this.policyGroupService=i,this.getPolicyDetails=new e.vpe,this.submitted=!1,this.isLoaded=!1,this.from_DateCtrl=new l.NI("",l.kI.required),this.objectTypesCtrl=new l.NI([],l.kI.required),this.templateIdCtrl=new l.NI(null,l.kI.required),this.Colomns=["objectType","template","effectiveDate","endDate"],this.policyId=i.policyGroup$.getValue().id,this.policyGroupDetails=t.policyGroupDetails$.getValue()}ngOnInit(){this.policyGroupService.policyGroup$.pipe(this.cancelRequest()).subscribe(t=>{this.policyId=t?.id??0}),this.policyDetailsService.policyGroupDetails$.pipe(this.cancelRequest()).subscribe(t=>{this.policyGroupDetails=t,this.isLoaded=!0,t&&(this.objectTypesCtrl.setValue(t.objectTypesIds),this.templateIdCtrl.setValue(t.templeteId),this.dataSource=new u.by(t.core_SS_Template_PolicyGroups))})}SavePolicyDetailsTemplate(){if(this.submitted=!0,this.objectTypesCtrl.valid&&this.from_DateCtrl.valid){let t={objectTypesIds:this.objectTypesCtrl.value,TempleteId:this.templateIdCtrl.value,policyId:this.policyId,from_Date:d.M6.mapDateReverse(this.from_DateCtrl.value)};this.showLoading(),this.policyDetailsService.SavePolicyDetailsTemplate(t).subscribe(i=>{i?.message?.messageType==_.u.Success?(this.submitted=!1,this.from_DateCtrl.reset(),this.templateIdCtrl.reset(),this.addSuccessfullyMsg("newTemplateAddedToPolicyGroup"),this.getPolicyDetails.emit(!0)):this.errorList(i?.message?.messages),this.hideLoading()})}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(j.P),e.Y36(Q.B))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-selfService-details"]],inputs:{isView:"isView",hideTitle:"hideTitle"},outputs:{getPolicyDetails:"getPolicyDetails"},features:[e.qOj],decls:2,vars:2,consts:[[3,"mt-3",4,"ngIf"],["class","row mt-3",4,"ngIf"],[1,"title-no-margin"],["title","objectTypes"],["class","mt-2",4,"ngIf"],[1,"container-fluid","mt-4"],[1,"row"],[1,"col-12","col-md-3"],[3,"control","submitted","filter"],[3,"control","submitted","filter","multi"],["label","effectiveDate",3,"control","submitted"],[1,"col-12","col-md-2","text-center"],["icon","pi pi-plus-circle","label","add",1,"d-block","mt-1",3,"color","iconPositionBefore","onClick"],[1,"row","mt-3"],[1,"col"],["class","table-in-forms",3,"isLoaded","dataSource","displayedColumns","hasPaginator","showFilter","currentTableNumber",4,"ngIf"],[1,"mt-2"],[1,"table-in-forms",3,"isLoaded","dataSource","displayedColumns","hasPaginator","showFilter","currentTableNumber"]],template:function(t,i){1&t&&(e.YNc(0,Zo,18,17,"mat-card",0),e.YNc(1,So,3,3,"div",1)),2&t&&(e.Q6J("ngIf",!i.isView),e.xp6(1),e.Q6J("ngIf",i.isView))},dependencies:[c.O5,G.Q,N.p,I.T,F.M,m.a8,m.dn,m.n5,L.d,Co.n,To.g]}),o})();function wo(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"app-attendance-details",2),e.NdJ("getPolicyDetails",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.getPolicyDetails())}),e.qZA()()}}function Ao(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"app-payroll-details",2),e.NdJ("getPolicyDetails",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.getPolicyDetails())}),e.qZA()()}}function Po(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"app-selfService-details",2),e.NdJ("getPolicyDetails",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.getPolicyDetails())}),e.qZA()()}}function Jo(o,n){1&o&&(e.TgZ(0,"div",3)(1,"div",4),e._UZ(2,"p-message",5),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.s9C("text",e.lcZ(3,1,"please enter policy group general data first")))}let No=(()=>{class o extends y.U{constructor(t,i){super(),this.policyDetailsService=t,this.policyGroupService=i,this.PolicyGroupType=te.Sg,this.policyId=i.policyGroup$.getValue()?.id,this.policyGroupDetails=t.policyGroupDetails$.getValue()}ngOnInit(){this.policyGroupService.policyGroup$.pipe(this.cancelRequest()).subscribe(t=>{this.policyGroup=t,this.policyId=t?.id??0,t&&this.getPolicyDetails()}),this.policyDetailsService.policyGroupDetails$.pipe(this.cancelRequest()).subscribe(t=>{this.policyGroupDetails=t})}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&this.policyId>0&&this.getPolicyDetails()}getPolicyDetails(){this.policyDetailsService.getPolicyDetails(this.policyId).pipe(this.cancelRequest()).subscribe(t=>{if(t.message.messageType==_.u.Success){const i=Ge(t.data);this.policyDetailsService.policyGroupDetails$.next(i)}else this.errorList(t?.message?.messages)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(j.P),e.Y36(Q.B))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-policy-group-details"]],features:[e.qOj],decls:4,vars:4,consts:[[4,"ngIf"],["class","row d-flex justify-content-center",4,"ngIf"],[3,"getPolicyDetails"],[1,"row","d-flex","justify-content-center"],[1,"col-12","col-md-6"],["severity","error",3,"text"]],template:function(t,i){1&t&&(e.YNc(0,wo,2,0,"div",0),e.YNc(1,Ao,2,0,"div",0),e.YNc(2,Po,2,0,"div",0),e.YNc(3,Jo,4,3,"div",1)),2&t&&(e.Q6J("ngIf",(null==i.policyGroup?null:i.policyGroup.policyGroup_Type_ID)==i.PolicyGroupType.Attendance),e.xp6(1),e.Q6J("ngIf",(null==i.policyGroup?null:i.policyGroup.policyGroup_Type_ID)==i.PolicyGroupType.Payroll),e.xp6(1),e.Q6J("ngIf",(null==i.policyGroup?null:i.policyGroup.policyGroup_Type_ID)==i.PolicyGroupType.SelfService),e.xp6(1),e.Q6J("ngIf",null==i.policyGroup||!i.policyGroup))},dependencies:[c.O5,Ri.q,je,vo,Ve,x.X$]}),o})();const Lo=["stepper"];function Oo(o,n){if(1&o&&e._UZ(0,"app-add-new-btn",3),2&o){const t=e.oxw();e.MGl("url","/org-management/",t.moduleId,"/policy-group/add"),e.Q6J("params",t.parentParam)}}let Fe=(()=>{class o extends y.U{constructor(){super(),this.activatedRoute.paramMap.subscribe(t=>{this.policyGroupId=Number(t.get("id"))??0})}ngOnInit(){}stepChanged(){this.stepper.selected.interacted=!1}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-policy-group-core"]],viewQuery:function(t,i){if(1&t&&e.Gf(Lo,5),2&t){let a;e.iGM(a=e.CRH())&&(i.stepper=a.first)}},features:[e.qOj],decls:24,vars:28,consts:[[1,"title-no-margin","title-section","fixed-title"],["addTitle","addPolicyGroup","editTitle","editPolicyGroup",3,"id","parentTitle","parentTitleLink","title","parentLinkParams"],[3,"url","params",4,"ngIf"],[3,"url","params"],[1,"has-fixed-title"],[1,"mt-2"],[3,"linear","selectionChange"],["stepper",""],[1,"mt-5",3,"label"],[1,"row"],[1,"col-12"],[3,"label"],[3,"stepper","parentParam","url","pageParams"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.ynx(4),e.YNc(5,Oo,1,2,"app-add-new-btn",2),e._UZ(6,"app-back-btn",3),e.BQk(),e.qZA(),e.TgZ(7,"mat-card-content",4),e._UZ(8,"div",5),e.TgZ(9,"mat-stepper",6,7),e.NdJ("selectionChange",function(){return i.stepChanged()}),e.TgZ(11,"mat-step",8),e.ALo(12,"titlecase"),e.ALo(13,"translate"),e.TgZ(14,"div",9)(15,"div",10),e._UZ(16,"app-add-policy-group"),e.qZA()()(),e.TgZ(17,"mat-step",11),e.ALo(18,"titlecase"),e.ALo(19,"translate"),e.TgZ(20,"div",9)(21,"div",10),e._UZ(22,"app-policy-group-details"),e.qZA()()()()(),e._UZ(23,"steps-footer",12)),2&t){const a=e.MAs(10);e.xp6(1),e.hYB("parentTitle","",e.lcZ(2,16,"orgManagement")," / ",e.lcZ(3,18,"policyGroups"),""),e.MGl("parentTitleLink","/org-management/",i.moduleId,"/policy-group"),e.Q6J("id",i.policyGroupId)("title",i.policyGroupId>0?"edit":"add")("parentLinkParams",i.pageParams),e.xp6(4),e.Q6J("ngIf",i.policyGroupId>0),e.xp6(1),e.MGl("url","/org-management/",i.moduleId,"/policy-group"),e.Q6J("params",i.pageParams),e.xp6(3),e.Q6J("linear",!1),e.xp6(2),e.s9C("label",e.lcZ(12,20,e.lcZ(13,22,"generalInfo"))),e.xp6(6),e.s9C("label",e.lcZ(18,24,e.lcZ(19,26,"policyGroupDetails"))),e.xp6(6),e.MGl("url","/org-management/",i.moduleId,"/policy-group"),e.Q6J("stepper",a)("parentParam",i.parentParam)("pageParams",i.pageParams)}},dependencies:[c.O5,ie.a,pe.J,I.T,Mi.j,m.dn,m.n5,Ue.C0,Ue.Vq,he.S,No,c.rS,x.X$]}),o})();var w=s(3710),k=s(43949),ke=s(4592),Go=s(26873),Uo=s(68756),jo=s(59681);let Be=(()=>{class o extends y.U{constructor(t,i,a){super(),this.orgLocationService=t,this.data=i,this.dialogRef=a,this.submitted=!1,this.hasUpdate=!1}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],Country_ID:[null,[l.kI.required]],Governament_ID:[null,[l.kI.required]],location:[null,[l.kI.required]],longitude:[null,[k.dN.gt(0)]],latitude:[null,[k.dN.gt(0)]],radius:[null,[k.dN.gt(0)]]}),this.data&&this.basicLocationToEdit(this.data)}get formCtrls(){return this.form.controls}submit(){if(this.submitted=!0,this.form.valid){const t={ID:this.form.value.id,Location:this.formCtrls.location.value,Country_ID:this.formCtrls.Country_ID.value,Governament_ID:this.formCtrls.Governament_ID.value,longitude:this.formCtrls.longitude.value,latitude:this.formCtrls.latitude.value,radius:this.formCtrls.radius.value};0==t.ID?this.create(t):this.update(t)}}create(t){this.showLoading(),this.orgLocationService.create(t).subscribe(i=>{i?.message?.messageType==_.u.Success?(this.hasUpdate=!0,this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newbasicLocationAdded"),this.onCloseDialog()):this.errorList(i?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this.orgLocationService.update(t).subscribe(i=>{i.message.messageType==_.u.Success?(this.hasUpdate=!0,this.updateSuccessfullyMsg("basicLocationUpdated","successfulEdit"),this.onCloseDialog()):this.errorList(i?.message?.messages),this.hideLoading()})}basicLocationToEdit(t){this.formCtrls.Governament_ID.setValue(t.comm_Governorate.id),this.formCtrls.Country_ID.setValue(t.comm_Country.id),this.form.patchValue(t)}clearForm(){this.form.reset({id:0}),this.submitted=!1}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ke.b),e.Y36(Z.WI),e.Y36(Z.so))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-location"]],features:[e.qOj],decls:23,vars:24,consts:[["parentTitle","basicLocation","addTitle","add","editTitle","update",3,"id"],["container",""],[1,"row"],[1,"col-12"],[3,"formGroup"],[3,"control","submitted","filter","appendTo"],[3,"control","countryControl","submitted","filter","appendTo"],["label","location",3,"control","submitted"],["label","longitude",3,"control","submitted","type","isDecimalNumber"],["label","latitude","type","number",3,"control","submitted","isDecimalNumber"],["label","radius","type","number",3,"control","submitted","isDecimalNumber"],["align","end"],[3,"click"],["addLabel","add",3,"id","onClick"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-card-title"),e._UZ(1,"page-title",0),e.qZA(),e.TgZ(2,"mat-card-content",null,1)(4,"div",2)(5,"div",3)(6,"form",4)(7,"div",2)(8,"div",3),e._UZ(9,"app-country-dropdown",5),e.qZA(),e.TgZ(10,"div",3),e._UZ(11,"governorate-dropdown",6),e.qZA(),e.TgZ(12,"div",3),e._UZ(13,"app-input",7),e.qZA(),e.TgZ(14,"div",3),e._UZ(15,"app-input",8),e.qZA(),e.TgZ(16,"div",3),e._UZ(17,"app-input",9),e.qZA(),e.TgZ(18,"div",3),e._UZ(19,"app-input",10),e.qZA()()()()()(),e.TgZ(20,"mat-card-actions",11)(21,"discard-dialog-btn",12),e.NdJ("click",function(){return i.onCloseDialog()}),e.qZA(),e.TgZ(22,"submit-btn",13),e.NdJ("onClick",function(){return i.submit()}),e.qZA()()),2&t){const a=e.MAs(3);e.xp6(1),e.Q6J("id",i.formCtrls.id.value),e.xp6(5),e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("control",i.formCtrls.Country_ID)("submitted",i.submitted)("filter",!0)("appendTo",a),e.xp6(2),e.Q6J("control",i.formCtrls.Governament_ID)("countryControl",i.formCtrls.Country_ID)("submitted",i.submitted)("filter",!0)("appendTo",a),e.xp6(2),e.Q6J("control",i.formCtrls.location)("submitted",i.submitted),e.xp6(2),e.Q6J("control",i.formCtrls.longitude)("submitted",i.submitted)("type",i.inputType.number)("isDecimalNumber",!0),e.xp6(2),e.Q6J("control",i.formCtrls.latitude)("submitted",i.submitted)("isDecimalNumber",!0),e.xp6(2),e.Q6J("control",i.formCtrls.radius)("submitted",i.submitted)("isDecimalNumber",!0),e.xp6(3),e.Q6J("id",i.formCtrls.id.value)}},dependencies:[Y.a,N.p,I.T,Go.E,m.dn,m.n5,m.hq,Uo.n,jo.z,l._Y,l.JL,l.sg]}),o})(),Eo=(()=>{class o extends y.U{constructor(t){super(),this.orgLocationService=t,this.mandatoryColomns=["Ser","id","country","location","longitude","latitude","radius","actions"],this.isLoaded=!1,this.optionalColomns=[]}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new u.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.firstPage)}getList(t,i){this.dataSource=new u.by(null),this.isLoaded=!1,this.page.pageIndex=t,i&&(this.page.pageSize=i),this.orgLocationService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(r=>{r.message.messageType==_.u.Success?(r.data.map(f=>{f.country=this.msgTranslate(f.comm_Country?.ar_Name,f.comm_Country?.en_NAme)}),this.dataSource=new u.by(r.data),this.isLoaded=!0,this.page.length=r.meta.totalItemCount,this.page.meta=r.meta):this.errorList(r?.message?.messages)})}onDelete(t){let i=this.msgTranslate(t.location);this.deleteDialog(i).subscribe(a=>{a&&this.delete(t)})}delete(t){this.showLoading(),this.orgLocationService.Delete(t.id).subscribe(i=>{i.message.messageType==_.u.Success?(this.deleteSuccessfullyMsg("basicLocationRemoved","successfulDelete"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(i?.message?.messages),this.hideLoading()})}openAddEditDialog(t,i){this.dialogsService.addEditDialog(Be,t,{width:"25vw",minWidth:"400px",maxWidth:"500px",maxHeight:"98vh",disableClose:!0,panelClass:"setup-dialog"}).afterClosed().subscribe(a=>{a&&this.getList(i?this.lastPage:this.currentPage)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ke.b))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-basic-location-index"]],features:[e.qOj],decls:4,vars:8,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","basicLocation","parentTitle","orgManagement","TitleHasGlobalFunc","",3,"globalFunctions","action"],[1,"index-card"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","exportService","actions","onChangePage","editRow","deleteRow"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card-title",0)(1,"page-title",1),e.NdJ("action",function(){return i.openAddEditDialog(null,!0)}),e.qZA()(),e.TgZ(2,"mat-card",2)(3,"app-material-table",3),e.NdJ("onChangePage",function(r){return i.getList(r.pageIndex+1,r.pageSize)})("editRow",function(r){return i.openAddEditDialog(r,!1)})("deleteRow",function(r){return i.onDelete(r)}),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("globalFunctions",i.globalFunctions),e.xp6(2),e.Q6J("isLoaded",i.isLoaded)("dataSource",i.dataSource)("mandatoryColomns",i.mandatoryColomns)("optionalColomns",i.optionalColomns)("page",i.page)("exportService",i.orgLocationService)("actions",i.rowFunctions))},dependencies:[K.I,I.T,ne.X,m.a8,m.n5]}),o})();var E=s(78512);let fe=(()=>{class o extends oe.K{constructor(){super()}getJobsProfileData(t){return this.post("OrgManagementReport/RptJobProfile/GetJobProfileData",null,{params:t})}getJobDescriptionLst(){return this.get("OrgManagementReport/RptJobDescriptionForm/GetJobDescriptionList")}getJobDescriptionForm(t){return this.get("OrgManagementReport/RptJobDescriptionForm/GetJobProfileDescriptionData",{params:t})}getPolicyGroupData(t){return this.post("OrgManagementReport/RptPolicyGroupDetails/GetPolicyGroupData",t)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var ye=s(99515);function Qo(o,n){if(1&o&&(e.TgZ(0,"mat-card",7)(1,"mat-card-title",8)(2,"div",4),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"mat-card-content",9,10),e._UZ(7,"app-material-table",11),e.qZA()()),2&o){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,11,"results")),e.xp6(4),e.Q6J("isLoaded",t.isLoaded)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("page",t.page)("actions",t.rowFunctions)("allDataTable",t.jobsProfileDataTable)("showFilter",!1)("showSort",!1)("isCenterPaginator",!0)("hidePageSize",!0)}}let Mo=(()=>{class o extends y.U{constructor(t){super(),this.orgManagementReportsService=t,this.submitted=!1,this.isLoaded=!1,this.reportId=0,this.mandatoryColomns=["Ser","code","jobTitle","jobFamily","parentJobTitle","grade","miN_SALARY","middel_Salary","maX_SALARY"],this.optionalColomns=[],this.paramsList=[{name:"Job_IDs",id:E.A.Job_IDs}]}ngOnInit(){this.page.numberOfNavs=10}onModulesChanged(){this.reportId=this.getReportGUIid(this.getViewName)}submit(t){this.params={Job_IDs:t.Job_IDs??""},this.submitted=!0,this.getJobsProfileData()}getJobsProfileData(){this.isLoaded=!1,this.jobsProfileDataTable=null,this.orgManagementReportsService.getJobsProfileData(this.params).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==_.u.Success?(this.jobsProfileDataTable=function qo(o){return o.map(n=>({code:n.code,jobTitle:(0,d._f)(n.ar_Job,n.en_Job),jobFamily:(0,d._f)(n.ar_Family,n.en_Family),parentJobTitle:(0,d._f)(n.ar_Parent,n.en_Parent),grade:(0,d._f)(n.ar_Grade,n.en_Grade),miN_SALARY:n.miN_SALARY,middel_Salary:n.middel_Salary,maX_SALARY:n.maX_SALARY}))}(t.data),this.page.length=this.jobsProfileDataTable.length,console.log(this.page),this.isLoaded=!0):this.errorList(t?.message?.messages)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(fe))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-job-profile-rep"]],features:[e.qOj],decls:11,vars:9,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","jobsProfile",3,"parentTitle"],[1,"d-block","mt-2"],["expanded",""],[1,"page-title"],[3,"reportId","paramsList","onSubmit"],["class","form-card",4,"ngIf"],[1,"form-card"],[1,"d-flex","justify-content-between"],["id","rpt_att_card",1,"container-fluid"],["rpt_att_card",""],["tableId","rpt-table",3,"isLoaded","mandatoryColomns","optionalColomns","page","actions","allDataTable","showFilter","showSort","isCenterPaginator","hidePageSize"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"mat-accordion",2)(4,"mat-expansion-panel",3)(5,"mat-expansion-panel-header")(6,"mat-panel-title",4),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"app-reports-params",5),e.NdJ("onSubmit",function(r){return i.submit(r)}),e.qZA()()(),e.YNc(10,Qo,8,13,"mat-card",6)),2&t&&(e.xp6(1),e.s9C("parentTitle",e.lcZ(2,5,"orgManagementReports")),e.xp6(6),e.hij(" ",e.lcZ(8,7,"filter_options")," "),e.xp6(2),e.Q6J("reportId",i.reportId)("paramsList",i.paramsList),e.xp6(1),e.Q6J("ngIf",i.submitted))},dependencies:[c.O5,K.I,I.T,ye.n,m.a8,m.dn,m.n5,C.pp,C.ib,C.yz,C.yK,x.X$],styles:[".view-data-row-container[_ngcontent-%COMP%]{flex-wrap:nowrap}"]}),o})();var be=s(98814),Ye=s(9615);function Ro(o,n){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=e.oxw(4);e.uIk("rowspan",t.jobTable.kpiCont),e.xp6(1),e.hij(" ",e.lcZ(2,2,"keyPerformanceIndicators")," ")}}function Vo(o,n){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,Ro,3,4,"th",11),e.TgZ(2,"td"),e._uU(3),e.qZA()()),2&o){const t=n.index,i=e.oxw(3);e.xp6(1),e.Q6J("ngIf",0==t),e.xp6(2),e.hij(" ",i.msgTranslate(i.jobTable.ar_KPIS[t],i.jobTable.en_KPIS[t])," ")}}function Fo(o,n){if(1&o&&(e.TgZ(0,"th"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=e.oxw(4);e.uIk("rowspan",t.jobTable.toolCont),e.xp6(1),e.hij(" ",e.lcZ(2,2,"tools")," ")}}function ko(o,n){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,Fo,3,4,"th",11),e.TgZ(2,"td"),e._uU(3),e.qZA()()),2&o){const t=n.index,i=e.oxw(3);e.xp6(1),e.Q6J("ngIf",0==t),e.xp6(2),e.hij(" ",i.msgTranslate(i.jobTable.ar_Covenants[t],i.jobTable.en_Covenants[t])," ")}}function Bo(o,n){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA()()),2&o){const t=n.$implicit,i=e.oxw(3);e.xp6(2),e.hij(" ",i.msgTranslate(t.ar_Course,t.en_Course)," "),e.xp6(2),e.hij(" ",t.period," "),e.xp6(2),e.hij(" ",i.msgTranslate(t.ar_Priority,t.en_Priority)," "),e.xp6(2),e.hij(" ",1==t.pre_Required?"yes":0==t.pre_Required?"no":""," ")}}const He=function(){return[]};function Yo(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"table",13)(2,"thead",14)(3,"tr")(4,"th",15),e._uU(5),e.ALo(6,"titlecase"),e.ALo(7,"translate"),e.qZA()()(),e.TgZ(8,"tbody")(9,"tr")(10,"th"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA()(),e.TgZ(15,"tr")(16,"th"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.qZA()(),e.TgZ(21,"tr")(22,"th"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e._UZ(25,"td",16),e.qZA(),e.TgZ(26,"tr")(27,"th"),e._uU(28),e.ALo(29,"translate"),e.qZA(),e._UZ(30,"td",16),e.qZA(),e.YNc(31,Vo,4,2,"tr",17),e.TgZ(32,"tr")(33,"th"),e._uU(34),e.ALo(35,"translate"),e.qZA(),e._UZ(36,"td",16),e.qZA(),e.TgZ(37,"tr")(38,"th"),e._uU(39),e.ALo(40,"translate"),e.qZA(),e._UZ(41,"td",16),e.qZA(),e.TgZ(42,"tr")(43,"th"),e._uU(44),e.ALo(45,"translate"),e.qZA(),e._UZ(46,"td",16),e.qZA(),e.YNc(47,ko,4,2,"tr",17),e.TgZ(48,"tr")(49,"th"),e._uU(50),e.ALo(51,"translate"),e.qZA(),e._UZ(52,"td",16),e.qZA(),e.TgZ(53,"tr")(54,"th",18),e._uU(55),e.ALo(56,"translate"),e.qZA()(),e.TgZ(57,"tr")(58,"th"),e._uU(59),e.ALo(60,"translate"),e.qZA(),e._UZ(61,"td"),e.qZA(),e.TgZ(62,"tr")(63,"th"),e._uU(64),e.ALo(65,"translate"),e.qZA(),e._UZ(66,"td"),e.qZA(),e.TgZ(67,"tr")(68,"th",15),e._uU(69),e.ALo(70,"translate"),e.qZA()(),e.TgZ(71,"tr")(72,"td",19)(73,"table",20)(74,"tbody")(75,"tr")(76,"th"),e._uU(77),e.ALo(78,"translate"),e.qZA(),e.TgZ(79,"th"),e._uU(80),e.ALo(81,"translate"),e.qZA(),e.TgZ(82,"th"),e._uU(83),e.ALo(84,"translate"),e.qZA(),e.TgZ(85,"th"),e._uU(86),e.ALo(87,"translate"),e.qZA()(),e.YNc(88,Bo,9,4,"tr",17),e.qZA()()()()()(),e.TgZ(89,"app-prime-paginator",21),e.NdJ("onChangePage",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.getDescriptionFormForJob(a.pageIndex+1))}),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(5),e.hij(" ",e.lcZ(6,31,e.lcZ(7,33,"jobDescriptionForm"))," "),e.xp6(6),e.hij(" ",e.lcZ(12,35,"jobTitle")," "),e.xp6(3),e.hij(" ",t.msgTranslate(t.jobTable.ar_Job,t.jobTable.en_Job)," "),e.xp6(3),e.hij(" ",e.lcZ(18,37,"reportingTo")," "),e.xp6(3),e.hij(" ",t.msgTranslate(t.jobTable.ar_Parent,t.jobTable.en_Parent)," "),e.xp6(3),e.hij(" ",e.lcZ(24,39,"jobObjectives")," "),e.xp6(2),e.Q6J("innerHTML",t.jobTable.joB_PURPOSE,e.oJD),e.xp6(3),e.hij(" ",e.lcZ(29,41,"jobResponsibilities")," "),e.xp6(2),e.Q6J("innerHTML",t.jobTable.responsibilitieS_DUTIES,e.oJD),e.xp6(1),e.Q6J("ngForOf",e.DdM(67,He).constructor(t.jobTable.kpiCont)),e.xp6(3),e.hij(" ",e.lcZ(35,43,"skillRequirements")," "),e.xp6(2),e.Q6J("innerHTML",t.jobTable.knowledgE_SKILLS,e.oJD),e.xp6(3),e.hij(" ",e.lcZ(40,45,"academicEducationalRequirements")," "),e.xp6(2),e.Q6J("innerHTML",t.jobTable.education,e.oJD),e.xp6(3),e.hij(" ",e.lcZ(45,47,"experience")," "),e.xp6(2),e.Q6J("innerHTML",t.jobTable.experience,e.oJD),e.xp6(1),e.Q6J("ngForOf",e.DdM(68,He).constructor(t.jobTable.toolCont)),e.xp6(3),e.hij(" ",e.lcZ(51,49,"workingConditions")," "),e.xp6(2),e.Q6J("innerHTML",t.jobTable.workinG_CONDITIONS,e.oJD),e.xp6(3),e.hij(" ",e.lcZ(56,51,"theAboveInformationCorrectAsApprovedByPrintedEmpty")," "),e.xp6(4),e.hij(" ",e.lcZ(60,53,"employeeSignature")," "),e.xp6(5),e.hij(" ",e.lcZ(65,55,"supervisorSignature")," "),e.xp6(5),e.hij(" ",e.lcZ(70,57,"trainingPath")," "),e.xp6(8),e.hij(" ",e.lcZ(78,59,"course")," "),e.xp6(3),e.hij(" ",e.lcZ(81,61,"period")," "),e.xp6(3),e.hij(" ",e.lcZ(84,63,"priority")," "),e.xp6(3),e.hij(" ",e.lcZ(87,65,"pre_Required")," "),e.xp6(2),e.Q6J("ngForOf",t.jobTable.courses),e.xp6(1),e.Q6J("page",t.page)("isCenterPaginator",!0)("hidePageSizeOption",!0)}}const Ho=function(){return["",""]};function zo(o,n){1&o&&(e.TgZ(0,"div",22),e._UZ(1,"app-table-skeleton",23),e.qZA()),2&o&&(e.xp6(1),e.Q6J("displayedColumns",e.DdM(1,Ho)))}function $o(o,n){if(1&o&&(e.TgZ(0,"mat-card",7)(1,"mat-card-title",8)(2,"div",4),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"mat-card-content",9,10),e.YNc(7,Yo,90,69,"ng-container",11),e.YNc(8,zo,2,2,"div",12),e.qZA()()),2&o){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,3,"results")),e.xp6(4),e.Q6J("ngIf",t.isLoaded),e.xp6(1),e.Q6J("ngIf",!t.isLoaded)}}let Ko=(()=>{class o extends y.U{constructor(t){super(),this.orgManagementReportsService=t,this.submitted=!1,this.isLoaded=!1,this.reportId=0,this.paramsList=[{name:"Job_IDs",id:E.A.Job_IDs}]}ngOnInit(){this.page.pageSize=1,this.page.numberOfNavs=10}onModulesChanged(){this.reportId=this.getReportGUIid(this.getViewName)}submit(t){this.params={job_id:t.Job_IDs?Number(t.Job_IDs.split(",")[0]):null},this.params.job_id?(this.jobLst=t.Job_IDs.split(",").map(i=>Number(i)),this.page.length=this.jobLst.length,this.submitted=!0,this.getDescriptionFormForJob(1)):this.getJobLst()}getJobLst(){this.page.length=0,this.jobLst=null,this.orgManagementReportsService.getJobDescriptionLst().pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==_.u.Success?(this.jobLst=t.data.map(i=>i.id),this.page.length=this.jobLst.length,this.submitted=!0,this.jobLst.length>0&&this.getDescriptionFormForJob(1)):this.errorList(t?.message?.messages)})}getDescriptionFormForJob(t){this.isLoaded=!1,this.jobTable=null,this.page.pageIndex=t;let i=this.params;i.job_id=this.jobLst[t-1],this.orgManagementReportsService.getJobDescriptionForm(i).pipe(this.cancelRequest()).subscribe(a=>{a.message.messageType==_.u.Success?(this.jobTable=a.data[0],this.jobTable.kpiCont=this.jobTable.en_KPIS.length,this.jobTable.toolCont=this.jobTable.en_Covenants.length,this.isLoaded=!0):this.errorList(a?.message?.messages)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(fe))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-job-description-form-rep"]],features:[e.qOj],decls:11,vars:9,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","jobDescriptionForm",3,"parentTitle"],[1,"d-block","mt-2"],["expanded",""],[1,"page-title"],[3,"reportId","paramsList","onSubmit"],["class","form-card job-description-rep",4,"ngIf"],[1,"form-card","job-description-rep"],[1,"d-flex","justify-content-between"],["id","rpt_att_card",1,"container-fluid"],["rpt_att_card",""],[4,"ngIf"],["class","mtop-25",4,"ngIf"],["id","rpt-table","appScrollableHorizontal","",1,"table","rpt-table","mt-3","overflow-scroll","d-block"],[1,"thead-light"],["colspan","2"],[3,"innerHTML"],[4,"ngFor","ngForOf"],["colspan","2",1,"font-size-16"],["colspan","2",1,"course-table"],[1,"table","rpt-table"],[3,"page","isCenterPaginator","hidePageSizeOption","onChangePage"],[1,"mtop-25"],[3,"displayedColumns"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"mat-accordion",2)(4,"mat-expansion-panel",3)(5,"mat-expansion-panel-header")(6,"mat-panel-title",4),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"app-reports-params",5),e.NdJ("onSubmit",function(r){return i.submit(r)}),e.qZA()()(),e.YNc(10,$o,9,5,"mat-card",6)),2&t&&(e.xp6(1),e.s9C("parentTitle",e.lcZ(2,5,"orgManagementReports")),e.xp6(6),e.hij(" ",e.lcZ(8,7,"filter_options")," "),e.xp6(2),e.Q6J("reportId",i.reportId)("paramsList",i.paramsList),e.xp6(1),e.Q6J("ngIf",i.submitted))},dependencies:[c.sg,c.O5,I.T,be.I,Ye.m,X.c,ye.n,m.a8,m.dn,m.n5,C.pp,C.ib,C.yz,C.yK,c.rS,x.X$],styles:[".job-description-rep thead th:first-child{font-size:20px}  .job-description-rep tbody th{width:110px;text-align:start!important}  .job-description-rep tbody td{text-wrap:wrap!important;width:100%}  .job-description-rep tbody td p{margin:0}  .job-description-rep tbody td.course-table{padding:0}  .job-description-rep tbody td.course-table .table{margin-bottom:0}  .job-description-rep tbody td.course-table .table td{width:auto}  .job-description-rep tbody td.course-table .table th{text-align:center!important;width:none!important}  .job-description-rep tbody td.course-table .table tbody tr:first-of-type th{border-top:0}  .job-description-rep tbody td.course-table .table tr td:first-child,   .job-description-rep tbody td.course-table .table tr th:first-of-type{border-left:0}  .job-description-rep tbody td.course-table .table tbody tr:last-of-type{border-bottom:0}"]}),o})();function Wo(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.BQk()),2&o){const t=e.oxw(2).$implicit,i=e.oxw(3);e.xp6(1),e.uIk("rowspan",t.rptPolicyEmployees.length),e.xp6(1),e.hij(" ",i.getSerOfAllDataTable(t.id)," "),e.xp6(1),e.uIk("rowspan",t.rptPolicyEmployees.length),e.xp6(1),e.hij(" ",i.msgTranslate(t.ar_PolicyGroup,t.eN_PolicyGroup)," "),e.xp6(1),e.uIk("rowspan",t.rptPolicyEmployees.length),e.xp6(1),e.hij(" ",i.msgTranslate(t.ar_PolicyType,t.eN_PolicyType)," ")}}function Xo(o,n){if(1&o&&(e.TgZ(0,"tr"),e.YNc(1,Wo,7,6,"ng-container",11),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA()()),2&o){const t=n.$implicit,i=n.index,a=e.oxw(4);e.xp6(1),e.Q6J("ngIf",0==i),e.xp6(2),e.hij(" ",t.code," "),e.xp6(2),e.hij(" ",a.msgTranslate(t.ar_Person,t.en_Person)," "),e.xp6(2),e.hij(" ",a.msgTranslate(t.ar_Job,t.eN_Job)," "),e.xp6(2),e.hij(" ",a.msgTranslate(t.ar_Org,t.en_Org)," ")}}function en(o,n){if(1&o&&(e.ynx(0),e.YNc(1,Xo,10,5,"tr",16),e.BQk()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("ngForOf",t.rptPolicyEmployees)}}function tn(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"table",13)(2,"thead",14)(3,"tr",15)(4,"th"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"th"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"th"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"th"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"th"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"th"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"th"),e._uU(23),e.ALo(24,"translate"),e.qZA()()(),e.TgZ(25,"tbody"),e.YNc(26,en,2,1,"ng-container",16),e.qZA()(),e.TgZ(27,"app-prime-paginator",17),e.NdJ("onChangePage",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.changeDataInPage(a.pageIndex))}),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,11,"Ser")),e.xp6(3),e.Oqu(e.lcZ(9,13,"policyGroup")),e.xp6(3),e.Oqu(e.lcZ(12,15,"policyType")),e.xp6(3),e.Oqu(e.lcZ(15,17,"code")),e.xp6(3),e.Oqu(e.lcZ(18,19,"employeeName")),e.xp6(3),e.Oqu(e.lcZ(21,21,"jobTitle")),e.xp6(3),e.Oqu(e.lcZ(24,23,"organization")),e.xp6(3),e.Q6J("ngForOf",t.policyGroupTable),e.xp6(1),e.Q6J("page",t.page)("isCenterPaginator",!0)("hidePageSizeOption",!0)}}const on=function(){return["","","","","","",""]};function nn(o,n){1&o&&(e.TgZ(0,"div",18),e._UZ(1,"app-table-skeleton",19),e.qZA()),2&o&&(e.xp6(1),e.Q6J("displayedColumns",e.DdM(1,on)))}function an(o,n){if(1&o&&(e.TgZ(0,"mat-card",7)(1,"mat-card-title",8)(2,"div",4),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"mat-card-content",9,10),e.YNc(7,tn,28,25,"ng-container",11),e.YNc(8,nn,2,2,"div",12),e.qZA()()),2&o){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,3,"results")),e.xp6(4),e.Q6J("ngIf",t.isLoaded),e.xp6(1),e.Q6J("ngIf",!t.isLoaded)}}let rn=(()=>{class o extends y.U{constructor(t){super(),this.orgManagementReportsService=t,this.submitted=!1,this.isLoaded=!1,this.reportId=0,this.paramsList=[{name:"Structure_id",id:E.A.Structure_id,isRequired:!0},{name:"StructureType_Id",id:E.A.StructureType_Id},{name:"Org_IDs",id:E.A.Org_IDs},{name:"Person_Instance_ID",id:E.A.Person_Instance_ID},{name:"PolicyGroupTypeIDs",id:E.A.PolicyGroupTypeIDs},{name:"PolicyGroupIds",id:E.A.PolicyGroupIds},{name:"Financial_Company_IDs",id:E.A.Financial_Company_IDs},{name:"WithChilds",id:E.A.WithChilds,isRequired:!0}]}ngOnInit(){}onModulesChanged(){this.reportId=this.getReportGUIid(this.getViewName)}submit(t){this.params={Structure_id:t.Structure_id,StructureType_Id:t.StructureType_Id,Org_Ids:t.Org_IDs,WithChilds:t.WithChilds,Person_Instance_ID:t.Person_Instance_ID,PolicyGroupTypeIDs:t.PolicyGroupTypeIDs,PolicyGroupIds:t.PolicyGroupIds,Financial_Company_IDs:t.Financial_Company_IDs},this.submitted=!0,this.getPolicyGroupData()}getPolicyGroupData(){this.isLoaded=!1,this.policyGroupTable=null,this.orgManagementReportsService.getPolicyGroupData(this.params).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==_.u.Success?(this.page.length=t.data.length,this.policyGroupTableAll=t.data,this.policyGroupTable=this.policyGroupTableAll.slice(0,this.page.pageSize),this.isLoaded=!0):this.errorList(t?.message?.messages)})}changeDataInPage(t){this.page.pageIndex=t+1;let i=t*this.page.pageSize;this.policyGroupTable=this.policyGroupTableAll.slice(i,i+this.page.pageSize)}getSerOfAllDataTable(t){return this.policyGroupTableAll?.findIndex(i=>i.id==t)+1}onScroll(t){let i=document.getElementById("fixed-header");if(i)if(i.getBoundingClientRect().top<=0){const r=document.getElementsByClassName("rpt-table")[0].getBoundingClientRect().top;i.style.position="sticky",i.style.top=`${Math.abs(r)}px`}else i.style.position="static",i.style.top="auto"}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(fe))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-policy-group-details-rep"]],hostBindings:function(t,i){1&t&&e.NdJ("scroll",function(r){return i.onScroll(r)},!1,e.Jf7)},features:[e.qOj],decls:11,vars:9,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","policyGroupDetails",3,"parentTitle"],[1,"d-block","mt-2"],["expanded",""],[1,"page-title"],[3,"reportId","paramsList","onSubmit"],["class","form-card policy-group-rep",4,"ngIf"],[1,"form-card","policy-group-rep"],[1,"d-flex","justify-content-between"],["id","rpt_att_card",1,"container-fluid"],["rpt_att_card",""],[4,"ngIf"],["class","mtop-25",4,"ngIf"],["id","rpt-table","appScrollableHorizontal","",1,"table","rpt-table","mt-3","overflow-scroll","d-block"],[1,"thead-light"],["id","fixed-header"],[4,"ngFor","ngForOf"],[3,"page","isCenterPaginator","hidePageSizeOption","onChangePage"],[1,"mtop-25"],[3,"displayedColumns"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"mat-accordion",2)(4,"mat-expansion-panel",3)(5,"mat-expansion-panel-header")(6,"mat-panel-title",4),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"app-reports-params",5),e.NdJ("onSubmit",function(r){return i.submit(r)}),e.qZA()()(),e.YNc(10,an,9,5,"mat-card",6)),2&t&&(e.xp6(1),e.s9C("parentTitle",e.lcZ(2,5,"orgManagementReports")),e.xp6(6),e.hij(" ",e.lcZ(8,7,"filter_options")," "),e.xp6(2),e.Q6J("reportId",i.reportId)("paramsList",i.paramsList),e.xp6(1),e.Q6J("ngIf",i.submitted))},dependencies:[c.sg,c.O5,I.T,be.I,Ye.m,X.c,ye.n,m.a8,m.dn,m.n5,C.pp,C.ib,C.yz,C.yK,x.X$],styles:[".policy-group-rep[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:not(:first-of-type), .policy-group-rep[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:not(:first-of-type){width:20%}"]}),o})();var ze=s(93665),$e=s(38368),sn=s(33975);function ln(o,n){if(1&o&&(e.TgZ(0,"div",5),e._UZ(1,"app-split-table",6),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("displayedColumns",t.mandatoryColomns)("hasPaginator",!0)("disableSelectAll",!0)("isCenterPaginator",!0)}}function cn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-add-policy-group",7),e.NdJ("closeAfterUpdate",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.returnToView(a))}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("policyGroup",t.policyGroup)}}let pn=(()=>{class o extends y.U{constructor(t){super(),this.policyGroupService=t,this.isView=!0,this.isLoaded=!1,this.mandatoryColomns=["employee",sn.g.isSelectedColumnName]}ngOnInit(){this.policyGroupService.policyGroup$.pipe(this.cancelRequest()).subscribe(t=>{this.policyGroup=t,t&&(this.selectionCriteria=te.n$.find(i=>i.value==t?.groupingType).label,this.getDetailsList())})}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&this.policyGroupId>0&&this.getDetailsList()}getDetailsList(){this.showLoading(),this.policyGroupService.GetAllGroupingDetail(this.policyGroupId).subscribe(t=>{t.message.messageType==_.u.Success?(t.data.map(i=>i.employee=(0,d._f)(i.itemNameAR,i.itemNameEN)),this.dataSource=new u.by(t.data),t.data.map(i=>{i.fromDate=d.M6.mapDate(i.fromDate),i.toDate=d.M6.mapDate(i.toDate),i.isSelected=!0,i.isDisabled=!0}),this.isLoaded=!0):this.errorList(t?.message?.messages),this.hideLoading()})}returnToView(t){this.isView=!0,t&&this.getDetailsList()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Q.B))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-view-policy-grouping-table"]],inputs:{policyGroupId:"policyGroupId"},features:[e.qOj],decls:9,vars:3,consts:[[1,"title-no-margin"],["title","selectionCriteria",1,"d-inline-block"],[1,"babyBlue-color"],["class","mtop-30",4,"ngIf","ngIfElse"],["form",""],[1,"mtop-30"],[3,"isLoaded","dataSource","displayedColumns","hasPaginator","disableSelectAll","isCenterPaginator"],[3,"policyGroup","closeAfterUpdate"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e._uU(2," : "),e.TgZ(3,"span",2),e._uU(4),e.qZA()(),e.TgZ(5,"mat-card-content"),e.YNc(6,ln,2,6,"div",3),e.YNc(7,cn,1,1,"ng-template",null,4,e.W1O),e.qZA()),2&t){const a=e.MAs(8);e.xp6(4),e.hij(" ",i.selectionCriteria," "),e.xp6(2),e.Q6J("ngIf",i.isView)("ngIfElse",a)}},dependencies:[c.O5,I.T,F.M,m.dn,m.n5,he.S]}),o})();function dn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.isView=!1)}),e._UZ(1,"i",9),e.qZA()}}function un(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.isView=!0)}),e._UZ(1,"i",10),e.qZA()}}function mn(o,n){if(1&o&&(e.TgZ(0,"div",16),e._UZ(1,"app-view-data-row-item",17)(2,"app-view-data-row-item",18)(3,"app-view-data-row-item",19)(4,"app-view-data-row-item",20),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("value",null==t.policyGroup?null:t.policyGroup.ar_Name),e.xp6(1),e.Q6J("value",null==t.policyGroup?null:t.policyGroup.en_Name),e.xp6(1),e.Q6J("value",t.msgTranslate(null==t.policyGroup||null==t.policyGroup.core_PolicyGroup_Type?null:t.policyGroup.core_PolicyGroup_Type.ar_Name,null==t.policyGroup||null==t.policyGroup.core_PolicyGroup_Type?null:t.policyGroup.core_PolicyGroup_Type.en_Name)),e.xp6(1),e.Q6J("value",t.selectionCriteria)}}function _n(o,n){1&o&&e._UZ(0,"app-view-card-row-skeleton")}function gn(o,n){if(1&o&&(e.TgZ(0,"div",11),e.YNc(1,mn,5,4,"div",12),e.YNc(2,_n,1,0,"app-view-card-row-skeleton",13),e._UZ(3,"mat-divider",14),e.TgZ(4,"div",14),e._UZ(5,"app-view-policy-grouping-table",15),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isLoaded),e.xp6(1),e.Q6J("ngIf",!t.isLoaded),e.xp6(3),e.Q6J("policyGroupId",t.policyGroupId)}}function hn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-add-policy-group",21),e.NdJ("closeAfterUpdate",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.returnToView(a))}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("policyGroup",t.policyGroup)}}let fn=(()=>{class o extends y.U{constructor(t){super(),this.policyGroupService=t,this.isView=!0,this.isLoaded=!1}ngOnInit(){}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&this.policyGroupId>0&&this.getById()}getById(){this.isLoaded=!1,this.showLoading(),this.policyGroupService.getById(this.policyGroupId).subscribe(t=>{t.message.messageType==_.u.Success?(this.policyGroup=t.data[0],this.selectionCriteria=te.n$.find(i=>i.value==this.policyGroup.groupingType).label,this.policyGroupService.policyGroup$.next(t.data[0]),this.isLoaded=!0):this.errorList(t?.message?.messages),this.hideLoading()})}returnToView(t){this.isView=!0,t&&this.getById()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Q.B))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-view-policy-general"]],inputs:{policyGroupId:"policyGroupId"},features:[e.qOj],decls:12,vars:6,consts:[[1,"row"],[1,"col-12"],[1,"title-no-margin"],["title","generalInfo",1,"d-inline-block"],["mat-button","","class","float-right section-edit-btn pright-6 pleft-6 darkBlue",3,"click",4,"ngIf"],[1,"mt-2"],["class","mtop-30",4,"ngIf","ngIfElse"],["form",""],["mat-button","",1,"float-right","section-edit-btn","pright-6","pleft-6","darkBlue",3,"click"],[1,"fas","fa-pen","font-size-15"],[1,"ft-corner-up-left","font-size-18"],[1,"mtop-30"],["class","view-data-row-container",4,"ngIf"],[4,"ngIf"],[1,"mt-3"],[3,"policyGroupId"],[1,"view-data-row-container"],["label","ar_Name",1,"col-6","col-md-3","mbottom-20","p-0",3,"value"],["label","en_Name",1,"col-6","col-md-3","mbottom-20","p-0",3,"value"],["label","policyGroupType",1,"col-6","col-md-3","mbottom-20","p-0",3,"value"],["label","selectionCriteria",1,"col-6","col-md-3","mbottom-20","p-0",3,"value"],[3,"policyGroup","closeAfterUpdate"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-title",2),e._UZ(4,"page-title",3),e.YNc(5,dn,2,0,"button",4),e.YNc(6,un,2,0,"button",4),e.qZA(),e._UZ(7,"mat-divider",5),e.TgZ(8,"mat-card-content"),e.YNc(9,gn,6,3,"div",6),e.YNc(10,hn,1,1,"ng-template",null,7,e.W1O),e.qZA()()()()),2&t){const a=e.MAs(11);e.xp6(2),e.ekj("pb-0",i.isLoaded),e.xp6(3),e.Q6J("ngIf",i.isView),e.xp6(1),e.Q6J("ngIf",!i.isView),e.xp6(3),e.Q6J("ngIf",i.isView)("ngIfElse",a)}},dependencies:[c.O5,I.T,ze.l,$e.I,O.lW,m.a8,m.dn,m.n5,L.d,he.S,pn]}),o})();function yn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.changeView(a))}),e._UZ(1,"i",10),e.qZA()}}function bn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.changeView(a))}),e._UZ(1,"i",11),e.qZA()}}function vn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"app-permission-policy-details",12),e.NdJ("getPolicyDetails",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.getPolicyDetails())}),e.qZA()()}if(2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("isLoaded",t.isLoaded)("isView",t.isPermissionView)("policyId",t.policyGroupId)("value",t.permissionSetup_SelectedIds)("dataSource",t.permissionDataSource)}}function Cn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"app-vacations-policy-details",12),e.NdJ("getPolicyDetails",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.getPolicyDetails())}),e.qZA()()}if(2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("isLoaded",t.isLoaded)("isView",t.isVacationsView)("policyId",t.policyGroupId)("value",t.vacitionsIds)("dataSource",t.vacationDataSource)}}function Tn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"app-official-holidays-policy-details",12),e.NdJ("getPolicyDetails",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.getPolicyDetails())}),e.qZA()()}if(2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("isLoaded",t.isLoaded)("isView",t.isOfficialView)("policyId",t.policyGroupId)("value",t.officailHoliday_SelectedIds)("dataSource",t.officialHolidaysDataSource)}}function xn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"app-plan-policy-details",12),e.NdJ("getPolicyDetails",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.getPolicyDetails())}),e.qZA()()}if(2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("isLoaded",t.isLoaded)("isView",t.isPlansView)("policyId",t.policyGroupId)("value",t.plans_SelectedIds)("dataSource",t.planDataSource)}}function Dn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"app-penalty-policy-details",13),e.NdJ("getPolicyDetails",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.getPolicyDetails())}),e.qZA()()}if(2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("isLoaded",t.isLoaded)("isView",t.isPenalityView)("value",t.penalityReguration_SelectedId)("policyId",t.policyGroupId)("dataSource",t.penaltyDataSource)}}function Zn(o,n){if(1&o&&(e.TgZ(0,"mat-card",2)(1,"mat-card-title",3),e._UZ(2,"page-title",4),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"span",5),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.YNc(9,yn,2,0,"button",6),e.YNc(10,bn,2,0,"button",6),e.qZA(),e._UZ(11,"mat-divider",7),e.TgZ(12,"mat-card-content",8),e.YNc(13,vn,2,5,"div",0),e.YNc(14,Cn,2,5,"div",0),e.YNc(15,Tn,2,5,"div",0),e.YNc(16,xn,2,5,"div",0),e.YNc(17,Dn,2,5,"div",0),e.qZA()()),2&o){const t=n.$implicit,i=e.oxw(2);e.xp6(4),e.hij(" ",e.lcZ(5,9,"PolicyGroup")," : "),e.xp6(3),e.hij(" ",e.lcZ(8,11,t)," "),e.xp6(2),e.Q6J("ngIf",i.getView(t)),e.xp6(1),e.Q6J("ngIf",!i.getView(t)),e.xp6(3),e.Q6J("ngIf",t==i.collapseEnum.permission),e.xp6(1),e.Q6J("ngIf",t==i.collapseEnum.vacations),e.xp6(1),e.Q6J("ngIf",t==i.collapseEnum.officialHolidays),e.xp6(1),e.Q6J("ngIf",t==i.collapseEnum.plan),e.xp6(1),e.Q6J("ngIf",t==i.collapseEnum.penalty)}}function In(o,n){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Zn,18,13,"mat-card",1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.collapseList)}}function Sn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.isPayrollView=!1)}),e._UZ(1,"i",10),e.qZA()}}function wn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.isPayrollView=!0)}),e._UZ(1,"i",11),e.qZA()}}function An(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"mat-card")(2,"mat-card-title",3),e._UZ(3,"page-title",14),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"span",5),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.YNc(10,Sn,2,0,"button",6),e.YNc(11,wn,2,0,"button",6),e.qZA(),e._UZ(12,"mat-divider",7),e.TgZ(13,"mat-card-content")(14,"app-payroll-details",15),e.NdJ("getPolicyDetails",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.getPolicyDetails())}),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("title",t.policyGroupTypeName),e.xp6(2),e.hij(" ",e.lcZ(6,7,"PolicyGroup")," : "),e.xp6(3),e.hij(" ",e.lcZ(9,9,"payment")," "),e.xp6(2),e.Q6J("ngIf",t.isPayrollView),e.xp6(1),e.Q6J("ngIf",!t.isPayrollView),e.xp6(3),e.Q6J("isView",t.isPayrollView)("hideTitle",!t.isPayrollView)}}function Pn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.isSelfServiceView=!1)}),e._UZ(1,"i",10),e.qZA()}}function Jn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.isSelfServiceView=!0)}),e._UZ(1,"i",11),e.qZA()}}function Nn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"mat-card")(2,"mat-card-title",3),e._UZ(3,"page-title",14),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"span",5),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.YNc(10,Pn,2,0,"button",6),e.YNc(11,Jn,2,0,"button",6),e.qZA(),e._UZ(12,"mat-divider",7),e.TgZ(13,"mat-card-content")(14,"app-selfService-details",15),e.NdJ("getPolicyDetails",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.getPolicyDetails())}),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("title",t.policyGroupTypeName),e.xp6(2),e.hij(" ",e.lcZ(6,7,"PolicyGroup")," : "),e.xp6(3),e.hij(" ",e.lcZ(9,9,"objectTypes")," "),e.xp6(2),e.Q6J("ngIf",t.isSelfServiceView),e.xp6(1),e.Q6J("ngIf",!t.isSelfServiceView),e.xp6(3),e.Q6J("isView",t.isSelfServiceView)("hideTitle",!t.isSelfServiceView)}}let Ln=(()=>{class o extends y.U{constructor(t,i){super(),this.policyDetailsService=t,this.policyGroupService=i,this.PolicyGroupType=te.Sg,this.isPermissionView=!0,this.isVacationsView=!0,this.isOfficialView=!0,this.isPlansView=!0,this.isPenalityView=!0,this.isPayrollView=!0,this.isSelfServiceView=!0,this.collapseEnum=T,this.collapseList=[T.permission,T.officialHolidays,T.plan,T.vacations,T.penalty],this.policyGroupId=i.policyGroup$.getValue()?.id,this.policyGroupDetails=t.policyGroupDetails$.getValue()}ngOnInit(){this.policyGroupService.policyGroup$.pipe(this.cancelRequest()).subscribe(t=>{this.policyGroup=t,this.policyGroupId=t?.id??0,t&&(this.policyGroupTypeName=te.Sg.getValue(t.policyGroup_Type_ID),this.getPolicyDetails())}),this.policyDetailsService.policyGroupDetails$.pipe(this.cancelRequest()).subscribe(t=>{this.policyGroupDetails=t})}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&this.policyGroupId>0&&this.getPolicyDetails()}getPolicyDetails(){this.isLoaded=!1,this.policyDetailsService.getPolicyDetails(this.policyGroupId).pipe(this.cancelRequest()).subscribe(t=>{if(t.message.messageType==_.u.Success){const i=Ge(t.data);this.policyDetailsService.policyGroupDetails$.next(i),i&&(this.isLoaded=!0,this.permissionSetup_SelectedIds=i.permissionSetup_SelectedIds,this.permissionDataSource=new u.by(i.policyPermissionSetups),this.vacitionsIds=i.vacitionsIds,this.vacationDataSource=new u.by(i.policyVacations),this.officailHoliday_SelectedIds=i.officailHoliday_SelectedIds,this.officialHolidaysDataSource=new u.by(i.policyOfficialHolidaies),this.plans_SelectedIds=i.plans_SelectedIds,this.planDataSource=new u.by(i.policyPlans),this.penalityReguration_SelectedId=i.penalityReguration_SelectedId,this.penaltyDataSource=new u.by(i.penaltyRegulations)),this.isLoaded=!0}else this.errorList(t?.message?.messages)})}getView(t){return t==T.permission?this.isPermissionView:t==T.vacations?this.isVacationsView:t==T.officialHolidays?this.isOfficialView:t==T.plan?this.isPlansView:t==T.penalty?this.isPenalityView:void 0}changeView(t){return t==T.permission?(this.isPermissionView=!this.isPermissionView,this.isPermissionView):t==T.vacations?(this.isVacationsView=!this.isVacationsView,this.isVacationsView):t==T.officialHolidays?(this.isOfficialView=!this.isOfficialView,this.isOfficialView):t==T.plan?(this.isPlansView=!this.isPlansView,this.isPlansView):t==T.penalty?(this.isPenalityView=!this.isPenalityView,this.isPenalityView):void 0}ngOnDestroy(){this.policyDetailsService.policyGroupDetails$.next(null),this.policyGroupService.policyGroup$.next(null)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(j.P),e.Y36(Q.B))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-view-policy-details"]],inputs:{policyGroupId:"policyGroupId"},features:[e.qOj],decls:3,vars:3,consts:[[4,"ngIf"],["class","mb-3",4,"ngFor","ngForOf"],[1,"mb-3"],[1,"title-no-margin"],["title","attendance",1,"d-inline-block"],[1,"babyBlue-color"],["mat-button","","class","float-right section-edit-btn pright-6 pleft-6 darkBlue",3,"click",4,"ngIf"],[1,"mt-2"],[1,"mt-4"],["mat-button","",1,"float-right","section-edit-btn","pright-6","pleft-6","darkBlue",3,"click"],[1,"fas","fa-pen","font-size-15"],[1,"ft-corner-up-left","font-size-18"],[3,"isLoaded","isView","policyId","value","dataSource","getPolicyDetails"],[3,"isLoaded","isView","value","policyId","dataSource","getPolicyDetails"],[1,"d-inline-block",3,"title"],[3,"isView","hideTitle","getPolicyDetails"]],template:function(t,i){1&t&&(e.YNc(0,In,2,1,"div",0),e.YNc(1,An,15,11,"div",0),e.YNc(2,Nn,15,11,"div",0)),2&t&&(e.Q6J("ngIf",(null==i.policyGroup?null:i.policyGroup.policyGroup_Type_ID)==i.PolicyGroupType.Attendance),e.xp6(1),e.Q6J("ngIf",(null==i.policyGroup?null:i.policyGroup.policyGroup_Type_ID)==i.PolicyGroupType.Payroll),e.xp6(1),e.Q6J("ngIf",(null==i.policyGroup?null:i.policyGroup.policyGroup_Type_ID)==i.PolicyGroupType.SelfService))},dependencies:[c.sg,c.O5,I.T,O.lW,m.a8,m.dn,m.n5,L.d,je,Ve,Ee,qe,Qe,Me,Re,x.X$]}),o})(),On=(()=>{class o extends y.U{constructor(t){super(),this.policyGroupService=t,this.editAll=!1}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.policyGroupId=Number(t.id)??0}),this.policyGroupService.policyGroup$.pipe(this.cancelRequest()).subscribe(t=>{this.policyGroup=t})}editAllSections(){this.editAll=!this.editAll}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Q.B))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-view-policy-core"]],features:[e.qOj],decls:10,vars:15,consts:[[1,"title-no-margin","title-section","fixed-title",2,"box-shadow","none"],[3,"title","parentTitle","parentTitleLink","parentLinkParams"],[3,"url","params"],[1,"mtop-18"],[3,"policyGroupId"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.ALo(2,"translate"),e.ALo(3,"translate"),e._UZ(4,"app-add-new-btn",2)(5,"app-back-btn",2),e.qZA(),e.TgZ(6,"div",3),e._UZ(7,"app-view-policy-general",4),e.qZA(),e.TgZ(8,"div",3),e._UZ(9,"app-view-policy-details",4),e.qZA()),2&t&&(e.xp6(1),e.hYB("parentTitle","",e.lcZ(2,11,"orgManagement")," / ",e.lcZ(3,13,"PolicyGroup"),""),e.MGl("parentTitleLink","/org-management/",i.moduleId,"/policy-group"),e.Q6J("title",i.msgTranslate(null==i.policyGroup?null:i.policyGroup.ar_Name,null==i.policyGroup?null:i.policyGroup.en_Name))("parentLinkParams",i.pageParams),e.xp6(3),e.MGl("url","/org-management/",i.moduleId,"/policy-group/add"),e.Q6J("params",i.parentParam),e.xp6(1),e.MGl("url","/org-management/",i.moduleId,"/policy-group/index"),e.Q6J("params",i.pageParams),e.xp6(2),e.Q6J("policyGroupId",i.policyGroupId),e.xp6(2),e.Q6J("policyGroupId",i.policyGroupId))},dependencies:[ie.a,pe.J,I.T,m.n5,fn,Ln,x.X$]}),o})();var Ke=s(6314);const Gn=[{name:(0,d._f)("\u0643\u0648\u062f \u0627\u0644\u0648\u0638\u064a\u0641\u0629","Job Code"),id:"code",dataType:H.n.string},{name:(0,d._f)("\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0639\u0631\u0628\u064a","Arabic Name"),id:"ar_Name",dataType:H.n.string},{name:(0,d._f)("\u0627\u0644\u0627\u0633\u0645 \u0628\u0627\u0644\u0627\u0646\u062c\u0644\u064a\u0632\u064a","English Name"),id:"en_Name",dataType:H.n.string}];var We=s(92972),Un=s(84851);let jn=(()=>{class o extends y.U{constructor(){super(),this.onChange=new e.vpe}ngOnInit(){this.form=this.fb.group({name:[null],code:[null],jobIds:[null],jobFamilyIds:[null]}),this.currentFilter&&this.form.patchValue(this.currentFilter,{emitEvent:!1})}get formCtrls(){return this.form.controls}getConditionString(t){return[t.jobIds?(0,U.In)("id",t.jobIds):"",t.jobFamilyIds?(0,U.In)("job_Family_ID",t.jobFamilyIds):"",t.name?`${(0,U.yi)("ar_Name",t.name)} or ${(0,U.yi)("en_Name",t.name)}`:"",t.code?(0,U.hd)("code",t.code):""].filter(Boolean).join(" and ")}ngOnDestroy(){const t=this.getConditionString(this.form.value);this.onChange.emit({conditionString:t,groups:this.form.value})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["job-simple-search"]],inputs:{currentFilter:"currentFilter"},outputs:{onChange:"onChange"},features:[e.qOj],decls:10,vars:11,consts:[[3,"formGroup"],[1,"row"],[1,"col-md-6","col-lg-3","col-12"],[3,"control","filter","multi"],["label","name",3,"control","disabled"],["label","code",3,"control","disabled"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div",2),e._UZ(3,"app-job-title-dropdown",3),e.qZA(),e.TgZ(4,"div",2),e._UZ(5,"app-job-family-dropdown",3),e.qZA(),e.TgZ(6,"div",2),e._UZ(7,"app-input",4),e.qZA(),e.TgZ(8,"div",2),e._UZ(9,"app-input",5),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("control",i.formCtrls.jobIds)("filter",!0)("multi",!0),e.xp6(2),e.Q6J("control",i.formCtrls.jobFamilyIds)("filter",!0)("multi",!0),e.xp6(2),e.Q6J("control",i.formCtrls.name)("disabled",(null==i.formCtrls.jobIds.value?null:i.formCtrls.jobIds.value.length)>0),e.xp6(2),e.Q6J("control",i.formCtrls.code)("disabled",(null==i.formCtrls.jobIds.value?null:i.formCtrls.jobIds.value.length)>0))},dependencies:[Y.a,ge.W,Un.b,l._Y,l.JL,l.sg]}),o})();const En=["dialogTemplate"];function qn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-simple-advanced-search",7),e.NdJ("advancedResults",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.getAdvanced(a))}),e.ynx(1,8),e.TgZ(2,"job-simple-search",9),e.NdJ("onChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.getSimple(a))}),e.qZA(),e.BQk(),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("currentFilter",t.advancedGroups)("ope",t.advancedOpe)("AdvancedColumns",t.AdvancedColumns),e.xp6(2),e.Q6J("currentFilter",t.simpleGroups)}}let Qn=(()=>{class o extends y.U{constructor(t){super(),this.jobTitleService=t,this.mandatoryColomns=["Ser","id","code","en_Name","ar_Name","actions"],this.optionalColomns=["jobFamily"],this.isLoaded=!1,this.dialogRef=null,this.usingSimple=!1,this.usingAdvanced=!1}ngOnInit(){this.AdvancedColumns=Gn}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new u.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,i){let r;this.dataSource=new u.by(null),this.isLoaded=!1,this.removePageParams(),this.page.pageIndex=t,i&&(this.page.pageSize=i),r=this.usingSimple?this.simpleCondition:this.usingAdvanced?this.advancedCondition:null,this.jobTitleService.getList({PageNumber:t,pageSize:this.page.pageSize},r).pipe(this.cancelRequest()).subscribe(f=>{if(f.message.messageType==_.u.Success){if(0==f.data.length&&t>1)return void this.getList(this.prevPage);this.dataSource=new u.by((0,Ke.gc)(f.data)),this.isLoaded=!0,this.page.length=f.meta.totalItemCount,this.page.meta=f.meta}else this.errorList(f?.message?.messages)})}onDelete(t){let i=this.msgTranslate(t.ar_Name,t.en_Name);this.deleteDialog(i).subscribe(a=>{a&&this.delete(t)})}delete(t){this.showLoading(),this.jobTitleService.Delete(t.id).subscribe(i=>{i.message.messageType==_.u.Success?(this.deleteSuccessfullyMsg("jobRemoved"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(i?.message?.messages),this.hideLoading()})}globalFunctionActions(t){t.viewName==b.S.upload_job_profile&&this.openUploadDialog()}openUploadDialog(){this.dialogsService.uploadDownloadDialog({uploadPath:B.Z.upload_job_profile,downloadPath:B.Z.download_job_profile,name:"jobsProfile"},{}).afterClosed().subscribe(i=>{})}onChangeFilterDrop(t){t==V.U.simple?this.openSearchDialog(V.U.simple):t==V.U.advanced?this.openSearchDialog(V.U.advanced):(this.usingSimple=!1,this.usingAdvanced=!1,this.advancedGroups=null,this.simpleGroups=null,this.getList(this.firstPage))}getSimple(t){this.simpleCondition=t.conditionString,this.simpleGroups=t.groups}getAdvanced(t){this.advancedCondition=t.conditionString,this.advancedGroups=t.groups,this.advancedOpe=t.ope}openSearchDialog(t){this.dialogRef&&this.dialogRef.close(),this.dialogRef=this.dialogsService.addEditDialog(this.dialogTemplate,t,{width:"60%"}),this.dialogRef.afterClosed().pipe((0,Ce.q)(1)).subscribe(i=>{i?.isSimple?(this.usingSimple=!0,this.getList(this.firstPage,this.page.pageSize)):0==i?.isSimple?(this.usingAdvanced=!0,this.getList(this.firstPage,this.page.pageSize)):(this.usingSimple=!1,this.usingAdvanced=!1,this.resetDropdown=null,this.advancedGroups=null,this.simpleGroups=null,(this.simpleCondition||this.advancedCondition)&&this.getList(this.firstPage))})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(We._))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-jobs-profile-index"]],viewQuery:function(t,i){if(1&t&&e.Gf(En,5),2&t){let a;e.iGM(a=e.CRH())&&(i.dialogTemplate=a.first)}},features:[e.qOj],decls:9,vars:16,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","jobsProfile","parentTitle","orgManagement","TitleHasGlobalFunc","",3,"globalFunctions","action"],[1,"index-card"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","exportService","actions","showSearchDropdown","searchDropdownList","selectedValueInSearchDropdown","selectSearchItem","onChangePage","deleteRow"],["dialogTemplate",""],[3,"title"],[3,"serviceId","moduleId"],[3,"currentFilter","ope","AdvancedColumns","advancedResults"],[1,"simple"],[3,"currentFilter","onChange"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card-title",0)(1,"page-title",1),e.NdJ("action",function(r){return i.globalFunctionActions(r)}),e.qZA()(),e.TgZ(2,"mat-card",2)(3,"app-material-table",3),e.NdJ("selectSearchItem",function(r){return i.onChangeFilterDrop(r)})("onChangePage",function(r){return i.getList(r.pageIndex+1,r.pageSize)})("deleteRow",function(r){return i.onDelete(r)}),e.qZA()(),e.YNc(4,qn,3,4,"ng-template",null,4,e.W1O),e.TgZ(6,"side-helping-menu",5),e.ALo(7,"translate"),e._UZ(8,"app-dashboard-display",6),e.qZA()),2&t&&(e.xp6(1),e.Q6J("globalFunctions",i.globalFunctions),e.xp6(2),e.Q6J("isLoaded",i.isLoaded)("dataSource",i.dataSource)("mandatoryColomns",i.mandatoryColomns)("optionalColomns",i.optionalColomns)("page",i.page)("exportService",i.jobTitleService)("actions",i.rowFunctions)("showSearchDropdown",!0)("searchDropdownList",i.simpleAdvancedSearch)("selectedValueInSearchDropdown",i.resetDropdown),e.xp6(3),e.s9C("title",e.lcZ(7,14,"Dashboard")),e.xp6(2),e.Q6J("serviceId",i.getCurrentServiceId())("moduleId",i.moduleId))},dependencies:[K.I,I.T,le.c,ce.b,Te.c,ne.X,m.a8,m.n5,jn,x.X$]}),o})();var Mn=s(91696),Rn=s(74734);let Vn=(()=>{class o extends oe.K{constructor(){super()}create(t){return this.post("Recruitment/RecTemplate/AddTemplateForJob",t)}update(t){return this.post("Recruitment/RecTemplate/EditTemplateForJob",t)}getAllByJobTitleId(t){return this.get("Recruitment/RecTemplate/GetAllTemplateActivityJob",{params:{$filter:`JobTitle_ID eq ${t}`}})}updateActivity(t){return this.post("Recruitment/ActivitySetup/EditX",t)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var Fn=s(12613),kn=s(64514);function Bn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.isView=!1)}),e._UZ(1,"i",8),e.qZA()}}function Yn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",7),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.returnToView())}),e._UZ(1,"i",9),e.qZA()}}function Hn(o,n){if(1&o&&(e.ynx(0),e._UZ(1,"app-view-data-row-item",22),e.ALo(2,"translate"),e.BQk()),2&o){const t=n.index,i=e.oxw(3);e.xp6(1),e.hYB("label","",e.lcZ(2,4,"responsible")," ",t+1,""),e.Q6J("value",(null==i.responsibles?null:i.responsibles.length)>=t+1?i.msgTranslate(i.responsibles[t].ar_Name,i.responsibles[t].en_Name):null)("displayWarning",!0)}}const Xe=function(){return[]};function zn(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"div",12),e._UZ(2,"app-view-data-row-item",13)(3,"app-view-data-row-item",14)(4,"app-view-data-row-item",15),e.YNc(5,Hn,3,6,"ng-container",16),e._UZ(6,"app-view-data-row-item",17)(7,"app-view-data-row-item",18)(8,"app-view-data-row-item",19)(9,"app-view-data-row-item",20)(10,"app-view-data-row-item",21),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("value",t.msgTranslate(null==t.activity||null==t.activity.rec_Activity?null:t.activity.rec_Activity.ar_Name,null==t.activity||null==t.activity.rec_Activity?null:t.activity.rec_Activity.en_Name)),e.xp6(1),e.Q6J("value",t.msgTranslate(null==t.activity||null==t.activity.rec_Activity||null==t.activity.rec_Activity.rec_ActivityType?null:t.activity.rec_Activity.rec_ActivityType.ar_Name,null==t.activity||null==t.activity.rec_Activity||null==t.activity.rec_Activity.rec_ActivityType?null:t.activity.rec_Activity.rec_ActivityType.en_Name)),e.xp6(1),e.Q6J("value",1==(null==t.activity||null==t.activity.rec_Activity?null:t.activity.rec_Activity.numberOfResponible)?"individual":null==t.activity||null==t.activity.rec_Activity?null:t.activity.rec_Activity.numberOfResponible),e.xp6(1),e.Q6J("ngForOf",e.DdM(9,Xe).constructor(null==t.activity||null==t.activity.rec_Activity?null:t.activity.rec_Activity.numberOfResponible)),e.xp6(1),e.Q6J("value",null==t.activity||null==t.activity.rec_Activity?null:t.activity.rec_Activity.totalScore),e.xp6(1),e.Q6J("value",null==t.activity||null==t.activity.rec_Activity?null:t.activity.rec_Activity.scoreToPass),e.xp6(1),e.Q6J("value",null==t.activity||null==t.activity.rec_Activity?null:t.activity.rec_Activity.assets),e.xp6(1),e.Q6J("value",null==t.activity||null==t.activity.rec_Activity?null:t.activity.rec_Activity.description),e.xp6(1),e.Q6J("value",null==t.activity||null==t.activity.rec_Activity?null:t.activity.rec_Activity.notes)}}function $n(o,n){1&o&&e._UZ(0,"app-view-card-row-skeleton")}function Kn(o,n){if(1&o&&(e.TgZ(0,"div",10),e.YNc(1,zn,11,10,"ng-container",11),e.YNc(2,$n,1,0,"app-view-card-row-skeleton",11),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isLoaded),e.xp6(1),e.Q6J("ngIf",!t.isLoaded)}}function Wn(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"div",25),e._UZ(2,"app-job-title-dropdown",41),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&o){const t=n.index,i=e.oxw(2);e.xp6(2),e.hYB("label","",e.lcZ(3,5,"responsible")," ",t+1,""),e.Q6J("control",i.formCtrls.activityType_ID)("submitted",i.submitted)("filter",!0)}}function Xn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"form",23)(1,"div",24)(2,"div",25),e._UZ(3,"app-input",26),e.qZA(),e.TgZ(4,"div",27),e._UZ(5,"app-activity-type-dropdown",28),e.qZA(),e.TgZ(6,"div",25)(7,"app-input",29),e.NdJ("keyUp",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.onChangeTotalScore(a))}),e.qZA()(),e.TgZ(8,"div",30)(9,"app-check-box",31),e.NdJ("onChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.onChangePassAnyWay(a))}),e.qZA()(),e.TgZ(10,"div",25),e._UZ(11,"app-input",32),e.qZA(),e.TgZ(12,"div",25),e._UZ(13,"app-input",33),e.qZA(),e.TgZ(14,"div",30)(15,"app-check-box",34),e.NdJ("onChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.onChangeIsIndividual(a))}),e.qZA()(),e.TgZ(16,"div",25),e._UZ(17,"app-input",35),e.qZA(),e.YNc(18,Wn,4,7,"ng-container",16),e.TgZ(19,"div",30)(20,"app-check-box",36),e.NdJ("onChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.onChangeNeedAssets(a))}),e.qZA()(),e.TgZ(21,"div",25),e._UZ(22,"app-input",37),e.qZA(),e.TgZ(23,"div",25),e._UZ(24,"app-input",38),e.qZA(),e.TgZ(25,"div",39)(26,"submit-btn",40),e.NdJ("onClick",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.submit())}),e.qZA()()()()}if(2&o){const t=e.oxw(),i=e.MAs(10);e.Q6J("formGroup",i),e.xp6(3),e.Q6J("control",t.formCtrls.en_Name)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.activityType_ID)("submitted",t.submitted)("filter",!0),e.xp6(2),e.Q6J("control",t.formCtrls.totalScore)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.pass_Anyway),e.xp6(2),e.Q6J("control",t.formCtrls.scoreToPass)("submitted",t.submitted)("disabled",t.formCtrls.pass_Anyway.value),e.xp6(2),e.Q6J("control",t.formCtrls.description)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.is_Individual),e.xp6(2),e.Q6J("control",t.formCtrls.numberOfResponible)("submitted",t.submitted)("disabled",t.formCtrls.is_Individual.value),e.xp6(1),e.Q6J("ngForOf",e.DdM(28,Xe).constructor(t.formCtrls.numberOfResponible.value)),e.xp6(2),e.Q6J("control",t.formCtrls.is_Assets),e.xp6(2),e.Q6J("control",t.formCtrls.assets)("submitted",t.submitted)("disabled",!t.formCtrls.is_Assets.value),e.xp6(2),e.Q6J("control",t.formCtrls.notes)("submitted",t.submitted),e.xp6(2),e.Q6J("id",t.formCtrls.id.value)("color",t.btn.darkBlue)("iconPositionBefore",!1)}}let ea=(()=>{class o extends y.U{constructor(t){super(),this.jobRecruitmentService=t,this.editAll=!1,this.isView=!0,this.isLoaded=!1,this.responsibles=[],this.submitted=!1}ngOnInit(){this.form=this.fb.group({id:[0,{nonNallable:!0}],en_Name:[null,[l.kI.required,W.w.whiteSpace]],activityType_ID:[null,[l.kI.required]],totalScore:[null,[l.kI.required,k.dN.gte(0)]],pass_Anyway:[!1],scoreToPass:[null,[k.dN.gte(0)]],description:[null],is_Individual:[!1],numberOfResponible:[null,[l.kI.required,k.dN.gte(1)]],is_Assets:[!1],assets:[null,[l.kI.required]],notes:[null]},{validator:[W.w.smallerThanOrEqualNumbers("scoreToPass","totalScore")]})}get formCtrls(){return this.form.controls}ngOnChanges(t){t?.editAll&&!t?.editAll?.firstChange&&(this.isView=!1),t.activity&&(this.activity?(this.activityToEdit(),this.isLoaded=!0):this.isLoaded=!1)}returnToView(){this.isView=!0,this.activityToEdit()}activityToEdit(){this.form.patchValue(this.activity.rec_Activity),this.formCtrls.pass_Anyway.setValue(!this.activity.rec_Activity?.scoreToPass),this.formCtrls.is_Individual.setValue(1==this.activity.rec_Activity?.numberOfResponible),this.formCtrls.is_Assets.setValue(!!this.activity.rec_Activity?.assets)}submit(){this.submitted=!0,this.form.valid&&this.update({Rec_Activity:{template_ID:this.activity?.rec_Activity?.template_ID,id:this.form.value.id,ar_Name:this.formCtrls.en_Name.value,en_Name:this.formCtrls.en_Name.value,activityType_ID:this.formCtrls.activityType_ID.value,totalScore:this.formCtrls.totalScore.value,scoreToPass:this.formCtrls.scoreToPass.value,description:this.formCtrls.description.value,numberOfResponible:this.formCtrls.numberOfResponible.value,assets:this.formCtrls.assets.value,notes:this.formCtrls.notes.value},I_Core_Job_Title_Rec_Activity:{Activity_ID:this.form.value.id,Resp_JobTitleID1:400}})}update(t){this.showLoading(),this.jobRecruitmentService.updateActivity(t).subscribe(i=>{i?.message?.messageType==_.u.Success?(this.updateSuccessfullyMsg("jobActivityUpdated"),this.returnToView()):this.errorList(i?.message?.messages),this.hideLoading()})}onChangeTotalScore(t){this.formCtrls.scoreToPass.setValidators(t?[l.kI.required,k.dN.gte(0)]:[k.dN.gte(0)]),this.formCtrls.scoreToPass.updateValueAndValidity()}onChangePassAnyWay(t){t?(this.form.clearValidators(),this.formCtrls.scoreToPass.setValue(null)):this.form.setValidators([W.w.smallerThanOrEqualNumbers("scoreToPass","totalScore")]),this.formCtrls.totalScore.updateValueAndValidity()}onChangeIsIndividual(t){t?this.formCtrls.numberOfResponible.setValue(1):this.formCtrls.numberOfResponible.reset()}onChangeNeedAssets(t){t?this.formCtrls.assets.setValidators([l.kI.required,W.w.whiteSpace]):(this.formCtrls.assets.setValue(null),this.formCtrls.assets.clearValidators()),this.formCtrls.assets.updateValueAndValidity()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Vn))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-job-rec-activity-view-general-info"]],inputs:{editAll:"editAll",activity:"activity"},features:[e.qOj,e.TTD],decls:11,vars:4,consts:[["container",""],[1,"title-no-margin"],["title","generalInfo",1,"stepper-section-title"],["mat-button","","class","float-right section-edit-btn pright-6 pleft-6 darkBlue",3,"click",4,"ngIf"],[1,"mt-2"],["class","mtop-30",4,"ngIf","ngIfElse"],["form",""],["mat-button","",1,"float-right","section-edit-btn","pright-6","pleft-6","darkBlue",3,"click"],[1,"fas","fa-pen","font-size-15"],[1,"ft-corner-up-left","font-size-18"],[1,"mtop-30"],[4,"ngIf"],[1,"view-data-row-container"],["label","activity",1,"w-md-20","mbottom-20","p-0",3,"value"],["label","activityType",1,"w-md-20","mbottom-20","p-0",3,"value"],["label","responsibility",1,"w-md-20","mbottom-20","p-0",3,"value"],[4,"ngFor","ngForOf"],["label","totalScore",1,"w-md-20","mbottom-20","p-0",3,"value"],["label","scoreToPass",1,"w-md-20","mbottom-20","p-0",3,"value"],["label","assets",1,"w-md-20","mbottom-20","p-0",3,"value"],["label","description",1,"w-md-20","mbottom-20","p-0","flex-grow-1",3,"value"],["label","notes",1,"col-12","mbottom-20","p-0",3,"value"],[1,"w-md-20","mbottom-20","p-0",3,"label","value","displayWarning"],[3,"formGroup"],[1,"row","mtop-40"],[1,"col-md-4","col-lg-3","col-12"],["label","activityName",3,"control","submitted"],[1,"col-md-4","col-lg-3","col-12","mb-2"],["label","type",3,"control","submitted","filter"],["label","totalScore","type","number",3,"control","submitted","keyUp"],[1,"col-md-4","col-lg-3","col-12","check-box-container"],["label","passAnyWay","labelPosition","before","styleClass","w-100",3,"control","onChange"],["label","scoreToPass","type","number",3,"control","submitted","disabled"],["label","description",3,"control","submitted"],["label","individualEvaluatedByOneResponsible","labelPosition","before","styleClass","w-100",3,"control","onChange"],["label","noOfResponsible","type","number",3,"control","submitted","disabled"],["label","needAssets","labelPosition","before","styleClass","w-100",3,"control","onChange"],["label","assets",3,"control","submitted","disabled"],["label","notes",3,"control","submitted"],[1,"col"],["icon","pi pi-plus-circle","styleClass","btn-block mt-1 float-right",3,"id","color","iconPositionBefore","onClick"],[3,"control","submitted","filter","label"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-card",null,0)(2,"mat-card-title",1),e._UZ(3,"page-title",2),e.YNc(4,Bn,2,0,"button",3),e.YNc(5,Yn,2,0,"button",3),e.qZA(),e._UZ(6,"mat-divider",4),e.TgZ(7,"mat-card-content"),e.YNc(8,Kn,3,2,"div",5),e.YNc(9,Xn,27,29,"ng-template",null,6,e.W1O),e.qZA()()),2&t){const a=e.MAs(10);e.xp6(4),e.Q6J("ngIf",i.isView),e.xp6(1),e.Q6J("ngIf",!i.isView),e.xp6(3),e.Q6J("ngIf",i.isView)("ngIfElse",a)}},dependencies:[c.sg,c.O5,Y.a,Fn.u,N.p,I.T,ze.l,$e.I,O.lW,m.a8,m.dn,m.n5,L.d,ge.W,kn.e,l._Y,l.JL,l.sg,x.X$]}),o})(),ta=(()=>{class o extends oe.K{constructor(){super()}create(t){return this.post("Recruitment/ActivitySetup/AssignCompetenceToActivity",t)}update(t){return this.post("Recruitment/ActivitySetup/EditCompetenceToActivity",t)}getAll(t,i){return this.get("OrgManagement/JobTitle/GetJobTitleActivityCompetence",{params:{jobTitleId:t,activityId:i}})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var ia=s(56709),et=s(96308),oa=s(25047);function na(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.isView=!1)}),e._UZ(1,"i",10),e.qZA()}}function aa(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.isView=!0)}),e._UZ(1,"i",11),e.qZA()}}function ra(o,n){1&o&&(e.TgZ(0,"th",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"competence")," "))}function sa(o,n){if(1&o&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.competence," ")}}function la(o,n){1&o&&(e.TgZ(0,"th",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"level")," "))}function ca(o,n){if(1&o&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.level," ")}}function pa(o,n){1&o&&(e.TgZ(0,"th",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"jobProfile")," "))}function da(o,n){if(1&o&&(e.TgZ(0,"td",28),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.xp6(1),e.hij(" ",t.jobProfile," ")}}function ua(o,n){1&o&&(e.TgZ(0,"th",27),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"score")," "))}function ma(o,n){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.score," ")}}function _a(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",32)(1,"span",33)(2,"p-inputNumber",34),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw().$implicit;return e.KtG(r.score=a)}),e.qZA()()()}if(2&o){const t=e.oxw().$implicit,i=e.oxw(2);e.Q6J("dir",i.languageService.isArabic?"rtl":"ltr"),e.xp6(2),e.MGl("styleClass","w-100 ",t.isSelected?"":"bg-disabled",""),e.Q6J("step",1)("ngModel",t.score)("showButtons",!0)("min",0)}}function ga(o,n){if(1&o&&(e.TgZ(0,"td",29),e.YNc(1,ma,2,1,"ng-container",30),e.YNc(2,_a,3,6,"ng-template",null,31,e.W1O),e.qZA()),2&o){const t=e.MAs(3),i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.isView)("ngIfElse",t)}}function ha(o,n){1&o&&(e.TgZ(0,"th",35),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"selection")," "))}function fa(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"td",28)(1,"mat-checkbox",36),e.NdJ("ngModelChange",function(a){const f=e.CHM(t).$implicit;return e.KtG(f.isSelected=a)})("change",function(){const a=e.CHM(t),r=a.$implicit,f=a.index,M=e.oxw(2);return e.KtG(M.changeCheckbox(r,f))}),e.qZA()()}if(2&o){const t=n.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("disabled",i.isView)("ngModel",t.isSelected)}}function ya(o,n){1&o&&e._UZ(0,"tr",37)}function ba(o,n){1&o&&e._UZ(0,"tr",38)}function va(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"mat-card-actions",39)(1,"submit-btn",40),e.NdJ("onClick",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.submit())}),e.qZA()()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("color",t.btn.darkBlue)}}function Ca(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"mat-card-content",12)(2,"div",13)(3,"table",14),e.ynx(4,15),e.YNc(5,ra,3,3,"th",16),e.YNc(6,sa,2,1,"td",17),e.BQk(),e.ynx(7,18),e.YNc(8,la,3,3,"th",16),e.YNc(9,ca,2,1,"td",17),e.BQk(),e.ynx(10,19),e.YNc(11,pa,3,3,"th",16),e.YNc(12,da,2,1,"td",17),e.BQk(),e.ynx(13,20),e.YNc(14,ua,3,3,"th",16),e.YNc(15,ga,4,2,"td",21),e.BQk(),e.ynx(16,22),e.YNc(17,ha,3,3,"th",23),e.YNc(18,fa,2,2,"td",17),e.BQk(),e.YNc(19,ya,1,0,"tr",24),e.YNc(20,ba,1,0,"tr",25),e.qZA()()(),e.YNc(21,va,2,1,"mat-card-actions",26),e.BQk()),2&o){const t=e.oxw();e.xp6(3),e.Q6J("dataSource",t.isView?t.dataSourceSelected:t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("ngIf",!t.isView)}}function Ta(o,n){if(1&o&&(e.TgZ(0,"div",41),e._UZ(1,"div",42)(2,"img",43)(3,"br"),e._uU(4),e.ALo(5,"translate"),e.qZA()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("src",t.assets.empty,e.LSH),e.xp6(2),e.hij(" ",e.lcZ(5,2,"emptytable")," ")}}function xa(o,n){if(1&o&&(e.TgZ(0,"div",44),e._UZ(1,"app-table-skeleton",45),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("displayedColumns",t.displayedColumns)}}let Da=(()=>{class o extends y.U{constructor(t){super(),this.jobRecCompetenceService=t,this.editAll=!1,this.jobId=0,this.activityId=0,this.isView=!0,this.displayedColumns=["competence","level","jobProfile","score","isSelected"],this.isLoaded=!1}ngOnChanges(t){t?.editAll&&!t?.editAll?.firstChange&&(this.isView=!1)}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new u.by(null)),this.dataSourceSelected?.data?.length>0&&(this.dataSourceSelected=new u.by(null)),this.checkNoBusinessOrCompany()&&this.getAll()}ngOnInit(){}getAll(){this.dataSource=new u.by(null),this.dataSourceSelected=new u.by(null),this.isLoaded=!1,this.jobRecCompetenceService.getAll(this.jobId,this.activityId).pipe(this.cancelRequest()).subscribe(t=>{if(t.message.messageType==_.u.Success){let i=(0,Ke.gP)(t.data,this.jobName);i.sort((a,r)=>Number(r.isSelected)-Number(a.isSelected)),this.dataSource=new u.by(i),this.dataSourceSelected=new u.by(i.filter(a=>a.isSelected)),this.isLoaded=!0}else this.errorList(t?.message?.messages)})}changeCheckbox(t,i){t.isSelected||(this.dataSource.data[i].score=0)}submit(){let t=this.dataSource.data.filter(i=>i.isSelected);if(console.log(t),t.length>0){const i=[];t.forEach(a=>{i.push({Activity_ID:this.activityId,Competence_Details_ID:a.competence_Details_ID,Score:a.score,EvalScore:a.score})})}else this.warning("selectAtLeastOneCompetence")}update(t){this.showLoading(),this.jobRecCompetenceService.update(t).subscribe(i=>{i?.message?.messageType==_.u.Success?(this.updateSuccessfullyMsg("jobRecCompetencesUpdated"),this.isView=!0,this.getAll()):this.errorList(i?.message?.messages),this.hideLoading()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ta))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-job-rec-activity-view-competences"]],inputs:{editAll:"editAll",jobId:"jobId",activityId:"activityId",jobName:"jobName"},features:[e.qOj,e.TTD],decls:10,vars:5,consts:[[1,"job-rec-competence"],["container",""],[1,"title-no-margin"],["title","competences",1,"stepper-section-title"],["mat-button","","class","float-right section-edit-btn pright-6 pleft-6 darkBlue",3,"click",4,"ngIf"],[1,"mt-2"],[4,"ngIf"],["class","text-center mtop-30 mbottom-30",4,"ngIf"],["class","mtop-25",4,"ngIf"],["mat-button","",1,"float-right","section-edit-btn","pright-6","pleft-6","darkBlue",3,"click"],[1,"fas","fa-pen","font-size-15"],[1,"ft-corner-up-left","font-size-18"],[1,"table-in-forms","table-fit","mtop-40"],["appScrollableHorizontal","",1,"mat-elevation-z8","f-w","table-container"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","competence"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","level"],["matColumnDef","jobProfile"],["matColumnDef","score"],["mat-cell","","style","padding: 15px 20px !important",4,"matCellDef"],["matColumnDef","isSelected"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["align","end",4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-cell","",2,"padding","15px 20px !important"],[4,"ngIf","ngIfElse"],["scoreInput",""],[3,"dir"],[1,"d-block","inputNumber-box","mt-1"],["buttonLayout","horizontal","spinnerMode","horizontal","incrementButtonIcon","pi pi-plus","decrementButtonIcon","pi pi-minus",3,"step","ngModel","styleClass","showButtons","min","ngModelChange"],["mat-header-cell",""],["color","primary",1,"td-checkbox",3,"disabled","ngModel","ngModelChange","change"],["mat-header-row",""],["mat-row",""],["align","end"],["styleClass","btn-block mt-1 float-right","label","save",3,"color","onClick"],[1,"text-center","mtop-30","mbottom-30"],[1,"clearfix"],[3,"src"],[1,"mtop-25"],[3,"displayedColumns"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card",0,1)(2,"mat-card-title",2),e._UZ(3,"page-title",3),e.YNc(4,na,2,0,"button",4),e.YNc(5,aa,2,0,"button",4),e.qZA(),e._UZ(6,"mat-divider",5),e.YNc(7,Ca,22,5,"ng-container",6),e.YNc(8,Ta,6,4,"div",7),e.YNc(9,xa,2,1,"div",8),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngIf",i.isView),e.xp6(1),e.Q6J("ngIf",!i.isView),e.xp6(2),e.Q6J("ngIf",i.isLoaded&&(i.isView?(null==i.dataSourceSelected?null:i.dataSourceSelected.data.length)>0:(null==i.dataSource?null:i.dataSource.data.length)>0)),e.xp6(1),e.Q6J("ngIf",(i.isView?0==(null==i.dataSourceSelected||null==i.dataSourceSelected.data?null:i.dataSourceSelected.data.length):0==(null==i.dataSource||null==i.dataSource.data?null:i.dataSource.data.length))&&i.isLoaded||(i.isView?!i.dataSourceSelected:!i.dataSource)&&i.isLoaded),e.xp6(1),e.Q6J("ngIf",!i.isLoaded))},dependencies:[c.O5,N.p,I.T,be.I,X.c,O.lW,Ae.Lv,m.a8,m.dn,m.n5,m.hq,L.d,ia.oG,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,et.YE,et.nU,l.JJ,oa.Rn,l.On,x.X$],styles:['.job-rec-competence .table-in-forms .table-container td.mat-cell{padding:15px 6px 15px 20px!important;color:#454545}  .job-rec-competence .mat-cell.mat-column-isSelected{text-align:center!important}  .job-rec-competence .mat-cell.mat-column-score{padding:15px 20px!important}  .job-rec-competence .mat-sort-header-container{display:flex;justify-content:space-between}  .job-rec-competence .mat-sort-header-arrow{opacity:1!important}  .job-rec-competence .mat-sort-header-arrow[style]{transform:none!important}  .job-rec-competence .mat-sort-header-arrow[style] .mat-sort-header-stem{display:none}  .job-rec-competence .mat-sort-header-arrow[style] .mat-sort-header-indicator{transform:none!important;color:#c1c1c1!important;font-size:18px;font-weight:600!important;top:5px}  .job-rec-competence .mat-sort-header-arrow[style] .mat-sort-header-indicator .mat-sort-header-pointer-left,   .job-rec-competence .mat-sort-header-arrow[style] .mat-sort-header-indicator .mat-sort-header-pointer-right,   .job-rec-competence .mat-sort-header-arrow[style] .mat-sort-header-indicator .mat-sort-header-pointer-middle{display:none}  .job-rec-competence .mat-sort-header-arrow[style] .mat-sort-header-indicator:before{font-family:"Font Awesome 5 Free";position:absolute;content:"\\f078";top:-3px;font-size:11px}  .job-rec-competence .mat-sort-header-arrow[style] .mat-sort-header-indicator:after{font-family:"Font Awesome 5 Free";position:absolute;content:"\\f077";top:-12px;font-size:11px}  .job-rec-competence [aria-sort=ascending]   .mat-sort-header-arrow .mat-sort-header-indicator:after{color:#595454!important;height:13px;overflow:hidden}  .job-rec-competence [aria-sort=descending]   .mat-sort-header-arrow .mat-sort-header-indicator:before{color:#595454!important}  .job-rec-competence [aria-sort=descending]   .mat-sort-header-arrow .mat-sort-header-indicator:after{height:13px;overflow:hidden}  .job-rec-competence .inputNumber-box p-inputnumber{border-radius:10px!important}  .job-rec-competence .inputNumber-box p-inputnumber .p-inputnumber-button{background-color:inherit;color:#83898c;padding:5px 7px;width:auto}  .job-rec-competence .inputNumber-box p-inputnumber .p-inputnumber-button span{font-size:9px;font-weight:700}  .job-rec-competence .inputNumber-box p-inputnumber input{text-align:center;font-size:14px;padding:0;width:35px}  .job-rec-competence .inputNumber-box .bg-disabled input{opacity:.6}']}),o})();const Ia=[{path:"org-structure",data:{view:b.S.org_structure},children:[{path:"",redirectTo:"index",pathMatch:se.U.full},{path:"index",component:pt,data:{view:b.S.org_structure_index},canActivate:[w.r]},{path:"add",component:Le,data:{view:b.S.add_org_structure},canActivate:[w.r]},{path:"edit/:orgStructureId",component:Le,data:{view:b.S.add_org_structure},canActivate:[w.r]},{path:"details/:orgStructureId",component:Gi,data:{view:b.S.org_structure_details},canActivate:[w.r]},{path:"kpis",component:ji.i,data:{view:b.S.org_kpis},canActivate:[w.r]}]},{path:"job-profile",data:{view:b.S.job_profile},children:[{path:"",redirectTo:"index",pathMatch:se.U.full},{path:"index",component:Qn,data:{view:b.S.job_profile_index},canActivate:[w.r]},{path:"add",component:Oe.g,data:{view:b.S.add_job_profile},canActivate:[w.r]},{path:"edit/:jobId",component:Oe.g,data:{view:b.S.add_job_profile},canActivate:[w.r]},{path:"recruitment/:jobId/:activityId",component:(()=>{class o extends y.U{constructor(t,i){super(),this.jobTitleService=t,this.templateActivitiesService=i,this.editAll=!1,this.backParams={...this.pageParams,parentView:b.S.job_profile_index},this.activatedRoute.params.subscribe(a=>{this.jobId=Number(a.jobId??0),this.activityId=Number(a.activityId??0)}),this.jobId>0&&this.GetJobById(),this.activityId>0&&this.GetActivityById()}ngOnInit(){}editAllSections(){this.editAll=!this.editAll}GetJobById(){this.showLoading(),this.jobTitleService.getById(this.jobId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==_.u.Success?this.jobTitle=t.data[0]:this.errorList(t?.message?.messages),this.hideLoading()})}GetActivityById(){this.showLoading(),this.templateActivitiesService.getAll(null,this.activityId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==_.u.Success?this.activity=t.data[0]:this.errorList(t?.message?.messages),this.hideLoading()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(We._),e.Y36(Mn.i))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-job-recruitment-activity-view-core"]],features:[e.qOj],decls:14,vars:23,consts:[[1,"title-no-margin","title-section","fixed-title","loan-view"],[1,"d-flex","justify-content-between","align-items-center"],[3,"title","parentTitle","parentTitleLink","parentLinkParams"],[3,"click"],[1,"mx-1",3,"url","params"],[1,"mtop-15"],[3,"editAll","activity"],[3,"editAll","jobId","activityId","jobName"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card-title",0)(1,"div",1)(2,"div"),e._UZ(3,"page-title",2),e.ALo(4,"translate"),e.ALo(5,"translate"),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div")(8,"edit-all-btn",3),e.NdJ("click",function(){return i.editAllSections()}),e.qZA(),e._UZ(9,"app-back-btn",4),e.qZA()()(),e.TgZ(10,"div",5),e._UZ(11,"app-job-rec-activity-view-general-info",6),e.qZA(),e.TgZ(12,"div",5),e._UZ(13,"app-job-rec-activity-view-competences",7),e.qZA()),2&t&&(e.xp6(3),e.FAE("parentTitle","",e.lcZ(4,17,"orgManagement")," / ",e.lcZ(5,19,"jobsProfile")," / ",i.msgTranslate(null==i.jobTitle?null:i.jobTitle.ar_Name,null==i.jobTitle?null:i.jobTitle.en_Name)," / ",e.lcZ(6,21,"recruitment"),""),e.hYB("parentTitleLink","/org-management/",i.moduleId,"/job-profile/edit/",i.jobId,""),e.Q6J("title",i.msgTranslate(null==i.activity||null==i.activity.rec_Activity?null:i.activity.rec_Activity.ar_Name,null==i.activity||null==i.activity.rec_Activity?null:i.activity.rec_Activity.en_Name))("parentLinkParams",i.backParams),e.xp6(6),e.hYB("url","/org-management/",i.moduleId,"/job-profile/edit/",i.jobId,""),e.Q6J("params",i.backParams),e.xp6(2),e.Q6J("editAll",i.editAll)("activity",i.activity),e.xp6(2),e.Q6J("editAll",i.editAll)("jobId",i.jobId)("activityId",i.activityId)("jobName",i.msgTranslate(null==i.jobTitle?null:i.jobTitle.ar_Name,null==i.jobTitle?null:i.jobTitle.en_Name)))},dependencies:[ie.a,I.T,Rn.Q,m.n5,ea,Da,x.X$]}),o})(),data:{view:b.S.job_profile_recruitment_activity},canActivate:[w.r]},{path:"assign-job-to-org",component:Ui.A,data:{view:b.S.assign_job_to_org},canActivate:[w.r]}]},{path:"policy-group",data:{view:b.S.policy_group},children:[{path:"",redirectTo:"index",pathMatch:se.U.full},{path:"index",component:Qi,data:{view:b.S.policy_group_index},canActivate:[w.r]},{path:"add",component:Fe,data:{view:b.S.add_policy_group},canActivate:[w.r]},{path:"edit/:id",component:Fe,data:{view:b.S.add_policy_group},canActivate:[w.r]},{path:"view/:id",component:On,data:{view:b.S.add_policy_group},canActivate:[w.r]}]},{path:"basic-location",data:{view:b.S.basic_location},children:[{path:"",redirectTo:"index",pathMatch:se.U.full},{path:"index",component:Eo,data:{view:b.S.basic_location_index},canActivate:[w.r]},{path:"add",component:Be,data:{view:b.S.add_basic_location},canActivate:[w.r]}]},{path:"reports",data:{view:b.S.org_management_reports},children:[{path:"jobs-profile",component:Mo,data:{view:b.S.jobs_profile_report},canActivate:[w.r]},{path:"job-description-form",component:Ko,data:{view:b.S.job_description_form_report},canActivate:[w.r]},{path:"policy-group-details",component:rn,data:{view:b.S.policy_group_details_report},canActivate:[w.r]}]}];let Sa=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.Bz.forChild(Ia),g.Bz]}),o})();var wa=s(92634),Aa=s(17634),Pa=s(62614);let Ja=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.ez,Sa,wa.m]}),o})();e.B6R(Aa.u,[c.O5,Y.a,K.I,N.p,m.dn,m.hq,C.pp,C.ib,C.yz,C.yK,Pa.y,l._Y,l.JL,l.sg],[x.X$])},79395:($,J,s)=>{s.d(J,{P:()=>d});var c=s(18521),g=s(591),u=s(94650);let d=(()=>{class D extends c.K{constructor(){super(),this.policyGroupDetails$=new g.X(null)}getPolicyDetails(v){return this.get("OrgManagement/PolicyGroup/GetPolicyGroupDetails",{params:{PolicyGroupId:v}})}getPolicyDetailsByDate(v,h){return this.get("OrgManagement/PolicyGroup/GetPolicyGroupDetailsByDate",{params:{PolicyGroupId:v,date:h}})}SavePolicyDetailsPermissions(v){return this.post("OrgManagement/PolicyGroup/SavePolicyGroupDetailsPermissions",v)}SavePolicyDetailsVacations(v){return this.post("OrgManagement/PolicyGroup/SavePolicyGroupDetailsVacations",v)}SavePolicyDetailsOfficialHolidays(v){return this.post("OrgManagement/PolicyGroup/SavePolicyGroupDetailsOfficialHolidaies",v)}SavePolicyDetailsPenalty(v){return this.post("OrgManagement/PolicyGroup/SavePolicyGroupDetailsPenalty",v)}SavePolicyDetailsPlans(v){return this.post("OrgManagement/PolicyGroup/SavePolicyGroupDetailsPlans",v)}SavePolicyDetailsPayments(v){return this.post("OrgManagement/PolicyGroup/SavePolicyGroupDetailsPayments",v)}SavePolicyDetailsTemplate(v){return this.post("OrgManagement/PolicyGroup/SavePolicyGroupDetailsRequestesTemplate",v)}}return D.\u0275fac=function(v){return new(v||D)},D.\u0275prov=u.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})()},89609:($,J,s)=>{s.d(J,{_:()=>D});var c=s(26315),g=s(18521),u=s(591),d=s(94650);let D=(()=>{class p extends g.K{constructor(){super(),this.updateWorkScheduleCard$=new u.X(!1),this.expand=`${c.db.Core_Person_Instance_Org}/${c.db.core_Person_Instance_Job_Title},\n    ${c.db.Core_Person_Instance_Org}.${c.db.core_Org},${c.db.Core_Person_Instance_Org}/${c.db.core_Person_Instance_Job_Title}.${c.db.Core_Job_Title},\n    ${c.db.core_Status}, ${c.db.core_Status_Properties}`}create(h){return this.post("Personnel/Employees/Create_EmployeeStatusPosition",h)}update(h){return this.post("Personnel/Employees/Edit_EmployeeStatusPosition",h)}appendJob(h){return this.post("Personnel/Employees/AppendJob",h)}assignOrgAndJob(h){return this.post("Personnel/Employees/AssignOrgAndJob",h)}getStatusPositionCard(h){return this.get("Personnel/Employees/Get_StatusPositionCard",{params:{Person_Instance_ID:h}})}getList(h,P){return this.get("Personnel/Employees/GetList_EmployeeStatusPosition",{params:{...P,$filter:`Person_Instance_ID  eq ${h}`,$expand:this.expand}})}getAll(h){return this.get("Personnel/Employees/GetAll_EmployeeStatusPosition",{params:{$filter:`Person_Instance_ID  eq ${h}`,$expand:this.expand}})}getAllCurrentJobsByEmployeeId(h){return this.get("personnel/Employees/GetAll_Current_Job_Emp",{params:{PerinsID:h}})}DeleteStatus(h){return this.delete("Personnel/Employees/Delete_ALL",{params:{employeeStatusID:h}})}DeleteJob(h,P){return this.delete("Personnel/Employees/Delete_JobOrg",{params:{employeeStatusID:h,employeeJobTitleID:P}})}close(h){return this.post("Personnel/Employees/Close_EmployeeStatusPosition",null,{params:h})}}return p.\u0275fac=function(h){return new(h||p)},p.\u0275prov=d.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},3710:($,J,s)=>{s.d(J,{r:()=>D});var c=s(94650),g=s(67579),u=s(24280),d=s(80458);let D=(()=>{class p{constructor(h,P){this.viewsService=h,this.router=P,this.loadingService=(0,c.f3M)(g.b),this.UserModules=this.viewsService.UserModules$.getValue(),this.loading=document.getElementById("page-loading")}canActivate(h,P){let A=h.data?.view;if(this.showLoading(),this.UserModules?.length>0){if(this.viewsService.isViewAllowed(A))return this.hideLoading(),!0;this.router.navigateByUrl("/auth/access-denied"),this.hideLoading()}else this.viewsService.UserModules$.subscribe(S=>{if(S?.length>0){if(this.viewsService.isViewAllowed(A))return this.hideLoading(),!0;this.router.navigateByUrl("/auth/access-denied"),this.hideLoading()}})}showLoading(){this.loading.style.display="block",this.loading.style.opacity="1",this.loading.style.zIndex="998"}hideLoading(){this.loading.style.display="none",this.loading.style.opacity="0",this.loading.style.zIndex="0"}}return p.\u0275fac=function(h){return new(h||p)(c.LFG(u.Z),c.LFG(d.F0))},p.\u0275prov=c.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},29341:($,J,s)=>{s.d(J,{Z:()=>c});let c=(()=>{class g{}return g.upload_kpi="UploadKPI/Upload",g.download_kpi="UploadKPI/Download",g.upload_Org="UploadOrg/Upload",g.download_Org="UploadOrg/Download",g.upload_job_profile="OrgManagement/UploadJobTitle/Upload",g.download_job_profile="OrgManagement/UploadJobTitle/Download",g.upload_org_structure="OrgManagement/UploadOrgStructure/Upload",g.download_org_structure="OrgManagement/UploadOrgStructure/Download",g.upload_org_kpi="OrgManagement/UploadOrgKpi/Upload",g.download_org_kpi="OrgManagement/UploadOrgKpi/Download",g.upload_mission="TimeAttendance/UploadMissionTrans/Upload",g.download_mission="TimeAttendance/UploadMissionTrans/Download",g.upload_register_fingerprint="TimeAttendance/UploadRegisterFinger/Upload",g.download_register_fingerprint="TimeAttendance/UploadRegisterFinger/Download",g.upload_Overtime_transaction="TimeAttendance/UploadOvertime/Upload",g.download_Overtime_transaction="TimeAttendance/UploadOvertime/Download",g.upload_penalty_transaction="TimeAttendance/UploadPenalityTrans/Upload",g.download_penalty_transaction="TimeAttendance/UploadPenalityTrans/Download",g.upload_permission_transaction="TimeAttendance/UploadPermission/Upload",g.download_permission_transaction="TimeAttendance/UploadPermission/Download",g.upload_vacation_transaction="TimeAttendance/UploadVacation/Upload",g.download_vacation_transaction="TimeAttendance/UploadVacation/Download",g.upload_plan_adjustment_transaction="TimeAttendance/UploadExceptionPlan/Upload",g.download_plan_adjustment_transaction="TimeAttendance/UploadExceptionPlan/Download",g.upload_employees="personnel/UploadEmployee/Upload",g.download_employees="personnel/UploadEmployee/Download",g})()},58350:($,J,s)=>{s.d(J,{$:()=>g});var c=s(94650);let g=(()=>{class u{constructor(){}static groupBy(D,p,v="key",h="List"){const P=D.reduce((A,S)=>(A[S[p]]?A[S[p]].push(S):A[S[p]]=[S],A),{});return Object.keys(P).map(A=>({[v]:A,[h]:P[A]}))}groupByPartOfProperty(D,p,v,h="key",P="List"){const A=D.reduce((S,R)=>{let _=R[p].trim().slice(0,v).toUpperCase();return S[_]?S[_].push(R):S[_]=[R],S},{});return Object.keys(A).map(S=>({[h]:S,[P]:A[S]}))}}return u.\u0275fac=function(D){return new(D||u)},u.\u0275prov=c.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},12574:($,J,s)=>{s.d(J,{$:()=>y});var c=s(24006),g=s(65938),u=s(15602),d=s(95751),D=s(78937),p=s(94650),v=s(77304),h=s(25273),P=s(857),A=s(57566),S=s(46896),R=s(26873),_=s(73546);let y=(()=>{class b extends d.U{constructor(l,e,q){super(),this.organizationsService=l,this.data=e,this.dialogRef=q,this.submitted=!1,this.removeFiles=!1,this.hasUpdate=!1}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],ar_name:[null,[c.kI.required,D.w.whiteSpace]],en_name:[null,[c.kI.required,D.w.whiteSpace]],code:[null,[c.kI.required,D.w.whiteSpace]],logo:[null]}),this.data.value?(this.formCtrls.ar_name.setValue(this.data.value),this.formCtrls.en_name.setValue(this.data.value)):this.data.data&&this.organizationToEdit(this.data.data)}get formCtrls(){return this.form.controls}submit(){if(this.submitted=!0,this.removeFiles=!1,this.form.valid){const l={ID:this.form.value.id,Ar_Name:this.form.value.ar_name,En_Name:this.form.value.en_name,code:this.form.value.code,logo:this.form.value.logo};0==l.ID?this.create(l):this.update(l)}}create(l){this.showLoading(),this.organizationsService.create(l).subscribe(e=>{e?.message?.messageType==u.u.Success?(this.hasUpdate=!0,this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newOrganizationAdded"),this.onCloseDialog(e.data.id)):this.errorList(e?.message?.messages),this.hideLoading()})}update(l){this.showLoading(),this.organizationsService.update(l).subscribe(e=>{e.message.messageType==u.u.Success?(this.hasUpdate=!0,this.updateSuccessfullyMsg("organizationUpdated","successfulEdit"),this.onCloseDialog()):this.errorList(e?.message?.messages),this.hideLoading()})}organizationToEdit(l){(this.formCtrls.id.value>0||this.formCtrls.id.value!=l.id)&&this.formCtrls.id.reset(),setTimeout(()=>{this.form.patchValue(l),this.formCtrls.ar_name.setValue(l.ar_Name),this.formCtrls.en_name.setValue(l.en_Name)},50)}clearForm(){this.form.reset({id:0}),this.submitted=!1,this.removeFiles=!0}onCloseDialog(l){this.dialogRef.close({hasUpdate:this.hasUpdate,newId:l})}}return b.\u0275fac=function(l){return new(l||b)(p.Y36(v.z),p.Y36(g.WI),p.Y36(g.so))},b.\u0275cmp=p.Xpm({type:b,selectors:[["app-add-organization"]],features:[p.qOj],decls:18,vars:15,consts:[["parentTitle","organization","addTitle","add","editTitle","update",3,"id"],[1,"row"],[1,"col-12"],[3,"formGroup"],["label","en_Name",3,"control","submitted"],["label","ar_Name",3,"control","submitted"],["label","code",3,"control","submitted"],["label","logo","accept","image/*",3,"control","multiple","isHexImg","removeFiles","isEdit","displayVertical"],["align","end"],[3,"click"],["addLabel","add",3,"id","onClick"]],template:function(l,e){1&l&&(p.TgZ(0,"mat-card-title"),p._UZ(1,"page-title",0),p.qZA(),p.TgZ(2,"mat-card-content")(3,"div",1)(4,"div",2)(5,"form",3)(6,"div",1)(7,"div",2),p._UZ(8,"app-input",4),p.qZA(),p.TgZ(9,"div",2),p._UZ(10,"app-input",5),p.qZA(),p.TgZ(11,"div",2),p._UZ(12,"app-input",6),p.qZA(),p.TgZ(13,"div",2),p._UZ(14,"primeng-file-upload",7),p.qZA()()()()()(),p.TgZ(15,"mat-card-actions",8)(16,"discard-dialog-btn",9),p.NdJ("click",function(){return e.onCloseDialog()}),p.qZA(),p.TgZ(17,"submit-btn",10),p.NdJ("onClick",function(){return e.submit()}),p.qZA()()),2&l&&(p.xp6(1),p.Q6J("id",e.formCtrls.id.value),p.xp6(4),p.Q6J("formGroup",e.form),p.xp6(3),p.Q6J("control",e.formCtrls.en_name)("submitted",e.submitted),p.xp6(2),p.Q6J("control",e.formCtrls.ar_name)("submitted",e.submitted),p.xp6(2),p.Q6J("control",e.formCtrls.code)("submitted",e.submitted),p.xp6(2),p.Q6J("control",e.formCtrls.logo)("multiple",!1)("isHexImg",!0)("removeFiles",e.removeFiles)("isEdit",e.formCtrls.id.value>0)("displayVertical",!0),p.xp6(3),p.Q6J("id",e.formCtrls.id.value))},dependencies:[h.a,P.J,A.p,S.T,R.E,_.dn,_.n5,_.hq,c._Y,c.JL,c.sg]}),b})()}}]);