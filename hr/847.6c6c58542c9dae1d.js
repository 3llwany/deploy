"use strict";(self.webpackChunkhr=self.webpackChunkhr||[]).push([[847],{73847:(me,A,l)=>{l.r(A),l.d(A,{PenaltyRegulationsSetupModule:()=>pe});var c=l(36895),V=l(80458),r=l(24006),u=l(30671),d=l(15602),y=l(58385),h=l(78937),g=l(43949),e=l(94650),b=l(18521),v=l(24850);let w=(()=>{class a extends b.K{constructor(){super()}create(t){return this.post("PenalitiesSetup/Create",t)}update(t){return this.post("PenalitiesSetup/Edit",t)}getList(t){return this.get("PenalitiesSetup/GetList",{params:t})}getAll(){return this.get("PenalitiesSetup/GetAll").pipe((0,v.U)(t=>(t.data.map(i=>{i.ar_Name=i.name,i.en_Name=i.name}),t)))}Delete(t){return this.delete("PenalitiesSetup/Delete",{params:{Id:t}})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var C=l(45471),T=l(56184),S=l(22289),I=l(53026),f=l(46896),p=l(73546),L=l(44850),_=l(86405);function G(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",12),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}let z=(()=>{class a extends y.d{constructor(t){super(),this.penaltiesService=t,this.submitted=!1,this.mandatoryColomns=["Ser","id","name","penalty_Value","actions"],this.isLoaded=!1,this.optionalColomns=[]}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],name:[null,[r.kI.required,h.w.whiteSpace]],penalty_Value:[null,[r.kI.required,g.dN.gte(0)]]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new u.by(null)),this.CheckNoBusinessOrCompany()&&this.getList(this.firstPage)}getList(t,i){this.page.pageIndex=t,i&&(this.page.pageSize=i);let s={PageNumber:t,pageSize:this.page.pageSize};this.showLoading(),this.penaltiesService.getList(s).subscribe(o=>{o.message.messageType==d.u.Success?(this.dataSource=new u.by(o.data),this.isLoaded=!0,this.page.length=o.meta.totalItemCount):this.errorList(o.message.messages),this.hideLoading()})}submit(){if(this.submitted=!0,this.form.valid){const t={ID:this.form.value.id,Name:this.form.value.name,Penalty_Value:this.form.value.penalty_Value};0==t.ID?this.create(t):this.update(t)}}create(t){this.showLoading(),this.penaltiesService.create(t).subscribe(i=>{i?.message?.messageType==d.u.Success?(this.clearForm(),this.getList(this.lastPage,this.page.pageSize),this.addSuccessfullyMsg(i?.message?.messageTypeName)):this.errorList(i.message.messages),this.hideLoading()})}update(t){this.showLoading(),this.penaltiesService.update(t).subscribe(i=>{i.message.messageType==d.u.Success?(this.clearForm(),this.getList(this.currentPage,this.page.pageSize),this.updateSuccessfullyMsg(i?.message?.messageTypeName)):this.errorList(i.message.messages),this.hideLoading()})}penaltyToEdit(t){this.form.patchValue(t)}onDelete(t){let i=this.msgTranslate(t.name);this.deleateDialog(i).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.penaltiesService.Delete(t.id).subscribe(i=>{i.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(i?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),t.id==this.formCtrls.id.value&&this.clearForm()):this.errorList(i.message.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(w))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-penalties"]],features:[e.qOj],decls:20,vars:14,consts:[[1,"row"],[1,"col-12"],["addTitle","penalties","editTitle","editPenalty",3,"id"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","name",3,"control","submitted"],["type","number","label","penalty_Value",3,"control","submitted"],["align","end"],[3,"id","onClick"],[3,"click",4,"ngIf"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","onChangePage","editRow","deleteRow"],[3,"click"]],template:function(t,i){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card")(4,"mat-card-title"),e._UZ(5,"page-title",2),e.qZA(),e.TgZ(6,"mat-card-content",3)(7,"div",0)(8,"div",1)(9,"form",4)(10,"div",0)(11,"div",5),e._UZ(12,"app-input",6),e.qZA(),e.TgZ(13,"div",5),e._UZ(14,"app-input",7),e.qZA()()()()()(),e.TgZ(15,"mat-card-actions",8)(16,"submit-btn",9),e.NdJ("onClick",function(){return i.submit()}),e.qZA(),e.YNc(17,G,1,0,"reset-form-btn",10),e.qZA(),e._UZ(18,"mat-divider"),e.TgZ(19,"app-material-table",11),e.NdJ("onChangePage",function(o){return i.getList(o.pageIndex+1,o.pageSize)})("editRow",function(o){return i.penaltyToEdit(o)})("deleteRow",function(o){return i.onDelete(o)}),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("id",i.formCtrls.id.value),e.xp6(4),e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("control",i.formCtrls.name)("submitted",i.submitted),e.xp6(2),e.Q6J("control",i.formCtrls.penalty_Value)("submitted",i.submitted),e.xp6(2),e.Q6J("id",i.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",i.formCtrls.id.value>0),e.xp6(2),e.Q6J("isLoaded",i.isLoaded)("dataSource",i.dataSource)("mandatoryColomns",i.mandatoryColomns)("optionalColomns",i.optionalColomns)("page",i.page)("actions",i.rowFunctions))},dependencies:[c.O5,C.a,T.I,S.J,I.p,f.T,p.a8,p.dn,p.n5,p.hq,L.d,_.Ro,r._Y,r.JL,r.sg]}),a})(),N=(()=>{class a extends b.K{constructor(){super()}create(t){return this.post("ViolationTypeSetup/Create",t)}update(t){return this.post("ViolationTypeSetup/Edit",t)}getList(t){return this.get("ViolationTypeSetup/GetList",{params:t})}getAll(){return this.get("ViolationTypeSetup/GetAll").pipe((0,v.U)(t=>(t.data.map(i=>{i.ar_Name=i.name,i.en_Name=i.name}),t)))}Delete(t){return this.delete("ViolationTypeSetup/Delete",{params:{Id:t}})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function O(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",11),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}let Y=(()=>{class a extends y.d{constructor(t){super(),this.violationTypesService=t,this.submitted=!1,this.mandatoryColomns=["Ser","id","name","actions"],this.isLoaded=!1,this.optionalColomns=[]}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],name:[null,[r.kI.required,h.w.whiteSpace]]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new u.by(null)),this.CheckNoBusinessOrCompany()&&this.getList(this.firstPage)}getList(t,i){this.page.pageIndex=t,i&&(this.page.pageSize=i);let s={PageNumber:t,pageSize:this.page.pageSize};this.showLoading(),this.violationTypesService.getList(s).subscribe(o=>{o.message.messageType==d.u.Success?(this.dataSource=new u.by(o.data),this.isLoaded=!0,this.page.length=o.meta.totalItemCount):this.errorList(o.message.messages),this.hideLoading()})}submit(){if(this.submitted=!0,this.form.valid){const t={ID:this.form.value.id,Name:this.form.value.name};0==t.ID?this.create(t):this.update(t)}}create(t){this.showLoading(),this.violationTypesService.create(t).subscribe(i=>{i?.message?.messageType==d.u.Success?(this.clearForm(),this.getList(this.lastPage,this.page.pageSize),this.addSuccessfullyMsg(i?.message?.messageTypeName)):this.errorList(i.message.messages),this.hideLoading()})}update(t){this.showLoading(),this.violationTypesService.update(t).subscribe(i=>{i.message.messageType==d.u.Success?(this.clearForm(),this.getList(this.currentPage,this.page.pageSize),this.updateSuccessfullyMsg(i?.message?.messageTypeName)):this.errorList(i.message.messages),this.hideLoading()})}violationTypeToEdit(t){this.form.patchValue(t)}onDelete(t){let i=this.msgTranslate(t.name);this.deleateDialog(i).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.violationTypesService.Delete(t.id).subscribe(i=>{i.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(i?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),t.id==this.formCtrls.id.value&&this.clearForm()):this.errorList(i.message.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(N))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-violation-types"]],features:[e.qOj],decls:18,vars:12,consts:[[1,"row"],[1,"col-12"],["addTitle","violationTypes","editTitle","editViolationType",3,"id"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","name",3,"control","submitted"],["align","end"],[3,"id","onClick"],[3,"click",4,"ngIf"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","onChangePage","editRow","deleteRow"],[3,"click"]],template:function(t,i){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card")(4,"mat-card-title"),e._UZ(5,"page-title",2),e.qZA(),e.TgZ(6,"mat-card-content",3)(7,"div",0)(8,"div",1)(9,"form",4)(10,"div",0)(11,"div",5),e._UZ(12,"app-input",6),e.qZA()()()()()(),e.TgZ(13,"mat-card-actions",7)(14,"submit-btn",8),e.NdJ("onClick",function(){return i.submit()}),e.qZA(),e.YNc(15,O,1,0,"reset-form-btn",9),e.qZA(),e._UZ(16,"mat-divider"),e.TgZ(17,"app-material-table",10),e.NdJ("onChangePage",function(o){return i.getList(o.pageIndex+1,o.pageSize)})("editRow",function(o){return i.violationTypeToEdit(o)})("deleteRow",function(o){return i.onDelete(o)}),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("id",i.formCtrls.id.value),e.xp6(4),e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("control",i.formCtrls.name)("submitted",i.submitted),e.xp6(2),e.Q6J("id",i.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",i.formCtrls.id.value>0),e.xp6(2),e.Q6J("isLoaded",i.isLoaded)("dataSource",i.dataSource)("mandatoryColomns",i.mandatoryColomns)("optionalColomns",i.optionalColomns)("page",i.page)("actions",i.rowFunctions))},dependencies:[c.O5,C.a,T.I,S.J,I.p,f.T,p.a8,p.dn,p.n5,p.hq,L.d,_.Ro,r._Y,r.JL,r.sg]}),a})(),D=(()=>{class a extends b.K{constructor(){super()}create(t){return this.post("PenaltyRegSetup/Create",t)}update(t){return this.post("PenaltyRegSetup/Edit",t)}getList(t){return this.get("PenaltyRegSetup/GetList",{params:t})}getAll(){return this.get("PenaltyRegSetup/GetAll")}getById(t){return this.get("PenaltyRegSetup/GetAll",{params:{$filter:`id eq ${t}`}})}Delete(t){return this.delete("PenaltyRegSetup/Delete",{params:{Id:t}})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),E=(()=>{class a extends y.d{constructor(t){super(),this.penaltyRegulationsService=t,this.mandatoryColomns=["Ser","id","name","actions"],this.isLoaded=!1,this.optionalColomns=[]}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new u.by(null)),this.CheckNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,i){this.removePageParams(),this.page.pageIndex=t,i&&(this.page.pageSize=i);let s={PageNumber:t,pageSize:this.page.pageSize};this.showLoading(),this.penaltyRegulationsService.getList(s).subscribe(o=>{if(o.message.messageType==d.u.Success){if(0==o.data.length&&t>1)return void this.getList(this.prevPage);this.dataSource=new u.by(o.data),this.isLoaded=!0,this.page.length=o.meta.totalItemCount}else this.errorList(o.message.messages);this.hideLoading()})}onDelete(t){let i=this.msgTranslate(t.name);this.deleateDialog(i).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.penaltyRegulationsService.Delete(t.id).subscribe(i=>{i.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(i?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(i.message.messages),this.hideLoading()})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(D))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-penalty-regulations-index"]],features:[e.qOj],decls:8,vars:7,consts:[[1,"row"],[1,"col-12"],["title","penaltyRegulations",3,"globalFunctions"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","onChangePage","deleteRow"]],template:function(t,i){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card")(4,"mat-card-title"),e._UZ(5,"page-title",2),e.qZA(),e._UZ(6,"mat-divider"),e.TgZ(7,"app-material-table",3),e.NdJ("onChangePage",function(o){return i.getList(o.pageIndex+1,o.pageSize)})("deleteRow",function(o){return i.onDelete(o)}),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("globalFunctions",i.globalFunctions),e.xp6(2),e.Q6J("isLoaded",i.isLoaded)("dataSource",i.dataSource)("mandatoryColomns",i.mandatoryColomns)("optionalColomns",i.optionalColomns)("page",i.page)("actions",i.rowFunctions))},dependencies:[T.I,f.T,p.a8,p.n5,L.d,_.Ro]}),a})();var J=l(65959),F=l(18825),Q=l(3848);let $=(()=>{class a extends b.K{constructor(){super()}create(t){return this.post("PenaltyRegSetup/Create_Penalty_Regulation_Details",t)}update(t){return this.post("PenaltyRegSetup/Edit_Penalty_Regulation_Details",t)}getAllByPenaltyRegulationId(t){return this.get("PenaltyRegSetup/GetAll_Penalty_Regulation_Details",{params:{Penalty_Regulation_ID:t}})}Delete(t){return this.delete("PenaltyRegSetup/Delete_Penalty_Regulation_Details",{params:t})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var m=l(21854);let R=(()=>{class a extends b.K{constructor(){super()}create(t){return this.post("ViolationSetup/Create",t)}update(t){return this.post("ViolationSetup/Edit",t)}getList(t){return this.get("ViolationSetup/GetList",{params:{...t,$expand:`${m.db.Att_Attendance_Element}.${m.db.Att_Violation}/${m.db.Att_Type},${m.db.Att_Attendance_Element}.${m.db.Att_Violation}/${m.db.Att_Violation_Type}`}})}getAll(){return this.get("ViolationSetup/GetAll",{params:{$expand:`${m.db.Att_Attendance_Element}.${m.db.Att_Violation}`}}).pipe((0,v.U)(t=>{let i=[];return t.data.forEach(s=>{i.push(s.att_Violation)}),t.data=i,t}))}getById(t){return this.get("ViolationSetup/GetAll",{params:{$expand:`${m.db.Att_Attendance_Element}.${m.db.Att_Violation}/${m.db.Att_Type},${m.db.Att_Attendance_Element}.${m.db.Att_Violation}/${m.db.Att_Violation_Type}`,$filter:`id eq ${t}`}}).pipe((0,v.U)(i=>{let s=[];return i.data.forEach(o=>{s.push({...o.att_Violation,variableCode:o.paY_Variable.code,display_In_Result:o.paY_Variable.display_In_Result})}),i.data=s,i}))}Delete(t){return this.delete("ViolationSetup/Delete",{params:{Id:t}})}getAllTypes(){return this.get("ViolationSetup/GetAll_Type").pipe((0,v.U)(t=>(t.data.map(i=>{i.ar_Name=i.en_Name}),t)))}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var U=l(7384);function K(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",13),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}function j(a,n){if(1&a){const t=e.EpF();e.ynx(0),e._UZ(1,"mat-divider"),e.TgZ(2,"app-material-table",14),e.NdJ("editRow",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.penaltyRegulationToEdit(s))})("deleteRow",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.onDelete(s))}),e.qZA(),e.BQk()}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("showPaginator",!1)}}const q=function(a){return{"hidden-field":a}};let X=(()=>{class a extends y.d{constructor(t,i,s){super(),this.penaltyRegulationsDetailsService=t,this.violationsService=i,this.penaltiesService=s,this.selectedPenaltyRegulationDetails=null,this.submitted=!1,this.mandatoryColomns=["Ser","violation","repetition_No","penalty","actions"],this.isLoaded=!1,this.optionalColomns=[],this.violationsList=[],this.penaltiesList=[],this.selectedViolation=null}ngOnInit(){this.form=this.fb.group({violation_ID:[null,[r.kI.required]],repetition_No:[null,[r.kI.required,g.dN.digits,g.dN.gte(0)]],penalty_ID:[null,[r.kI.required]]})}ngOnChanges(t){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new u.by(null)),this.CheckNoBusinessOrCompany()&&(this.getAllViolations(),this.getAllPenalties(),this.penaltyRegulationId>0&&this.getAll())}get formCtrls(){return this.form.controls}getAll(){this.showLoading(),this.penaltyRegulationsDetailsService.getAllByPenaltyRegulationId(this.penaltyRegulationId).subscribe(t=>{t.message.messageType==d.u.Success?(t.data.map(i=>{i.violation=this.msgTranslate(i.att_Violation?.ar_Name,i.att_Violation?.en_Name),i.penalty=this.msgTranslate(i.att_Penalty?.name)}),this.dataSource=new u.by(t.data),this.isLoaded=!0):this.errorList(t.message.messages),this.hideLoading()})}penaltyRegulationToEdit(t){this.form.patchValue(t),this.onChangeViolation([t.att_Violation]),this.selectedPenaltyRegulationDetails=t}submit(){if(this.submitted=!0,this.form.valid){const t=[{Penalty_Regulation_ID:this.penaltyRegulationId,Violation_ID:this.form.value.violation_ID,Repetition_No:this.form.value.repetition_No??0,Penalty_ID:this.form.value.penalty_ID}];this.selectedPenaltyRegulationDetails?this.update(t):this.create(t)}}create(t){this.showLoading(),this.penaltyRegulationsDetailsService.create(t).subscribe(i=>{i?.message?.messageType==d.u.Success?(this.clearForm(),this.addSuccessfullyMsg(i?.message?.messageTypeName),this.getAll()):this.errorList(i.message.messages),this.hideLoading()})}update(t){let i={NewPenalityDetails:t[0],OldPenalityDetails:{Penalty_Regulation_ID:this.selectedPenaltyRegulationDetails.penalty_Regulation_ID,Violation_ID:this.selectedPenaltyRegulationDetails.violation_ID,Repetition_No:this.selectedPenaltyRegulationDetails.repetition_No??0,Penalty_ID:this.selectedPenaltyRegulationDetails.penalty_ID}};this.showLoading(),this.penaltyRegulationsDetailsService.update(i).subscribe(s=>{s.message.messageType==d.u.Success?(this.clearForm(),this.updateSuccessfullyMsg(s?.message?.messageTypeName),this.getAll()):this.errorList(s.message.messages),this.hideLoading()})}onDelete(t){let i=this.msgTranslate(`${t.att_Violation.ar_Name} - ${t.repetition_No}`,`${t.att_Violation.en_Name} - ${t.repetition_No}`);this.deleateDialog(i).subscribe(s=>{s&&this.delete(t)})}delete(t){let i={Penalty_Regulation_ID:t.penalty_Regulation_ID,Repetition_No:t.repetition_No,Violation_ID:t.violation_ID};this.showLoading(),this.penaltyRegulationsDetailsService.Delete(i).subscribe(s=>{s.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(s?.message?.messageTypeName),this.getAll(),t.penalty_Regulation_ID==this.selectedPenaltyRegulationDetails?.penalty_Regulation_ID&&t.violation_ID==this.selectedPenaltyRegulationDetails?.violation_ID&&t.repetition_No==this.selectedPenaltyRegulationDetails?.repetition_No&&this.clearForm()):this.errorList(s.message.messages),this.hideLoading()})}clearForm(){this.form.reset(),this.submitted=!1,this.selectedViolation=null,this.selectedPenaltyRegulationDetails=null}getAllViolations(){this.showLoading(),this.violationsService.getAll().subscribe(t=>{(t.message.messageType=d.u.Success)?this.violationsList=t.data:this.errorList(t.message.messages),this.hideLoading()})}getAllPenalties(){this.showLoading(),this.penaltiesService.getAll().subscribe(t=>{(t.message.messageType=d.u.Success)?this.penaltiesList=t.data:this.errorList(t.message.messages),this.hideLoading()})}onChangeViolation(t){this.selectedViolation=t[0],this.selectedViolation?.ismoney?(this.formCtrls.repetition_No.clearValidators(),this.formCtrls.penalty_ID.clearValidators()):(this.formCtrls.repetition_No.setValidators([r.kI.required,g.dN.gte(0)]),this.formCtrls.penalty_ID.setValidators([r.kI.required])),this.formCtrls.repetition_No.updateValueAndValidity(),this.formCtrls.penalty_ID.updateValueAndValidity()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36($),e.Y36(R),e.Y36(w))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-penalty-regulations-details"]],inputs:{penaltyRegulationId:"penaltyRegulationId"},features:[e.qOj,e.TTD],decls:15,vars:21,consts:[[1,"container-fluid","mb-0"],[1,"row"],[1,"col-12"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","violation","appendTo","body",3,"control","List","submitted","filter","change"],[1,"col-md-6","col-12",3,"ngClass"],["label","repetition_No","type","number",3,"control","submitted"],["label","penalty","appendTo","body",3,"control","List","submitted","filter"],["align","end"],[3,"id","disabled","onClick"],[3,"click",4,"ngIf"],[4,"ngIf"],[3,"click"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","showPaginator","editRow","deleteRow"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card-content",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",1)(5,"div",4)(6,"app-prime-dropdown",5),e.NdJ("change",function(o){return i.onChangeViolation(o)}),e.qZA()(),e.TgZ(7,"div",6),e._UZ(8,"app-input",7),e.qZA(),e.TgZ(9,"div",6),e._UZ(10,"app-prime-dropdown",8),e.qZA()()()()()(),e.TgZ(11,"mat-card-actions",9)(12,"submit-btn",10),e.NdJ("onClick",function(){return i.submit()}),e.qZA(),e.YNc(13,K,1,0,"reset-form-btn",11),e.qZA(),e.YNc(14,j,3,6,"ng-container",12)),2&t&&(e.xp6(3),e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("control",i.formCtrls.violation_ID)("List",i.violationsList)("submitted",i.submitted)("filter",!0),e.xp6(1),e.Q6J("ngClass",e.VKq(17,q,null==i.selectedViolation?null:i.selectedViolation.ismoney)),e.xp6(1),e.Q6J("control",i.formCtrls.repetition_No)("submitted",i.submitted),e.xp6(1),e.Q6J("ngClass",e.VKq(19,q,null==i.selectedViolation?null:i.selectedViolation.ismoney)),e.xp6(1),e.Q6J("control",i.formCtrls.penalty_ID)("List",i.penaltiesList)("submitted",i.submitted)("filter",!0),e.xp6(2),e.Q6J("id",i.selectedPenaltyRegulationDetails?1:0)("disabled",!i.penaltyRegulationId),e.xp6(1),e.Q6J("ngIf",i.selectedPenaltyRegulationDetails),e.xp6(1),e.Q6J("ngIf",i.penaltyRegulationId))},dependencies:[c.mk,c.O5,C.a,T.I,U.J,S.J,I.p,p.dn,p.hq,L.d,r._Y,r.JL,r.sg]}),a})();var H=l(49274);function W(a,n){if(1&a&&e._UZ(0,"app-add-new-btn",4),2&a){const t=e.oxw();e.MGl("url","/penalty-regulations-setup/",t.moduleId,"/penalty-regulations/add"),e.Q6J("params",t.parantParam)}}function ee(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",15),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}let k=(()=>{class a extends y.d{constructor(t){super(),this.penaltyRegulationsService=t,this.submitted=!1}ngOnInit(){this.activatedRoute.paramMap.subscribe(t=>{this.penaltyRegulationId=Number(t.get("penaltyRegulationId"))??0}),this.form=this.fb.group({id:[0,{nonNullable:!0}],name:[null,[r.kI.required,h.w.whiteSpace]]})}onChangeBusinessAndCompanyId(){this.penaltyRegulationId>0&&this.CheckNoBusinessOrCompany()&&this.getById()}get formCtrls(){return this.form.controls}getById(){this.showLoading(),this.penaltyRegulationsService.getById(this.penaltyRegulationId).subscribe(t=>{t.message.messageType==d.u.Success?this.penaltyRegulationToEdit(t.data[0]):this.errorList(t.message.messages),this.hideLoading()})}penaltyRegulationToEdit(t){this.form.patchValue(t)}submit(){if(this.submitted=!0,this.form.valid){const t={ID:this.form.value.id,Name:this.form.value.name};0==t.ID?this.create(t):this.update(t)}}create(t){this.showLoading(),this.penaltyRegulationsService.create(t).subscribe(i=>{i?.message?.messageType==d.u.Success?(this.penaltyRegulationId=i.data.id,this.formCtrls.id.setValue(this.penaltyRegulationId),this.navigateTo(`/penalty-regulations-setup/${this.moduleId}/penalty-regulations/edit/${this.penaltyRegulationId}`),this.addSuccessfullyMsg(i?.message?.messageTypeName)):this.errorList(i.message.messages),this.hideLoading()})}update(t){this.showLoading(),this.penaltyRegulationsService.update(t).subscribe(i=>{i.message.messageType==d.u.Success?this.updateSuccessfullyMsg(i?.message?.messageTypeName):this.errorList(i.message.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(D))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-add-penalty-regulations"]],features:[e.qOj],decls:26,vars:20,consts:[[1,"row"],[1,"col-12"],["addTitle","penaltyRegulations","editTitle","editPenaltyRegulation",3,"id"],[3,"url","params",4,"ngIf"],[3,"url","params"],[1,"col-12","w-100"],[3,"label"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","name",3,"control","submitted"],["align","end"],[3,"id","onClick"],[3,"click",4,"ngIf"],[3,"penaltyRegulationId"],[3,"click"]],template:function(t,i){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card")(4,"mat-card-title"),e._UZ(5,"page-title",2),e.YNc(6,W,1,2,"app-add-new-btn",3),e._UZ(7,"app-back-btn",4),e.qZA(),e.TgZ(8,"mat-tab-group",5)(9,"mat-tab",6),e.ALo(10,"titlecase"),e.ALo(11,"translate"),e.TgZ(12,"mat-card-content",7)(13,"div",0)(14,"div",1)(15,"form",8)(16,"div",0)(17,"div",9),e._UZ(18,"app-input",10),e.qZA()()()()()(),e.TgZ(19,"mat-card-actions",11)(20,"submit-btn",12),e.NdJ("onClick",function(){return i.submit()}),e.qZA(),e.YNc(21,ee,1,0,"reset-form-btn",13),e.qZA()(),e.TgZ(22,"mat-tab",6),e.ALo(23,"titlecase"),e.ALo(24,"translate"),e._UZ(25,"app-penalty-regulations-details",14),e.qZA()()()()()),2&t&&(e.xp6(5),e.Q6J("id",i.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",i.formCtrls.id.value>0),e.xp6(1),e.MGl("url","/penalty-regulations-setup/",i.moduleId,"/penalty-regulations/index"),e.Q6J("params",i.pageParams),e.xp6(2),e.s9C("label",e.lcZ(10,12,e.lcZ(11,14,"penaltyRegulations"))),e.xp6(6),e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("control",i.formCtrls.name)("submitted",i.submitted),e.xp6(2),e.Q6J("id",i.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",0==i.formCtrls.id.value),e.xp6(1),e.s9C("label",e.lcZ(23,16,e.lcZ(24,18,"penaltyRegulationDetails"))),e.xp6(3),e.Q6J("penaltyRegulationId",i.penaltyRegulationId))},dependencies:[c.O5,C.a,J.a,F.J,S.J,I.p,f.T,Q.SP,Q.uX,p.a8,p.dn,p.n5,p.hq,_.Ro,r._Y,r.JL,r.sg,X,c.rS,H.X$]}),a})(),te=(()=>{class a extends y.d{constructor(t){super(),this.violationsService=t,this.mandatoryColomns=["Ser","id","en_Name","ar_Name","actions"],this.optionalColomns=["variableCode","display_In_Result","violationType","renew_Day","fromValue","toValue","typeName","moneyOrPenalty","renew_By_Period"],this.isLoaded=!1}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new u.by(null)),this.CheckNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,i){this.removePageParams(),this.page.pageIndex=t,i&&(this.page.pageSize=i);let s={PageNumber:t,pageSize:this.page.pageSize};this.showLoading(),this.violationsService.getList(s).subscribe(o=>{if(o.message.messageType==d.u.Success){if(0==o.data.length&&t>1)return void this.getList(this.prevPage);let x=[];o.data.forEach(Z=>{let P=Z.att_Violation;x.push({...P,variableCode:Z.paY_Variable.code,moneyOrPenalty:this.translate(P.ismoney?"money":"penalty"),violationType:P.att_Violation_Type.name,typeName:P.att_Type.en_Name,display_In_Result:Z.paY_Variable.display_In_Result})}),this.dataSource=new u.by(x),this.isLoaded=!0,this.page.length=o.meta.totalItemCount}else this.errorList(o.message.messages);this.hideLoading()})}onDelete(t){let i=this.msgTranslate(t.ar_Name,t.en_Name);this.deleateDialog(i).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.violationsService.Delete(t.id).subscribe(i=>{i.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(i?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(i.message.messages),this.hideLoading()})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(R))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-violations-index"]],features:[e.qOj],decls:8,vars:7,consts:[[1,"row"],[1,"col-12"],["title","violations",3,"globalFunctions"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","onChangePage","deleteRow"]],template:function(t,i){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card")(4,"mat-card-title"),e._UZ(5,"page-title",2),e.qZA(),e._UZ(6,"mat-divider"),e.TgZ(7,"app-material-table",3),e.NdJ("onChangePage",function(o){return i.getList(o.pageIndex+1,o.pageSize)})("deleteRow",function(o){return i.onDelete(o)}),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("globalFunctions",i.globalFunctions),e.xp6(2),e.Q6J("isLoaded",i.isLoaded)("dataSource",i.dataSource)("mandatoryColomns",i.mandatoryColomns)("optionalColomns",i.optionalColomns)("page",i.page)("actions",i.rowFunctions))},dependencies:[T.I,f.T,p.a8,p.n5,L.d,_.Ro]}),a})();var ie=l(50617),ae=l(24724),se=l(37167);function oe(a,n){if(1&a&&e._UZ(0,"app-add-new-btn",4),2&a){const t=e.oxw();e.MGl("url","/penalty-regulations-setup/",t.moduleId,"/violations/add"),e.Q6J("params",t.parantParam)}}function ne(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",24),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}let M=(()=>{class a extends y.d{constructor(t,i){super(),this.violationsService=t,this.violationTypesService=i,this.submitted=!1,this.violationTypesList=[],this.typesList=[],this.moneyOrPenaltyRadioList=[{value:!0,label:"money"},{value:!1,label:"penalty"}]}ngOnInit(){this.activatedRoute.paramMap.subscribe(t=>{this.violationId=Number(t.get("violationId"))??0}),this.form=this.fb.group({id:[0,{nonNullable:!0}],en_Name:[null,[r.kI.required,h.w.whiteSpace]],ar_Name:[null,[r.kI.required,h.w.whiteSpace]],variableCode:[null,[r.kI.required,h.w.whiteSpace,h.w.noSpace,r.kI.pattern(ie.g.variableCode_pattern)]],display_In_Result:[!1],renew_Day:[null,[g.dN.gte(0),g.dN.digits]],fromValue:[null,[r.kI.required,g.dN.gte(0),g.dN.digits]],toValue:[null,[r.kI.required,g.dN.gte(0),g.dN.digits]],violation_Type_ID:[null,[r.kI.required]],type:[null,[r.kI.required]],renew_By_Period:[!1],ismoney:[!1]},{validator:h.w.greaterThan("fromValue","toValue")})}onChangeBusinessAndCompanyId(){this.CheckNoBusinessOrCompany()&&(this.getAllViolationTypes(),this.getAllTypes(),this.violationId>0&&this.getById())}get formCtrls(){return this.form.controls}getById(){this.showLoading(),this.violationsService.getById(this.violationId).subscribe(t=>{t.message.messageType==d.u.Success?this.violationToEdit(t.data[0]):this.errorList(t.message.messages),this.hideLoading()})}violationToEdit(t){this.form.patchValue(t)}submit(){if(this.submitted=!0,this.form.valid){const t={Violation:{ID:this.form.value.id,En_Name:this.form.value.en_Name,Ar_Name:this.form.value.ar_Name,Renew_Day:this.form.value.renew_Day,FromValue:this.form.value.fromValue,ToValue:this.form.value.toValue,Violation_Type_ID:this.form.value.violation_Type_ID,Type:this.form.value.type,Renew_By_Period:this.form.value.renew_By_Period??!1,Ismoney:this.form.value.ismoney},VariableCode:this.form.value.variableCode,Display_In_Result:this.form.value.display_In_Result??!1};0==t.Violation.ID?this.create(t):this.update(t)}}create(t){this.showLoading(),this.violationsService.create(t).subscribe(i=>{i?.message?.messageType==d.u.Success?(this.violationId=i.data.id,this.formCtrls.id.setValue(this.violationId),this.navigateTo(`/penalty-regulations-setup/${this.moduleId}/violations/edit/${this.violationId}`),this.addSuccessfullyMsg(i?.message?.messageTypeName)):this.errorList(i.message.messages),this.hideLoading()})}update(t){this.showLoading(),this.violationsService.update(t).subscribe(i=>{i.message.messageType==d.u.Success?this.updateSuccessfullyMsg(i?.message?.messageTypeName):this.errorList(i.message.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0,ismoney:!1}),this.submitted=!1}getAllViolationTypes(){this.showLoading(),this.violationTypesService.getAll().subscribe(t=>{(t.message.messageType=d.u.Success)?this.violationTypesList=t.data:this.errorList(t.message.messages),this.hideLoading()})}getAllTypes(){this.showLoading(),this.violationsService.getAllTypes().subscribe(t=>{(t.message.messageType=d.u.Success)?this.typesList=t.data:this.errorList(t.message.messages),this.hideLoading()})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(R),e.Y36(N))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-add-violation"]],features:[e.qOj],decls:38,vars:30,consts:[[1,"row"],[1,"col-12"],["addTitle","violations","editTitle","editViolation",3,"id"],[3,"url","params",4,"ngIf"],[3,"url","params"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","en_Name",3,"control","submitted"],["label","ar_Name",3,"control","submitted"],["label","variableCode",3,"control","submitted"],[1,"col-md-6","col-12","mtop-14"],["label","display_In_Result",3,"control"],[1,"col-md-4","col-12"],["type","number","label","renew_Month",3,"control","submitted"],["type","number","label","fromValue",3,"control","submitted"],["type","number","label","toValue",3,"control","submitted"],["label","violationType",3,"control","submitted","List"],["label","typeName",3,"control","submitted","List"],["label","renew_By_Period",3,"control"],[3,"radioList","control","submitted"],["align","end"],[3,"id","onClick"],[3,"click",4,"ngIf"],[3,"click"]],template:function(t,i){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card")(4,"mat-card-title"),e._UZ(5,"page-title",2),e.YNc(6,oe,1,2,"app-add-new-btn",3),e._UZ(7,"app-back-btn",4),e.qZA(),e.TgZ(8,"mat-card-content",5)(9,"div",0)(10,"div",1)(11,"form",6)(12,"div",0)(13,"div",7),e._UZ(14,"app-input",8),e.qZA(),e.TgZ(15,"div",7),e._UZ(16,"app-input",9),e.qZA(),e.TgZ(17,"div",7),e._UZ(18,"app-input",10),e.qZA(),e.TgZ(19,"div",11),e._UZ(20,"app-check-box",12),e.qZA(),e.TgZ(21,"div",13),e._UZ(22,"app-input",14),e.qZA(),e.TgZ(23,"div",13),e._UZ(24,"app-input",15),e.qZA(),e.TgZ(25,"div",13),e._UZ(26,"app-input",16),e.qZA(),e.TgZ(27,"div",7),e._UZ(28,"app-prime-dropdown",17),e.qZA(),e.TgZ(29,"div",7),e._UZ(30,"app-prime-dropdown",18),e.qZA(),e.TgZ(31,"div",11),e._UZ(32,"app-check-box",19),e.qZA(),e.TgZ(33,"div",11),e._UZ(34,"app-radio-button",20),e.qZA()()()()()(),e.TgZ(35,"mat-card-actions",21)(36,"submit-btn",22),e.NdJ("onClick",function(){return i.submit()}),e.qZA(),e.YNc(37,ne,1,0,"reset-form-btn",23),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("id",i.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",i.formCtrls.id.value>0),e.xp6(1),e.MGl("url","/penalty-regulations-setup/",i.moduleId,"/violations/index"),e.Q6J("params",i.pageParams),e.xp6(4),e.Q6J("formGroup",i.form),e.xp6(3),e.Q6J("control",i.formCtrls.en_Name)("submitted",i.submitted),e.xp6(2),e.Q6J("control",i.formCtrls.ar_Name)("submitted",i.submitted),e.xp6(2),e.Q6J("control",i.formCtrls.variableCode)("submitted",i.submitted),e.xp6(2),e.Q6J("control",i.formCtrls.display_In_Result),e.xp6(2),e.Q6J("control",i.formCtrls.renew_Day)("submitted",i.submitted),e.xp6(2),e.Q6J("control",i.formCtrls.fromValue)("submitted",i.submitted),e.xp6(2),e.Q6J("control",i.formCtrls.toValue)("submitted",i.submitted),e.xp6(2),e.Q6J("control",i.formCtrls.violation_Type_ID)("submitted",i.submitted)("List",i.violationTypesList),e.xp6(2),e.Q6J("control",i.formCtrls.type)("submitted",i.submitted)("List",i.typesList),e.xp6(2),e.Q6J("control",i.formCtrls.renew_By_Period),e.xp6(2),e.Q6J("radioList",i.moneyOrPenaltyRadioList)("control",i.formCtrls.ismoney)("submitted",i.submitted),e.xp6(2),e.Q6J("id",i.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",0==i.formCtrls.id.value))},dependencies:[c.O5,C.a,ae._,U.J,se.u,J.a,F.J,S.J,I.p,f.T,p.a8,p.dn,p.n5,p.hq,_.Ro,r._Y,r.JL,r.sg]}),a})();var B=l(36162);const le=[{path:"penalties",component:z,data:{view:"penalties"}},{path:"violation-types",component:Y,data:{view:"violation-types"}},{path:"penalty-regulations",data:{view:"penalty-regulations"},children:[{path:"",redirectTo:"index",pathMatch:B.U.full},{path:"index",component:E,data:{view:"penalty-regulations-index"}},{path:"add",component:k,data:{view:"add-penalty-regulations"}},{path:"edit/:penaltyRegulationId",component:k,data:{view:"add-penalty-regulations"}}]},{path:"violations",data:{view:"violations"},children:[{path:"",redirectTo:"index",pathMatch:B.U.full},{path:"index",component:te,data:{view:"violations-index"}},{path:"add",component:M,data:{view:"add-violation"}},{path:"edit/:violationId",component:M,data:{view:"add-violation"}}]}];let re=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[V.Bz.forChild(le),V.Bz]}),a})();var de=l(78475);let pe=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[c.ez,re,de.m]}),a})()}}]);