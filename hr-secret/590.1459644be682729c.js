"use strict";(self.webpackChunkhr=self.webpackChunkhr||[]).push([[590],{22590:(S,p,o)=>{o.r(p),o.d(p,{MpalModule:()=>x});var d=o(36895),f=o(86128),g=o(80458),y=o(36162),m=o(3710),r=o(74513),c=o(30671),u=o(15602),v=o(95751),a=o(94650),C=o(18521);let L=(()=>{class e extends C.K{constructor(){super()}getList(t){return this.get("GeneralSetup/mpalProducts/GetList",{params:t})}getAll(){return this.get("GeneralSetup/mpalProducts/getAll")}Delete(t){return this.delete("GeneralSetup/mpalProducts/Delete",{params:{Id:t}})}exportExcel(){this.getAll()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var w=o(93410),M=o(46896),I=o(29721),P=o(73546),A=o(49274);const F=[{path:"products",data:{view:r.S.products},children:[{path:"",redirectTo:"index",pathMatch:y.U.full},{path:"index",component:(()=>{class e extends v.U{constructor(t){super(),this.productService=t,this.mandatoryColomns=["Ser","id","en_Name","company","organization","projects","phases","actions"],this.isLoaded=!1,this.optionalColomns=[],this.cellWithDifferentHoverList=[{col:"projects",hoverProperty:"hoverProjects",checkProperty:"showHoverProjects"},{col:"phases",hoverProperty:"hoverPhases",checkProperty:"showHoverPhases"}]}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new c.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,s){this.dataSource=new c.by(null),this.isLoaded=!1,this.page.pageIndex=t,s&&(this.page.pageSize=s),this.removePageParams(),this.productService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(n=>{if(n.message.messageType==u.u.Success){if(0==n.data.length&&t>1)return void this.getList(this.prevPage);this.dataSource=new c.by(function l(e,i){return e.map(t=>({...t}))}(n.data)),this.isLoaded=!0,this.page.length=n.meta.totalItemCount,this.page.meta=n.meta}else this.errorList(n?.message?.messages)})}onDelete(t){let s=this.msgTranslate(t.name);this.deleteDialog(s).subscribe(h=>{h&&this.delete(t)})}delete(t){this.showLoading(),this.productService.Delete(t.id).subscribe(s=>{s.message.messageType==u.u.Success?(this.deleteSuccessfullyMsg("productRemoved"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(s?.message?.messages),this.hideLoading()})}}return e.\u0275fac=function(t){return new(t||e)(a.Y36(L))},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-product-index"]],features:[a.qOj],decls:6,vars:12,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","products","TitleHasGlobalFunc","",3,"parentTitle","globalFunctions"],[1,"index-card"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","exportService","actions","cellWithDifferentHoverList","onChangePage","deleteRow"]],template:function(t,s){1&t&&(a.TgZ(0,"mat-card-title",0),a._UZ(1,"page-title",1),a.ALo(2,"translate"),a.qZA(),a.TgZ(3,"mat-card",2)(4,"mat-card-content")(5,"app-material-table",3),a.NdJ("onChangePage",function(n){return s.getList(n.pageIndex+1,n.pageSize)})("deleteRow",function(n){return s.onDelete(n)}),a.qZA()()()),2&t&&(a.xp6(1),a.s9C("parentTitle",a.lcZ(2,10,"projectManagement")),a.Q6J("globalFunctions",s.globalFunctions),a.xp6(4),a.Q6J("isLoaded",s.isLoaded)("dataSource",s.dataSource)("mandatoryColomns",s.mandatoryColomns)("optionalColomns",s.optionalColomns)("page",s.page)("exportService",s.productService)("actions",s.rowFunctions)("cellWithDifferentHoverList",s.cellWithDifferentHoverList))},dependencies:[w.I,M.T,I.X,P.a8,P.dn,P.n5,A.X$]}),e})(),data:{view:r.S.product_index},canActivate:[m.r]},{path:"view/:id",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-product-view-core"]],decls:2,vars:0,template:function(t,s){1&t&&(a.TgZ(0,"p"),a._uU(1,"product-view-core works!"),a.qZA())}}),e})(),data:{view:r.S.add_product},canActivate:[m.r]}]}];let U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[g.Bz.forChild(F),g.Bz]}),e})(),x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.oAB({type:e}),e.\u0275inj=a.cJS({imports:[d.ez,U,f.m]}),e})()},3710:(S,p,o)=>{o.d(p,{r:()=>m});var d=o(94650),f=o(67579),g=o(24280),y=o(80458);let m=(()=>{class r{constructor(l,u){this.viewsService=l,this.router=u,this.loadingService=(0,d.f3M)(f.b),this.UserModules=this.viewsService.UserModules$.getValue(),this.loading=document.getElementById("page-loading")}canActivate(l,u){let v=l.data?.view;if(this.showLoading(),this.UserModules?.length>0){if(this.viewsService.isViewAllowed(v))return this.hideLoading(),!0;this.router.navigateByUrl("/auth/access-denied"),this.hideLoading()}else this.viewsService.UserModules$.subscribe(a=>{if(a?.length>0){if(this.viewsService.isViewAllowed(v))return this.hideLoading(),!0;this.router.navigateByUrl("/auth/access-denied"),this.hideLoading()}})}showLoading(){this.loading.style.display="block",this.loading.style.opacity="1",this.loading.style.zIndex="998"}hideLoading(){this.loading.style.display="none",this.loading.style.opacity="0",this.loading.style.zIndex="0"}}return r.\u0275fac=function(l){return new(l||r)(d.LFG(g.Z),d.LFG(y.F0))},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()}}]);