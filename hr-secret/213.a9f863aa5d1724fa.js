"use strict";(self.webpackChunkhr=self.webpackChunkhr||[]).push([[213],{3710:(J,_,o)=>{o.d(_,{r:()=>c});var m=o(94650),C=o(67579),u=o(24280),d=o(80458);let c=(()=>{class e{constructor(g,h){this.viewsService=g,this.router=h,this.loadingService=(0,m.f3M)(C.b),this.UserModules=this.viewsService.UserModules$.getValue(),this.loading=document.getElementById("page-loading")}canActivate(g,h){let v=g.data?.view;if(this.showLoading(),this.UserModules?.length>0){if(this.viewsService.isViewAllowed(v))return this.hideLoading(),!0;this.router.navigateByUrl("/auth/access-denied"),this.hideLoading()}else this.viewsService.UserModules$.subscribe(r=>{if(r?.length>0){if(this.viewsService.isViewAllowed(v))return this.hideLoading(),!0;this.router.navigateByUrl("/auth/access-denied"),this.hideLoading()}})}showLoading(){this.loading.style.display="block",this.loading.style.opacity="1",this.loading.style.zIndex="998"}hideLoading(){this.loading.style.display="none",this.loading.style.opacity="0",this.loading.style.zIndex="0"}}return e.\u0275fac=function(g){return new(g||e)(m.LFG(u.Z),m.LFG(d.F0))},e.\u0275prov=m.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},36213:(J,_,o)=>{o.r(_),o.d(_,{PenaltyRegulationsSetupModule:()=>ue});var m=o(36895),C=o(80458),u=o(30671),d=o(15602),c=o(95751),e=o(94650),S=o(8683),g=o(93410),h=o(46896),v=o(29721),r=o(73546);let F=(()=>{class i extends c.U{constructor(t){super(),this.penaltyRegulationsService=t,this.mandatoryColomns=["Ser","id","name","actions"],this.isLoaded=!1,this.optionalColomns=[]}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new u.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,a){this.isLoaded=!1,this.removePageParams(),this.page.pageIndex=t,a&&(this.page.pageSize=a),this.penaltyRegulationsService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(n=>{if(n.message.messageType==d.u.Success){if(0==n.data.length&&t>1)return void this.getList(this.prevPage);this.dataSource=new u.by(n.data),this.isLoaded=!0,this.page.length=n.meta.totalItemCount,this.page.meta=n.meta}else this.errorList(n?.message?.messages)})}onDelete(t){let a=this.msgTranslate(t.name);this.deleteDialog(a).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.penaltyRegulationsService.Delete(t.id).subscribe(a=>{a.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg("penaltyRegulationRemoved"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(a?.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(S.U))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-penalty-regulations-index"]],features:[e.qOj],decls:6,vars:8,consts:[[1,"row"],[1,"col-12"],[1,"index-card"],["title","penaltyRegulations","TitleHasGlobalFunc","",3,"globalFunctions"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","exportService","actions","onChangePage","deleteRow"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title"),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"app-material-table",4),e.NdJ("onChangePage",function(n){return a.getList(n.pageIndex+1,n.pageSize)})("deleteRow",function(n){return a.onDelete(n)}),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("globalFunctions",a.globalFunctions),e.xp6(1),e.Q6J("isLoaded",a.isLoaded)("dataSource",a.dataSource)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("exportService",a.penaltyRegulationsService)("actions",a.rowFunctions))},dependencies:[g.I,h.T,v.X,r.a8,r.n5]}),i})();var p=o(24006),T=o(78937),b=o(25273),U=o(61064),M=o(52682),P=o(56500),R=o(57566),O=o(40445),L=o(3848),E=o(35478),I=o(43949),B=o(18521);let z=(()=>{class i extends B.K{constructor(){super()}create(t){return this.post("PenaltyRegSetup/Create_Penalty_Regulation_Details",t)}update(t){return this.post("PenaltyRegSetup/Edit_Penalty_Regulation_Details",t)}getAllByPenaltyRegulationId(t){return this.get("PenaltyRegSetup/GetAll_Penalty_Regulation_Details",{params:{Penalty_Regulation_ID:t}})}Delete(t){return this.delete("PenaltyRegSetup/Delete_Penalty_Regulation_Details",{params:t})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var G=o(44850),Y=o(5251),X=o(24928);function K(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",13),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}function H(i,l){if(1&i){const t=e.EpF();e.ynx(0),e._UZ(1,"mat-divider"),e.TgZ(2,"app-material-table",14),e.NdJ("editRow",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.penaltyRegulationToEdit(s))})("deleteRow",function(s){e.CHM(t);const n=e.oxw();return e.KtG(n.onDelete(s))}),e.qZA(),e.BQk()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("showPaginator",!1)}}const D=function(i){return{"hidden-field":i}};let j=(()=>{class i extends c.U{constructor(t){super(),this.penaltyRegulationsDetailsService=t,this.selectedPenaltyRegulationDetails=null,this.submitted=!1,this.mandatoryColomns=["Ser","violation","repetition_No","penalty","actions"],this.isLoaded=!1,this.optionalColomns=[],this.selectedViolation=null}ngOnInit(){this.form=this.fb.group({violation_ID:[null,[p.kI.required]],repetition_No:[null,[p.kI.required,I.dN.digits,I.dN.gte(0)]],penalty_ID:[null,[p.kI.required]]})}ngOnChanges(t){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new u.by(null)),this.checkNoBusinessOrCompany()&&(this.penaltyRegulationId>0?this.getAll():this.isLoaded=!0)}get formCtrls(){return this.form.controls}getAll(){this.penaltyRegulationsDetailsService.getAllByPenaltyRegulationId(this.penaltyRegulationId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==d.u.Success?(this.dataSource=new u.by(function Q(i){return i.map(l=>({...l,violation:(0,E._f)(l.att_Violation?.ar_Name,l.att_Violation?.en_Name),penalty:l.att_Penalty?.name}))}(t.data)),this.isLoaded=!0):this.errorList(t?.message?.messages)})}penaltyRegulationToEdit(t){this.form.patchValue(t),this.onChangeViolation([t.att_Violation]),this.selectedPenaltyRegulationDetails=t}submit(){if(this.submitted=!0,this.form.valid){const t=[{Penalty_Regulation_ID:this.penaltyRegulationId,Violation_ID:this.form.value.violation_ID,Repetition_No:this.form.value.repetition_No??0,Penalty_ID:this.form.value.penalty_ID}];this.selectedPenaltyRegulationDetails?this.update(t):this.create(t)}}create(t){this.showLoading(),this.penaltyRegulationsDetailsService.create(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newPenaltyRegulationDetailsAdded"),this.getAll()):this.errorList(a?.message?.messages),this.hideLoading()})}update(t){let a={NewPenalityDetails:t[0],OldPenalityDetails:{Penalty_Regulation_ID:this.selectedPenaltyRegulationDetails.penalty_Regulation_ID,Violation_ID:this.selectedPenaltyRegulationDetails.violation_ID,Repetition_No:this.selectedPenaltyRegulationDetails.repetition_No??0,Penalty_ID:this.selectedPenaltyRegulationDetails.penalty_ID}};this.showLoading(),this.penaltyRegulationsDetailsService.update(a).subscribe(s=>{s.message.messageType==d.u.Success?(this.clearForm(),this.updateSuccessfullyMsg("penaltyRegulationDetailsUpdated"),this.getAll()):this.errorList(s?.message?.messages),this.hideLoading()})}onDelete(t){let a=this.msgTranslate(`${t.att_Violation.ar_Name} - ${t.repetition_No}`,`${t.att_Violation.en_Name} - ${t.repetition_No}`);this.deleteDialog(a).subscribe(s=>{s&&this.delete(t)})}delete(t){let a={Penalty_Regulation_ID:t.penalty_Regulation_ID,Repetition_No:t.repetition_No,Violation_ID:t.violation_ID};this.showLoading(),this.penaltyRegulationsDetailsService.Delete(a).subscribe(s=>{s.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg("penaltyRegulationDetailsRemoved"),this.getAll(),t.penalty_Regulation_ID==this.selectedPenaltyRegulationDetails?.penalty_Regulation_ID&&t.violation_ID==this.selectedPenaltyRegulationDetails?.violation_ID&&t.repetition_No==this.selectedPenaltyRegulationDetails?.repetition_No&&this.clearForm()):this.errorList(s?.message?.messages),this.hideLoading()})}clearForm(){this.form.reset(),this.submitted=!1,this.selectedViolation=null,this.selectedPenaltyRegulationDetails=null}onChangeViolation(t){this.selectedViolation=t[0],this.selectedViolation?.ismoney?(this.formCtrls.repetition_No.clearValidators(),this.formCtrls.penalty_ID.clearValidators()):(this.formCtrls.repetition_No.setValidators([p.kI.required,I.dN.gte(0)]),this.formCtrls.penalty_ID.setValidators([p.kI.required])),this.formCtrls.repetition_No.updateValueAndValidity(),this.formCtrls.penalty_ID.updateValueAndValidity()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(z))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-penalty-regulations-details"]],inputs:{penaltyRegulationId:"penaltyRegulationId"},features:[e.qOj,e.TTD],decls:15,vars:19,consts:[[1,"container-fluid","mb-0"],[1,"row"],[1,"col-12"],[3,"formGroup"],[1,"col-md-6","col-12"],[3,"control","submitted","filter","change"],[1,"col-md-6","col-12",3,"ngClass"],["label","repetition_No","type","number",3,"control","submitted"],[3,"control","submitted","filter"],["align","end"],[3,"id","disabled","onClick"],[3,"click",4,"ngIf"],[4,"ngIf"],[3,"click"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","showPaginator","editRow","deleteRow"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card-content",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"div",1)(5,"div",4)(6,"app-violation-dropdown",5),e.NdJ("change",function(n){return a.onChangeViolation(n)}),e.qZA()(),e.TgZ(7,"div",6),e._UZ(8,"app-input",7),e.qZA(),e.TgZ(9,"div",6),e._UZ(10,"app-penalty-dropdown",8),e.qZA()()()()()(),e.TgZ(11,"mat-card-actions",9)(12,"submit-btn",10),e.NdJ("onClick",function(){return a.submit()}),e.qZA(),e.YNc(13,K,1,0,"reset-form-btn",11),e.qZA(),e.YNc(14,H,3,6,"ng-container",12)),2&t&&(e.xp6(3),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.violation_ID)("submitted",a.submitted)("filter",!0),e.xp6(1),e.Q6J("ngClass",e.VKq(15,D,null==a.selectedViolation?null:a.selectedViolation.ismoney)),e.xp6(1),e.Q6J("control",a.formCtrls.repetition_No)("submitted",a.submitted),e.xp6(1),e.Q6J("ngClass",e.VKq(17,D,null==a.selectedViolation?null:a.selectedViolation.ismoney)),e.xp6(1),e.Q6J("control",a.formCtrls.penalty_ID)("submitted",a.submitted)("filter",!0),e.xp6(2),e.Q6J("id",a.selectedPenaltyRegulationDetails?1:0)("disabled",!a.penaltyRegulationId),e.xp6(1),e.Q6J("ngIf",a.selectedPenaltyRegulationDetails),e.xp6(1),e.Q6J("ngIf",a.penaltyRegulationId))},dependencies:[m.mk,m.O5,b.a,g.I,P.J,R.p,r.dn,r.hq,G.d,Y.n,X.D,p._Y,p.JL,p.sg]}),i})();var W=o(49274);function k(i,l){if(1&i&&e._UZ(0,"app-add-new-btn",5),2&i){const t=e.oxw();e.MGl("url","/penalty-regulations-setup/",t.moduleId,"/penalty-regulations/add"),e.Q6J("params",t.parentParam)}}function q(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",16),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.clearForm())}),e.qZA()}}let w=(()=>{class i extends c.U{constructor(t){super(),this.penaltyRegulationsService=t,this.submitted=!1}ngOnInit(){this.activatedRoute.paramMap.subscribe(t=>{this.penaltyRegulationId=Number(t.get("penaltyRegulationId"))??0}),this.form=this.fb.group({id:[0,{nonNullable:!0}],name:[null,[p.kI.required,T.w.whiteSpace]]})}onChangeBusinessAndCompanyId(){this.penaltyRegulationId>0&&this.checkNoBusinessOrCompany()&&this.getById()}get formCtrls(){return this.form.controls}getById(){this.showLoading(),this.penaltyRegulationsService.getById(this.penaltyRegulationId).subscribe(t=>{t.message.messageType==d.u.Success?this.penaltyRegulationToEdit(t.data[0]):this.errorList(t?.message?.messages),this.hideLoading()})}penaltyRegulationToEdit(t){this.form.patchValue(t)}submit(){if(this.submitted=!0,this.form.valid){const t={ID:this.form.value.id,Name:this.form.value.name};0==t.ID?this.create(t):this.update(t)}}create(t){this.showLoading(),this.penaltyRegulationsService.create(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.penaltyRegulationId=a.data.id,this.formCtrls.id.setValue(this.penaltyRegulationId),this.navigateTo(`/penalty-regulations-setup/${this.moduleId}/penalty-regulations/edit/${this.penaltyRegulationId}`),this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newPenaltyRegulationAdded")):this.errorList(a?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this.penaltyRegulationsService.update(t).subscribe(a=>{a.message.messageType==d.u.Success?this.updateSuccessfullyMsg("penaltyRegulationUpdated"):this.errorList(a?.message?.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(S.U))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-penalty-regulations"]],features:[e.qOj],decls:25,vars:21,consts:[[1,"row"],[1,"col-12"],[1,"form-card"],["addTitle","penaltyRegulations","editTitle","editPenaltyRegulation",3,"id"],[3,"url","params",4,"ngIf"],[3,"url","params"],[1,"col-12","w-100",3,"dir"],[3,"label"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","name",3,"control","submitted"],["align","end"],[3,"id","onClick"],[3,"click",4,"ngIf"],[3,"penaltyRegulationId"],[3,"click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title"),e._UZ(4,"page-title",3),e.YNc(5,k,1,2,"app-add-new-btn",4),e._UZ(6,"app-back-btn",5),e.qZA(),e.TgZ(7,"mat-tab-group",6)(8,"mat-tab",7),e.ALo(9,"titlecase"),e.ALo(10,"translate"),e.TgZ(11,"mat-card-content",8)(12,"div",0)(13,"div",1)(14,"form",9)(15,"div",0)(16,"div",10),e._UZ(17,"app-input",11),e.qZA()()()()()(),e.TgZ(18,"mat-card-actions",12)(19,"submit-btn",13),e.NdJ("onClick",function(){return a.submit()}),e.qZA(),e.YNc(20,q,1,0,"reset-form-btn",14),e.qZA()(),e.TgZ(21,"mat-tab",7),e.ALo(22,"titlecase"),e.ALo(23,"translate"),e._UZ(24,"app-penalty-regulations-details",15),e.qZA()()()()()),2&t&&(e.xp6(4),e.Q6J("id",a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",a.formCtrls.id.value>0),e.xp6(1),e.MGl("url","/penalty-regulations-setup/",a.moduleId,"/penalty-regulations/index"),e.Q6J("params",a.pageParams),e.xp6(1),e.Q6J("dir",a.languageService.isArabic?"rtl":"ltr"),e.xp6(1),e.s9C("label",e.lcZ(9,13,e.lcZ(10,15,"penaltyRegulations"))),e.xp6(6),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.name)("submitted",a.submitted),e.xp6(2),e.Q6J("id",a.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",0==a.formCtrls.id.value),e.xp6(1),e.s9C("label",e.lcZ(22,17,e.lcZ(23,19,"penaltyRegulationDetails"))),e.xp6(3),e.Q6J("penaltyRegulationId",a.penaltyRegulationId))},dependencies:[m.O5,b.a,U.a,M.J,P.J,R.p,h.T,O.Lv,L.SP,L.uX,r.a8,r.dn,r.n5,r.hq,p._Y,p.JL,p.sg,j,m.rS,W.X$]}),i})();var $=o(7368),ee=o(28766);let te=(()=>{class i extends c.U{constructor(t){super(),this.violationsService=t,this.mandatoryColomns=["Ser","id","en_Name","ar_Name","actions"],this.optionalColomns=["variableCode","display_In_Result","violationType","renew_Day","fromValue","toValue","typeName","moneyOrPenalty","renew_By_Period"],this.isLoaded=!1}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new u.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,a){this.isLoaded=!1,this.removePageParams(),this.page.pageIndex=t,a&&(this.page.pageSize=a),this.violationsService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(n=>{if(n.message.messageType==d.u.Success){if(0==n.data.length&&t>1)return void this.getList(this.prevPage);n.data.map(x=>{x.att_Violation.moneyOrPenalty=this.translate(x.att_Violation.ismoney?"money":"penalty")}),this.dataSource=new u.by((0,$.s)(n.data)),this.isLoaded=!0,this.page.length=n.meta.totalItemCount,this.page.meta=n.meta}else this.errorList(n?.message?.messages)})}onDelete(t){let a=this.msgTranslate(t.ar_Name,t.en_Name);this.deleteDialog(a).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.violationsService.Delete(t.id).subscribe(a=>{a.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg("violationRemoved"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(a?.message?.messages),this.hideLoading()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ee._))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-violations-index"]],features:[e.qOj],decls:6,vars:8,consts:[[1,"row"],[1,"col-12"],[1,"index-card"],["title","violations","TitleHasGlobalFunc","",3,"globalFunctions"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","exportService","actions","onChangePage","deleteRow"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title"),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"app-material-table",4),e.NdJ("onChangePage",function(n){return a.getList(n.pageIndex+1,n.pageSize)})("deleteRow",function(n){return a.onDelete(n)}),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("globalFunctions",a.globalFunctions),e.xp6(1),e.Q6J("isLoaded",a.isLoaded)("dataSource",a.dataSource)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("exportService",a.violationsService)("actions",a.rowFunctions))},dependencies:[g.I,h.T,v.X,r.a8,r.n5]}),i})();var A=o(38897),Z=o(36162),y=o(74513),f=o(3710),ae=o(62704),ie=o(5561);let se=(()=>{class i extends c.U{constructor(t){super(),this.penaltiesService=t,this.mandatoryColomns=["Ser","id","name","penalty_Value","actions"],this.isLoaded=!1,this.optionalColomns=[]}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new u.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.firstPage)}getList(t,a){this.dataSource=new u.by(null),this.isLoaded=!1,this.page.pageIndex=t,a&&(this.page.pageSize=a),this.penaltiesService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==d.u.Success?(this.dataSource=new u.by(n.data),this.isLoaded=!0,this.page.length=n.meta.totalItemCount,this.page.meta=n.meta):this.errorList(n?.message?.messages)})}onDelete(t){let a=this.msgTranslate(t.name);this.deleteDialog(a).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.penaltiesService.Delete(t.id).subscribe(a=>{a.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg("penaltyRemoved","successfulDelete"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(a?.message?.messages),this.hideLoading()})}openAddEditDialog(t,a){this.dialogsService.addEditDialog(ae.r,{data:t},{width:"25vw",minWidth:"400px",maxWidth:"500px",maxHeight:"98vh",disableClose:!0,panelClass:"setup-dialog"}).afterClosed().subscribe(s=>{s&&this.getList(a?this.lastPage:this.currentPage)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(ie.K))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-penalties-index"]],features:[e.qOj],decls:6,vars:8,consts:[[1,"row"],[1,"col-12"],[1,"index-card"],["title","penalties","TitleHasGlobalFunc","",3,"globalFunctions","action"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","exportService","actions","onChangePage","editRow","deleteRow"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title")(4,"page-title",3),e.NdJ("action",function(){return a.openAddEditDialog(null,!0)}),e.qZA()(),e.TgZ(5,"app-material-table",4),e.NdJ("onChangePage",function(n){return a.getList(n.pageIndex+1,n.pageSize)})("editRow",function(n){return a.openAddEditDialog(n,!1)})("deleteRow",function(n){return a.onDelete(n)}),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("globalFunctions",a.globalFunctions),e.xp6(1),e.Q6J("isLoaded",a.isLoaded)("dataSource",a.dataSource)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("exportService",a.penaltiesService)("actions",a.rowFunctions))},dependencies:[g.I,h.T,v.X,r.a8,r.n5]}),i})();var V=o(65938),N=o(78304),ne=o(26873);let oe=(()=>{class i extends c.U{constructor(t,a,s){super(),this.violationTypesService=t,this.data=a,this.dialogRef=s,this.submitted=!1,this.hasUpdate=!1}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],name:[null,[p.kI.required,T.w.whiteSpace]]}),this.data&&this.violationTypeToEdit(this.data)}get formCtrls(){return this.form.controls}submit(){if(this.submitted=!0,this.form.valid){const t={ID:this.form.value.id,Name:this.form.value.name};0==t.ID?this.create(t):this.update(t)}}create(t){this.showLoading(),this.violationTypesService.create(t).subscribe(a=>{a?.message?.messageType==d.u.Success?(this.hasUpdate=!0,this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newViolationTypeAdded"),this.onCloseDialog()):this.errorList(a?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this.violationTypesService.update(t).subscribe(a=>{a.message.messageType==d.u.Success?(this.hasUpdate=!0,this.updateSuccessfullyMsg("violationTypeUpdated","successfulEdit"),this.onCloseDialog()):this.errorList(a?.message?.messages),this.hideLoading()})}violationTypeToEdit(t){this.form.patchValue(t)}clearForm(){this.form.reset({id:0}),this.submitted=!1}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(N.X),e.Y36(V.WI),e.Y36(V.so))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-violation-type"]],features:[e.qOj],decls:12,vars:5,consts:[["parentTitle","violationType","addTitle","add","editTitle","update",3,"id"],[1,"row"],[1,"col-12"],[3,"formGroup"],["label","name",3,"control","submitted"],["align","end"],[3,"click"],["addLabel","add",3,"id","onClick"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card-title"),e._UZ(1,"page-title",0),e.qZA(),e.TgZ(2,"mat-card-content")(3,"div",1)(4,"div",2)(5,"form",3)(6,"div",1)(7,"div",2),e._UZ(8,"app-input",4),e.qZA()()()()()(),e.TgZ(9,"mat-card-actions",5)(10,"discard-dialog-btn",6),e.NdJ("click",function(){return a.onCloseDialog()}),e.qZA(),e.TgZ(11,"submit-btn",7),e.NdJ("onClick",function(){return a.submit()}),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("id",a.formCtrls.id.value),e.xp6(4),e.Q6J("formGroup",a.form),e.xp6(3),e.Q6J("control",a.formCtrls.name)("submitted",a.submitted),e.xp6(3),e.Q6J("id",a.formCtrls.id.value))},dependencies:[b.a,R.p,h.T,ne.E,r.dn,r.n5,r.hq,p._Y,p.JL,p.sg]}),i})();const de=[{path:"penalties",component:se,data:{view:y.S.penalties_index},canActivate:[f.r]},{path:"violation-types",component:(()=>{class i extends c.U{constructor(t){super(),this.violationTypesService=t,this.mandatoryColomns=["Ser","id","name","actions"],this.isLoaded=!1,this.optionalColomns=[]}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new u.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.firstPage)}getList(t,a){this.dataSource=new u.by(null),this.isLoaded=!1,this.page.pageIndex=t,a&&(this.page.pageSize=a),this.violationTypesService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(n=>{n.message.messageType==d.u.Success?(this.dataSource=new u.by(n.data),this.isLoaded=!0,this.page.length=n.meta.totalItemCount,this.page.meta=n.meta):this.errorList(n?.message?.messages)})}onDelete(t){let a=this.msgTranslate(t.name);this.deleteDialog(a).subscribe(s=>{s&&this.delete(t)})}delete(t){this.showLoading(),this.violationTypesService.Delete(t.id).subscribe(a=>{a.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg("violationTypeRemoved","successfulDelete"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(a?.message?.messages),this.hideLoading()})}openAddEditDialog(t,a){this.dialogsService.addEditDialog(oe,t,{width:"25vw",minWidth:"400px",maxWidth:"500px",maxHeight:"98vh",disableClose:!0,panelClass:"setup-dialog"}).afterClosed().subscribe(s=>{s&&this.getList(a?this.lastPage:this.currentPage)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(N.X))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-violation-types-index"]],features:[e.qOj],decls:6,vars:8,consts:[[1,"row"],[1,"col-12"],[1,"index-card"],["title","violationTypes","TitleHasGlobalFunc","",3,"globalFunctions","action"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","exportService","actions","onChangePage","editRow","deleteRow"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-title")(4,"page-title",3),e.NdJ("action",function(){return a.openAddEditDialog(null,!0)}),e.qZA()(),e.TgZ(5,"app-material-table",4),e.NdJ("onChangePage",function(n){return a.getList(n.pageIndex+1,n.pageSize)})("editRow",function(n){return a.openAddEditDialog(n,!1)})("deleteRow",function(n){return a.onDelete(n)}),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("globalFunctions",a.globalFunctions),e.xp6(1),e.Q6J("isLoaded",a.isLoaded)("dataSource",a.dataSource)("mandatoryColomns",a.mandatoryColomns)("optionalColomns",a.optionalColomns)("page",a.page)("exportService",a.violationTypesService)("actions",a.rowFunctions))},dependencies:[g.I,h.T,v.X,r.a8,r.n5]}),i})(),data:{view:y.S.violation_types_index},canActivate:[f.r]},{path:"penalty-regulations",data:{view:y.S.penalty_regulations},children:[{path:"",redirectTo:"index",pathMatch:Z.U.full},{path:"index",component:F,data:{view:y.S.penalty_regulations_index},canActivate:[f.r]},{path:"add",component:w,data:{view:y.S.add_penalty_regulations},canActivate:[f.r]},{path:"edit/:penaltyRegulationId",component:w,data:{view:y.S.add_penalty_regulations},canActivate:[f.r]}]},{path:"violations",data:{view:"violations"},children:[{path:"",redirectTo:"index",pathMatch:Z.U.full},{path:"index",component:te,data:{view:y.S.violations_index},canActivate:[f.r]},{path:"add",component:A.w,data:{view:y.S.add_violation},canActivate:[f.r]},{path:"edit/:violationId",component:A.w,data:{view:y.S.add_violation},canActivate:[f.r]}]}];let re=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[C.Bz.forChild(de),C.Bz]}),i})();var pe=o(86128);let ue=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,re,pe.m]}),i})()}}]);