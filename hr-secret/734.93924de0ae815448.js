"use strict";(self.webpackChunkhr=self.webpackChunkhr||[]).push([[734],{60734:(pc,Se,r)=>{r.r(Se),r.d(Se,{PersonnelSetupModule:()=>lc});var d=r(36895),xe=r(80458),At=r(36162),h=r(74513),m=r(22699),u=r(95751),e=r(94650),_=r(65938),Zt=r(32326),Ae=r(61064),Lt=r(52682),I=r(46896),A=r(95981),Pt=r(48881),y=r(73546),q=r(44850),Jt=r(25054),$=r(17489),l=r(24006),p=r(15602),c=r(35478),v=r(26315),P=r(18521);let ee=(()=>{class a extends P.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeMaritalStatus",t)}update(t){return this.post("Personnel/Employees/Edit_EmployeeMaritalStatus",t)}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeMaritalStatus",{params:{$expand:v.db.comm_Marital_Status,$filter:`PersonID eq ${t}`}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeMaritalStatus",{params:t})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var N=r(70137),Z=r(56500),D=r(57566),E=r(4859),C=r(86405),kt=r(17898),Ze=r(13082),g=r(30671);function Le(a){return a.map(n=>({...n,originalBirthDateFormat:n.birthDate,dependentName:n.flower_Name,birthDate:c.M6.mapDate(n.birthDate),relationship:(0,c._f)(n.corE_Family_Relation?.ar_Name,n.corE_Family_Relation?.en_Name)}))}function K(a){return a.map(n=>({...n,status:(0,c._f)(n.comm_Military_Status?.ar_Name,n.comm_Military_Status?.en_Name),grade:(0,c._f)(n.comm_Military_Grade?.ar_Name,n.comm_Military_Grade?.en_Name),statusDate:c.M6.mapDate(n.statusDate),endDate:c.M6.mapDate(n.endDate)}))}function Pe(a){return a.map(n=>({...n.employeeData,documentName:n.employeeData?.core_Personal_Identity_Type?.identity_TypeTital,originalIssuingDate:n.employeeData?.dateof_issue,originalExpirationDate:n.employeeData?.expire_Date,dateof_issue:c.M6.mapDate(n.employeeData?.dateof_issue),expire_Date:c.M6.mapDate(n.employeeData?.expire_Date),attachment_En_Name:n.attachment_En_Name,attachmentID:n.attachmentID,attachment:n.attachmentFilePath?"/"+n.attachmentFilePath:""}))}var w=r(93410);function Mt(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.toEdit(i))})("deleteRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("page",t.page)("actions",t.rowFunctions)("isDialogSize",!0)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showFilter",!1)("showSpaceTop",!1)}}let Je=(()=>{class a extends u.U{constructor(t){super(),this.employeeMaritalDataService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["maritalStatus","statusDate","actions"],this.optionalColomns=[],this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_personal_info_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeId>0&&this.getAllMaritalStatus(),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}getList(t,o){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.employeeId>0&&this.checkNoBusinessOrCompany()?this.getAllMaritalStatus():this.isLoaded=!0}getAllMaritalStatus(){this.dataSource=new g.by(null),this.isLoaded=!1,this.employeeMaritalDataService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.dataSource=new g.by(function Nt(a){return a.map(n=>({...n,originalDateFormat:n.statusDate,statusDate:c.M6.mapDate(n.statusDate),maritalStatus:(0,c._f)(n.comm_Marital_Status?.ar_Name,n.comm_Marital_Status?.en_Name)}))}(t.data)),this.isLoaded=!0):this.errorList(t?.message?.messages)})}onDelete(t){let o=this.msgTranslate(t.comm_Marital_Status?.ar_Name,t.comm_Marital_Status?.en_Name);this.deleteDialog(o).subscribe(i=>{i&&this.delete(t)})}delete(t){let o={PersonID:this.employeeId,MaritalID:t.comm_Marital_Status?.id};this.showLoading("table"),this.employeeMaritalDataService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeMaritalDataRemoved"),this.getAllMaritalStatus(),this.afterDelete.emit(t)):this.errorList(i?.message?.messages),this.hideLoading("table")})}toEdit(t){this.rowToEdit.emit(t)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ee))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-marital-status-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","isDialogSize","isMatPaginator","showFirstLastButtons","showFilter","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","isDialogSize","isMatPaginator","showFirstLastButtons","showFilter","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,Mt,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,C.Ro]}),a})();var L=r(49274);function Ft(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",19),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let Ot=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeMaritalDataService=t,this.dialogRef=o,this.employeeId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.selectedMaritalId=0,this.employeeId=m.w.EmployeeId}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],maritalID:[null,[l.kI.required]],statusDate:[null]}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}get formCtrls(){return this.form.controls}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={EmployeeData:{personID:this.employeeId,maritalID:this.formCtrls.maritalID.value,statusDate:c.M6.mapDateReverse(this.formCtrls.statusDate.value)}};0==this.formCtrls.id.value?this.create(t):this.update(t)}}create(t){this.showLoading("personal-info-dialog"),this.employeeMaritalDataService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newEmployeeMaritalDataAdded"),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("personal-info-dialog")})}update(t){let o={...t,OriginalEmployeeData:{PersonID:this.employeeId,MaritalID:this.selectedMaritalId}};this.showLoading("personal-info-dialog"),this.employeeMaritalDataService.update(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg("employeeMaritalDataUpdated"),this.getList=!0,this.hasUpdate=!0,this.selectedMaritalId=0):this.errorList(i?.message?.messages),this.hideLoading("personal-info-dialog")})}employeeMaritalToEdit(t){this.form.patchValue(t),this.formCtrls.statusDate.setValue(t.originalDateFormat),this.formCtrls.id.setValue(t.comm_Marital_Status?.id??1),this.selectedMaritalId=t.maritalID}clearForm(){this.form.reset({id:0}),this.submitted=!1}onSave(t){}afterDelete(t){t?.comm_Marital_Status.id==this.formCtrls.id.value&&this.clearForm(),t&&(this.hasUpdate=!0)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ee),e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee-personal-info-dialog"]],features:[e.qOj],decls:29,vars:25,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","personalInfo",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],[1,"divider-title"],[3,"isPersonal","onSave"],[1,"mtop-20"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-6","col-12"],[3,"control","submitted","filter","appendTo"],["label","date",3,"control","submitted"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5)(7,"p",6),e._uU(8),e.ALo(9,"titlecase"),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"emp-general-info-form",7),e.NdJ("onSave",function(s){return o.onSave(s)}),e.qZA(),e._UZ(12,"mat-divider",8),e.TgZ(13,"div",null,9)(15,"p",6),e._uU(16),e.ALo(17,"titlecase"),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"form",10)(20,"div",11)(21,"div",12),e._UZ(22,"app-marital-status-dropdown",13),e.qZA(),e.TgZ(23,"div",12),e._UZ(24,"app-datepicker",14),e.qZA()()(),e.TgZ(25,"div",15)(26,"submit-btn",16),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(27,Ft,1,0,"reset-form-btn",17),e.qZA(),e.TgZ(28,"app-emp-marital-status-table",18),e.NdJ("rowToEdit",function(s){return o.employeeMaritalToEdit(s)})("afterDelete",function(s){return o.afterDelete(s)}),e.qZA()()()),2&t){const i=e.MAs(14);e.Q6J("name","personal-info-dialog"),e.xp6(8),e.hij(" ",e.lcZ(9,17,e.lcZ(10,19,"personalData"))," "),e.xp6(3),e.Q6J("isPersonal",!0),e.xp6(5),e.hij(" ",e.lcZ(17,21,e.lcZ(18,23,"maritalData"))," "),e.xp6(3),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.maritalID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.statusDate)("submitted",o.submitted),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,N.Q,Z.J,D.p,I.T,E.lW,q.d,_.uh,_.xY,C.Ro,kt.d,l._Y,l.JL,l.sg,Ze.u,Je,d.rS,L.X$]}),a})();var J=r(23333),ke=r(10266);function Ut(a,n){1&a&&e._UZ(0,"i",6)}function Qt(a,n){1&a&&e._UZ(0,"i",7)}function qt(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"a",3),e.NdJ("click",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.click(i))}),e.ALo(1,"translate"),e.YNc(2,Ut,1,0,"i",4),e.YNc(3,Qt,1,0,"i",5),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("matTooltip",e.lcZ(1,3,t.isEdit?"edit":"add")),e.xp6(2),e.Q6J("ngIf",!t.isEdit),e.xp6(1),e.Q6J("ngIf",t.isEdit)}}const Rt=["*"];let S=(()=>{class a{constructor(){this.isEdit=!1,this.isLoaded=!1,this.onClickIcon=new e.vpe}ngOnInit(){}ngOnChanges(t){}click(t){this.onClickIcon.emit(t)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["card-header"]],inputs:{isEdit:"isEdit",cardTitle:"cardTitle",class:"class",isLoaded:"isLoaded"},outputs:{onClickIcon:"onClickIcon"},features:[e.TTD],ngContentSelectors:Rt,decls:7,vars:8,consts:[[1,"cardSectionTitle"],[1,"mb-0"],["matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],["matTooltipPosition","above",3,"matTooltip","click"],["class","ft-plus-square darkBlue font-size-15",4,"ngIf"],["class","fas fa-pen darkBlue font-size-15",4,"ngIf"],[1,"ft-plus-square","darkBlue","font-size-15"],[1,"fas","fa-pen","darkBlue","font-size-15"]],template:function(t,o){1&t&&(e.F$t(),e.TgZ(0,"div",0)(1,"h5",1),e._uU(2),e.ALo(3,"titlecase"),e.ALo(4,"translate"),e.qZA(),e.YNc(5,qt,4,5,"a",2),e.qZA(),e.Hsn(6)),2&t&&(e.Tol(o.class),e.xp6(2),e.hij(" ",e.lcZ(3,4,e.lcZ(4,6,o.cardTitle))," "),e.xp6(3),e.Q6J("ngIf",o.isLoaded))},dependencies:[d.O5,ke.gM,d.rS,L.X$],styles:[".side_title[_ngcontent-%COMP%]{border:none}.side_title[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-weight:500;color:#002a6f}"]}),a})();var Bt=r(93665);let x=(()=>{class a{constructor(){this.label="",this.labelClass="col-6",this.valueClass="col-6",this.isDate=!1,this.isBool=!1,this.displayPlaceholder=!0}ngOnInit(){"null"==this.value&&(this.value=null)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["card-row-item"]],inputs:{label:"label",labelClass:"labelClass",value:"value",valueClass:"valueClass",isDate:"isDate",isBool:"isBool",displayPlaceholder:"displayPlaceholder"},decls:1,vars:4,consts:[[1,"emp-custom-view",3,"label","value","isDate","isBool"]],template:function(t,o){1&t&&e._UZ(0,"app-view-data-row-item",0),2&t&&e.Q6J("label",o.label)("value",o.value)("isDate",o.isDate)("isBool",o.isBool)},dependencies:[Bt.l]}),a})();function Vt(a,n){1&a&&(e.TgZ(0,"div",14),e._UZ(1,"p-skeleton",15),e.qZA())}function Yt(a,n){1&a&&(e.TgZ(0,"div",14),e._UZ(1,"p-skeleton",15),e.qZA())}function Gt(a,n){1&a&&(e.TgZ(0,"div",14),e._UZ(1,"p-skeleton",15),e.qZA())}function jt(a,n){if(1&a&&(e.ynx(0,3),e._UZ(1,"card-row-item",16)(2,"card-row-item",17),e.BQk()),2&a){const t=e.oxw(3);e.xp6(1),e.Q6J("value",null==t.employee?null:t.employee.person.dob)("isDate",!0),e.xp6(1),e.Q6J("value",t.msgTranslate(null==t.employee||null==t.employee.country?null:t.employee.country.ar_Name,null==t.employee||null==t.employee.country?null:t.employee.country.en_NAme))}}function zt(a,n){if(1&a&&e._UZ(0,"card-row-item",18),2&a){const t=e.oxw(3);e.Q6J("value",t.msgTranslate(null==t.empMarital||null==t.empMarital.comm_Marital_Status?null:t.empMarital.comm_Marital_Status.ar_Name,null==t.empMarital||null==t.empMarital.comm_Marital_Status?null:t.empMarital.comm_Marital_Status.en_Name))}}function Ht(a,n){if(1&a&&(e.TgZ(0,"div",10),e.YNc(1,Vt,2,0,"div",11),e.YNc(2,Yt,2,0,"div",11),e.YNc(3,Gt,2,0,"div",11),e.YNc(4,jt,3,3,"ng-container",12),e.YNc(5,zt,1,1,"card-row-item",13),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.isPersonalLoaded),e.xp6(1),e.Q6J("ngIf",!t.isPersonalLoaded),e.xp6(1),e.Q6J("ngIf",!t.isMaritalLoaded),e.xp6(1),e.Q6J("ngIf",t.isPersonalLoaded),e.xp6(1),e.Q6J("ngIf",t.isMaritalLoaded)}}function Wt(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-emp-marital-status-table",19),e.NdJ("afterDelete",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function $t(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,Ht,6,5,"div",7),e.YNc(6,Wt,1,2,"app-emp-marital-status-table",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.empMarital||(null==t.employee?null:t.employee.person.dob)||(null==t.employee||null==t.employee.country?null:t.employee.country.ar_Name)||(null==t.employee||null==t.employee.country?null:t.employee.country.en_NAme))("isLoaded",t.isPersonalLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("Id",t.employeeId)("isTableView",t.isTableView)}}function Kt(a,n){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",20),2&a&&e.Q6J("rowNo",5)}let Xt=(()=>{class a extends u.U{constructor(t,o){super(),this.empGeneralInfoService=t,this.employeeMaritalDataService=o,this.isPersonalLoaded=!1,this.isMaritalLoaded=!1,this.isTableView=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){this.employee=this.empGeneralInfoService.employee$.getValue(),this.empGeneralInfoService.employee$.subscribe(t=>{this.employee=t,this.personalLoadedFun()}),this.personalLoadedFun()}personalLoadedFun(){this.isPersonalLoaded=!1,null!=this.employee&&this.employeeId>0&&(this.isPersonalLoaded=!0),null==this.employee&&0==this.employeeId&&(this.isPersonalLoaded=!0)}onChangeBusinessAndCompanyId(){this.empMarital=null,this.employeeId>0&&this.checkNoBusinessOrCompany()?this.getAll():this.isMaritalLoaded=!0}getAll(){this.empMarital=null,this.employeeMaritalDataService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{if(t.message.messageType==p.u.Success){let o=t.data;o.some(i=>i.statusDate)?o.sort((i,s)=>new Date(i.statusDate).getTime()-new Date(s.statusDate).getTime()):o.sort((i,s)=>new Date(i.create_Date).getTime()-new Date(s.create_Date).getTime()),this.empMarital=o[o.length-1]}else this.errorList(t?.message?.messages);this.isMaritalLoaded=!0})}openAddEditDialog(){this.dialogsService.addEditDialog(Ot).afterClosed().subscribe(t=>{t&&(this.isMaritalLoaded=!1,this.getAll())})}afterDelete(t){t&&(this.isMaritalLoaded=!1,this.getAll())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(m.w),e.Y36(ee))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-personal-info-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row"],[1,"col-lg-2","col-12"],["cardTitle","personalInfo",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"Id","isTableView","toggleTable"],[1,"view-data-row-container"],["class","col m-auto",4,"ngIf"],["class","row",4,"ngIf"],["class","w-25","label","maritalStatus",3,"value",4,"ngIf"],[1,"col","m-auto"],["width","7rem","styleClass","p-mb-2","borderRadius","10px"],["label","dob",1,"w-25",3,"value","isDate"],["label","placeOfBirth",1,"w-25",3,"value"],["label","maritalStatus",1,"w-25",3,"value"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,$t,9,6,"div",0),e.YNc(1,Kt,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isPersonalLoaded||o.isMaritalLoaded)("ngIfElse",i)}},dependencies:[d.O5,A.E,J.y,$.O,S,x,Je]}),a})();function Ne(a){let n=a.map(t=>({...t.comm_Address,country:(0,c._f)(t.comm_Address.comm_Governorate?.comm_Country?.ar_Name,t.comm_Address.comm_Governorate?.comm_Country?.en_NAme),governorate:(0,c._f)(t.comm_Address.comm_Governorate?.ar_Name,t.comm_Address.comm_Governorate?.en_Name),address:t.comm_Address.en_Name,primary:t.comm_Address.isVaild}));return n.map(t=>{t.allAddress=`${t.address}, ${t.governorate??"-"}, ${t.country??"-"}`}),n}var M=r(78937);let te=(()=>{class a extends P.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeAddress",t)}update(t){return this.post("Personnel/Employees/Edit_EmployeeAddress",t)}GetList(t,o){return this.get("Personnel/Employees/GetList_EmployeeAddress",{params:{...o,$filter:`Person_ID eq ${t}`,$expand:`${v.db.comm_Address}.${v.db.comm_Governorate}.${v.db.comm_Country}`}})}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeAddress",{params:{$filter:`Person_ID eq ${t}`,$expand:`${v.db.comm_Address}.${v.db.comm_Governorate}.${v.db.comm_Country}`}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeAddress",{params:t})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var F=r(25273),Y=r(12613),Me=r(68756),Fe=r(59681);function oo(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.toEdit(i))})("deleteRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let Oe=(()=>{class a extends u.U{constructor(t){super(),this.employeeAddressService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["country","governorate","address","primary","actions"],this.optionalColomns=[],this.isLoaded=!1,this.employeeId=0,this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_contact_address_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.employeeId>0&&this.checkNoBusinessOrCompany()&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new g.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeAddressService.GetList(this.employeeId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(s=>{s.message.messageType==p.u.Success?(this.dataSource=new g.by(Ne(s.data)),this.page.length=s.meta.totalItemCount,this.page.meta=s.meta,this.isLoaded=!0):this.errorList(s?.message?.messages)})}toEdit(t){this.rowToEdit.emit(t)}onDelete(t){this.deleteDialog(t.address).subscribe(i=>{i&&this.delete(t)})}delete(t){let o={Person_ID:this.employeeId,ADDRESS_ID:t.id};this.showLoading("table"),this.employeeAddressService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeaddressRemoved"),this.afterDelete.emit(t),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize)):this.errorList(i?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(te))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-address-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,oo,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,C.Ro]}),a})();function ao(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",19),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let io=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeAddressService=t,this.dialogRef=o,this.employeeId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_contact_address_sec)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],countryId:[null,[l.kI.required]],Governorate_ID:[null,[l.kI.required]],address:[null,[l.kI.required,M.w.whiteSpace]],primary:[null]}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}get formCtrls(){return this.form.controls}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={EmployeeData:{Person_ID:this.employeeId,Comm_Address:{ID:this.form.value.id,Governorate_ID:this.form.value.Governorate_ID,En_Name:this.form.value.address,IsVaild:this.form.value.primary??!1}}};0==t.EmployeeData.Comm_Address.ID?this.create(t):this.update(t)}}create(t){this.showLoading("dialog"),this.employeeAddressService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newEmployeeAddressAdded"),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){this.showLoading("dialog"),this.employeeAddressService.update(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg("employeeaddressUpdated"),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}employeeAddressToEdit(t){this.form.patchValue(t),this.formCtrls.countryId.setValue(t.comm_Governorate.comm_Country.id),this.formCtrls.Governorate_ID.setValue(t.governorate_ID)}afterDelete(t){t?.id==this.formCtrls.id.value&&this.clearForm(),t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(te),e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-address-dialog"]],features:[e.qOj],decls:22,vars:20,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","address",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","submitted","filter","appendTo"],[3,"control","countryControl","submitted","filter","appendTo"],["label","address",3,"control","submitted"],[1,"col-md-4","col-sm-6","col-12","mbottom-20","mtop-14"],["label","primary",3,"control"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-country-dropdown",10),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"governorate-dropdown",11),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"app-input",12),e.qZA(),e.TgZ(16,"div",13),e._UZ(17,"app-check-box",14),e.qZA()()(),e.TgZ(18,"div",15)(19,"submit-btn",16),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(20,ao,1,0,"reset-form-btn",17),e.qZA(),e.TgZ(21,"emp-address-table",18),e.NdJ("rowToEdit",function(s){return o.employeeAddressToEdit(s)})("afterDelete",function(s){return o.afterDelete(s)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.countryId)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.Governorate_ID)("countryControl",o.formCtrls.countryId)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.address)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.primary),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,F.a,Y.u,Z.J,D.p,I.T,E.lW,_.uh,_.xY,C.Ro,Me.n,Fe.z,l._Y,l.JL,l.sg,Oe]}),a})();function no(a,n){if(1&a&&(e.TgZ(0,"div",10),e._UZ(1,"card-row-item",11)(2,"card-row-item",12)(3,"card-row-item",13)(4,"card-row-item",14),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("value",null==t.employeeAddressInfo?null:t.employeeAddressInfo.country),e.xp6(1),e.Q6J("value",null==t.employeeAddressInfo?null:t.employeeAddressInfo.governorate),e.xp6(1),e.Q6J("value",null==t.employeeAddressInfo?null:t.employeeAddressInfo.address),e.xp6(1),e.Q6J("value",null==t.employeeAddressInfo?null:t.employeeAddressInfo.primary)("isBool",!0)}}function so(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"emp-address-table",15),e.NdJ("afterDelete",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function lo(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,no,5,5,"div",7),e.YNc(6,so,1,2,"emp-address-table",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.employeeAddressInfo)("isLoaded",t.isAddressLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("Id",t.employeeId)("isTableView",t.isTableView)}}function ro(a,n){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",16),2&a&&e.Q6J("rowNo",4)}let po=(()=>{class a extends u.U{constructor(t){super(),this.employeeAddressService=t,this.isAddressLoaded=!1,this.isTableView=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){}onChangeBusinessAndCompanyId(){this.employeeAddressInfo=null,this.employeeId>0&&this.checkNoBusinessOrCompany()?this.GetAllEmpAddress():this.isAddressLoaded=!0}GetAllEmpAddress(){return this.employeeAddressService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{if(t.message.messageType==p.u.Success){this.isAddressLoaded=!0;let o=Ne(t.data).reverse();this.employeeAddressInfo=o.find(i=>1==i.primary)??o[0]}else this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(io).afterClosed().subscribe(t=>{t&&(this.isAddressLoaded=!1,this.GetAllEmpAddress())})}afterDelete(t){t&&(this.isAddressLoaded=!1,this.GetAllEmpAddress())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(te))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-address-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","address",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"Id","isTableView","toggleTable"],[1,"view-data-row-container"],["label","country",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],["label","governorate",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],["label","address",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],["label","primary",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value","isBool"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,lo,9,6,"div",0),e.YNc(1,ro,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isAddressLoaded)("ngIfElse",i)}},dependencies:[d.O5,A.E,J.y,S,x,Oe]}),a})(),oe=(()=>{class a extends P.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeContactType",t)}update(t){return this.post("Personnel/Employees/Edit_EmployeeContactType",t)}GetList(t,o){return this.get("Personnel/Employees/GetList_EmployeeContactType",{params:{...o,$filter:`Person_ID eq ${t}`,$expand:`${v.db.comm_Contact}.${v.db.comm_Contact_Type},${v.db.comm_Contact}.${v.db.comm_Contact_Category}`}})}GetAll(t){return this.get("Personnel/Employees/GetAll_EmployeeContactType",{params:{$filter:`Person_ID eq ${t}`,$expand:`${v.db.comm_Contact}.${v.db.comm_Contact_Type},${v.db.comm_Contact}.${v.db.comm_Contact_Category}`}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeContactType",{params:t})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var co=r(99167),mo=r(58092);function uo(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.toEdit(i))})("deleteRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("page",t.page)("actions",t.rowFunctions)("showFilter",!1)("isDialogSize",!0)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let Ue=(()=>{class a extends u.U{constructor(t){super(),this.employeeContactService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["contactType","contactCategory","contact","primary","display_in_emp_card","actions"],this.optionalColomns=[],this.isLoaded=!1,this.employeeId=0,this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_contact_address_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.checkNoBusinessOrCompany()&&this.employeeId>0&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new g.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeContactService.GetList(this.employeeId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(s=>{s.message.messageType==p.u.Success?(this.dataSource=new g.by(function eo(a){return a.map(n=>({contactType:(0,c._f)(n?.comm_Contact?.comm_Contact_Type?.ar_Name,n?.comm_Contact?.comm_Contact_Type?.en_Name),contactCategory:(0,c._f)(n?.comm_Contact?.comm_Contact_Category?.ar_Name,n?.comm_Contact?.comm_Contact_Category?.en_Name),contact:n?.comm_Contact?.value,primary:n?.comm_Contact?.isVaild,display_in_emp_card:n?.comm_Contact?.isShow,person_ID:n.person_ID,contact_ID:n.contact_ID,contacT_TYPE_ID:n.comm_Contact?.contacT_TYPE_ID,contacT_Category_ID:n.comm_Contact?.contacT_Category_ID}))}(s.data)),this.page.length=s.meta.totalItemCount,this.page.meta=s.meta,this.isLoaded=!0):this.errorList(s?.message?.messages)})}toEdit(t){this.rowToEdit.emit(t)}onDelete(t){this.deleteDialog(t.contact).subscribe(i=>{i&&this.delete(t)})}delete(t){let o={Person_ID:this.employeeId,Contact_ID:t.contact_ID};this.showLoading("table"),this.employeeContactService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeContactRemoved"),this.afterDelete.emit(t),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize)):this.errorList(i?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(oe))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-contact-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","showFilter","isDialogSize","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","showFilter","isDialogSize","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,uo,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,C.Ro]}),a})();function _o(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",20),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let go=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeContactService=t,this.dialogRef=o,this.employeeId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_contact_address_sec)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],contacT_TYPE_ID:[null,[l.kI.required]],contacT_Category_ID:[null],value:[null,[l.kI.required]],isPrimary:[null],isShow:[null]}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}get formCtrls(){return this.form.controls}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={EmployeeData:{Person_ID:this.employeeId,Comm_Contact:{id:this.form.value.id,contacT_TYPE_ID:this.form.value.contacT_TYPE_ID,contacT_Category_ID:this.form.value.contacT_Category_ID,value:this.form.value.value,isVaild:this.form.value.isPrimary??!1,isShow:this.form.value.isShow??!1}}};0==t.EmployeeData.Comm_Contact.id?this.create(t):this.update(t)}}create(t){this.showLoading("dialog"),this.employeeContactService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newEmployeeContactAdded"),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){this.showLoading("dialog"),this.employeeContactService.update(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg("employeeContactUpdated"),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}employeeContactToEdit(t){this.form.patchValue(t),this.formCtrls.value.setValue(t.contact),this.formCtrls.id.setValue(t.contact_ID),this.formCtrls.isPrimary.setValue(t.primary),this.formCtrls.isShow.setValue(t.display_in_emp_card)}afterDelete(t){t.contact_ID==this.formCtrls.id.value&&this.clearForm(),t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}onChangeContactType(t){t?this.formCtrls.value.setValidators([l.kI.pattern(t[0]?.regularExpression)]):this.formCtrls.value.removeValidators([l.kI.pattern(t[0]?.regularExpression)])}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(oe),e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-contact-dialog"]],features:[e.qOj],decls:24,vars:21,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","contact",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","submitted","filter","appendTo","change"],[3,"control","contactTypControl","submitted","filter","appendTo"],["label","contact",3,"control","submitted"],[1,"col-md-4","col-sm-6","col-12","mbottom-14","mtop-14"],["label","primary",3,"control"],["label","display_in_emp_card",3,"control"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9)(11,"app-contact-type-dropdown",10),e.NdJ("change",function(s){return o.onChangeContactType(s)}),e.qZA()(),e.TgZ(12,"div",9),e._UZ(13,"contact-categories-by-contact-dropdown",11),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"app-input",12),e.qZA(),e.TgZ(16,"div",13),e._UZ(17,"app-check-box",14),e.qZA(),e.TgZ(18,"div",13),e._UZ(19,"app-check-box",15),e.qZA()()(),e.TgZ(20,"div",16)(21,"submit-btn",17),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(22,_o,1,0,"reset-form-btn",18),e.qZA(),e.TgZ(23,"emp-contact-table",19),e.NdJ("rowToEdit",function(s){return o.employeeContactToEdit(s)})("afterDelete",function(s){return o.afterDelete(s)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.contacT_TYPE_ID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.contacT_Category_ID)("contactTypControl",o.formCtrls.contacT_TYPE_ID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.value)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.isPrimary),e.xp6(2),e.Q6J("control",o.formCtrls.isShow),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,F.a,Y.u,Z.J,D.p,I.T,E.lW,_.uh,_.xY,C.Ro,co.p,mo.v,l._Y,l.JL,l.sg,Ue]}),a})();function ho(a,n){if(1&a&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&a){const t=e.oxw(),o=t.$implicit,i=t.last;e.xp6(1),e.AsE(" ",o.value," ",i?"":"-"," ")}}function fo(a,n){if(1&a&&(e.TgZ(0,"span")(1,"a",18),e._UZ(2,"i"),e.qZA()()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("href",t.value,e.LSH),e.xp6(1),e.Tol(t.comm_Contact_Category.icon)}}function bo(a,n){if(1&a&&(e.ynx(0),e.YNc(1,ho,2,2,"span",12),e.YNc(2,fo,3,3,"span",12),e.BQk()),2&a){const t=n.$implicit;e.xp6(1),e.Q6J("ngIf",!(null!=t&&null!=t.comm_Contact_Category&&t.comm_Contact_Category.icon)),e.xp6(1),e.Q6J("ngIf",null==t||null==t.comm_Contact_Category?null:t.comm_Contact_Category.icon)}}function Co(a,n){if(1&a&&(e.TgZ(0,"div",13)(1,"p",14),e._uU(2),e.ALo(3,"titlecase"),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",15)(6,"div",16),e.YNc(7,bo,3,2,"ng-container",17),e.qZA()()()),2&a){const t=n.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,2,e.lcZ(4,4,t.key))," "),e.xp6(5),e.Q6J("ngForOf",t.value)}}function yo(a,n){1&a&&(e.ynx(0),e._UZ(1,"card-row-item",19),e.BQk())}function Io(a,n){if(1&a&&(e.TgZ(0,"div",10),e.YNc(1,Co,8,6,"div",11),e.ALo(2,"keyvalue"),e.YNc(3,yo,2,0,"ng-container",12),e.ALo(4,"json"),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.xi3(2,2,t.empContacts,t.iteration)),e.xp6(2),e.Q6J("ngIf","{}"==e.lcZ(4,5,t.empContacts)||!t.employeeId)}}function vo(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"emp-contact-table",20),e.NdJ("afterDelete",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function To(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.ALo(4,"json"),e.qZA()(),e.TgZ(5,"div",6),e.YNc(6,Io,5,7,"div",7),e.YNc(7,vo,1,2,"emp-contact-table",8),e.qZA(),e.TgZ(8,"div",4)(9,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit","{}"!=e.lcZ(4,6,t.empContacts)&&t.employeeId)("isLoaded",t.isContactLoaded),e.xp6(3),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("Id",t.employeeId)("isTableView",t.isTableView)}}function wo(a,n){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",21),2&a&&e.Q6J("rowNo",5)}let Do=(()=>{class a extends u.U{constructor(t){super(),this.employeeContactService=t,this.isContactLoaded=!1,this.isTableView=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){}onChangeBusinessAndCompanyId(){this.empContacts=null,this.employeeId>0&&this.checkNoBusinessOrCompany()?this.GetAllEmpContacts():this.isContactLoaded=!0}GetAllEmpContacts(){return this.employeeContactService.GetAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.isContactLoaded=!0,this.empContacts=function to(a){let n=[];return a.map(o=>{o.comm_Contact.comm_Contact_Type.displayName=(0,c._f)(o.comm_Contact?.comm_Contact_Type.ar_Name,o.comm_Contact?.comm_Contact_Type.en_Name),o.comm_Contact?.isShow&&n.push(o.comm_Contact)}),n.reduce((o,i)=>(o[i.comm_Contact_Type?.displayName]=o[i.comm_Contact_Type?.displayName]||[],o[i.comm_Contact_Type?.displayName].push(i),o),{})}(t.data)):this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(go).afterClosed().subscribe(t=>{t&&(this.isContactLoaded=!1,this.GetAllEmpContacts())})}afterDelete(t){t&&(this.isContactLoaded=!1,this.GetAllEmpContacts())}toggleTable(){this.isTableView=!this.isTableView}iteration(t,o){return t.key-o.key}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(oe))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-contact-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","contact",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"Id","isTableView","toggleTable"],[1,"view-data-row-container"],["class","col-6 col-md-4 col-lg-3  ml-md-1 mr-md-1 mb-2",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-6","col-md-4","col-lg-3","ml-md-1","mr-md-1","mb-2"],[1,"view-data-title"],[1,"view-data-value"],[1,"d-inline-block"],[4,"ngFor","ngForOf"],["target","_blank",1,"mr-1","ml-1","font-medium-3",3,"href"],["label","contact",1,"w-15"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,To,10,8,"div",0),e.YNc(1,wo,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isContactLoaded)("ngIfElse",i)}},dependencies:[d.sg,d.O5,A.E,J.y,S,x,Ue,d.Ts,d.rS,d.Nd,L.X$]}),a})();var U=r(43949),ae=r(44949),Eo=r(88834);function So(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",1),e.NdJ("onChangePage",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.toEdit(i))})("deleteRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("page",t.page)("actions",t.rowFunctions)("isDialogSize",!0)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showFilter",!1)("showSpaceTop",!1)}}let Qe=(()=>{class a extends u.U{constructor(t){super(),this.employeeDependantService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["dependentName","relationship","birthDate","phoneNumber","isEmergcy","actions"],this.optionalColomns=[],this.isLoaded=!1,this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_dependants_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.checkNoBusinessOrCompany()&&this.employeeId>0&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new g.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeDependantService.getList(this.employeeId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(s=>{s.message.messageType==p.u.Success?(this.dataSource=new g.by(Le(s.data)),this.page.length=s.meta.totalItemCount,this.page.meta=s.meta,this.isLoaded=!0):this.errorList(s?.message?.messages)})}toEdit(t){this.rowToEdit.emit(t)}onDelete(t){this.deleteDialog(t.flower_Name).subscribe(i=>{i&&this.delete(t)})}delete(t){this.showLoading("table"),this.employeeDependantService.Delete(t.id).subscribe(o=>{o.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeDependantRemoved"),this.afterDelete.emit(t),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize)):this.errorList(o?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ae.P))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-dependants-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:1,vars:1,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","isDialogSize","isMatPaginator","showFirstLastButtons","showFilter","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","isDialogSize","isMatPaginator","showFirstLastButtons","showFilter","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&e.YNc(0,So,1,11,"app-material-table",0),2&t&&e.Q6J("ngIf",o.employeeId>0)},dependencies:[d.O5,w.I]}),a})();function xo(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",19),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let Ao=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeDependantService=t,this.dialogRef=o,this.employeeId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],name:[null,[l.kI.required,M.w.whiteSpace]],relationship_ID:[null,[l.kI.required]],birthDate:[null,[U.dN.date]],phoneNumber:[null,[l.kI.pattern(/^(\(?\+?[0-9]*\)?)?[0-9_ \-\(\)\S*$]*$/),M.w.MobileStartsWith,M.w.mobileLength]],isEmergcy:[null]}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}get formCtrls(){return this.form.controls}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={employeeData:{person_ID:this.employeeId,id:this.form.value.id,flower_Name:this.form.value.name,relationship_ID:this.form.value.relationship_ID,birthDate:this.form.value.birthDate,phoneNumber:this.form.value.phoneNumber,isEmergcy:this.form.value.isEmergcy??!1}};0==t.employeeData.id?this.create(t):this.update(t)}}create(t){this.showLoading("dialog"),this.employeeDependantService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newEmployeeDependantAdded"),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){this.showLoading("dialog"),this.employeeDependantService.update(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg("employeeDependantUpdated"),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}employeeDependantToEdit(t){this.form.patchValue(t),this.formCtrls.name.setValue(t.flower_Name),this.formCtrls.birthDate.setValue(t.originalBirthDateFormat)}afterDelete(t){t?.id==this.formCtrls.id.value&&this.clearForm(),t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ae.P),e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee-dependants-dialog"]],features:[e.qOj],decls:23,vars:18,consts:[["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","dependants",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],["label","name",3,"control","submitted"],[3,"control","submitted","filter","appendTo"],["label","birthDate",3,"control","submitted"],["label","phone",3,"control","submitted"],[1,"col-md-4","col-sm-6","col-12","mbottom-20","mtop-14"],["label","emergencyContact",3,"control"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"h4"),e._UZ(2,"page-title",1),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(4,"i",3),e.qZA()(),e.TgZ(5,"mat-dialog-content",4,5)(7,"form",6)(8,"div",7)(9,"div",8),e._UZ(10,"app-input",9),e.qZA(),e.TgZ(11,"div",8),e._UZ(12,"app-relationship-dropdown",10),e.qZA(),e.TgZ(13,"div",8),e._UZ(14,"app-datepicker",11),e.qZA(),e.TgZ(15,"div",8),e._UZ(16,"app-input",12),e.qZA(),e.TgZ(17,"div",13),e._UZ(18,"app-check-box",14),e.qZA()()(),e.TgZ(19,"div",15)(20,"submit-btn",16),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(21,xo,1,0,"reset-form-btn",17),e.qZA(),e.TgZ(22,"app-emp-dependants-table",18),e.NdJ("rowToEdit",function(s){return o.employeeDependantToEdit(s)})("afterDelete",function(s){return o.afterDelete(s)}),e.qZA()()),2&t){const i=e.MAs(6);e.xp6(7),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.name)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.relationship_ID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.birthDate)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.phoneNumber)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.isEmergcy),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,N.Q,F.a,Y.u,Z.J,D.p,I.T,E.lW,_.uh,_.xY,Eo.Q,l._Y,l.JL,l.sg,Qe]}),a})();var b=r(37340);function Zo(a,n=!1){return(0,b.X$)("fadeIn",[(0,b.eR)(":enter",[(0,b.oB)(n?{opacity:0,height:0}:{opacity:0}),(0,b.jt)(a,(0,b.oB)(n?{opacity:1,height:"fit-content"}:{opacity:1}))])])}function Lo(a,n=!1){return(0,b.X$)("fadeOut",[(0,b.eR)(":leave",[(0,b.jt)(a,(0,b.oB)(n?{opacity:0,height:0}:{opacity:0}))])])}function Po(a,n,t=!1){return(0,b.X$)("fadeInOut",[(0,b.eR)(":enter",[(0,b.oB)(t?{opacity:0,height:0}:{opacity:0}),(0,b.jt)(a,(0,b.oB)(t?{opacity:1,height:"fit-content"}:{opacity:1}))]),(0,b.eR)(":leave",[(0,b.jt)(n,(0,b.oB)(t?{opacity:0,height:0}:{opacity:0}))])])}function Jo(a,n){1&a&&(e.TgZ(0,"span"),e._uU(1),e._UZ(2,"i",19),e.qZA()),2&a&&(e.xp6(1),e.hij(" "," "," "))}function ko(a,n){if(1&a&&(e.TgZ(0,"div",10),e._UZ(1,"card-row-item",11)(2,"card-row-item",12)(3,"card-row-item",13),e.TgZ(4,"div",14)(5,"p",15),e._uU(6),e.ALo(7,"titlecase"),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"div",16)(10,"div",17),e._uU(11),e.qZA(),e.YNc(12,Jo,3,1,"span",18),e.qZA()()()),2&a){const t=e.oxw(2);let o;e.xp6(1),e.Q6J("value",null==t.empDependant?null:t.empDependant.flower_Name),e.xp6(1),e.Q6J("value",null==t.empDependant?null:t.empDependant.relationship),e.xp6(1),e.Q6J("value",null==t.empDependant?null:t.empDependant.birthDate),e.xp6(3),e.hij(" ",e.lcZ(7,6,e.lcZ(8,8,"phoneNumber"))," "),e.xp6(5),e.hij(" ",null!==(o=null==t.empDependant?null:t.empDependant.phoneNumber)&&void 0!==o?o:"---"," "),e.xp6(1),e.Q6J("ngIf",null==t.empDependant?null:t.empDependant.isEmergcy)}}function No(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-emp-dependants-table",20),e.NdJ("afterDelete",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function Mo(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,ko,13,10,"div",7),e.YNc(6,No,1,2,"app-emp-dependants-table",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.empDependant)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("Id",t.employeeId)("isTableView",t.isTableView)}}function Fo(a,n){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",21),2&a&&e.Q6J("rowNo",4)}(0,b.X$)("slideInOut",[(0,b.SB)("1",(0,b.oB)({height:"*"})),(0,b.SB)("0",(0,b.oB)({height:"0px"})),(0,b.eR)("1 <=> 0",(0,b.jt)(200))]),(0,b.X$)("slideInOut",[(0,b.SB)("in",(0,b.oB)({"max-height":"500px",opacity:"1",visibility:"visible"})),(0,b.SB)("out",(0,b.oB)({"max-height":"0px",opacity:"0",visibility:"hidden"})),(0,b.eR)("in => out",[(0,b.ru)([(0,b.jt)("400ms ease-in-out",(0,b.oB)({opacity:"0"})),(0,b.jt)("600ms ease-in-out",(0,b.oB)({"max-height":"0px"})),(0,b.jt)("700ms ease-in-out",(0,b.oB)({visibility:"hidden"}))])]),(0,b.eR)("out => in",[(0,b.ru)([(0,b.jt)("1ms ease-in-out",(0,b.oB)({visibility:"visible"})),(0,b.jt)("600ms ease-in-out",(0,b.oB)({"max-height":"500px"})),(0,b.jt)("800ms ease-in-out",(0,b.oB)({opacity:"1"}))])])]);let Oo=(()=>{class a extends u.U{constructor(t){super(),this.employeeDependantService=t,this.isLoaded=!1,this.isTableView=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){}onChangeBusinessAndCompanyId(){this.empDependant=null,this.employeeId>0&&this.checkNoBusinessOrCompany()?this.getAllDependant():this.isLoaded=!0}getAllDependant(){this.empDependant=null,this.employeeDependantService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{if(t.message.messageType==p.u.Success){let o=Le(t.data);this.empDependant=o.find(i=>1==i.isEmergcy)??o[0],this.isLoaded=!0}else this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(Ao).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAllDependant())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAllDependant())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ae.P))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-dependants-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row"],[1,"col-lg-2","col-12"],["cardTitle","dependants",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"Id","isTableView","toggleTable"],[1,"view-data-row-container"],["label","name",1,"col-6","col-lg-3","px-0","mb-2",3,"value"],["label","relationship",1,"col-6","col-lg-3","px-0","mb-2",3,"value"],["label","dob",1,"col-6","col-lg-3","px-0","mb-2",3,"value"],[1,"col-6","col-lg-3","px-0","mb-2"],[1,"view-data-title"],[1,"view-data-value"],[1,"d-inline-block"],[4,"ngIf"],[1,"fas","fa-bell","danger"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,Mo,9,6,"div",0),e.YNc(1,Fo,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.O5,A.E,J.y,S,x,Qe,d.rS,L.X$],data:{animation:[Zo(600),Lo(300),Po(600,300)]}}),a})(),ie=(()=>{class a extends P.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeMilitaryStatus",t)}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeMilitaryStatus",{params:{$filter:`PersonID eq ${t}`,$expand:`${v.db.comm_Military_Status},${v.db.comm_Military_Grade}`}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeMilitaryStatus",{params:t})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var Uo=r(19634),Qo=r(17503);function qo(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.toEdit(i))})("deleteRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let qe=(()=>{class a extends u.U{constructor(t){super(),this.employeeMilitaryDataService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["status","grade","statusDate","endDate","actions"],this.optionalColomns=[],this.employeeId=0,this.isLoaded=!1,this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_military_data_sec)}getList(t,o){throw new Error("Method not implemented.")}ngOnChanges(t){t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeId>0&&this.getAll()}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.checkNoBusinessOrCompany()&&this.employeeId>0&&this.getAll()}getAll(){this.dataSource=new g.by(null),this.isLoaded=!1,this.employeeMilitaryDataService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.dataSource=new g.by(K(t.data)),this.isLoaded=!0):this.errorList(t?.message?.messages)})}onDelete(t){this.deleteDialog(t.status).subscribe(i=>{i&&this.delete(t)})}delete(t){let o={PersonID:this.employeeId,MilitaryID:t.militaryID};this.showLoading("table"),this.employeeMilitaryDataService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.afterDelete.emit(t),this.deleteSuccessfullyMsg("employeeMilitaryDataRemoved"),this.getAll()):this.errorList(i?.message?.messages),this.hideLoading("table")})}toEdit(t){this.rowToEdit.emit(t)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ie))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-military-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,qo,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,C.Ro]}),a})();function Ro(a,n){if(1&a&&(e.TgZ(0,"div",9),e._UZ(1,"app-military-grade-dropdown",16),e.qZA()),2&a){const t=e.oxw(),o=e.MAs(7);e.xp6(1),e.Q6J("control",t.formCtrls.gradeID)("submitted",t.submitted)("filter",!0)("appendTo",o)}}function Bo(a,n){if(1&a&&(e.TgZ(0,"div",9),e._UZ(1,"app-datepicker",17),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("control",t.formCtrls.statusDate)("submitted",t.submitted)("label",1==(null==t.selectedStatus?null:t.selectedStatus.dateMandatory)?"date":"startDate")}}function Vo(a,n){if(1&a&&(e.TgZ(0,"div",9),e._UZ(1,"app-datepicker",18),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("control",t.formCtrls.endDate)("submitted",t.submitted)}}function Yo(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",19),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let Go=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeMilitaryDataService=t,this.dialogRef=o,this.employeeId=0,this.hasUpdate=!1,this.getList=!1,this.mandatoryColomns=["Ser","status","grade","statusDate","endDate","actions"],this.optionalColomns=[],this.isLoaded=!1,this.submitted=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],militaryID:[null,[l.kI.required]],gradeID:[null],statusDate:[null,[U.dN.date]],endDate:[null,[U.dN.date]]},{validator:M.w.compareDates("statusDate","endDate")}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}get formCtrls(){return this.form.controls}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={EmployeeData:{PersonID:this.employeeId,militaryID:this.form.value.militaryID}};this.selectedStatus.showGrade&&(t.EmployeeData.gradeID=this.form.value.gradeID),this.selectedStatus.dateMandatory>0&&(t.EmployeeData.statusDate=c.M6.mapDateReverse(this.form.value.statusDate),2==this.selectedStatus.dateMandatory&&(t.EmployeeData.endDate=c.M6.mapDateReverse(this.form.value.endDate))),this.create(t)}}create(t){this.showLoading("dialog"),this.employeeMilitaryDataService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canRemoveFromIndex","newEmployeeMilitaryDataAdded"),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}clearForm(){this.form.reset({id:0}),this.submitted=!1}afterDelete(t){t?.comm_Military_Status.id==this.formCtrls.id.value&&this.clearForm(),t&&(this.hasUpdate=!0)}onChangeStatus(t){this.selectedStatus=t?.length>0?t[0]:null,this.selectedStatus?.showGrade?this.formCtrls.gradeID.setValidators([l.kI.required]):this.formCtrls.gradeID.clearValidators(),this.formCtrls.gradeID.updateValueAndValidity()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ie),e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee-military-data-dialog"]],features:[e.qOj],decls:19,vars:15,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","militaryData",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","submitted","filter","appendTo","change"],["class","col-md-4 col-sm-6 col-12",4,"ngIf"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","afterDelete"],[3,"control","submitted","filter","appendTo"],[3,"control","submitted","label"],["label","endDate",3,"control","submitted"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9)(11,"app-military-status-dropdown",10),e.NdJ("change",function(s){return o.onChangeStatus(s)}),e.qZA()(),e.YNc(12,Ro,2,4,"div",11),e.YNc(13,Bo,2,3,"div",11),e.YNc(14,Vo,2,2,"div",11),e.qZA()(),e.TgZ(15,"div",12)(16,"submit-btn",13),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(17,Yo,1,0,"reset-form-btn",14),e.qZA(),e.TgZ(18,"app-emp-military-table",15),e.NdJ("afterDelete",function(s){return o.afterDelete(s)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.militaryID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(1),e.Q6J("ngIf",!o.formCtrls.militaryID.value||(null==o.selectedStatus?null:o.selectedStatus.showGrade)),e.xp6(1),e.Q6J("ngIf",!o.formCtrls.militaryID.value||(null==o.selectedStatus?null:o.selectedStatus.dateMandatory)>0),e.xp6(1),e.Q6J("ngIf",2==(null==o.selectedStatus?null:o.selectedStatus.dateMandatory)),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,N.Q,Z.J,D.p,I.T,E.lW,_.uh,_.xY,C.Ro,Uo.e,Qo.h,l._Y,l.JL,l.sg,qe]}),a})();function jo(a,n){if(1&a&&e._UZ(0,"card-row-item",15),2&a){const t=e.oxw(3);e.Q6J("value",null==t.empMilitary?null:t.empMilitary.grade)}}function zo(a,n){if(1&a&&e._UZ(0,"card-row-item",16),2&a){const t=e.oxw(3);e.Q6J("label",1==(null==t.empMilitary?null:t.empMilitary.comm_Military_Status.dateMandatory)?"date":"startDate")("value",null==t.empMilitary?null:t.empMilitary.statusDate)}}function Ho(a,n){if(1&a&&e._UZ(0,"card-row-item",17),2&a){const t=e.oxw(3);e.Q6J("value",null==t.empMilitary?null:t.empMilitary.endDate)}}function Wo(a,n){if(1&a&&(e.TgZ(0,"div",10),e._UZ(1,"card-row-item",11),e.YNc(2,jo,1,1,"card-row-item",12),e.YNc(3,zo,1,2,"card-row-item",13),e.YNc(4,Ho,1,1,"card-row-item",14),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("value",null==t.empMilitary?null:t.empMilitary.status),e.xp6(1),e.Q6J("ngIf",null==t.empMilitary?null:t.empMilitary.comm_Military_Status.showGrade),e.xp6(1),e.Q6J("ngIf",!t.empMilitary||(null==t.empMilitary?null:t.empMilitary.comm_Military_Status.dateMandatory)>0),e.xp6(1),e.Q6J("ngIf",2==(null==t.empMilitary?null:t.empMilitary.comm_Military_Status.dateMandatory))}}function $o(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-emp-military-table",18),e.NdJ("afterDelete",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function Ko(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,Wo,5,4,"div",7),e.YNc(6,$o,1,2,"app-emp-military-table",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.empMilitary)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("Id",t.employeeId)("isTableView",t.isTableView)}}function Xo(a,n){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",19),2&a&&e.Q6J("rowNo",4)}let ea=(()=>{class a extends u.U{constructor(t){super(),this.employeeMilitaryDataService=t,this.isLoaded=!1,this.isTableView=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){}onChangeBusinessAndCompanyId(){this.empMilitary=null,this.employeeId>0&&this.checkNoBusinessOrCompany()?this.getAllEmpMilitary():this.isLoaded=!0}getAllEmpMilitary(){this.empMilitary=null,this.employeeMilitaryDataService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{if(t.message.messageType==p.u.Success)if(t.data.length>1){let o=t.data;const i=t.data.reduce((s,f)=>new Date(s.create_Date).getTime()>new Date(f.statusDate).getTime()?s:f).create_Date;o=o.filter(s=>s.create_Date==i),1==o.length?this.empMilitary=K(o)[0]:(o.sort((s,f)=>new Date(s.statusDate).getTime()-new Date(f.statusDate).getTime()),this.empMilitary=K([o[o.length-1]])[0])}else this.empMilitary=K(t.data)[0];else this.errorList(t?.message?.messages);this.isLoaded=!0})}openAddEditDialog(){this.dialogsService.addEditDialog(Go).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAllEmpMilitary())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAllEmpMilitary())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ie))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-military-data-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","militaryData",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"Id","isTableView","toggleTable"],[1,"view-data-row-container"],["label","status",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],["class","col-6 col-md-4 col-lg-3 px-0 mb-2","label","grade",3,"value",4,"ngIf"],["class","col-6 col-md-4 col-lg-3 px-0 mb-2",3,"label","value",4,"ngIf"],["class","col-6 col-md-4 col-lg-3 px-0 mb-2","label","endDate",3,"value",4,"ngIf"],["label","grade",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],[1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"label","value"],["label","endDate",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,Ko,9,6,"div",0),e.YNc(1,Xo,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.O5,A.E,J.y,S,x,qe]}),a})(),ne=(()=>{class a extends P.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeIdentityInformation",t)}update(t){return this.post("Personnel/Employees/Edit_EmployeeIdentityInformation",t)}getList(t,o){return this.get("Personnel/Employees/GetList_EmployeeIdentityInformation",{params:{...o,$filter:`PersonID eq ${t}`,$expand:v.db.Core_Personal_Identity_Type}})}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeIdentityInformation",{params:{$filter:`PersonID eq ${t}`,$expand:v.db.Core_Personal_Identity_Type}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeIdentityInformation",{params:{Id:t}})}DeleteAttachment(t){return this.delete("Personnel/Employees/Delete_EmployeeIdentityInformation_Attachment",{params:{ID:t}})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var se=r(857),ta=r(61962);function oa(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.toEdit(i))})("deleteRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("page",t.page)("actions",t.rowFunctions)("isDialogSize",!0)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showFilter",!1)("showSpaceTop",!1)("attachIconColumnData",t.attachIconColumnData)}}let Re=(()=>{class a extends u.U{constructor(t){super(),this.employeeDocumentsService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["documentName","dateof_issue","expire_Date","identity_Number","attachment","actions"],this.optionalColomns=[],this.attachIconColumnData={columnName:"attachment",icon:"fas fa-file-alt"},this.isLoaded=!1,this.employeeId=0,this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_documents_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.checkNoBusinessOrCompany()&&this.employeeId>0&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new g.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeDocumentsService.getList(this.employeeId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(s=>{s.message.messageType==p.u.Success?(this.dataSource=new g.by(s.data?.length>0?Pe(s.data):[]),this.page.length=s?.meta?.totalItemCount,this.page.meta=s.meta,this.isLoaded=!0):this.errorList(s?.message?.messages)})}onDelete(t){let o=this.msgTranslate(t.documentName);this.deleteDialog(o).subscribe(i=>{i&&this.delete(t)})}toEdit(t){this.rowToEdit.emit(t)}delete(t){this.showLoading("table"),this.employeeDocumentsService.Delete(t.empIdentityID).subscribe(o=>{o.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeDocumentRemoved"),this.hasUpdate=!0,this.afterDelete.emit(t),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize)):this.errorList(o?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ne))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-documents-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","isDialogSize","isMatPaginator","showFirstLastButtons","showFilter","showSpaceTop","attachIconColumnData","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","isDialogSize","isMatPaginator","showFirstLastButtons","showFilter","showSpaceTop","attachIconColumnData","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,oa,1,12,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,C.Ro]}),a})();function aa(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",20),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let ia=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeDocumentsService=t,this.dialogRef=o,this.employeeId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.removeFiles=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],documentId:[null,[l.kI.required]],issuingDate:[null,[l.kI.required]],expirationDate:[null,[U.dN.date]],identity_Number:[null,[U.dN.digits]],file:[null]},{validator:M.w.compareDates("issuingDate","expirationDate")}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}get formCtrls(){return this.form.controls}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}submit(){if(this.submitted=!0,this.getList=!1,this.removeFiles=!1,this.form.valid){const t={personID:this.employeeId,empIdentityID:this.form.value.id,identity_TypeID:this.form.value.documentId,dateof_issue:c.M6.mapDateReverse(this.form.value.issuingDate),expire_Date:c.M6.mapDateReverse(this.form.value.expirationDate)??"",identity_Number:this.form.value.identity_Number??"",files:this.form.value.file},o=c.M6.objectToFormData(t);0==t.empIdentityID?this.create(o):this.update(o)}}create(t){this.showLoading("dialog"),this.employeeDocumentsService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newEmployeeDocumentAdded"),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){this.formCtrls.file.value?.id>0&&t.set("files",null),this.showLoading("dialog"),this.employeeDocumentsService.update(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg("employeeDocumentUpdated"),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}employeeDocumentToEdit(t){this.form.patchValue(t),this.formCtrls.id.setValue(t.empIdentityID),this.formCtrls.documentId.setValue(t.identity_TypeID),this.formCtrls.issuingDate.setValue(t.originalIssuingDate),this.formCtrls.expirationDate.setValue(t.originalExpirationDate),t.attachmentID?(this.showLoading(),this.fileService.downloadByAttachId(t.attachmentID).subscribe(o=>{this.formCtrls.file.setValue({id:t.attachmentID,path:t.attachment,name:t.attachment_En_Name,type:o.type,size:o.size}),this.hideLoading()})):this.formCtrls.file.setValue(null)}clearForm(){this.form.reset({id:0}),this.submitted=!1,this.removeFiles=!0}deleteFile(){this.showLoading(),this.employeeDocumentsService.DeleteAttachment(this.formCtrls.id.value).subscribe(t=>{t.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeDocumentRemoved"),this.hasUpdate=!0,this.formCtrls.file.reset()):this.errorList(t?.message?.messages),this.hideLoading()})}afterDelete(t){t.empIdentityID==this.formCtrls.id.value&&this.clearForm(),t&&(this.hasUpdate=!0)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ne),e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee-documents-dialog"]],features:[e.qOj],decls:24,vars:23,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","employeeDocuments",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],["label","documentName",3,"control","submitted","filter","appendTo"],["label","dateof_issue",3,"control","submitted"],["label","expire_Date",3,"control","submitted"],["label","identity_Number",3,"control","submitted"],[1,"col-12"],[3,"control","submitted","multiple","isEdit","removeFiles","ondelete"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-identity-type-dropdown",10),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-datepicker",11),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"app-datepicker",12),e.qZA(),e.TgZ(16,"div",9),e._UZ(17,"app-input",13),e.qZA(),e.TgZ(18,"div",14)(19,"primeng-file-upload",15),e.NdJ("ondelete",function(){return o.deleteFile()}),e.qZA()()()(),e.TgZ(20,"div",16)(21,"submit-btn",17),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(22,aa,1,0,"reset-form-btn",18),e.qZA(),e.TgZ(23,"app-emp-documents-table",19),e.NdJ("rowToEdit",function(s){return o.employeeDocumentToEdit(s)})("afterDelete",function(s){return o.afterDelete(s)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.documentId)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.issuingDate)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.expirationDate)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.identity_Number)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.file)("submitted",o.submitted)("multiple",!1)("isEdit",o.formCtrls.id.value>0)("removeFiles",o.removeFiles),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,N.Q,F.a,se.J,Z.J,D.p,I.T,E.lW,_.uh,_.xY,C.Ro,ta.Q,l._Y,l.JL,l.sg,Re]}),a})();function na(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"span")(1,"i",19),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.fileService.downloadFromServer(i.document.attachmentID))}),e.qZA()()}}function sa(a,n){1&a&&e._uU(0," ---")}function la(a,n){if(1&a&&(e.TgZ(0,"div",10),e._UZ(1,"card-row-item",11)(2,"card-row-item",12)(3,"card-row-item",13),e.TgZ(4,"div",14)(5,"p",15),e._uU(6),e.ALo(7,"titlecase"),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"div",16),e.YNc(10,na,2,0,"span",17),e.YNc(11,sa,1,0,"ng-template",null,18,e.W1O),e.qZA()()()),2&a){const t=e.MAs(12),o=e.oxw(2);e.xp6(1),e.Q6J("value",null==o.document?null:o.document.documentName),e.xp6(1),e.Q6J("value",null==o.document?null:o.document.dateof_issue),e.xp6(1),e.Q6J("value",null==o.document?null:o.document.expire_Date),e.xp6(3),e.Oqu(e.lcZ(7,6,e.lcZ(8,8,"attachment"))),e.xp6(4),e.Q6J("ngIf",(null==o.document?null:o.document.attachmentID)>0)("ngIfElse",t)}}function ra(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-emp-documents-table",20),e.NdJ("afterDelete",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function pa(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,la,13,10,"div",7),e.YNc(6,ra,1,2,"app-emp-documents-table",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.document)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("Id",t.employeeId)("isTableView",t.isTableView)}}function ca(a,n){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",21),2&a&&e.Q6J("rowNo",4)}let da=(()=>{class a extends u.U{constructor(t){super(),this.employeeDocumentsService=t,this.isLoaded=!1,this.isTableView=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){}onChangeBusinessAndCompanyId(){this.document=null,this.employeeId>0&&this.checkNoBusinessOrCompany()?this.getAll():this.isLoaded=!0}getAll(){this.document=null,this.employeeDocumentsService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{if(t.message.messageType==p.u.Success){let o=t.data??[];o.sort((i,s)=>new Date(s.employeeData.dateof_issue).getTime()-new Date(i.employeeData.dateof_issue).getTime()),this.document=Pe(o)[0],this.isLoaded=!0}else this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(ia).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAll())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAll())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ne))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-documents-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","employeeDocuments",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"Id","isTableView","toggleTable"],[1,"view-data-row-container"],["label","name",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],["label","dateof_issue",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],["label","expire_Date",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],[1,"col-6","col-md-4","col-lg-3","px-0","mb-2"],[1,"view-data-title"],[1,"view-data-value"],[4,"ngIf","ngIfElse"],["noAttach",""],[1,"fas","fa-cloud-download-alt","font-size-20","icon-lightGreen",3,"click"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,pa,9,6,"div",0),e.YNc(1,ca,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.O5,A.E,J.y,S,x,Re,d.rS,L.X$]}),a})();function ma(a,n){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-personal-info-card"),e.qZA())}function ua(a,n){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-contact-card"),e.qZA())}function _a(a,n){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-address-card"),e.qZA())}function ga(a,n){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-dependants-card"),e.qZA())}function ha(a,n){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-military-data-card"),e.qZA())}function fa(a,n){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-documents-card"),e.qZA())}let ba=(()=>{class a extends u.U{constructor(){super(),this.viewsManager=h.S}ngOnInit(){}onModulesChanged(){this.allowedSections=this.getCustomViewChildren(this.getParentViewName,h.S.emp_personal_info_tab)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-personal-info-core"]],inputs:{icon:"icon"},features:[e.qOj],decls:16,vars:6,consts:[[1,"row"],[1,"col-12"],[1,"main-card-title","border-bottom"],["title","personalInformation","color","font-dark",1,"emp-card-title"],[1,"container-fluid","p-0","px-4"],[1,"row","mx-md-n2"],["class","col-12 p-0 px-md-2",4,"ngIf"],[1,"col-12","p-0","px-md-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-title",2),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"mat-card-content",4)(6,"div",5),e.YNc(7,ma,2,0,"div",6),e._UZ(8,"mat-divider"),e.YNc(9,ua,2,0,"div",6),e._UZ(10,"mat-divider"),e.YNc(11,_a,2,0,"div",6),e._UZ(12,"mat-divider"),e.YNc(13,ga,2,0,"div",6),e.YNc(14,ha,2,0,"div",6),e.YNc(15,fa,2,0,"div",6),e.qZA()()()()()),2&t&&(e.xp6(7),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_personal_info_sec)),e.xp6(2),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_contact_address_sec)),e.xp6(2),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_contact_address_sec)),e.xp6(2),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_dependants_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_military_data_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_documents_sec)))},dependencies:[d.O5,I.T,y.a8,y.dn,y.n5,q.d,Xt,po,Do,Oo,ea,da]}),a})();var le=r(60057),re=r(54316),Ca=r(28867),ya=r(59997),Ia=r(28888),va=r(13486);function Ta(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.toEdit(i))})("deleteRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let Be=(()=>{class a extends u.U{constructor(t){super(),this.employeeEducationService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["institution","major","degree","year","gpaGrade","actions"],this.optionalColomns=[],this.isLoaded=!1,this.employeeId=0,this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_education_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.checkNoBusinessOrCompany()&&this.employeeId>0&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new g.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeEducationService.getList(this.employeeId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(s=>{s.message.messageType==p.u.Success?(this.dataSource=new g.by((0,le.$8)(s.data)),this.page.length=s.meta.totalItemCount,this.page.meta=s.meta,this.isLoaded=!0):this.errorList(s?.message?.messages)})}toEdit(t){this.rowToEdit.emit(t)}onDelete(t){this.deleteDialog(`${t.degree} - ${t.grade}`).subscribe(i=>{i&&this.delete(t)})}delete(t){let o={PersonID:this.employeeId,GradeID:t.gradeID,AcademicID:t.academicID};this.showLoading("table"),this.employeeEducationService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeEducationRemoved"),this.afterDelete.emit(t),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize)):this.errorList(i?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(re.w))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-education-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,Ta,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,C.Ro]}),a})();function wa(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",18),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let Da=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeEducationService=t,this.dialogRef=o,this.employeeId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_education_sec)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],institutionID:[null,[l.kI.required]],major:[null],academicID:[null,[l.kI.required]],year:[null,[l.kI.required]],gradeID:[null,[l.kI.required]],gpa:[null]}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}get formCtrls(){return this.form.controls}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={Education:{PersonID:this.employeeId,InstitutionID:this.form.value.institutionID,Major:this.form.value.major,GradeID:this.form.value.gradeID,AcademicID:this.form.value.academicID,Year:this.form.value.year,GPA:this.form.value.gpa}};0==this.formCtrls.id.value?this.create(t):this.update(t)}}create(t){this.showLoading("dialog"),this.employeeEducationService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newEmployeeEducationAdded"),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){let o={...t,OriginalEducation:{PersonID:this.employeeId,AcademicID:this.selectedEducation.academicID,GradeID:this.selectedEducation.gradeID}};this.showLoading("dialog"),this.employeeEducationService.update(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg("employeeEducationUpdated"),this.getList=!0,this.hasUpdate=!0,this.selectedEducation=null):this.errorList(i?.message?.messages),this.hideLoading("dialog")})}employeeEducationToEdit(t){this.form.patchValue(t),this.formCtrls.id.setValue(t.comm_Education_Degree?.id??1),this.selectedEducation=t}afterDelete(t){t.academicID==this.selectedEducation?.academicID&&t.gradeID==this.selectedEducation?.gradeID&&this.formCtrls.id.value>0&&this.clearForm(),t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(re.w),e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee-education-dialog"]],features:[e.qOj],decls:26,vars:29,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","education",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","submitted","filter","appendTo"],["label","major",3,"control","submitted"],["label","grade",3,"control","submitted","filter","appendTo"],["label","gpa","type","number",3,"control","submitted","isDecimalNumber"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","iconPositionBefore","disabled","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-institution-dropdown",10),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"app-education-degree-dropdown",10),e.qZA(),e.TgZ(16,"div",9),e._UZ(17,"app-education-year-dropdown",10),e.qZA(),e.TgZ(18,"div",9),e._UZ(19,"app-education-grade-dropdown",12),e.qZA(),e.TgZ(20,"div",9),e._UZ(21,"app-input",13),e.qZA()()(),e.TgZ(22,"div",14)(23,"submit-btn",15),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(24,wa,1,0,"reset-form-btn",16),e.qZA(),e.TgZ(25,"emp-education-table",17),e.NdJ("rowToEdit",function(s){return o.employeeEducationToEdit(s)})("afterDelete",function(s){return o.afterDelete(s)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.institutionID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.major)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.academicID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.year)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.gradeID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.gpa)("submitted",o.submitted)("isDecimalNumber",!0),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("iconPositionBefore",!1)("disabled",!o.employeeId),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,F.a,Z.J,D.p,I.T,E.lW,_.uh,_.xY,C.Ro,Ca.J,ya.Z,Ia.A,va.x,l._Y,l.JL,l.sg,Be]}),a})();function Ea(a,n){if(1&a&&(e.TgZ(0,"div",10),e._UZ(1,"card-row-item",11)(2,"card-row-item",12)(3,"card-row-item",13)(4,"card-row-item",14)(5,"card-row-item",15),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("value",null==t.empEducation?null:t.empEducation.institution),e.xp6(1),e.Q6J("value",null==t.empEducation?null:t.empEducation.major),e.xp6(1),e.Q6J("value",null==t.empEducation?null:t.empEducation.degree),e.xp6(1),e.Q6J("value",null==t.empEducation?null:t.empEducation.year),e.xp6(1),e.Q6J("value",null==t.empEducation?null:t.empEducation.gpaGrade)}}function Sa(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"emp-education-table",16),e.NdJ("afterDelete",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function xa(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,Ea,6,5,"div",7),e.YNc(6,Sa,1,2,"emp-education-table",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.empEducation)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("Id",t.employeeId)("isTableView",t.isTableView)}}function Aa(a,n){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",17),2&a&&e.Q6J("rowNo",5)}let Za=(()=>{class a extends u.U{constructor(t){super(),this.employeeEducationService=t,this.employeeId=0,this.isLoaded=!1,this.isTableView=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){}onChangeBusinessAndCompanyId(){this.empEducation=null,this.employeeId>0&&this.checkNoBusinessOrCompany()?this.getAllByEmployeeId():this.isLoaded=!0}getAllByEmployeeId(){this.empEducation=null,this.employeeEducationService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{if(t.message.messageType==p.u.Success){let o=t.data;o.sort((i,s)=>s.year-i.year),this.empEducation=(0,le.$8)(o)[0],this.isLoaded=!0}else this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(Da).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAllByEmployeeId())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAllByEmployeeId())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(re.w))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-education-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","education",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"Id","isTableView","toggleTable"],[1,"view-data-row-container"],["label","institution",1,"col-4","col-lg","px-0","mb-2",3,"value"],["label","major",1,"col-4","col-lg","px-0","mb-2",3,"value"],["label","degree",1,"col-4","col-lg","px-0","mb-2",3,"value"],["label","year",1,"col-4","col-lg","px-0","mb-2",3,"value"],["label","gpaGrade",1,"col-4","col-lg","px-0","mb-2",3,"value"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,xa,9,6,"div",0),e.YNc(1,Aa,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.O5,A.E,J.y,S,x,Be]}),a})(),pe=(()=>{class a extends P.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeWorkExperience",t)}update(t){return this.post("Personnel/Employees/Edit_EmployeeWorkExperience",t)}getList(t,o){return this.get("Personnel/Employees/GetList_EmployeeWorkExperience",{params:{...o,$filter:`Person_Instance_ID  eq ${t}`,$expand:`${v.db.Core_Person_Instance}/${v.db.Core_Person}`}})}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeWorkExperience",{params:{$filter:`Person_Instance_ID  eq ${t}`,$expand:`${v.db.Core_Person_Instance}/${v.db.Core_Person}`}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeWorkExperience",{params:{ID:t}})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function La(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.toEdit(i))})("deleteRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let Ve=(()=>{class a extends u.U{constructor(t){super(),this.empWorkExperienceService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["companyName","department","position","startDate","endDate","actions"],this.optionalColomns=[],this.isLoaded=!1,this.employeeInstanceId=0,this.employeeInstanceId=m.w.Person_Instance_ID,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_work_experience_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeInstanceId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.checkNoBusinessOrCompany()&&this.employeeInstanceId>0&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new g.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.empWorkExperienceService.getList(this.employeeInstanceId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(s=>{s.message.messageType==p.u.Success?(this.dataSource=new g.by((0,le.PX)(s.data)),this.page.length=s.meta.totalItemCount,this.page.meta=s.meta,this.isLoaded=!0):this.errorList(s?.message?.messages)})}toEdit(t){this.rowToEdit.emit(t)}onDelete(t){let o=this.msgTranslate(t.companyName);this.deleteDialog(o).subscribe(i=>{i&&this.delete(t)})}delete(t){this.showLoading("table"),this.empWorkExperienceService.Delete(t.id).subscribe(o=>{o.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeWorkExperienceRemoved"),this.afterDelete.emit(t),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize)):this.errorList(o?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(pe))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-work-experience-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,La,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeInstanceId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,C.Ro]}),a})();function Pa(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",19),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let Ja=(()=>{class a extends u.U{constructor(t,o){super(),this.empWorkExperienceService=t,this.dialogRef=o,this.employeeInstanceId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.employeeInstanceId=m.w.Person_Instance_ID,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_work_experience_sec)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],companyName:[null,[l.kI.required,M.w.whiteSpace]],department:[null],position:[null],from_Date:[null,[l.kI.required,U.dN.date]],to_Date:[null,[l.kI.required,U.dN.date]]},{validator:M.w.compareDates("from_Date","to_Date")}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}get formCtrls(){return this.form.controls}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={WorkExperience:{person_Instance_ID:this.employeeInstanceId,id:this.form.value.id,companyName:this.form.value.companyName,org_Name:this.form.value.department,job_Title_Name:this.form.value.position,from_Date:c.M6.mapDateReverse(this.form.value.from_Date),to_Date:c.M6.mapDateReverse(this.form.value.to_Date)}};0==t.WorkExperience.id?this.create(t):this.update(t)}}create(t){this.showLoading("dialog"),this.empWorkExperienceService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newEmployeeWorkExperienceAdded"),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){this.showLoading("dialog"),this.empWorkExperienceService.update(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg("employeeWorkExperienceUpdated"),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}employeeWorkExperienceToEdit(t){this.form.patchValue(t)}afterDelete(t){t.id==this.formCtrls.id.value&&this.clearForm(),t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(pe),e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee-work-experience-dialog"]],features:[e.qOj],decls:24,vars:18,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","workExperience",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],["label","companyName",3,"control","submitted"],["label","department",3,"control","submitted"],["label","position",3,"control","submitted"],["label","startDate",3,"control","submitted"],["label","endDate",3,"control","submitted"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-input",10),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"app-input",12),e.qZA(),e.TgZ(16,"div",9),e._UZ(17,"app-datepicker",13),e.qZA(),e.TgZ(18,"div",9),e._UZ(19,"app-datepicker",14),e.qZA()()(),e.TgZ(20,"div",15)(21,"submit-btn",16),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(22,Pa,1,0,"reset-form-btn",17),e.qZA(),e.TgZ(23,"emp-work-experience-table",18),e.NdJ("rowToEdit",function(s){return o.employeeWorkExperienceToEdit(s)})("afterDelete",function(s){return o.afterDelete(s)}),e.qZA()()),2&t&&(e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.companyName)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.department)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.position)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.from_Date)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.to_Date)("submitted",o.submitted),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeInstanceId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList))},dependencies:[d.O5,N.Q,F.a,Z.J,D.p,I.T,E.lW,_.uh,_.xY,C.Ro,l._Y,l.JL,l.sg,Ve]}),a})();function ka(a,n){if(1&a&&(e.TgZ(0,"div",10),e._UZ(1,"card-row-item",11)(2,"card-row-item",12)(3,"card-row-item",13)(4,"card-row-item",14)(5,"card-row-item",15),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("value",null==t.empWorkExperience?null:t.empWorkExperience.companyName),e.xp6(1),e.Q6J("value",null==t.empWorkExperience?null:t.empWorkExperience.org_Name),e.xp6(1),e.Q6J("value",null==t.empWorkExperience?null:t.empWorkExperience.job_Title_Name),e.xp6(1),e.Q6J("value",null==t.empWorkExperience?null:t.empWorkExperience.from_Date)("isDate",!0),e.xp6(1),e.Q6J("value",null==t.empWorkExperience?null:t.empWorkExperience.to_Date)("isDate",!0)}}function Na(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"emp-work-experience-table",16),e.NdJ("afterDelete",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function Ma(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,ka,6,7,"div",7),e.YNc(6,Na,1,2,"emp-work-experience-table",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.empWorkExperience)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("Id",t.employeeInstanceId)("isTableView",t.isTableView)}}function Fa(a,n){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",17),2&a&&e.Q6J("rowNo",5)}let Oa=(()=>{class a extends u.U{constructor(t){super(),this.employeeWorkExperienceService=t,this.employeeInstanceId=0,this.isLoaded=!1,this.isTableView=!1,this.employeeInstanceId=m.w.Person_Instance_ID,m.w.Person_Instance_ID$.subscribe(o=>{this.employeeInstanceId=o,this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()?(this.isLoaded=!1,this.getAll()):this.isLoaded=!0})}ngOnInit(){}getAll(){this.empWorkExperience=null,this.employeeWorkExperienceService.getAll(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{if(t.message.messageType==p.u.Success){var o=t.data;o.sort((i,s)=>new Date(s.to_Date).getTime()-new Date(i.to_Date).getTime()),this.empWorkExperience=o[0],this.isLoaded=!0}else this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(Ja).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAll())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAll())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(pe))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-work-experience-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","workExperience",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"Id","isTableView","toggleTable"],[1,"view-data-row-container"],["label","companyName",1,"col-4","col-lg","px-0","mb-2",3,"value"],["label","department",1,"col-4","col-lg","px-0","mb-2",3,"value"],["label","position",1,"col-4","col-lg","px-0","mb-2",3,"value"],["label","startDate",1,"col-4","col-lg","px-0","mb-2",3,"value","isDate"],["label","endDate",1,"col-4","col-lg","px-0","mb-2",3,"value","isDate"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,Ma,9,6,"div",0),e.YNc(1,Fa,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.O5,A.E,J.y,S,x,Ve]}),a})();function Ua(a,n){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-education-card"),e.qZA())}function Qa(a,n){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-work-experience-card"),e.qZA())}let qa=(()=>{class a extends u.U{constructor(){super(),this.viewsManager=h.S}ngOnInit(){}onModulesChanged(){this.allowedSections=this.getCustomViewChildren(this.getParentViewName,h.S.emp_career_tab)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-career-core"]],inputs:{icon:"icon"},features:[e.qOj],decls:9,vars:2,consts:[[1,"row"],[1,"col-12"],[1,"main-card-title","border-bottom"],["title","career","color","font-dark",1,"emp-card-title"],[1,"container-fluid","p-0","px-4"],[1,"row","mx-md-n2"],["class","col-12 p-0 px-md-2",4,"ngIf"],[1,"col-12","p-0","px-md-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-title",2),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"mat-card-content",4)(6,"div",5),e.YNc(7,Ua,2,0,"div",6),e.YNc(8,Qa,2,0,"div",6),e.qZA()()()()()),2&t&&(e.xp6(7),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_education_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_work_experience_sec)))},dependencies:[d.O5,I.T,y.a8,y.dn,y.n5,Za,Oa]}),a})();var Ra=r(71125),Ba=r(66606),Va=r(82585);function Ya(a,n){if(1&a&&e._UZ(0,"card-row-item",21),2&a){const t=e.oxw(2);e.Q6J("value",null==t.employee?null:t.employee.companyCode)}}function Ga(a,n){1&a&&(e.TgZ(0,"span"),e._uU(1," - "),e.qZA())}function ja(a,n){if(1&a&&(e.TgZ(0,"div"),e._uU(1),e.YNc(2,Ga,2,0,"span",23),e.qZA()),2&a){const t=n.$implicit,o=n.last,i=e.oxw(3);e.xp6(1),e.hij(" ",i.msgTranslate(null==t?null:t.core_Company.ar_Name,null==t||null==t.core_Company?null:t.core_Company.en_Name)," "),e.xp6(1),e.Q6J("ngIf",!o)}}function za(a,n){if(1&a&&(e.ynx(0),e.YNc(1,ja,3,2,"div",22),e.BQk()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.employee.sharedCompanies)}}function Ha(a,n){1&a&&e._uU(0," ---")}function Wa(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"card-header",3),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA(),e.TgZ(2,"div",4),e._UZ(3,"card-row-item",5)(4,"card-row-item",6)(5,"card-row-item",7)(6,"card-row-item",8),e.YNc(7,Ya,1,1,"card-row-item",9),e.qZA(),e.TgZ(8,"div",10),e._UZ(9,"card-row-item",11)(10,"card-row-item",12)(11,"card-row-item",13)(12,"card-row-item",14),e.TgZ(13,"div",15)(14,"p",16),e._uU(15),e.ALo(16,"titlecase"),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div",17)(19,"div",18),e.YNc(20,za,2,1,"ng-container",19),e.YNc(21,Ha,1,0,"ng-template",null,20,e.W1O),e.qZA()()()()()}if(2&a){const t=e.MAs(22),o=e.oxw();e.xp6(1),e.Q6J("isEdit",o.employeeId)("isLoaded",o.isLoaded),e.xp6(2),e.Q6J("value",null==o.employee||null==o.employee.person?null:o.employee.person.code),e.xp6(1),e.Q6J("value",null==o.employee||null==o.employee.person?null:o.employee.person.ar_Name),e.xp6(1),e.Q6J("value",null==o.employee||null==o.employee.person?null:o.employee.person.en_Name),e.xp6(1),e.Q6J("value",null==o.employee||null==o.employee.person?null:o.employee.person.nationalid),e.xp6(1),e.Q6J("ngIf",o.showCompanyCode),e.xp6(2),e.Q6J("value",null==o.employee||null==o.employee.person?null:o.employee.person.hireDate)("isDate",!0),e.xp6(1),e.Q6J("value",o.msgTranslate(null==o.employee||null==o.employee.person||null==o.employee.person.core_Gender?null:o.employee.person.core_Gender.ar_Name,null==o.employee||null==o.employee.person||null==o.employee.person.core_Gender?null:o.employee.person.core_Gender.en_NAme)),e.xp6(1),e.Q6J("value",o.msgTranslate(null==o.employee||null==o.employee.person||null==o.employee.person.core_Religion?null:o.employee.person.core_Religion.ar_Name,null==o.employee||null==o.employee.person||null==o.employee.person.core_Religion?null:o.employee.person.core_Religion.en_Name)),e.xp6(1),e.Q6J("value",o.msgTranslate(null==o.employee||null==o.employee.nationality?null:o.employee.nationality.ar_Name,null==o.employee||null==o.employee.nationality?null:o.employee.nationality.en_NAme)),e.xp6(3),e.hij(" ",e.lcZ(16,15,e.lcZ(17,17,"SharedCompanies"))," "),e.xp6(5),e.Q6J("ngIf",null==o.employee?null:o.employee.sharedCompanies)("ngIfElse",t)}}function $a(a,n){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",24),2&a&&e.Q6J("rowNo",8)}let Ka=(()=>{class a extends u.U{constructor(t,o){super(),this.empGeneralInfoService=t,this.companyCodeService=o,this.changeEmployeeId=new e.vpe,this.isLoaded=!1,this.isCanMadeAction=!1,this.showCompanyCode=!0,this.employeeId=m.w.EmployeeId}ngOnInit(){this.employee=this.empGeneralInfoService.employee$.getValue(),this.empGeneralInfoService.employee$.subscribe(t=>{this.employee=t,this.isLoadedFun()}),this.isLoadedFun()}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&this.isCompanyHasCode()}isLoadedFun(){this.isLoaded=!1,null!=this.employee&&this.employeeId>0&&(this.isLoaded=!0),null==this.employee&&0==this.employeeId&&(this.isLoaded=!0)}onModulesChanged(){this.allowedSections=this.getCustomViewChildren(this.getParentViewName,h.S.emp_general_info_tab)}openAddEditDialog(){this.businessCompanyParams.CompanyID?this.dialogsService.addEditDialog(Ra.Y,this.employee).afterClosed().subscribe(o=>{o&&o.isUpdate||!o||o.isUpdate||this.router.navigate([`/personnel-setup/${this.moduleId}/employees/edit/${o.data.person.id}`],{queryParams:this.parentParam})}):this.warning("chooseCompanyId")}isCompanyHasCode(){this.companyCodeService.getCodeStatus(Ba.K.getCompanyID).subscribe(t=>{t.message.messageType==p.u.Success?this.showCompanyCode=!!t.data?.isHasCode:this.errorList(t?.message?.messages)})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(m.w),e.Y36(Va.X))},a.\u0275cmp=e.Xpm({type:a,selectors:[["employee-general-info-card"]],outputs:{changeEmployeeId:"changeEmployeeId"},features:[e.qOj],decls:3,vars:2,consts:[["class","card-view px-2",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","px-2"],["cardTitle","generalInfo",1,"emp-card-title","pt-2",3,"isEdit","isLoaded","onClickIcon"],[1,"view-data-row-container","mtop-20"],["label","employeeCode",1,"col-4","col-lg","mb-2",3,"value"],["label","ar_Name",1,"col-4","col-lg","mb-2",3,"value"],["label","en_Name",1,"col-4","col-lg","mb-2",3,"value"],["label","nationalid",1,"col-4","col-lg","mb-2",3,"value"],["class","col-4 col-lg mb-2","label","companyCode",3,"value",4,"ngIf"],[1,"view-data-row-container","mt-3"],["label","hireDate",1,"col-4","col-lg","mb-2",3,"value","isDate"],["label","gender",1,"col-4","col-lg","mb-2",3,"value"],["label","religion",1,"col-4","col-lg","mb-2",3,"value"],["label","nationality",1,"col-4","col-lg","mb-2",3,"value"],[1,"col-4","col-lg","mb-2"],[1,"view-data-title"],[1,"view-data-value"],[1,"d-inline-block"],[4,"ngIf","ngIfElse"],["emptyCompanies",""],["label","companyCode",1,"col-4","col-lg","mb-2",3,"value"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,Wa,23,19,"div",0),e.YNc(1,$a,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.sg,d.O5,A.E,S,x,d.rS,L.X$]}),a})();function Xa(a,n){1&a&&(e.TgZ(0,"div",5),e._UZ(1,"employee-general-info-card"),e.qZA())}let ei=(()=>{class a extends u.U{constructor(){super(),this.viewsManager=h.S}ngOnInit(){}onModulesChanged(){this.allowedSections=this.getCustomViewChildren(this.getParentViewName,h.S.emp_general_info_tab)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-general-info-core"]],inputs:{icon:"icon"},features:[e.qOj],decls:6,vars:1,consts:[[1,"row"],[1,"col-12"],[1,"container-fluid","p-0"],[1,"row","mx-md-n2"],["class","col-12 p-0 px-md-2",4,"ngIf"],[1,"col-12","p-0","px-md-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-content",2)(4,"div",3),e.YNc(5,Xa,2,0,"div",4),e.qZA()()()()()),2&t&&(e.xp6(5),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_general_info_sec)))},dependencies:[d.O5,y.a8,y.dn,Ka]}),a})();var a,ti=r(40445),Ye=r(3848),k=(()=>{return(a=k||(k={}))[a.attached=1]="attached",a[a.handDelivery=2]="handDelivery",a[a.notNeed=3]="notNeed",k;var a})();function Ge(a){return a.map(n=>({...n,custodies:(0,c._f)(n.core_Covenant?.ar_Name,n.core_Covenant?.en_Name),froM_DATE:c.M6.mapDate(n.fromDate),endDate:c.M6.mapDate(n.toDate),date:c.M6.mapDate(n?.fromDate)+(n?.toDate?" - "+c.M6.mapDate(n?.toDate):"")}))}function je(a){return a.map(n=>({...n,plan:(0,c._f)(n.att_Plan?.ar_Name,n.att_Plan?.en_Name),employee:(0,c._f)(n.core_Person_Instance?.core_Person?.ar_Name,n.core_Person_Instance?.core_Person?.en_Name),startDate:c.M6.mapDate(n.fromDate),toDateOriginal:n.toDate,toDate:c.M6.mapDate(n.toDate)}))}function ze(a){return a.map(n=>({...n,insuranceOffice:(0,c._f)(n.core_Insurance_Office?.ar_Name,n.core_Insurance_Office?.en_Name),fromDate:c.M6.mapDate(n.froM_DATE),endDate:c.M6.mapDate(n.enD_DATE),date:c.M6.mapDate(n?.froM_DATE)+(n?.enD_DATE?" - "+c.M6.mapDate(n?.enD_DATE):"")}))}function He(a){let n=a.map(t=>({...t,country:(0,c._f)(t.comm_Country?.ar_Name,t.comm_Country?.en_NAme),governorate:(0,c._f)(t.comm_Governorate?.ar_Name,t.comm_Governorate?.en_Name),froM_DATE:c.M6.mapDate(t.from_Date),tO_DATE:c.M6.mapDate(t.to_Date)}));return n.map(t=>{t.allAddress=`${t.location??"-"}, ${t.governorate??"-"}`,t.date=t?.froM_DATE+(t?.to_Date?" - "+t?.tO_DATE:"")}),n}function We(a){return a.map(n=>({...n,documentName:(0,c._f)(n.ar_Name_Type,n.en_Name_Type),attachmentType:k.getValue(n.is_Attached),attachment:n.attachmentFilePath?"/"+n.attachmentFilePath:""}))}function $e(a){return a.map(n=>({...n,contractType:(0,c._f)(n.core_Contract_Type?.ar_Name,n.core_Contract_Type?.en_Name),start_date:c.M6.mapDate(n.starT_DATE),end_date:c.M6.mapDate(n.enD_DATE),actual_End_Date:c.M6.mapDate(n.actual_End_Date)}))}(a=k||(k={})).getValue=function n(t){switch(t){case a.attached:return"attachment";case a.handDelivery:return"isHandDelivered";case a.notNeed:return"notNeed";default:return""}};let si=(()=>{class a extends P.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeSupervisor",t)}update(t){return this.post("Personnel/Employees/Edit_EmployeeSupervisor",t)}getList(t,o){return this.get("Personnel/Employees/GetList_EmployeeSupervisor",{params:{...o,prtid:t}})}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeSupervisor",{params:{prtid:t}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeSupervisor",{params:{ID:t}})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var Ke=r(70502);function li(a,n){if(1&a&&(e.TgZ(0,"div",5),e._UZ(1,"app-datepicker",14),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("control",t.formCtrls.to_Date)("submitted",t.submitted)}}function ri(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}function pi(a,n){if(1&a){const t=e.EpF();e.ynx(0),e._UZ(1,"mat-divider",16),e.TgZ(2,"app-material-table",17),e.NdJ("onChangePage",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.toEditSupervisor(i))})("deleteRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(i))}),e.qZA(),e.BQk()}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("page",t.page)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)}}let ci=(()=>{class a extends u.U{constructor(t){super(),this.employeeSupervisorService=t,this.employeeInstanceId=0,this.mandatoryColomns=["supervisor","effectiveDate","toDate","actions"],this.optionalColomns=[],this.isLoaded=!1,this.submitted=!1,this.employeeInstanceId=m.w.Person_Instance_ID,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_job_info_supervisor_sec)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],manager_ID:[null,[l.kI.required]],from_Date:[null,[l.kI.required]],to_Date:[null]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.checkNoBusinessOrCompany()&&this.employeeInstanceId>0&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new g.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeSupervisorService.getList(this.employeeInstanceId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(s=>{s.message.messageType==p.u.Success?(this.dataSource=new g.by(function oi(a){return a.map(n=>({...n,supervisor:(0,c._f)(n.manager?.core_Person?.ar_Name,n.manager?.core_Person?.en_Name),effectiveDate:c.M6.mapDate(n.from_Date),toDate:c.M6.mapDate(n.tO_Date)}))}(s.data)),this.page.length=s.meta.totalItemCount,this.page.meta=s.meta,this.isLoaded=!0):this.errorList(s?.message?.messages)})}submit(){if(this.submitted=!0,this.form.valid){const t={Person_Instance_ID:this.employeeInstanceId,Manager_ID:this.formCtrls.manager_ID.value,From_Date:this.formCtrls.from_Date.value};0==this.formCtrls.id.value?this.create(t):this.update(t)}}create(t){this.showLoading("supervisor"),this.employeeSupervisorService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canRemoveFromIndex","newEmployeeSupervisorAdded"),this.getList(this.firstPage)):this.errorList(o?.message?.messages),this.hideLoading("supervisor")})}update(t){let o={...t,id:this.formCtrls.id.value,To_Date:this.formCtrls.to_Date.value};this.showLoading("supervisor"),this.employeeSupervisorService.update(o).subscribe(i=>{i?.message?.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg("employeeSupervisorUpdated"),this.getList(this.currentPage)):this.errorList(i?.message?.messages),this.hideLoading("supervisor")})}toEditSupervisor(t){this.form.patchValue(t),this.formCtrls.to_Date.setValue(t.tO_Date),this.formCtrls.to_Date.setValidators([l.kI.required]),this.formCtrls.to_Date.updateValueAndValidity()}onDelete(t){this.deleteDialog(`${t.supervisor} (${t.effectiveDate} - ${t.toDate})`).subscribe(i=>{i&&this.delete(t)})}delete(t){this.showLoading("supervisor"),this.employeeSupervisorService.Delete(t.id).subscribe(o=>{o.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeSupervisorRemoved"),t.id==this.formCtrls.id.value&&this.clearForm(),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize)):this.errorList(o?.message?.messages),this.hideLoading("supervisor")})}clearForm(){this.form.reset({id:0}),this.submitted=!1,this.formCtrls.to_Date.clearValidators(),this.formCtrls.to_Date.updateValueAndValidity()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(si))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-supervisor-section"]],inputs:{dialogContainer:"dialogContainer"},features:[e.qOj],decls:20,vars:20,consts:[[3,"formGroup"],[1,"row"],[1,"col-lg-2","col-12"],[1,"candidate-sub-title"],[1,"col-lg-10","col-12"],[1,"col-md-4","col-sm-6","col-12"],["label","supervisor",3,"control","submitted","filter","appendTo"],["label","from_Date",3,"control","submitted"],["class","col-md-4 col-sm-6 col-12",4,"ngIf"],["align","end"],[3,"click",4,"ngIf"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[4,"ngIf"],[3,"name"],["label","to_Date",3,"control","submitted"],[3,"click"],[1,"darker-divider","w-75"],[1,"table-in-forms","table-fit",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","isDialogSize","showFilter","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.TgZ(0,"div")(1,"form",0)(2,"div",1)(3,"div",2)(4,"h5",3),e._uU(5),e.ALo(6,"titlecase"),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"div",4)(9,"div",1)(10,"div",5),e._UZ(11,"app-employee-dropdown",6),e.qZA(),e.TgZ(12,"div",5),e._UZ(13,"app-datepicker",7),e.qZA(),e.YNc(14,li,2,2,"div",8),e.qZA()()()(),e.TgZ(15,"mat-card-actions",9),e.YNc(16,ri,1,0,"reset-form-btn",10),e.TgZ(17,"submit-btn",11),e.NdJ("onClick",function(){return o.submit()}),e.qZA()(),e.YNc(18,pi,3,8,"ng-container",12),e.qZA(),e._UZ(19,"ngx-spinner",13)),2&t&&(e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(4),e.hij(" ",e.lcZ(6,16,e.lcZ(7,18,"supervisor"))," "),e.xp6(6),e.Q6J("control",o.formCtrls.manager_ID)("submitted",o.submitted)("filter",!0)("appendTo",o.dialogContainer),e.xp6(2),e.Q6J("control",o.formCtrls.from_Date)("submitted",o.submitted),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(2),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeInstanceId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.employeeInstanceId>0),e.xp6(1),e.Q6J("name","supervisor"))},dependencies:[d.O5,N.Q,w.I,Z.J,D.p,Ke.J,y.hq,q.d,C.Ro,l._Y,l.JL,l.sg,d.rS,L.X$]}),a})();var ce=r(33975),z=r(89609),di=r(29467),mi=r(18183),Xe=r(68506),ui=r(85443),_i=r(15362),gi=r(50260),hi=r(99892);let fi=(()=>{class a extends P.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeManger",t)}getList(t,o){return this.get("Personnel/Employees/GetList_EmployeeManger",{params:{...o,orgid:t}})}getAll(t,o){return this.get("Personnel/Employees/GetAll_EmployeeManger",{params:{prtid:t,orgid:o}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeManger",{params:t})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),bi=(()=>{class a extends u.U{constructor(t,o,i){super(),this.EmployeeAssignAsOrgManagerService=t,this.org=o,this.dialogRef=i,this.mandatoryColomns=["employee","startDate","endDate","actions"],this.optionalColomns=[],this.isLoaded=!1,this.submitted=!1,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_job_info_assign_manager_sec)}ngOnInit(){this.form=this.fb.group({from_Date:[null,[l.kI.required]]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.checkNoBusinessOrCompany()&&this.org.person_Instance_ID>0&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new g.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.EmployeeAssignAsOrgManagerService.getList(this.org.core_Org?.id,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(s=>{s.message.messageType==p.u.Success?(this.dataSource=new g.by(function ai(a){return a.map(n=>({...n,employee:(0,c._f)(n.core_Person_Instance?.core_Person?.ar_Name,n.core_Person_Instance?.core_Person?.en_Name),startDate:c.M6.mapDate(n.from_Date),endDate:c.M6.mapDate(n.to_Date)}))}(s.data)),this.page.length=s.meta.totalItemCount,this.page.meta=s.meta,this.isLoaded=!0):this.errorList(s?.message?.messages),this.hideLoading()})}submit(){if(this.submitted=!0,this.form.valid){const t={Person_Instance_ID:this.org.person_Instance_ID,Person_Instance_Org_ID:this.org.id,From_Date:c.M6.mapDateReverse(this.form.value.from_Date)};this.create(t)}}create(t){this.showLoading("manager"),this.EmployeeAssignAsOrgManagerService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canRemoveFromIndex","newEmployeeAssignManagerAdded"),this.getList(this.firstPage)):this.errorList(o?.message?.messages),this.hideLoading("manager")})}onDelete(t){this.deleteDialog(`${t.employee} (${t.startDate} - ${t.endDate})`).subscribe(i=>{i&&this.delete(t)})}delete(t){let o={prtid:t.person_Instance_ID,orgperid:t.person_Instance_Org_ID,fromdate:c.M6.mapDateReverse(t.from_Date)};this.showLoading("manager"),this.EmployeeAssignAsOrgManagerService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeAssignManagerRemoved"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize)):this.errorList(i?.message?.messages),this.hideLoading("manager")})}clearForm(){this.form.reset(),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(fi),e.Y36(_.WI),e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-assign-as-org-manager-dialog"]],features:[e.qOj],decls:15,vars:15,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","assignManager",1,"d-inline-block","mtop-5"],["mat-icon-button","","mat-dialog-close","",1,"float-right","mb-1","bg-light-danger","mr-1"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-6","col-4"],["label","date",3,"control","submitted"],[1,"col-4"],["styleClass","btn-large mt-1","icon","fas fa-save",3,"color","iconPositionBefore","onClick"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","isDialogSize","showFilter","showSpaceTop","onChangePage","deleteRow"]],template:function(t,o){1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5)(7,"form",6)(8,"div",7)(9,"div",8),e._UZ(10,"app-datepicker",9),e.qZA(),e.TgZ(11,"div",10)(12,"submit-btn",11),e.NdJ("onClick",function(){return o.submit()}),e.qZA()()()(),e._UZ(13,"mat-divider"),e.TgZ(14,"app-material-table",12),e.NdJ("onChangePage",function(s){return o.getList(s.pageIndex+1,s.pageSize)})("deleteRow",function(s){return o.onDelete(s)}),e.qZA()()),2&t&&(e.Q6J("name","manager"),e.xp6(7),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.from_Date)("submitted",o.submitted),e.xp6(2),e.Q6J("color",o.btn.darkBlue)("iconPositionBefore",!1),e.xp6(2),e.Q6J("isLoaded",o.isLoaded)("dataSource",o.dataSource)("mandatoryColomns",o.mandatoryColomns)("optionalColomns",o.optionalColomns)("page",o.page)("actions",o.rowFunctions)("isDialogSize",!0)("showFilter",!1)("showSpaceTop",!1))},dependencies:[N.Q,w.I,D.p,I.T,E.lW,q.d,_.ZT,_.uh,_.xY,C.Ro,l._Y,l.JL,l.sg]}),a})(),Ci=(()=>{class a extends u.U{constructor(t,o,i){super(),this.employeeJobInfoService=t,this.dialogRef=o,this.job=i,this.CloseDate=new l.NI("",l.kI.required),this.submitted=!1}submit(){if(this.submitted=!0,this.CloseDate.valid){this.showLoading("close");let t={Employee_Job_Title_ID:this.job?.id,CloseDate:c.M6.transformData(this.CloseDate.value)};this.employeeJobInfoService.close(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.updateSuccessfullyMsg("employeeJobClosed"),this.CloseDate.reset(),this.submitted=!1,this.dialogRef.close()):this.errorList(o?.message?.messages),this.hideLoading("close")})}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(z._),e.Y36(_.so),e.Y36(_.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-close-job-dialog"]],features:[e.qOj],decls:13,vars:7,consts:[["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","close_job",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"mat-dialog-close"],[1,"pi","pi-times"],[1,"container-fluid","mx-0","mt-3"],[1,"row"],[1,"col-5"],["label","date",3,"control","submitted"],[1,"col-4"],["label","close_job","icon","fas fa-save","styleClass","btn-large mt-1  mr-0 ml-0",3,"color","iconPositionBefore","onClick"],[3,"name"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h4"),e._UZ(2,"page-title",1),e._uU(3),e.qZA(),e.TgZ(4,"button",2),e._UZ(5,"i",3),e.qZA()(),e.TgZ(6,"mat-dialog-content",4)(7,"div",5)(8,"div",6),e._UZ(9,"app-datepicker",7),e.qZA(),e.TgZ(10,"div",8)(11,"submit-btn",9),e.NdJ("onClick",function(){return o.submit()}),e.qZA()()()(),e._UZ(12,"ngx-spinner",10)),2&t&&(e.xp6(3),e.hij(" ",o.msgTranslate(null==o.job||null==o.job.core_Job_Title?null:o.job.core_Job_Title.ar_Name,null==o.job||null==o.job.core_Job_Title?null:o.job.core_Job_Title.en_Name)," "),e.xp6(1),e.Q6J("mat-dialog-close",!1),e.xp6(5),e.Q6J("control",o.CloseDate)("submitted",o.submitted),e.xp6(2),e.Q6J("color",o.btn.darkBlue)("iconPositionBefore",!1),e.xp6(1),e.Q6J("name","close"))},dependencies:[N.Q,D.p,I.T,E.lW,_.ZT,_.uh,_.xY,C.Ro]}),a})();var et=r(98814),yi=r(58313),tt=r(9615),ot=r(79417),Ii=r(98739);function vi(a,n){1&a&&(e.TgZ(0,"th",9),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"actions")," "))}const de=function(a){return{status:a}};function Ti(a,n){if(1&a&&(e.ynx(0),e.TgZ(1,"tr"),e.GkF(2,14),e._UZ(3,"td",9)(4,"td",15),e.qZA(),e.BQk()),2&a){const t=e.oxw(),o=t.index,i=t.$implicit,s=e.oxw(3),f=e.MAs(3);e.xp6(1),e.ekj("tr-backgroung",o%2==0),e.xp6(1),e.Q6J("ngTemplateOutlet",f)("ngTemplateOutletContext",e.VKq(5,de,i)),e.xp6(1),e.uIk("colspan",s.hideActions?3:4)}}const at=function(a,n){return{status:a,org:n}};function wi(a,n){if(1&a&&(e.ynx(0),e.TgZ(1,"tr"),e.GkF(2,14)(3,14),e._UZ(4,"td",15),e.qZA(),e.BQk()),2&a){const t=e.oxw().$implicit,o=e.oxw(2),i=o.index,s=o.$implicit;e.oxw(3);const f=e.MAs(3),T=e.MAs(5);e.xp6(1),e.ekj("tr-backgroung",i%2==0),e.xp6(1),e.Q6J("ngTemplateOutlet",f)("ngTemplateOutletContext",e.VKq(6,de,s)),e.xp6(1),e.Q6J("ngTemplateOutlet",T)("ngTemplateOutletContext",e.WLB(8,at,s,t))}}function Di(a,n){if(1&a&&e.GkF(0,14),2&a){const t=e.oxw(5).$implicit;e.oxw(3);const o=e.MAs(3);e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(2,de,t))}}function Ei(a,n){if(1&a&&e.GkF(0,14),2&a){const t=e.oxw(3).$implicit,o=e.oxw(2).$implicit;e.oxw(3);const i=e.MAs(5);e.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",e.WLB(2,at,o,t))}}function Si(a,n){1&a&&(e.TgZ(0,"span",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"yes")," "))}function xi(a,n){1&a&&(e.TgZ(0,"span",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"no")," "))}function Ai(a,n){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"tr"),e.YNc(2,Di,1,4,"ng-container",16),e.YNc(3,Ei,1,5,"ng-container",16),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e.YNc(11,Si,3,3,"span",17),e.YNc(12,xi,3,3,"ng-template",null,18,e.W1O),e.qZA(),e.TgZ(14,"td")(15,"div",19)(16,"app-row-functions",20),e.NdJ("editRow",function(){const s=e.CHM(t).$implicit,f=e.oxw(2).$implicit,T=e.oxw(2).$implicit,V=e.oxw(3);return V.currentAction.emit(null),e.KtG(V.toEdit(T,f,s))})("deleteRow",function(){const s=e.CHM(t).$implicit,f=e.oxw(4).$implicit,T=e.oxw(3);return e.KtG(T.onDeleteJob(f,s))})("onAction",function(i){const f=e.CHM(t).$implicit,T=e.oxw(7);return e.KtG(T.jobOnAction(i,f))}),e.qZA()()()(),e.BQk()}if(2&a){const t=n.$implicit,o=n.index,i=e.MAs(13),s=e.oxw(2).index,f=e.oxw(2).index,T=e.oxw(3);e.xp6(1),e.ekj("tr-backgroung",f%2==0),e.xp6(1),e.Q6J("ngIf",0===s&&0===o),e.xp6(1),e.Q6J("ngIf",0===o),e.xp6(2),e.hij(" ",T.msgTranslate(null==t||null==t.core_Job_Title?null:t.core_Job_Title.ar_Name,null==t||null==t.core_Job_Title?null:t.core_Job_Title.en_Name)," "),e.xp6(2),e.hij(" ",T.helpersFunctions.mapDate(null==t?null:t.from_Date)," "),e.xp6(2),e.hij(" ",T.helpersFunctions.mapDate(null==t?null:t.to_Date)," "),e.xp6(2),e.Q6J("ngIf",null==t?null:t.is_Manpower_Affected)("ngIfElse",i),e.xp6(5),e.Q6J("actions",T.jobRowFunctions)}}function Zi(a,n){if(1&a&&(e.ynx(0),e.YNc(1,Ai,17,10,"ng-container",11),e.BQk()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.core_Person_Instance_Job_Title)}}function Li(a,n){if(1&a&&(e.ynx(0),e.YNc(1,wi,5,11,"ng-container",0),e.YNc(2,Zi,2,1,"ng-container",0),e.BQk()),2&a){const t=n.$implicit;e.xp6(1),e.Q6J("ngIf",0==(null==t.core_Person_Instance_Job_Title?null:t.core_Person_Instance_Job_Title.length)),e.xp6(1),e.Q6J("ngIf",(null==t.core_Person_Instance_Job_Title?null:t.core_Person_Instance_Job_Title.length)>0)}}function Pi(a,n){if(1&a&&(e.ynx(0),e.YNc(1,Li,3,2,"ng-container",11),e.BQk()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.core_Person_Instance_Org)}}function Ji(a,n){if(1&a&&(e.ynx(0),e.YNc(1,Ti,5,7,"ng-container",0),e.YNc(2,Pi,2,1,"ng-container",0),e.BQk()),2&a){const t=n.$implicit;e.xp6(1),e.Q6J("ngIf",0==t.core_Person_Instance_Org.length),e.xp6(1),e.Q6J("ngIf",(null==t.core_Person_Instance_Org?null:t.core_Person_Instance_Org.length)>0)}}function ki(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-prime-paginator",23),e.NdJ("onChangePage",function(i){e.CHM(t);const s=e.oxw(3);return e.KtG(s.getList(i.pageIndex+1,i.pageSize))}),e.qZA()}if(2&a){const t=e.oxw(3);e.Q6J("page",t.page)("isDialogSize",!0)}}function Ni(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"mat-paginator",24),e.NdJ("page",function(i){e.CHM(t);const s=e.oxw(3);return e.KtG(s.getList(i.pageIndex+1,i.pageSize))}),e.qZA()}if(2&a){const t=e.oxw(3);e.Q6J("pageSizeOptions",t.page.pageSizeOptions)("length",t.page.length)("pageSize",t.page.dialogSize)("pageIndex",t.page.pageIndex-1)("hidePageSize",!0)("showFirstLastButtons",!1)}}function Mi(a,n){if(1&a&&(e.ynx(0),e.TgZ(1,"mat-card-content",6)(2,"div",7)(3,"table",8)(4,"thead")(5,"tr")(6,"th"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th"),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"th",9),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"th"),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"th"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"th"),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.YNc(27,vi,3,3,"th",10),e.TgZ(28,"th"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"th"),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"th"),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"th"),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"th"),e._uU(41),e.ALo(42,"translate"),e.qZA()()(),e.TgZ(43,"tbody"),e.YNc(44,Ji,3,2,"ng-container",11),e.qZA()()()(),e.YNc(45,ki,1,2,"app-prime-paginator",12),e.YNc(46,Ni,1,6,"mat-paginator",13),e.BQk()),2&a){const t=e.oxw(2);e.xp6(7),e.Oqu(e.lcZ(8,18,"status")),e.xp6(3),e.Oqu(e.lcZ(11,20,"from_Date")),e.xp6(3),e.Oqu(e.lcZ(14,22,"to_Date")),e.xp6(3),e.Oqu(e.lcZ(17,24,"actions")),e.xp6(3),e.Oqu(e.lcZ(20,26,"organization")),e.xp6(3),e.Oqu(e.lcZ(23,28,"from_Date")),e.xp6(2),e.ekj("actions-side-border",t.hideActions),e.xp6(1),e.hij(" ",e.lcZ(26,30,"to_Date")," "),e.xp6(2),e.Q6J("ngIf",!t.hideActions),e.xp6(2),e.Oqu(e.lcZ(30,32,"job")),e.xp6(3),e.Oqu(e.lcZ(33,34,"from_Date")),e.xp6(3),e.Oqu(e.lcZ(36,36,"to_Date")),e.xp6(3),e.Oqu(e.lcZ(39,38,"counted")),e.xp6(3),e.Oqu(e.lcZ(42,40,"actions")),e.xp6(3),e.Q6J("ngForOf",t.stausDataTable),e.xp6(1),e.Q6J("ngIf",!t.hideActions&&t.page.length>t.page.dialogSize),e.xp6(1),e.Q6J("ngIf",t.hideActions&&t.page.length>t.page.dialogSize)}}function Fi(a,n){if(1&a&&(e.TgZ(0,"div",25),e._UZ(1,"app-table-skeleton",26),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("displayedColumns",t.displayedColumns)}}function Oi(a,n){if(1&a&&(e.TgZ(0,"div",27),e._UZ(1,"img",28)(2,"br"),e._uU(3),e.ALo(4,"translate"),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.assets.empty,e.LSH),e.xp6(2),e.hij(" ",e.lcZ(4,2,"emptytable")," ")}}function Ui(a,n){if(1&a&&(e.ynx(0),e.YNc(1,Mi,47,42,"ng-container",0),e.YNc(2,Fi,2,1,"div",4),e.YNc(3,Oi,5,4,"div",5),e.BQk()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==t.stausDataTable?null:t.stausDataTable.length)>0),e.xp6(1),e.Q6J("ngIf",!t.isLoaded&&!t.stausDataTable),e.xp6(1),e.Q6J("ngIf",0==(null==t.stausDataTable?null:t.stausDataTable.length)&&t.isLoaded||!t.stausDataTable&&t.isLoaded)}}function Qi(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"a",30),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2).status,s=e.oxw();return e.KtG(s.onDeleteStatus(i))}),e.ALo(1,"translate"),e._UZ(2,"i",31),e.qZA()}if(2&a){const t=e.oxw().$implicit;e.Tol(t.color),e.Q6J("matTooltip",e.lcZ(1,5,t.name)),e.xp6(2),e.Tol(t.icon)}}function qi(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"a",30),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2).status,s=e.oxw();return e.KtG(s.onAssign(i))}),e.ALo(1,"translate"),e._UZ(2,"i",31),e.qZA()}if(2&a){const t=e.oxw().$implicit;e.Tol(t.color),e.Q6J("matTooltip",e.lcZ(1,5,t.name)),e.xp6(2),e.Tol(t.icon)}}function Ri(a,n){if(1&a&&(e.ynx(0),e.YNc(1,Qi,3,7,"a",29),e.YNc(2,qi,3,7,"a",29),e.BQk()),2&a){const t=n.$implicit;e.xp6(1),e.Q6J("ngIf","delete"==t.name.toLowerCase()),e.xp6(1),e.Q6J("ngIf","assign"==t.name.toLowerCase())}}function Bi(a,n){if(1&a&&(e.TgZ(0,"td"),e._uU(1),e.qZA(),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td",9)(7,"div",19),e.YNc(8,Ri,3,2,"ng-container",11),e.qZA()()),2&a){const t=n.status,o=e.oxw();e.uIk("rowspan",o.noOfJobInStatus(t)),e.xp6(1),e.hij(" ",o.msgTranslate(null==t.core_Status?null:t.core_Status.ar_Name,null==t.core_Status?null:t.core_Status.en_Name)," "),e.xp6(1),e.uIk("rowspan",o.noOfJobInStatus(t)),e.xp6(1),e.hij(" ",o.helpersFunctions.mapDate(t.from_Date)," "),e.xp6(1),e.uIk("rowspan",o.noOfJobInStatus(t)),e.xp6(1),e.hij(" ",o.helpersFunctions.mapDate(t.to_Date)," "),e.xp6(1),e.uIk("rowspan",o.noOfJobInStatus(t)),e.xp6(2),e.Q6J("ngForOf",o.statusRowFunctions.basic)}}function Vi(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"td",9)(1,"div",19)(2,"app-row-functions",32),e.NdJ("onAction",function(i){e.CHM(t);const s=e.oxw(),f=s.status,T=s.org,V=e.oxw();return e.KtG(V.orgOnAction(i,f,T))}),e.qZA()()()}if(2&a){const t=e.oxw().org,o=e.oxw();e.uIk("rowspan",t.core_Person_Instance_Job_Title.length),e.xp6(2),e.Q6J("actions",o.orgRowFunctions)}}function Yi(a,n){if(1&a&&(e.TgZ(0,"td"),e._uU(1),e.qZA(),e.TgZ(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.YNc(6,Vi,3,2,"td",10)),2&a){const t=n.org,o=e.oxw();e.uIk("rowspan",t.core_Person_Instance_Job_Title.length),e.xp6(1),e.hij(" ",o.msgTranslate(null==t||null==t.core_Org?null:t.core_Org.ar_Name,null==t||null==t.core_Org?null:t.core_Org.en_Name)," "),e.xp6(1),e.uIk("rowspan",t.core_Person_Instance_Job_Title.length),e.xp6(1),e.hij(" ",o.helpersFunctions.mapDate(null==t?null:t.from_Date)," "),e.xp6(1),e.ekj("actions-side-border",o.hideActions),e.uIk("rowspan",t.core_Person_Instance_Job_Title.length),e.xp6(1),e.hij(" ",o.helpersFunctions.mapDate(null==t?null:t.to_Date)," "),e.xp6(1),e.Q6J("ngIf",!o.hideActions)}}var O=(()=>(function(a){a.assign="assign",a.append="append",a.edit="edit",a.delete="delete",a.close="close",a.assignManager="assignManager"}(O||(O={})),O))();let it=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeJobInformationService=t,this.dialog=o,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.currentAction=new e.vpe,this.isThereJobWithManPower=new e.vpe,this.employeeId=0,this.employeeInstanceId=0,this.displayedColumns=["status","from_Date","to_Date","actions","organization","from_Date","to_Date","job","from_Date","to_Date","counted","actions"],this.isLoaded=!1,this.jobRowFunctions={basic:[],dropdown:[]},this.orgRowFunctions={basic:[],dropdown:[]},this.statusRowFunctions={basic:[],dropdown:[]},this.helpersFunctions=c.M6,this.employeeId=m.w.EmployeeId,this.employeeInstanceId=m.w.Person_Instance_ID,m.w.Person_Instance_ID$.subscribe(i=>this.employeeInstanceId=i),this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_job_info_sec),this.jobRowFunctions.basic=this.rowFunctions.basic.filter(i=>{let s=i.name.toLocaleLowerCase();return s.includes(O.edit)||s.includes(O.delete)||s.includes(O.close)}),this.orgRowFunctions.basic=this.rowFunctions.basic.filter(i=>!this.jobRowFunctions.basic.map(s=>s.id).includes(i.id)),this.statusRowFunctions.basic=this.rowFunctions.dropdown}ngOnChanges(t){t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeInstanceId>0&&this.getList(this.firstPage),this.hideActions&&(this.statusRowFunctions.basic=this.statusRowFunctions.basic.filter(o=>o.name.toLowerCase()===O.delete),this.jobRowFunctions.basic=this.jobRowFunctions.basic.filter(o=>o.name.toLowerCase()===O.delete))}onChangeBusinessAndCompanyId(){this.stausDataTable?.length>0&&(this.stausDataTable=null),this.checkNoBusinessOrCompany()&&this.employeeId>0&&this.getList(this.firstPage)}getList(t,o){this.stausDataTable=null,this.isLoaded=!1,this.page.pageIndex=t,this.isLoaded=!1,o&&(this.page.dialogSize=o),this.employeeJobInformationService.getList(this.employeeId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(s=>{s.message.messageType==p.u.Success?(this.stausDataTable=s.data,this.page.length=s.meta.totalItemCount,this.page.meta=s.meta,this.isLoaded=!0,this.checkIfEmployeeHasJobWithManPower()):this.errorList(s?.message?.messages)})}toEdit(t,o,i){i&&this.checkIfEmployeeHasJobWithManPower(i?.id),console.log(t,o,i),this.rowToEdit.emit({status:t,org:o,job:i})}onDeleteJob(t,o){let i=this.msgTranslate(o.core_Job_Title.ar_Name,o.core_Job_Title.en_Name);this.deleteDialog(i).subscribe(s=>{s&&this.deleteJob(t,o)})}deleteJob(t,o){this.showLoading("table"),this.employeeJobInformationService.DeleteJob(t.id,o.id).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeJobRemoved"),1==this.stausDataTable.length&&1==this.noOfJobInStatus(t)&&this.currentPage>1?this.getList(this.prevPage,this.page.dialogSize):this.getList(this.currentPage,this.page.dialogSize),this.afterDelete.emit(t)):this.errorList(i?.message?.messages),this.hideLoading("table")})}onDeleteStatus(t){let o=this.msgTranslate(t.core_Status.ar_Name,t.core_Status.en_Name);this.deleteDialog(o).subscribe(i=>{i&&this.deleteStatus(t)})}deleteStatus(t){this.showLoading("table"),this.employeeJobInformationService.DeleteStatus(t.id).subscribe(o=>{o.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeJobRemoved"),this.getList(1==this.stausDataTable.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize),this.afterDelete.emit(t)):this.errorList(o?.message?.messages),this.hideLoading("table")})}openCloseDialog(t){this.dialog.open(Ci,{data:t,height:"auto",minWidth:"40%",autoFocus:!1,panelClass:"dialog-emp-form"}).afterClosed().subscribe(o=>{this.getList(this.currentPage)})}onAssign(t){this.currentAction.emit(O.assign),this.toEdit(t,null,null)}orgOnAction(t,o,i){t.fun.name==O.assignManager&&this.openAssignManagerDialog(i),t.fun.name==O.append&&(this.currentAction.emit(O.append),this.toEdit(o,i,null))}jobOnAction(t,o){"close"==t.fun.name&&this.openCloseDialog(o)}openAssignManagerDialog(t){this.dialog.open(bi,{data:t,minWidth:"50%",height:"auto",autoFocus:!1,panelClass:"dialog-emp-form"}).afterClosed().subscribe(o=>{})}checkIfEmployeeHasJobWithManPower(t=0){let o=!1;this.stausDataTable.forEach(i=>i.core_Person_Instance_Org.forEach(s=>s.core_Person_Instance_Job_Title.forEach(f=>{f.is_Manpower_Affected&&f?.id!=t&&(o=!0)}))),this.isThereJobWithManPower.emit(o)}noOfJobInStatus(t){let o=t.core_Person_Instance_Org.reduce((i,s)=>i+s.core_Person_Instance_Job_Title.length,0);return o>0?o:null}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(z._),e.Y36(_.uw))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-job-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete",currentAction:"currentAction",isThereJobWithManPower:"isThereJobWithManPower"},features:[e.qOj,e.TTD],decls:6,vars:2,consts:[[4,"ngIf"],[3,"name"],["statusCells",""],["orgCells",""],["class","mtop-25",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"table-in-forms"],["appScrollableHorizontal","",1,"mat-elevation-z8","f-w","table-container"],[1,"job-info-table"],[1,"actions-side-border"],["class","actions-side-border",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"page","isDialogSize","onChangePage",4,"ngIf"],[3,"pageSizeOptions","length","pageSize","pageIndex","hidePageSize","showFirstLastButtons","page",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["colspan","5"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],["class","success",4,"ngIf","ngIfElse"],["no",""],[2,"width","max-content"],["iconSize","font-small-3",3,"actions","editRow","deleteRow","onAction"],[1,"success"],[1,"danger"],[3,"page","isDialogSize","onChangePage"],[3,"pageSizeOptions","length","pageSize","pageIndex","hidePageSize","showFirstLastButtons","page"],[1,"mtop-25"],[3,"displayedColumns"],[1,"text-center"],[3,"src"],[3,"class","matTooltip","click",4,"ngIf"],[3,"matTooltip","click"],[1,"font-small-3","mr-2","p-0"],["iconSize","font-small-3",3,"actions","onAction"]],template:function(t,o){1&t&&(e.YNc(0,Ui,4,3,"ng-container",0),e._UZ(1,"ngx-spinner",1),e.YNc(2,Bi,9,8,"ng-template",null,2,e.W1O),e.YNc(4,Yi,7,9,"ng-template",null,3,e.W1O)),2&t&&(e.Q6J("ngIf",o.employeeId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.sg,d.O5,d.tP,et.I,yi.h,tt.m,ot.c,y.dn,ke.gM,Ii.NW,C.Ro,L.X$],styles:[".job-info-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:15px 10px!important}.job-info-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#454545;font-size:14px;font-family:interMedium,serif!important;padding:10px!important}.job-info-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:not(:first-child)   td[_ngcontent-%COMP%]{border-top:2px solid #cfdce5}.job-info-table[_ngcontent-%COMP%]   .actions-side-border[_ngcontent-%COMP%]{border-right:2px solid #cfdce5}.job-info-table[_ngcontent-%COMP%]   .tr-backgroung[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#f0f0f0}  .mat-paginator[ng-reflect-hide-page-size=true] .mat-paginator-range-label{display:none}"]}),a})();var R=(()=>(function(a){a.assign="assign",a.append="append",a.edit="edit",a.delete="delete",a.close="close",a.assignManager="assignManager"}(R||(R={})),R))();function Gi(a,n){if(1&a&&e._UZ(0,"app-prime-dropdown",26),2&a){const t=e.oxw();e.Q6J("control",t.empStatusCtrls.StatusPropertiesId)("submitted",t.submitted)("List",t.reasonsList)("disable",t.currentAction===t.actionType.assign||t.currentAction===t.actionType.append)("appendTo",t.dialogContainer)}}function ji(a,n){if(1&a&&(e.TgZ(0,"div",7),e._UZ(1,"employees-shared-company",27),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("control",t.empStatusCtrls.NewDefaultCompany)("person_ID",t.employeeId)("submitted",t.submitted)("disable",t.currentAction===t.actionType.assign||t.currentAction===t.actionType.append)("appendTo",t.dialogContainer)}}function zi(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",28),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}function Hi(a,n){1&a&&e._UZ(0,"mat-divider",29)}let Wi=(()=>{class a extends u.U{constructor(t){super(),this.employeeJobInformationService=t,this.changUpdated=new e.vpe,this.employeeId=0,this.employeeInstanceId=0,this.displayedColumns=["status","status_date","status_end_date","org","actions"],this.isLoaded=!1,this.submitted=!1,this.hasUpdate=!1,this.getList=!1,this.Constants=ce.g,this.actionType=R,this.jobRowFunctions={basic:[],dropdown:[]},this.orgRowFunctions={basic:[],dropdown:[]},this.statusRowFunctions={basic:[],dropdown:[]},this.canEditIsManPower=!0,this.employeeId=m.w.EmployeeId,this.employeeInstanceId=m.w.Person_Instance_ID,m.w.Person_Instance_ID$.subscribe(o=>this.employeeInstanceId=o),this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_job_info_sec),this.jobRowFunctions.basic=this.rowFunctions.basic.filter(o=>{let i=o.name.toLocaleLowerCase();return i.includes(R.edit)||i.includes(R.delete)||i.includes(R.close)}),this.orgRowFunctions.basic=this.rowFunctions.basic.filter(o=>!this.jobRowFunctions.basic.map(i=>i.id).includes(o.id)),this.statusRowFunctions.basic=this.rowFunctions.dropdown}ngOnInit(){this.form=this.fb.group({employee_Status:this.fb.group({id:[0,{nonNullable:!0}],Status_ID:[null,[l.kI.required]],From_Date:[null,[l.kI.required]],StatusPropertiesId:[],NewDefaultCompany:[]}),core_Person_Instance_Org:this.fb.group({id:[0,{nonNullable:!0}],orgTypeId:[null,[l.kI.required]],person_Instance_Status_ID:[null],Org_ID:[null,[l.kI.required]],From_Date:[null,[l.kI.required]]}),core_Person_Instance_Job_Title:this.fb.group({id:[0,{nonNullable:!0}],Job_Title_ID:[null,[l.kI.required]],person_Instance_Org_ID:[null],From_Date:[null,[l.kI.required]],Is_Manpower_Affected:[!1]})})}get formCtrls(){return this.form.controls}get empStatusCtrls(){return this.form.get("employee_Status").controls}get corePersonOrgCtrls(){return this.form.get("core_Person_Instance_Org").controls}get corePersonJobCtrls(){return this.form.get("core_Person_Instance_Job_Title").controls}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={employee_Status:{PersonInstanceStatus:{id:this.empStatusCtrls.id.value,Person_Instance_ID:this.employeeInstanceId,Status_ID:this.empStatusCtrls.Status_ID.value,From_Date:c.M6.transformData(this.empStatusCtrls.From_Date.value),StatusPropertiesId:this.empStatusCtrls.StatusPropertiesId.value},NewDefaultCompany:this.empStatusCtrls.NewDefaultCompany.value},core_Person_Instance_Org:{id:this.corePersonOrgCtrls.id.value,Person_Instance_ID:this.employeeInstanceId,Org_ID:this.corePersonOrgCtrls.Org_ID.value,person_Instance_Status_ID:this.corePersonOrgCtrls.person_Instance_Status_ID.value,From_Date:c.M6.transformData(this.corePersonOrgCtrls.From_Date.value)},core_Person_Instance_Job_Title:{id:this.corePersonJobCtrls.id.value,Person_Instance_ID:this.employeeInstanceId,Job_Title_ID:this.corePersonJobCtrls.Job_Title_ID.value,From_Date:c.M6.transformData(this.corePersonJobCtrls.From_Date.value),Is_Manpower_Affected:this.corePersonJobCtrls.Is_Manpower_Affected.value,person_Instance_Org_ID:this.corePersonJobCtrls.person_Instance_Org_ID.value}};this.empStatusCtrls.Status_ID.value==ce.g.endOfServiceID&&(t.core_Person_Instance_Job_Title=null,t.core_Person_Instance_Org=null),this.currentAction===R.assign?this.assign({core_Person_Instance_Org:t.core_Person_Instance_Org,core_Person_Instance_Job_Title:t.core_Person_Instance_Job_Title}):this.currentAction===R.append?this.append({core_Person_Instance_Job_Title:t.core_Person_Instance_Job_Title}):0==t.employee_Status.PersonInstanceStatus.id?this.create(t):this.update(t)}}create(t){this.showLoading("job"),this.employeeJobInformationService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newEmployeeJobAdded"),this.hasUpdate=!0,this.getList=!0,this.changUpdated.emit(!0),this.employeeJobInformationService.updateWorkScheduleCard$.next(!0)):this.errorList(o?.message?.messages),this.hideLoading("job")})}update(t){this.showLoading("job"),this.employeeJobInformationService.update(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg("employeeJobUpdated"),this.hasUpdate=!0,this.getList=!0,this.changUpdated.emit(!0),this.employeeJobInformationService.updateWorkScheduleCard$.next(!0)):this.errorList(o?.message?.messages),this.hideLoading("job")})}append(t){this.showLoading("job"),this.employeeJobInformationService.appendJob(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newEmployeeJobAdded"),this.hasUpdate=!0,this.getList=!0,this.changUpdated.emit(!0),this.employeeJobInformationService.updateWorkScheduleCard$.next(!0)):this.errorList(o?.message?.messages),this.hideLoading("job")})}assign(t){this.showLoading("job"),this.employeeJobInformationService.assignOrgAndJob(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newEmployeeJobAdded"),this.hasUpdate=!0,this.getList=!0,this.changUpdated.emit(!0),this.employeeJobInformationService.updateWorkScheduleCard$.next(!0)):this.errorList(o?.message?.messages),this.hideLoading("job")})}jobToEdit(t){this.resetForm();let o=t.status,i=t.org,s=t.job;if(o&&(this.empStatusCtrls.id.setValue(o.id),this.empStatusCtrls.Status_ID.setValue(o.status_ID),this.empStatusCtrls.From_Date.setValue(o.from_Date),this.empStatusCtrls.StatusPropertiesId.setValue(o.statusPropertiesId),this.empStatusCtrls.NewDefaultCompany.setValue(o.statusPropertiesId),this.corePersonOrgCtrls.person_Instance_Status_ID.setValue(o.id)),i){let f=i.core_Org?.core_Org_Structure_Org[0]?.orG_TYPE_ID;console.log(f),this.corePersonOrgCtrls.id.setValue(i.id),this.corePersonOrgCtrls.orgTypeId.setValue(f),this.corePersonOrgCtrls.From_Date.setValue(i.from_Date),this.corePersonJobCtrls.person_Instance_Org_ID.setValue(i.id),setTimeout(()=>{this.corePersonOrgCtrls.Org_ID.setValue(i.org_ID)},100)}s&&(this.corePersonJobCtrls.id.setValue(s.id),this.corePersonJobCtrls.From_Date.setValue(s.from_Date),this.corePersonJobCtrls.Is_Manpower_Affected.setValue(s.is_Manpower_Affected),setTimeout(()=>{this.corePersonJobCtrls.Job_Title_ID.setValue(s.job_Title_ID)},1e3))}onChangeStatus(t){this.reasonsList=t[0]?.core_Status_Properties,this.reasonsList?.length>0?this.empStatusCtrls.StatusPropertiesId.setValidators([l.kI.required]):(this.empStatusCtrls.StatusPropertiesId.removeValidators([l.kI.required]),this.empStatusCtrls.StatusPropertiesId.reset())}afterDelete(t){t.id==this.empStatusCtrls.id.value&&this.clearForm(),t&&(this.hasUpdate=!0,this.changUpdated.emit(!0))}getCurrentAction(t){this.currentAction=t}clearForm(){this.resetForm(),this.submitted=!1,this.currentAction=null}resetForm(){this.form.reset({employee_Status:{id:0},core_Person_Instance_Org:{id:0},core_Person_Instance_Job_Title:{id:0,Is_Manpower_Affected:!1}})}changeCanEditIsManPower(t){this.canEditIsManPower=t,this.corePersonJobCtrls.Is_Manpower_Affected.setValue(!t)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(z._))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-job-section"]],inputs:{dialogContainer:"dialogContainer",canEditIsManPower:"canEditIsManPower"},outputs:{changUpdated:"changUpdated"},features:[e.qOj],decls:51,vars:59,consts:[[1,"step-one-content"],[3,"formGroup"],["formGroupName","employee_Status",1,"row"],[1,"col-lg-2","col-12"],[1,"candidate-sub-title"],[1,"col-lg-10","col-12"],[1,"row"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","submitted","filter","disable","appendTo","change"],["label","from_Date",3,"control","disable","submitted"],["label","reasons",3,"control","submitted","List","disable","appendTo",4,"ngIf"],["class","col-md-4 col-sm-6 col-12",4,"ngIf"],["formGroupName","core_Person_Instance_Org",1,"row"],[3,"control","submitted","filter","disable","appendTo"],[3,"orgTypeControl","control","submitted","filter","disable","appendTo"],["label","from_Date",3,"control","submitted","disable"],["formGroupName","core_Person_Instance_Job_Title",1,"row"],[3,"control","organizationControl","organizationControlRequired","submitted","filter","appendTo","disable"],[1,"col-md-4","col-sm-6","col-12","mbottom-20","mtop-14"],["label","counted",3,"control","disable"],["align","end"],[3,"click",4,"ngIf"],["icon","fas fa-save",3,"color","disabled","iconPositionBefore","onClick"],["class","darker-divider mbottom-30",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete","currentAction","isThereJobWithManPower"],[3,"name"],["label","reasons",3,"control","submitted","List","disable","appendTo"],[3,"control","person_ID","submitted","disable","appendTo"],[3,"click"],[1,"darker-divider","mbottom-30"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"h5",4),e._uU(5),e.ALo(6,"titlecase"),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"app-job-status-dropdown",8),e.NdJ("change",function(s){return o.onChangeStatus(s)}),e.qZA()(),e.TgZ(12,"div",7),e._UZ(13,"app-datepicker",9),e.qZA(),e.TgZ(14,"div",7),e.YNc(15,Gi,1,5,"app-prime-dropdown",10),e.qZA(),e.YNc(16,ji,2,5,"div",11),e.qZA()()(),e.TgZ(17,"div",12)(18,"div",3)(19,"h5",4),e._uU(20),e.ALo(21,"titlecase"),e.ALo(22,"translate"),e.qZA()(),e.TgZ(23,"div",5)(24,"div",6)(25,"div",7),e._UZ(26,"app-org-types-dropdown-current-structure",13),e.qZA(),e.TgZ(27,"div",7),e._UZ(28,"app-organization-by-org-type-dropdown",14),e.qZA(),e.TgZ(29,"div",7),e._UZ(30,"app-datepicker",15),e.qZA()()()(),e.TgZ(31,"div",16)(32,"div",3)(33,"h5",4),e._uU(34),e.ALo(35,"titlecase"),e.ALo(36,"translate"),e.qZA()(),e.TgZ(37,"div",5)(38,"div",6)(39,"div",7),e._UZ(40,"app-job-title-by-org-dropdown",17),e.qZA(),e.TgZ(41,"div",7),e._UZ(42,"app-datepicker",15),e.qZA(),e.TgZ(43,"div",18),e._UZ(44,"app-check-box",19),e.qZA()()()()(),e.TgZ(45,"mat-card-actions",20),e.YNc(46,zi,1,0,"reset-form-btn",21),e.TgZ(47,"submit-btn",22),e.NdJ("onClick",function(){return o.submit()}),e.qZA()(),e.YNc(48,Hi,1,0,"mat-divider",23),e.TgZ(49,"app-emp-job-table",24),e.NdJ("rowToEdit",function(s){return o.jobToEdit(s)})("afterDelete",function(s){return o.afterDelete(s)})("currentAction",function(s){return o.getCurrentAction(s)})("isThereJobWithManPower",function(s){return o.changeCanEditIsManPower(s)}),e.qZA()(),e._UZ(50,"ngx-spinner",25)),2&t&&(e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(4),e.hij(" ",e.lcZ(6,47,e.lcZ(7,49,"status"))," "),e.xp6(6),e.Q6J("control",o.empStatusCtrls.Status_ID)("submitted",o.submitted)("filter",!0)("disable",o.currentAction===o.actionType.assign||o.currentAction===o.actionType.append)("appendTo",o.dialogContainer),e.xp6(2),e.Q6J("control",o.empStatusCtrls.From_Date)("disable",o.currentAction===o.actionType.assign||o.currentAction===o.actionType.append)("submitted",o.submitted),e.xp6(2),e.Q6J("ngIf",(null==o.reasonsList?null:o.reasonsList.length)>0),e.xp6(1),e.Q6J("ngIf",o.empStatusCtrls.Status_ID.value==o.Constants.endOfServiceID&&(null==o.empStatusCtrls?null:o.empStatusCtrls.id.value)>0),e.xp6(4),e.hij(" ",e.lcZ(21,51,e.lcZ(22,53,"organizationData"))," "),e.xp6(6),e.Q6J("control",o.corePersonOrgCtrls.orgTypeId)("submitted",o.submitted)("filter",!0)("disable",o.currentAction===o.actionType.append||o.empStatusCtrls.Status_ID.value==o.Constants.endOfServiceID)("appendTo",o.dialogContainer),e.xp6(2),e.Q6J("orgTypeControl",o.corePersonOrgCtrls.orgTypeId)("control",o.corePersonOrgCtrls.Org_ID)("submitted",o.submitted)("filter",!0)("disable",o.currentAction===o.actionType.append||!(o.corePersonOrgCtrls.orgTypeId.value>0)||o.empStatusCtrls.Status_ID.value==o.Constants.endOfServiceID)("appendTo",o.dialogContainer),e.xp6(2),e.Q6J("control",o.corePersonOrgCtrls.From_Date)("submitted",o.submitted)("disable",o.currentAction===o.actionType.append||o.empStatusCtrls.Status_ID.value==o.Constants.endOfServiceID),e.xp6(4),e.hij(" ",e.lcZ(35,55,e.lcZ(36,57,"jobData"))," "),e.xp6(6),e.Q6J("control",o.corePersonJobCtrls.Job_Title_ID)("organizationControl",o.corePersonOrgCtrls.Org_ID)("organizationControlRequired",!0)("submitted",o.submitted)("filter",!0)("appendTo",o.dialogContainer)("disable",o.empStatusCtrls.Status_ID.value==o.Constants.endOfServiceID),e.xp6(2),e.Q6J("control",o.corePersonJobCtrls.From_Date)("submitted",o.submitted)("disable",o.empStatusCtrls.Status_ID.value==o.Constants.endOfServiceID),e.xp6(2),e.Q6J("control",o.corePersonJobCtrls.Is_Manpower_Affected)("disable",o.empStatusCtrls.Status_ID.value==o.Constants.endOfServiceID||!o.canEditIsManPower),e.xp6(2),e.Q6J("ngIf",o.empStatusCtrls.id.value>0),e.xp6(1),e.Q6J("color",o.btn.darkBlue)("disabled",!o.employeeId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.employeeId>0),e.xp6(1),e.Q6J("hasUpdate",o.getList),e.xp6(1),e.Q6J("name","job"))},dependencies:[d.O5,N.Q,Y.u,Z.J,D.p,mi.P,y.hq,q.d,C.Ro,Xe.t,ui.A,_i.s,gi.v,hi.P,l._Y,l.JL,l.sg,l.x0,it,d.rS,L.X$],styles:[".nested-tr[_ngcontent-%COMP%]{border-width:1px;padding:5px;background:#f7f7f7;margin:0}.table.table-responsive-sm[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table.table-responsive-sm[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{width:20%;font-size:13px}.table-container[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:10px!important}"]}),a})();var H=r(26427),$i=r(90376);const Ki=function(){return[]};let Xi=(()=>{class a extends u.U{constructor(t,o,i){super(),this.data=t,this.dialogRef=o,this.policyGroupService=i,this.mandatoryColomns=["policyGroupType","policyGroupName",ce.g.selectAllColumnName],this.submitted=!1,this.policyStartDate=new l.NI("",[l.kI.required]),this.selectedPolicyGroups=[],this.employeeInstanceId=m.w.Person_Instance_ID,t&&(this.dataSource=new g.by(function ni(a){return a.map(n=>({policyGroupId:n.id,policyGroupName:(0,c._f)(n?.ar_Name,n?.en_Name),policyGroupTypeId:n.core_PolicyGroup_Type?.id,policyGroupType:(0,c._f)(n.core_PolicyGroup_Type?.ar_Name,n.core_PolicyGroup_Type?.en_Name),isSelected:!1}))}(t)))}submit(){if(this.submitted=!0,0!==this.selectedPolicyGroups?.length){if(this.policyStartDate.value){let t=[];this.selectedPolicyGroups.forEach(o=>{t.push({employeeId:this.employeeInstanceId,policyGroupId:o.policyGroupId,policyGroupTypeId:o.policyGroupTypeId,policyStartDate:c.M6.mapDateReverse(this.policyStartDate.value)})}),this.showLoading(),this.policyGroupService.saveIntersectionEmployees(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.dialogRef.close(!0),this.addSuccessfullyMsg("","newEmployeePolicyGroupAdded")):this.errorList(o?.message?.messages),this.hideLoading()})}}else this.error("mustSelectPolicyGroupAtLeast","validation")}onSelectPolicyGroup(t){this.selectedPolicyGroups=t}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.WI),e.Y36(_.so),e.Y36($i.B))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-policy-group-intersection-dialog"]],features:[e.qOj],decls:33,vars:28,consts:[["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","policyConflictDetected",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"mat-dialog-close"],[1,"pi","pi-times"],[1,"container-fluid","mx-0","mt-1","policy-group-intersection-dialog"],[1,"d-flex","justify-content-center","mbottom-15"],[1,"exclamation"],["width","30",3,"src"],[1,"black","font-size-18","mbottom-15","interMedium"],[1,"dark-blue","font-size-18","mbottom-20","interMedium"],[1,"row"],[1,"col-12"],[1,"col-md-6","col-12"],["label","fromDate",3,"control","submitted"],[1,"col-12",2,"margin-top","-12px"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","showSpaceTop","showPaginator","showFilter","selectedItems"],[1,"black","font-size-18","interMedium"],["mat-dialog-actions","","align","end"],["mat-raised-button","",1,"btn","btn-light",3,"mat-dialog-close"],["mat-raised-button","",1,"btn","btn-darkBlue",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h4"),e._UZ(2,"page-title",1),e.qZA(),e.TgZ(3,"button",2),e._UZ(4,"i",3),e.qZA()(),e.TgZ(5,"mat-dialog-content",4)(6,"div")(7,"div",5)(8,"div",6),e._UZ(9,"img",7),e.qZA()(),e.TgZ(10,"div",8),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div",9),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"div",10)(17,"div",11)(18,"div",10)(19,"div",12),e._UZ(20,"app-datepicker",13),e.qZA()()(),e.TgZ(21,"div",14)(22,"app-material-table",15),e.NdJ("selectedItems",function(s){return o.onSelectPolicyGroup(s)}),e.qZA()()(),e.TgZ(23,"div",16),e._uU(24),e.ALo(25,"translate"),e.qZA()(),e.TgZ(26,"div",17)(27,"button",18),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"button",19),e.NdJ("click",function(){return o.submit()}),e._uU(31),e.ALo(32,"translate"),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("mat-dialog-close",!1),e.xp6(6),e.Q6J("src",o.svg.exclamation,e.LSH),e.xp6(2),e.hij(" ",e.lcZ(12,17,"theSelectedEmployeeIsAssignedToMultiplePolicyGroupsWithEachOther")," "),e.xp6(3),e.hij(" ",e.lcZ(15,19,"selectStartDateForPolicyGroupAndChoosePoliciesYouWantToApply")," "),e.xp6(6),e.Q6J("control",o.policyStartDate)("submitted",o.submitted),e.xp6(2),e.Q6J("isLoaded",!0)("dataSource",o.dataSource)("mandatoryColomns",o.mandatoryColomns)("optionalColomns",e.DdM(27,Ki))("showSpaceTop",!1)("showPaginator",!1)("showFilter",!1),e.xp6(2),e.hij(" ",e.lcZ(25,21,"kindlyVerifyAndConfirmSelectionsConsultPolicyGuidelinesEnsureCompliance")," "),e.xp6(3),e.Q6J("mat-dialog-close",!1),e.xp6(1),e.hij(" ",e.lcZ(29,23,"return")," "),e.xp6(3),e.hij(" ",e.lcZ(32,25,"proceed")," "))},dependencies:[N.Q,w.I,I.T,E.lW,_.ZT,_.uh,_.xY,_.H8,L.X$],styles:[".dialog-emp-form:has(.policy-group-intersection-dialog){max-width:720px!important}.policy-group-intersection-dialog[_ngcontent-%COMP%]   .exclamation[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;padding:30px;border-radius:50%;background-color:#bf213233}.policy-group-intersection-dialog[_ngcontent-%COMP%]   .black[_ngcontent-%COMP%]{color:#101317}.policy-group-intersection-dialog[_ngcontent-%COMP%]   .dark-blue[_ngcontent-%COMP%]{color:#374761}"]}),a})(),en=(()=>{class a extends P.K{constructor(){super()}createWithCheckIntersections(t){return this.post("OrgManagement/PolicyGroup/SaveAndGetEmployeeIntersectionPolicies",t)}getListHistory(t,o){return this.get("OrgManagement/PolicyGroup/GetEmployeePolicyHistoryList",{params:{...o,employeeId:t}})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var tn=r(90926);function on(a,n){if(1&a){const t=e.EpF();e.ynx(0),e._UZ(1,"mat-divider",15),e.TgZ(2,"app-material-table",16),e.NdJ("onChangePage",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.getList(i.pageIndex+1,i.pageSize))}),e.qZA(),e.BQk()}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("page",t.page)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)}}let an=(()=>{class a extends u.U{constructor(t){super(),this.employeePolicyGroupService=t,this.employeeInstanceId=0,this.changUpdated=new e.vpe,this.mandatoryColomns=["PolicyGroup","policyGroupType","effectiveDate","toDate"],this.optionalColomns=[],this.isLoaded=!1,this.submitted=!1,this.employeeInstanceId=m.w.Person_Instance_ID}ngOnInit(){this.form=this.fb.group({payroll:[null],attendance:[null],selfService:[null]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.checkNoBusinessOrCompany()&&this.employeeInstanceId>0&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new g.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeePolicyGroupService.getListHistory(this.employeeInstanceId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(s=>{s.message.messageType==p.u.Success?(this.dataSource=new g.by(function ii(a){return a.map(n=>({PolicyGroup:(0,c._f)(n.core_PolicyGroup?.ar_Name,n.core_PolicyGroup?.en_Name),policyGroupType:(0,c._f)(n.core_PolicyGroup?.core_PolicyGroup_Type?.ar_Name,n.core_PolicyGroup?.core_PolicyGroup_Type?.en_Name),effectiveDate:c.M6.mapDate(n.from_Date),toDate:c.M6.mapDate(n.to_Date)}))}(s.data)),this.page.length=s.meta.totalItemCount,this.page.meta=s.meta,this.isLoaded=!0):this.errorList(s?.message?.messages)})}submit(){if(this.submitted=!0,this.form.valid){const t={EmployeeId:this.employeeInstanceId,core_PolicyGroups:[]};this.formCtrls.payroll.value&&t.core_PolicyGroups.push({ID:this.formCtrls.payroll.value,PolicyGroup_Type_ID:H.Sg.Payroll,Ar_Name:this.selectedPayroll.ar_Name,En_Name:this.selectedPayroll.en_Name}),this.formCtrls.attendance.value&&t.core_PolicyGroups.push({ID:this.formCtrls.attendance.value,PolicyGroup_Type_ID:H.Sg.Attendance,Ar_Name:this.selectedAttendance.ar_Name,En_Name:this.selectedAttendance.en_Name}),this.formCtrls.selfService.value&&t.core_PolicyGroups.push({ID:this.formCtrls.selfService.value,PolicyGroup_Type_ID:H.Sg.SelfService,Ar_Name:this.selectedSelfService.ar_Name,En_Name:this.selectedSelfService.en_Name}),t.core_PolicyGroups.length>0?this.create(t):this.warning("selectAtLeastPolicyGroupForOneType")}}create(t){this.showLoading(),this.employeePolicyGroupService.createWithCheckIntersections(t).subscribe(o=>{if(o?.message?.messageType==p.u.Success){if(this.addSuccessfullyMsg("","newEmployeePolicyGroupAdded"),o.data.core_PolicyGroups?.length>0){let i=[];o.data.core_PolicyGroups.forEach(s=>{i.push(s.policyGroup_Type_ID==H.Sg.Payroll?this.selectedPayroll:s.policyGroup_Type_ID==H.Sg.Attendance?this.selectedAttendance:this.selectedSelfService)}),this.openIntersectionDialog(i,t.core_PolicyGroups.length>o.data.core_PolicyGroups?.length)}else this.getList(this.firstPage);this.changUpdated.emit(!0),this.clearForm()}else this.errorList(o?.message?.messages);this.hideLoading()})}openIntersectionDialog(t,o){this.dialogsService.addEditDialog(Xi,t).afterClosed().subscribe(i=>{(i||o)&&this.getList(this.currentPage)})}onChangePayroll(t){this.selectedPayroll=t?.length>0?t[0]:null}onChangeAttendance(t){this.selectedAttendance=t?.length>0?t[0]:null}onChangeSelfService(t){this.selectedSelfService=t?.length>0?t[0]:null}clearForm(){this.form.reset(),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(en))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-policy-group-section"]],inputs:{dialogContainer:"dialogContainer"},outputs:{changUpdated:"changUpdated"},features:[e.qOj],decls:21,vars:25,consts:[[1,""],[3,"formGroup"],[1,"row"],[1,"col-lg-2","col-12"],[1,"candidate-sub-title"],[1,"col-lg-10","col-12"],[1,"col-md-4","col-sm-6","col-12"],["label","payroll",3,"control","filterByPayroll","submitted","filter","appendTo","change"],["label","attendance",3,"control","filterByAttendance","submitted","filter","appendTo","change"],["label","selfService",3,"control","filterBySelfService","submitted","filter","appendTo","change"],[1,"emp-form-btns-float","mtop-14"],["icon","fas fa-save",3,"color","disabled","iconPositionBefore","onClick"],[3,"click"],[1,"clearfix"],[4,"ngIf"],[1,"darker-divider","mtop-20"],[1,"table-in-forms","table-fit",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","isDialogSize","showFilter","onChangePage"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"h5",4),e._uU(5),e.ALo(6,"titlecase"),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"div",5)(9,"div",2)(10,"div",6)(11,"app-policy-groups-dropdown",7),e.NdJ("change",function(s){return o.onChangePayroll(s)}),e.qZA()(),e.TgZ(12,"div",6)(13,"app-policy-groups-dropdown",8),e.NdJ("change",function(s){return o.onChangeAttendance(s)}),e.qZA()(),e.TgZ(14,"div",6)(15,"app-policy-groups-dropdown",9),e.NdJ("change",function(s){return o.onChangeSelfService(s)}),e.qZA()()()()()(),e.TgZ(16,"div",10)(17,"submit-btn",11),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.TgZ(18,"reset-form-btn",12),e.NdJ("click",function(){return o.clearForm()}),e.qZA(),e._UZ(19,"div",13),e.qZA(),e.YNc(20,on,3,8,"ng-container",14),e.qZA()),2&t&&(e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(4),e.hij(" ",e.lcZ(6,21,e.lcZ(7,23,"policyGroups"))," "),e.xp6(6),e.Q6J("control",o.formCtrls.payroll)("filterByPayroll",!0)("submitted",o.submitted)("filter",!0)("appendTo",o.dialogContainer),e.xp6(2),e.Q6J("control",o.formCtrls.attendance)("filterByAttendance",!0)("submitted",o.submitted)("filter",!0)("appendTo",o.dialogContainer),e.xp6(2),e.Q6J("control",o.formCtrls.selfService)("filterBySelfService",!0)("submitted",o.submitted)("filter",!0)("appendTo",o.dialogContainer),e.xp6(2),e.Q6J("color",o.btn.darkBlue)("disabled",!o.employeeInstanceId)("iconPositionBefore",!1),e.xp6(3),e.Q6J("ngIf",o.employeeInstanceId>0))},dependencies:[d.O5,w.I,Z.J,D.p,q.d,tn.P,l._Y,l.JL,l.sg,d.rS,L.X$]}),a})(),nn=(()=>{class a extends u.U{constructor(t){super(),this.dialogRef=t,this.isJobUpdated=!1,this.isPolicyGroupUpdated=!1}ngOnInit(){this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}onCloseDialog(){this.dialogRef.close({isJobUpdated:this.isJobUpdated,isPolicyGroupUpdated:this.isPolicyGroupUpdated})}jobUpdated(t){this.isJobUpdated=t}policyGroupUpdated(t){this.isPolicyGroupUpdated=t}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-job-info-dialog"]],features:[e.qOj],decls:12,vars:13,consts:[["dialogContainer",""],[1,"w-100","justify-content-center","emp-job-info-tabs",3,"dir"],[3,"label"],[3,"dialogContainer","changUpdated"],[3,"dialogContainer"]],template:function(t,o){if(1&t&&(e.TgZ(0,"mat-dialog-content",null,0)(2,"mat-tab-group",1)(3,"mat-tab",2),e.ALo(4,"translate"),e.TgZ(5,"app-emp-job-section",3),e.NdJ("changUpdated",function(s){return o.jobUpdated(s)}),e.qZA()(),e.TgZ(6,"mat-tab",2),e.ALo(7,"translate"),e.TgZ(8,"app-emp-policy-group-section",3),e.NdJ("changUpdated",function(s){return o.policyGroupUpdated(s)}),e.qZA()(),e.TgZ(9,"mat-tab",2),e.ALo(10,"translate"),e._UZ(11,"emp-supervisor-section",4),e.qZA()()()),2&t){const i=e.MAs(1);e.xp6(2),e.Q6J("dir",o.languageService.isArabic?"rtl":"ltr"),e.xp6(1),e.s9C("label",e.lcZ(4,7,"jobInfo")),e.xp6(2),e.Q6J("dialogContainer",i),e.xp6(1),e.s9C("label",e.lcZ(7,9,"PolicyGroup")),e.xp6(2),e.Q6J("dialogContainer",i),e.xp6(1),e.s9C("label",e.lcZ(10,11,"supervisor")),e.xp6(2),e.Q6J("dialogContainer",i)}},dependencies:[ti.Lv,Ye.SP,Ye.uX,_.xY,ci,Wi,an,L.X$],styles:[".dialog-emp-form:has(.emp-job-info-tabs){padding:0}  .mat-dialog-content:has(.emp-job-info-tabs){padding:0;margin:0}  .mat-dialog-content:has(.emp-job-info-tabs) .emp-job-info-tabs{position:relative}  .mat-dialog-content:has(.emp-job-info-tabs) .emp-job-info-tabs .mat-tab-header{position:sticky;top:0;background-color:#fff;border-radius:10px;z-index:100}  .mat-dialog-content:has(.emp-job-info-tabs) .mat-tab-body-content{padding:10px 24px;overflow-y:auto!important}  .mat-dialog-content:has(.emp-job-info-tabs) .mat-tab-header{border:none}  .mat-dialog-content:has(.emp-job-info-tabs) .mat-tab-labels{justify-content:center!important;padding-top:15px}  .mat-dialog-content:has(.emp-job-info-tabs) .mat-tab-labels .mat-tab-label{padding:0;margin:5px 24px;color:#999;min-width:0}  .mat-dialog-content:has(.emp-job-info-tabs) .mat-tab-labels .mat-tab-label .mat-tab-label-content{font-size:1.5rem;font-family:interMedium,serif!important}  .mat-dialog-content:has(.emp-job-info-tabs) .mat-tab-labels .mat-tab-label-active{color:#374761;opacity:1}  .mat-dialog-content:has(.emp-job-info-tabs) .mat-ink-bar{height:4px;background-color:#374761;border-radius:10px}  .mat-dialog-content:has(.emp-job-info-tabs) .candidate-sub-title{font-size:16px;font-family:interMedium,serif!important}"]}),a})();function ln(a,n){if(1&a&&(e._UZ(0,"card-row-item",22),e.ALo(1,"translate")),2&a){const t=e.oxw().$implicit,o=e.oxw(3);e.hYB("label","",e.lcZ(1,3,"PolicyGroup")," ",o.msgTranslate(null==t||null==t.core_PolicyGroup_Type?null:t.core_PolicyGroup_Type.ar_Name,null==t||null==t.core_PolicyGroup_Type?null:t.core_PolicyGroup_Type.en_Name),""),e.Q6J("value",o.msgTranslate(null==t?null:t.ar_Name,null==t?null:t.en_Name))}}function rn(a,n){if(1&a&&(e.ynx(0),e.YNc(1,ln,2,5,"card-row-item",21),e.BQk()),2&a){const t=n.$implicit;e.xp6(1),e.Q6J("ngIf",t)}}function pn(a,n){if(1&a&&(e.ynx(0),e.TgZ(1,"div",11),e._UZ(2,"card-row-item",12)(3,"card-row-item",13)(4,"card-row-item",14)(5,"card-row-item",15),e.qZA(),e.TgZ(6,"div",16),e._UZ(7,"card-row-item",17)(8,"card-row-item",18)(9,"card-row-item",19),e.YNc(10,rn,2,1,"ng-container",20),e.qZA(),e.BQk()),2&a){const t=e.oxw(2);e.xp6(2),e.Q6J("value",null==t.statusCard?null:t.statusCard.status_name),e.xp6(1),e.Q6J("value",null==t.statusCard?null:t.statusCard.status_from_date),e.xp6(1),e.Q6J("value",null==t.statusCard?null:t.statusCard.org_name),e.xp6(1),e.Q6J("value",null==t.statusCard?null:t.statusCard.org_from_date),e.xp6(2),e.Q6J("value",null==t.statusCard?null:t.statusCard.job_name),e.xp6(1),e.Q6J("value",null==t.statusCard?null:t.statusCard.time_in_position),e.xp6(1),e.Q6J("value",null==t.statusCard?null:t.statusCard.time_in_company),e.xp6(1),e.Q6J("ngForOf",null==t.statusCard?null:t.statusCard.policies)}}function cn(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-emp-job-table",23),e.NdJ("afterDelete",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function dn(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,pn,11,8,"ng-container",7),e.YNc(6,cn,1,2,"app-emp-job-table",8),e.qZA(),e.TgZ(7,"div",9)(8,"see-more-btn",10),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",null==t.statusCard?null:t.statusCard.status_name)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("Id",t.employeeInstanceId)("isTableView",t.isTableView)}}function mn(a,n){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",24),2&a&&e.Q6J("rowNo",9)}let un=(()=>{class a extends u.U{constructor(t){super(),this.employeeJobInformationService=t,this.employeeId=0,this.employeeInstanceId=0,this.isLoaded=!1,this.isTableView=!1,this.employeeId=m.w.EmployeeId,this.employeeInstanceId=m.w.Person_Instance_ID,m.w.Person_Instance_ID$.subscribe(o=>{this.employeeInstanceId=o,this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()?(this.isLoaded=!1,this.getStatusPositionCard()):this.isLoaded=!0})}ngOnInit(){}getStatusPositionCard(){return this.employeeJobInformationService.getStatusPositionCard(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.isLoaded=!0,this.statusCard=function sn(a){return{status_name:(0,c._f)(a?.core_Person_Instance_Status?.core_Status?.ar_Name,a?.core_Person_Instance_Status?.core_Status?.en_Name),status_from_date:c.M6.mapDate(a?.core_Person_Instance_Status?.from_Date),status_to_date:c.M6.mapDate(a?.core_Person_Instance_Status?.to_Date),status_properties_name:(0,c._f)(a?.core_Person_Instance_Status?.core_Status_Properties?.ar_Name,a?.core_Person_Instance_Status?.core_Status_Properties?.ar_Name),org_name:(0,c._f)(a?.positions?.core_Org?.ar_Name,a?.positions?.core_Org?.en_Name),org_from_date:c.M6.mapDate(a?.positions?.orgFromDate),job_name:(0,c._f)(a?.positions?.core_Job_Title?.ar_Name,a?.positions?.core_Job_Title?.en_Name),time_in_position:a?.positions?.time_In_Position?`${a?.positions?.time_In_Position?.years} yr, ${a?.positions?.time_In_Position?.months} mon, ${a?.positions?.time_In_Position?.days} days`:"---",time_in_company:a?.time_In_Company?`${a?.time_In_Company?.years} yr, ${a?.time_In_Company?.months} mon, ${a?.time_In_Company?.days} days`:"---",contract_name:(0,c._f)(a?.core_Contract?.contracT_NO),contract_duration:a?.core_Contract?`${c.M6.mapDate(a?.core_Contract?.starT_DATE)}, ${c.M6.mapDate(a?.core_Contract?.enD_DATE)}`:"---",policies:a.policies}}(t.data),m.w.employeeStatusPosition$.next(this.statusCard)):this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(nn,{},{width:"90vw",maxHeight:"98vh",panelClass:"dialog-emp-form"}).afterClosed().subscribe(t=>{(t.isJobUpdated||t.isPolicyGroupUpdated)&&(this.isLoaded=!1,this.getStatusPositionCard())})}afterDelete(t){t&&(this.isLoaded=!1,this.getStatusPositionCard())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(z._))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-job-info-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12","px-1"],["cardTitle","jobInfo",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-9","col-12","mx-0"],[4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[1,"col-lg-1","col-12","px-1"],[3,"Id","isTableView","toggleTable"],[1,"view-data-row-container","pb-2"],["label","status",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],["label","statusDate",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],["label","organization",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],["label","orgDate",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],[1,"view-data-row-container"],["label","job",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],["label","timeInPosition",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],["label","timeInCompany",1,"col-6","col-md-4","col-lg-3","px-0","mb-2",3,"value"],[4,"ngFor","ngForOf"],["class","col-6 col-md-4 col-lg-3 px-0 mt-2",3,"label","value",4,"ngIf"],[1,"col-6","col-md-4","col-lg-3","px-0","mt-2",3,"label","value"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,dn,9,6,"div",0),e.YNc(1,mn,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.sg,d.O5,A.E,J.y,S,x,it,L.X$],styles:[".smalltable.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .smalltable.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:11px;padding:3px}"]}),a})();var W=r(89320),nt=r(47414);function _n(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.toEdit(i))})("deleteRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let st=(()=>{class a extends u.U{constructor(t){super(),this.employeeWorkScheduleService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.employeeInstanceId=0,this.mandatoryColomns=["plan","startDate","toDate","is_Apply_Rules","actions"],this.optionalColomns=[],this.isLoaded=!1,this.employeeInstanceId=m.w.Person_Instance_ID,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_work_schedule_sec)}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.checkNoBusinessOrCompany()&&this.employeeInstanceId>0&&this.getList(this.firstPage)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeInstanceId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}getList(t,o){this.dataSource=new g.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeWorkScheduleService.getList(this.employeeInstanceId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(s=>{s.message.messageType==p.u.Success?(this.dataSource=new g.by(je(s.data)),this.page.length=s.meta.totalItemCount,this.isLoaded=!0):this.errorList(s?.message?.messages)})}toEdit(t){this.rowToEdit.emit(t)}onDelete(t){this.deleteDialog(t.plan).subscribe(i=>{i&&this.delete(t)})}delete(t){let o={Person_Instance_ID:this.employeeInstanceId,Plan_ID:t.plan_ID,FromDate:t.fromDate,ToDate:t.toDateOriginal};this.showLoading("table"),this.employeeWorkScheduleService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeWorkScheduleRemoved"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize),this.afterDelete.emit(t)):this.errorList(i?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(W.c))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-work-schedule-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,_n,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeInstanceId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,C.Ro]}),a})();var gn=r(72763);function hn(a,n){if(1&a&&(e.ynx(0),e.TgZ(1,"div",17)(2,"strong"),e._uU(3),e.qZA(),e.TgZ(4,"small"),e._uU(5),e.qZA()(),e.BQk()),2&a){const t=e.oxw(2);e.xp6(3),e.Oqu(null==t.vacationDays?null:t.vacationDays.used),e.xp6(2),e.hij("/",null==t.vacationDays?null:t.vacationDays.totalBalance,"")}}function fn(a,n){1&a&&(e.TgZ(0,"span",18),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"noVacationBalance")))}function bn(a,n){1&a&&(e.TgZ(0,"p",19),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"vacationDaysUsed"))," "))}function Cn(a,n){if(1&a&&(e.TgZ(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11),e.YNc(5,hn,6,2,"ng-container",12),e.YNc(6,fn,3,3,"ng-template",null,13,e.W1O),e.qZA(),e.TgZ(8,"div",14),e._UZ(9,"i",15),e.qZA()(),e.YNc(10,bn,4,5,"p",16),e.qZA()()()),2&a){const t=e.MAs(7),o=e.oxw();e.xp6(5),e.Q6J("ngIf",(null==o.vacationDays?null:o.vacationDays.totalBalance)>0)("ngIfElse",t),e.xp6(5),e.Q6J("ngIf",(null==o.vacationDays?null:o.vacationDays.totalBalance)>0)}}function yn(a,n){1&a&&e._UZ(0,"emp-plan-card-dashboard-skeleton")}function In(a,n){if(1&a&&(e.ynx(0),e.TgZ(1,"div",17)(2,"strong"),e._uU(3),e.qZA(),e.TgZ(4,"small"),e._uU(5),e.qZA()(),e.BQk()),2&a){const t=e.oxw(2);e.xp6(3),e.Oqu(null==t.sickDays?null:t.sickDays.used),e.xp6(2),e.hij("/",null==t.sickDays?null:t.sickDays.totalBalance,"")}}function vn(a,n){1&a&&(e.TgZ(0,"span",18),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"noSickBalance")))}function Tn(a,n){1&a&&(e.TgZ(0,"p",19),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"sickDaysUsed"))," "))}function wn(a,n){if(1&a&&(e.TgZ(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11),e.YNc(5,In,6,2,"ng-container",12),e.YNc(6,vn,3,3,"ng-template",null,20,e.W1O),e.qZA(),e.TgZ(8,"div",14),e._UZ(9,"i",21),e.qZA()(),e.YNc(10,Tn,4,5,"p",16),e.qZA()()()),2&a){const t=e.MAs(7),o=e.oxw();e.xp6(5),e.Q6J("ngIf",(null==o.sickDays?null:o.sickDays.totalBalance)>0)("ngIfElse",t),e.xp6(5),e.Q6J("ngIf",(null==o.sickDays?null:o.sickDays.totalBalance)>0)}}function Dn(a,n){1&a&&e._UZ(0,"emp-plan-card-dashboard-skeleton")}function En(a,n){if(1&a&&(e.ynx(0),e.TgZ(1,"div",17)(2,"strong"),e._uU(3),e.qZA(),e.TgZ(4,"small"),e._uU(5),e.qZA()(),e.BQk()),2&a){const t=e.oxw(2);e.xp6(3),e.Oqu(null==t.workingHours?null:t.workingHours.hoursAchieved),e.xp6(2),e.hij("/",null==t.workingHours?null:t.workingHours.hoursScheduled,"")}}function Sn(a,n){1&a&&(e.TgZ(0,"span",18),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"noWorkingBalance")))}function xn(a,n){1&a&&(e.TgZ(0,"p",19),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"translate"),e.qZA()),2&a&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"hoursAchieved"))," "))}function An(a,n){if(1&a&&(e.TgZ(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11),e.YNc(5,En,6,2,"ng-container",12),e.YNc(6,Sn,3,3,"ng-template",null,22,e.W1O),e.qZA(),e.TgZ(8,"div",14),e._UZ(9,"i",23),e.qZA()(),e.YNc(10,xn,4,5,"p",16),e.qZA()()()),2&a){const t=e.MAs(7),o=e.oxw();e.xp6(5),e.Q6J("ngIf",(null==o.workingHours?null:o.workingHours.hoursScheduled)>0)("ngIfElse",t),e.xp6(5),e.Q6J("ngIf",(null==o.workingHours?null:o.workingHours.hoursScheduled)>0)}}function Zn(a,n){1&a&&e._UZ(0,"emp-plan-card-dashboard-skeleton")}let lt=(()=>{class a extends u.U{constructor(t){super(),this.employeeWorkScheduleService=t,this.employeeInstanceId=0,this.isLoadedVacation=!1,this.isLoadedSick=!1,this.isLoadedWorking=!1,this.employeeInstanceId=m.w.Person_Instance_ID}ngOnInit(){}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&this.employeeInstanceId>0&&(this.getVacationDays(),this.getSickDays(),this.getWorkingDays())}getVacationDays(){this.employeeWorkScheduleService.getAnnualCasualDashboard(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.vacationDays=t.data,this.isLoadedVacation=!0):this.errorList(t?.message?.messages)})}getSickDays(){this.employeeWorkScheduleService.getSickLeaveDashboard(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.sickDays=t.data,this.isLoadedSick=!0):this.errorList(t?.message?.messages)})}getWorkingDays(){this.employeeWorkScheduleService.getWorkingHoursDashboard(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.workingHours=t.data,this.isLoadedWorking=!0):this.errorList(t?.message?.messages)})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(W.c))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-workschedule-vacations-cards"]],features:[e.qOj],decls:13,vars:7,consts:[[1,"row","bg-white","p-0","m-0"],[1,"col-12","col-lg-4","mb-sm-1","mb-md-1",3,"ngClass"],["class","card card-vacations-custom card-inverse",4,"ngIf","ngIfElse"],["loadingVacation",""],[1,"col-12","col-lg-4","mb-sm-1","mb-md-1"],["loadingSick",""],["loadingWorking",""],[1,"card","card-vacations-custom","card-inverse"],[1,"card-content"],[1,"card-body"],[1,"media"],[1,"media-body","text-left"],[4,"ngIf","ngIfElse"],["noVacationBalance",""],[1,"media-right","align-self-center"],[1,"fas","fa-umbrella-beach","float-right","darkBlue"],["class","ca-title",4,"ngIf"],[1,"card-text"],[1,"placeholder"],[1,"ca-title"],["noSickBalance",""],[1,"fas","fa-thermometer-three-quarters","float-right","darkBlue"],["noWorkBalance",""],[1,"fas","fa-clock","float-right","darkBlue"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Cn,11,3,"div",2),e.YNc(3,yn,1,0,"ng-template",null,3,e.W1O),e.qZA(),e.TgZ(5,"div",4),e.YNc(6,wn,11,3,"div",2),e.YNc(7,Dn,1,0,"ng-template",null,5,e.W1O),e.qZA(),e.TgZ(9,"div",4),e.YNc(10,An,11,3,"div",2),e.YNc(11,Zn,1,0,"ng-template",null,6,e.W1O),e.qZA()()),2&t){const i=e.MAs(4),s=e.MAs(8),f=e.MAs(12);e.xp6(1),e.Q6J("ngClass",o.languageService.isArabic?"mr-0 pr-0":"ml-0 pl-0"),e.xp6(1),e.Q6J("ngIf",o.isLoadedVacation)("ngIfElse",i),e.xp6(4),e.Q6J("ngIf",o.isLoadedSick)("ngIfElse",s),e.xp6(4),e.Q6J("ngIf",o.isLoadedWorking)("ngIfElse",f)}},dependencies:[d.mk,d.O5,gn.T,d.rS,L.X$],styles:[".card.card-vacations-custom[_ngcontent-%COMP%]{margin:0;background-color:#37476114!important;height:141px;box-shadow:none;border-radius:10px}strong[_ngcontent-%COMP%]{color:#169ed9;font-size:30px}small[_ngcontent-%COMP%]{font-size:20px}.ca-title[_ngcontent-%COMP%]{font-size:18px;text-align:center;margin-top:7px}.ca-title[_ngcontent-%COMP%], .placeholder[_ngcontent-%COMP%], small[_ngcontent-%COMP%]{color:#323232!important}.media-right[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:37px}"]}),a})();function Ln(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",19),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let Pn=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeWorkScheduleService=t,this.dialogRef=o,this.employeeInstanceId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.isLoadedVacation=!1,this.isLoadedSick=!1,this.isLoadedWorking=!1,this.employeeInstanceId=m.w.Person_Instance_ID,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_work_schedule_sec)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],plan_ID:[null,[l.kI.required]],fromDate:[null,[l.kI.required]],is_Apply_Rules:[null]}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}get formCtrls(){return this.form.controls}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={EmployeeData:{Person_Instance_ID:this.employeeInstanceId,Plan_ID:this.formCtrls.plan_ID.value,FromDate:c.M6.mapDateReverse(this.formCtrls.fromDate.value),Is_Apply_Rules:this.formCtrls.is_Apply_Rules.value??!1}};0==this.formCtrls.id.value?this.create(t):this.update(t)}}create(t){this.showLoading("dialog"),this.employeeWorkScheduleService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newEmployeeWorkScheduleAdded"),this.hasUpdate=!0,this.getList=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){let o={...t,OldEmployeeData:{Person_Instance_ID:this.employeeInstanceId,Plan_ID:this.selectedPlan.plan_ID,FromDate:this.selectedPlan.fromDate,ToDate:this.selectedPlan.toDateOriginal}};this.showLoading("dialog"),this.employeeWorkScheduleService.update(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg("employeeWorkScheduleUpdated"),this.hasUpdate=!0,this.getList=!0,this.selectedPlan=null):this.errorList(i?.message?.messages),this.hideLoading("dialog")})}employeeWorkScheduleToEdit(t){this.form.patchValue(t),this.formCtrls.id.setValue(t.plan_ID),this.selectedPlan=t}clearForm(){this.form.reset({id:0}),this.submitted=!1}afterDelete(t){t.plan_ID==this.selectedPlan?.plan_ID&&t.fromDate==this.selectedPlan?.fromDate&&t.toDateOriginal==this.selectedPlan?.toDateOriginal&&this.formCtrls.id.value>0&&this.clearForm(),t&&(this.hasUpdate=!0)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(W.c),e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-work-schedule-dialog"]],features:[e.qOj],decls:22,vars:15,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","workSchedule",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[1,"pt-2"],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],["label","plan",3,"control","submitted","filter","appendTo"],["label","startDate",3,"control","submitted"],[1,"col-md-4","col-sm-6","col-12","ptop-15","pbottom-15"],["label","is_Apply_Rules",3,"control"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"div",7),e._UZ(9,"app-emp-workschedule-vacations-cards"),e.qZA(),e.TgZ(10,"form",8)(11,"div",9)(12,"div",10),e._UZ(13,"app-attendance-plan-dropdown",11),e.qZA(),e.TgZ(14,"div",10),e._UZ(15,"app-datepicker",12),e.qZA(),e.TgZ(16,"div",13),e._UZ(17,"app-check-box",14),e.qZA()()(),e.TgZ(18,"div",15)(19,"submit-btn",16),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(20,Ln,1,0,"reset-form-btn",17),e.qZA(),e.TgZ(21,"app-emp-work-schedule-table",18),e.NdJ("rowToEdit",function(s){return o.employeeWorkScheduleToEdit(s)})("afterDelete",function(s){return o.afterDelete(s)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(10),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.plan_ID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.fromDate)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.is_Apply_Rules),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeInstanceId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,N.Q,Y.u,Z.J,D.p,I.T,E.lW,_.uh,_.xY,C.Ro,nt.B,l._Y,l.JL,l.sg,st,lt]}),a})();var Jn=r(76634),kn=r(26135),me=r(10805),ue=r(57772);function Nn(a,n){1&a&&(e.TgZ(0,"div",14)(1,"div",15),e._UZ(2,"app-emp-workschedule-vacations-cards"),e.qZA()())}function Mn(a,n){if(1&a&&(e.TgZ(0,"div",18),e._UZ(1,"card-row-item",19)(2,"card-row-item",20)(3,"card-row-item",21),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("value",t.msgTranslate(null==t.empWorkSchedule?null:t.empWorkSchedule.currentPlan.ar_Name,null==t.empWorkSchedule?null:t.empWorkSchedule.currentPlan.en_Name)),e.xp6(1),e.Q6J("value",null==t.empWorkSchedule?null:t.empWorkSchedule.empPlanFromDate)("isDate",!0),e.xp6(1),e.Q6J("value",null==t.empWorkSchedule?null:t.empWorkSchedule.empPlanEndDate)("isDate",!0)}}function Fn(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-emp-work-schedule-table",22),e.NdJ("afterDelete",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function On(a,n){if(1&a&&(e.ynx(0),e.YNc(1,Mn,4,5,"div",16),e.YNc(2,Fn,1,2,"app-emp-work-schedule-table",17),e.BQk()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView)}}function Un(a,n){1&a&&(e.TgZ(0,"div",26),e._UZ(1,"app-view-row-item-skeleton"),e.qZA())}const Qn=function(){return[]};function qn(a,n){1&a&&(e.ynx(0),e.TgZ(1,"div",23)(2,"div",24),e.YNc(3,Un,2,0,"div",25),e.qZA()(),e.BQk()),2&a&&(e.xp6(3),e.Q6J("ngForOf",e.DdM(1,Qn).constructor(2)))}function Rn(a,n){if(1&a&&(e._UZ(0,"span",30),e.TgZ(1,"div",31),e._uU(2),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",t.message," ")}}function Bn(a,n){1&a&&(e.TgZ(0,"p-messages",28),e.YNc(1,Rn,3,1,"ng-template",29),e.qZA())}function Vn(a,n){if(1&a&&(e.ynx(0),e.YNc(1,Bn,2,0,"p-messages",27),e.BQk()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.messages)}}function Yn(a,n){1&a&&(e.ynx(0),e._UZ(1,"p-skeleton",32),e.BQk())}let Gn=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeWorkScheduleService=t,this.employeeJobInformationService=o,this.isLoaded=!1,this.today=new Date,this.calendarArray=[],this.isTableView=!1,this.currentDate=c.M6.mapDateReverse((new Date).toDateString()),this.employeeInstanceId=m.w.Person_Instance_ID,m.w.Person_Instance_ID$.subscribe(i=>{this.employeeInstanceId=i,this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()?(this.isLoaded=!1,this.getCardData(this.currentDate)):this.isLoaded=!0}),this.employeeJobInformationService.updateWorkScheduleCard$.subscribe(i=>{i&&this.getCardData(this.currentDate)})}ngOnInit(){this.numberOfDaysInMonth=c.M6.numberOfDaysInMonth(this.today.getFullYear(),this.today.getMonth())}getCardData(t){this.isLoaded=!1,this.empWorkSchedule=null,this.employeeWorkScheduleService.getCard(this.employeeInstanceId,t).pipe(this.cancelRequest()).subscribe(o=>{this.isLoaded=!0,o.message.messageType==p.u.Success&&(this.empWorkSchedule=o.data),o.message.messageType==p.u.Warning?this.messages=o?.message?.messages:this.errorList(o?.message?.messages)})}getDayPopOver(t){return t.isWeekend?`${c.M6.getDayName(t.date)} - ${this.translate("weekend")}`:t.isVacation?`${c.M6.getDayName(t.date)} - ${t.vacation}`:c.M6.getDayName(t.date)}openAddEditDialog(){this.dialogsService.addEditDialog(Pn).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getCardData(this.currentDate))})}afterDelete(t){t&&(this.isLoaded=!1,this.getCardData(this.currentDate))}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(W.c),e.Y36(z._))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-work-schedule-card"]],features:[e.qOj],decls:17,vars:12,consts:[[1,"card-view","border-bottom","mt-4"],[1,"row","bg-white","mt-2","px-2"],[1,"col-12","pt-2"],["cardTitle","workSchedule",1,"side_title","border-0","d-inline-flex",3,"isEdit","isLoaded","onClickIcon"],[1,"col-12","col-lg-7","mt-2"],["class","row bg-white p-0 m-0",4,"ngIf"],[1,"row","p-0","m-0"],[1,"col-12","col-lg-9","mt-3"],[4,"ngIf"],[1,"col-12","col-lg-3"],[3,"Id","isTableView","toggleTable"],[1,"col-12","col-lg-5","emp-calender","px-0","mx-1","mx-lg-auto","mt-3","radius-15"],[1,"p-1"],[3,"employeeInstanceId"],[1,"row","bg-white","p-0","m-0"],[1,"col-12","px-0"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[1,"view-data-row-container"],["label","plan",1,"col",3,"value"],["label","from_Date",1,"col",3,"value","isDate"],["label","to_Date",1,"col",3,"value","isDate"],[3,"isMatPaginator","hideActions","afterDelete"],[1,"cardSection"],[1,"d-flex","flex-wrap","justify-content-between",2,"gap","30px"],["class","flex-grow-1",4,"ngFor","ngForOf"],[1,"flex-grow-1"],["severity","warn","styleClass","radius-10",4,"ngFor","ngForOf"],["severity","warn","styleClass","radius-10"],["pTemplate",""],[1,"p-message-icon","pi","pi-exclamation-triangle"],[1,"p-message-detail"],["width","100%","height","100%","animation","wave"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"card-header",3),e.NdJ("onClickIcon",function(){return o.openAddEditDialog()}),e.qZA()(),e.TgZ(4,"div",4),e.YNc(5,Nn,3,0,"div",5),e.TgZ(6,"div",6)(7,"div",7),e.YNc(8,On,3,2,"ng-container",8),e.YNc(9,qn,4,2,"ng-container",8),e.qZA(),e.TgZ(10,"div",9)(11,"see-more-btn",10),e.NdJ("toggleTable",function(){return o.toggleTable()}),e.qZA()()()(),e.TgZ(12,"div",11)(13,"div",12),e.YNc(14,Vn,2,1,"ng-container",8),e._UZ(15,"employee-card-schedual",13),e.qZA(),e.YNc(16,Yn,2,0,"ng-container",8),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("isEdit",o.empWorkSchedule)("isLoaded",o.isLoaded),e.xp6(2),e.Q6J("ngIf",o.employeeInstanceId>0),e.xp6(3),e.Q6J("ngIf",o.isLoaded),e.xp6(1),e.Q6J("ngIf",!o.isLoaded),e.xp6(2),e.Q6J("Id",o.employeeInstanceId)("isTableView",o.isTableView),e.xp6(2),e.ekj("d-none",!o.isLoaded),e.xp6(1),e.Q6J("ngIf",!o.empWorkSchedule),e.xp6(1),e.Q6J("employeeInstanceId",o.employeeInstanceId),e.xp6(1),e.Q6J("ngIf",!o.isLoaded))},dependencies:[d.sg,d.O5,Jn.B,J.y,kn.X,me.jx,$.O,ue.V,S,x,st,lt],styles:['.current-day-color[_ngcontent-%COMP%]:before{background:#ffffff!important;border-color:#e5e5e5}.weekend-color[_ngcontent-%COMP%]:before{background:#dddddd!important;border-color:#c9c9c9}.annual-color[_ngcontent-%COMP%]:before{background:#30b79d!important;border-color:#4da997}.vacation-color[_ngcontent-%COMP%]{color:#169ed9!important}.absence-color[_ngcontent-%COMP%]{color:#da0000}.mission-color[_ngcontent-%COMP%]{color:#735bf2}.offHoliday-color[_ngcontent-%COMP%]{color:#067a56}.overtime-color[_ngcontent-%COMP%]{color:#002e7f}.weekend-color[_ngcontent-%COMP%]{color:#323232}.isVacation[_ngcontent-%COMP%]:after{display:block!important;border-color:#169ed9!important}.isOvertime[_ngcontent-%COMP%]:after{display:block!important;border-color:#002e7f!important}.isAbsence[_ngcontent-%COMP%]:after{display:block!important;border-color:#da0000!important}.isMission[_ngcontent-%COMP%]:after{display:block!important;border-color:#735bf2!important}.isOffHoliday[_ngcontent-%COMP%]:after{display:block!important;border-color:#067a56!important}.isWeekEnds[_ngcontent-%COMP%]:after{display:block!important;border-color:#323232!important}.day-after[_ngcontent-%COMP%]:after, .day-before[_ngcontent-%COMP%]:before{content:"";width:10px;height:10px;border:solid 3px;border-radius:50%;margin:-1px 2px}.day-after[_ngcontent-%COMP%]:after{display:none;margin-left:auto!important;margin-bottom:2px}.calendar-footer[_ngcontent-%COMP%]{display:flex}.map-text[_ngcontent-%COMP%]{font-size:12px}  .emp-calender{background:#fafafa}  .emp-calender .p-datepicker{padding-top:0}  .emp-calender .p-datepicker,   .emp-calender .p-datepicker .p-datepicker-header{background:#fafafa;border:none}  .emp-calender .p-datepicker table th{border-bottom:none;padding-bottom:20px;color:#8f9bb3;padding-left:25px}  .emp-calender .p-datepicker .p-disabled{color:#8f9bb3;opacity:1}  .emp-calender .p-datepicker table td.p-datepicker-today>span,   .emp-calender .p-datepicker:not(.p-disabled) table td.p-datepicker-today>span:hover{border-radius:9px;background-color:#374761;color:#fff;border:none}  .emp-calender .p-datepicker .p-datepicker-header .p-datepicker-prev,   .emp-calender .p-datepicker .p-datepicker-header .p-datepicker-next{width:2.5rem;height:2.5rem}  .emp-calender .p-datepicker .p-datepicker-header .p-datepicker-prev{order:0}  .emp-calender .p-datepicker .p-datepicker-header .p-datepicker-title{margin:auto}  .emp-calender .p-datepicker .p-datepicker-header .p-datepicker-prev,   .emp-calender .p-datepicker .p-datepicker-header .p-datepicker-next{border:1px solid #ced3de;border-radius:10px}#calendar[_ngcontent-%COMP%]{outline:none}']}),a})();var _e=r(72463),jn=r(92393),zn=r(12810);function Hn(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.toEdit(i))})("deleteRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("attachIconColumnData",t.attachIconColumnData)("showSpaceTop",!1)}}let rt=(()=>{class a extends u.U{constructor(t){super(),this.employeeHiringDocumentService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["documentName","attachmentType","attachment","actions"],this.optionalColomns=[],this.attachIconColumnData={columnName:"attachment",icon:"fas fa-file-alt"},this.employeeId=0,this.employeeInstanceId=0,this.isLoaded=!1,this.employeeInstanceId=m.w.Person_Instance_ID,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_hiring_documents_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeInstanceId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()&&this.getList(this.firstPage)}toEdit(t){this.rowToEdit.emit(t)}getList(t,o){this.dataSource=new g.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeHiringDocumentService.getList(this.employeeInstanceId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(s=>{if(s.message.messageType==p.u.Success){let f=We(s.data);f.forEach(T=>T.attachmentType=this.translate(T.attachmentType)),this.dataSource=new g.by(f),this.page.length=s.meta.totalItemCount,this.page.meta=s.meta,this.isLoaded=!0}else this.errorList(s?.message?.messages)})}onDelete(t){this.deleteDialog(t.documentName).subscribe(i=>{i&&this.delete(t)})}delete(t){let o={perInsId:this.employeeInstanceId,DocTypeId:t.att_Type_ID,AttachmentID:t.attachmentID??0};this.showLoading("table"),this.employeeHiringDocumentService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeHiringDocumentRemoved"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize),this.afterDelete.emit(t)):this.errorList(i?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_e.t))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-hiring-documents-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","attachIconColumnData","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","attachIconColumnData","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,Hn,1,12,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeInstanceId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,C.Ro]}),a})();function Wn(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",18)(1,"primeng-file-upload",19),e.NdJ("ondelete",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.deleteFile(i))})("onselect",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onChangeFile(i))}),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(1),e.Q6J("control",t.formCtrls.file)("submitted",t.submitted)("multiple",!1)("isEdit",t.formCtrls.id.value>0)("removeFiles",t.removeFiles)}}function $n(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",20),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let Kn=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeHiringDocumentService=t,this.dialogRef=o,this.employeeInstanceId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.removeFiles=!1,this.selectedAttachmentTypeId=0,this.selectedIs_Attached=0,this.isFileChanged=!1,this.hireDocType=k,this.hireDocTypeRadioList=[{value:k.attached,label:k.getValue(k.attached),cssClass:"col-md-4 col-sm-6 col-12"},{value:k.handDelivery,label:k.getValue(k.handDelivery),cssClass:"col-md-4 col-sm-6 col-12"},{value:k.notNeed,label:k.getValue(k.notNeed),cssClass:"col-md-4 col-sm-6 col-12"}],this.employeeInstanceId=m.w.Person_Instance_ID,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_hiring_documents_sec)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],att_Type_ID:[null,[l.kI.required]],file:[null,[l.kI.required]],is_Attached:[k.attached,[l.kI.required]],attachmentID:[null]}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}get formCtrls(){return this.form.controls}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}submit(){if(this.submitted=!0,this.getList=!1,this.removeFiles=!1,this.form.valid){const t={Person_Instance_ID:this.employeeInstanceId,files:this.form.value.file,Is_Attached:this.form.value.is_Attached};0==this.formCtrls.id.value?this.create(t):this.update(t)}}create(t){let o={...t,Attachment_Type_ID:this.form.value.att_Type_ID},i=c.M6.objectToFormData(o);this.showLoading("dialog"),this.employeeHiringDocumentService.create(i).subscribe(s=>{s?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newEmployeeHiringDocumentAdded"),this.hasUpdate=!0,this.getList=!0):this.errorList(s?.message?.messages),this.hideLoading("dialog")})}update(t){this.formCtrls.file.value?.id>0&&(t.files=null);let o={...t,Att_Type_ID:this.form.value.att_Type_ID,AttachmentID:this.selectedIs_Attached!=t.Is_Attached||this.isFileChanged?this.form.value.attachmentID:0,Att_Type_ID_Old:this.selectedAttachmentTypeId},i=c.M6.objectToFormData(o);this.showLoading("dialog"),this.employeeHiringDocumentService.update(i).subscribe(s=>{s.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg("employeeHiringDocumentUpdated"),this.getList=!0,this.hasUpdate=!0):this.errorList(s?.message?.messages),this.hideLoading("dialog")})}employeeHiringDocumentToEdit(t){this.form.patchValue(t),this.onChangeType(t.is_Attached),t.attachmentID?(this.showLoading(),this.fileService.downloadByAttachId(t.attachmentID).subscribe(o=>{this.formCtrls.file.setValue({id:t.attachmentID,path:t.attachment,name:"",type:o.type,size:o.size}),this.hideLoading()})):this.formCtrls.file.setValue(null),this.formCtrls.id.setValue(t.att_Type_ID),this.selectedAttachmentTypeId=t.att_Type_ID,this.selectedIs_Attached=t.is_Attached}deleteFile(t){this.getList=!1,this.showLoading("dialog"),this.employeeHiringDocumentService.DeleteFile(this.employeeInstanceId,t.id).subscribe(o=>{o.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeHiringDocumentFileRemoved"),this.getList=!0,this.formCtrls.file.reset(),this.isFileChanged=!1,this.formCtrls.attachmentID.setValue(0)):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}onChangeFile(t){t&&this.formCtrls.attachmentID.value>0&&(this.isFileChanged=!0)}clearForm(){this.form.reset({id:0,is_Attached:k.attached}),this.submitted=!1,this.removeFiles=!0,this.selectedAttachmentTypeId=0,this.selectedIs_Attached=0,this.isFileChanged=!1}onChangeType(t){t==k.attached?this.formCtrls.file.setValidators([l.kI.required]):this.formCtrls.file.clearValidators(),this.formCtrls.file.updateValueAndValidity()}afterDelete(t){t.att_Type_ID==this.selectedAttachmentTypeId&&this.formCtrls.id.value>0&&this.clearForm(),t&&(this.hasUpdate=!0)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_e.t),e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-hiring-documents-dialog"]],features:[e.qOj],decls:19,vars:17,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","hiringDocuments",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-12","col-md-4"],["label","documentName",3,"control","employeeInstanceId","submitted","filter","appendTo"],[1,"col-12","col-md-8"],[1,"mtop-14",3,"control","radioList","submitted","change"],["class","col-12",4,"ngIf"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[1,"col-12"],[3,"control","submitted","multiple","isEdit","removeFiles","ondelete","onselect"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-attachment-types-by-employee-id-dropdown",10),e.qZA(),e.TgZ(12,"div",11)(13,"app-radio-button",12),e.NdJ("change",function(s){return o.onChangeType(s)}),e.qZA()(),e.YNc(14,Wn,2,5,"div",13),e.qZA()(),e.TgZ(15,"div",14)(16,"submit-btn",15),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(17,$n,1,0,"reset-form-btn",16),e.qZA(),e.TgZ(18,"app-emp-hiring-documents-table",17),e.NdJ("rowToEdit",function(s){return o.employeeHiringDocumentToEdit(s)})("afterDelete",function(s){return o.afterDelete(s)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.att_Type_ID)("employeeInstanceId",o.employeeInstanceId)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.is_Attached)("radioList",o.hireDocTypeRadioList)("submitted",o.submitted),e.xp6(1),e.Q6J("ngIf",o.formCtrls.is_Attached.value==o.hireDocType.attached),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeInstanceId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,jn._,se.J,Z.J,D.p,I.T,E.lW,_.uh,_.xY,C.Ro,zn.Z,l._Y,l.JL,l.sg,rt]}),a})();var Xn=r(32243);function es(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",18),e._UZ(2,"img",19),e.TgZ(3,"div",20)(4,"div",21),e._uU(5),e.ALo(6,"titlecase"),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div",22)(9,"i",23),e.NdJ("click",function(){const s=e.CHM(t).$implicit,f=e.oxw(4);return e.KtG(f.fileService.downloadFromServer(s.attachmentID))}),e.qZA()()()()()}if(2&a){const t=n.$implicit,o=e.oxw(4);e.xp6(2),e.Q6J("src",o.fileService.getFileIcon(null==t?null:t.attachmentFilePath),e.LSH),e.xp6(3),e.hij(" ",e.lcZ(6,2,e.lcZ(7,4,null==t?null:t.documentName))," ")}}function ts(a,n){if(1&a&&(e.ynx(0),e.YNc(1,es,10,6,"div",16),e.BQk()),2&a){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.hiringDocuments)}}function os(a,n){1&a&&e._UZ(0,"card-row-item",24)}function as(a,n){if(1&a&&(e.TgZ(0,"div",13),e.YNc(1,ts,2,1,"ng-container",14),e.YNc(2,os,1,0,"ng-template",null,15,e.W1O),e.qZA()),2&a){const t=e.MAs(3),o=e.oxw(2);e.ekj("m-0",!o.hiringDocuments||0==(null==o.hiringDocuments?null:o.hiringDocuments.length)),e.xp6(1),e.Q6J("ngIf",(null==o.hiringDocuments?null:o.hiringDocuments.length)>0)("ngIfElse",t)}}function is(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-emp-hiring-documents-table",25),e.NdJ("afterDelete",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}const ns=function(){return{width:"200px",height:200}};function ss(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,as,4,4,"div",7),e.YNc(6,is,1,2,"app-emp-hiring-documents-table",8),e.qZA(),e.TgZ(7,"div",9)(8,"div",10),e._UZ(9,"circle-progress",11),e.qZA(),e.TgZ(10,"div",12),e._uU(11),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",null==t.hiringDocuments?null:t.hiringDocuments.length)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("ngStyle",e.DdM(12,ns)),e.xp6(1),e.Q6J("percent",t.docCompletePercentage)("outerStrokeWidth",27)("innerStrokeWidth",27)("space",-27)("showUnits",!1)("subtitle",t.docCompletePercentage.toString()+"%"),e.xp6(2),e.hij(" ",t.docCompletePercentage,"% ")}}function ls(a,n){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",26),2&a&&e.Q6J("rowNo",4)}let rs=(()=>{class a extends u.U{constructor(t){super(),this.employeeHiringDocumentService=t,this.employeeInstanceId=0,this.docCompletePercentage=0,this.isLoaded=!1,this.isLoadedPercentage=!1,this.isTableView=!1,this.employeeInstanceId=m.w.Person_Instance_ID,m.w.Person_Instance_ID$.subscribe(o=>{this.employeeInstanceId=o,this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()?(this.isLoaded=!1,this.isLoadedPercentage=!1,this.getAll(),this.getPercentage()):(this.isLoaded=!0,this.isLoadedPercentage=!0)})}ngOnInit(){}getAll(){this.hiringDocuments=null,this.employeeHiringDocumentService.getAll(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.hiringDocuments=We(t.data),this.isLoaded=!0):this.errorList(t?.message?.messages)})}getPercentage(){this.docCompletePercentage=0,this.employeeHiringDocumentService.getCard(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.docCompletePercentage=t.data>=0?t.data:0,this.isLoadedPercentage=!0):this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(Kn).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.isLoadedPercentage=!1,this.getAll(),this.getPercentage())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAll())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_e.t))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-hiring-documents-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom mt-3",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom","mt-3"],[1,"row","bg-white","mt-2","px-1"],[1,"col-12","pt-2"],["cardTitle","hiringDocuments",1,"side_title","border-0","d-inline-flex",3,"isEdit","isLoaded","onClickIcon"],[1,"col-12","col-lg-9","mt-3"],["class","view-data-row-container row bg-white px-0",3,"m-0",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[1,"col-lg-3","col-12"],[1,"m-auto",3,"ngStyle"],["outerStrokeColor","#374761","innerStrokeColor","#cfe6ff","title","Completion","titleFontSize","25px","titleColor","#169ed9","subtitleFontSize","37px","subtitleColor","#374761","titleFontWeight","700","subtitleFontWeight","700",1,"w-100","h-100",3,"percent","outerStrokeWidth","innerStrokeWidth","space","showUnits","subtitle"],[2,"position","absolute","padding","10px","color","white"],[1,"view-data-row-container","row","bg-white","px-0"],[4,"ngIf","ngIfElse"],["noData",""],["class","col-12 col-md-6 col-lg-3 px-1 mb-2",4,"ngFor","ngForOf"],[1,"col-12","col-md-6","col-lg-3","px-1","mb-2"],[1,"media"],["width","40","height","40","alt","avatar",1,"rounded","mr-2",3,"src"],[1,"media-body","d-flex"],[1,"mt-2","font-size-18","black","w-75"],[1,"mx-2","mt-2"],[1,"ft-download","font-size-25","pointer",3,"click"],["label","document",1,"col",2,"padding","0 15px !important"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,ss,12,13,"div",0),e.YNc(1,ls,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded&&o.isLoadedPercentage)("ngIfElse",i)}},dependencies:[d.sg,d.O5,d.PC,A.E,Xn.nu,S,x,rt,d.rS,L.X$]}),a})(),ge=(()=>{class a extends P.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeLocation",t)}update(t){return this.post("Personnel/Employees/Edit_EmployeeLocation",t)}getList(t,o){return this.get("Personnel/Employees/GetList_EmployeeLocation",{params:{...o,$filter:`Person_Instance_ID eq ${t}`,$expand:v.db.Core_Location}})}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeLocation",{params:{$filter:`Person_Instance_ID eq ${t}`,$expand:v.db.Core_Location}})}close(t){return this.delete("Personnel/Employees/Close_EmployeeLocation",{params:t})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeLocation",{params:t})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var ps=r(51456);function cs(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.toEdit(i))})("deleteRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let pt=(()=>{class a extends u.U{constructor(t){super(),this.employeeLocationService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["country","governorate","location","froM_DATE","tO_DATE","actions"],this.optionalColomns=[],this.isLoaded=!1,this.employeeInstanceId=0,this.employeeInstanceId=m.w.Person_Instance_ID,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_location_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeInstanceId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new g.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeLocationService.getList(this.employeeInstanceId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(s=>{s.message.messageType==p.u.Success?(this.dataSource=new g.by(He(s.data)),this.page.length=s.meta.totalItemCount,this.page.meta=s.meta,this.isLoaded=!0):this.errorList(s?.message?.messages)})}onDelete(t){this.deleteDialog(t.country+" - "+t.location).subscribe(i=>{i&&this.delete(t)})}toEdit(t){this.rowToEdit.emit(t)}delete(t){this.showLoading("table");let o={person_Instance_ID:t.person_Instance_ID,location_ID:t.location_ID,FromDate:c.M6.mapDateReverse(t.from_Date)};this.employeeLocationService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeLocationRemoved"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize),this.afterDelete.emit(t)):this.errorList(i?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ge))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-location-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,cs,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeInstanceId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,C.Ro]}),a})();function ds(a,n){if(1&a&&(e.TgZ(0,"div",20),e._UZ(1,"load-policies-group",21),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("control",t.formCtrls.policy_groups)("locationControl",t.formCtrls.location_ID)("submitted",t.submitted)}}function ms(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let us=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeLocationService=t,this.dialogRef=o,this.employeeInstanceId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.employeeInstanceId=m.w.Person_Instance_ID}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],countryId:[null,[l.kI.required]],governorate_ID:[null,[l.kI.required]],location_ID:[null,[l.kI.required]],from_Date:[null,[l.kI.required]],to_Date:[null],policy_groups:[null]},{validator:M.w.compareDates("from_Date","to_Date")}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}get formCtrls(){return this.form.controls}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={EmployeeData:{person_Instance_ID:this.employeeInstanceId,location_ID:this.form.value.location_ID,from_Date:c.M6.mapDateReverse(this.form.value.from_Date),to_Date:c.M6.mapDateReverse(this.form.value.to_Date)},SelectedPolicygroup:this.form.value.policy_groups};0==this.formCtrls.id.value?this.create(t):this.update(t)}}create(t){this.showLoading("dialog"),this.employeeLocationService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newEmployeeLocationAdded"),this.hasUpdate=!0,this.getList=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){let o={...t,OldEmployeeData:{person_Instance_ID:this.employeeInstanceId,location_ID:this.selectedLocation.location_ID,from_Date:this.selectedLocation.from_Date}};this.showLoading("dialog"),this.employeeLocationService.update(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg("employeeLocationUpdated"),this.hasUpdate=!0,this.getList=!0,this.selectedLocation=null):this.errorList(i?.message?.messages),this.hideLoading("dialog")})}locationToEdit(t){this.form.patchValue(t),this.formCtrls.countryId.setValue(t.comm_Country.id),this.formCtrls.governorate_ID.setValue(t.comm_Governorate.id),this.formCtrls.location_ID.setValue(t.location_ID),this.formCtrls.policy_groups.setValue(t.selectedPolicygroup),this.formCtrls.id.setValue(t.location_ID),this.selectedLocation=t}afterDelete(t){t.location_ID==this.selectedLocation.location_ID&&t.from_Date==this.selectedLocation.from_Date&&this.formCtrls.id.value>0&&this.clearForm(),t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ge),e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-location-dialog"]],features:[e.qOj],decls:25,vars:28,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","location",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","submitted","filter","appendTo"],[3,"control","countryControl","submitted","filter","appendTo"],[3,"control","governorateControl","filterByGov","submitted","filter","appendTo"],["label","froM_DATE",3,"control","submitted"],["label","tO_DATE",3,"control","submitted"],["class","col-12",4,"ngIf"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[1,"col-12"],[3,"control","locationControl","submitted"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-country-dropdown",10),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"governorate-dropdown",11),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"org-location-dropdown",12),e.qZA(),e.TgZ(16,"div",9),e._UZ(17,"app-datepicker",13),e.qZA(),e.TgZ(18,"div",9),e._UZ(19,"app-datepicker",14),e.qZA(),e.YNc(20,ds,2,3,"div",15),e.qZA()(),e.TgZ(21,"div",16)(22,"submit-btn",17),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(23,ms,1,0,"reset-form-btn",18),e.qZA(),e.TgZ(24,"app-emp-location-table",19),e.NdJ("rowToEdit",function(s){return o.locationToEdit(s)})("afterDelete",function(s){return o.afterDelete(s)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.countryId)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.governorate_ID)("countryControl",o.formCtrls.countryId)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.location_ID)("governorateControl",o.formCtrls.governorate_ID)("filterByGov",!0)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.from_Date)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.to_Date)("submitted",o.submitted),e.xp6(1),e.Q6J("ngIf",o.formCtrls.location_ID.value>0),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeInstanceId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,N.Q,Z.J,D.p,I.T,di.Y,E.lW,_.uh,_.xY,C.Ro,Me.n,Fe.z,ps.v,l._Y,l.JL,l.sg,pt]}),a})();function _s(a,n){if(1&a&&(e.TgZ(0,"div",13),e._UZ(1,"card-row-item",14)(2,"card-row-item",15)(3,"card-row-item",16),e.qZA()),2&a){const t=n.$implicit;e.ekj("mbottom-20",!n.last),e.xp6(1),e.Q6J("label",t.country)("value",t.allAddress),e.xp6(1),e.Q6J("value",t.froM_DATE),e.xp6(1),e.Q6J("value",t.tO_DATE)}}function gs(a,n){if(1&a&&(e.ynx(0),e.YNc(1,_s,4,6,"div",12),e.BQk()),2&a){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.empLocation)}}function hs(a,n){1&a&&(e.TgZ(0,"div",13),e._UZ(1,"card-row-item",17)(2,"card-row-item",18)(3,"card-row-item",19),e.qZA()),2&a&&(e.xp6(1),e.Q6J("value",null),e.xp6(1),e.Q6J("value",null),e.xp6(1),e.Q6J("value",null))}function fs(a,n){if(1&a&&(e.ynx(0),e.YNc(1,gs,2,1,"ng-container",10),e.YNc(2,hs,4,3,"ng-template",null,11,e.W1O),e.BQk()),2&a){const t=e.MAs(3),o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==o.empLocation?null:o.empLocation.length)>0)("ngIfElse",t)}}function bs(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-emp-location-table",20),e.NdJ("afterDelete",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function Cs(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,fs,4,2,"ng-container",7),e.YNc(6,bs,1,2,"app-emp-location-table",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",null==t.empLocation?null:t.empLocation.length)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("Id",t.employeeInstanceId)("isTableView",t.isTableView)}}function ys(a,n){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",21),2&a&&e.Q6J("rowNo",4)}let Is=(()=>{class a extends u.U{constructor(t){super(),this.employeeLocationService=t,this.employeeInstanceId=0,this.isLoaded=!0,this.isTableView=!1,this.employeeInstanceId=m.w.Person_Instance_ID,m.w.Person_Instance_ID$.subscribe(o=>{this.employeeInstanceId=o,this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()?(this.isLoaded=!1,this.getAll()):this.isLoaded=!0})}ngOnInit(){}getAll(){this.empLocation=null,this.employeeLocationService.getAll(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{if(t.message.messageType==p.u.Success){let o=t.data;o.sort((i,s)=>new Date(s.from_Date).getTime()-new Date(i.from_Date).getTime()),this.empLocation=He(o.slice(0,2)),this.isLoaded=!0}else this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(us).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAll())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAll())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ge))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-location-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","location",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],[4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"Id","isTableView","toggleTable"],[4,"ngIf","ngIfElse"],["noData",""],["class","view-data-row-container",3,"mbottom-20",4,"ngFor","ngForOf"],[1,"view-data-row-container"],[1,"col","px-0",3,"label","value"],["label","froM_DATE",1,"col","px-0",3,"value"],["label","tO_DATE",1,"col","px-0",3,"value"],["label","location",1,"col",3,"value"],["label","froM_DATE",1,"col",3,"value"],["label","tO_DATE",1,"col",3,"value"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,Cs,9,6,"div",0),e.YNc(1,ys,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.sg,d.O5,A.E,J.y,S,x,pt]}),a})();var he=r(60904),vs=r(84490);function Ts(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.toEdit(i))})("deleteRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let ct=(()=>{class a extends u.U{constructor(t){super(),this.employeeCustodiesService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["custodies","froM_DATE","endDate","notes","actions"],this.optionalColomns=[],this.isLoaded=!1,this.employeeInstanceId=0,this.employeeInstanceId=m.w.Person_Instance_ID,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_custodies_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeInstanceId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.checkNoBusinessOrCompany()&&this.employeeInstanceId>0&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new g.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeCustodiesService.getList(this.employeeInstanceId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(s=>{s.message.messageType==p.u.Success?(this.dataSource=new g.by(Ge(s.data)),this.page.length=s.meta.totalItemCount,this.page.meta=s.meta,this.isLoaded=!0):this.errorList(s?.message?.messages)})}toEdit(t){this.rowToEdit.emit(t)}onDelete(t){this.deleteDialog(t.custodies).subscribe(i=>{i&&this.delete(t)})}delete(t){this.showLoading("table"),this.employeeCustodiesService.Delete(t.id).subscribe(o=>{o.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeCustodyRemoved"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize),this.afterDelete.emit(t)):this.errorList(o?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(he.V))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-custodies-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,Ts,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeInstanceId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,C.Ro]}),a})();function ws(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",18),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let Ds=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeCustodiesService=t,this.dialogRef=o,this.employeeInstanceId=0,this.hasUpdate=!1,this.getList=!0,this.submitted=!1,this.employeeInstanceId=m.w.Person_Instance_ID}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],covenantId:[null,[l.kI.required]],fromDate:[null,[l.kI.required]],toDate:[null],notes:[null]},{validator:M.w.compareDates("fromDate","toDate")}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}get formCtrls(){return this.form.controls}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={EmployeeData:{PersonInstanceId:this.employeeInstanceId,ID:this.form.value.id,CovenantId:this.form.value.covenantId,FromDate:c.M6.mapDateReverse(this.form.value.fromDate),ToDate:c.M6.mapDateReverse(this.form.value.toDate),Notes:this.form.value.notes}};0==t.EmployeeData.ID?this.create(t):this.update(t)}}create(t){this.showLoading("dialog"),this.employeeCustodiesService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newEmployeeCustodyAdded"),this.hasUpdate=!0,this.getList=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){this.showLoading("dialog"),this.employeeCustodiesService.update(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg("employeeCustodyUpdated"),this.hasUpdate=!0,this.getList=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}employeeCustodyToEdit(t){this.form.patchValue(t)}afterDelete(t){t.id==this.formCtrls.id.value&&this.clearForm(),location&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(he.V),e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-custodies-dialog"]],features:[e.qOj],decls:22,vars:19,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","custodies",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","employeeInstanceId","submitted","filter","appendTo"],["label","froM_DATE",3,"control","submitted"],["label","endDate",3,"control","submitted"],["label","notes",3,"control","submitted"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-custodies-by-employee-dropdown",10),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-datepicker",11),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"app-datepicker",12),e.qZA(),e.TgZ(16,"div",9),e._UZ(17,"app-input",13),e.qZA()()(),e.TgZ(18,"div",14)(19,"submit-btn",15),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(20,ws,1,0,"reset-form-btn",16),e.qZA(),e.TgZ(21,"app-emp-custodies-table",17),e.NdJ("rowToEdit",function(s){return o.employeeCustodyToEdit(s)})("afterDelete",function(s){return o.afterDelete(s)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.covenantId)("employeeInstanceId",o.employeeInstanceId)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.fromDate)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.toDate)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.notes)("submitted",o.submitted),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeInstanceId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,N.Q,F.a,Z.J,D.p,I.T,E.lW,_.uh,_.xY,C.Ro,vs.l,l._Y,l.JL,l.sg,ct]}),a})();function Es(a,n){if(1&a&&(e.TgZ(0,"div",14),e._UZ(1,"card-row-item",15)(2,"card-row-item",16)(3,"card-row-item",17)(4,"card-row-item",18),e.qZA()),2&a){const t=n.$implicit;e.ekj("mbottom-20",!n.last),e.xp6(1),e.Q6J("value",t.custodies),e.xp6(1),e.Q6J("value",t.froM_DATE),e.xp6(1),e.Q6J("value",t.endDate),e.xp6(1),e.Q6J("value",t.notes)}}function Ss(a,n){if(1&a&&(e.ynx(0),e.YNc(1,Es,5,6,"div",13),e.BQk()),2&a){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.custodies)}}function xs(a,n){1&a&&(e.TgZ(0,"div",14),e._UZ(1,"card-row-item",19)(2,"card-row-item",20)(3,"card-row-item",21),e.qZA()),2&a&&(e.xp6(1),e.Q6J("value",null),e.xp6(1),e.Q6J("value",null),e.xp6(1),e.Q6J("value",null))}function As(a,n){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,Ss,2,1,"ng-container",11),e.YNc(2,xs,4,3,"ng-template",null,12,e.W1O),e.qZA()),2&a){const t=e.MAs(3),o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==o.custodies?null:o.custodies.length)>0)("ngIfElse",t)}}function Zs(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-emp-custodies-table",22),e.NdJ("afterDelete",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function Ls(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,As,4,2,"div",7),e.YNc(6,Zs,1,2,"app-emp-custodies-table",8),e.qZA(),e.TgZ(7,"div",9)(8,"see-more-btn",10),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",null==t.custodies?null:t.custodies.length)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("Id",t.employeeInstanceId)("isTableView",t.isTableView)}}function Ps(a,n){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",23),2&a&&e.Q6J("rowNo",2)}let Js=(()=>{class a extends u.U{constructor(t){super(),this.employeeCustodiesService=t,this.employeeInstanceId=0,this.isLoaded=!1,this.isTableView=!1,this.employeeInstanceId=m.w.Person_Instance_ID,m.w.Person_Instance_ID$.subscribe(o=>{this.employeeInstanceId=o,this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()?(this.isLoaded=!1,this.getAll()):this.isLoaded=!0})}ngOnInit(){}getAll(){this.custodies=null,this.employeeCustodiesService.getAll(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.custodies=Ge(t.data.slice(0,3)),this.isLoaded=!0):this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(Ds).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAll())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAll())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(he.V))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-custodies-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","custodies",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],[4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[1,"col-lg-2","col-12col-md-2","col-12"],[3,"Id","isTableView","toggleTable"],[4,"ngIf","ngIfElse"],["noData",""],["class","view-data-row-container",3,"mbottom-20",4,"ngFor","ngForOf"],[1,"view-data-row-container"],["label","name",1,"col-6","col-md-3","px-0","mb-2",3,"value"],["label","froM_DATE",1,"col-6","col-md-3","px-0","mb-2",3,"value"],["label","toDate",1,"col-6","col-md-3","px-0","mb-2",3,"value"],["label","note",1,"col-6","col-md-3","px-0","mb-2",3,"value"],["label","custodies",1,"col",3,"value"],["label","froM_DATE",1,"col",3,"value"],["label","tO_DATE",1,"col",3,"value"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,Ls,9,6,"div",0),e.YNc(1,Ps,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.sg,d.O5,A.E,J.y,S,x,ct]}),a})(),fe=(()=>{class a extends P.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeInsurance",t)}update(t){return this.post("Personnel/Employees/Edit_EmployeeInsurance",t)}getList(t,o){return this.get("Personnel/Employees/GetList_EmployeeInsurance",{params:{...o,$filter:`Person_ID  eq ${t}`,$expand:v.db.core_Insurance_Office}})}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeInsurance",{params:{$filter:`Person_ID eq ${t}`,$expand:v.db.core_Insurance_Office}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeInsurance",{params:t})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var ks=r(5269);function Ns(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.toEdit(i))})("deleteRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let dt=(()=>{class a extends u.U{constructor(t){super(),this.employeeSocialInsuranceService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.employeeId=0,this.employeeInstanceId=0,this.mandatoryColomns=["insuranceOffice","fromDate","endDate","actions"],this.optionalColomns=[],this.isLoaded=!1,this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_social_insurance_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.checkNoBusinessOrCompany()&&this.employeeId>0&&this.getList(this.firstPage)}toEdit(t){this.rowToEdit.emit(t)}getList(t,o){this.dataSource=new g.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeSocialInsuranceService.getList(this.employeeId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(s=>{s.message.messageType==p.u.Success?(this.dataSource=new g.by(ze(s.data)),this.page.length=s.meta.totalItemCount,this.page.meta=s.meta,this.isLoaded=!0):this.errorList(s?.message?.messages)})}onDelete(t){this.deleteDialog(t.insuranceOffice).subscribe(i=>{i&&this.delete(t)})}delete(t){this.showLoading("socialInsurance-table"),this.employeeSocialInsuranceService.Delete({PersonID:this.employeeId,insuranceoffice:t.insurance_Office_ID,fromdate:t.froM_DATE}).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeSocialInsuranceOfficeRemoved"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize),this.afterDelete.emit(t)):this.errorList(i?.message?.messages),this.hideLoading("socialInsurance-table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(fe))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-social-insurance-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,Ns,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeId>0),e.xp6(1),e.Q6J("name","socialInsurance-table"))},dependencies:[d.O5,w.I,C.Ro]}),a})();function Ms(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",20),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let Fs=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeSocialInsuranceService=t,this.dialogRef=o,this.employeeId=0,this.submitted=!1,this.getList=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],insurance_Office_ID:[null,[l.kI.required]],froM_DATE:[null,[l.kI.required]],enD_DATE:[null]},{validator:M.w.compareDates("froM_DATE","enD_DATE")}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}get formCtrls(){return this.form.controls}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={employeeData:{person_ID:this.employeeId,insurance_Office_ID:this.form.value.insurance_Office_ID,from_date:c.M6.mapDateReverse(this.form.value.froM_DATE),end_date:c.M6.mapDateReverse(this.form.value.enD_DATE)}};0==this.form.value.id?this.create(t):this.update(t)}}create(t){this.showLoading("socialInsurance"),this.employeeSocialInsuranceService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newEmployeeSocialInsuranceOfficeAdded"),this.hasUpdate=!0,this.getList=!0):this.errorList(o?.message?.messages),this.hideLoading("socialInsurance")})}update(t){this.showLoading("socialInsurance");let o={employeeData:t.employeeData,oldEmployeeData:{person_ID:this.employeeId,...this.oldEmployeeData}};this.employeeSocialInsuranceService.update(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg("employeeSocialInsuranceOfficeUpdated"),this.oldEmployeeData=null,this.hasUpdate=!0,this.getList=!0):this.errorList(i?.message?.messages),this.hideLoading("socialInsurance")})}socialInsuranceToEdit(t){this.form.patchValue(t),this.oldEmployeeData={insurance_Office_ID:t.insurance_Office_ID,from_date:t.froM_DATE},this.formCtrls.id.setValue(1)}onSaveInsuranceNumber(t){}afterDelete(t){t?.froM_DATE==this.oldEmployeeData?.from_date&&t?.insurance_Office_ID==this.oldEmployeeData?.insurance_Office_ID&&this.formCtrls.id.value>0&&this.clearForm(),t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(fe),e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-Social-insurance-dialog"]],features:[e.qOj],decls:31,vars:26,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","socialInsurance",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],[1,"divider-title"],[3,"isSocialInsurance","onSave"],[1,"mtop-20"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","submitted","appendTo"],["label","froM_DATE",3,"control","submitted"],["label","endDate",3,"control","submitted"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5)(7,"p",6),e._uU(8),e.ALo(9,"titlecase"),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"emp-general-info-form",7),e.NdJ("onSave",function(s){return o.onSaveInsuranceNumber(s)}),e.qZA(),e._UZ(12,"mat-divider",8),e.TgZ(13,"div",null,9)(15,"p",6),e._uU(16),e.ALo(17,"titlecase"),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"form",10)(20,"div",11)(21,"div",12),e._UZ(22,"insurance-office-dropdown",13),e.qZA(),e.TgZ(23,"div",12),e._UZ(24,"app-datepicker",14),e.qZA(),e.TgZ(25,"div",12),e._UZ(26,"app-datepicker",15),e.qZA()()(),e.TgZ(27,"div",16)(28,"submit-btn",17),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(29,Ms,1,0,"reset-form-btn",18),e.qZA()(),e.TgZ(30,"app-emp-social-insurance-table",19),e.NdJ("rowToEdit",function(s){return o.socialInsuranceToEdit(s)})("afterDelete",function(s){return o.afterDelete(s)}),e.qZA()()),2&t){const i=e.MAs(14);e.Q6J("name","socialInsurance"),e.xp6(8),e.hij(" ",e.lcZ(9,18,e.lcZ(10,20,"socialInsuranceNumber"))," "),e.xp6(3),e.Q6J("isSocialInsurance",!0),e.xp6(5),e.hij(" ",e.lcZ(17,22,e.lcZ(18,24,"socialInsuranceOffice"))," "),e.xp6(3),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.insurance_Office_ID)("submitted",o.submitted)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.froM_DATE)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.enD_DATE)("submitted",o.submitted),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,N.Q,Z.J,D.p,I.T,E.lW,q.d,_.uh,_.xY,C.Ro,ks.z,l._Y,l.JL,l.sg,Ze.u,dt,d.rS,L.X$]}),a})();function Os(a,n){1&a&&(e.TgZ(0,"div",17),e._UZ(1,"p-skeleton",18),e.qZA())}function Us(a,n){1&a&&(e.TgZ(0,"div",17),e._UZ(1,"p-skeleton",18),e.qZA())}function Qs(a,n){if(1&a&&(e.TgZ(0,"div",10),e.YNc(1,Os,2,0,"div",11),e.YNc(2,Us,2,0,"div",12),e._UZ(3,"card-row-item",13)(4,"card-row-item",14)(5,"card-row-item",15)(6,"card-row-item",16),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.isInsuranceNumLoaded),e.xp6(1),e.Q6J("ngIf",!t.isInsuranceNumLoaded),e.xp6(1),e.Q6J("value",null==t.employee||null==t.employee.person?null:t.employee.person.insurance_No),e.xp6(1),e.Q6J("value",null==t.employee||null==t.employee.person?null:t.employee.person.insurance_Years),e.xp6(1),e.Q6J("value",null==t.emp_social_insurance?null:t.emp_social_insurance.insuranceOffice),e.xp6(1),e.Q6J("value",null==t.emp_social_insurance?null:t.emp_social_insurance.date)}}function qs(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-emp-social-insurance-table",19),e.NdJ("afterDelete",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function Rs(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,Qs,7,6,"div",7),e.YNc(6,qs,1,2,"app-emp-social-insurance-table",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",(null==t.employee?null:t.employee.person.insurance_No)||(null==t.employee?null:t.employee.person.insurance_Years)||t.emp_social_insurance)("isLoaded",t.isInsuranceNumLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("Id",t.employeeId)("isTableView",t.isTableView)}}function Bs(a,n){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",20),2&a&&e.Q6J("rowNo",4)}let Vs=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeSocialInsuranceService=t,this.empGeneralInfoService=o,this.employeeId=0,this.employeeInstanceId=0,this.isInsuranceNumLoaded=!1,this.isInsuranceOfficeLoaded=!1,this.isTableView=!1,this.employeeId=m.w.EmployeeId,this.employeeInstanceId=m.w.Person_Instance_ID}ngOnInit(){this.employee=this.empGeneralInfoService.employee$.getValue(),this.empGeneralInfoService.employee$.subscribe(t=>{this.employee=t,this.isLoadedFun()}),this.isLoadedFun()}isLoadedFun(){this.isInsuranceNumLoaded=!1,null!=this.employee&&this.employeeId>0&&(this.isInsuranceNumLoaded=!0),null==this.employee&&0==this.employeeId&&(this.isInsuranceNumLoaded=!0)}onChangeBusinessAndCompanyId(){this.emp_social_insurance=null,this.employeeId>0&&this.checkNoBusinessOrCompany()?this.getAll():this.isInsuranceOfficeLoaded=!0}getAll(){this.emp_social_insurance=null,this.employeeSocialInsuranceService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(t.data.sort((o,i)=>new Date(i.froM_DATE).getTime()-new Date(o.froM_DATE).getTime()),this.emp_social_insurance=ze(t.data)[0],this.isInsuranceOfficeLoaded=!0):this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(Fs).afterClosed().subscribe(t=>{t&&(this.isInsuranceOfficeLoaded=!1,this.getAll())})}afterDelete(t){t&&(this.isInsuranceOfficeLoaded=!1,this.getAll())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(fe),e.Y36(m.w))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-social-insurance-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","socialInsurance",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"Id","isTableView","toggleTable"],[1,"view-data-row-container"],["class","w-25 m-auto",4,"ngIf"],["class","w-25  m-auto",4,"ngIf"],["label","insurance_No",1,"col-6","col-lg-3","px-0","mb-2",3,"value"],["label","insurance_Years",1,"col-6","col-lg-3","px-0","mb-2",3,"value"],["label","insuranceOffice",1,"col-6","col-lg-3","px-0","mb-2",3,"value"],["label","date",1,"col-6","col-lg-3","px-0","mb-2",3,"value"],[1,"w-25","m-auto"],["width","7rem","styleClass","p-mb-2","borderRadius","10px"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,Rs,9,6,"div",0),e.YNc(1,Bs,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isInsuranceNumLoaded||o.isInsuranceOfficeLoaded)("ngIfElse",i)}},dependencies:[d.O5,A.E,J.y,$.O,S,x,dt]}),a})(),be=(()=>{class a extends P.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeContract",t)}update(t){return this.post("Personnel/Employees/Edit_EmployeeContract",t)}getList(t,o){return this.get("Personnel/Employees/GetList_EmployeeContract",{params:{...o,$filter:`Person_ID eq ${t}`,$expand:v.db.core_Contract_Type}})}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeContract",{params:{$filter:`Person_ID eq ${t}`,$expand:v.db.core_Contract_Type}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeContract",{params:{ID:t}})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var Ys=r(17288);let Gs=(()=>{class a extends P.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeContract_Attachments",t)}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeContract_Attachments",{params:{Contract_ID:t}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeContract_Attachments",{params:t})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),js=(()=>{class a extends u.U{constructor(t){super(),this.employeeContractAttachmentService=t,this.isLoaded=!1,this.submitted=!1,this.files=[],this.removeFiles=!1}ngOnInit(){this.form=this.fb.group({files:[null]}),this.addAttachParams={ContractID:this.contractId}}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&this.contractId>0&&this.getAll()}getAll(){this.showLoading("attachments"),this.employeeContractAttachmentService.getAll(this.contractId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.files=[],t.data.forEach(o=>{this.files.push({id:o.id,name:o.en_Name,path:"/"+o.path,size:o.size,type:o.mime})}),this.isLoaded=!0):this.errorList(t?.message?.messages),this.hideLoading("attachments")})}submit(){this.submitted=!0,this.removeFiles=!1,this.form.valid&&this.showLoading()}afterCreate(){this.clearForm(),this.getAll()}delete(t){if(t.id){let o={ContractID:this.contractId,AttachmentID:t.id};this.showLoading("attachments"),this.employeeContractAttachmentService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeContractAttachRemoved"),this.getAll()):this.errorList(i?.message?.messages),this.hideLoading("attachments")})}}clearForm(){this.form.reset({id:0}),this.submitted=!1,this.removeFiles=!0}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Gs))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-contract-attachment-section"]],inputs:{contractId:"contractId"},features:[e.qOj],decls:4,vars:9,consts:[[1,"row","mtop-20"],[1,"col-12"],["url","Personnel/Employees/Create_EmployeeContract_Attachments","successMsg","newEmployeeContractAttachAdded",3,"control","submitted","multiple","existingFiles","removeFiles","params","isFormValid","disabled","onsubmit","afterupload","ondelete"],[3,"name"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"primeng-file-upload",2),e.NdJ("onsubmit",function(){return o.submit()})("afterupload",function(){return o.afterCreate()})("ondelete",function(s){return o.delete(s)}),e.qZA()()(),e._UZ(3,"ngx-spinner",3)),2&t&&(e.xp6(2),e.Q6J("control",o.formCtrls.files)("submitted",o.submitted)("multiple",!1)("existingFiles",o.files)("removeFiles",o.removeFiles)("params",o.addAttachParams)("isFormValid",o.form.valid)("disabled",!o.contractId),e.xp6(1),e.Q6J("name","attachments"))},dependencies:[se.J,C.Ro]}),a})();function zs(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.toEdit(i))})("deleteRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let mt=(()=>{class a extends u.U{constructor(t){super(),this.employeeContractDetailsService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["contractType","contracT_NO","start_date","end_date","autO_RENEWAL","actions"],this.optionalColomns=["autO_Resign","include_In_Previous_Duration","actual_End_Date"],this.isLoaded=!1,this.employeeId=0,this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_job_info_contract_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeId>0&&this.getList(this.firstPage),this.hideActions){this.optionalColomns=[];let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.checkNoBusinessOrCompany()&&this.employeeId>0&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new g.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeContractDetailsService.getList(this.employeeId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(s=>{s.message.messageType==p.u.Success?(this.dataSource=new g.by($e(s.data)),this.page.length=s.meta.totalItemCount,this.page.meta=s.meta,this.isLoaded=!0,this.hideLoading()):this.errorList(s?.message?.messages)})}onDelete(t){this.deleteDialog(`${t.contractType} -\n      ${t.start_date} -\n      ${t.end_date}`).subscribe(i=>{i&&this.delete(t)})}delete(t){this.showLoading("table"),this.employeeContractDetailsService.Delete(t.id).subscribe(o=>{o.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeContractRemoved"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize),this.afterDelete.emit(t)):(this.errorList(o?.message?.messages),this.hideLoading("table"))})}toEdit(t){this.rowToEdit.emit(t)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(be))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-contract-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,zs,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,C.Ro]}),a})();function Hs(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",24),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}function Ws(a,n){if(1&a&&e._UZ(0,"app-emp-contract-attachment-section",25),2&a){const t=e.oxw();e.Q6J("contractId",t.formCtrls.id.value)}}let $s=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeContractDetailsService=t,this.dialogRef=o,this.employeeId=0,this.submitted=!1,this.hasUpdate=!1,this.getList=!1,this.autoRenewalList=[{id:"null",ar_Name:"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f",en_Name:"Not set"},{id:"true",ar_Name:"\u0635\u062d\u064a\u062d",en_Name:"True"},{id:"false",ar_Name:"\u062e\u0637\u0623",en_Name:"False"}],this.employeeId=m.w.EmployeeId}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],contracT_TYPE_ID:[null,[l.kI.required]],contracT_NO:[null,[l.kI.required]],starT_DATE:[null,[l.kI.required]],enD_DATE:[null,[l.kI.required]],autO_RENEWAL:["false"],autO_Resign:[null],include_In_Previous_Duration:[null]},{validator:M.w.compareDates("starT_DATE","enD_DATE")}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}get formCtrls(){return this.form.controls}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={EmployeeData:{person_ID:this.employeeId,id:this.form.value.id,contracT_TYPE_ID:this.form.value.contracT_TYPE_ID,contracT_NO:this.form.value.contracT_NO,starT_DATE:c.M6.mapDateReverse(this.form.value.starT_DATE),enD_DATE:c.M6.mapDateReverse(this.form.value.enD_DATE),autO_RENEWAL:"null"==this.form.value.autO_RENEWAL?null:"false"!=this.form.value.autO_RENEWAL,autO_Resign:this.form.value.autO_Resign??!1,include_In_Previous_Duration:this.form.value.include_In_Previous_Duration??!1}};0==t.EmployeeData.id?this.create(t):this.update(t)}}create(t){this.showLoading("dialog"),this.employeeContractDetailsService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.formCtrls.id.setValue(o.data.id),this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newEmployeeContractAdded"),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){this.showLoading("dialog"),this.employeeContractDetailsService.update(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg("employeeContractUpdated"),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}employeeContractDetailsToEdit(t){this.form.patchValue(t),this.formCtrls.autO_RENEWAL.setValue(String(t.autO_RENEWAL))}afterDelete(t){t.id==this.formCtrls.id.value&&this.clearForm(),t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0,autO_RENEWAL:"false"}),this.submitted=!1}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(be),e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-contract-section"]],features:[e.qOj],decls:30,vars:25,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","contract",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","submitted","filter","appendTo"],["label","contracT_NO",3,"control","submitted"],["label","start_date",3,"control","submitted"],["label","end_date",3,"control","submitted"],["label","autO_RENEWAL",3,"control","submitted","List","appendTo"],[1,"col-md-4","col-sm-6","col-12","mbottom-20","mtop-14"],["label","autO_Resign",3,"control"],["label","include_In_Previous_Duration",3,"control"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[1,"clearfix"],[3,"contractId",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"],[3,"contractId"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-contract-type-dropdown",10),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"app-datepicker",12),e.qZA(),e.TgZ(16,"div",9),e._UZ(17,"app-datepicker",13),e.qZA(),e.TgZ(18,"div",9),e._UZ(19,"app-prime-dropdown",14),e.qZA(),e.TgZ(20,"div",15),e._UZ(21,"app-check-box",16),e.qZA(),e.TgZ(22,"div",15),e._UZ(23,"app-check-box",17),e.qZA()()(),e.TgZ(24,"div",18)(25,"submit-btn",19),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(26,Hs,1,0,"reset-form-btn",20),e._UZ(27,"div",21),e.qZA(),e.YNc(28,Ws,1,1,"app-emp-contract-attachment-section",22),e.TgZ(29,"app-emp-contract-table",23),e.NdJ("rowToEdit",function(s){return o.employeeContractDetailsToEdit(s)})("afterDelete",function(s){return o.afterDelete(s)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.contracT_TYPE_ID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.contracT_NO)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.starT_DATE)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.enD_DATE)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.autO_RENEWAL)("submitted",o.submitted)("List",o.autoRenewalList)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.autO_Resign),e.xp6(2),e.Q6J("control",o.formCtrls.include_In_Previous_Duration),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(2),e.Q6J("ngIf",o.formCtrls.id.value),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,N.Q,F.a,Y.u,Z.J,D.p,I.T,E.lW,_.uh,_.xY,C.Ro,Xe.t,Ys.c,l._Y,l.JL,l.sg,js,mt]}),a})();function Ks(a,n){if(1&a&&(e.ynx(0),e.TgZ(1,"div",10),e._UZ(2,"card-row-item",11)(3,"card-row-item",12)(4,"card-row-item",13)(5,"card-row-item",14),e.qZA(),e.BQk()),2&a){const t=e.oxw(2);e.xp6(2),e.Q6J("value",null==t.contract?null:t.contract.contracT_NO),e.xp6(1),e.Q6J("value",null==t.contract?null:t.contract.contractType),e.xp6(1),e.Q6J("value",null==t.contract?null:t.contract.start_date),e.xp6(1),e.Q6J("value",null==t.contract?null:t.contract.end_date)}}function Xs(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-emp-contract-table",15),e.NdJ("afterDelete",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function el(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,Ks,6,4,"ng-container",7),e.YNc(6,Xs,1,2,"app-emp-contract-table",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.contract)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("Id",t.employeeId)("isTableView",t.isTableView)}}function tl(a,n){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",16),2&a&&e.Q6J("rowNo",4)}let ol=(()=>{class a extends u.U{constructor(t){super(),this.employeeContractDetailsService=t,this.employeeId=0,this.isLoaded=!1,this.isTableView=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&(this.employeeId>0?this.getAllContractDetails():this.isLoaded=!0)}getAllContractDetails(){return this.employeeContractDetailsService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.isLoaded=!0,this.contract=$e(t.data.slice(-1))[0],this.contract?.autO_RENEWAL&&(this.contract.contractType+=" - "+this.translate("autO_RENEWAL"))):this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog($s).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAllContractDetails())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAllContractDetails())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(be))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-contract-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","contract",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],[4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"Id","isTableView","toggleTable"],[1,"view-data-row-container"],["label","contracT_NO",1,"col-6","col-md-3","px-0","mb-2",3,"value"],["label","contract",1,"col-6","col-md-3","px-0","mb-2",3,"value"],["label","start_date",1,"col-6","col-md-3","px-0","mb-2",3,"value"],["label","end_date",1,"col-6","col-md-3","px-0","mb-2",3,"value"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,el,9,6,"div",0),e.YNc(1,tl,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.O5,A.E,J.y,S,x,mt]}),a})();function al(a,n){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-job-info-card"),e.qZA())}function il(a,n){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"app-emp-contract-card"),e.qZA())}function nl(a,n){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-hiring-documents-card"),e.qZA())}function sl(a,n){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-work-schedule-card"),e.qZA())}function ll(a,n){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"app-emp-location-card"),e.qZA())}function rl(a,n){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"app-emp-custodies-card"),e.qZA())}function pl(a,n){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"app-emp-social-insurance-card"),e.qZA())}let cl=(()=>{class a extends u.U{constructor(){super(),this.viewsManager=h.S}ngOnInit(){}onModulesChanged(){this.allowedSections=this.getCustomViewChildren(this.getParentViewName,h.S.employment_info_tab)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["employement-information-core"]],inputs:{icon:"icon"},features:[e.qOj],decls:14,vars:7,consts:[[1,"row"],[1,"col-12"],[1,"main-card-title","border-bottom"],["title","employmentInfo","color","font-dark",1,"emp-card-title"],[1,"container-fluid","p-0","px-4"],[1,"row","mx-md-n2"],["class","col-12 p-0 px-md-2",4,"ngIf"],[1,"col-12","p-0","px-md-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-title",2),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"mat-card-content",4)(6,"div",5),e.YNc(7,al,2,0,"div",6),e.YNc(8,il,2,0,"div",6),e.YNc(9,nl,2,0,"div",6),e.YNc(10,sl,2,0,"div",6),e.YNc(11,ll,2,0,"div",6),e.YNc(12,rl,2,0,"div",6),e.YNc(13,pl,2,0,"div",6),e.qZA()()()()()),2&t&&(e.xp6(7),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_job_info_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_job_info_contract_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_hiring_documents_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_work_schedule_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_location_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_custodies_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_social_insurance_sec)))},dependencies:[d.O5,I.T,y.a8,y.dn,y.n5,un,Gn,rs,Is,Js,Vs,ol]}),a})(),ut=(()=>{class a extends P.K{constructor(){super()}update(t){return this.post("Personnel/Employees/Edit_EmployeeVacationBalance",t)}getList(t,o){return this.get("Personnel/Employees/GetList_EmployeeVacationBalance",{params:{...o,PersonInstanceID:t}})}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeVacationBalance",{params:{person_instance_id:t}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeVacationBalance",{body:t})}getCard(t){return this.get("Personnel/Employees/GetAllCard_LastVactionBalance",{params:{person_instance_id:t}})}regenerateBalance(t){return this.post("Personnel/Employees/RegenerateBalance",null,{params:{person_instance_id:t}})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var dl=r(71812),ml=r(72370);function Ce(a){return a.map(n=>({...n,vacation:(0,c._f)(n.vacation_ArName,n.vacation_EnName),startDate:c.M6.mapDate(n.opening_balance_date),endDate:c.M6.mapDate(n.closing_balance_date),balance:n.vacationBalanceOriginal,used:n.vacation_Done_Balance,remaining:n.vacation_balance}))}function ye(a){return a.map(n=>({...n,permission:n.permission_Setup_Name,startDate:c.M6.mapDate(n.opening_balance_date),endDate:c.M6.mapDate(n.closing_balance_date),balance:n.permission_balance,used:n.taken_permission_Yearly,remaining:n.remaining_Balance,newHireCloseDate:c.M6.mapDate(n.newHireCloseDate)}))}function ul(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.toEdit(i))})("deleteRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let _t=(()=>{class a extends u.U{constructor(t){super(),this.employeeVacationService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.showLess=!1,this.mandatoryColomns=["vacation","startDate","endDate","balance","used","remaining","actions"],this.optionalColomns=[],this.isLoaded=!1,this.employeeInstanceId=0,this.employeeInstanceId=m.w.Person_Instance_ID,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_vacation_sec)}ngOnInit(){m.w.Person_Instance_ID$.subscribe(t=>{this.employeeInstanceId=t,this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()&&(this.isLoaded=!1,this.showLess?this.getCard():this.getList(this.firstPage))})}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeInstanceId>0&&(this.showLess?this.getCard():this.getList(this.firstPage)),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());o>=0&&this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.checkNoBusinessOrCompany()&&this.employeeInstanceId>0&&(this.showLess?this.getCard():this.getList(this.firstPage))}getList(t,o){this.dataSource=new g.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeVacationService.getList(this.employeeInstanceId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(s=>{s.message.messageType==p.u.Success?(this.dataSource=new g.by(Ce(s.data)),this.page.length=s.meta.totalItemCount,this.isLoaded=!0):this.errorList(s?.message?.messages)})}getCard(){this.dataSource=new g.by(null),this.isLoaded=!1,this.employeeVacationService.getCard(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{if(t.message.messageType==p.u.Success){if(t.data.length>0){let o=[],i=[];t.data.forEach(f=>{this.isAnnualOrCasualVacations(f)?o.push(f):i.push(f)});let s=[...o,...i.sort((f,T)=>new Date(T.opening_balance_date).getTime()-new Date(f.opening_balance_date).getTime()).slice(0,4-o.length)];s.sort((f,T)=>new Date(T.opening_balance_date).getTime()-new Date(f.opening_balance_date).getTime()),this.dataSource=new g.by(Ce(s))}else this.dataSource=new g.by(Ce(t.data));this.isLoaded=!0}else this.errorList(t?.message?.messages)})}isAnnualOrCasualVacations(t){return t.vacation_EnName.toLocaleLowerCase().includes("annual")||t.vacation_ArName.toLocaleLowerCase().includes("annual")||t.vacation_EnName.toLocaleLowerCase().includes("casual")||t.vacation_ArName.toLocaleLowerCase().includes("casual")}toEdit(t){this.rowToEdit.emit(t)}onDelete(t){this.deleteDialog(t.vacation).subscribe(i=>{i&&this.delete(t)})}delete(t){let o={vacation_ID:t.vacation_ID,person_Instance_ID:this.employeeInstanceId,opening_balance_date:c.M6.mapDateReverse(t.opening_balance_date),closing_balance_date:c.M6.mapDateReverse(t.closing_balance_date),vacation_balance:t.vacationBalanceOriginal};this.showLoading("table"),this.employeeVacationService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeVacationRemoved"),this.afterDelete.emit(t),this.showLess?this.getCard():this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize)):this.errorList(i?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ut))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-vacation-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator",showLess:"showLess",lessData:"lessData"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,ul,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeInstanceId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,C.Ro]}),a})();function _l(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"submit-btn",21),e.NdJ("onClick",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.submit())}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("id",t.formCtrls.id.value)("color",t.btn.darkBlue)("disabled",!t.employeeInstanceId)("iconPositionBefore",!1)}}function gl(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let hl=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeVacationService=t,this.dialogRef=o,this.employeeInstanceId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.selectedVacation=null,this.employeeInstanceId=m.w.Person_Instance_ID,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_vacation_sec)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],vacation_ID:[null,[l.kI.required]],opening_balance_date:[null,[l.kI.required]],closing_balance_date:[null,[l.kI.required]],vacationBalanceOriginal:[null,[l.kI.required,U.dN.gte(0)]],vacation_Done_Balance:[null]},{validator:M.w.compareDates("opening_balance_date","closing_balance_date")}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}get formCtrls(){return this.form.controls}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={person_Instance_ID:this.employeeInstanceId,vacation_ID:this.formCtrls.vacation_ID.value,opening_balance_date:c.M6.mapDateReverse(this.formCtrls.opening_balance_date.value),closing_balance_date:c.M6.mapDateReverse(this.formCtrls.closing_balance_date.value),vacation_balance:this.formCtrls.vacationBalanceOriginal.value};this.update(t)}}update(t){this.showLoading("dialog"),this.employeeVacationService.update(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg("employeeVacationUpdated"),this.getList=!0,this.hasUpdate=!0,this.selectedVacation=null):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}employeeVacationToEdit(t){this.form.patchValue(t),this.formCtrls.id.setValue(t.vacation_ID),this.selectedVacation=t}afterDelete(t){t.vacation_ID==this.selectedVacation?.vacation_ID&&t.opening_balance_date==this.selectedVacation?.opening_balance_date&&t.closing_balance_date==this.selectedVacation?.closing_balance_date&&t.vacationBalanceOriginal==this.selectedVacation?.vacationBalanceOriginal&&this.formCtrls.id.value>0&&this.clearForm(),t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}regenerateBalance(){this.getList=!1,this.showLoading("dialog"),this.employeeVacationService.regenerateBalance(this.employeeInstanceId).subscribe(t=>{t.message.messageType==p.u.Success?(this.updateSuccessfullyMsg("employeeRegenerateUpdated"),this.getList=!0,this.hasUpdate=!0):this.errorList(t?.message?.messages),this.hideLoading("dialog")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ut),e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-vacation-dialog"]],features:[e.qOj],decls:26,vars:23,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","vacation",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","submitted","filter","appendTo","disable"],["label","startDate",3,"control","submitted","disable"],["label","endDate",3,"control","submitted","disable"],["label","balance","type","number",3,"control","submitted","disabled"],["label","used","type","number",3,"control","submitted","disabled"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick",4,"ngIf"],["label","regenerateBalance","styleClass","float-left",3,"color","onClick"],[3,"click",4,"ngIf"],[1,"clearfix"],[3,"hasUpdate","rowToEdit","afterDelete"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-vacation-type-dropdown",10),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-datepicker",11),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"app-datepicker",12),e.qZA(),e.TgZ(16,"div",9),e._UZ(17,"app-input",13),e.qZA(),e.TgZ(18,"div",9),e._UZ(19,"app-input",14),e.qZA()()(),e.TgZ(20,"div",15),e.YNc(21,_l,1,4,"submit-btn",16),e.TgZ(22,"app-button",17),e.NdJ("onClick",function(){return o.regenerateBalance()}),e.qZA(),e.YNc(23,gl,1,0,"reset-form-btn",18),e.qZA(),e._UZ(24,"div",19),e.TgZ(25,"emp-vacation-table",20),e.NdJ("rowToEdit",function(s){return o.employeeVacationToEdit(s)})("afterDelete",function(s){return o.afterDelete(s)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.vacation_ID)("submitted",o.submitted)("filter",!0)("appendTo",i)("disable",!0),e.xp6(2),e.Q6J("control",o.formCtrls.opening_balance_date)("submitted",o.submitted)("disable",!0),e.xp6(2),e.Q6J("control",o.formCtrls.closing_balance_date)("submitted",o.submitted)("disable",!0),e.xp6(2),e.Q6J("control",o.formCtrls.vacationBalanceOriginal)("submitted",o.submitted)("disabled",0==o.formCtrls.id.value),e.xp6(2),e.Q6J("control",o.formCtrls.vacation_Done_Balance)("submitted",o.submitted)("disabled",!0),e.xp6(2),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("color",o.btn.darkBlue),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(2),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,N.Q,F.a,Z.J,D.p,I.T,dl.r,E.lW,_.uh,_.xY,C.Ro,ml.t,l._Y,l.JL,l.sg,_t]}),a})();function fl(a,n){1&a&&(e.TgZ(0,"div",9),e._UZ(1,"card-row-item",10),e.qZA())}function bl(a,n){if(1&a&&e._UZ(0,"emp-vacation-table",11),2&a){const t=e.oxw();e.Q6J("isMatPaginator",!0)("hideActions",!0)("hasUpdate",t.hasUpdate)}}let Cl=(()=>{class a extends u.U{constructor(){super(),this.employeeInstanceId=0,this.isTableView=!1,this.hasUpdate=!1,this.employeeInstanceId=m.w.Person_Instance_ID,m.w.Person_Instance_ID$.subscribe(t=>{this.employeeInstanceId=t})}ngOnInit(){}openAddEditDialog(){this.hasUpdate=!1,this.dialogsService.addEditDialog(hl).afterClosed().subscribe(t=>{t&&(this.hasUpdate=!0)})}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-vacation-card"]],features:[e.qOj],decls:10,vars:12,consts:[[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","vacation",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12","px-0"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","showLess","hasUpdate"],[3,"isMatPaginator","hideActions","hasUpdate",4,"ngIf"],[3,"Id","isTableView","toggleTable"],[1,"view-data-row-container"],["label","vacation",1,"col-4","col-lg","px-0","mb-2"],[3,"isMatPaginator","hideActions","hasUpdate"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"card-header",3),e.NdJ("onClickIcon",function(){return o.openAddEditDialog()}),e.qZA()(),e.TgZ(4,"div",4),e.YNc(5,fl,2,0,"div",5),e._UZ(6,"emp-vacation-table",6),e.YNc(7,bl,1,3,"emp-vacation-table",7),e.qZA(),e.TgZ(8,"div",2)(9,"see-more-btn",8),e.NdJ("toggleTable",function(){return o.toggleTable()}),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("isEdit",o.employeeInstanceId)("isLoaded",!0),e.xp6(2),e.Q6J("ngIf",!o.employeeInstanceId),e.xp6(1),e.ekj("hidden",o.isTableView),e.Q6J("isMatPaginator",!0)("hideActions",!0)("showLess",!0)("hasUpdate",o.hasUpdate),e.xp6(1),e.Q6J("ngIf",o.isTableView),e.xp6(2),e.Q6J("Id",o.employeeInstanceId)("isTableView",o.isTableView))},dependencies:[d.O5,J.y,S,x,_t]}),a})(),yl=(()=>{class a extends P.K{constructor(){super()}getList(t,o){return this.get("Personnel/Employees/GetList_EmployeePermission",{params:{...o,person_instance_id:t}})}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeePermission",{params:{person_instance_id:t}})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function Il(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",5)(1,"h4"),e._UZ(2,"page-title",6),e.qZA(),e.TgZ(3,"button",7),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onCloseDialog())}),e._UZ(4,"i",8),e.qZA()()}}function vl(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",9),e.NdJ("onChangePage",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.getList(i.pageIndex+1,i.pageSize))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("page",t.page)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("showSpaceTop",!1)("showPaginator",!t.showLess)("isMatPaginator",t.isCardView)("showFirstLastButtons",!1)}}function Tl(a,n){1&a&&(e._UZ(0,"span",12),e.TgZ(1,"div",13),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"noDataToDisplay")," "))}function wl(a,n){1&a&&(e.ynx(0),e.TgZ(1,"p-messages",10),e.YNc(2,Tl,4,3,"ng-template",11),e.qZA(),e.BQk())}let gt=(()=>{class a extends u.U{constructor(t,o){super(),this.employeePermissionService=t,this.dialogRef=o,this.employeeInstanceId=0,this.mandatoryColomns=["permission","startDate","endDate","balance","used","remaining","newHireBalance","newHireCloseDate"],this.optionalColomns=[],this.isLoaded=!1,this.isCardView=!1,this.showLess=!1,this.submitted=!1,this.employeeInstanceId=m.w.Person_Instance_ID,m.w.Person_Instance_ID$.subscribe(i=>{this.employeeInstanceId=i,this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()&&(this.isLoaded=!1,this.showLess?this.getAll():this.getList(this.firstPage))})}ngOnInit(){}onCloseDialog(){this.dialogRef.close(!1)}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.checkNoBusinessOrCompany()&&this.employeeInstanceId>0&&(this.showLess?this.getAll():this.getList(this.firstPage))}getList(t,o){this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeePermissionService.getList(this.employeeInstanceId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(s=>{s.message.messageType==p.u.Success?(this.dataSource=new g.by(ye(s.data)),this.page.length=s.meta.totalItemCount,this.page.meta=s.meta,this.isLoaded=!0):this.errorList(s?.message?.messages)})}getAll(){this.employeePermissionService.getAll(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{if(t.message.messageType==p.u.Success){let o=t.data;t.data.length>4?(o.sort((i,s)=>new Date(s.opening_balance_date).getTime()-new Date(i.opening_balance_date).getTime()),this.dataSource=new g.by(ye(o.slice(0,4)))):this.dataSource=new g.by(ye(t.data)),this.isLoaded=!0}else this.errorList(t?.message?.messages)})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(yl),e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-permission-dialog"]],inputs:{isCardView:"isCardView",showLess:"showLess"},features:[e.qOj],decls:5,vars:3,consts:[["mat-dialog-title","","class","primary-color font-size-20 m-0",4,"ngIf"],[1,"container-fluid","mx-0"],["dialogContainer",""],["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","isDialogSize","showFilter","showSpaceTop","showPaginator","isMatPaginator","showFirstLastButtons","onChangePage",4,"ngIf"],[4,"ngIf"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","permission",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","isDialogSize","showFilter","showSpaceTop","showPaginator","isMatPaginator","showFirstLastButtons","onChangePage"],["severity","warn"],["pTemplate",""],[1,"p-message-icon","pi","pi-exclamation-triangle"],[1,"p-message-detail"]],template:function(t,o){1&t&&(e.YNc(0,Il,5,0,"div",0),e.TgZ(1,"mat-dialog-content",1,2),e.YNc(3,vl,1,12,"app-material-table",3),e.YNc(4,wl,3,0,"ng-container",4),e.qZA()),2&t&&(e.Q6J("ngIf",!o.isCardView),e.xp6(3),e.Q6J("ngIf",o.employeeInstanceId>0),e.xp6(1),e.Q6J("ngIf",!o.employeeInstanceId&&!o.isCardView))},dependencies:[d.O5,w.I,I.T,E.lW,_.uh,_.xY,me.jx,ue.V,L.X$]}),a})();function Dl(a,n){1&a&&(e.TgZ(0,"div",9),e._UZ(1,"card-row-item",10),e.qZA())}let El=(()=>{class a extends u.U{constructor(){super(),this.employeeInstanceId=0,this.isTableView=!1,this.employeeInstanceId=m.w.Person_Instance_ID,m.w.Person_Instance_ID$.subscribe(t=>{this.employeeInstanceId=t})}ngOnInit(){}openAddEditDialog(){this.dialogsService.addEditDialog(gt,{},{disableClose:!1,minWidth:"50vw",maxWidth:"80vw",top:"40px",panelClass:"dialog-emp-form"}).afterClosed().subscribe(t=>{})}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-permission-card"]],features:[e.qOj],decls:10,vars:12,consts:[[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","permission",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12","px-0"],["class","view-data-row-container",4,"ngIf"],[3,"isCardView","showLess"],[3,"isCardView"],[3,"Id","isTableView","toggleTable"],[1,"view-data-row-container"],["label","permission",1,"col-4","col-lg","px-0","mb-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"card-header",3),e.NdJ("onClickIcon",function(){return o.openAddEditDialog()}),e.qZA()(),e.TgZ(4,"div",4),e.YNc(5,Dl,2,0,"div",5),e._UZ(6,"emp-permission-dialog",6)(7,"emp-permission-dialog",7),e.qZA(),e.TgZ(8,"div",2)(9,"see-more-btn",8),e.NdJ("toggleTable",function(){return o.toggleTable()}),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("isEdit",o.employeeInstanceId)("isLoaded",!0),e.xp6(2),e.Q6J("ngIf",!o.employeeInstanceId),e.xp6(1),e.ekj("hidden",o.isTableView||!o.employeeInstanceId),e.Q6J("isCardView",!0)("showLess",!0),e.xp6(1),e.ekj("hidden",!o.isTableView),e.Q6J("isCardView",!0),e.xp6(2),e.Q6J("Id",o.employeeInstanceId)("isTableView",o.isTableView))},dependencies:[d.O5,J.y,S,x,gt]}),a})();function Sl(a,n){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-vacation-card"),e.qZA())}function xl(a,n){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"emp-permission-card"),e.qZA())}let Al=(()=>{class a extends u.U{constructor(){super(),this.viewsManager=h.S}ngOnInit(){}onModulesChanged(){this.allowedSections=this.getCustomViewChildren(this.getParentViewName,h.S.emp_balances_tab)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["employee-balances-core"]],inputs:{icon:"icon"},features:[e.qOj],decls:9,vars:2,consts:[[1,"row"],[1,"col-12"],[1,"main-card-title","border-bottom"],["title","employeeBalances","color","font-dark",1,"emp-card-title"],[1,"container-fluid","p-0","px-4"],[1,"row","mx-md-n2"],["class","col-12 p-0 px-md-2",4,"ngIf"],[1,"col-12","p-0","px-md-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-title",2),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"mat-card-content",4)(6,"div",5),e.YNc(7,Sl,2,0,"div",6),e.YNc(8,xl,2,0,"div",6),e.qZA()()()()()),2&t&&(e.xp6(7),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_vacation_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_permission_sec)))},dependencies:[d.O5,I.T,y.a8,y.dn,y.n5,Cl,El]}),a})(),Ie=(()=>{class a extends P.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeSapCostCenter",t)}update(t){return this.post("Personnel/Employees/Edit_EmployeeSapCostCenter",t)}getList(t,o){return this.get("Personnel/Employees/GetList_EmployeeSapCostCenter",{params:{...o,$filter:`Person_Instance_ID eq ${t}`,$expand:v.db.saP_SystemInstance}})}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeSapCostCenter",{params:{$filter:`Person_Instance_ID eq ${t}`,$expand:v.db.saP_SystemInstance}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeSapCostCenter",{params:{Id:t}})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var Zl=r(37034);function ht(a){return a.map(n=>({...n,sapSystemInstance:(0,c._f)(n.saP_SystemInstance?.ar_Name,n.saP_SystemInstance?.en_Name),projectCode:n.proj_Code,defualtOcrCode1:n.ocrCode1,defualtOcrCode2:n.ocrCode2,defualtOcrCode3:n.ocrCode3,defualtOcrCode4:n.ocrCode4,defualtOcrCode5:n.ocrCode5}))}function Pl(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.toEdit(i))})("deleteRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let ft=(()=>{class a extends u.U{constructor(t){super(),this.employeeSapB1Service=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["sapSystemInstance","projectCode","actions"],this.optionalColomns=["defualtOcrCode1","defualtOcrCode2","defualtOcrCode3","defualtOcrCode4","defualtOcrCode5"],this.isLoaded=!1,this.employeeInstanceId=0,this.employeeInstanceId=m.w.Person_Instance_ID,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_SAPB1_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeInstanceId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.checkNoBusinessOrCompany()&&this.employeeInstanceId>0&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new g.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeSapB1Service.getList(this.employeeInstanceId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(s=>{s.message.messageType==p.u.Success?(this.dataSource=new g.by(ht(s.data)),this.page.length=s.meta.totalItemCount,this.page.meta=s.meta,this.isLoaded=!0):this.errorList(s?.message?.messages)})}toEdit(t){this.rowToEdit.emit(t)}onDelete(t){this.deleteDialog(t.sapSystemInstance).subscribe(i=>{i&&this.delete(t)})}delete(t){this.showLoading("table"),this.employeeSapB1Service.Delete(t.id).subscribe(o=>{o.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeSapB1Removed"),this.afterDelete.emit(t),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize)):this.errorList(o?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Ie))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-sap-b1-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,Pl,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeInstanceId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,C.Ro]}),a})();function Jl(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let kl=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeSapB1Service=t,this.dialogRef=o,this.employeeInstanceId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.employeeInstanceId=m.w.Person_Instance_ID,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_SAPB1_sec)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],systemInstance_ID:[null,[l.kI.required]],proj_Code:[null],ocrCode1:[null],ocrCode2:[null],ocrCode3:[null],ocrCode4:[null],ocrCode5:[null]}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}get formCtrls(){return this.form.controls}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={EmployeeData:{Person_Instance_ID:this.employeeInstanceId,ID:this.form.value.id,SystemInstance_ID:this.form.value.systemInstance_ID,Proj_Code:this.form.value.proj_Code,OcrCode1:this.form.value.ocrCode1,OcrCode2:this.form.value.ocrCode2,OcrCode3:this.form.value.ocrCode3,OcrCode4:this.form.value.ocrCode4,OcrCode5:this.form.value.ocrCode5}};0==t.EmployeeData.ID?this.create(t):this.update(t)}}create(t){this.showLoading("dialog"),this.employeeSapB1Service.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newEmployeeSapB1Added"),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){this.showLoading("dialog"),this.employeeSapB1Service.update(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg("employeeSapB1Updated"),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}employeeSapB1ToEdit(t){this.form.patchValue(t)}afterDelete(t){t.id==this.formCtrls.id.value&&this.clearForm(),t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Ie),e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-sap-b1-dialog"]],features:[e.qOj],decls:29,vars:24,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","sapB1",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","submitted","filter","appendTo"],["label","projectCode",3,"control","submitted"],["label","defualtOcrCode1",3,"control","submitted"],["label","defualtOcrCode2",3,"control","submitted"],["label","defualtOcrCode3",3,"control","submitted"],["label","defualtOcrCode4",3,"control","submitted"],["label","defualtOcrCode5",3,"control","submitted"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[1,"clearfix"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-sap-system-instance-dropdown",10),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"app-input",12),e.qZA(),e.TgZ(16,"div",9),e._UZ(17,"app-input",13),e.qZA(),e.TgZ(18,"div",9),e._UZ(19,"app-input",14),e.qZA(),e.TgZ(20,"div",9),e._UZ(21,"app-input",15),e.qZA(),e.TgZ(22,"div",9),e._UZ(23,"app-input",16),e.qZA()()(),e.TgZ(24,"div",17)(25,"submit-btn",18),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(26,Jl,1,0,"reset-form-btn",19),e.qZA(),e._UZ(27,"div",20),e.TgZ(28,"emp-sap-b1-table",21),e.NdJ("rowToEdit",function(s){return o.employeeSapB1ToEdit(s)})("afterDelete",function(s){return o.afterDelete(s)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.systemInstance_ID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.proj_Code)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.ocrCode1)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.ocrCode2)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.ocrCode3)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.ocrCode4)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.ocrCode5)("submitted",o.submitted),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeInstanceId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(2),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,F.a,Z.J,D.p,I.T,E.lW,_.uh,_.xY,C.Ro,Zl.K,l._Y,l.JL,l.sg,ft]}),a})();function Nl(a,n){if(1&a&&(e.TgZ(0,"div",11),e._UZ(1,"card-row-item",12)(2,"card-row-item",13),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("value",null==t.empSapB1?null:t.empSapB1.sapSystemInstance),e.xp6(1),e.Q6J("value",null==t.empSapB1?null:t.empSapB1.projectCode)}}function Ml(a,n){if(1&a&&(e.TgZ(0,"div",14),e._UZ(1,"card-row-item",15)(2,"card-row-item",16)(3,"card-row-item",17)(4,"card-row-item",18)(5,"card-row-item",19),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("value",null==t.empSapB1?null:t.empSapB1.defualtOcrCode1),e.xp6(1),e.Q6J("value",null==t.empSapB1?null:t.empSapB1.defualtOcrCode2),e.xp6(1),e.Q6J("value",null==t.empSapB1?null:t.empSapB1.defualtOcrCode3),e.xp6(1),e.Q6J("value",null==t.empSapB1?null:t.empSapB1.defualtOcrCode4),e.xp6(1),e.Q6J("value",null==t.empSapB1?null:t.empSapB1.defualtOcrCode5)}}function Fl(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"emp-sap-b1-table",20),e.NdJ("afterDelete",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function Ol(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,Nl,3,2,"div",7),e.YNc(6,Ml,6,5,"div",8),e.YNc(7,Fl,1,2,"emp-sap-b1-table",9),e.qZA(),e.TgZ(8,"div",4)(9,"see-more-btn",10),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.empSapB1)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("Id",t.employeeInstanceId)("isTableView",t.isTableView)}}function Ul(a,n){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",21),2&a&&e.Q6J("rowNo",7)}let Ql=(()=>{class a extends u.U{constructor(t){super(),this.employeeSapB1Service=t,this.isLoaded=!1,this.isTableView=!1,this.employeeInstanceId=m.w.Person_Instance_ID,m.w.Person_Instance_ID$.subscribe(o=>{this.employeeInstanceId=o,this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()?(this.isLoaded=!1,this.getAllByEmployeeId()):this.isLoaded=!0})}ngOnInit(){}getAllByEmployeeId(){this.empSapB1=null,this.employeeSapB1Service.getAll(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.empSapB1=ht(t.data)[0],this.isLoaded=!0):this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(kl).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAllByEmployeeId())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAllByEmployeeId())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Ie))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-sap-b1-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","sapB1",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container mbottom-20",4,"ngIf"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"Id","isTableView","toggleTable"],[1,"view-data-row-container","mbottom-20"],["label","sapSystemInstance",1,"col-6","px-0",3,"value"],["label","projectCode",1,"col-6","px-0",3,"value"],[1,"view-data-row-container"],["label","defualtOcrCode1",1,"col-6","col-lg","px-0","mb-2",3,"value"],["label","defualtOcrCode2",1,"col-6","col-lg","px-0","mb-2",3,"value"],["label","defualtOcrCode3",1,"col-6","col-lg","px-0","mb-2",3,"value"],["label","defualtOcrCode4",1,"col-6","col-lg","px-0","mb-2",3,"value"],["label","defualtOcrCode5",1,"col-6","col-lg","px-0","mb-2",3,"value"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,Ol,10,7,"div",0),e.YNc(1,Ul,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.O5,A.E,J.y,S,x,ft]}),a})();var ve=r(25199),ql=r(44423),Rl=r(63218);function Bl(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.toEdit(i))})("deleteRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let bt=(()=>{class a extends u.U{constructor(t){super(),this.employeeS4HanaService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["s4SystemInstance","costCenter","costCenter_Text","actions"],this.optionalColomns=[],this.isLoaded=!1,this.employeeInstanceId=0,this.employeeInstanceId=m.w.Person_Instance_ID,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_S4Hana_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeInstanceId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.checkNoBusinessOrCompany()&&this.employeeInstanceId>0&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new g.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.employeeS4HanaService.getList(this.employeeInstanceId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(s=>{s.message.messageType==p.u.Success?(this.dataSource=new g.by(function Ll(a){return a.map(n=>({...n,s4SystemInstance:(0,c._f)(n.s4_SystemInstance?.ar_Name,n.s4_SystemInstance?.en_Name)}))}(s.data)),this.page.length=s.meta.totalItemCount,this.page.meta=s.meta,this.isLoaded=!0):this.errorList(s?.message?.messages)})}toEdit(t){this.rowToEdit.emit(t)}onDelete(t){this.deleteDialog(t.s4SystemInstance).subscribe(i=>{i&&this.delete(t)})}delete(t){this.showLoading("table"),this.employeeS4HanaService.Delete(t.id).subscribe(o=>{o.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeS4HanaRemoved"),this.afterDelete.emit(t),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize)):this.errorList(o?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ve.Q))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-s4-hana-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,Bl,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeInstanceId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,C.Ro]}),a})();function Vl(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",16),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let Yl=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeS4HanaService=t,this.dialogRef=o,this.employeeInstanceId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.employeeInstanceId=m.w.Person_Instance_ID,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_S4Hana_sec)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],systemInstance_ID:[null,[l.kI.required]],costCenter:[null,[l.kI.required]],costCenter_Text:[null]}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}get formCtrls(){return this.form.controls}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={EmployeeData:{Person_Instance_ID:this.employeeInstanceId,ID:this.form.value.id,SystemInstance_ID:this.form.value.systemInstance_ID,CostCenter:this.form.value.costCenter,CostCenter_Text:this.form.value.costCenter_Text}};0==t.EmployeeData.ID?this.create(t):this.update(t)}}create(t){this.showLoading("dialog"),this.employeeS4HanaService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newEmployeeS4HanaAdded"),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){this.showLoading("dialog"),this.employeeS4HanaService.update(t).subscribe(o=>{o.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg("employeeS4HanaUpdated"),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}employeeS4HanaToEdit(t){this.form.patchValue(t)}afterDelete(t){t.id==this.formCtrls.id.value&&this.clearForm(),t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}changeCostCenterText(t){this.formCtrls.costCenter_Text.setValue(t[0]?.costCenter_Text??null)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ve.Q),e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-s4-hana-dialog"]],features:[e.qOj],decls:18,vars:16,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","s4Hana",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-6","col-12"],[3,"control","submitted","filter","appendTo"],[3,"control","s4SystemInstanceControl","submitted","appendTo","change"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-s4-system-instance-dropdown",10),e.qZA(),e.TgZ(12,"div",9)(13,"app-cost-center-by-s4-system-instance-dropdown",11),e.NdJ("change",function(s){return o.changeCostCenterText(s)}),e.qZA()()()(),e.TgZ(14,"div",12)(15,"submit-btn",13),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(16,Vl,1,0,"reset-form-btn",14),e.qZA(),e.TgZ(17,"emp-s4-hana-table",15),e.NdJ("rowToEdit",function(s){return o.employeeS4HanaToEdit(s)})("afterDelete",function(s){return o.afterDelete(s)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.systemInstance_ID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.costCenter)("s4SystemInstanceControl",o.formCtrls.systemInstance_ID)("submitted",o.submitted)("appendTo",i),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeInstanceId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,Z.J,D.p,I.T,E.lW,_.uh,_.xY,C.Ro,ql.z,Rl.N,l._Y,l.JL,l.sg,bt]}),a})();function Gl(a,n){if(1&a&&(e.TgZ(0,"div",10),e._UZ(1,"card-row-item",11)(2,"card-row-item",12),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("value",null==t.empS4?null:t.empS4.costCenter),e.xp6(1),e.Q6J("value",null==t.empS4?null:t.empS4.costCenter_Text)}}function jl(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"emp-s4-hana-table",13),e.NdJ("afterDelete",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function zl(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,Gl,3,2,"div",7),e.YNc(6,jl,1,2,"emp-s4-hana-table",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.empS4)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("Id",t.employeeInstanceId)("isTableView",t.isTableView)}}function Hl(a,n){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",14),2&a&&e.Q6J("rowNo",2)}let Wl=(()=>{class a extends u.U{constructor(t){super(),this.employeeS4HanaService=t,this.isLoaded=!1,this.isTableView=!1,this.employeeInstanceId=m.w.Person_Instance_ID,m.w.Person_Instance_ID$.subscribe(o=>{this.employeeInstanceId=o,this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()?(this.isLoaded=!1,this.getAllByEmployeeId()):this.isLoaded=!0})}ngOnInit(){}getAllByEmployeeId(){this.empS4=null,this.employeeS4HanaService.getAll(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.empS4=t.data[0],this.isLoaded=!0):this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(Yl).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAllByEmployeeId())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAllByEmployeeId())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(ve.Q))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-s4-hana-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","s4Hana",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"Id","isTableView","toggleTable"],[1,"view-data-row-container"],["label","costCenter",1,"w-25",3,"value"],["label","costCenter_Text",1,"w-25",3,"value"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,zl,9,6,"div",0),e.YNc(1,Hl,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.O5,A.E,J.y,S,x,bt]}),a})();var Ct=r(11151),$l=r(72251),Kl=r(18240),Xl=r(32084);function er(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",22),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let tr=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeErpIntegrationService=t,this.dialogRef=o,this.employeeId=0,this.hasUpdate=!1,this.submitted=!1,this.employeeId=m.w.EmployeeId,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_ERP_integration_sec)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],SAP_Add_As_Employee:[!1],SAP_Emp_Code:[null,[l.kI.required,M.w.whiteSpace]],SAP_Add_As_Vendor:[!1],SAP_Vendor_Code:[null,[l.kI.required,M.w.whiteSpace]],GroupCodeVendor:[null,[l.kI.required]],SAP_Add_As_Customer:[!1],SAP_Customer_Code:[null,[l.kI.required,M.w.whiteSpace]],GroupCodeCustomer:[null,[l.kI.required]],SAP_Add_As_Resource:[!1],SAP_Res_Code:[null,[l.kI.required,M.w.whiteSpace]],Resource_Group_Id:[null,[l.kI.required]]}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}get formCtrls(){return this.form.controls}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&this.employeeId>0&&this.getAll()}getAll(){this.showLoading("dialog"),this.employeeErpIntegrationService.getAll(this.employeeId).subscribe(t=>{t?.message?.messageType==p.u.Success?t.data.perid>0&&(this.form.patchValue(t.data),this.form.patchValue(t.data?.I_Core_Person_Instance_SAP_ERP_Master_Data)):this.errorList(t?.message?.messages),this.hideLoading("dialog")})}submit(){console.log(this.form.value),this.submitted=!0,this.form.valid&&this.create({perid:this.employeeId,SAP_Add_As_Employee:this.form.value.SAP_Add_As_Employee,SAP_Add_As_Vendor:this.form.value.SAP_Add_As_Vendor,GroupCodeVendor:this.form.value.GroupCodeVendor,SAP_Add_As_Customer:this.form.value.SAP_Add_As_Customer,GroupCodeCustomer:this.form.value.GroupCodeCustomer,SAP_Add_As_Resource:this.form.value.SAP_Add_As_Resource,Resource_Group_Id:this.form.value.Resource_Group_Id,I_Core_Person_Instance_SAP_ERP_Master_Data:{SAP_Emp_Code:this.form.value.SAP_Emp_Code,SAP_Vendor_Code:this.form.value.SAP_Vendor_Code,SAP_Customer_Code:this.form.value.SAP_Customer_Code,SAP_Res_Code:this.form.value.SAP_Res_Code},Resource_Mesaure_Unit:"",DownPaymentClearAct:"",DownPaymentInterimAccount:"",DebitorAccount:""})}create(t){this.showLoading("dialog"),this.employeeErpIntegrationService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.addSuccessfullyMsg("newEmployeeErpIntegrationAdded"),this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}clearForm(){this.form.reset({id:0,SAP_Add_As_Employee:!1,SAP_Add_As_Vendor:!1,SAP_Add_As_Customer:!1,SAP_Add_As_Resource:!1}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Ct.v),e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-erp-integration-dialog"]],features:[e.qOj],decls:39,vars:34,consts:[[3,"name"],["mat-dialog-title","",1,"systemInstance_ID-color","font-size-20","m-0"],["title","erpIntegration",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12","mbottom-20","mtop-14"],["label","addAsEmployeeSapId",3,"control"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","disabled"],[1,"d-md-inline-block","col-sm-none","col-md-4"],["label","addAsVendor",3,"control"],[3,"control","submitted","filter","appendTo","disable"],[1,"d-md-none","col-sm-6","col-12"],["label","addAsCustomerSapCode",3,"control"],["label","addAsResourceSapCode",3,"control"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-check-box",10),e.qZA(),e.TgZ(12,"div",11),e._UZ(13,"app-input",12),e.qZA(),e._UZ(14,"div",13),e.TgZ(15,"div",9),e._UZ(16,"app-check-box",14),e.qZA(),e.TgZ(17,"div",11),e._UZ(18,"app-input",12),e.qZA(),e.TgZ(19,"div",11),e._UZ(20,"app-erp-group-code-vendor-dropdown",15),e.qZA(),e._UZ(21,"div",16),e.TgZ(22,"div",9),e._UZ(23,"app-check-box",17),e.qZA(),e.TgZ(24,"div",11),e._UZ(25,"app-input",12),e.qZA(),e.TgZ(26,"div",11),e._UZ(27,"app-erp-group-code-customer-dropdown",15),e.qZA(),e._UZ(28,"div",16),e.TgZ(29,"div",9),e._UZ(30,"app-check-box",18),e.qZA(),e.TgZ(31,"div",11),e._UZ(32,"app-input",12),e.qZA(),e.TgZ(33,"div",11),e._UZ(34,"app-erp-resource-group-dropdown",15),e.qZA(),e._UZ(35,"div",16),e.qZA()(),e.TgZ(36,"div",19)(37,"submit-btn",20),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(38,er,1,0,"reset-form-btn",21),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.SAP_Add_As_Employee),e.xp6(2),e.Q6J("control",o.formCtrls.SAP_Emp_Code)("disabled",!o.formCtrls.SAP_Add_As_Employee.value),e.xp6(3),e.Q6J("control",o.formCtrls.SAP_Add_As_Vendor),e.xp6(2),e.Q6J("control",o.formCtrls.SAP_Vendor_Code)("disabled",!o.formCtrls.SAP_Add_As_Vendor.value),e.xp6(2),e.Q6J("control",o.formCtrls.GroupCodeVendor)("submitted",o.submitted)("filter",!0)("appendTo",i)("disable",!o.formCtrls.SAP_Add_As_Vendor.value),e.xp6(3),e.Q6J("control",o.formCtrls.SAP_Add_As_Customer),e.xp6(2),e.Q6J("control",o.formCtrls.SAP_Customer_Code)("disabled",!o.formCtrls.SAP_Add_As_Customer.value),e.xp6(2),e.Q6J("control",o.formCtrls.GroupCodeCustomer)("submitted",o.submitted)("filter",!0)("appendTo",i)("disable",!o.formCtrls.SAP_Add_As_Customer.value),e.xp6(3),e.Q6J("control",o.formCtrls.SAP_Add_As_Resource),e.xp6(2),e.Q6J("control",o.formCtrls.SAP_Res_Code)("disabled",!o.formCtrls.SAP_Add_As_Resource.value),e.xp6(2),e.Q6J("control",o.formCtrls.Resource_Group_Id)("submitted",o.submitted)("filter",!0)("appendTo",i)("disable",!o.formCtrls.SAP_Add_As_Resource.value),e.xp6(3),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",0==o.formCtrls.id.value)}},dependencies:[d.O5,F.a,Y.u,Z.J,D.p,I.T,E.lW,_.uh,_.xY,C.Ro,$l.T,Kl.q,Xl.I,l._Y,l.JL,l.sg]}),a})();function or(a,n){if(1&a&&(e.TgZ(0,"div",8),e._UZ(1,"card-row-item",9)(2,"card-row-item",10)(3,"card-row-item",11)(4,"card-row-item",12),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("value",null==t.erpIntegration?null:t.erpIntegration.SAP_Add_As_Employee)("isBool",!0),e.xp6(1),e.Q6J("value",null==t.erpIntegration?null:t.erpIntegration.SAP_Add_As_Vendor)("isBool",!0),e.xp6(1),e.Q6J("value",null==t.erpIntegration?null:t.erpIntegration.SAP_Add_As_Customer)("isBool",!0),e.xp6(1),e.Q6J("value",null==t.erpIntegration?null:t.erpIntegration.SAP_Add_As_Resource)("isBool",!0)}}function ar(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,or,5,8,"div",7),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.erpIntegration)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView)}}function ir(a,n){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",13),2&a&&e.Q6J("rowNo",4)}let nr=(()=>{class a extends u.U{constructor(t){super(),this.employeeErpIntegrationService=t,this.isLoaded=!0,this.isTableView=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){}onChangeBusinessAndCompanyId(){this.erpIntegration=null,this.employeeId>0&&this.checkNoBusinessOrCompany()?this.getAll():this.isLoaded=!0}getAll(){this.erpIntegration=null,this.employeeErpIntegrationService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.erpIntegration=t.data[0],this.isLoaded=!0):this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(tr).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAll())})}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Ct.v))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-erp-integration-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","erpIntegration",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[1,"view-data-row-container"],["label","addAsEmployeeSapId",1,"w-25",3,"value","isBool"],["label","addAsVendor",1,"w-25",3,"value","isBool"],["label","addAsCustomerSapCode",1,"w-25",3,"value","isBool"],["label","addAsResourceSapCode",1,"w-25",3,"value","isBool"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,ar,6,3,"div",0),e.YNc(1,ir,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.O5,A.E,S,x]}),a})();function sr(a,n){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"app-emp-sap-b1-card"),e.qZA())}function lr(a,n){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"app-emp-s4-hana-card"),e.qZA())}function rr(a,n){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"app-emp-erp-integration-card"),e.qZA())}let pr=(()=>{class a extends u.U{constructor(){super(),this.viewsManager=h.S}ngOnInit(){}onModulesChanged(){this.allowedSections=this.getCustomViewChildren(this.getParentViewName,h.S.emp_sap_integration_tab)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-sap-integration-core"]],inputs:{icon:"icon"},features:[e.qOj],decls:10,vars:3,consts:[[1,"row"],[1,"col-12"],[1,"main-card-title","border-bottom"],["title","sapIntegration","color","font-dark",1,"emp-card-title"],[1,"container-fluid","p-0","px-4"],[1,"row","mx-md-n2"],["class","col-12 p-0 px-md-2",4,"ngIf"],[1,"col-12","p-0","px-md-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-title",2),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"mat-card-content",4)(6,"div",5),e.YNc(7,sr,2,0,"div",6),e.YNc(8,lr,2,0,"div",6),e.YNc(9,rr,2,0,"div",6),e.qZA()()()()()),2&t&&(e.xp6(7),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_SAPB1_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_S4Hana_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_ERP_integration_sec)))},dependencies:[d.O5,I.T,y.a8,y.dn,y.n5,Ql,Wl,nr]}),a})();function yt(a){return a.map(n=>({...n,bank:(0,c._f)(n.comm_Bank?.ar_Name,n.comm_Bank?.en_Name),startDate:c.M6.mapDate(n.from_Date)}))}function It(a){let n=[{paymentId:0,payment:(0,c._f)("\u0627\u0644\u0645\u062a\u063a\u064a\u0631\u0627\u062a \u0627\u0644\u0639\u0627\u0645\u0647","Global Variable"),variables:[]}];return a.lstPayments.map(t=>n.push({paymentId:t.id,payment:(0,c._f)(t.ar_Name,t.en_Name),variables:[]})),a.lstFixedVAriableGlobal.map(t=>n[0].variables.push(...we(t))),a.perssonPeriodLsts.map(t=>{let o=Te(n,t.payment?.id);t.lstpersperiodcalculations.forEach(i=>n[o].variables.push(...we(i)))}),a.lstFixedVAriable.map(t=>{if(0!=t.paY_Variable?.pay_Payment_Variable?.length&&Te(n,t.paY_Variable?.pay_Payment_Variable[0].Payment_ID)>=0||0==t.paY_Variable?.pay_Payment_Variable?.length){let o=Te(n,t.paY_PeriodCalculation?.payment_ID);a.lstAuthorize.find(i=>i.variable_ID==t.variable_ID&&i.payment_ID==n[o].paymentId)&&n[o].variables.push(...we(t))}}),n}function Te(a,n){return a.findIndex(t=>t.paymentId==n)}function we(a){let n=[];return n.push({variable:(0,c._f)(a.paY_Variable?.arName,a.paY_Variable?.name),value:a.variable_Value}),n}let vt=(()=>{class a extends P.K{constructor(){super()}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeePayment",{params:{person_id:t}})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var cr=r(17355),G=r(37084);function dr(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",5)(1,"h4"),e._UZ(2,"page-title",6),e.qZA(),e.TgZ(3,"button",7),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onCloseDialog())}),e._UZ(4,"i",8),e.qZA()()}}function mr(a,n){if(1&a&&(e.TgZ(0,"div")(1,"div",14)(2,"p",15),e._uU(3),e.qZA(),e.TgZ(4,"p",16),e._uU(5),e.qZA()()()),2&a){const t=n.$implicit;e.xp6(3),e.Oqu(t.variable),e.xp6(2),e.Oqu(t.value)}}function ur(a,n){if(1&a&&(e.ynx(0),e.TgZ(1,"mat-expansion-panel",13)(2,"mat-expansion-panel-header")(3,"mat-panel-title"),e._uU(4),e.ALo(5,"titlecase"),e.qZA()(),e.YNc(6,mr,6,2,"div",12),e.qZA(),e.BQk()),2&a){const t=e.oxw(),o=t.$implicit,i=t.index,s=e.oxw(3);e.xp6(1),e.Q6J("hideToggle",0==o.variables)("expanded",i==s.firstExpandedIndex)("disabled",0==o.variables.length),e.xp6(3),e.hij(" ",e.lcZ(5,5,o.payment)," "),e.xp6(2),e.Q6J("ngForOf",o.variables)}}function _r(a,n){if(1&a&&(e.ynx(0),e.YNc(1,ur,7,7,"ng-container",3),e.BQk()),2&a){const t=n.$implicit;e.oxw(3);const o=e.MAs(5);e.xp6(1),e.Q6J("ngIf",(null==t.variables?null:t.variables.length)>0)("ngIfElse",o)}}function gr(a,n){if(1&a&&(e.TgZ(0,"mat-accordion",11),e.YNc(1,_r,2,2,"ng-container",12),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.paymentsAndVariables)}}function hr(a,n){1&a&&e._UZ(0,"app-emp-payment-skeleton")}function fr(a,n){if(1&a&&(e.ynx(0),e.YNc(1,gr,2,1,"mat-accordion",9),e.YNc(2,hr,1,0,"ng-template",null,10,e.W1O),e.BQk()),2&a){const t=e.MAs(3),o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.isLoaded)("ngIfElse",t)}}function br(a,n){1&a&&(e._UZ(0,"span",19),e.TgZ(1,"div",20),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"noDataToDisplay")," "))}function Cr(a,n){1&a&&(e.TgZ(0,"p-messages",17),e.YNc(1,br,4,3,"ng-template",18),e.qZA())}let Tt=(()=>{class a extends u.U{constructor(t,o){super(),this.employeePayrollService=t,this.dialogRef=o,this.employeeId=0,this.isLoaded=!1,this.isCardView=!1,this.submitted=!1,this.firstExpandedIndex=0,this.employeeId=m.w.EmployeeId}ngOnInit(){}get formCtrls(){return this.form.controls}onCloseDialog(){this.dialogRef.close(!1)}onChangeBusinessAndCompanyId(){this.checkNoBusinessOrCompany()&&this.employeeId>0?this.getAll():this.isLoaded=!0}getAll(){this.employeePayrollService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.paymentsAndVariables=It(t.data),this.firstExpandedIndex=this.paymentsAndVariables.findIndex(o=>o.variables.length>0),this.isLoaded=!0):this.errorList(t?.message?.messages)})}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(vt),e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-payroll-data-dialog"]],inputs:{isCardView:"isCardView"},features:[e.qOj],decls:6,vars:5,consts:[["mat-dialog-title","","class","primary-color font-size-20 m-0",4,"ngIf"],[1,"container-fluid","mx-0"],["dialogContainer",""],[4,"ngIf","ngIfElse"],["noDataToDisplay",""],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","payrollData",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],["class","emp-payroll","multi","",4,"ngIf","ngIfElse"],["notLoaded",""],["multi","",1,"emp-payroll"],[4,"ngFor","ngForOf"],[3,"hideToggle","expanded","disabled"],[1,"row"],[1,"col-8"],[1,"col-4"],["severity","warn"],["pTemplate",""],[1,"p-message-icon","pi","pi-exclamation-triangle"],[1,"p-message-detail"]],template:function(t,o){if(1&t&&(e.YNc(0,dr,5,0,"div",0),e.TgZ(1,"mat-dialog-content",1,2),e.YNc(3,fr,4,2,"ng-container",3),e.YNc(4,Cr,2,0,"ng-template",null,4,e.W1O),e.qZA()),2&t){const i=e.MAs(5);e.Q6J("ngIf",!o.isCardView),e.xp6(1),e.ekj("dialog-view",!o.isCardView),e.xp6(2),e.Q6J("ngIf",o.employeeId>0)("ngIfElse",i)}},dependencies:[d.sg,d.O5,I.T,cr.m,E.lW,_.uh,_.xY,G.pp,G.ib,G.yz,G.yK,me.jx,ue.V,d.rS,L.X$],styles:["@media only screen and (min-width: 680px){.dialog-view[_ngcontent-%COMP%]   .mat-accordion[_ngcontent-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]{min-width:650px!important}}"]}),a})();function yr(a,n){if(1&a&&(e.TgZ(0,"div",20)(1,"p",21),e._uU(2),e.qZA(),e.TgZ(3,"p",22),e._uU(4),e.qZA()()),2&a){const t=n.$implicit;e.xp6(2),e.hij(" ",null==t?null:t.variable," "),e.xp6(2),e.Oqu(null==t?null:t.value)}}function Ir(a,n){if(1&a&&(e.TgZ(0,"div",18),e.YNc(1,yr,5,2,"div",19),e.qZA()),2&a){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngForOf",null==t?null:t.variables)}}function vr(a,n){1&a&&(e.TgZ(0,"div",23),e._uU(1),e.qZA()),2&a&&(e.xp6(1),e.hij(" ","---"," "))}function Tr(a,n){if(1&a&&(e.TgZ(0,"div",14)(1,"p",15),e._uU(2),e.ALo(3,"titlecase"),e.qZA(),e.YNc(4,Ir,2,1,"div",16),e.YNc(5,vr,2,1,"ng-template",null,17,e.W1O),e.qZA()),2&a){const t=e.MAs(6),o=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,3,null==o?null:o.payment)),e.xp6(2),e.Q6J("ngIf",(null==o||null==o.variables?null:o.variables.length)>0)("ngIfElse",t)}}function wr(a,n){if(1&a&&(e.ynx(0),e.YNc(1,Tr,7,5,"div",13),e.BQk()),2&a){const t=n.index,o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t<=o.firstExpandedIndex)}}function Dr(a,n){1&a&&e._UZ(0,"card-row-item",24)}function Er(a,n){if(1&a&&(e.TgZ(0,"div",10),e.YNc(1,wr,2,1,"ng-container",11),e.YNc(2,Dr,1,0,"card-row-item",12),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.paymentsAndVariables),e.xp6(1),e.Q6J("ngIf",0==t.employeeId)}}function Sr(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,Er,3,2,"div",7),e._UZ(6,"app-emp-payroll-data-dialog",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",(null==t.paymentsAndVariables?null:t.paymentsAndVariables.length)>1||(null==t.paymentsAndVariables[0]||null==t.paymentsAndVariables[0].variables?null:t.paymentsAndVariables[0].variables.length)>0)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.ekj("hidden",!t.isTableView),e.Q6J("isCardView",!0),e.xp6(2),e.Q6J("Id",t.employeeId)("isTableView",t.isTableView)}}function xr(a,n){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",25),2&a&&e.Q6J("rowNo",4)}let Ar=(()=>{class a extends u.U{constructor(t){super(),this.employeePayrollService=t,this.firstExpandedIndex=0,this.isLoaded=!1,this.isTableView=!1,this.employeeId=m.w.EmployeeId}ngOnInit(){}onChangeBusinessAndCompanyId(){this.paymentsAndVariables=[],this.employeeId>0&&this.checkNoBusinessOrCompany()?this.getAllByEmployeeId():this.isLoaded=!0}getAllByEmployeeId(){this.paymentsAndVariables=[],this.employeePayrollService.getAll(this.employeeId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.paymentsAndVariables=It(t.data),this.firstExpandedIndex=this.paymentsAndVariables.findIndex(o=>o.variables.length>0),-1==this.firstExpandedIndex&&(this.firstExpandedIndex=0),this.isLoaded=!0):this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(Tt,{},{disableClose:!1,minWidth:"50vw",maxWidth:"80vw",top:"40px",panelClass:"dialog-emp-form"}).afterClosed().subscribe(t=>{})}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(vt))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-payroll-data-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","payrollData",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[3,"isCardView"],[3,"Id","isTableView","toggleTable"],[1,"view-data-row-container"],[4,"ngFor","ngForOf"],["class","w-25","label","globalVariable",4,"ngIf"],["class","col","style","min-width: fit-content",4,"ngIf"],[1,"col",2,"min-width","fit-content"],[1,"view-data-title"],["class","view-data-value",4,"ngIf","ngIfElse"],["noVariables",""],[1,"view-data-value"],["class","d-flex justify-content-between flex-wrap",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"col","p-0","mr-1","flex-lg-grow-1"],[1,"col","p-0","flex-grow-0"],[1,"d-inline-block"],["label","globalVariable",1,"w-25"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,Sr,9,8,"div",0),e.YNc(1,xr,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.sg,d.O5,A.E,J.y,S,x,Tt,d.rS]}),a})(),De=(()=>{class a extends P.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_EmployeeBank",t)}update(t){return this.post("Personnel/Employees/Edit_EmployeeBank",t)}getList(t,o){return this.get("Personnel/Employees/GetList_EmployeeBank",{params:{...o,$filter:`Person_Instance_ID  eq ${t}`,$expand:v.db.comm_Bank}})}getAll(t){return this.get("Personnel/Employees/GetAll_EmployeeBank",{params:{$filter:`Person_Instance_ID  eq ${t}`,$expand:v.db.comm_Bank}})}Delete(t){return this.delete("Personnel/Employees/Delete_EmployeeBank",{params:t})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var Zr=r(52013);function Lr(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",2),e.NdJ("onChangePage",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.getList(i.pageIndex+1,i.pageSize))})("editRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.toEdit(i))})("deleteRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("page",t.page)("isMatPaginator",t.isMatPaginator)("showFirstLastButtons",!1)("showSpaceTop",!1)}}let wt=(()=>{class a extends u.U{constructor(t){super(),this.empBankingService=t,this.hideActions=!1,this.isMatPaginator=!1,this.rowToEdit=new e.vpe,this.afterDelete=new e.vpe,this.mandatoryColomns=["bank","accountNo","startDate","actions"],this.optionalColomns=[],this.isLoaded=!1,this.employeeInstanceId=0,this.employeeInstanceId=m.w.Person_Instance_ID,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_banking_account_data_sec)}ngOnChanges(t){if(t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeInstanceId>0&&this.getList(this.firstPage),this.hideActions){let o=this.rowFunctions.basic.findIndex(i=>"edit"==i.name.toLowerCase());this.rowFunctions.basic.splice(o,1)}}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.checkNoBusinessOrCompany()&&this.employeeInstanceId>0&&this.getList(this.firstPage)}getList(t,o){this.dataSource=new g.by(null),this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.dialogSize=o),this.empBankingService.getList(this.employeeInstanceId,{PageNumber:t,pageSize:this.page.dialogSize}).pipe(this.cancelRequest()).subscribe(s=>{s.message.messageType==p.u.Success?(this.dataSource=new g.by(yt(s.data)),this.page.length=s.meta.totalItemCount,this.page.meta=s.meta,this.isLoaded=!0):this.errorList(s?.message?.messages)})}toEdit(t){this.rowToEdit.emit(t)}onDelete(t){this.deleteDialog(t.bank).subscribe(i=>{i&&this.delete(t)})}delete(t){let o={Person_Instance_ID:this.employeeInstanceId,Bank_ID:t.bank_ID,AccountNum:t.accountNo};this.showLoading("table"),this.empBankingService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeBankingAccountDataRemoved"),this.afterDelete.emit(t),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.dialogSize)):this.errorList(i?.message?.messages),this.hideLoading("table")})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(De))},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-banking-account-data-table"]],inputs:{hasUpdate:"hasUpdate",hideActions:"hideActions",isMatPaginator:"isMatPaginator"},outputs:{rowToEdit:"rowToEdit",afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:2,vars:2,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow",4,"ngIf"],[3,"name"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","page","isMatPaginator","showFirstLastButtons","showSpaceTop","onChangePage","editRow","deleteRow"]],template:function(t,o){1&t&&(e.YNc(0,Lr,1,11,"app-material-table",0),e._UZ(1,"ngx-spinner",1)),2&t&&(e.Q6J("ngIf",o.employeeInstanceId>0),e.xp6(1),e.Q6J("name","table"))},dependencies:[d.O5,w.I,C.Ro]}),a})();function Pr(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"reset-form-btn",17),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearForm())}),e.qZA()}}let Jr=(()=>{class a extends u.U{constructor(t,o){super(),this.empBankingService=t,this.dialogRef=o,this.employeeInstanceId=0,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.employeeInstanceId=m.w.Person_Instance_ID,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_banking_account_data_sec)}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],bank_ID:[null,[l.kI.required]],accountNo:[null,[l.kI.required,U.dN.number]],startDate:[null,[l.kI.required,U.dN.date]],cardNumber:[null],isDebit:[!1],branchId:[null]}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()})}get formCtrls(){return this.form.controls}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}submit(){if(this.submitted=!0,this.getList=!1,this.form.valid){const t={employeeData:{person_Instance_ID:this.employeeInstanceId,bank_ID:this.form.value.bank_ID,accountNo:this.form.value.accountNo,from_Date:c.M6.mapDateReverse(this.form.value.startDate),cardNumber:this.form.value.cardNumber,isDebit:this.form.value.isDebit??!1,branchId:this.form.value.branchId}};0==this.formCtrls.id.value?this.create(t):this.update(t)}}create(t){this.showLoading("dialog"),this.empBankingService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canEditOrRemoveFromIndex","newEmployeeBankingAccountDataAdded"),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading("dialog")})}update(t){let o={...t,OldEmployeeData:{person_Instance_ID:this.employeeInstanceId,bank_ID:this.selectedAccountBank.bank_ID,accountNo:this.selectedAccountBank.accountNo}};this.showLoading("dialog"),this.empBankingService.update(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.clearForm(),this.updateSuccessfullyMsg("employeeBankingAccountDataUpdated"),this.getList=!0,this.hasUpdate=!0,this.selectedAccountBank=null):this.errorList(i?.message?.messages),this.hideLoading("dialog")})}employeeBankingAccountToEdit(t){this.form.patchValue(t),this.formCtrls.startDate.setValue(t.from_Date),this.formCtrls.id.setValue(t.bank_ID),this.selectedAccountBank=t}afterDelete(t){t.comm_Bank?.id==this.selectedAccountBank?.bank_ID&&t.accountNo==this.selectedAccountBank?.accountNo&&this.formCtrls.id.value>0&&this.clearForm(),t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(De),e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-banking-account-data-dialog"]],features:[e.qOj],decls:20,vars:16,consts:[[3,"name"],["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","bankingAccountData",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"formGroup"],[1,"row","ptop-20"],[1,"col-md-4","col-sm-6","col-12"],[3,"control","submitted","filter","appendTo"],["label","accountNo",3,"control","submitted"],["label","startDate",3,"control","submitted"],[1,"emp-form-btns-float"],["icon","fas fa-save",3,"id","color","disabled","iconPositionBefore","onClick"],[3,"click",4,"ngIf"],[3,"hasUpdate","rowToEdit","afterDelete"],[3,"click"]],template:function(t,o){if(1&t&&(e._UZ(0,"ngx-spinner",0),e.TgZ(1,"div",1)(2,"h4"),e._UZ(3,"page-title",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"mat-dialog-content",5,6)(8,"form",7)(9,"div",8)(10,"div",9),e._UZ(11,"app-bank-dropdown",10),e.qZA(),e.TgZ(12,"div",9),e._UZ(13,"app-input",11),e.qZA(),e.TgZ(14,"div",9),e._UZ(15,"app-datepicker",12),e.qZA()()(),e.TgZ(16,"div",13)(17,"submit-btn",14),e.NdJ("onClick",function(){return o.submit()}),e.qZA(),e.YNc(18,Pr,1,0,"reset-form-btn",15),e.qZA(),e.TgZ(19,"emp-banking-account-data-table",16),e.NdJ("rowToEdit",function(s){return o.employeeBankingAccountToEdit(s)})("afterDelete",function(s){return o.afterDelete(s)}),e.qZA()()),2&t){const i=e.MAs(7);e.Q6J("name","dialog"),e.xp6(8),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.bank_ID)("submitted",o.submitted)("filter",!0)("appendTo",i),e.xp6(2),e.Q6J("control",o.formCtrls.accountNo)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.startDate)("submitted",o.submitted),e.xp6(2),e.Q6J("id",o.formCtrls.id.value)("color",o.btn.darkBlue)("disabled",!o.employeeInstanceId)("iconPositionBefore",!1),e.xp6(1),e.Q6J("ngIf",o.formCtrls.id.value>0),e.xp6(1),e.Q6J("hasUpdate",o.getList)}},dependencies:[d.O5,N.Q,F.a,Z.J,D.p,I.T,E.lW,_.uh,_.xY,C.Ro,Zr.t,l._Y,l.JL,l.sg,wt]}),a})();function kr(a,n){if(1&a&&(e.TgZ(0,"div",10),e._UZ(1,"card-row-item",11)(2,"card-row-item",12)(3,"card-row-item",13),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("value",null==t.employeeBankingAccountInfo?null:t.employeeBankingAccountInfo.bank),e.xp6(1),e.Q6J("value",null==t.employeeBankingAccountInfo?null:t.employeeBankingAccountInfo.accountNo),e.xp6(1),e.Q6J("value",null==t.employeeBankingAccountInfo?null:t.employeeBankingAccountInfo.startDate)}}function Nr(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"emp-banking-account-data-table",14),e.NdJ("afterDelete",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.afterDelete(i))}),e.qZA()}2&a&&e.Q6J("isMatPaginator",!0)("hideActions",!0)}function Mr(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,kr,4,3,"div",7),e.YNc(6,Nr,1,2,"emp-banking-account-data-table",8),e.qZA(),e.TgZ(7,"div",4)(8,"see-more-btn",9),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.employeeBankingAccountInfo)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("ngIf",!t.isTableView),e.xp6(1),e.Q6J("ngIf",t.isTableView),e.xp6(2),e.Q6J("Id",t.employeeInstanceId)("isTableView",t.isTableView)}}function Fr(a,n){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",15),2&a&&e.Q6J("rowNo",3)}let Or=(()=>{class a extends u.U{constructor(t){super(),this.employeeBankingAccountService=t,this.isLoaded=!1,this.isTableView=!1,this.employeeInstanceId=m.w.Person_Instance_ID,m.w.Person_Instance_ID$.subscribe(o=>{this.employeeInstanceId=o,this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()?(this.isLoaded=!1,this.getAll()):this.isLoaded=!0})}ngOnInit(){}getAll(){this.employeeBankingAccountInfo=null,this.employeeBankingAccountService.getAll(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(t.data.sort((o,i)=>new Date(i.from_Date).getTime()-new Date(o.from_Date).getTime()),this.employeeBankingAccountInfo=yt(t.data.slice(0,1))[0],this.isLoaded=!0):this.errorList(t?.message?.messages)})}openAddEditDialog(){this.dialogsService.addEditDialog(Jr).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAll())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAll())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(De))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-banking-account-data-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","bankingAccountData",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],["class","view-data-row-container",4,"ngIf"],[3,"isMatPaginator","hideActions","afterDelete",4,"ngIf"],[3,"Id","isTableView","toggleTable"],[1,"view-data-row-container"],["label","bank",1,"col-3","px-0",3,"value"],["label","accountNo",1,"col-3","px-0",3,"value"],["label","startDate","valueClass","col-6 text-muted",1,"col-3","px-0",3,"value"],[3,"isMatPaginator","hideActions","afterDelete"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,Mr,9,6,"div",0),e.YNc(1,Fr,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.O5,A.E,J.y,S,x,wt]}),a})();function Ur(a,n){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"app-emp-payroll-data-card"),e.qZA())}function Qr(a,n){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"app-emp-banking-account-data-card"),e.qZA())}let qr=(()=>{class a extends u.U{constructor(){super(),this.viewsManager=h.S}ngOnInit(){}onModulesChanged(){this.allowedSections=this.getCustomViewChildren(this.getParentViewName,h.S.emp_payments_info_tab)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["emp-payments-info-core"]],inputs:{icon:"icon"},features:[e.qOj],decls:9,vars:2,consts:[[1,"row"],[1,"col-12"],[1,"main-card-title","border-bottom"],["title","paymentsInfo","color","font-dark",1,"emp-card-title"],[1,"container-fluid","p-0","px-4"],[1,"row","mx-md-n2"],["class","col-12 p-0 px-md-2",4,"ngIf"],[1,"col-12","p-0","px-md-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-title",2),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"mat-card-content",4)(6,"div",5),e.YNc(7,Ur,2,0,"div",6),e.YNc(8,Qr,2,0,"div",6),e.qZA()()()()()),2&t&&(e.xp6(7),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_payroll_data_sec)),e.xp6(1),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_banking_account_data_sec)))},dependencies:[d.O5,I.T,y.a8,y.dn,y.n5,Ar,Or]}),a})(),Ee=(()=>{class a extends P.K{constructor(){super()}create(t){return this.post("Personnel/Employees/Create_PersonBenefit",t)}GetAll_PersonBenefit(t){return this.get("Personnel/Employees/GetAll_PersonBenefit",{params:{$expand:`${v.db.Bon_Benefit},${v.db.Core_Job_Title},${v.db.Core_Person_Instance}`,$filter:`person_Instance_ID  eq ${t}`}})}GetAll_LstBenefit(t){return this.get("Personnel/Employees/GetAll_LstBenefit",{params:{person_instance_id:t}})}Delete(t){return this.delete("Personnel/Employees/Delete_PersonBenefit",{params:t})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var Rr=r(44389);let Br=(()=>{class a extends u.U{constructor(t,o){super(),this.benefitsService=t,this.dialogRef=o,this.Person_Instance_ID=0,this.displayedColumns=["benefit","isSelected"],this.isLoaded=!1,this.hasUpdate=!1,this.getList=!1,this.submitted=!1,this.Person_Instance_ID=m.w.Person_Instance_ID}ngOnInit(){this.form=this.fb.group({benefitIds:[null,[l.kI.required]]}),this.dialogRef.backdropClick().subscribe(t=>{this.onCloseDialog()}),this.Person_Instance_ID&&this.getAll(),m.w.Person_Instance_ID$.subscribe(t=>{t!=this.Person_Instance_ID&&this.getAll(),this.Person_Instance_ID=t})}onCloseDialog(){this.dialogRef.close(this.hasUpdate)}get formCtrls(){return this.form.controls}getAll(){this.benefitsService.GetAll_LstBenefit(this.Person_Instance_ID).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success&&(t.data.map(o=>{o.benefit=(0,c._f)(o.ar_Name,o.en_Name),o.benefitType=(0,c._f)(o.bon_Benefit_Type?.ar_Name,o.bon_Benefit_Type?.en_Name),o.isSelected=o.isEmpBenfit}),this.dataSource=new g.by(t.data),this.isLoaded=!0)})}getSelectedItem(t){this.formCtrls.benefitIds.setValue(t.map(o=>o.id)??null)}submit(){this.submitted=!0,this.getList=!1,this.form.valid&&this.create({PersonInstanceId:this.Person_Instance_ID,BenfitIds:this.formCtrls.benefitIds.value})}create(t){this.showLoading(),this.benefitsService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canRemoveFromIndex","newEmployeeBenefitAdded"),this.getList=!0,this.hasUpdate=!0):this.errorList(o?.message?.messages),this.hideLoading()})}afterDelete(t){t&&(this.hasUpdate=!0)}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Ee),e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-benefits-dialog"]],features:[e.qOj],decls:10,vars:5,consts:[["mat-dialog-title","",1,"primary-color","font-size-20","m-0"],["title","benefit",1,"d-inline-block","mtop-5"],["mat-icon-button","",1,"float-right","mb-1","mr-1",3,"click"],[1,"pi","pi-times"],[1,"container-fluid","mx-0"],["dialogContainer",""],[3,"isLoaded","dataSource","displayedColumns","splitTableNumber","hasPaginator","selectedItems"],[1,"emp-form-btns-float"],["label","save",3,"onClick"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h4"),e._UZ(2,"page-title",1),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return o.onCloseDialog()}),e._UZ(4,"i",3),e.qZA()(),e.TgZ(5,"mat-dialog-content",4,5)(7,"app-split-table",6),e.NdJ("selectedItems",function(s){return o.getSelectedItem(s)}),e.qZA(),e.TgZ(8,"div",7)(9,"submit-btn",8),e.NdJ("onClick",function(){return o.submit()}),e.qZA()()()),2&t&&(e.xp6(7),e.Q6J("isLoaded",o.isLoaded)("dataSource",o.dataSource)("displayedColumns",o.displayedColumns)("splitTableNumber",2)("hasPaginator",!0))},dependencies:[D.p,I.T,Rr.M,E.lW,_.uh,_.xY]}),a})();function Vr(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-material-table",1),e.NdJ("deleteRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(i))}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("actions",t.rowFunctions)("isDialogSize",!0)("showFilter",!1)("showFirstLastButtons",!1)("showSpaceTop",!1)("showPaginator",!1)}}let Yr=(()=>{class a extends u.U{constructor(t){super(),this.benefitsService=t,this.showLess=!1,this.afterDelete=new e.vpe,this.mandatoryColomns=["benefit","actions"],this.optionalColomns=[],this.employeeInstanceId=0,this.isLoaded=!1,this.employeeInstanceId=m.w.Person_Instance_ID,this.rowFunctions=this.getSubRowFunctions(this.getParentViewName,h.S.emp_benefits_sec)}ngOnChanges(t){t.hasUpdate&&t.hasUpdate.currentValue&&this.employeeInstanceId>0&&this.getAll(),t.showLess&&(this.dataSource=new g.by(t.showLess.currentValue?this.list?.slice(0,2):this.list))}onChangeBusinessAndCompanyId(){this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()?this.getAll():this.isLoaded=!0}getAll(){this.benefitsService.GetAll_PersonBenefit(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(t.data.map(o=>{o.benefit=(0,c._f)(o.bon_Benefit?.ar_Name,o.bon_Benefit?.en_Name),o.jobTitle=(0,c._f)(o.core_Job_Title?.ar_Name,o.core_Job_Title?.en_Name)}),this.list=t.data,this.dataSource=new g.by(this.showLess?this.list?.slice(0,2):this.list)):this.errorList(t?.message?.messages),this.isLoaded=!0})}onDelete(t){this.deleteDialog(t.benefit).subscribe(i=>{i&&this.delete(t)})}delete(t){let o={personID:this.employeeInstanceId,BenefitId:t.benefit_ID};this.showLoading(),this.benefitsService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("employeeBenefitRemoved"),this.afterDelete.emit(t),this.getAll()):this.errorList(i?.message?.messages),this.hideLoading()})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Ee))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-benefits-table"]],inputs:{hasUpdate:"hasUpdate",showLess:"showLess"},outputs:{afterDelete:"afterDelete"},features:[e.qOj,e.TTD],decls:1,vars:1,consts:[["class","table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","showFirstLastButtons","showSpaceTop","showPaginator","deleteRow",4,"ngIf"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","actions","isDialogSize","showFilter","showFirstLastButtons","showSpaceTop","showPaginator","deleteRow"]],template:function(t,o){1&t&&e.YNc(0,Vr,1,10,"app-material-table",0),2&t&&e.Q6J("ngIf",o.employeeInstanceId>0)},dependencies:[d.O5,w.I]}),a})();function Gr(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"card-header",5),e.NdJ("onClickIcon",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openAddEditDialog())}),e.qZA()(),e.TgZ(4,"div",6)(5,"app-emp-benefits-table",7),e.NdJ("afterDelete",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.afterDelete(i))}),e.qZA()(),e.TgZ(6,"div",4)(7,"see-more-btn",8),e.NdJ("toggleTable",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.toggleTable())}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("isEdit",t.benefits.length>0)("isLoaded",t.isLoaded),e.xp6(2),e.Q6J("showLess",!t.isTableView),e.xp6(2),e.Q6J("Id",t.employeeInstanceId)("isTableView",t.isTableView)}}function jr(a,n){1&a&&e._UZ(0,"app-employee-profile-card-skeleton",9),2&a&&e.Q6J("rowNo",5)}let zr=(()=>{class a extends u.U{constructor(t){super(),this.benefitsService=t,this.employeeInstanceId=0,this.isLoaded=!1,this.isTableView=!1,this.benefits=[],this.employeeInstanceId=m.w.Person_Instance_ID,m.w.Person_Instance_ID$.subscribe(o=>{this.employeeInstanceId=o,this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()&&(this.isLoaded=!1,this.getAll())})}ngOnInit(){}onChangeBusinessAndCompanyId(){this.employeeInstanceId>0&&this.checkNoBusinessOrCompany()?this.getAll():this.isLoaded=!0}getAll(){this.benefitsService.GetAll_PersonBenefit(this.employeeInstanceId).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?this.benefits=t.data:this.errorList(t?.message?.messages),this.isLoaded=!0})}openAddEditDialog(){this.dialogsService.addEditDialog(Br).afterClosed().subscribe(t=>{t&&(this.isLoaded=!1,this.getAll())})}afterDelete(t){t&&(this.isLoaded=!1,this.getAll())}toggleTable(){this.isTableView=!this.isTableView}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Ee))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-emp-benefits-card"]],features:[e.qOj],decls:3,vars:2,consts:[["class","card-view border-bottom",4,"ngIf","ngIfElse"],["notLoaded",""],[1,"card-view","border-bottom"],[1,"row","mt-2"],[1,"col-lg-2","col-12"],["cardTitle","benefit",1,"side_title",3,"isEdit","isLoaded","onClickIcon"],[1,"col-lg-8","col-12"],[3,"showLess","afterDelete"],[3,"Id","isTableView","toggleTable"],[3,"rowNo"]],template:function(t,o){if(1&t&&(e.YNc(0,Gr,8,5,"div",0),e.YNc(1,jr,1,1,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.isLoaded)("ngIfElse",i)}},dependencies:[d.O5,A.E,J.y,S,Yr]}),a})();function Hr(a,n){1&a&&(e.TgZ(0,"div",7),e._UZ(1,"app-emp-benefits-card"),e.qZA())}let Wr=(()=>{class a extends u.U{constructor(){super(),this.viewsManager=h.S}ngOnInit(){}onModulesChanged(){this.allowedSections=this.getCustomViewChildren(this.getParentViewName,h.S.emp_balances_tab)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-compensation-core"]],inputs:{icon:"icon"},features:[e.qOj],decls:8,vars:1,consts:[[1,"row"],[1,"col-12"],[1,"main-card-title","border-bottom"],["title","compensationBenefits","color","font-dark",1,"emp-card-title"],[1,"container-fluid","p-0","px-4"],[1,"row","mx-md-n2"],["class","col-12 p-0 px-md-2",4,"ngIf"],[1,"col-12","p-0","px-md-2"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-title",2),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"mat-card-content",4)(6,"div",5),e.YNc(7,Hr,2,0,"div",6),e.qZA()()()()()),2&t&&(e.xp6(7),e.Q6J("ngIf",o.isViewAllowed(o.viewsManager.emp_benefits_sec)))},dependencies:[d.O5,I.T,y.a8,y.dn,y.n5,zr]}),a})();function $r(a,n){if(1&a&&e._UZ(0,"p-image",21),2&a){const t=e.oxw(2);e.Q6J("src",(null==t.employee.img?null:t.employee.img.length)>1?t.fileService.preview(null==t.employee?null:t.employee.img):t.assets.user_avatar_rounded)("preview",!0)("height",t.deviceService.isMobile()?"40":"80")("width",t.deviceService.isMobile()?"40":"80")}}function Kr(a,n){if(1&a&&(e.TgZ(0,"span",22),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.hij(" ",null==t.StatusPosition?null:t.StatusPosition.job_name," ")}}function Xr(a,n){1&a&&e._UZ(0,"p-skeleton",23)}function ep(a,n){if(1&a&&(e.TgZ(0,"div",14),e.YNc(1,$r,1,4,"p-image",15),e.TgZ(2,"div",16)(3,"h4",17)(4,"span",18),e._uU(5),e.qZA()(),e.YNc(6,Kr,2,1,"span",19),e.TgZ(7,"span"),e.YNc(8,Xr,1,0,"p-skeleton",20),e.qZA()()()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.employee),e.xp6(4),e.hij(" ",t.msgTranslate(null==t.employee||null==t.employee.person?null:t.employee.person.ar_Name,null==t.employee||null==t.employee.person?null:t.employee.person.en_Name)," "),e.xp6(1),e.Q6J("ngIf",t.isEmpDataLoaded),e.xp6(2),e.Q6J("ngIf",!t.isEmpDataLoaded&&t.employee)}}function tp(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-add-new-btn",24),e.NdJ("onClick",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.onAddNew())}),e.qZA()}if(2&a){const t=e.oxw();e.MGl("url","/personnel-setup/",t.moduleId,"/employees/add"),e.Q6J("params",t.parentParam)}}function op(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"div",27)(1,"emp-general-info-core",28),e.NdJ("changeEmployeeId",function(i){e.CHM(t);const s=e.oxw(3);return e.KtG(s.changeEmployeeId(i))}),e.qZA()()}if(2&a){const t=e.oxw().$implicit;e.Q6J("id",t.viewName),e.xp6(1),e.Q6J("icon",t.icon)}}function ap(a,n){if(1&a&&(e.TgZ(0,"div",27),e._UZ(1,"emp-personal-info-core",29),e.qZA()),2&a){const t=e.oxw().$implicit;e.Q6J("id",t.viewName),e.xp6(1),e.Q6J("icon",t.icon)}}function ip(a,n){if(1&a&&(e.TgZ(0,"div",27),e._UZ(1,"emp-career-core",29),e.qZA()),2&a){const t=e.oxw().$implicit;e.Q6J("id",t.viewName),e.xp6(1),e.Q6J("icon",t.icon)}}function np(a,n){if(1&a&&(e.TgZ(0,"div",27),e._UZ(1,"employement-information-core",29),e.qZA()),2&a){const t=e.oxw().$implicit;e.Q6J("id",t.viewName),e.xp6(1),e.Q6J("icon",t.icon)}}function sp(a,n){if(1&a&&(e.TgZ(0,"div",27),e._UZ(1,"employee-balances-core",29),e.qZA()),2&a){const t=e.oxw().$implicit;e.Q6J("id",t.viewName),e.xp6(1),e.Q6J("icon",t.icon)}}function lp(a,n){if(1&a&&(e.TgZ(0,"div",27),e._UZ(1,"emp-sap-integration-core",29),e.qZA()),2&a){const t=e.oxw().$implicit;e.Q6J("id",t.viewName),e.xp6(1),e.Q6J("icon",t.icon)}}function rp(a,n){if(1&a&&(e.TgZ(0,"div",27),e._UZ(1,"emp-payments-info-core",29),e.qZA()),2&a){const t=e.oxw().$implicit;e.Q6J("id",t.viewName),e.xp6(1),e.Q6J("icon",t.icon)}}function pp(a,n){if(1&a&&(e.TgZ(0,"div",27),e._UZ(1,"app-compensation-core"),e.qZA()),2&a){const t=e.oxw().$implicit;e.Q6J("id",t.viewName)}}function cp(a,n){if(1&a&&(e.ynx(0),e.YNc(1,op,2,2,"div",26),e.YNc(2,ap,2,2,"div",26),e.YNc(3,ip,2,2,"div",26),e.YNc(4,np,2,2,"div",26),e.YNc(5,sp,2,2,"div",26),e.YNc(6,lp,2,2,"div",26),e.YNc(7,rp,2,2,"div",26),e.YNc(8,pp,2,1,"div",26),e.BQk()),2&a){const t=n.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.viewName==o.viewsManager.emp_general_info_tab),e.xp6(1),e.Q6J("ngIf",t.viewName==o.viewsManager.emp_personal_info_tab),e.xp6(1),e.Q6J("ngIf",t.viewName==o.viewsManager.emp_career_tab),e.xp6(1),e.Q6J("ngIf",t.viewName==o.viewsManager.employment_info_tab),e.xp6(1),e.Q6J("ngIf",t.viewName==o.viewsManager.emp_balances_tab),e.xp6(1),e.Q6J("ngIf",t.viewName==o.viewsManager.emp_sap_integration_tab),e.xp6(1),e.Q6J("ngIf",t.viewName==o.viewsManager.emp_payments_info_tab),e.xp6(1),e.Q6J("ngIf",t.viewName==o.viewsManager.employee_benefits_tab)}}function dp(a,n){if(1&a&&(e.ynx(0),e.YNc(1,cp,9,8,"ng-container",25),e.BQk()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.customViews)}}function mp(a,n){1&a&&e._UZ(0,"mat-divider")}function up(a,n){if(1&a&&(e.TgZ(0,"div",35),e._UZ(1,"app-employee-profile-card-skeleton",36),e.YNc(2,mp,1,0,"mat-divider",37),e.qZA()),2&a){const t=n.last;e.xp6(1),e.Q6J("rowNo",5),e.xp6(1),e.Q6J("ngIf",!t)}}const Dt=function(){return[1,2]};function _p(a,n){1&a&&(e.TgZ(0,"div",31)(1,"mat-card")(2,"mat-card-title",32),e._UZ(3,"p-skeleton",33),e.qZA(),e.TgZ(4,"mat-card-content")(5,"div",4),e.YNc(6,up,3,2,"div",34),e.qZA()()()()),2&a&&(e.xp6(6),e.Q6J("ngForOf",e.DdM(1,Dt)))}function gp(a,n){1&a&&(e.TgZ(0,"div",4),e.YNc(1,_p,7,2,"div",30),e.qZA()),2&a&&(e.xp6(1),e.Q6J("ngForOf",e.DdM(1,Dt)))}let Et=(()=>{class a extends u.U{constructor(t,o,i){super(),this.dialogRef=t,this.empGeneralInfoService=o,this.deviceService=i,this.employeeId=0,this.viewsManager=h.S,this.isEmpDataLoaded=!1,this.activeTab=0,this.isEdit=!1,this.activatedRoute.params.subscribe(s=>{this.employeeId=Number(s.employeeId??0),this.employeeId>0&&(this.isEdit=!0),m.w.Person_Instance_ID$.next(null),m.w.employeeId$.next(this.employeeId),this.onChangeBusinessAndCompanyId()})}ngOnInit(){this.empGeneralInfoService.employee$.subscribe(t=>{this.employee=t}),m.w.employeeStatusPosition$.subscribe(t=>{this.StatusPosition=t,t&&(this.isEmpDataLoaded=!0)})}onChangeBusinessAndCompanyId(){this.empGeneralInfoService.employee$.next(null),this.checkNoBusinessOrCompany()&&this.employeeId>0&&this.empGeneralInfoService.getEmployeeShared(this.employeeId)}onAddNew(){this.ngOnDestroy()}changeEmployeeId(t){this.employeeId=t}ngOnDestroy(){this.empGeneralInfoService.cancelRequest$.next(),this.empGeneralInfoService.cancelRequest$.complete(),m.w.Person_Instance_ID$.next(null),m.w.employeeId$.next(null),this.empGeneralInfoService.employee$.next(null)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.so),e.Y36(m.w),e.Y36(Zt.x0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-add-employee"]],features:[e.qOj],decls:18,vars:19,consts:[[1,"add-employee-container"],[1,"rounded-0"],[2,"margin","0 20px"],["addTitle","",3,"id","parentTitle","parentTitleLink","title","parentLinkParams"],[1,"row"],[1,"col-12","col-sm-7"],["class","media user-box d-flex align-items-center",4,"ngIf"],[1,"col-12","col-sm-5","d-flex","justify-content-end","align-items-center"],[3,"url","params","onClick",4,"ngIf"],[3,"url","params"],[3,"tabsToView","noOfLoadingItems","activeTab"],["id","top-tools",1,"pb-4","pl-4","pr-4","pt-2"],[4,"ngIf","ngIfElse"],["loading",""],[1,"media","user-box","d-flex","align-items-center"],["imageClass","users-avatar-shadow avatar","alt","User Profile Image",3,"src","preview","height","width",4,"ngIf"],[1,"media-body","ml-3"],[1,"mb-1"],[1,"users-view-name"],["class","text-muted user-job",4,"ngIf"],["width","8rem","height",".5rem",4,"ngIf"],["imageClass","users-avatar-shadow avatar","alt","User Profile Image",3,"src","preview","height","width"],[1,"text-muted","user-job"],["width","8rem","height",".5rem"],[3,"url","params","onClick"],[4,"ngFor","ngForOf"],["class","mbottom-10",3,"id",4,"ngIf"],[1,"mbottom-10",3,"id"],[3,"icon","changeEmployeeId"],[3,"icon"],["class","col-12 mb-3",4,"ngFor","ngForOf"],[1,"col-12","mb-3"],[1,"border-bottom","pb-2"],["width","7rem","styleClass","p-mb-2","borderRadius","10px"],["class","col-12 mb-2",4,"ngFor","ngForOf"],[1,"col-12","mb-2"],[3,"rowNo"],[4,"ngIf"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"mat-card",1)(2,"div",2),e._UZ(3,"page-title",3),e.ALo(4,"translate"),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-card-content")(7,"div",4)(8,"div",5),e.YNc(9,ep,9,4,"div",6),e.qZA(),e.TgZ(10,"div",7),e.YNc(11,tp,1,2,"app-add-new-btn",8),e._UZ(12,"app-back-btn",9),e.qZA()()()(),e._UZ(13,"app-fixed-header-tabs",10),e.TgZ(14,"div",11),e.YNc(15,dp,2,1,"ng-container",12),e.YNc(16,gp,2,2,"ng-template",null,13,e.W1O),e.qZA()()),2&t){const i=e.MAs(17);e.xp6(3),e.hYB("parentTitle","",e.lcZ(4,15,"personnel")," / ",e.lcZ(5,17,"employees"),""),e.MGl("parentTitleLink","/personnel-setup/",o.moduleId,"/employees"),e.Q6J("id",0)("title",o.isEdit?"edit":"add")("parentLinkParams",o.pageParams),e.xp6(6),e.Q6J("ngIf",o.employee),e.xp6(2),e.Q6J("ngIf",o.employeeId>0),e.xp6(1),e.MGl("url","/personnel-setup/",o.moduleId,"/employees/index"),e.Q6J("params",o.pageParams),e.xp6(1),e.Q6J("tabsToView",o.customViews)("noOfLoadingItems",8)("activeTab",o.activeTab),e.xp6(2),e.Q6J("ngIf",o.customViews)("ngIfElse",i)}},dependencies:[d.sg,d.O5,Ae.a,Lt.J,I.T,A.E,Pt.H,y.a8,y.dn,y.n5,q.d,Jt.E,$.O,ba,qa,ei,cl,Al,pr,qr,Wr,L.X$],styles:[".divider[_ngcontent-%COMP%]{margin:40px 0}.page-user-profile[_ngcontent-%COMP%]{border-bottom:1px solid #ddd}mat-nav-list[_ngcontent-%COMP%]{padding:0}mat-nav-list[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{display:inline-block;height:auto;width:auto;color:#2f8be6}.user-timeline-image[_ngcontent-%COMP%]{filter:brightness(.6);width:100%;height:100%}.title-overlay[_ngcontent-%COMP%]{background-color:inherit;display:flex;flex-wrap:nowrap;align-items:center;justify-content:center;height:100%;position:absolute;z-index:1;inset:0;color:#fff;font-size:50px;font-weight:500}.plicy-list[_ngcontent-%COMP%]{z-index:1;top:11px;left:11px}@media (max-width: 580px){  .add-employee-container .nav-fixed .mat-tab-header{width:calc(var(--custom-width) - 10px)!important}}.add-employee-container[_ngcontent-%COMP%]{margin:0 -30px}.add-employee-container[_ngcontent-%COMP%]   .rounded-0[_ngcontent-%COMP%]{border-radius:0!important}.add-employee-container[_ngcontent-%COMP%]   .emp-header-card[_ngcontent-%COMP%]{padding:.375rem .375rem .375rem 2.25rem}"]}),a})();var hp=r(52614),fp=r(61894),X=r(92510),bp=r(72986),St=r(29341),Q=r(73978);const Cp=[{name:(0,c._f)("\u0643\u0648\u062f \u0627\u0644\u0645\u0648\u0638\u0641","Employee Code"),id:"Employee_Code",dataType:Q.n.string},{name:(0,c._f)("\u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0638\u0641 \u0628\u0627\u0644\u0639\u0631\u0628\u064a","Employee Arabic Name"),id:"Employee_Ar_Name",dataType:Q.n.string},{name:(0,c._f)("\u0627\u0633\u0645 \u0627\u0644\u0645\u0648\u0638\u0641 \u0628\u0627\u0644\u0627\u0646\u062c\u0644\u064a\u0632\u064a","Employee English Name"),id:"Employee_En_Name",dataType:Q.n.string},{name:(0,c._f)("\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0642\u0648\u0645\u064a","National id"),id:"NationalId",dataType:Q.n.string},{name:(0,c._f)("\u0627\u0633\u0645 \u0627\u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u0639\u0631\u0628\u064a","Status Arabic Name"),id:"Status_Ar_Name",dataType:Q.n.string},{name:(0,c._f)("\u0627\u0633\u0645 \u0627\u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u0627\u0646\u062c\u0644\u064a\u0632\u064a","Status English Name"),id:"Status_En_Name",dataType:Q.n.string},{name:(0,c._f)("Status Property Arabic Name","Status Property Arabic Name"),id:"Status_property_Ar_Name",dataType:Q.n.string},{name:(0,c._f)("Status Property English Name","Status Property English Name"),id:"Status_property_En_Name",dataType:Q.n.string},{name:(0,c._f)("\u0627\u0644\u0647\u064a\u0643\u0644 \u0627\u0644\u062a\u0646\u0638\u064a\u0645\u064a","Organization"),id:"Organization",dataType:Q.n.string},{name:(0,c._f)("\u0627\u0644\u0648\u0638\u064a\u0641\u0629","Job Title"),id:"Job_Title",dataType:Q.n.string}];var yp=r(20408),Ip=r(94891),vp=r(49189),Tp=r(60544),wp=r(76411),Dp=r(24369),xt=r(29721),Ep=r(62160),Sp=r(91508);let xp=(()=>{class a extends u.U{constructor(){super(),this.onChange=new e.vpe}ngOnInit(){this.form=this.fb.group({Person_Instance_ID:[null],name:[null],orgId:[null],jobId:[null]}),this.currentFilter&&this.form.patchValue(this.currentFilter,{emitEvent:!1})}get formCtrls(){return this.form.controls}getConditionString(t){return[t.orgId?this.orgFilter(t.orgId):"",t.Person_Instance_ID?this.Person_Instance_Filter(t.Person_Instance_ID):"",t.jobId?this.jobFilter(t.jobId):"",t.name?this.nameFilter(t.name):""].filter(Boolean).join(" and ")}Person_Instance_Filter(t){return`Person_Instance_ID in (${t.toString()})`}orgFilter(t){return`OrgId in (${t.toString()})`}jobFilter(t){return`Job_Title_ID in (${t.toString()})`}nameFilter(t){return`contains(Employee_En_Name,'${t??""}') or contains(Employee_Ar_Name,'${t??""}')`}ngOnDestroy(){const t=this.getConditionString(this.form.value);this.onChange.emit({conditionString:t,groups:this.form.value})}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["employee-simple-search"]],inputs:{currentFilter:"currentFilter"},outputs:{onChange:"onChange"},features:[e.qOj],decls:10,vars:11,consts:[[3,"formGroup"],[1,"row"],[1,"col-md-6","col-lg-3","col-12"],["label","name",3,"control","disabled"],[3,"control","multi"],[3,"control","filter","multi"],[3,"control","multi","filter"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div",2),e._UZ(3,"app-input",3),e.qZA(),e.TgZ(4,"div",2),e._UZ(5,"app-employee-dropdown",4),e.qZA(),e.TgZ(6,"div",2),e._UZ(7,"app-organization-current-structure-dropdown",5),e.qZA(),e.TgZ(8,"div",2),e._UZ(9,"app-job-title-dropdown",6),e.qZA()()()),2&t&&(e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.name)("disabled",(null==o.formCtrls.Person_Instance_ID.value?null:o.formCtrls.Person_Instance_ID.value.length)>0),e.xp6(2),e.Q6J("control",o.formCtrls.Person_Instance_ID)("multi",!0),e.xp6(2),e.Q6J("control",o.formCtrls.orgId)("filter",!0)("multi",!0),e.xp6(2),e.Q6J("control",o.formCtrls.jobId)("multi",!0)("filter",!0))},dependencies:[F.a,Ke.J,Ep.W,Sp.a,l._Y,l.JL,l.sg]}),a})();const Ap=["dialogTemplate"];function Zp(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"app-simple-advanced-search",7),e.NdJ("advancedResults",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.getAdvanced(i))}),e.ynx(1,8),e.TgZ(2,"employee-simple-search",9),e.NdJ("onChange",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.getSimple(i))}),e.qZA(),e.BQk(),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("currentFilter",t.advancedGroups)("ope",t.advancedOpe)("AdvancedColumns",t.AdvancedColumns),e.xp6(2),e.Q6J("currentFilter",t.simpleGroups)}}let Lp=(()=>{class a extends u.U{constructor(t,o,i){super(),this.employeesService=t,this.dashboardService=o,this.fileService=i,this.mandatoryColomns=["Ser","code","en_Name","ar_Name","actions"],this.optionalColomns=["jobTitleName","organization","email","status","statusProperty","address","contact","isActive"],this.dialogRef=null,this.isLoaded=!1,this.mergingTableColumn={isMerge:!0,columnImgName:"img",columnTextName:"en_Name"},this.usingSimple=!1,this.usingAdvanced=!1}ngOnInit(){this.getAllDashboardService(),this.AdvancedColumns=Cp}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,o){let s;this.dataSource=new g.by(null),this.isLoaded=!1,this.removePageParams(),this.page.pageIndex=t,o&&(this.page.pageSize=o),s=this.usingSimple?this.simpleCondition:this.usingAdvanced?this.advancedCondition:null,this.employeesService.getListCard({PageNumber:t,pageSize:this.page.pageSize},s).pipe(this.cancelRequest()).subscribe(f=>{if(1==f.message.messageType){if(0==f.data.length&&t>1)return void this.getList(this.prevPage);this.dataSource=new g.by((0,hp.A)(f.data)),this.isLoaded=!0,this.page.length=f.meta.totalItemCount,this.page.meta=f.meta}else this.errorList(f?.message?.messages)})}onDelete(t){let o=this.msgTranslate(t.ar_Name,t.en_Name);this.deleteDialog(o).subscribe(i=>{i&&this.delete(t)})}delete(t){this.showLoading(),this.employeesService.Delete(t.id).subscribe(o=>{1==o.message.messageType?(this.deleteSuccessfullyMsg("employeeRemoved"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(o?.message?.messages),this.hideLoading()})}getAllDashboardService(){this.showLoading();let t={...this.businessCompanyParams,$filter:"Service_ID eq 8"};this.dashboardService.getAll(t).pipe(this.cancelRequest()).subscribe(o=>{o.message.messageType==p.u.Success?this.dashboardList=(0,fp.KU)(o.data):this.errorList(o.message?.messages),this.hideLoading()})}onChangeFilterDrop(t){t==X.U.simple?this.openSearchDialog(X.U.simple):t==X.U.advanced?this.openSearchDialog(X.U.advanced):(this.usingSimple=!1,this.usingAdvanced=!1,this.advancedGroups=null,this.simpleGroups=null,this.getList(this.firstPage))}getSimple(t){this.simpleCondition=t.conditionString,this.simpleGroups=t.groups}getAdvanced(t){this.advancedCondition=t.conditionString,this.advancedGroups=t.groups,this.advancedOpe=t.ope}openSearchDialog(t){this.dialogRef&&this.dialogRef.close(),this.dialogRef=this.dialogsService.addEditDialog(this.dialogTemplate,t,{width:"60%"}),this.dialogRef.afterClosed().pipe((0,bp.q)(1)).subscribe(o=>{o?.isSimple?(this.usingSimple=!0,this.getList(this.firstPage,this.page.pageSize)):0==o?.isSimple?(this.usingAdvanced=!0,this.getList(this.firstPage,this.page.pageSize)):(this.usingSimple=!1,this.usingAdvanced=!1,this.resetDropdown=null,this.advancedGroups=null,this.simpleGroups=null,(this.simpleCondition||this.advancedCondition)&&this.getList(this.firstPage))})}globalFunctionActions(t){t.viewName==h.S.employees_upload&&this.openUploadDialog()}openUploadDialog(){this.dialogsService.uploadDownloadDialog({uploadPath:St.Z.upload_employees,downloadPath:St.Z.download_employees,name:"employees"},{}).afterClosed().subscribe(o=>{})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(yp.M),e.Y36(Ip.s),e.Y36(vp.I))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employees-index"]],viewQuery:function(t,o){if(1&t&&e.Gf(Ap,5),2&t){let i;e.iGM(i=e.CRH())&&(o.dialogTemplate=i.first)}},features:[e.qOj],decls:9,vars:18,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","employees","parentTitle","personnel","TitleHasGlobalFunc","",3,"globalFunctions","action"],[1,"index-card"],[3,"isRowClickable","isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","exportService","mergeImgWithName","showSearchDropdown","searchDropdownList","selectedValueInSearchDropdown","selectSearchItem","onChangePage","deleteRow"],["dialogTemplate",""],[3,"title"],[3,"serviceId","moduleId"],[3,"currentFilter","ope","AdvancedColumns","advancedResults"],[1,"simple"],[3,"currentFilter","onChange"]],template:function(t,o){1&t&&(e.TgZ(0,"mat-card-title",0)(1,"page-title",1),e.NdJ("action",function(s){return o.globalFunctionActions(s)}),e.qZA()(),e.TgZ(2,"mat-card",2)(3,"app-material-table",3),e.NdJ("selectSearchItem",function(s){return o.onChangeFilterDrop(s)})("onChangePage",function(s){return o.getList(s.pageIndex+1,s.pageSize)})("deleteRow",function(s){return o.onDelete(s)}),e.qZA()(),e.YNc(4,Zp,3,4,"ng-template",null,4,e.W1O),e.TgZ(6,"side-helping-menu",5),e.ALo(7,"translate"),e._UZ(8,"app-dashboard-display",6),e.qZA()),2&t&&(e.xp6(1),e.Q6J("globalFunctions",o.globalFunctions),e.xp6(2),e.Q6J("isRowClickable",!1)("isLoaded",o.isLoaded)("dataSource",o.dataSource)("mandatoryColomns",o.mandatoryColomns)("optionalColomns",o.optionalColomns)("page",o.page)("actions",o.rowFunctions)("exportService",o.employeesService)("mergeImgWithName",o.mergingTableColumn)("showSearchDropdown",!0)("searchDropdownList",o.simpleAdvancedSearch)("selectedValueInSearchDropdown",o.resetDropdown),e.xp6(3),e.s9C("title",e.lcZ(7,16,"Dashboard")),e.xp6(2),e.Q6J("serviceId",o.getCurrentServiceId())("moduleId",o.moduleId))},dependencies:[w.I,I.T,Tp.c,wp.b,Dp.c,xt.X,y.a8,y.n5,xp,L.X$],styles:[".p-panel .p-panel-content{border:none}img[_ngcontent-%COMP%]{width:70px;height:70px;border-radius:50%}"]}),a})();var Pp=r(21902),Jp=r(16354),kp=r(23644);function Np(a,n){if(1&a){const t=e.EpF();e.ynx(0),e._UZ(1,"mat-divider"),e.TgZ(2,"app-material-table",18),e.NdJ("onChangePage",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.getList(i.pageIndex+1,i.pageSize))})("deleteRow",function(i){e.CHM(t);const s=e.oxw();return e.KtG(s.onDelete(i))}),e.qZA(),e.BQk()}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("page",t.page)("actions",t.rowFunctions)}}let Mp=(()=>{class a extends u.U{constructor(t,o){super(),this.employeeWorkScheduleService=t,this.assignPlanService=o,this.submitted=!1,this.mandatoryColomns=["Ser","employee","plan","startDate","toDate","actions"],this.isLoaded=!0,this.optionalColomns=[]}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],policyGroupId:[null,[l.kI.required]],plan_ID:[null,[l.kI.required]],employeeIds:[null,[l.kI.required]],fromDate:[null,[l.kI.required]],is_Apply_Rules:[null]}),this.formCtrls.plan_ID.valueChanges.subscribe(t=>{t>0&&this.getList(this.firstPage)})}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null))}get formCtrls(){return this.form.controls}getList(t,o){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null));let i=this.formCtrls.plan_ID.value;i>0&&(this.isLoaded=!1,this.page.pageIndex=t,o&&(this.page.pageSize=o),this.assignPlanService.getList(i,{PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(f=>{f.message.messageType==p.u.Success?(this.dataSource=new g.by(je(f.data)),this.isLoaded=!0,this.page.length=f.meta.totalItemCount,this.page.meta=f.meta):this.errorList(f?.message?.messages)}))}submit(){this.submitted=!0,this.form.valid&&this.create({EmployeeData:{Plan_ID:this.formCtrls.plan_ID.value,FromDate:this.formCtrls.fromDate.value,Is_Apply_Rules:this.formCtrls.is_Apply_Rules.value??!1},SelectedEmployeeIDs:this.formCtrls.employeeIds.value})}create(t){this.showLoading(),this.assignPlanService.create(t).subscribe(o=>{o?.message?.messageType==p.u.Success?(this.clearForm(),this.addSuccessfullyMsg("canRemoveFromIndex","newAssignPlanToEmployeeAdded"),this.getList(this.currentPage)):this.errorList(o?.message?.messages),this.hideLoading()})}onDelete(t){this.deleteDialog(t.employee+" - "+t.plan).subscribe(i=>{i&&this.delete(t)})}delete(t){let o={Person_Instance_ID:t.person_Instance_ID,Plan_ID:t.plan_ID,FromDate:t.fromDate,ToDate:t.toDateOriginal};this.showLoading(),this.employeeWorkScheduleService.Delete(o).subscribe(i=>{i.message.messageType==p.u.Success?(this.deleteSuccessfullyMsg("assignPlanToEmployeeRemoved"),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(i?.message?.messages),this.hideLoading()})}clearForm(){this.formCtrls.employeeIds.reset(),this.formCtrls.fromDate.reset(),this.formCtrls.is_Apply_Rules.reset(),this.submitted=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(W.c),e.Y36(Pp.X))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-assign-plan"]],features:[e.qOj],decls:26,vars:28,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","assignPlan",3,"parentTitle","parentTitleLink"],[3,"url","params"],[1,"row"],[1,"col-12"],[1,"form-card"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-4","col-12"],["label","plan",3,"control","submitted","filter"],["label","fromDate",3,"control","submitted"],[3,"control","planCtrl","fromDateCtrl","submitted","filter","multi"],[3,"control","policyControl","submitted","filter","multi"],[1,"col-md-8","col-12","ptop-15","pbottom-15"],["label","is_Apply_Rules",3,"control"],["align","end"],[3,"onClick"],[4,"ngIf"],[1,"table-in-forms",3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","onChangePage","deleteRow"]],template:function(t,o){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.ALo(2,"translate"),e.ALo(3,"translate"),e._UZ(4,"app-back-btn",2),e.qZA(),e.TgZ(5,"div",3)(6,"div",4)(7,"mat-card",5)(8,"mat-card-content",6)(9,"div",3)(10,"div",4)(11,"form",7)(12,"div",3)(13,"div",8),e._UZ(14,"app-attendance-plan-dropdown",9),e.qZA(),e.TgZ(15,"div",8),e._UZ(16,"app-datepicker",10),e.qZA(),e.TgZ(17,"div",8),e._UZ(18,"policy-groups-by-att-plan-dropdown",11),e.qZA(),e.TgZ(19,"div",8),e._UZ(20,"employeeBy-multi-policy-dropdown",12),e.qZA(),e.TgZ(21,"div",13),e._UZ(22,"app-check-box",14),e.qZA()()()()()(),e.TgZ(23,"mat-card-actions",15)(24,"submit-btn",16),e.NdJ("onClick",function(){return o.submit()}),e.qZA()(),e.YNc(25,Np,3,6,"ng-container",17),e.qZA()()()),2&t&&(e.xp6(1),e.hYB("parentTitle","",e.lcZ(2,24,"personnel")," / ",e.lcZ(3,26,"employees"),""),e.MGl("parentTitleLink","/personnel-setup/",o.moduleId,"/employees"),e.xp6(3),e.MGl("url","/personnel-setup/",o.moduleId,"/employees"),e.Q6J("params",o.pageParams),e.xp6(7),e.Q6J("formGroup",o.form),e.xp6(3),e.Q6J("control",o.formCtrls.plan_ID)("submitted",o.submitted)("filter",!0),e.xp6(2),e.Q6J("control",o.formCtrls.fromDate)("submitted",o.submitted),e.xp6(2),e.Q6J("control",o.formCtrls.policyGroupId)("planCtrl",o.formCtrls.plan_ID)("fromDateCtrl",o.formCtrls.fromDate)("submitted",o.submitted)("filter",!0)("multi",!0),e.xp6(2),e.Q6J("control",o.formCtrls.employeeIds)("policyControl",o.formCtrls.policyGroupId)("submitted",o.submitted)("filter",!0)("multi",!0),e.xp6(2),e.Q6J("control",o.formCtrls.is_Apply_Rules),e.xp6(3),e.Q6J("ngIf",o.formCtrls.plan_ID.value>0))},dependencies:[d.O5,N.Q,w.I,Y.u,Ae.a,D.p,I.T,y.a8,y.dn,y.n5,y.hq,q.d,nt.B,Jp.t,kp.h,l._Y,l.JL,l.sg,L.X$]}),a})(),Op=(()=>{class a extends P.K{constructor(){super()}getList(t){return this.get("Personnel/EmployeeActivation/GetNonActivationEmployeesList",{params:t})}activate(t){return this.post("Personnel/EmployeeActivation/Activate",null,{params:{id:t}})}exportExcel(){}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),Up=(()=>{class a extends u.U{constructor(t){super(),this.employeesActivationService=t,this.mandatoryColomns=["Ser","employee","job","actions"],this.optionalColomns=[],this.isLoaded=!1}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(t,o){this.dataSource=new g.by(null),this.isLoaded=!1,this.removePageParams(),this.page.pageIndex=t,o&&(this.page.pageSize=o),this.employeesActivationService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(s=>{if(1==s.message.messageType){if(0==s.data.length&&t>1)return void this.getList(this.prevPage);this.dataSource=new g.by(function Fp(a){return a.map(n=>({...n,employee:(0,c._f)(n.core_Person?.ar_Name,n.core_Person?.en_Name),job:(0,c._f)(n.core_Person_Instance_Job_Title[0]?.core_Job_Title?.ar_Name,n.core_Person_Instance_Job_Title[0]?.core_Job_Title?.en_Name)}))}(s.data)),this.isLoaded=!0,this.page.length=s.meta.totalItemCount,this.page.meta=s.meta}else this.errorList(s?.message?.messages)})}activate(t){this.showLoading(),this.employeesActivationService.activate(t.id).subscribe(o=>{1==o.message.messageType?(this.updateSuccessfullyMsg("employeeActivateUpdated"),this.getList(this.currentPage)):this.errorList(o?.message?.messages),this.hideLoading()})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Op))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employees-activation"]],features:[e.qOj],decls:4,vars:7,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","employeesActivation","parentTitle","personnel","TitleHasGlobalFunc","",3,"globalFunctions"],[1,"form-card"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","actions","onChangePage","rowactions"]],template:function(t,o){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.qZA(),e.TgZ(2,"mat-card",2)(3,"app-material-table",3),e.NdJ("onChangePage",function(s){return o.getList(s.pageIndex+1,s.pageSize)})("rowactions",function(s){return o.activate(s.data)}),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("globalFunctions",o.globalFunctions),e.xp6(2),e.Q6J("isLoaded",o.isLoaded)("dataSource",o.dataSource)("mandatoryColomns",o.mandatoryColomns)("optionalColomns",o.optionalColomns)("page",o.page)("actions",o.rowFunctions))},dependencies:[w.I,I.T,xt.X,y.a8,y.n5]}),a})();var j=r(3710),B=r(78512);let qp=(()=>{class a extends P.K{constructor(){super()}getEmployeeStatusData(t){return this.post("Personal/RptEmployeeStatus/GetEmployeeStatusData",t)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var Rp=r(99515);function Bp(a,n){if(1&a&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"date"),e.ALo(4,"translate"),e.ALo(5,"date"),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.HOy(" ",e.lcZ(2,4,"from")," (",e.xi3(3,6,t.fromDate,"yyyy/MM/dd"),") ",e.lcZ(4,9,"to")," (",e.xi3(5,11,t.toDate,"yyyy/MM/dd"),") ")}}function Vp(a,n){if(1&a&&(e.TgZ(0,"th"),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",t," ")}}function Yp(a,n){if(1&a&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&a){const t=e.oxw(3).$implicit,o=e.oxw(3);e.uIk("rowspan",o.getNoOfStatusInOrg(t)),e.xp6(1),e.hij(" ",o.msgTranslate(t.ar_Org,t.en_Org)," ")}}function Gp(a,n){if(1&a&&(e.ynx(0),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.BQk()),2&a){const t=e.oxw(2).$implicit,o=e.oxw(4);e.xp6(1),e.uIk("rowspan",t.statusVMs.length),e.xp6(1),e.hij(" ",t.code," "),e.xp6(1),e.uIk("rowspan",t.statusVMs.length),e.xp6(1),e.hij(" ",o.msgTranslate(t.ar_Person,t.en_Person)," "),e.xp6(1),e.uIk("rowspan",t.statusVMs.length),e.xp6(1),e.hij(" ",o.msgTranslate(t.ar_Job,t.en_Job)," ")}}function jp(a,n){if(1&a&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&a){const t=n.$implicit,o=e.oxw().$implicit;e.xp6(1),e.hij(" ",o.extraData[t]," ")}}function zp(a,n){if(1&a&&(e.ynx(0),e.TgZ(1,"tr"),e.YNc(2,Yp,2,2,"td",9),e.YNc(3,Gp,7,6,"ng-container",9),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.ALo(10,"date"),e.qZA(),e.YNc(11,jp,2,1,"td",15),e.qZA(),e.BQk()),2&a){const t=n.$implicit,o=n.index,i=e.oxw().index,s=e.oxw(4);e.xp6(2),e.Q6J("ngIf",0===i&&0===o),e.xp6(1),e.Q6J("ngIf",0===o),e.xp6(2),e.hij(" ",s.msgTranslate(t.ar_Status,t.en_Status)," "),e.xp6(2),e.hij(" ",s.msgTranslate(t.ar_Reason,t.en_Reason)," "),e.xp6(2),e.Oqu(e.xi3(10,6,t.from_Date,"dd/MM/yyyy")),e.xp6(2),e.Q6J("ngForOf",s.extraHeaders)}}function Hp(a,n){if(1&a&&(e.ynx(0),e.YNc(1,zp,12,9,"ng-container",15),e.BQk()),2&a){const t=n.$implicit;e.xp6(1),e.Q6J("ngForOf",t.statusVMs)}}function Wp(a,n){if(1&a&&(e.ynx(0),e.YNc(1,Hp,2,1,"ng-container",15),e.BQk()),2&a){const t=n.$implicit;e.xp6(1),e.Q6J("ngForOf",t.employeesVMs)}}function $p(a,n){if(1&a){const t=e.EpF();e.ynx(0),e.TgZ(1,"table",13)(2,"thead",14)(3,"tr")(4,"th"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"th"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"th"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"th"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"th"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"th"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"th"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.YNc(25,Vp,2,1,"th",15),e.qZA()(),e.TgZ(26,"tbody"),e.YNc(27,Wp,2,1,"ng-container",15),e.qZA()(),e.TgZ(28,"app-prime-paginator",16),e.NdJ("onChangePage",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.changeDataInPage(i.pageIndex))}),e.qZA(),e.BQk()}if(2&a){const t=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,12,"organization")),e.xp6(3),e.Oqu(e.lcZ(9,14,"code")),e.xp6(3),e.Oqu(e.lcZ(12,16,"name")),e.xp6(3),e.Oqu(e.lcZ(15,18,"jobTitle")),e.xp6(3),e.Oqu(e.lcZ(18,20,"currentStatus")),e.xp6(3),e.Oqu(e.lcZ(21,22,"reason")),e.xp6(3),e.Oqu(e.lcZ(24,24,"statusDate")),e.xp6(2),e.Q6J("ngForOf",t.extraHeaders),e.xp6(2),e.Q6J("ngForOf",t.employeeStatusTable),e.xp6(1),e.Q6J("page",t.page)("isCenterPaginator",!0)("hidePageSizeOption",!0)}}const Kp=function(){return["","","","","","",""]};function Xp(a,n){1&a&&(e.TgZ(0,"div",17),e._UZ(1,"app-table-skeleton",18),e.qZA()),2&a&&(e.xp6(1),e.Q6J("displayedColumns",e.DdM(1,Kp)))}function ec(a,n){if(1&a&&(e.TgZ(0,"mat-card",7)(1,"mat-card-title",8)(2,"div",4),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.YNc(5,Bp,6,14,"div",9),e._UZ(6,"div"),e.qZA(),e.TgZ(7,"mat-card-content",10,11),e.YNc(9,$p,29,26,"ng-container",9),e.YNc(10,Xp,2,2,"div",12),e.qZA()()),2&a){const t=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,4,"results")),e.xp6(2),e.Q6J("ngIf",t.fromDate||t.toDate),e.xp6(4),e.Q6J("ngIf",t.isLoaded),e.xp6(1),e.Q6J("ngIf",!t.isLoaded)}}let tc=(()=>{class a extends u.U{constructor(t){super(),this.employeesReportsService=t,this.submitted=!1,this.isLoaded=!1,this.reportId=0,this.paramsList=[{name:"Structure_id",id:B.A.Structure_id,isRequired:!0},{name:"StructureType_Id",id:B.A.StructureType_Id},{name:"Org_IDs",id:B.A.Org_IDs},{name:"WithChilds",id:B.A.WithChilds,isRequired:!0},{name:"Status_IDs",id:B.A.Status_IDs},{name:"Person_Instance_ID",id:B.A.Person_Instance_ID},{name:"DateFrom",id:B.A.DateFrom,isRequired:!0},{name:"DateTo",id:B.A.DateTo,isRequired:!0},{name:"Financial_Company_IDs",id:B.A.Financial_Company_IDs}]}ngOnInit(){}onModulesChanged(){this.reportId=this.getReportGUIid(this.getViewName)}submit(t){this.params={Structure_id:t.Structure_id,StructureType_Id:t.StructureType_Id,Org_Ids:t.Org_IDs,WithChilds:t.WithChilds,Person_Instance_ID:t.Person_Instance_ID?.toString(),Status_IDs:t.Status_IDs,DateFrom:t.DateFrom,DateTo:t.DateTo,Financial_Company_IDs:t.Financial_Company_IDs},this.submitted=!0,this.fromDate=t.DateFrom,this.toDate=t.DateTo,this.getEmployeeStatusData()}getEmployeeStatusData(){this.isLoaded=!1,this.employeeStatusTable=null,this.employeesReportsService.getEmployeeStatusData(this.params).pipe(this.cancelRequest()).subscribe(t=>{t.message.messageType==p.u.Success?(this.page.length=t.data.length,[this.employeeStatusTableAll,this.extraHeaders]=function Qp(a){let n=[];return a.map(t=>{t.employeesVMs.map(o=>{o.statusVMs.forEach(i=>{i.extraData={};const s=Object.keys(i).filter(T=>T.startsWith("header"));Object.keys(i).filter(T=>T.startsWith("atrb"));for(let T=1;T<=s.length;T++){const V=`header${T}`;if(i[V]){const rc=`atrb${T}`;n.includes(i[V])||n.push(i[V]),i.extraData[i[V]]=i[rc]??null}}})})}),[a,n]}(t.data),this.employeeStatusTable=this.employeeStatusTableAll.slice(0,this.page.pageSize),this.isLoaded=!0):this.errorList(t?.message?.messages)})}changeDataInPage(t){this.page.pageIndex=t+1;let o=t*this.page.pageSize;this.employeeStatusTable=this.employeeStatusTableAll.slice(o,o+this.page.pageSize)}getNoOfStatusInOrg(t){return t.employeesVMs.reduce((o,i)=>o+i.statusVMs.length,0)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(qp))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-employee-status-rep"]],features:[e.qOj],decls:11,vars:9,consts:[[1,"title-no-margin","title-section","fixed-title"],["title","employeeStatus",3,"parentTitle"],[1,"d-block","mt-2"],["expanded",""],[1,"page-title"],[3,"reportId","paramsList","onSubmit"],["class","form-card emp-status-rep",4,"ngIf"],[1,"form-card","emp-status-rep"],[1,"d-flex","justify-content-between"],[4,"ngIf"],["id","rpt_att_card",1,"container-fluid"],["rpt_att_card",""],["class","mtop-25",4,"ngIf"],["id","rpt-table","appScrollableHorizontal","",1,"table","rpt-table","mt-3","overflow-scroll","d-block"],[1,"thead-light"],[4,"ngFor","ngForOf"],[3,"page","isCenterPaginator","hidePageSizeOption","onChangePage"],[1,"mtop-25"],[3,"displayedColumns"]],template:function(t,o){1&t&&(e.TgZ(0,"mat-card-title",0),e._UZ(1,"page-title",1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"mat-accordion",2)(4,"mat-expansion-panel",3)(5,"mat-expansion-panel-header")(6,"mat-panel-title",4),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e.TgZ(9,"app-reports-params",5),e.NdJ("onSubmit",function(s){return o.submit(s)}),e.qZA()()(),e.YNc(10,ec,11,6,"mat-card",6)),2&t&&(e.xp6(1),e.s9C("parentTitle",e.lcZ(2,5,"employeeReports")),e.xp6(6),e.hij(" ",e.lcZ(8,7,"filter_options")," "),e.xp6(2),e.Q6J("reportId",o.reportId)("paramsList",o.paramsList),e.xp6(1),e.Q6J("ngIf",o.submitted))},dependencies:[d.sg,d.O5,I.T,et.I,tt.m,ot.c,Rp.n,y.a8,y.dn,y.n5,G.pp,G.ib,G.yz,G.yK,d.uU,L.X$],styles:[".emp-status-rep th{width:14.28%}"]}),a})();const oc=[{path:"employees",data:{view:h.S.employees},children:[{path:"",redirectTo:"index",pathMatch:At.U.full},{path:"index",component:Lp,data:{view:h.S.employees_index},canActivate:[j.r]},{path:"add",component:Et,data:{view:h.S.employee_profile},canActivate:[j.r]},{path:"edit/:employeeId",component:Et,data:{view:h.S.employee_profile},canActivate:[j.r]},{path:"assign-plan",component:Mp,data:{view:h.S.assign_plan},canActivate:[j.r]}]},{path:"employees-activation",component:Up,data:{view:h.S.employees_activation},canActivate:[j.r]},{path:"reports",data:{view:h.S.employees_reports},children:[{path:"employee-status",component:tc,data:{view:h.S.employee_status_report},canActivate:[j.r]}]}];let ac=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[xe.Bz.forChild(oc),xe.Bz]}),a})();var ic=r(86128),nc=r(78399),sc=r(64418);let lc=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[d.ez,ac,ic.m,nc.OrgManagementModule,sc.E]}),a})()}}]);