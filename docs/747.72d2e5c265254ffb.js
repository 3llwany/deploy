"use strict";(self.webpackChunkhr=self.webpackChunkhr||[]).push([[747],{3710:(j,b,s)=>{s.d(b,{r:()=>c});var m=s(94650),I=s(67579),C=s(24280);let c=(()=>{class d{constructor(e){this.viewsService=e,this.loadingService=(0,m.f3M)(I.b),this.UserModules=this.viewsService.UserModules$.getValue(),this.loading=document.getElementById("page-loading")}canActivate(e,J){return!0}showLoading(){this.loading.style.display="block",this.loading.style.opacity="1",this.loading.style.zIndex="998"}hideLoading(){this.loading.style.display="none",this.loading.style.opacity="0",this.loading.style.zIndex="0"}}return d.\u0275fac=function(e){return new(e||d)(m.LFG(C.Z))},d.\u0275prov=m.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},62747:(j,b,s)=>{s.r(b),s.d(b,{SapBusinessOneSetupModule:()=>ce});var m=s(36895),I=s(62361),C=s(80458),c=s(30671),d=s(15602),h=s(95751),e=s(94650),J=s(44222),S=s(93410),v=s(46896),u=s(73546),y=s(86405);let R=(()=>{class o extends h.U{constructor(a){super(),this.systemInstanceService=a,this.mandatoryColomns=["Ser","id","en_Name","ar_Name","actions"],this.optionalColomns=["serverName","licenseServer","dbUserName","dbPassWord","companyDB","userName","password","unit_Mesaure","enumDbServerType"],this.isLoaded=!1}ngOnInit(){}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new c.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}getList(a,t){this.isLoaded=!1,this.removePageParams(),this.page.pageIndex=a,t&&(this.page.pageSize=t),this.systemInstanceService.getList({PageNumber:a,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(i=>{if(i.message.messageType==d.u.Success){if(0==i.data.length&&a>1)return void this.getList(this.prevPage);this.dataSource=new c.by(i.data),this.isLoaded=!0,this.page.length=i.meta.totalItemCount}else this.errorList(i?.message?.messages)})}onDelete(a){let t=this.msgTranslate(a.ar_Name,a.en_Name);this.deleteDialog(t).subscribe(r=>{r&&this.delete(a)})}delete(a){this.showLoading(),this.systemInstanceService.Delete(a.id).subscribe(t=>{t.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(t?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(t?.message?.messages),this.hideLoading()})}}return o.\u0275fac=function(a){return new(a||o)(e.Y36(J.B))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-system-instance-index"]],features:[e.qOj],decls:7,vars:8,consts:[[1,"row"],[1,"col-12"],[1,"index-card"],["title","sapSystemInstance",3,"globalFunctions"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","exportService","page","actions","onChangePage","deleteRow"]],template:function(a,t){1&a&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card",2)(4,"mat-card-title"),e._UZ(5,"page-title",3),e.qZA(),e.TgZ(6,"app-material-table",4),e.NdJ("onChangePage",function(i){return t.getList(i.pageIndex+1,i.pageSize)})("deleteRow",function(i){return t.onDelete(i)}),e.qZA()()()()),2&a&&(e.xp6(5),e.Q6J("globalFunctions",t.globalFunctions),e.xp6(1),e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("exportService",t.systemInstanceService)("page",t.page)("actions",t.rowFunctions))},dependencies:[S.I,v.T,u.a8,u.n5,y.Ro]}),o})();var P=s(43130),l=s(24006),A=s(35478),T=s(78937),F=s(18521),f=s(26315);let M=(()=>{class o extends F.K{constructor(){super()}create(a){return this.post("SapB1AccountMapSetup/Create",a)}update(a){return this.post("SapB1AccountMapSetup/Edit",a)}getList(a){return this.get("SapB1AccountMapSetup/GetList",{params:{...a,$expand:f.db.PAY_Variable}})}getAll(){return this.get("SapB1AccountMapSetup/GetAll",{params:{$expand:`${f.db.SAP_IntegrationPurpose},${f.db.core_Org}/${f.db.Core_Org_Structure_Org}`}})}getById(a){return this.get("SapB1AccountMapSetup/GetAll",{params:{$filter:`id eq ${a}`,$expand:`${f.db.SAP_IntegrationPurpose}`}})}Delete(a){return this.delete("SapB1AccountMapSetup/Delete",{params:{Id:a}})}exportExcel(){this.getAll()}}return o.\u0275fac=function(a){return new(a||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var O=s(25273),E=s(92393),U=s(12613),Y=s(61064),G=s(52682),Z=s(56500),N=s(57566),$=s(59549),K=s(22334),x=s(74884),L=s(37034),V=s(38982),X=s(40363),W=s(52013),H=s(85443),ee=s(15362),te=s(50260),w=s(49274);function ae(o,n){if(1&o&&e._UZ(0,"app-add-new-btn",5),2&o){const a=e.oxw();e.MGl("url","/sap-business-one-setup/",a.moduleId,"/sap-account-map/add"),e.Q6J("params",a.parentParam)}}function oe(o,n){if(1&o){const a=e.EpF();e.TgZ(0,"reset-form-btn",40),e.NdJ("click",function(){e.CHM(a);const r=e.oxw();return e.KtG(r.clearForm())}),e.qZA()}}const D=function(o){return{"hidden-field":o}};let B=(()=>{class o extends h.U{constructor(a){super(),this.sapAccountMapService=a,this.submitted=!1,this.jobTitleRadioList=[{value:!0,label:"jobTitle",cssClass:"col-md-4 col-12"},{value:!1,label:"jobFamily",cssClass:"col-md-4 col-12"},{value:null,label:"none",cssClass:"col-md-4 col-12"}],this.bankRadioList=[{value:!0,label:"bothBankWithInstruction"},{value:!1,label:"cash"}],this.isDebitRadioList=[{value:!0,label:"debit"},{value:!1,label:"credit"}]}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],systemInstanceId:[null,[l.kI.required]],integrationPurpose_ID:[null,[l.kI.required]],payment_ID:[null,[l.kI.required]],variable_ID:[null,[l.kI.required]],accountOrPartnerCode:[null,[l.kI.required,T.w.whiteSpace]],is_vendor:[null],is_Aggregated:[!0],ignoreCostCenters:[null],organizationTypeId:[null],organization_ID:[null],isJobtitleType:[!0],jobTitle_ID:[null,[l.kI.required]],job_Title_Family_ID:[null],bothBankCash:[!0],bank_ID:[null],is_Debit:[!0],defualtOcrCode1:[null],defualtOcrCode2:[null],defualtOcrCode3:[null],defualtOcrCode4:[null],defualtOcrCode5:[null],defualtProj_Code:[null],udF1_Name:[null],udF1_Value:[null],udF2_Name:[null],udF2_Value:[null],udF3_Name:[null],udF3_Value:[null]}),this.activatedRoute.paramMap.subscribe(a=>{this.sapAccountMapId=Number(a.get("sapAccountMapId"))??0})}onChangeBusinessAndCompanyId(){this.sapAccountMapId>0&&this.checkNoBusinessOrCompany()&&this.getById()}get formCtrls(){return this.form.controls}getById(){this.showLoading(),this.sapAccountMapService.getById(this.sapAccountMapId).subscribe(a=>{if(a.message.messageType==d.u.Success){let t=function q(o){return o.map(n=>({...n._I_PAY_Variable_SAP_SystemInstance_AccountNumber_COMM_Bank,organizationTypeId:n.orgTypeId,systemInstanceId:n._I_PAY_Variable_SAP_SystemInstance_AccountNumber_COMM_Bank?.saP_IntegrationPurpose?.systemInstance_ID}))}(a.data);this.sapAccountMapToEdit(t[0])}else this.errorList(a?.message?.messages);this.hideLoading()})}sapAccountMapToEdit(a){this.form.patchValue(a),this.formCtrls.integrationPurpose_ID.setValue(a.integrationPurpose_ID),this.formCtrls.variable_ID.setValue(a.variable_ID),this.formCtrls.organization_ID.setValue(a.organization_ID),setTimeout(()=>{this.formCtrls.jobTitle_ID.setValue(a.jobTitle_ID),this.formCtrls.job_Title_Family_ID.setValue(a.job_Title_Family_ID)},20);let t=null;a.job_Title_Family_ID?t=!1:a.jobTitle_ID&&(t=!0),this.formCtrls.isJobtitleType.setValue(t),this.onChangeIsJobRadio(t,!0)}submit(){if(this.submitted=!0,this.form.valid){const a={ID:this.form.value.id,IntegrationPurpose_ID:this.form.value.integrationPurpose_ID,Payment_ID:this.form.value.payment_ID,Variable_ID:this.form.value.variable_ID,AccountOrPartnerCode:this.form.value.accountOrPartnerCode,Is_vendor:this.form.value.is_vendor??!1,Is_Aggregated:this.form.value.is_Aggregated??!1,IgnoreCostCenters:this.form.value.ignoreCostCenters??!1,Organization_ID:this.form.value.organization_ID,JobTitle_ID:this.form.value.jobTitle_ID,Job_Title_Family_ID:this.form.value.job_Title_Family_ID,BothBankCash:this.form.value.bothBankCash??!1,Bank_ID:this.form.value.bank_ID,Is_Debit:this.form.value.is_Debit??!1,DefualtOcrCode1:this.form.value.defualtOcrCode1,DefualtOcrCode2:this.form.value.defualtOcrCode2,DefualtOcrCode3:this.form.value.defualtOcrCode3,DefualtOcrCode4:this.form.value.defualtOcrCode4,DefualtOcrCode5:this.form.value.defualtOcrCode5,DefualtProj_Code:this.form.value.defualtProj_Code,UDF1_Name:this.form.value.udF1_Name,UDF1_Value:this.form.value.udF1_Value,UDF2_Name:this.form.value.udF2_Name,UDF2_Value:this.form.value.udF2_Value,UDF3_Name:this.form.value.udF3_Name,UDF3_Value:this.form.value.udF3_Value};0==a.ID?this.create(a):this.update(a)}}create(a){this.showLoading(),this.sapAccountMapService.create(a).subscribe(t=>{t?.message?.messageType==d.u.Success?(this.addSuccessfullyMsg(t?.message?.messageTypeName),this.changeDataAfterAddAndEdit(t.data)):this.errorList(t?.message?.messages),this.hideLoading()})}update(a){this.showLoading(),this.sapAccountMapService.update(a).subscribe(t=>{t.message.messageType==d.u.Success?(this.updateSuccessfullyMsg(t?.message?.messageTypeName),this.changeDataAfterAddAndEdit(t.data)):this.errorList(t?.message?.messages),this.hideLoading()})}changeDataAfterAddAndEdit(a){this.sapAccountMapId=a.id,this.formCtrls.id.setValue(this.sapAccountMapId),this.navigateTo(`/sap-business-one-setup/${this.moduleId}/sap-account-map/edit/${this.sapAccountMapId}`),this.formCtrls.is_Aggregated.setValue(a.is_Aggregated)}clearForm(){this.form.reset({id:0,is_Aggregated:!0,isJobtitleType:!0,bothBankCash:!0,is_Debit:!0}),this.submitted=!1}onChangeIsVendor(a){a&&this.formCtrls.is_Aggregated.setValue(!1)}onChangeIsAggregated(a){a&&this.formCtrls.is_vendor.setValue(!1)}onChangeIsJobRadio(a,t=!1){t||(this.formCtrls.jobTitle_ID.reset(),this.formCtrls.job_Title_Family_ID.reset()),1==a?(this.formCtrls.jobTitle_ID.setValidators([l.kI.required]),this.formCtrls.job_Title_Family_ID.clearValidators()):0==a?(this.formCtrls.job_Title_Family_ID.setValidators([l.kI.required]),this.formCtrls.jobTitle_ID.clearValidators()):(this.formCtrls.jobTitle_ID.clearValidators(),this.formCtrls.job_Title_Family_ID.clearValidators()),this.formCtrls.jobTitle_ID.updateValueAndValidity(),this.formCtrls.job_Title_Family_ID.updateValueAndValidity()}onChangeIsBankRadio(a){a||this.formCtrls.bank_ID.setValue(null)}}return o.\u0275fac=function(a){return new(a||o)(e.Y36(M))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-sap-account-map"]],features:[e.qOj],decls:84,vars:97,consts:[[1,"row"],[1,"col-12"],[1,"form-card"],["addTitle","sapAccountMap","editTitle","editSapAccountMap",3,"id"],[3,"url","params",4,"ngIf"],[3,"url","params"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],[3,"control","submitted","filter"],[3,"control","systemInstanceControl","submitted","filter"],[3,"control","paymentControl","submitted","filter"],[1,"col-md-3","col-12"],["label","accountOrPartnerCode",3,"control","submitted"],["label","is_vendor",1,"mtop-14",3,"control","onChange"],["label","is_Aggregated",1,"mtop-14",3,"control","onChange"],["label","ignoreCostCenters",1,"mtop-14",3,"control"],[3,"control","orgTypeControl","submitted","filter"],[1,"col-md-8","col-12"],[1,"mtop-14",3,"control","radioList","submitted","change"],[1,"col-md-4","col-12",3,"ngClass"],[3,"control","organizationControl","organizationControlRequired","submitted","filter"],[1,"col-md-6","col-12",3,"ngClass"],["label","debitOrCredit",3,"control","radioList","submitted"],[1,"col-md-4","col-12"],["label","defualtOcrCode1",3,"control","submitted"],["label","defualtOcrCode2",3,"control","submitted"],["label","defualtOcrCode3",3,"control","submitted"],["label","defualtOcrCode4",3,"control","submitted"],["label","defualtOcrCode5",3,"control","submitted"],["label","defualtProj_Code",3,"control","submitted"],["label","udF1_Name",3,"control","submitted"],["label","udF1_Value",3,"control","submitted"],["label","udF2_Name",3,"control","submitted"],["label","udF2_Value",3,"control","submitted"],["label","udF3_Name",3,"control","submitted"],["label","udF3_Value",3,"control","submitted"],["align","end"],[3,"id","onClick"],[3,"click",4,"ngIf"],[3,"click"]],template:function(a,t){1&a&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card",2)(4,"mat-card-title"),e._UZ(5,"page-title",3),e.YNc(6,ae,1,2,"app-add-new-btn",4),e._UZ(7,"app-back-btn",5),e.qZA(),e.TgZ(8,"mat-card-content",6)(9,"div",0)(10,"div",1)(11,"form",7)(12,"div",0)(13,"div",8),e._UZ(14,"app-sap-system-instance-dropdown",9),e.qZA(),e.TgZ(15,"div",8),e._UZ(16,"app-sap-integration-purpose-by-system-instance-dropdown",10),e.qZA(),e.TgZ(17,"div",8),e._UZ(18,"app-payment-dropdown",9),e.qZA(),e.TgZ(19,"div",8),e._UZ(20,"app-variable-by-payment-dropdown",11),e.qZA(),e.TgZ(21,"div",12),e._UZ(22,"app-input",13),e.qZA(),e.TgZ(23,"div",12)(24,"app-check-box",14),e.NdJ("onChange",function(i){return t.onChangeIsVendor(i)}),e.qZA()(),e.TgZ(25,"div",12)(26,"app-check-box",15),e.NdJ("onChange",function(i){return t.onChangeIsAggregated(i)}),e.qZA()(),e.TgZ(27,"div",12),e._UZ(28,"app-check-box",16),e.qZA(),e.TgZ(29,"div",8),e._UZ(30,"app-org-types-dropdown-current-structure",9),e.qZA(),e.TgZ(31,"div",8),e._UZ(32,"app-organization-by-org-type-dropdown",17),e.qZA(),e.TgZ(33,"div",18)(34,"app-radio-button",19),e.NdJ("change",function(i){return t.onChangeIsJobRadio(i.value)}),e.qZA()(),e.TgZ(35,"div",20),e._UZ(36,"app-job-title-by-org-dropdown",21),e.qZA(),e.TgZ(37,"div",20),e._UZ(38,"app-job-family-by-org-dropdown",21),e.qZA(),e.TgZ(39,"div",8)(40,"app-radio-button",19),e.NdJ("change",function(i){return t.onChangeIsBankRadio(i.value)}),e.qZA()(),e.TgZ(41,"div",22),e._UZ(42,"app-bank-dropdown",9),e.qZA(),e.TgZ(43,"div",1),e._UZ(44,"app-radio-button",23),e.qZA(),e.TgZ(45,"div",24),e._UZ(46,"app-input",25),e.qZA(),e.TgZ(47,"div",24),e._UZ(48,"app-input",26),e.qZA(),e.TgZ(49,"div",24),e._UZ(50,"app-input",27),e.qZA(),e.TgZ(51,"div",24),e._UZ(52,"app-input",28),e.qZA(),e.TgZ(53,"div",24),e._UZ(54,"app-input",29),e.qZA(),e.TgZ(55,"div",24),e._UZ(56,"app-input",30),e.qZA(),e.TgZ(57,"div",24)(58,"mat-label"),e._uU(59),e.ALo(60,"translate"),e.qZA()(),e.TgZ(61,"div",24),e._UZ(62,"app-input",31),e.qZA(),e.TgZ(63,"div",24),e._UZ(64,"app-input",32),e.qZA(),e.TgZ(65,"div",24)(66,"mat-label"),e._uU(67),e.ALo(68,"translate"),e.qZA()(),e.TgZ(69,"div",24),e._UZ(70,"app-input",33),e.qZA(),e.TgZ(71,"div",24),e._UZ(72,"app-input",34),e.qZA(),e.TgZ(73,"div",24)(74,"mat-label"),e._uU(75),e.ALo(76,"translate"),e.qZA()(),e.TgZ(77,"div",24),e._UZ(78,"app-input",35),e.qZA(),e.TgZ(79,"div",24),e._UZ(80,"app-input",36),e.qZA()()()()()(),e.TgZ(81,"mat-card-actions",37)(82,"submit-btn",38),e.NdJ("onClick",function(){return t.submit()}),e.qZA(),e.YNc(83,oe,1,0,"reset-form-btn",39),e.qZA()()()()),2&a&&(e.xp6(5),e.Q6J("id",t.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",t.formCtrls.id.value>0),e.xp6(1),e.MGl("url","/sap-business-one-setup/",t.moduleId,"/sap-account-map/index"),e.Q6J("params",t.pageParams),e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(3),e.Q6J("control",t.formCtrls.systemInstanceId)("submitted",t.submitted)("filter",!0),e.xp6(2),e.Q6J("control",t.formCtrls.integrationPurpose_ID)("systemInstanceControl",t.formCtrls.systemInstanceId)("submitted",t.submitted)("filter",!0),e.xp6(2),e.Q6J("control",t.formCtrls.payment_ID)("submitted",t.submitted)("filter",!0),e.xp6(2),e.Q6J("control",t.formCtrls.variable_ID)("paymentControl",t.formCtrls.payment_ID)("submitted",t.submitted)("filter",!0),e.xp6(2),e.Q6J("control",t.formCtrls.accountOrPartnerCode)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.is_vendor),e.xp6(2),e.Q6J("control",t.formCtrls.is_Aggregated),e.xp6(2),e.Q6J("control",t.formCtrls.ignoreCostCenters),e.xp6(2),e.Q6J("control",t.formCtrls.organizationTypeId)("submitted",t.submitted)("filter",!0),e.xp6(2),e.Q6J("control",t.formCtrls.organization_ID)("orgTypeControl",t.formCtrls.organizationTypeId)("submitted",t.submitted)("filter",!0),e.xp6(2),e.Q6J("control",t.formCtrls.isJobtitleType)("radioList",t.jobTitleRadioList)("submitted",t.submitted),e.xp6(1),e.Q6J("ngClass",e.VKq(91,D,1!=t.formCtrls.isJobtitleType.value)),e.xp6(1),e.Q6J("control",t.formCtrls.jobTitle_ID)("organizationControl",t.formCtrls.organization_ID)("organizationControlRequired",!1)("submitted",t.submitted)("filter",!0),e.xp6(1),e.Q6J("ngClass",e.VKq(93,D,0!=t.formCtrls.isJobtitleType.value)),e.xp6(1),e.Q6J("control",t.formCtrls.job_Title_Family_ID)("organizationControl",t.formCtrls.organization_ID)("organizationControlRequired",!1)("submitted",t.submitted)("filter",!0),e.xp6(2),e.Q6J("control",t.formCtrls.bothBankCash)("radioList",t.bankRadioList)("submitted",t.submitted),e.xp6(1),e.Q6J("ngClass",e.VKq(95,D,1!=t.formCtrls.bothBankCash.value)),e.xp6(1),e.Q6J("control",t.formCtrls.bank_ID)("submitted",t.submitted)("filter",!0),e.xp6(2),e.Q6J("control",t.formCtrls.is_Debit)("radioList",t.isDebitRadioList)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.defualtOcrCode1)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.defualtOcrCode2)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.defualtOcrCode3)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.defualtOcrCode4)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.defualtOcrCode5)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.defualtProj_Code)("submitted",t.submitted),e.xp6(3),e.Oqu(e.lcZ(60,85,"udF1")),e.xp6(3),e.Q6J("control",t.formCtrls.udF1_Name)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.udF1_Value)("submitted",t.submitted),e.xp6(3),e.Oqu(e.lcZ(68,87,"udF2")),e.xp6(3),e.Q6J("control",t.formCtrls.udF2_Name)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.udF2_Value)("submitted",t.submitted),e.xp6(3),e.Oqu(e.lcZ(76,89,"udF3")),e.xp6(3),e.Q6J("control",t.formCtrls.udF3_Name)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.udF3_Value)("submitted",t.submitted),e.xp6(2),e.Q6J("id",t.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",0==t.formCtrls.id.value))},dependencies:[m.mk,m.O5,O.a,E._,U.u,Y.a,G.J,Z.J,N.p,v.T,$.hX,u.a8,u.dn,u.n5,u.hq,y.Ro,K.s,x.Y,L.K,V._,X.b,W.t,H.A,ee.s,te.v,l._Y,l.JL,l.sg,w.X$],styles:["mat-label[_ngcontent-%COMP%]{display:inline-block;margin-top:20px!important}"]}),o})();var se=s(4859),Q=s(44850);let ne=(()=>{class o extends h.U{constructor(a){super(),this.sapAccountMapService=a,this.mandatoryColomns=["Ser","id","variables","integrationPurpose","accountOrPartnerCode","accountType","actions"],this.optionalColomns=["bothBankCash","is_Aggregated","is_vendor","ignoreCostCenters","defualtOcrCode1","defualtOcrCode2","defualtOcrCode3","defualtOcrCode4","defualtOcrCode5","defualtProj_Code","udF1_Name","udF1_Value","udF2_Name","udF2_Value","udF3_Name","udF3_Value"],this.isLoaded=!1}ngOnInit(){this.form=this.fb.group({systemInstance:[null],integrationPurpose_ID:[null]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new c.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.pageFromUrl>0?this.pageFromUrl:this.firstPage)}searchList(){this.form?.value.integrationPurpose_ID?this.getList(this.firstPage,{$filter:`IntegrationPurpose_ID eq ${this.form.value.integrationPurpose_ID}`}):this.warning("chooseIntegrationPurpose")}getList(a,t={},r){this.isLoaded=!1,this.removePageParams(),this.page.pageIndex=a,r&&(this.page.pageSize=r);let i={PageNumber:a,pageSize:this.page.pageSize,...t};this.sapAccountMapService.getList(i).pipe(this.cancelRequest()).subscribe(_=>{if(_.message.messageType==d.u.Success){if(0==_.data.length&&a>1)return void this.getList(this.prevPage);this.dataSource=new c.by(function k(o){return o.map(n=>({...n,integrationPurpose:n.saP_IntegrationPurpose?.name,accountType:n.is_Debit?"Debit":"Credit",variables:(0,A._)(n.pay_Variable?.arName,n.pay_Variable?.name),bothBankCash:!(!n.bothBankCash||n.bank_ID)}))}(_.data)),this.isLoaded=!0,this.page.length=_.meta.totalItemCount}else this.errorList(_?.message?.messages)})}onDelete(a){let t=this.msgTranslate(`${a.variables} - ${a.integrationPurpose}`);this.deleteDialog(t).subscribe(r=>{r&&this.delete(a)})}delete(a){this.showLoading(),this.sapAccountMapService.Delete(a.id).subscribe(t=>{t.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(t?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize)):this.errorList(t?.message?.messages),this.hideLoading()})}resetSearch(){this.form.reset(),this.getList(this.firstPage)}}return o.\u0275fac=function(a){return new(a||o)(e.Y36(M))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-sap-account-map-index"]],features:[e.qOj],decls:22,vars:17,consts:[[1,"row"],[1,"col-12"],[1,"index-card"],["title","sapAccountMap",3,"globalFunctions"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],[3,"control","filter"],[3,"control","systemInstanceControl","filter"],["align","end"],["mat-raised-button","",1,"btn","btn-info","bg-light-info",3,"click"],[3,"click"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","exportService","page","actions","onChangePage","deleteRow"]],template:function(a,t){1&a&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card",2)(4,"mat-card-title"),e._UZ(5,"page-title",3),e.qZA(),e.TgZ(6,"mat-card-content",4)(7,"div",0)(8,"div",1)(9,"form",5)(10,"div",0)(11,"div",6),e._UZ(12,"app-sap-system-instance-dropdown",7),e.qZA(),e.TgZ(13,"div",6),e._UZ(14,"app-sap-integration-purpose-by-system-instance-dropdown",8),e.qZA()()()()()(),e.TgZ(15,"mat-card-actions",9)(16,"button",10),e.NdJ("click",function(){return t.searchList()}),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"reset-form-btn",11),e.NdJ("click",function(){return t.resetSearch()}),e.qZA()(),e._UZ(20,"mat-divider"),e.TgZ(21,"app-material-table",12),e.NdJ("onChangePage",function(i){return t.getList(i.pageIndex+1,i.pageSize)})("deleteRow",function(i){return t.onDelete(i)}),e.qZA()()()()),2&a&&(e.xp6(5),e.Q6J("globalFunctions",t.globalFunctions),e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(3),e.Q6J("control",t.formCtrls.systemInstance)("filter",!0),e.xp6(2),e.Q6J("control",t.formCtrls.integrationPurpose_ID)("systemInstanceControl",t.formCtrls.systemInstance)("filter",!0),e.xp6(3),e.hij(" ",e.lcZ(18,15,"General.search")," "),e.xp6(4),e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("exportService",t.sapAccountMapService)("page",t.page)("actions",t.rowFunctions))},dependencies:[S.I,Z.J,v.T,se.lW,u.a8,u.dn,u.n5,u.hq,Q.d,y.Ro,L.K,V._,l._Y,l.JL,l.sg,w.X$]}),o})(),re=(()=>{class o extends F.K{constructor(){super()}create(a){return this.post("SapB1LoanTypeSetup/Create",a)}update(a){return this.post("SapB1LoanTypeSetup/Edit",a)}getList(a){return this.get("SapB1LoanTypeSetup/GetList",{params:a})}Delete(a){return this.delete("SapB1LoanTypeSetup/Delete",{params:{Id:a}})}}return o.\u0275fac=function(a){return new(a||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var le=s(11526);function de(o,n){if(1&o){const a=e.EpF();e.TgZ(0,"reset-form-btn",16),e.NdJ("click",function(){e.CHM(a);const r=e.oxw();return e.KtG(r.clearForm())}),e.qZA()}}let ue=(()=>{class o extends h.U{constructor(a){super(),this.sapLoanTypeAccountService=a,this.submitted=!1,this.mandatoryColomns=["Ser","id","debitAccount","sapSystem","loanType","actions"],this.optionalColomns=["creditAccount","isVendor"],this.isLoaded=!1}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],sapSystemId:[null,[l.kI.required]],loanTypeId:[null,[l.kI.required]],debitAccount:[null,[l.kI.required,T.w.whiteSpace]],creditAccount:[null,[l.kI.required,T.w.whiteSpace]],isVendor:[null]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new c.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.firstPage)}getList(a,t){this.isLoaded=!1,this.page.pageIndex=a,t&&(this.page.pageSize=t),this.sapLoanTypeAccountService.getList({PageNumber:a,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(i=>{i.message.messageType==d.u.Success?(this.dataSource=new c.by(function ie(o){return o.map(n=>({...n,sapSystem:(0,A._)(n.saP_SystemInstance?.ar_Name,n.saP_SystemInstance?.en_Name),loanType:(0,A._)(n.paY_Loan_TYPE?.ar_Name,n.paY_Loan_TYPE?.en_Name)}))}(i.data)),this.isLoaded=!0,this.page.length=i.meta.totalItemCount):this.errorList(i?.message?.messages)})}submit(){if(this.submitted=!0,this.form.valid){const a={ID:this.form.value.id,SapSystemId:this.form.value.sapSystemId,LoanTypeId:this.form.value.loanTypeId,DebitAccount:this.form.value.debitAccount,CreditAccount:this.form.value.creditAccount,IsVendor:this.form.value.isVendor??!1};0==a.ID?this.create(a):this.update(a)}}create(a){this.showLoading(),this.sapLoanTypeAccountService.create(a).subscribe(t=>{t?.message?.messageType==d.u.Success?(this.clearForm(),this.getList(this.lastPage,this.page.pageSize),this.addSuccessfullyMsg(t?.message?.messageTypeName)):this.errorList(t?.message?.messages),this.hideLoading()})}update(a){this.showLoading(),this.sapLoanTypeAccountService.update(a).subscribe(t=>{t.message.messageType==d.u.Success?(this.clearForm(),this.getList(this.currentPage,this.page.pageSize),this.updateSuccessfullyMsg(t?.message?.messageTypeName)):this.errorList(t?.message?.messages),this.hideLoading()})}sapLoanTypeAccountToEdit(a){this.form.patchValue(a)}onDelete(a){let t=this.msgTranslate(a.debitAccount);this.deleteDialog(t).subscribe(r=>{r&&this.delete(a)})}delete(a){this.showLoading(),this.sapLoanTypeAccountService.Delete(a.id).subscribe(t=>{t.message.messageType==d.u.Success?(this.deleteSuccessfullyMsg(t?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),a.id==this.formCtrls.id.value&&this.clearForm()):this.errorList(t?.message?.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return o.\u0275fac=function(a){return new(a||o)(e.Y36(re))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-sap-loan-type-account"]],features:[e.qOj],decls:26,vars:22,consts:[[1,"row"],[1,"col-12"],[1,"form-card"],["addTitle","sapLoanTypeAccount","editTitle","editSapLoanTypeAccount",3,"id"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-4","col-12"],[3,"control","submitted","filter"],["label","debitAccount",3,"control","submitted"],[1,"col-md-6","col-12"],["label","creditAccount",3,"control","submitted"],["label","is_vendor",1,"mtop-14",3,"control"],["align","end"],[3,"id","onClick"],[3,"click",4,"ngIf"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","exportService","actions","onChangePage","editRow","deleteRow"],[3,"click"]],template:function(a,t){1&a&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card",2)(4,"mat-card-title"),e._UZ(5,"page-title",3),e.qZA(),e.TgZ(6,"mat-card-content",4)(7,"div",0)(8,"div",1)(9,"form",5)(10,"div",0)(11,"div",6),e._UZ(12,"app-sap-system-instance-dropdown",7),e.qZA(),e.TgZ(13,"div",6),e._UZ(14,"app-loan-types-dropdown",7),e.qZA(),e.TgZ(15,"div",6),e._UZ(16,"app-input",8),e.qZA(),e.TgZ(17,"div",9),e._UZ(18,"app-input",10),e.qZA(),e.TgZ(19,"div",9),e._UZ(20,"app-check-box",11),e.qZA()()()()()(),e.TgZ(21,"mat-card-actions",12)(22,"submit-btn",13),e.NdJ("onClick",function(){return t.submit()}),e.qZA(),e.YNc(23,de,1,0,"reset-form-btn",14),e.qZA(),e._UZ(24,"mat-divider"),e.TgZ(25,"app-material-table",15),e.NdJ("onChangePage",function(i){return t.getList(i.pageIndex+1,i.pageSize)})("editRow",function(i){return t.sapLoanTypeAccountToEdit(i)})("deleteRow",function(i){return t.onDelete(i)}),e.qZA()()()()),2&a&&(e.xp6(5),e.Q6J("id",t.formCtrls.id.value),e.xp6(4),e.Q6J("formGroup",t.form),e.xp6(3),e.Q6J("control",t.formCtrls.sapSystemId)("submitted",t.submitted)("filter",!0),e.xp6(2),e.Q6J("control",t.formCtrls.loanTypeId)("submitted",t.submitted)("filter",!0),e.xp6(2),e.Q6J("control",t.formCtrls.debitAccount)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.creditAccount)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.formCtrls.isVendor),e.xp6(2),e.Q6J("id",t.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",t.formCtrls.id.value>0),e.xp6(2),e.Q6J("isLoaded",t.isLoaded)("dataSource",t.dataSource)("mandatoryColomns",t.mandatoryColomns)("optionalColomns",t.optionalColomns)("page",t.page)("exportService",t.sapLoanTypeAccountService)("actions",t.rowFunctions))},dependencies:[m.O5,O.a,S.I,U.u,Z.J,N.p,v.T,u.a8,u.dn,u.n5,u.hq,Q.d,y.Ro,L.K,le.r,l._Y,l.JL,l.sg]}),o})();var z=s(36162),p=s(74513),g=s(3710);const pe=[{path:"system-instance",data:{view:p.S.system_instance},children:[{path:"",redirectTo:"index",pathMatch:z.U.full},{path:"index",component:R,data:{view:p.S.system_instance_index},canActivate:[g.r]},{path:"add",component:P.x,data:{view:p.S.add_system_instance},canActivate:[g.r]},{path:"edit/:systemInstanceId",component:P.x,data:{view:p.S.add_system_instance},canActivate:[g.r]}]},{path:"sap-account-map",data:{view:p.S.sap_account_map},children:[{path:"",redirectTo:"index",pathMatch:z.U.full},{path:"index",component:ne,data:{view:p.S.sap_account_map_index},canActivate:[g.r]},{path:"add",component:B,data:{view:p.S.add_sap_account_map},canActivate:[g.r]},{path:"edit/:sapAccountMapId",component:B,data:{view:p.S.add_sap_account_map},canActivate:[g.r]}]},{path:"sap-loan-type-account",component:ue,data:{view:p.S.sap_loan_type_account},canActivate:[g.r]}];let me=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[C.Bz.forChild(pe),C.Bz]}),o})(),ce=(()=>{class o{}return o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.ez,me,I.m]}),o})()}}]);