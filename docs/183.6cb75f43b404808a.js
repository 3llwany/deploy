"use strict";(self.webpackChunkhr=self.webpackChunkhr||[]).push([[183],{3710:(v,c,a)=>{a.d(c,{r:()=>g});var u=a(94650),p=a(67579),d=a(24280);let g=(()=>{class n{constructor(m){this.viewsService=m,this.loadingService=(0,u.f3M)(p.b),this.UserModules=this.viewsService.UserModules$.getValue(),this.loading=document.getElementById("page-loading")}canActivate(m,e){return!0}showLoading(){this.loading.style.display="block",this.loading.style.opacity="1",this.loading.style.zIndex="998"}hideLoading(){this.loading.style.display="none",this.loading.style.opacity="0",this.loading.style.zIndex="0"}}return n.\u0275fac=function(m){return new(m||n)(u.LFG(d.Z))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},41183:(v,c,a)=>{a.r(c),a.d(c,{PMSSetupModule:()=>D});var u=a(36895),p=a(80458),d=a(24006),g=a(30671),n=a(15602),f=a(95751),m=a(78937),e=a(94650),S=a(18521);let C=(()=>{class i extends S.K{constructor(){super()}create(t){return this.post("UnitSetup/Create",t)}update(t){return this.post("UnitSetup/Edit",t)}getList(t){return this.get("UnitSetup/GetList",{params:t})}getAll(){return this.get("UnitSetup/GetAll")}Delete(t){return this.delete("UnitSetup/Delete",{params:{Id:t}})}exportExcel(){this.getAll()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var y=a(25273),L=a(93410),U=a(56500),T=a(57566),b=a(46896),h=a(73546),M=a(44850),I=a(86405);function N(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"reset-form-btn",13),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.clearForm())}),e.qZA()}}let P=(()=>{class i extends f.U{constructor(t){super(),this.unitService=t,this.submitted=!1,this.mandatoryColomns=["Ser","id","en_Name","ar_Name","actions"],this.isLoaded=!1,this.optionalColomns=[]}ngOnInit(){this.form=this.fb.group({id:[0,{nonNullable:!0}],ar_Name:[null,[d.kI.required,m.w.whiteSpace]],en_Name:[null,[d.kI.required,m.w.whiteSpace]]})}get formCtrls(){return this.form.controls}onChangeBusinessAndCompanyId(){this.dataSource?.data?.length>0&&(this.dataSource=new g.by(null)),this.checkNoBusinessOrCompany()&&this.getList(this.firstPage)}getList(t,s){this.isLoaded=!1,this.page.pageIndex=t,s&&(this.page.pageSize=s),this.unitService.getList({PageNumber:t,pageSize:this.page.pageSize}).pipe(this.cancelRequest()).subscribe(o=>{o.message.messageType==n.u.Success?(this.dataSource=new g.by(o.data),this.isLoaded=!0,this.page.length=o.meta.totalItemCount):this.errorList(o?.message?.messages)})}submit(){if(this.submitted=!0,this.form.valid){const t={ID:this.form.value.id,Ar_Name:this.form.value.ar_Name,En_Name:this.form.value.en_Name};0==t.ID?this.create(t):this.update(t)}}create(t){this.showLoading(),this.unitService.create(t).subscribe(s=>{s?.message?.messageType==n.u.Success?(this.clearForm(),this.getList(this.currentPage,this.page.pageSize),this.addSuccessfullyMsg(s?.message?.messageTypeName)):this.errorList(s?.message?.messages),this.hideLoading()})}update(t){this.showLoading(),this.unitService.update(t).subscribe(s=>{s.message.messageType==n.u.Success?(this.clearForm(),this.getList(this.currentPage,this.page.pageSize),this.updateSuccessfullyMsg(s?.message?.messageTypeName)):this.errorList(s?.message?.messages),this.hideLoading()})}unitToEdit(t){this.form.patchValue(t)}onDelete(t){let s=this.msgTranslate(t.ar_Name,t.en_Name);this.deleteDialog(s).subscribe(l=>{l&&this.delete(t)})}delete(t){this.showLoading(),this.unitService.Delete(t.id).subscribe(s=>{s.message.messageType==n.u.Success?(this.deleteSuccessfullyMsg(s?.message?.messageTypeName),this.getList(1==this.dataSource.data.length&&this.currentPage>1?this.prevPage:this.currentPage,this.page.pageSize),t.id==this.formCtrls.id.value&&this.clearForm()):this.errorList(s?.message?.messages),this.hideLoading()})}clearForm(){this.form.reset({id:0}),this.submitted=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-unit"]],features:[e.qOj],decls:20,vars:15,consts:[[1,"row"],[1,"col-12"],[1,"form-card"],["addTitle","unit","editTitle","editUnit",3,"id"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","en_Name",3,"control","submitted"],["label","ar_Name",3,"control","submitted"],["align","end"],[3,"id","onClick"],[3,"click",4,"ngIf"],[3,"isLoaded","dataSource","mandatoryColomns","optionalColomns","page","exportService","actions","onChangePage","editRow","deleteRow"],[3,"click"]],template:function(t,s){1&t&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"div",0)(2,"div",1)(3,"mat-card",2)(4,"mat-card-title"),e._UZ(5,"page-title",3),e.qZA(),e.TgZ(6,"mat-card-content",4)(7,"div",0)(8,"div",1)(9,"form",5)(10,"div",0)(11,"div",6),e._UZ(12,"app-input",7),e.qZA(),e.TgZ(13,"div",6),e._UZ(14,"app-input",8),e.qZA()()()()()(),e.TgZ(15,"mat-card-actions",9)(16,"submit-btn",10),e.NdJ("onClick",function(){return s.submit()}),e.qZA(),e.YNc(17,N,1,0,"reset-form-btn",11),e.qZA(),e._UZ(18,"mat-divider"),e.TgZ(19,"app-material-table",12),e.NdJ("onChangePage",function(o){return s.getList(o.pageIndex+1,o.pageSize)})("editRow",function(o){return s.unitToEdit(o)})("deleteRow",function(o){return s.onDelete(o)}),e.qZA()()()()),2&t&&(e.xp6(5),e.Q6J("id",s.formCtrls.id.value),e.xp6(4),e.Q6J("formGroup",s.form),e.xp6(3),e.Q6J("control",s.formCtrls.en_Name)("submitted",s.submitted),e.xp6(2),e.Q6J("control",s.formCtrls.ar_Name)("submitted",s.submitted),e.xp6(2),e.Q6J("id",s.formCtrls.id.value),e.xp6(1),e.Q6J("ngIf",s.formCtrls.id.value>0),e.xp6(2),e.Q6J("isLoaded",s.isLoaded)("dataSource",s.dataSource)("mandatoryColomns",s.mandatoryColomns)("optionalColomns",s.optionalColomns)("page",s.page)("exportService",s.unitService)("actions",s.rowFunctions))},dependencies:[u.O5,y.a,L.I,U.J,T.p,b.T,h.a8,h.dn,h.n5,h.hq,M.d,I.Ro,d._Y,d.JL,d.sg]}),i})();var A=a(74513),Z=a(3710);const E=[{path:"unit",component:P,data:{view:A.S.unit},canActivate:[Z.r]}];let w=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[p.Bz.forChild(E),p.Bz]}),i})();var z=a(62361);let D=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[u.ez,w,z.m]}),i})()}}]);