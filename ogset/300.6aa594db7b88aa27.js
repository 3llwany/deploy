"use strict";(self.webpackChunkmozakretyNew=self.webpackChunkmozakretyNew||[]).push([[300],{2300:function(Fo,tt,f){f.r(tt),f.d(tt,{EducationalSetupModule:function(){return jo}});var q=f(3144),x=f(5671),$=f(9966),C=f(9808),A=f(8555),U=f(4330),s=f(3075),t=f(1891),L=f(2290),v=f(2340),et=f(520),w=function(){var n=function(){function o(a){(0,x.Z)(this,o),this.http=a}return(0,q.Z)(o,[{key:"getSubjects",value:function(e){return this.http.post(v.N.apiURL+"Admin/subject",e)}},{key:"getMainSubject",value:function(){return this.http.get(v.N.apiURL+"Admin/getAllSubjects")}},{key:"getSubjectByID",value:function(e){return this.http.get(v.N.apiURL+"Admin/getSubjectByID/"+e)}},{key:"addEditSubject",value:function(e){return this.http.post("".concat(v.N.apiURL,"Admin/EducationalSubject"),e)}},{key:"deleteSubject",value:function(e){return this.http.delete("".concat(v.N.apiURL,"Admin/subject/").concat(e))}},{key:"getTeacherBySubjectAndEduCompId",value:function(e,i){return this.http.get("".concat(v.N.apiURL,"Admin/getTeachersByEduCompID/").concat(e,"/").concat(i))}},{key:"addQuestionSettings",value:function(e,i){return this.http.post("".concat(v.N.apiURL,"Admin/subjectStudentQuestionSettings/").concat(e),i)}},{key:"addTemplateSettings",value:function(e){return this.http.post(v.N.apiURL+"Admin/subjectStudentTemplateSettings/",e)}},{key:"getSubjectStructre",value:function(e){return this.http.get(v.N.apiURL+"Admin/subjectStructure/"+e)}},{key:"getUnits",value:function(e){return this.http.get("".concat(v.N.apiURL,"Admin/returnSearchedUnitsBySubjectId/").concat(e))}},{key:"getUnitById",value:function(e){return this.http.get(v.N.apiURL+"Admin/EditUnitView/"+e)}},{key:"addUpdateUnit",value:function(e){return this.http.post(v.N.apiURL+"Admin/AddSubjectUnitPost",e)}},{key:"deleteUnit",value:function(e){return this.http.post(v.N.apiURL+"Admin/RemoveUnit/"+e,null)}},{key:"getLessons",value:function(e){return this.http.get(v.N.apiURL+"Admin/returnSearchedLessonsByUnitId/"+e)}},{key:"getLessonById",value:function(e){return this.http.get(v.N.apiURL+"Admin/EditLessonView/"+e)}},{key:"addUpdateLesson",value:function(e,i){return this.http.post(v.N.apiURL+"Admin/AddSubjectLessonPost/"+e,i)}},{key:"deleteLesson",value:function(e){return this.http.post(v.N.apiURL+"Admin/RemoveLesson/"+e,null)}},{key:"getTopicsByLessonId",value:function(e,i){return this.http.get("".concat(v.N.apiURL,"Admin/GetTopicsByLessonIdTable/").concat(e,"/").concat(i))}},{key:"getTopicById",value:function(e,i){return this.http.get(v.N.apiURL+"Admin/getTopicById/"+e+"/"+i)}},{key:"addUpdateTopic",value:function(e){return this.http.post(v.N.apiURL+"Admin/SubmitTopic",e)}},{key:"deleteTopic",value:function(e){return this.http.post(v.N.apiURL+"Admin/RemoveTopic/"+e,null)}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.LFG(et.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),B=f(4159),k=f(6256),b=f(6405),_=f(9224),y=f(7423),nt=f(3251),Y=f(9814),Z=f(7322),E=f(4107),G=f(508),j=f(7531),H=f(6856),J=f(1069),I=f(8966),V=f(9772),S=f(1195);function st(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function ut(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function dt(n,o){if(1&n&&(t.TgZ(0,"mat-hint",15),t.YNc(1,st,3,3,"span",16),t.YNc(2,ut,3,3,"span",16),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.Name.errors?null:a.FormCtrl.Name.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.Name.errors?null:a.FormCtrl.Name.errors.whiteSpace)}}function ct(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.MustChoosevalue")," "))}function mt(n,o){if(1&n&&(t.TgZ(0,"mat-hint",15),t.YNc(1,ct,3,3,"span",16),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.videoTypeId.errors?null:a.FormCtrl.videoTypeId.errors.required)}}function pt(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function gt(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function ht(n,o){if(1&n&&(t.TgZ(0,"mat-hint",15),t.YNc(1,pt,3,3,"span",16),t.YNc(2,gt,3,3,"span",16),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.Path.errors?null:a.FormCtrl.Path.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.Path.errors?null:a.FormCtrl.Path.errors.whiteSpace)}}function _t(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function ft(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Zt(n,o){if(1&n&&(t.TgZ(0,"mat-hint",15),t.YNc(1,_t,3,3,"span",16),t.YNc(2,ft,3,3,"span",16),t.qZA()),2&n){var a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.SecondaryPath.errors?null:a.FormCtrl.SecondaryPath.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.SecondaryPath.errors?null:a.FormCtrl.SecondaryPath.errors.whiteSpace)}}function vt(n,o){if(1&n&&(t.TgZ(0,"div",2),t.TgZ(1,"mat-form-field",3),t.TgZ(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",17),t.YNc(6,Zt,3,2,"mat-hint",5),t.qZA(),t.qZA()),2&n){var a=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,2,"labels.Link")," - Vimeo"),t.xp6(3),t.Q6J("ngIf",a.FormCtrl.SecondaryPath.invalid&&(a.FormCtrl.SecondaryPath.touched||a.submitted))}}function At(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function bt(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Tt(n,o){if(1&n&&(t.TgZ(0,"mat-hint",15),t.YNc(1,At,3,3,"span",16),t.YNc(2,bt,3,3,"span",16),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.view_percentage.errors?null:a.FormCtrl.view_percentage.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.view_percentage.errors?null:a.FormCtrl.view_percentage.errors.minusNum)}}function Ct(n,o){1&n&&(t.TgZ(0,"td"),t._uU(1,"VideoCipher"),t.qZA())}function It(n,o){1&n&&(t.TgZ(0,"td"),t._uU(1,"Vimeo"),t.qZA())}function qt(n,o){1&n&&(t.TgZ(0,"td"),t._uU(1,"Sprout Video"),t.qZA())}function xt(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"tr",21),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.YNc(3,Ct,2,0,"td",16),t.YNc(4,It,2,0,"td",16),t.YNc(5,qt,2,0,"td",16),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t.TgZ(9,"a",22),t.NdJ("click",function(){var l=t.CHM(a).$implicit;return t.oxw(2).getPartById(l.Id)}),t._UZ(10,"i",23),t.qZA(),t.TgZ(11,"a",24),t.NdJ("click",function(){var l=t.CHM(a).$implicit;return t.oxw(2).openDeleateDialog(l)}),t._UZ(12,"i",25),t.qZA(),t.qZA(),t.qZA()}if(2&n){var e=o.$implicit;t.Q6J("id",e.Id),t.xp6(2),t.Oqu(e.Name),t.xp6(1),t.Q6J("ngIf",1==e.videoTypeId),t.xp6(1),t.Q6J("ngIf",2==e.videoTypeId),t.xp6(1),t.Q6J("ngIf",3==e.videoTypeId),t.xp6(2),t.Oqu(e.view_percentage)}}function yt(n,o){if(1&n&&(t.ynx(0,18),t.TgZ(1,"table",19),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"action"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"tbody"),t.YNc(16,xt,13,6,"tr",20),t.qZA(),t.qZA(),t.BQk()),2&n){var a=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,4,"labels.Name")," "),t.xp6(3),t.Oqu(t.lcZ(9,6,"labels.Type")),t.xp6(3),t.hij(" ",t.lcZ(12,8,"labels.ConfirmViewPercentage")," "),t.xp6(5),t.Q6J("ngForOf",a.parts)}}var St=function(){var n=function(){function o(a,e,i,r,l){(0,x.Z)(this,o),this.fb=a,this.toastr=e,this.SubjectMaterialsService=i,this.spinner=r,this.dialog=l,this.parts=[],this.submitted=!1}return(0,q.Z)(o,[{key:"ngOnInit",value:function(){var e;this.myForm=this.fb.group({materialId:[this.materialId,s.kI.required],Id:[null],videoTypeId:["",s.kI.required],Name:["",[s.kI.required,U.D.whiteSpace]],Path:[""],SecondaryPath:[""],view_percentage:[90,[s.kI.required,U.D.minusNum]]}),(null!=this.materialId||null!=this.materialId)&&(null===(e=this.FormCtrl.materialId)||void 0===e||e.setValue(this.materialId),this.getMaterialParts())}},{key:"ngOnChanges",value:function(){var e;(null!=this.materialId||null!=this.materialId)&&(null===(e=this.FormCtrl.materialId)||void 0===e||e.setValue(this.materialId),this.getMaterialParts())}},{key:"FormCtrl",get:function(){return this.myForm.controls}},{key:"getMaterialParts",value:function(){var e=this;this.spinner.show(),this.SubjectMaterialsService.getMaterialParts(this.materialId).subscribe(function(i){1==i.returnValue&&(e.parts=i.MaterialParts),e.spinner.hide()})}},{key:"getPartById",value:function(e){var i=this;this.spinner.show(),this.SubjectMaterialsService.getPartById(e).subscribe(function(r){i.myForm.patchValue(r.MaterialPart),i.spinner.hide()})}},{key:"addPart",value:function(){var e=this;this.submitted=!0,this.myForm.valid&&(this.spinner.show(),this.SubjectMaterialsService.addPart(this.myForm.value).subscribe(function(i){var r,l,u;1==i.returnValue&&(e.getMaterialParts(),e.myForm.reset(),null===(r=e.FormCtrl.videoTypeId)||void 0===r||r.setValue(""),null===(l=e.FormCtrl.materialId)||void 0===l||l.setValue(e.materialId),null===(u=e.FormCtrl.view_percentage)||void 0===u||u.setValue(90),e.toastr.success(null==e.myForm.controls.Id?"\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u062c\u0632\u0621 \u0627\u0644\u0645\u062d\u0627\u0636\u0631\u0629":"\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u062c\u0632\u0621 \u0627\u0644\u0645\u062d\u0627\u0636\u0631\u0629"),e.submitted=!1),e.spinner.hide()}))}},{key:"deletePart",value:function(e){var i=this;this.spinner.show(),this.SubjectMaterialsService.deletePart(e.Id).subscribe(function(r){if(1==r.returnValue){var l=i.parts.indexOf(e);i.parts.splice(l,1),i.toastr.success("\u062a\u0645 \u0627\u0644\u062d\u0630\u0641"),i.spinner.hide()}})}},{key:"openDeleateDialog",value:function(e){var i=this;this.dialog.open(J.F,{data:{msg:e.Name}}).afterClosed().subscribe(function(r){r&&i.deletePart(e)})}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(s.qu),t.Y36(L._W),t.Y36(B.r),t.Y36(b.t2),t.Y36(I.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-material-parts"]],inputs:{materialId:"materialId"},features:[t.TTD],decls:45,vars:29,consts:[[1,"form-container",3,"formGroup"],[1,"row"],[1,"col-md-6","col-6"],["appearance","legacy"],["matInput","","type","text","formControlName","Name"],["class","text-danger",4,"ngIf"],[1,"col-md-6","col-12"],["formControlName","videoTypeId"],[3,"value"],["matInput","","type","text","formControlName","Path"],["class","col-md-6 col-6",4,"ngIf"],["matInput","","type","number","formControlName","view_percentage"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"disabled","click"],["class","table-responsive",4,"ngIf"],[1,"text-danger"],[4,"ngIf"],["matInput","","type","text","formControlName","SecondaryPath"],[1,"table-responsive"],[1,"table","table-striped","m-0"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],["matTooltip","Edit",1,"success","p-0",3,"click"],[1,"ft-edit-2","font-medium-3","mr-2"],["matTooltip","Delete",1,"danger","p-0",3,"click"],[1,"ft-trash","font-medium-3","mr-2"]],template:function(a,e){1&a&&(t.TgZ(0,"form",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"mat-form-field",3),t.TgZ(4,"mat-label"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"input",4),t.YNc(8,dt,3,2,"mat-hint",5),t.qZA(),t.qZA(),t.TgZ(9,"div",6),t.TgZ(10,"mat-form-field",3),t.TgZ(11,"mat-label"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"mat-select",7),t.TgZ(15,"mat-option"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"mat-option",8),t._uU(19,"VideoCipher"),t.qZA(),t.TgZ(20,"mat-option",8),t._uU(21,"Vimeo"),t.qZA(),t.TgZ(22,"mat-option",8),t._uU(23,"SproutVideo"),t.qZA(),t.qZA(),t.YNc(24,mt,2,1,"mat-hint",5),t.qZA(),t.qZA(),t.TgZ(25,"div",2),t.TgZ(26,"mat-form-field",3),t.TgZ(27,"mat-label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",9),t.YNc(31,ht,3,2,"mat-hint",5),t.qZA(),t.qZA(),t.YNc(32,vt,7,4,"div",10),t.TgZ(33,"div",2),t.TgZ(34,"mat-form-field",3),t.TgZ(35,"mat-label"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t._UZ(38,"input",11),t.YNc(39,Tt,3,2,"mat-hint",5),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"mat-card-actions",12),t.TgZ(41,"button",13),t.NdJ("click",function(){return e.addPart()}),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.qZA(),t.YNc(44,yt,17,10,"ng-container",14)),2&a&&(t.Q6J("formGroup",e.myForm),t.xp6(5),t.hij(" ",t.lcZ(6,17,"labels.Name")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrl.Name.invalid&&(e.FormCtrl.Name.touched||e.submitted)),t.xp6(4),t.hij("",t.lcZ(13,19,"labels.Type")," "),t.xp6(4),t.hij(" ",t.lcZ(17,21,"General.Choose"),""),t.xp6(2),t.Q6J("value",1),t.xp6(2),t.Q6J("value",2),t.xp6(2),t.Q6J("value",3),t.xp6(2),t.Q6J("ngIf",e.FormCtrl.videoTypeId.invalid&&(e.FormCtrl.videoTypeId.touched||e.submitted)),t.xp6(4),t.hij(" ",t.lcZ(29,23,"labels.Link")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrl.Path.invalid&&(e.FormCtrl.Path.touched||e.submitted)),t.xp6(1),t.Q6J("ngIf",3==e.FormCtrl.videoTypeId.value),t.xp6(4),t.hij(" ",t.lcZ(37,25,"labels.ConfirmViewPercentage")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrl.view_percentage.invalid&&(e.FormCtrl.view_percentage.touched||e.submitted)),t.xp6(2),t.Q6J("disabled",null==e.FormCtrl.materialId.value||null==e.FormCtrl.materialId.value),t.xp6(1),t.hij(" ",t.lcZ(43,27,"General.Save")," "),t.xp6(2),t.Q6J("ngIf",e.parts.length>0))},directives:[s._Y,s.JL,s.sg,Z.KE,Z.hX,j.Nt,s.Fj,s.JJ,s.u,C.O5,E.gD,G.ey,s.wV,_.hq,y.lW,Z.bx,C.sg,V.gM],pipes:[S.X$],styles:[""]}),n}(),Ut=f(8246);function jt(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Ft(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Lt(n,o){if(1&n&&(t.TgZ(0,"mat-hint",14),t.YNc(1,jt,3,3,"span",15),t.YNc(2,Ft,3,3,"span",15),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.materialName.errors?null:a.FormCtrl.materialName.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.materialName.errors?null:a.FormCtrl.materialName.errors.whiteSpace)}}function Nt(n,o){if(1&n&&(t.TgZ(0,"div",16),t.TgZ(1,"div",17),t._UZ(2,"embed",18),t.ALo(3,"safe"),t.qZA(),t.qZA()),2&n){var a=t.oxw();t.xp6(2),t.Q6J("type",a.type)("src",t.lcZ(3,2,a.Filepath),t.uOi)}}function Mt(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"tr",22),t.TgZ(1,"td"),t.TgZ(2,"a",23),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"td"),t.TgZ(5,"a",24),t.NdJ("click",function(){var l=t.CHM(a).$implicit;return t.oxw(2).openDeleateDialog(l)}),t._UZ(6,"i",25),t.qZA(),t.qZA(),t.qZA()}if(2&n){var e=o.$implicit;t.Q6J("id",e.Id),t.xp6(2),t.Q6J("href",e.file,t.LSH),t.xp6(1),t.Oqu(e.materialName)}}function wt(n,o){if(1&n&&(t.ynx(0,19),t.TgZ(1,"table",20),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"action"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"tbody"),t.YNc(10,Mt,7,3,"tr",21),t.qZA(),t.qZA(),t.BQk()),2&n){var a=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,2,"labels.Name")," "),t.xp6(5),t.Q6J("ngForOf",a.Attaches)}}var kt=function(){var n=function(){function o(a,e,i,r,l){(0,x.Z)(this,o),this.fb=a,this.toastr=e,this.SubjectMaterialsService=i,this.spinner=r,this.dialog=l,this.Attaches=[],this.submitted=!1}return(0,q.Z)(o,[{key:"ngOnInit",value:function(){var e,i;this.myForm=this.fb.group({materialId:[this.materialId,s.kI.required],materialName:["",[s.kI.required,U.D.whiteSpace]],fileBase64:[null,[s.kI.required]]}),(null!=this.materialId||null!=this.materialId)&&(null===(i=null===(e=this.FormCtrl)||void 0===e?void 0:e.materialId)||void 0===i||i.setValue(this.materialId),this.getMaterialAttaches())}},{key:"ngOnChanges",value:function(){var e,i;(null!=this.materialId||null!=this.materialId)&&(null===(i=null===(e=this.FormCtrl)||void 0===e?void 0:e.materialId)||void 0===i||i.setValue(this.materialId),this.getMaterialAttaches())}},{key:"FormCtrl",get:function(){var e;return null===(e=this.myForm)||void 0===e?void 0:e.controls}},{key:"getMaterialAttaches",value:function(){var e=this;this.spinner.show(),this.SubjectMaterialsService.getMaterialAttaches(this.materialId).subscribe(function(i){1==i.returnValue&&(e.Attaches=i.MaterialAttachs),e.spinner.hide()})}},{key:"addAttach",value:function(){var i,e=this;this.submitted=!0,(null===(i=this.FormCtrl.fileBase64)||void 0===i?void 0:i.value)?this.myForm.valid&&(this.spinner.show(),this.SubjectMaterialsService.addAttach({mat_attach:this.myForm.value}).subscribe(function(l){e.myForm.reset(),e.getMaterialAttaches(),e.toastr.success("Attach Added successfully"),e.submitted=!1,e.spinner.hide()})):this.toastr.warning("Must Choose File")}},{key:"deleteAttach",value:function(e){var i=this;this.spinner.show(),this.SubjectMaterialsService.deleteAttach(e.Id).subscribe(function(r){if(1==r.returnValue){var l=i.Attaches.indexOf(e);i.Attaches.splice(l,1),i.toastr.success("\u062a\u0645 \u0627\u0644\u062d\u0630\u0641")}i.spinner.hide()})}},{key:"openDeleateDialog",value:function(e){var i=this;this.dialog.open(J.F,{data:{msg:e.materialName}}).afterClosed().subscribe(function(r){r&&i.deleteAttach(e)})}},{key:"onChange",value:function(e){var i=this,r=e.target.files[0].name,l=e.target.files[0].size,u=e.target.files[0].type,c=e.target.files[0].lastModified,m=e.target.files[0].lastModifiedDate;if(e.target.files){var d=new FileReader;d.readAsDataURL(e.target.files[0]),d.onload=function(p){var h=p.target.result,T={FileAsBase64:h.replace("data:application/pdf;base64,",""),name:r,size:l,type:u,LastModified:c,LastModifiedDate:m};i.Filepath=h,i.type=u,i.FormCtrl.fileBase64.setValue(T)}}}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(s.qu),t.Y36(L._W),t.Y36(B.r),t.Y36(b.t2),t.Y36(I.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-material-files"]],inputs:{materialId:"materialId"},features:[t.TTD],decls:21,vars:14,consts:[[1,"form-container",3,"formGroup"],[1,"row"],[1,"col-md-6","col-6"],["appearance","legacy"],["matInput","","type","text","formControlName","materialName"],["class","text-danger",4,"ngIf"],[1,"col-md-2","col-12"],["type","button","mat-raised-button","",1,"btn","btn-danger",3,"click"],["hidden","","type","file","id","file",3,"change"],["fileInput",""],["class","col-12",4,"ngIf"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"disabled","click"],["class","table-responsive",4,"ngIf"],[1,"text-danger"],[4,"ngIf"],[1,"col-12"],[1,"media"],["width","300","height","300",3,"type","src"],[1,"table-responsive"],[1,"table","table-striped","m-0"],[3,"id",4,"ngFor","ngForOf"],[3,"id"],["target","_blank",3,"href"],["matTooltip","Delete",1,"danger","p-0",3,"click"],[1,"ft-trash","font-medium-3","mr-2"]],template:function(a,e){if(1&a){var i=t.EpF();t.TgZ(0,"form",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"mat-form-field",3),t.TgZ(4,"mat-label"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t._UZ(7,"input",4),t.YNc(8,Lt,3,2,"mat-hint",5),t.qZA(),t.qZA(),t.TgZ(9,"div",6),t.TgZ(10,"button",7),t.NdJ("click",function(){return t.CHM(i),t.MAs(14).click()}),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"input",8,9),t.NdJ("change",function(l){return e.onChange(l)}),t.qZA(),t.qZA(),t.YNc(15,Nt,4,4,"div",10),t.qZA(),t.qZA(),t.TgZ(16,"mat-card-actions",11),t.TgZ(17,"button",12),t.NdJ("click",function(){return e.addAttach()}),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.qZA(),t.YNc(20,wt,11,4,"ng-container",13)}2&a&&(t.Q6J("formGroup",e.myForm),t.xp6(5),t.hij(" ",t.lcZ(6,8,"labels.Name")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrl.materialName.invalid&&(e.FormCtrl.materialName.touched||e.submitted)),t.xp6(3),t.hij(" ",t.lcZ(12,10,"labels.UploadFile")," "),t.xp6(4),t.Q6J("ngIf",e.Filepath),t.xp6(2),t.Q6J("disabled",null==e.FormCtrl.materialId.value||null==e.FormCtrl.materialId.value),t.xp6(1),t.hij(" ",t.lcZ(19,12,"General.Save")," "),t.xp6(2),t.Q6J("ngIf",e.Attaches.length>0))},directives:[s._Y,s.JL,s.sg,Z.KE,Z.hX,j.Nt,s.Fj,s.JJ,s.u,C.O5,y.lW,_.hq,Z.bx,C.sg,V.gM],pipes:[S.X$,Ut.y],styles:[""]}),n}();function Yt(n,o){if(1&n&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.exam_ar_name," ")}}function Jt(n,o){if(1&n&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.Id),t.xp6(1),t.hij(" ",a.Name," ")}}function Dt(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Qt(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function Et(n,o){if(1&n&&(t.TgZ(0,"mat-hint",14),t.YNc(1,Dt,3,3,"span",15),t.YNc(2,Qt,3,3,"span",15),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.percentageToPass.errors?null:a.FormCtrl.percentageToPass.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.percentageToPass.errors?null:a.FormCtrl.percentageToPass.errors.minusNum)}}function Gt(n,o){if(1&n&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){var a=t.oxw().$implicit;t.xp6(1),t.AsE(" ",t.lcZ(2,2,"labels.Exam")," - ",a.examDetails.exam_ar_name," ")}}function Pt(n,o){if(1&n&&(t.TgZ(0,"td"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){var a=t.oxw().$implicit;t.xp6(1),t.AsE(" ",t.lcZ(2,2,"labels.Template")," - ",a.TemplateDetails.Name," ")}}function Bt(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"tr"),t.YNc(1,Gt,3,4,"td",15),t.YNc(2,Pt,3,4,"td",15),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t.TgZ(6,"a",19),t.NdJ("click",function(){var l=t.CHM(a).$implicit;return t.oxw(2).openDeleateDialog(l)}),t._UZ(7,"i",20),t.qZA(),t.qZA(),t.qZA()}if(2&n){var e=o.$implicit;t.xp6(1),t.Q6J("ngIf",null!=e.examId),t.xp6(1),t.Q6J("ngIf",null!=e.templateId),t.xp6(2),t.Oqu(null==e?null:e.percentageToPass)}}function Ot(n,o){if(1&n&&(t.ynx(0,16),t.TgZ(1,"table",17),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"action"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"tbody"),t.YNc(13,Bt,8,3,"tr",18),t.qZA(),t.qZA(),t.BQk()),2&n){var a=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,3,"labels.Exam")," "),t.xp6(3),t.Oqu(t.lcZ(9,5,"labels.percentageToPass")),t.xp6(5),t.Q6J("ngForOf",a.AttachedQuiz)}}var Vt=function(){var n=function(){function o(a,e,i,r,l,u,c){var m=this;(0,x.Z)(this,o),this.fb=a,this.route=e,this.toastr=i,this.spinner=r,this.AuthService=l,this.SubjectMaterialsService=u,this.dialog=c,this.exams=[],this.templates=[],this.submitted=!1,this.noExamerr=!1,this.route.queryParamMap.subscribe(function(d){m.subjectId=d.get("subjectId")})}return(0,q.Z)(o,[{key:"ngOnInit",value:function(){var e;this.EduCompId=this.AuthService.getEduCompId(),this.myForm=this.fb.group({materialId:[this.materialId,s.kI.required],examId:[null],templateId:[null],percentageToPass:["",[s.kI.required,U.D.minusNum]]}),(null!=this.materialId||null!=this.materialId)&&(null===(e=this.FormCtrl.materialId)||void 0===e||e.setValue(this.materialId),this.getExamsAndTemplates(),this.getMaterialQuizes())}},{key:"ngOnChanges",value:function(){var e;(null!=this.materialId||null!=this.materialId)&&(null===(e=this.FormCtrl.materialId)||void 0===e||e.setValue(this.materialId),this.getExamsAndTemplates(),this.getMaterialQuizes())}},{key:"FormCtrl",get:function(){return this.myForm.controls}},{key:"getExamsAndTemplates",value:function(){var e=this;this.spinner.show(),this.SubjectMaterialsService.getExamsAndTemplates(this.EduCompId,this.subjectId,this.materialId).subscribe(function(i){e.exams=i.examsList,e.templates=i.templatesList,e.spinner.hide()})}},{key:"getMaterialQuizes",value:function(){var e=this;this.spinner.show(),this.SubjectMaterialsService.getMaterialQuizes(this.materialId).subscribe(function(i){console.log(i),e.AttachedQuiz=i,e.spinner.hide()})}},{key:"addMaterialQuiz",value:function(){var e=this;this.submitted=!0,this.FormCtrl.examId.value||this.FormCtrl.templateId.value?this.myForm.valid&&(this.spinner.show(),this.SubjectMaterialsService.addMaterialQuiz(this.materialId,this.myForm.value).subscribe(function(i){(i.returnValue=1)&&(e.myForm.reset(),e.submitted=!1,e.getMaterialQuizes(),e.toastr.success("Exam Added successfully")),e.spinner.hide()})):this.toastr.warning("Must Choose Exam or Template")}},{key:"deleteMaterialQuiz",value:function(e){var i=this;this.spinner.show(),this.SubjectMaterialsService.deleteMaterialQuiz(e.Id).subscribe(function(r){if(1==r.returnValue){var l=i.AttachedQuiz.indexOf(e);i.AttachedQuiz.splice(l,1),i.toastr.success("\u062a\u0645 \u0627\u0644\u062d\u0630\u0641")}i.spinner.hide()})}},{key:"openDeleateDialog",value:function(e){var r,l,i=this;this.dialog.open(J.F,{data:{msg:(null===(r=e.TemplateDetails)||void 0===r?void 0:r.Name)||(null===(l=e.examDetails)||void 0===l?void 0:l.exam_ar_name)}}).afterClosed().subscribe(function(u){u&&i.deleteMaterialQuiz(e)})}},{key:"examValidator",value:function(){null!=this.myForm.controls.examId.value&&this.myForm.controls.templateId.setValue(null)}},{key:"TemplateValidator",value:function(){null!=this.myForm.controls.templateId.value&&this.myForm.controls.examId.setValue(null)}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(s.qu),t.Y36(A.gz),t.Y36(L._W),t.Y36(b.t2),t.Y36(k.e),t.Y36(B.r),t.Y36(I.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-material-exam"]],inputs:{materialId:"materialId"},features:[t.TTD],decls:34,vars:24,consts:[[1,"form-container",3,"formGroup"],[1,"row"],[1,"col-md-6","col-12"],["appearance","legacy"],["formControlName","examId",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","templateId",3,"selectionChange"],[1,"col-md-6","col-6"],["matInput","","type","number","formControlName","percentageToPass"],["class","text-danger",4,"ngIf"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"disabled","click"],["class","table-responsive",4,"ngIf"],[3,"value"],[1,"text-danger"],[4,"ngIf"],[1,"table-responsive"],[1,"table","table-striped","m-0"],[4,"ngFor","ngForOf"],["matTooltip","Delete",1,"danger","p-0",3,"click"],[1,"ft-trash","font-medium-3","mr-2"]],template:function(a,e){1&a&&(t.TgZ(0,"form",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"mat-form-field",3),t.TgZ(4,"mat-label"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"mat-select",4),t.NdJ("selectionChange",function(){return e.examValidator()}),t.TgZ(8,"mat-option"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.YNc(11,Yt,2,2,"mat-option",5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",2),t.TgZ(13,"mat-form-field",3),t.TgZ(14,"mat-label"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"mat-select",6),t.NdJ("selectionChange",function(){return e.examValidator()}),t.TgZ(18,"mat-option"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.YNc(21,Jt,2,2,"mat-option",5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",7),t.TgZ(23,"mat-form-field",3),t.TgZ(24,"mat-label"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t._UZ(27,"input",8),t.YNc(28,Et,3,2,"mat-hint",9),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(29,"mat-card-actions",10),t.TgZ(30,"button",11),t.NdJ("click",function(){return e.addMaterialQuiz()}),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.qZA(),t.YNc(33,Ot,14,7,"ng-container",12)),2&a&&(t.Q6J("formGroup",e.myForm),t.xp6(5),t.hij("",t.lcZ(6,12,"labels.Exam")," "),t.xp6(4),t.hij(" ",t.lcZ(10,14,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",e.exams),t.xp6(4),t.hij("",t.lcZ(16,16,"labels.Template")," "),t.xp6(4),t.hij(" ",t.lcZ(20,18,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",e.templates),t.xp6(4),t.hij(" ",t.lcZ(26,20,"labels.percentageToPass")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrl.percentageToPass.invalid&&(e.FormCtrl.percentageToPass.touched||e.submitted)),t.xp6(2),t.Q6J("disabled",null==e.FormCtrl.materialId.value||null==e.FormCtrl.materialId.value),t.xp6(1),t.hij(" ",t.lcZ(32,22,"General.Save")," "),t.xp6(2),t.Q6J("ngIf",(null==e.AttachedQuiz?null:e.AttachedQuiz.length)>0))},directives:[s._Y,s.JL,s.sg,Z.KE,Z.hX,E.gD,s.JJ,s.u,G.ey,C.sg,j.Nt,s.wV,s.Fj,C.O5,_.hq,y.lW,Z.bx,V.gM],pipes:[S.X$],styles:[""]}),n}();function Rt(n,o){if(1&n&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.teacherUserId),t.xp6(1),t.hij(" ",a.teacher_ar_name," ")}}function zt(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.MustChoosevalue")," "))}function $t(n,o){if(1&n&&(t.TgZ(0,"mat-hint",36),t.YNc(1,zt,3,3,"span",29),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.teacherUserId.errors?null:a.FormCtrl.teacherUserId.errors.required)}}function Ht(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Xt(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Wt(n,o){if(1&n&&(t.TgZ(0,"mat-hint",36),t.YNc(1,Ht,3,3,"span",29),t.YNc(2,Xt,3,3,"span",29),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.materialName.errors?null:a.FormCtrl.materialName.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.materialName.errors?null:a.FormCtrl.materialName.errors.whiteSpace)}}function Kt(n,o){if(1&n&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.Id),t.xp6(1),t.hij(" ",a.groupName," ")}}function te(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.MustChoosevalue")," "))}function ee(n,o){if(1&n&&(t.TgZ(0,"mat-hint",36),t.YNc(1,te,3,3,"span",29),t.qZA()),2&n){var a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.studentGroupIDs.errors?null:a.FormCtrl.studentGroupIDs.errors.required)}}function ne(n,o){if(1&n&&(t.TgZ(0,"mat-form-field",12),t.TgZ(1,"mat-label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-select",37),t.TgZ(5,"mat-option"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.YNc(8,Kt,2,2,"mat-option",14),t.qZA(),t.YNc(9,ee,2,1,"mat-hint",15),t.qZA()),2&n){var a=t.oxw();t.xp6(2),t.hij("",t.lcZ(3,4,"labels.Group")," "),t.xp6(4),t.hij(" ",t.lcZ(7,6,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",a.groups),t.xp6(1),t.Q6J("ngIf",a.FormCtrl.studentGroupIDs.invalid&&(a.FormCtrl.studentGroupIDs.touched||a.submitted))}}function ae(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function ie(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function oe(n,o){if(1&n&&(t.TgZ(0,"mat-hint",36),t.YNc(1,ae,3,3,"span",29),t.YNc(2,ie,3,3,"span",29),t.qZA()),2&n){var a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.num_views.errors?null:a.FormCtrl.num_views.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.num_views.errors?null:a.FormCtrl.num_views.errors.minusNum)}}function re(n,o){if(1&n&&(t.TgZ(0,"div",16),t.TgZ(1,"mat-form-field",12),t.TgZ(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",38),t.YNc(6,oe,3,2,"mat-hint",15),t.qZA(),t.qZA()),2&n){var a=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,2,"labels.NumberViews")," "),t.xp6(3),t.Q6J("ngIf",a.FormCtrl.num_views.invalid&&(a.FormCtrl.num_views.touched||a.submitted))}}function le(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function se(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function ue(n,o){if(1&n&&(t.TgZ(0,"mat-hint",36),t.YNc(1,le,3,3,"span",29),t.YNc(2,se,3,3,"span",29),t.qZA()),2&n){var a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.address.errors?null:a.FormCtrl.address.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.address.errors?null:a.FormCtrl.address.errors.whiteSpace)}}function de(n,o){if(1&n&&(t.TgZ(0,"div",16),t.TgZ(1,"mat-form-field",12),t.TgZ(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",39),t.YNc(6,ue,3,2,"mat-hint",15),t.qZA(),t.qZA()),2&n){var a=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,2,"labels.Address")," "),t.xp6(3),t.Q6J("ngIf",a.FormCtrl.address.invalid&&(a.FormCtrl.address.touched||a.submitted))}}function ce(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1," You must enter a date. "),t.qZA())}function me(n,o){if(1&n&&(t.TgZ(0,"mat-hint",36),t.YNc(1,ce,2,0,"span",29),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.fromDate.errors?null:a.FormCtrl.fromDate.errors.required)}}function pe(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function ge(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function he(n,o){if(1&n&&(t.TgZ(0,"mat-hint",36),t.YNc(1,pe,3,3,"span",29),t.YNc(2,ge,3,3,"span",29),t.qZA()),2&n){var a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.materialPrice.errors?null:a.FormCtrl.materialPrice.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.materialPrice.errors?null:a.FormCtrl.materialPrice.errors.minusNum)}}function _e(n,o){if(1&n&&(t.TgZ(0,"div",16),t.TgZ(1,"mat-form-field",12),t.TgZ(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",40),t.YNc(6,he,3,2,"mat-hint",15),t.qZA(),t.qZA()),2&n){var a=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,2,"labels.Price")," "),t.xp6(3),t.Q6J("ngIf",a.FormCtrl.materialPrice.invalid&&(a.FormCtrl.materialPrice.touched||a.submitted))}}function fe(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Ze(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function ve(n,o){if(1&n&&(t.TgZ(0,"mat-hint",36),t.YNc(1,fe,3,3,"span",29),t.YNc(2,Ze,3,3,"span",29),t.qZA()),2&n){var a=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.codePrice.errors?null:a.FormCtrl.codePrice.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl.codePrice.errors?null:a.FormCtrl.codePrice.errors.minusNum)}}function Ae(n,o){if(1&n&&(t.TgZ(0,"div",16),t.TgZ(1,"mat-form-field",12),t.TgZ(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._UZ(5,"input",41),t.YNc(6,ve,3,2,"mat-hint",15),t.qZA(),t.qZA()),2&n){var a=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,2,"labels.CodePrice")," "),t.xp6(3),t.Q6J("ngIf",a.FormCtrl.codePrice.invalid&&(a.FormCtrl.codePrice.touched||a.submitted))}}function be(n,o){1&n&&(t.ynx(0),t.TgZ(1,"div",16),t.TgZ(2,"mat-form-field",12),t.TgZ(3,"mat-label"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t._UZ(6,"input",42),t.qZA(),t.qZA(),t.TgZ(7,"div",16),t.TgZ(8,"mat-form-field",12),t.TgZ(9,"mat-label"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"mat-select",43),t.TgZ(13,"mat-option"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"mat-option",10),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.TgZ(19,"mat-option",10),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()),2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,7,"labels.Discount")," "),t.xp6(6),t.hij(" ",t.lcZ(11,9,"labels.DiscountType")," "),t.xp6(4),t.hij(" ",t.lcZ(15,11,"General.Choose"),""),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.hij(" ",t.lcZ(18,13,"labels.GeneralDiscount")," "),t.xp6(2),t.Q6J("value",2),t.xp6(1),t.hij(" ",t.lcZ(21,15,"labels.privateDiscount")," "))}function Te(n,o){if(1&n&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.unit_ar_name," ")}}function Ce(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"div",44),t.TgZ(1,"mat-form-field",12),t.TgZ(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"mat-select",45),t.NdJ("selectionChange",function(){t.CHM(a);var r=t.oxw();return r.returnSearchedLessonsByUnitId(null==r.FormCtrl.unitId?null:r.FormCtrl.unitId.value)}),t.TgZ(6,"mat-option"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.YNc(9,Te,2,2,"mat-option",14),t.qZA(),t.qZA(),t.qZA()}if(2&n){var e=t.oxw();t.xp6(3),t.hij("",t.lcZ(4,3,"labels.Unit")," "),t.xp6(4),t.hij(" ",t.lcZ(8,5,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",e.units)}}function Ie(n,o){if(1&n&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.lesson_ar_name," ")}}function qe(n,o){if(1&n&&(t.TgZ(0,"div",44),t.TgZ(1,"mat-form-field",12),t.TgZ(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"mat-select",46),t.TgZ(6,"mat-option"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.YNc(9,Ie,2,2,"mat-option",14),t.qZA(),t.qZA(),t.qZA()),2&n){var a=t.oxw();t.xp6(3),t.hij("",t.lcZ(4,3,"labels.Lesson")," "),t.xp6(4),t.hij(" ",t.lcZ(8,5,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",a.Lessons)}}function xe(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"input",47),t.NdJ("change",function(i){return t.CHM(a),t.oxw().onChange(i)}),t.qZA(),t.qZA()}}var ye=function(o,a){return{functionId:o,parentId:a}},Se=function(){var n=function(){function o(a,e,i,r,l,u,c,m){var d=this;(0,x.Z)(this,o),this.route=a,this.router=e,this.fb=i,this.toastr=r,this.SubjectsService=l,this.SubjectMaterialsService=u,this.authserv=c,this.spinner=m,this.submitted=!1,this.Teachers=[],this.getGroupsValue=[],this.route.queryParamMap.subscribe(function(p){d.materialId=p.get("materialId"),d.subjectId=p.get("subjectId"),d.functionId=Number(p.get("functionId")),d.parentId=Number(p.get("parentId")),d.functionId&&d.authserv.getUserRowFunctions(d.functionId).subscribe(function(h){h&&(d.rowFunctions=h,console.log("row-Function:",h))}),console.log("materialId:",d.materialId),console.log("subjectId:",d.subjectId),console.log("functionId:",d.functionId),d.getSubjectByID(d.subjectId),d.returnSearchedUnitsBySubjectId()})}return(0,q.Z)(o,[{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.branchId=this.authserv.getBranchId(),this.getTeacherByEduCompId(),this.getGroupsByEduCompId(),this.myForm=this.fb.group({subjectId:[this.subjectId,s.kI.required],EditedMaterialId:[this.materialId],teacherUserId:["",s.kI.required],selectedItemType:[1,s.kI.required],selectedItemId:["",s.kI.required],materialName:["",[s.kI.required,U.D.whiteSpace]],onlyCode:[!1,s.kI.required],CustomDiscountApplied:[!1,s.kI.required],CodeIsPurchasable:[!1,s.kI.required],IsOnline:[1,s.kI.required],num_views:[""],attachFile:[""],studentGroupIDs:[],address:[""],materialPrice:[""],priceDiscount:[""],codePrice:[""],priceDiscountType:["null",[U.D.minusNum]],fromDate:["",s.kI.required],toDate:[""],unitId:[""],lessonId:[""]}),this.onlyCodeValidators()}},{key:"FormCtrl",get:function(){return this.myForm.controls}},{key:"ngAfterViewInit",value:function(){var e=this;this.authserv.EduCompId.subscribe(function(i){e.EduCompId=i.EduCompId,e.getTeacherByEduCompId(),e.getGroupsByEduCompId()}),this.authserv.branchId.subscribe(function(i){e.branchId=i.branchId}),null!=this.materialId&&this.getMaterialById()}},{key:"addEditMaterial",value:function(){var i,r,l,u,c,m,d,e=this;this.submitted=!0;var h,p=null===(i=this.FormCtrl.selectedItemType)||void 0===i?void 0:i.value;1==p?h=this.subjectId:2==p?h=null===(r=this.FormCtrl.unitId)||void 0===r?void 0:r.value:3==p&&(h=null===(l=this.FormCtrl.lessonId)||void 0===l?void 0:l.value),null===(u=this.FormCtrl.selectedItemId)||void 0===u||u.setValue(h),2!=this.FormCtrl.IsOnline.value||(null===(m=null===(c=this.FormCtrl.studentGroupIDs)||void 0===c?void 0:c.value)||void 0===m?void 0:m.length)?1==this.FormCtrl.IsOnline.value&&(null===(d=this.FormCtrl.num_views)||void 0===d?void 0:d.value)<0?this.toastr.warning("Must Enter number of views"):(console.log(this.myForm.value),console.log(this.myForm),this.myForm.valid&&(this.spinner.show(),this.SubjectMaterialsService.addEditMaterial(this.EduCompId,this.branchId,this.myForm.value).subscribe(function(T){1==T.returnValue&&(e.toastr.success(null==e.materialId?"\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u062d\u0627\u0636\u0631\u0629":"\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u062d\u0627\u0636\u0631\u0629"),e.submitted=!1,e.materialId=T.Id,e.router.navigate([],{queryParams:{materialId:T.Id},queryParamsHandling:"merge"})),e.spinner.hide()}))):this.toastr.warning("Must Choose Group!")}},{key:"getMaterialById",value:function(){var e=this;this.spinner.show(),this.SubjectMaterialsService.getMaterialById(this.subjectId,this.materialId).subscribe(function(i){var r;1==i.retunValue&&(e.myForm.patchValue(i.model),e.materialName=i.model.materialName,e.FormCtrl.CustomDiscountApplied.setValue(i.model.CustomDiscountApplied||!1),2==(null===(r=i.model)||void 0===r?void 0:r.selectedItemType)?e.FormCtrl.unitId.setValue(i.model.selectedItemId):3==i.model.selectedItemType&&e.FormCtrl.lessonId.setValue(i.model.selectedItemId)),e.spinner.hide()})}},{key:"onChange",value:function(e){var i=this,r=e.target.files[0].name,l=e.target.files[0].size,u=e.target.files[0].type,c=e.target.files[0].lastModified,m=e.target.files[0].lastModifiedDate;if(e.target.files){var d=new FileReader;d.readAsDataURL(e.target.files[0]),d.onload=function(p){i.FormCtrl.attachFile.setValue({FileAsBase64:p.target.result,name:r,size:l,type:u,LastModified:c,LastModifiedDate:m})}}}},{key:"getGroupsByEduCompId",value:function(){var e=this;this.SubjectMaterialsService.getGroupsByEduCompId(this.EduCompId).subscribe(function(i){1==i.retunValue&&(e.groups=i.lstEduCompGroups)})}},{key:"getSubjectByID",value:function(e){var i=this;this.SubjectsService.getSubjectByID(e).subscribe(function(r){null!=r.subject_id&&(i.subject_ar_name=r.subject_ar_name)})}},{key:"getTeacherByEduCompId",value:function(){var e=this;this.spinner.show(),this.SubjectsService.getTeacherBySubjectAndEduCompId(this.EduCompId,this.subjectId).subscribe(function(i){1==i.retunValue&&(e.Teachers=i.teachers),e.spinner.hide()})}},{key:"returnSearchedUnitsBySubjectId",value:function(){var e=this;this.SubjectMaterialsService.returnSearchedUnitsBySubjectId(this.subjectId).subscribe(function(i){e.units=i})}},{key:"returnSearchedLessonsByUnitId",value:function(e){var i=this;this.SubjectMaterialsService.returnSearchedLessonsByUnitId(e).subscribe(function(r){i.Lessons=r})}},{key:"onlyCodeValidators",value:function(){var e=this.FormCtrl.codePrice.value;0==e&&(this.FormCtrl.codePrice.reset(),this.FormCtrl.codePrice.clearValidators(),this.FormCtrl.materialPrice.setValidators([s.kI.required,U.D.minusNum])),1==e&&(this.FormCtrl.materialPrice.reset(),this.FormCtrl.materialPrice.clearValidators(),this.FormCtrl.codePrice.setValidators([s.kI.required,U.D.minusNum])),this.FormCtrl.materialPrice.updateValueAndValidity(),this.FormCtrl.codePrice.updateValueAndValidity()}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(A.gz),t.Y36(A.F0),t.Y36(s.qu),t.Y36(L._W),t.Y36(w),t.Y36(B.r),t.Y36(k.e),t.Y36(b.t2))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-material-main-data"]],decls:129,vars:117,consts:[[1,"row"],[1,"col-12"],[1,"content-header"],[1,"card"],["mat-raised-button","",1,"btn","btn-warning","bg-light-warning","float-right",3,"routerLink","queryParams"],["mat-align-tabs","start"],[3,"label"],[1,"form-container",3,"formGroup"],["formControlName","IsOnline",1,"row"],[1,"col-md-3","col-12"],[3,"value"],[1,"col-md-4","col-12"],["appearance","legacy"],["formControlName","teacherUserId"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"col-md-4","col-6"],["matInput","","type","text","formControlName","materialName"],["appearance","legacy",4,"ngIf"],["class","col-md-4 col-6",4,"ngIf"],["matInput","","formControlName","fromDate",3,"matDatepicker"],["matSuffix","",3,"for"],["fromDate",""],["matInput","","formControlName","toDate",3,"matDatepicker"],["toDate",""],["formControlName","onlyCode"],[3,"value","change"],["formControlName","CustomDiscountApplied"],["formControlName","CodeIsPurchasable"],[4,"ngIf"],["formControlName","selectedItemType",1,"row"],["class","col-md-6 col-12",4,"ngIf"],["class","col-12",4,"ngIf"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],[3,"materialId"],[1,"text-danger"],["formControlName","studentGroupIDs","multiple",""],["matInput","","type","number","formControlName","num_views"],["matInput","","type","text","formControlName","address"],["matInput","","type","number","formControlName","materialPrice"],["matInput","","type","number","formControlName","codePrice"],["matInput","","type","number","formControlName","priceDiscount"],["formControlName","priceDiscountType"],[1,"col-md-6","col-12"],["formControlName","unitId",3,"selectionChange"],["formControlName","lessonId"],["type","file",1,"form-control",3,"change"]],template:function(a,e){if(1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"mat-card",3),t.TgZ(8,"mat-card-content"),t.TgZ(9,"mat-card-title"),t._uU(10),t.ALo(11,"translate"),t.TgZ(12,"a",4),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.TgZ(15,"mat-tab-group",5),t.TgZ(16,"mat-tab",6),t.ALo(17,"translate"),t.TgZ(18,"form",7),t.TgZ(19,"div",0),t.TgZ(20,"div",1),t.TgZ(21,"mat-radio-group",8),t.TgZ(22,"div",9),t.TgZ(23,"mat-radio-button",10),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.qZA(),t.TgZ(26,"div",9),t.TgZ(27,"mat-radio-button",10),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"div",11),t.TgZ(31,"mat-form-field",12),t.TgZ(32,"mat-label"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"mat-select",13),t.TgZ(36,"mat-option"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.YNc(39,Rt,2,2,"mat-option",14),t.qZA(),t.YNc(40,$t,2,1,"mat-hint",15),t.qZA(),t.qZA(),t.TgZ(41,"div",16),t.TgZ(42,"mat-form-field",12),t.TgZ(43,"mat-label"),t._uU(44),t.ALo(45,"translate"),t.qZA(),t._UZ(46,"input",17),t.YNc(47,Wt,3,2,"mat-hint",15),t.qZA(),t.qZA(),t.TgZ(48,"div",16),t.YNc(49,ne,10,8,"mat-form-field",18),t.qZA(),t.YNc(50,re,7,4,"div",19),t.YNc(51,de,7,4,"div",19),t.TgZ(52,"div",11),t.TgZ(53,"mat-form-field",12),t.TgZ(54,"mat-label"),t._uU(55),t.ALo(56,"translate"),t.qZA(),t._UZ(57,"input",20),t._UZ(58,"mat-datepicker-toggle",21),t._UZ(59,"mat-datepicker",null,22),t.YNc(61,me,2,1,"mat-hint",15),t.qZA(),t.qZA(),t.TgZ(62,"div",11),t.TgZ(63,"mat-form-field",12),t.TgZ(64,"mat-label"),t._uU(65),t.ALo(66,"translate"),t.qZA(),t._UZ(67,"input",23),t._UZ(68,"mat-datepicker-toggle",21),t._UZ(69,"mat-datepicker",null,24),t.qZA(),t.qZA(),t.TgZ(71,"div",11),t.TgZ(72,"mat-radio-group",25),t.TgZ(73,"mat-radio-button",26),t.NdJ("change",function(){return e.onlyCodeValidators()}),t._uU(74),t.ALo(75,"translate"),t.qZA(),t.TgZ(76,"mat-radio-button",26),t.NdJ("change",function(){return e.onlyCodeValidators()}),t._uU(77),t.ALo(78,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(79,"div",11),t.TgZ(80,"mat-radio-group",27),t.TgZ(81,"mat-radio-button",10),t._uU(82),t.ALo(83,"translate"),t.qZA(),t.TgZ(84,"mat-radio-button",10),t._uU(85),t.ALo(86,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(87,"div",11),t.TgZ(88,"mat-radio-group",28),t.TgZ(89,"mat-radio-button",10),t._uU(90),t.ALo(91,"translate"),t.qZA(),t.TgZ(92,"mat-radio-button",10),t._uU(93),t.ALo(94,"translate"),t.qZA(),t.qZA(),t.qZA(),t.YNc(95,_e,7,4,"div",19),t.YNc(96,Ae,7,4,"div",19),t.YNc(97,be,22,17,"ng-container",29),t.TgZ(98,"div",1),t.TgZ(99,"mat-radio-group",30),t.TgZ(100,"div",11),t.TgZ(101,"mat-radio-button",10),t._uU(102),t.ALo(103,"translate"),t.qZA(),t.qZA(),t.TgZ(104,"div",11),t.TgZ(105,"mat-radio-button",10),t._uU(106),t.ALo(107,"translate"),t.qZA(),t.qZA(),t.TgZ(108,"div",11),t.TgZ(109,"mat-radio-button",10),t._uU(110),t.ALo(111,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(112,Ce,10,7,"div",31),t.YNc(113,qe,10,7,"div",31),t.YNc(114,xe,2,0,"div",32),t.qZA(),t.qZA(),t.TgZ(115,"mat-card-actions",33),t.TgZ(116,"button",34),t.NdJ("click",function(){return e.addEditMaterial()}),t._uU(117),t.ALo(118,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(119,"mat-tab",6),t.ALo(120,"translate"),t._UZ(121,"app-add-material-parts",35),t.qZA(),t.TgZ(122,"mat-tab",6),t.ALo(123,"translate"),t._UZ(124,"app-add-material-files",35),t.qZA(),t.TgZ(125,"mat-tab",6),t.ALo(126,"translate"),t._UZ(127,"app-add-material-exam",35),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(128,"ngx-spinner")),2&a){var i=t.MAs(60),r=t.MAs(70);t.xp6(3),t.lnq(" ",t.lcZ(4,62,"Navbar.EducationalSubjects")," - ",t.lcZ(5,64,"labels.Materials")," - ",t.lcZ(6,66,"General.AddMaterial")," "),t.xp6(7),t.lnq(" ",t.lcZ(11,68,"General.AddMaterial")," : ",e.subject_ar_name," - ",e.materialName," "),t.xp6(2),t.MGl("routerLink","/dashboard/educational-setup/subjects/material-search/",e.subjectId,""),t.Q6J("queryParams",t.WLB(114,ye,e.functionId,e.parentId)),t.xp6(1),t.hij(" ",t.lcZ(14,70,"General.Back")," "),t.xp6(3),t.s9C("label",t.lcZ(17,72,"labels.MainData")),t.xp6(2),t.Q6J("formGroup",e.myForm),t.xp6(5),t.Q6J("value",1),t.xp6(1),t.hij(" ",t.lcZ(25,74,"labels.Video")," "),t.xp6(3),t.Q6J("value",2),t.xp6(1),t.hij(" ",t.lcZ(29,76,"labels.Offline")," "),t.xp6(5),t.hij("",t.lcZ(34,78,"labels.Teacher")," "),t.xp6(4),t.hij(" ",t.lcZ(38,80,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",e.Teachers),t.xp6(1),t.Q6J("ngIf",e.FormCtrl.teacherUserId.invalid&&(e.FormCtrl.teacherUserId.touched||e.submitted)),t.xp6(4),t.hij(" ",t.lcZ(45,82,"labels.Name")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrl.materialName.invalid&&(e.FormCtrl.materialName.touched||e.submitted)),t.xp6(2),t.Q6J("ngIf",2==e.FormCtrl.IsOnline.value),t.xp6(1),t.Q6J("ngIf",1==e.FormCtrl.IsOnline.value),t.xp6(1),t.Q6J("ngIf",2==e.FormCtrl.IsOnline.value),t.xp6(4),t.hij(" ",t.lcZ(56,84,"labels.FromDate"),""),t.xp6(2),t.Q6J("matDatepicker",i),t.xp6(1),t.Q6J("for",i),t.xp6(3),t.Q6J("ngIf",e.FormCtrl.fromDate.invalid&&(e.FormCtrl.fromDate.touched||e.submitted)),t.xp6(4),t.hij(" ",t.lcZ(66,86,"labels.ToDate"),""),t.xp6(2),t.Q6J("matDatepicker",r),t.xp6(1),t.Q6J("for",r),t.xp6(5),t.Q6J("value",!0),t.xp6(1),t.hij(" ",t.lcZ(75,88,"labels.onlyCode")," "),t.xp6(2),t.Q6J("value",!1),t.xp6(1),t.hij(" ",t.lcZ(78,90,"labels.CodeAndCredits")," "),t.xp6(4),t.Q6J("value",!0),t.xp6(1),t.hij(" ",t.lcZ(83,92,"labels.CustomDiscountApplied")," "),t.xp6(2),t.Q6J("value",!1),t.xp6(1),t.hij(" ",t.lcZ(86,94,"labels.CustomDiscountNotApplied")," "),t.xp6(4),t.Q6J("value",!0),t.xp6(1),t.hij(" ",t.lcZ(91,96,"labels.CodeIsPurchasable")," "),t.xp6(2),t.Q6J("value",!1),t.xp6(1),t.hij(" ",t.lcZ(94,98,"labels.CodeIsNotPurchasable")," "),t.xp6(2),t.Q6J("ngIf",0==e.FormCtrl.onlyCode.value),t.xp6(1),t.Q6J("ngIf",1==e.FormCtrl.onlyCode.value),t.xp6(1),t.Q6J("ngIf",0==e.FormCtrl.onlyCode.value),t.xp6(4),t.Q6J("value",1),t.xp6(1),t.hij(" ",t.lcZ(103,100,"labels.Subject")," "),t.xp6(3),t.Q6J("value",2),t.xp6(1),t.hij(" ",t.lcZ(107,102,"labels.Unit")," "),t.xp6(3),t.Q6J("value",3),t.xp6(1),t.hij(" ",t.lcZ(111,104,"labels.Lesson")," "),t.xp6(2),t.Q6J("ngIf",2==(null==e.FormCtrl.selectedItemType?null:e.FormCtrl.selectedItemType.value)||3==(null==e.FormCtrl.selectedItemType?null:e.FormCtrl.selectedItemType.value)),t.xp6(1),t.Q6J("ngIf",3==e.FormCtrl.selectedItemType.value),t.xp6(1),t.Q6J("ngIf",1==e.FormCtrl.IsOnline.value),t.xp6(3),t.hij(" ",t.lcZ(118,106,"General.Save")," "),t.xp6(2),t.s9C("label",t.lcZ(120,108,"labels.MaterialParts")),t.xp6(2),t.Q6J("materialId",e.materialId),t.xp6(1),t.s9C("label",t.lcZ(123,110,"labels.MaterialFiles")),t.xp6(2),t.Q6J("materialId",e.materialId),t.xp6(1),t.s9C("label",t.lcZ(126,112,"labels.MaterialExams")),t.xp6(2),t.Q6J("materialId",e.materialId)}},directives:[_.a8,_.dn,_.n5,y.zs,A.yS,nt.SP,nt.uX,s._Y,s.JL,s.sg,Y.VQ,s.JJ,s.u,Y.U0,Z.KE,Z.hX,E.gD,G.ey,C.sg,C.O5,j.Nt,s.Fj,H.hl,H.nW,Z.R9,H.Mq,_.hq,y.lW,St,kt,Vt,b.Ro,Z.bx,s.wV],pipes:[S.X$],styles:[".mat-radio-button[_ngcontent-%COMP%]{display:block}"]}),n}();function Ue(n,o){1&n&&(t.TgZ(0,"div",17),t.TgZ(1,"mat-radio-group",18),t.TgZ(2,"div",19),t.TgZ(3,"mat-radio-button",20),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.TgZ(6,"div",19),t.TgZ(7,"mat-radio-button",20),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Q6J("value",!0),t.xp6(1),t.hij(" ",t.lcZ(5,4,"labels.Attended")," "),t.xp6(3),t.Q6J("value",!1),t.xp6(1),t.hij(" ",t.lcZ(9,6,"labels.NotAttended")," "))}function je(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){return t.CHM(a),t.oxw().resetForm()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Reset")," "))}function Fe(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){return t.CHM(a),t.oxw().searchAttendanceManual()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Search")," "))}function Le(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){return t.CHM(a),t.oxw().updateAttendanceManual()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Save")," "))}function Ne(n,o){if(1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-card",3),t.TgZ(3,"table",22),t.TgZ(4,"thead"),t.TgZ(5,"tr"),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"th"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"th"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"th"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"tbody"),t.TgZ(31,"tr"),t.TgZ(32,"td"),t._uU(33),t.qZA(),t.TgZ(34,"td"),t._uU(35),t.qZA(),t.TgZ(36,"td"),t._uU(37),t.qZA(),t.TgZ(38,"td"),t._uU(39),t.qZA(),t.TgZ(40,"td"),t._uU(41),t.qZA(),t.TgZ(42,"td"),t._uU(43),t.qZA(),t.TgZ(44,"td"),t._uU(45),t.qZA(),t.TgZ(46,"td"),t._uU(47),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n){var a=t.oxw();t.xp6(7),t.hij(" ",t.lcZ(8,16,"labels.Name")," "),t.xp6(3),t.Oqu(t.lcZ(11,18,"labels.LectureName")),t.xp6(3),t.Oqu(t.lcZ(14,20,"labels.Group")),t.xp6(3),t.Oqu(t.lcZ(17,22,"labels.Attendance")),t.xp6(3),t.Oqu(t.lcZ(20,24,"labels.Exception")),t.xp6(3),t.Oqu(t.lcZ(23,26,"labels.refundBalance")),t.xp6(3),t.Oqu(t.lcZ(26,28,"Balance.Amount")),t.xp6(3),t.Oqu(t.lcZ(29,30,"labels.Date")),t.xp6(5),t.Oqu(a.studentSearched.username),t.xp6(2),t.Oqu(a.studentSearched.lectureName),t.xp6(2),t.Oqu(a.studentSearched.groupName),t.xp6(2),t.Oqu(a.studentSearched.didAttend),t.xp6(2),t.Oqu(a.studentSearched.isException),t.xp6(2),t.Oqu(a.studentSearched.didRefund),t.xp6(2),t.Oqu(a.studentSearched.amountRefunded),t.xp6(2),t.Oqu(a.studentSearched.dateRefunded)}}var Me=function(o){return{functionId:o}},we=function(){var n=function(){function o(a,e,i,r,l){var u=this;(0,x.Z)(this,o),this.fb=a,this.route=e,this.toastr=i,this.SubjectMaterialsService=r,this.spinner=l,this.studentSearched=null,this.route.queryParamMap.subscribe(function(c){u.subjectId=c.get("subjectId"),u.route.queryParamMap.subscribe(function(m){u.functionId=Number(m.get("functionId"))})}),this.route.paramMap.subscribe(function(c){u.lectureID=c.get("materialId")})}return(0,q.Z)(o,[{key:"ngOnInit",value:function(){this.myForm=this.fb.group({lectureID:[this.lectureID],studentName:[""],studentEmail:[""],studentMobile:[""],studentCode:[""],attendBool:[!0]})}},{key:"searchAttendanceManual",value:function(){var e=this;this.spinner.show(),this.SubjectMaterialsService.searchAttendanceManual(this.myForm.value).subscribe(function(i){var r;e.studentSearched=i.studentSearched,i.studentSearched||e.toastr.info("\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u064a \u0627\u0644\u0637\u0627\u0644\u0628"),e.myForm.controls.studentName.setValue(null===(r=i.studentSearched)||void 0===r?void 0:r.username),e.spinner.hide()})}},{key:"updateAttendanceManual",value:function(){var e=this;this.spinner.show(),this.SubjectMaterialsService.updateAttendanceManual(this.myForm.value).subscribe(function(i){console.log(i),1==i.returnValue?e.toastr.success(i.returnString):e.toastr.error(i.returnString),e.spinner.hide()})}},{key:"resetForm",value:function(){this.myForm.reset(),this.studentSearched=null}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(s.qu),t.Y36(A.gz),t.Y36(L._W),t.Y36(B.r),t.Y36(b.t2))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-manually-attendance"]],decls:50,vars:37,consts:[[1,"row"],[1,"col-12"],[1,"content-header"],[1,"example-card"],["mat-raised-button","",1,"btn","btn-warning","bg-light-warning","float-right",3,"routerLink","queryParams"],[1,"form-container",3,"formGroup"],[1,"row","f-w"],[1,"col-md-6","col-12"],["appearance","legacy"],["matInput","","type","text","formControlName","studentName"],["matInput","","type","text","formControlName","studentEmail"],["matInput","","type","text","formControlName","studentMobile"],["matInput","","type","text","formControlName","studentCode"],["class","col-md-8 col-6",4,"ngIf"],["align","end"],["mat-raised-button","","class","btn btn-primary",3,"click",4,"ngIf"],["class","row",4,"ngIf"],[1,"col-md-8","col-6"],["formControlName","attendBool",1,"row"],[1,"col-md-3","col-12"],[3,"value"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],[1,"table","table-striped","m-0"]],template:function(a,e){1&a&&(t._UZ(0,"ngx-spinner"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"div",2),t._uU(4),t.ALo(5,"translate"),t.ALo(6,"translate"),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",0),t.TgZ(9,"div",1),t.TgZ(10,"mat-card",3),t.TgZ(11,"mat-card-title"),t._uU(12),t.ALo(13,"translate"),t.TgZ(14,"a",4),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA(),t.TgZ(17,"mat-card-content"),t.TgZ(18,"form",5),t.TgZ(19,"div",6),t.TgZ(20,"div",7),t.TgZ(21,"mat-form-field",8),t.TgZ(22,"mat-label"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t._UZ(25,"input",9),t.qZA(),t.qZA(),t.TgZ(26,"div",7),t.TgZ(27,"mat-form-field",8),t.TgZ(28,"mat-label"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t._UZ(31,"input",10),t.qZA(),t.qZA(),t.TgZ(32,"div",7),t.TgZ(33,"mat-form-field",8),t.TgZ(34,"mat-label"),t._uU(35),t.ALo(36,"translate"),t.qZA(),t._UZ(37,"input",11),t.qZA(),t.qZA(),t.TgZ(38,"div",7),t.TgZ(39,"mat-form-field",8),t.TgZ(40,"mat-label"),t._uU(41),t.ALo(42,"translate"),t.qZA(),t._UZ(43,"input",12),t.qZA(),t.qZA(),t.YNc(44,Ue,10,8,"div",13),t.qZA(),t.qZA(),t.qZA(),t.TgZ(45,"mat-card-actions",14),t.YNc(46,je,3,3,"button",15),t.YNc(47,Fe,3,3,"button",15),t.YNc(48,Le,3,3,"button",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(49,Ne,48,32,"div",16)),2&a&&(t.xp6(4),t.lnq(" ",t.lcZ(5,17,"Navbar.EducationalSubjects")," - ",t.lcZ(6,19,"labels.Materials")," - ",t.lcZ(7,21,"labels.updateAttendanceManually")," "),t.xp6(8),t.hij(" ",t.lcZ(13,23,"labels.updateAttendanceManually")," "),t.xp6(2),t.MGl("routerLink","/dashboard/educational-setup/subjects/material-search/",e.subjectId,""),t.Q6J("queryParams",t.VKq(35,Me,e.functionId)),t.xp6(1),t.hij(" ",t.lcZ(16,25,"General.Back")," "),t.xp6(3),t.Q6J("formGroup",e.myForm),t.xp6(5),t.Oqu(t.lcZ(24,27,"labels.Name")),t.xp6(6),t.Oqu(t.lcZ(30,29,"labels.Email")),t.xp6(6),t.Oqu(t.lcZ(36,31,"labels.Mobile")),t.xp6(6),t.Oqu(t.lcZ(42,33,"labels.Code")),t.xp6(3),t.Q6J("ngIf",null!=e.studentSearched),t.xp6(2),t.Q6J("ngIf",null!=e.studentSearched),t.xp6(1),t.Q6J("ngIf",null==e.studentSearched),t.xp6(1),t.Q6J("ngIf",null!=e.studentSearched),t.xp6(1),t.Q6J("ngIf",null!=e.studentSearched))},directives:[b.Ro,_.a8,_.n5,y.zs,A.yS,_.dn,s._Y,s.JL,s.sg,Z.KE,Z.hX,j.Nt,s.Fj,s.JJ,s.u,C.O5,_.hq,Y.VQ,Y.U0,y.lW],pipes:[S.X$],styles:[""]}),n}(),ke=function(){var n=function(){function o(){(0,x.Z)(this,o)}return(0,q.Z)(o,[{key:"ngOnInit",value:function(){}}]),o}();return n.\u0275fac=function(a){return new(a||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-material-points"]],decls:2,vars:0,template:function(a,e){1&a&&(t.TgZ(0,"p"),t._uU(1,"material-points works!"),t.qZA())},styles:[""]}),n}(),Ye=f(7762),D=f(6087),F=f(4847),g=f(2075),N=f(8198);function Je(n,o){if(1&n&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.teacherUserId),t.xp6(1),t.hij(" ",a.teacher_ar_name," ")}}function De(n,o){if(1&n&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.unit_ar_name," ")}}function Qe(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"div",34),t.TgZ(1,"mat-form-field",7),t.TgZ(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"mat-select",35),t.NdJ("selectionChange",function(){t.CHM(a);var r=t.oxw();return r.returnSearchedLessonsByUnitId(null==r.FomCtrls.unitId?null:r.FomCtrls.unitId.value)}),t.TgZ(6,"mat-option"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.YNc(9,De,2,2,"mat-option",9),t.qZA(),t.qZA(),t.qZA()}if(2&n){var e=t.oxw();t.xp6(3),t.hij("",t.lcZ(4,3,"labels.Unit")," "),t.xp6(4),t.hij(" ",t.lcZ(8,5,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",e.units)}}function Ee(n,o){if(1&n&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.lesson_ar_name," ")}}function Ge(n,o){if(1&n&&(t.TgZ(0,"div",34),t.TgZ(1,"mat-form-field",7),t.TgZ(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"mat-select",36),t.TgZ(6,"mat-option"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.YNc(9,Ee,2,2,"mat-option",9),t.qZA(),t.qZA(),t.qZA()),2&n){var a=t.oxw();t.xp6(3),t.hij("",t.lcZ(4,3,"labels.Lesson")," "),t.xp6(4),t.hij(" ",t.lcZ(8,5,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",a.Lessons)}}function Pe(n,o){1&n&&(t.TgZ(0,"th",37),t._uU(1,"#"),t.qZA())}function Be(n,o){if(1&n&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&n){var a=o.index;t.xp6(1),t.hij(" ",a+1," ")}}function Oe(n,o){1&n&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Name")," "))}function Ve(n,o){if(1&n&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.hij(" ",a.material_name," ")}}function Re(n,o){1&n&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Price")," "))}function ze(n,o){if(1&n&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.MGl("id","Material-",a.id,""),t.xp6(1),t.hij(" ",a.price," ")}}function $e(n,o){1&n&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Type")," "))}function He(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"i",41),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Video")," "))}function Xe(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"i",42),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Malzem")," "))}function We(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Offline")," "))}function Ke(n,o){if(1&n&&(t.TgZ(0,"td",38),t.YNc(1,He,4,3,"span",40),t.YNc(2,Xe,4,3,"span",40),t.YNc(3,We,3,3,"span",40),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Q6J("ngIf",1==(null==a?null:a.attach_type_id)),t.xp6(1),t.Q6J("ngIf",2==(null==a?null:a.attach_type_id)),t.xp6(1),t.Q6J("ngIf",3==(null==a?null:a.attach_type_id))}}function tn(n,o){1&n&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.ThePublish")," "))}function en(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t._UZ(3,"i",43),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Published")," "))}function nn(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.UnPublished")," "))}function an(n,o){if(1&n&&(t.TgZ(0,"td",38),t.YNc(1,en,4,3,"span",40),t.YNc(2,nn,3,3,"span",40),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Q6J("ngIf",null==a?null:a.IsPublish),t.xp6(1),t.Q6J("ngIf",!(null!=a&&a.IsPublish))}}function on(n,o){1&n&&(t.TgZ(0,"th",37),t._uU(1,"actions"),t.qZA())}function rn(n,o){1&n&&(t.TgZ(0,"span"),t._UZ(1,"i",54),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"labels.Publish")," "))}function ln(n,o){1&n&&(t.TgZ(0,"span"),t._UZ(1,"i",55),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"labels.Unpublish")," "))}function sn(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"a",53),t.NdJ("click",function(){t.CHM(a);var r=t.oxw(3).$implicit;return t.oxw().publishMaterial(r.id)}),t.YNc(1,rn,4,3,"span",40),t.YNc(2,ln,4,3,"span",40),t.qZA()}if(2&n){var e=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",!e.IsPublish),t.xp6(1),t.Q6J("ngIf",e.IsPublish)}}var un=function(o,a,e,i){return{subjectId:o,materialId:a,functionId:e,parentId:i}};function dn(n,o){if(1&n&&(t.TgZ(0,"a",56),t._UZ(1,"i",57),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n){var a=t.oxw(3).$implicit,e=t.oxw();t.Q6J("queryParams",t.l5B(4,un,e.subjectId,null==a?null:a.id,e.functionId,e.parentId)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"General.Edit")," ")}}var cn=function(o,a){return{subjectId:o,functionId:a}};function mn(n,o){if(1&n&&(t.TgZ(0,"a",58),t._UZ(1,"i",54),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n){var a=t.oxw(3).$implicit,e=t.oxw();t.MGl("routerLink","/dashboard/educational-setup/subjects/upload-attendance/",a.id,""),t.Q6J("queryParams",t.WLB(5,cn,e.subjectId,e.functionId)),t.xp6(2),t.hij(" ",t.lcZ(3,3,"labels.UploadAttendance")," ")}}function pn(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"a",53),t.NdJ("click",function(){t.CHM(a);var i=t.oxw(3).$implicit;return t.oxw().dawnloadLectureAttendees(i.id)}),t._UZ(1,"i",55),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"labels.DownloadAttendance")," "))}var gn=function(o,a){return{functionId:o,subjectId:a}};function hn(n,o){if(1&n&&(t.TgZ(0,"a",58),t._UZ(1,"i",57),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n){var a=t.oxw(3).$implicit,e=t.oxw();t.MGl("routerLink","/dashboard/educational-setup/subjects/manually-attendance/",a.id,""),t.Q6J("queryParams",t.WLB(5,gn,e.functionId,e.subjectId)),t.xp6(2),t.hij(" ",t.lcZ(3,3,"labels.updateAttendanceManually")," ")}}var at=function(o){return{functionId:o}};function _n(n,o){if(1&n&&(t.TgZ(0,"a",58),t._UZ(1,"i",59),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n){var a=t.oxw(3).$implicit,e=t.oxw();t.MGl("routerLink","/dashboard/educational-setup/subjects/material-points/",a.id,""),t.Q6J("queryParams",t.VKq(5,at,e.functionId)),t.xp6(2),t.hij(" ",t.lcZ(3,3,"labels.addPoints")," ")}}function fn(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"a",53),t.NdJ("click",function(){t.CHM(a);var i=t.oxw(3).$implicit;return t.oxw().openDeleateDialog(i)}),t._UZ(1,"i",60),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"General.Delete")," "))}function Zn(n,o){if(1&n&&(t.ynx(0),t.YNc(1,sn,3,2,"a",50),t.YNc(2,dn,4,9,"a",51),t.YNc(3,mn,4,8,"a",52),t.YNc(4,pn,4,3,"a",50),t.YNc(5,hn,4,8,"a",52),t.YNc(6,_n,4,7,"a",52),t.YNc(7,fn,4,3,"a",50),t.BQk()),2&n){var a=o.$implicit,e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf","publishMaterial"===a.functionName),t.xp6(1),t.Q6J("ngIf","EditMaterial"===a.functionName),t.xp6(1),t.Q6J("ngIf","uploadAttendance"===a.functionName&&!e.IsOnline),t.xp6(1),t.Q6J("ngIf","DownloadAttendance"===a.functionName&&!e.IsOnline),t.xp6(1),t.Q6J("ngIf","updateAttendanceManually"===a.functionName&&!e.IsOnline),t.xp6(1),t.Q6J("ngIf","addMaterialPoints"===a.functionName),t.xp6(1),t.Q6J("ngIf","DeleteMaterial"===a.functionName)}}function vn(n,o){if(1&n&&(t.TgZ(0,"div",48),t.YNc(1,Zn,8,7,"ng-container",49),t.qZA()),2&n){var a=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",a.rowFunctions)}}function An(n,o){if(1&n&&(t.TgZ(0,"td",38),t.TgZ(1,"div",44),t.TgZ(2,"button",45),t._uU(3," actions "),t._UZ(4,"span",46),t.qZA(),t.YNc(5,vn,2,1,"div",47),t.qZA(),t.qZA()),2&n){var a=t.oxw();t.xp6(5),t.Q6J("ngIf",a.rowFunctions.length>0)}}function bn(n,o){1&n&&t._UZ(0,"tr",61)}function Tn(n,o){if(1&n&&t._UZ(0,"tr",62),2&n){var a=o.$implicit;t.ekj("bg-light-info",!(null!=a&&a.IsPublish))}}function Cn(n,o){if(1&n&&(t.TgZ(0,"tr",63),t.TgZ(1,"td",64),t._uU(2),t.qZA(),t.qZA()),2&n){t.oxw();var a=t.MAs(65);t.xp6(2),t.hij(' No data matching the filter "',a.value,'" ')}}var In=function(o,a,e){return{subjectId:o,functionId:a,parentId:e}},qn=function(){return[5,10,20]},xn=function(){var n=function(){function o(a,e,i,r,l,u,c,m){var d=this;(0,x.Z)(this,o),this.route=a,this.fb=e,this.toastr=i,this.SubjectsService=r,this.SubjectMaterialsService=l,this.authserv=u,this.spinner=c,this.dialog=m,this.checked=1,this.updatePublish=!1,this.submitted=!1,this.displayedColumns=["#","lecName","price","type","publish","actions"],this.route.paramMap.subscribe(function(p){d.subjectId=p.get("subjectId")}),a.queryParamMap.subscribe(function(p){d.functionId=Number(p.get("functionId")),d.parentId=Number(p.get("parentId")),d.functionId&&d.authserv.getUserRowFunctions(d.functionId).subscribe(function(h){h&&(d.rowFunctions=h,console.log("row-Function:",h))})})}return(0,q.Z)(o,[{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.branchId=this.authserv.getBranchId(),this.myForm=this.fb.group({searchedTeacherId:["",s.kI.required],searchedItemType:[1,s.kI.required],subjectId:[this.subjectId],unitId:[""],lessonId:[""]}),this.getTeacherByEduCompId(),this.returnSearchedUnitsBySubjectId(),this.getSubjectByID(this.subjectId)}},{key:"FomCtrls",get:function(){return this.myForm.controls}},{key:"ngAfterViewInit",value:function(){var e=this;this.authserv.EduCompId.subscribe(function(i){var r;e.EduCompId=i.EduCompId,null===(r=e.FomCtrls)||void 0===r||r.select_Education_Component.setValue(i.EduCompId),e.getTeacherByEduCompId()}),this.authserv.branchId.subscribe(function(i){e.branchId=i.branchId}),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"applyFilter",value:function(e){this.dataSource.filter=e.target.value.trim().toLowerCase()}},{key:"searcheMaterial",value:function(){var i,r,l,u,c,m,d,p,h,T,Q,e=this,P=null===(r=null===(i=this.FomCtrls)||void 0===i?void 0:i.searchedItemType)||void 0===r?void 0:r.value;if(1==P&&(Q=this.subjectId),2==P&&(Q=null===(u=null===(l=this.FomCtrls)||void 0===l?void 0:l.unitId)||void 0===u?void 0:u.value),3==P&&(Q=null===(m=null===(c=this.FomCtrls)||void 0===c?void 0:c.lessonId)||void 0===m?void 0:m.value),null!=Q&&""!=Q&&""!=(null===(d=this.FomCtrls)||void 0===d?void 0:d.searchedTeacherId.value)){if(this.myForm.valid){this.spinner.show();var M={p:1,searchedItemId:Q,searchedItemType:null===(h=null===(p=this.FomCtrls)||void 0===p?void 0:p.searchedItemType)||void 0===h?void 0:h.value,searchedTeacherId:null===(T=this.FomCtrls)||void 0===T?void 0:T.searchedTeacherId.value};this.SubjectMaterialsService.searcheMaterial(M).subscribe(function(z){e.materialsList=z,e.dataSource=new g.by(z),e.spinner.hide()})}}else this.toastr.error("\u062a\u0623\u0643\u062f \u0645\u0646 \u0625\u062f\u062e\u0627\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0635\u062d\u064a\u062d\u0629","\u062e\u0637\u0623")}},{key:"deleteMaterial",value:function(e){var i=this;this.spinner.show(),this.SubjectMaterialsService.deleteMaterial(e.id).subscribe(function(r){if(1==r.returnValue){var l=i.dataSource.data.findIndex(function(u){return u===e});i.dataSource.data.splice(l,1),i.dataSource.paginator=i.paginator,i.toastr.success("\u062a\u0645 \u0627\u0644\u062d\u0630\u0641")}0==r.returnValue&&i.toastr.error(r.errorMsg,"Error"),i.spinner.hide()})}},{key:"openDeleateDialog",value:function(e){var i=this;this.dialog.open(J.F,{data:{msg:e.material_name}}).afterClosed().subscribe(function(r){r&&i.deleteMaterial(e)})}},{key:"publishMaterial",value:function(e){var i=this;this.spinner.show(),this.SubjectMaterialsService.publishMaterial(e).subscribe(function(r){if(1==r.returnValue){var u,l=(0,Ye.Z)(i.materialsList);try{for(l.s();!(u=l.n()).done;){var c=u.value;if(c.id===e){c.IsPublish=!c.IsPublish;break}}}catch(m){l.e(m)}finally{l.f()}}else 0==r.returnValue&&i.toastr.error(r.errorMsg);i.spinner.hide()})}},{key:"showVideoByMaterialId",value:function(e){var i=this;this.SubjectMaterialsService.showVideoByMaterialId(e).subscribe(function(r){1==r.returnValue&&(i.showMaterial=r.material.attach_path)})}},{key:"dawnloadLectureAttendees",value:function(e){var i=this;this.spinner.show(),this.SubjectMaterialsService.dawnloadLectureAttendees(e).subscribe(function(r){1==r.returnValue&&window.open(v.N.apiURL.replace("/api/","")+r.path,"_blank"),i.spinner.hide()})}},{key:"getTeacherByEduCompId",value:function(){var e=this;this.spinner.show(),this.SubjectsService.getTeacherBySubjectAndEduCompId(this.EduCompId,this.subjectId).subscribe(function(i){1==i.retunValue&&(e.Teachers=i.teachers),e.spinner.hide()})}},{key:"returnSearchedUnitsBySubjectId",value:function(){var e=this;this.SubjectMaterialsService.returnSearchedUnitsBySubjectId(this.subjectId).subscribe(function(i){e.units=i})}},{key:"returnSearchedLessonsByUnitId",value:function(e){var i=this;this.SubjectMaterialsService.returnSearchedLessonsByUnitId(e).subscribe(function(r){i.Lessons=r})}},{key:"getSubjectByID",value:function(e){var i=this;this.SubjectsService.getSubjectByID(e).subscribe(function(r){null!=r.subject_id&&(i.subject_ar_name=r.subject_ar_name)})}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(A.gz),t.Y36(s.qu),t.Y36(L._W),t.Y36(w),t.Y36(B.r),t.Y36(k.e),t.Y36(b.t2),t.Y36(I.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-material-search"]],viewQuery:function(a,e){var i;1&a&&(t.Gf(D.NW,5),t.Gf(F.YE,5)),2&a&&(t.iGM(i=t.CRH())&&(e.paginator=i.first),t.iGM(i=t.CRH())&&(e.sort=i.first))},decls:90,vars:58,consts:[[1,"row"],[1,"col-12"],[1,"content-header"],["mat-raised-button","","routerLink","/dashboard/educational-setup/subjects/add-material",1,"btn","btn-primary","bg-light-primary","float-right",3,"queryParams"],["mat-raised-button","","routerLink","/dashboard/educational-setup/subjects",1,"btn","btn-warning","bg-light-warning","float-right",3,"queryParams"],[1,"form-container",3,"formGroup"],[1,"col-md-4","col-12"],["appearance","legacy"],["formControlName","searchedTeacherId"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-8","col-6"],["formControlName","searchedItemType",1,"row"],[3,"value"],["class","col-md-6 col-12",4,"ngIf"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","lecName"],["matColumnDef","price"],["mat-cell","",3,"id",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","publish"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"bg-light-info",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize"],[1,"col-md-6","col-12"],["formControlName","unitId",3,"selectionChange"],["formControlName","lessonId"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-cell","",3,"id"],[4,"ngIf"],[1,"ft-play-circle","danger","ml-1"],[1,"fa-book","info","ml-1"],["aria-hidden","true",1,"fa","fa-check-circle","success","ml-1"],["ngbDropdown","",1,"dropdown","btn-group","mr-1","mb-1"],["mat-raised-button","","type","button","ngbDropdownToggle","",1,"btn","btn-primary","bg-light-primary","dropdown-toggle"],[1,"caret"],["ngbDropdownMenu","","class","dropdown-menu","role","menu",4,"ngIf"],["ngbDropdownMenu","","role","menu",1,"dropdown-menu"],[4,"ngFor","ngForOf"],["class","dropdown-item",3,"click",4,"ngIf"],["routerLink","/dashboard/educational-setup/subjects/add-material","class","dropdown-item",3,"queryParams",4,"ngIf"],["class","dropdown-item",3,"routerLink","queryParams",4,"ngIf"],[1,"dropdown-item",3,"click"],[1,"ft-upload","font-medium-3","mr-2"],[1,"ft-download","font-medium-3","mr-2"],["routerLink","/dashboard/educational-setup/subjects/add-material",1,"dropdown-item",3,"queryParams"],[1,"ft-edit-2","font-medium-3","mr-2"],[1,"dropdown-item",3,"routerLink","queryParams"],[1,"icon-present","font-medium-3","mr-2"],[1,"ft-trash","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(a,e){1&a&&(t._UZ(0,"ngx-spinner"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"div",2),t._uU(4),t.ALo(5,"translate"),t.ALo(6,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",0),t.TgZ(8,"div",1),t.TgZ(9,"mat-card"),t.TgZ(10,"mat-card-title"),t._uU(11),t.ALo(12,"translate"),t.TgZ(13,"a",3),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"a",4),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.qZA(),t.TgZ(19,"mat-card-content"),t.TgZ(20,"div",0),t.TgZ(21,"div",1),t.TgZ(22,"form",5),t.TgZ(23,"div",0),t.TgZ(24,"div",6),t.TgZ(25,"mat-form-field",7),t.TgZ(26,"mat-label"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.TgZ(29,"mat-select",8),t.TgZ(30,"mat-option"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.YNc(33,Je,2,2,"mat-option",9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",10),t.TgZ(35,"mat-radio-group",11),t.TgZ(36,"div",6),t.TgZ(37,"mat-radio-button",12),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.qZA(),t.TgZ(40,"div",6),t.TgZ(41,"mat-radio-button",12),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.qZA(),t.TgZ(44,"div",6),t.TgZ(45,"mat-radio-button",12),t._uU(46),t.ALo(47,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(48,Qe,10,7,"div",13),t.YNc(49,Ge,10,7,"div",13),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"mat-card-actions",14),t.TgZ(51,"button",15),t.NdJ("click",function(){return e.searcheMaterial()}),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(54,"div",0),t.TgZ(55,"div",1),t.TgZ(56,"mat-card"),t.TgZ(57,"mat-card-title"),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"mat-card-content"),t.TgZ(61,"mat-form-field",16),t.TgZ(62,"mat-label"),t._uU(63,"Filter"),t.qZA(),t.TgZ(64,"input",17,18),t.NdJ("keyup",function(r){return e.applyFilter(r)}),t.qZA(),t.qZA(),t.TgZ(66,"div",19),t.TgZ(67,"table",20),t.ynx(68,21),t.YNc(69,Pe,2,0,"th",22),t.YNc(70,Be,2,1,"td",23),t.BQk(),t.ynx(71,24),t.YNc(72,Oe,3,3,"th",22),t.YNc(73,Ve,2,1,"td",23),t.BQk(),t.ynx(74,25),t.YNc(75,Re,3,3,"th",22),t.YNc(76,ze,2,2,"td",26),t.BQk(),t.ynx(77,27),t.YNc(78,$e,3,3,"th",22),t.YNc(79,Ke,4,3,"td",23),t.BQk(),t.ynx(80,28),t.YNc(81,tn,3,3,"th",22),t.YNc(82,an,3,2,"td",23),t.BQk(),t.ynx(83,29),t.YNc(84,on,2,0,"th",22),t.YNc(85,An,6,1,"td",23),t.BQk(),t.YNc(86,bn,1,0,"tr",30),t.YNc(87,Tn,1,2,"tr",31),t.YNc(88,Cn,3,1,"tr",32),t.qZA(),t._UZ(89,"mat-paginator",33),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(4),t.AsE(" ",t.lcZ(5,27,"Navbar.EducationalSubjects")," - ",t.lcZ(6,29,"labels.Materials")," "),t.xp6(7),t.hij(" ",t.lcZ(12,31,"General.Search")," "),t.xp6(2),t.Q6J("queryParams",t.kEZ(51,In,e.subjectId,e.functionId,e.parentId)),t.xp6(1),t.hij(" ",t.lcZ(15,33,"General.AddMaterial")," "),t.xp6(2),t.Q6J("queryParams",t.VKq(55,at,e.parentId)),t.xp6(1),t.hij(" ",t.lcZ(18,35,"General.Back")," "),t.xp6(5),t.Q6J("formGroup",e.myForm),t.xp6(5),t.hij("",t.lcZ(28,37,"labels.Teacher")," "),t.xp6(4),t.hij(" ",t.lcZ(32,39,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",e.Teachers),t.xp6(4),t.Q6J("value",1),t.xp6(1),t.hij(" ",t.lcZ(39,41,"labels.Subject")," "),t.xp6(3),t.Q6J("value",2),t.xp6(1),t.hij(" ",t.lcZ(43,43,"labels.Unit")," "),t.xp6(3),t.Q6J("value",3),t.xp6(1),t.hij(" ",t.lcZ(47,45,"labels.Lesson")," "),t.xp6(2),t.Q6J("ngIf",2==(null==e.FomCtrls.searchedItemType?null:e.FomCtrls.searchedItemType.value)||3==(null==e.FomCtrls.searchedItemType?null:e.FomCtrls.searchedItemType.value)),t.xp6(1),t.Q6J("ngIf",3==e.FomCtrls.searchedItemType.value),t.xp6(3),t.hij(" ",t.lcZ(53,47,"General.Search")," "),t.xp6(6),t.hij(" ",t.lcZ(59,49,"Material.Subjects")," "),t.xp6(9),t.Q6J("dataSource",e.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(57,qn))("length",e.totalItems)("pageSize",10))},directives:[b.Ro,_.a8,_.n5,y.zs,A.yS,_.dn,s._Y,s.JL,s.sg,Z.KE,Z.hX,E.gD,s.JJ,s.u,G.ey,C.sg,Y.VQ,Y.U0,C.O5,_.hq,y.lW,j.Nt,g.BZ,F.YE,g.w1,g.fO,g.Dz,g.as,g.nj,g.Ee,D.NW,g.ge,F.nU,g.ev,N.jt,N.iD,N.Vi,g.XQ,g.Gk],pipes:[S.X$],styles:[""]}),n}(),O=f(5086),it=f(6471);function yn(n,o){if(1&n&&(t.TgZ(0,"mat-option",30),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.country_id),t.xp6(1),t.hij(" ",a.country_ar_name," ")}}function Sn(n,o){if(1&n&&(t.TgZ(0,"mat-option",30),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.stage_ar_name," ")}}function Un(n,o){if(1&n&&(t.TgZ(0,"mat-option",30),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.Educational_year_ar_name," ")}}function jn(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1,"#"),t.qZA())}function Fn(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.index;t.xp6(1),t.Oqu(a+1)}}function Ln(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Navbar.EducationalStage")," "))}function Nn(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(a.stage_name)}}function Mn(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.EducationalYear")," "))}function wn(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(a.educational_year)}}function kn(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.SubjectName")," "))}function Yn(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(a.subject_ar_name)}}function Jn(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1,"actions"),t.qZA())}var X=function(o){return{functionId:o}};function Dn(n,o){if(1&n&&(t.TgZ(0,"a",41),t._UZ(1,"i",42),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n){var a=t.oxw(3).$implicit,e=t.oxw();t.MGl("routerLink","/dashboard/educational-setup/subjects/edit-subject/",null==a?null:a.subject_id,""),t.Q6J("queryParams",t.VKq(5,X,e.functionId)),t.xp6(2),t.hij(" ",t.lcZ(3,3,"General.Edit")," ")}}var Qn=function(o,a){return{functionId:o,parentId:a}};function En(n,o){if(1&n&&(t.TgZ(0,"a",41),t._UZ(1,"i",43),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n){var a=t.oxw().$implicit,e=t.oxw(2).$implicit,i=t.oxw();t.MGl("routerLink","/dashboard/educational-setup/subjects/material-search/",null==e?null:e.subject_id,""),t.Q6J("queryParams",t.WLB(5,Qn,null==a?null:a.Id,i.functionId)),t.xp6(2),t.hij(" ",t.lcZ(3,3,"labels.Materials")," ")}}function Gn(n,o){if(1&n&&(t.TgZ(0,"a",41),t._UZ(1,"i",44),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n){var a=t.oxw(3).$implicit,e=t.oxw();t.MGl("routerLink","/dashboard/educational-setup/subjects/subject-structure/",null==a?null:a.subject_id,""),t.Q6J("queryParams",t.VKq(5,X,e.functionId)),t.xp6(2),t.hij(" ",t.lcZ(3,3,"labels.SubjectStructure")," ")}}function Pn(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"a",45),t.NdJ("click",function(){t.CHM(a);var i=t.oxw(3).$implicit;return t.oxw().openDeleateDialog(i)}),t._UZ(1,"i",46),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"General.Delete")," "))}function Bn(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Dn,4,7,"a",39),t.YNc(2,En,4,8,"a",39),t.YNc(3,Gn,4,7,"a",39),t.YNc(4,Pn,4,3,"a",40),t.BQk()),2&n){var a=o.$implicit;t.xp6(1),t.Q6J("ngIf","Edit"===a.functionName),t.xp6(1),t.Q6J("ngIf","Materials"===a.functionName),t.xp6(1),t.Q6J("ngIf","SubjectStructure"===a.functionName),t.xp6(1),t.Q6J("ngIf","Delete"===a.functionName)}}function On(n,o){if(1&n&&(t.TgZ(0,"div",34),t.TgZ(1,"button",35),t._uU(2," actions "),t._UZ(3,"span",36),t.qZA(),t.TgZ(4,"div",37),t.YNc(5,Bn,5,4,"ng-container",38),t.qZA(),t.qZA()),2&n){var a=t.oxw(2);t.xp6(5),t.Q6J("ngForOf",a.rowFunctions)}}function Vn(n,o){if(1&n&&(t.TgZ(0,"td",32),t.YNc(1,On,6,1,"div",33),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==a.rowFunctions?null:a.rowFunctions.length)>0)}}function Rn(n,o){1&n&&t._UZ(0,"tr",47)}function zn(n,o){1&n&&t._UZ(0,"tr",48)}function $n(n,o){if(1&n&&(t.TgZ(0,"tr",49),t.TgZ(1,"td",50),t._uU(2),t.qZA(),t.qZA()),2&n){t.oxw();var a=t.MAs(65);t.xp6(2),t.hij(' No data matching the filter "',a.value,'" ')}}var Hn=function(){return[10]},Xn=function(){var n=function(){function o(a,e,i,r,l,u,c,m,d){var p=this;(0,x.Z)(this,o),this.fb=a,this.authserv=e,this.SubjectsService=i,this.generlServ=r,this.eduServ=l,this.toaster=u,this.spinner=c,this.route=m,this.dialog=d,this.subjects=[],this.countriesList=[],this.stagesList=[],this.Years=[],this.submitted=!1,this.displayedColumns=["#","stage","year","subject","actions"],m.queryParamMap.subscribe(function(h){p.functionId=Number(h.get("functionId")),p.functionId&&p.authserv.getUserRowFunctions(p.functionId).subscribe(function(T){T&&(p.rowFunctions=T)})})}return(0,q.Z)(o,[{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.branchId=this.authserv.getBranchId(),this.myForm=this.fb.group({select_Education_Component:[this.EduCompId,s.kI.required],countryID:[""],stageID:[""],eduYearID:[""],page:[1]}),this.getAllCountriesList(),this.getSubjects(1)}},{key:"FomCtrls",get:function(){return this.myForm.controls}},{key:"ngAfterViewInit",value:function(){var e=this;this.authserv.EduCompId.subscribe(function(i){var r;e.EduCompId=i.EduCompId,null===(r=e.FomCtrls)||void 0===r||r.select_Education_Component.setValue(i.EduCompId),e.getSubjects(1)}),this.authserv.branchId.subscribe(function(i){e.branchId=i.branchId}),this.dataSource&&(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)}},{key:"applyFilter",value:function(e){this.dataSource.filter=e.target.value.trim().toLowerCase()}},{key:"getSubjects",value:function(e){var r,i=this;"null"!=(null===(r=this.FomCtrls)||void 0===r?void 0:r.select_Education_Component.value)?this.myForm.valid&&(this.spinner.show(),this.FomCtrls.page.setValue(e),this.SubjectsService.getSubjects(this.myForm.value).subscribe(function(l){i.dataSource=new g.by(l.subjects),i.totalItems=l.TotalItemCount,i.spinner.hide()})):this.toaster.warning("Please Choose Center!")}},{key:"openDeleateDialog",value:function(e){var i=this;this.dialog.open(J.F,{data:{msg:e.subject_ar_name}}).afterClosed().subscribe(function(r){r&&i.deleteSubject(e)})}},{key:"deleteSubject",value:function(e){var i=this;this.spinner.show(),this.SubjectsService.deleteSubject(e.subject_id).subscribe(function(r){if(1==r.returnValue){var l=i.dataSource.data.findIndex(function(u){return u==e});i.dataSource.data.splice(l,1),i.toaster.success("\u062a\u0645 \u0627\u0644\u062d\u0630\u0641"),i.spinner.hide()}})}},{key:"getAllCountriesList",value:function(){var e=this;this.generlServ.getAllCountriesList().subscribe(function(i){e.countriesList=i})}},{key:"getEducationalStageByCountryID",value:function(e){var i=this;""!=e&&this.eduServ.getEducationalStageByCountryID(e).subscribe(function(r){i.stagesList=r.eduYearsList})}},{key:"getYearbyStageID",value:function(e){var i=this;""!=e&&this.eduServ.getYearbyStageID(e).subscribe(function(r){i.Years=r.eduYearsList})}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(s.qu),t.Y36(k.e),t.Y36(w),t.Y36(O.m),t.Y36(it.i),t.Y36(L._W),t.Y36(b.t2),t.Y36(A.gz),t.Y36(I.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-subject-index"]],viewQuery:function(a,e){var i;1&a&&(t.Gf(D.NW,5),t.Gf(F.YE,5)),2&a&&(t.iGM(i=t.CRH())&&(e.paginator=i.first),t.iGM(i=t.CRH())&&(e.sort=i.first))},decls:87,vars:47,consts:[[1,"row"],[1,"col-12"],[1,"content-header"],["mat-raised-button","","routerLink","/dashboard/educational-setup/subjects/add-subject",1,"btn","bg-light-info","float-right",3,"queryParams"],[1,"container-fluid"],[1,"form-container",3,"formGroup"],[1,"col-md-4","col-12"],["appearance","legacy"],["formControlName","countryID",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","stageID",3,"selectionChange"],["formControlName","eduYearID"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","stage"],["matColumnDef","year"],["matColumnDef","subject"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","page"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","dropdown btn-group mr-1 mb-1","ngbDropdown","",4,"ngIf"],["ngbDropdown","",1,"dropdown","btn-group","mr-1","mb-1"],["mat-raised-button","","type","button","ngbDropdownToggle","",1,"btn","btn-primary","bg-light-primary","dropdown-toggle"],[1,"caret"],["ngbDropdownMenu","","role","menu",1,"dropdown-menu"],[4,"ngFor","ngForOf"],["class","dropdown-item",3,"routerLink","queryParams",4,"ngIf"],["class","dropdown-item",3,"click",4,"ngIf"],[1,"dropdown-item",3,"routerLink","queryParams"],[1,"ft-edit-2","font-medium-3","mr-2"],[1,"icon-notebook","font-medium-3","mr-2"],[1,"ft-cpu","font-medium-3","mr-2"],[1,"dropdown-item",3,"click"],[1,"ft-trash","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(a,e){1&a&&(t._UZ(0,"ngx-spinner"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"div",2),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",0),t.TgZ(7,"div",1),t.TgZ(8,"mat-card"),t.TgZ(9,"mat-card-title"),t._uU(10),t.ALo(11,"translate"),t.TgZ(12,"button",3),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.TgZ(15,"mat-card-content",4),t.TgZ(16,"div",0),t.TgZ(17,"div",1),t.TgZ(18,"form",5),t.TgZ(19,"div",0),t.TgZ(20,"div",6),t.TgZ(21,"mat-form-field",7),t.TgZ(22,"mat-label"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"mat-select",8),t.NdJ("selectionChange",function(){return e.getEducationalStageByCountryID(null==e.FomCtrls||null==e.FomCtrls.countryID?null:e.FomCtrls.countryID.value)}),t.TgZ(26,"mat-option"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.YNc(29,yn,2,2,"mat-option",9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"div",6),t.TgZ(31,"mat-form-field",7),t.TgZ(32,"mat-label"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t.TgZ(35,"mat-select",10),t.NdJ("selectionChange",function(){return e.getYearbyStageID(null==e.FomCtrls||null==e.FomCtrls.stageID?null:e.FomCtrls.stageID.value)}),t.TgZ(36,"mat-option"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.YNc(39,Sn,2,2,"mat-option",9),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"div",6),t.TgZ(41,"mat-form-field",7),t.TgZ(42,"mat-label"),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.TgZ(45,"mat-select",11),t.TgZ(46,"mat-option"),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.YNc(49,Un,2,2,"mat-option",9),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"mat-card-actions",12),t.TgZ(51,"button",13),t.NdJ("click",function(){return e.getSubjects(1)}),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(54,"div",0),t.TgZ(55,"div",1),t.TgZ(56,"mat-card"),t.TgZ(57,"mat-card-title"),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.TgZ(60,"mat-card-content"),t.TgZ(61,"mat-form-field",14),t.TgZ(62,"mat-label"),t._uU(63,"Filter"),t.qZA(),t.TgZ(64,"input",15,16),t.NdJ("keyup",function(r){return e.applyFilter(r)}),t.qZA(),t.qZA(),t.TgZ(66,"div",17),t.TgZ(67,"table",18),t.ynx(68,19),t.YNc(69,jn,2,0,"th",20),t.YNc(70,Fn,2,1,"td",21),t.BQk(),t.ynx(71,22),t.YNc(72,Ln,3,3,"th",20),t.YNc(73,Nn,2,1,"td",21),t.BQk(),t.ynx(74,23),t.YNc(75,Mn,3,3,"th",20),t.YNc(76,wn,2,1,"td",21),t.BQk(),t.ynx(77,24),t.YNc(78,kn,3,3,"th",20),t.YNc(79,Yn,2,1,"td",21),t.BQk(),t.ynx(80,25),t.YNc(81,Jn,2,0,"th",20),t.YNc(82,Vn,2,1,"td",21),t.BQk(),t.YNc(83,Rn,1,0,"tr",26),t.YNc(84,zn,1,0,"tr",27),t.YNc(85,$n,3,1,"tr",28),t.qZA(),t.TgZ(86,"mat-paginator",29),t.NdJ("page",function(r){return e.getSubjects(r.pageIndex+1)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(4),t.hij(" ",t.lcZ(5,22,"Navbar.EducationalSubjects")," "),t.xp6(6),t.hij(" ",t.lcZ(11,24,"General.Search")," "),t.xp6(2),t.Q6J("queryParams",t.VKq(44,X,e.functionId)),t.xp6(1),t.hij(" ",t.lcZ(14,26,"Material.AddSubject")," "),t.xp6(5),t.Q6J("formGroup",e.myForm),t.xp6(5),t.hij("",t.lcZ(24,28,"labels.Country")," "),t.xp6(4),t.hij(" ",t.lcZ(28,30,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",e.countriesList),t.xp6(4),t.hij("",t.lcZ(34,32,"Navbar.EducationalStage")," "),t.xp6(4),t.hij(" ",t.lcZ(38,34,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",e.stagesList),t.xp6(4),t.hij(" ",t.lcZ(44,36,"labels.EducationalYear")," "),t.xp6(4),t.hij(" ",t.lcZ(48,38,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",e.Years),t.xp6(3),t.hij(" ",t.lcZ(53,40,"General.Search")," "),t.xp6(6),t.hij(" ",t.lcZ(59,42,"Material.Subjects")," "),t.xp6(9),t.Q6J("dataSource",e.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(46,Hn))("length",e.totalItems)("pageSize",10))},directives:[b.Ro,_.a8,_.n5,y.lW,A.rH,_.dn,s._Y,s.JL,s.sg,Z.KE,Z.hX,E.gD,s.JJ,s.u,G.ey,C.sg,_.hq,j.Nt,g.BZ,F.YE,g.w1,g.fO,g.Dz,g.as,g.nj,g.Ee,D.NW,g.ge,F.nU,g.ev,C.O5,N.jt,N.iD,N.Vi,A.yS,g.XQ,g.Gk],pipes:[S.X$],styles:[""]}),n}(),Wn=f(7446),Kn=f(3865);function ta(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1,"#"),t.qZA())}function ea(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.index;t.xp6(1),t.Oqu(a+1)}}function na(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Name")," "))}function aa(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(null==a?null:a.username)}}function ia(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.LectureName")," "))}function oa(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(null==a?null:a.lectureName)}}function ra(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Group")," "))}function la(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(null==a?null:a.groupName)}}function sa(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Attendance")," "))}function ua(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(null==a?null:a.didAttend)}}function da(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Exception")," "))}function ca(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(null==a?null:a.isException)}}function ma(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.refundBalance")," "))}function pa(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(null==a?null:a.didRefund)}}function ga(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"Balance.Amount")," "))}function ha(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.hij(" ",null==a?null:a.amountRefunded," ")}}function _a(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Date")," "))}function fa(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.ALo(2,"NewDate"),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,null==a?null:a.dateRefunded)," ")}}function Za(n,o){1&n&&t._UZ(0,"tr",33)}function va(n,o){1&n&&t._UZ(0,"tr",34)}function Aa(n,o){if(1&n&&(t.TgZ(0,"tr",35),t.TgZ(1,"td",36),t._uU(2),t.qZA(),t.qZA()),2&n){t.oxw();var a=t.MAs(43);t.xp6(2),t.hij(' No data matching the filter "',a.value,'" ')}}var ba=function(o){return{functionId:o}},Ta=function(){return[10]},Ca=function(){var n=function(){function o(a,e,i,r,l,u){var c=this;(0,x.Z)(this,o),this.route=a,this.fb=e,this.toastr=i,this.spinner=r,this.SubjectMaterialsService=l,this.SubjectsService=u,this.students=[],this.displayedColumns=["#","name","lecture","group","attendance","outGroup","refundBalance","amount","date"],this.itemsCount=0,this.route.queryParamMap.subscribe(function(m){c.subjectId=m.get("subjectId"),c.functionId=Number(m.get("functionId"))}),this.route.paramMap.subscribe(function(m){c.materialId=m.get("materialId")}),this.getSubjectByID()}return(0,q.Z)(o,[{key:"ngOnInit",value:function(){this.offlineLectureAttendeesTable(1),this.myForm=this.fb.group({attendance:[!0,s.kI.required],uploadedFile:["",s.kI.required]})}},{key:"ngAfterViewInit",value:function(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"applyFilter",value:function(e){this.dataSource.filter=e.target.value.trim().toLowerCase()}},{key:"UploadStudentAttendance",value:function(){var e=this;this.myForm.controls.uploadedFile.value?(this.spinner.show(),this.SubjectMaterialsService.UploadStudentAttendance(this.materialId,this.myForm.controls.attendance.value,this.myForm.controls.uploadedFile.value).subscribe(function(i){"Success"==i.returnString&&(e.offlineLectureAttendeesTable(1),e.toastr.success("\u062a\u0645 \u0631\u0641\u0639 \u0627\u0644\u062d\u0636\u0648\u0631"),e.myForm.reset()),e.spinner.hide()})):this.toastr.warning("Must Choose File")}},{key:"offlineLectureAttendeesTable",value:function(e){var i=this;this.spinner.show(),this.SubjectMaterialsService.offlineLectureAttendeesTable(this.materialId,e).subscribe(function(r){console.log("offlineLectureAttendeesTable",r),i.dataSource=new g.by(r.model),i.itemsCount=r.itemsCount,i.spinner.hide()})}},{key:"getSubjectByID",value:function(){var e=this;this.SubjectsService.getSubjectByID(this.subjectId).subscribe(function(i){null!=i.subject_id&&(e.subjectName=i.subject_ar_name)})}},{key:"onChange",value:function(e){var i=this,r=e.target.files[0].name,l=e.target.files[0].size,u=e.target.files[0].type,c=e.target.files[0].lastModified,m=e.target.files[0].lastModifiedDate;if(e.target.files){var d=new FileReader;d.readAsDataURL(e.target.files[0]),d.onload=function(p){var T={FileAsBase64:p.target.result.replace("data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,",""),name:r,size:l,type:u,LastModified:c,LastModifiedDate:m};console.log(T),i.myForm.controls.uploadedFile.setValue(T)}}}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(A.gz),t.Y36(s.qu),t.Y36(L._W),t.Y36(b.t2),t.Y36(B.r),t.Y36(w))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-upload-attendance"]],viewQuery:function(a,e){var i;1&a&&(t.Gf(D.NW,5),t.Gf(F.YE,5)),2&a&&(t.iGM(i=t.CRH())&&(e.paginator=i.first),t.iGM(i=t.CRH())&&(e.sort=i.first))},decls:77,vars:35,consts:[[1,"row"],[1,"col-12"],[1,"content-header"],["mat-raised-button","",1,"btn","btn-warning","bg-light-warning","float-right",3,"routerLink","queryParams"],[1,"form-container",3,"formGroup"],["accept",".xlsx,.xls","type","file",1,"form-control",3,"change"],["fileInput",""],[1,"col-2"],["formControlName","attendance",3,"value"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","lecture"],["matColumnDef","group"],["matColumnDef","attendance"],["matColumnDef","outGroup"],["matColumnDef","refundBalance"],["matColumnDef","amount"],["matColumnDef","date"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(a,e){1&a&&(t._UZ(0,"ngx-spinner"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"div",2),t._uU(4),t.ALo(5,"translate"),t.ALo(6,"translate"),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",0),t.TgZ(9,"div",1),t.TgZ(10,"mat-card"),t.TgZ(11,"mat-card-title"),t._uU(12),t.ALo(13,"translate"),t.TgZ(14,"a",3),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA(),t.TgZ(17,"mat-card-content"),t.TgZ(18,"div",0),t.TgZ(19,"div",1),t.TgZ(20,"form",4),t.TgZ(21,"div",0),t.TgZ(22,"div",1),t.TgZ(23,"input",5,6),t.NdJ("change",function(r){return e.onChange(r)}),t.qZA(),t.qZA(),t.TgZ(25,"div",7),t.TgZ(26,"mat-checkbox",8),t._uU(27," \u062a\u0633\u062c\u064a\u0644 \u0628\u0627\u0642\u064a \u063a\u064a\u0627\u0628 \u0627\u0644\u0637\u0644\u0627\u0628 \u0645\u0646 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629 \u0627\u0644\u062e\u0627\u0635\u0629 \u0628\u0627\u0644\u062d\u0635\u0629 \u062e\u0627\u0631\u062c \u0627\u0644\u0645\u0644\u0641 \u0631\u0641\u0639 "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"mat-card-actions",9),t.TgZ(29,"button",10),t.NdJ("click",function(){return e.UploadStudentAttendance()}),t._uU(30),t.ALo(31,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(32,"div",0),t.TgZ(33,"div",1),t.TgZ(34,"mat-card"),t.TgZ(35,"mat-card-title"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"mat-card-content"),t.TgZ(39,"mat-form-field",11),t.TgZ(40,"mat-label"),t._uU(41,"Filter"),t.qZA(),t.TgZ(42,"input",12,13),t.NdJ("keyup",function(r){return e.applyFilter(r)}),t.qZA(),t.qZA(),t.TgZ(44,"div",14),t.TgZ(45,"table",15),t.ynx(46,16),t.YNc(47,ta,2,0,"th",17),t.YNc(48,ea,2,1,"td",18),t.BQk(),t.ynx(49,19),t.YNc(50,na,3,3,"th",17),t.YNc(51,aa,2,1,"td",18),t.BQk(),t.ynx(52,20),t.YNc(53,ia,3,3,"th",17),t.YNc(54,oa,2,1,"td",18),t.BQk(),t.ynx(55,21),t.YNc(56,ra,3,3,"th",17),t.YNc(57,la,2,1,"td",18),t.BQk(),t.ynx(58,22),t.YNc(59,sa,3,3,"th",17),t.YNc(60,ua,2,1,"td",18),t.BQk(),t.ynx(61,23),t.YNc(62,da,3,3,"th",17),t.YNc(63,ca,2,1,"td",18),t.BQk(),t.ynx(64,24),t.YNc(65,ma,3,3,"th",17),t.YNc(66,pa,2,1,"td",18),t.BQk(),t.ynx(67,25),t.YNc(68,ga,3,3,"th",17),t.YNc(69,ha,2,1,"td",18),t.BQk(),t.ynx(70,26),t.YNc(71,_a,3,3,"th",17),t.YNc(72,fa,3,3,"td",18),t.BQk(),t.YNc(73,Za,1,0,"tr",27),t.YNc(74,va,1,0,"tr",28),t.YNc(75,Aa,3,1,"tr",29),t.qZA(),t.TgZ(76,"mat-paginator",30),t.NdJ("page",function(r){return e.offlineLectureAttendeesTable(r.pageIndex+1)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(4),t.lnq(" ",t.lcZ(5,18,"Navbar.EducationalSubjects")," - ",t.lcZ(6,20,"labels.Materials")," - ",t.lcZ(7,22,"labels.UploadAttendance")," "),t.xp6(8),t.AsE(" ",t.lcZ(13,24,"labels.UploadAttendance")," - ",e.subjectName," "),t.xp6(2),t.MGl("routerLink","/dashboard/educational-setup/subjects/material-search/",e.subjectId,""),t.Q6J("queryParams",t.VKq(32,ba,e.functionId)),t.xp6(1),t.hij(" ",t.lcZ(16,26,"General.Back")," "),t.xp6(5),t.Q6J("formGroup",e.myForm),t.xp6(6),t.Q6J("value",!0),t.xp6(4),t.hij(" ",t.lcZ(31,28,"General.Upload")," "),t.xp6(6),t.hij(" ",t.lcZ(37,30,"labels.LectureAttendees")," "),t.xp6(9),t.Q6J("dataSource",e.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(34,Ta))("length",e.itemsCount)("pageSize",10))},directives:[b.Ro,_.a8,_.n5,y.zs,A.yS,_.dn,s._Y,s.JL,s.sg,Wn.oG,s.JJ,s.u,_.hq,y.lW,Z.KE,Z.hX,j.Nt,g.BZ,F.YE,g.w1,g.fO,g.Dz,g.as,g.nj,g.Ee,D.NW,g.ge,F.nU,g.ev,g.XQ,g.Gk],pipes:[S.X$,Kn.H],styles:[".mat-checkbox[_ngcontent-%COMP%]{margin-top:24px!important;display:block!important}"]}),n}(),Ia=(0,q.Z)(function n(){(0,x.Z)(this,n)}),qa=f(3938),xa=function(){var n=function(){function o(a,e,i,r,l,u,c){var m=this;(0,x.Z)(this,o),this.route=a,this.fb=e,this.location=i,this.toastr=r,this.ExamsService=l,this.AuthService=u,this.spinner=c,this.errorMsg=!1,this.Exam=new Ia,this.route.paramMap.subscribe(function(d){m.Exam.id=parseInt(d.get("examId"))}),this.getExamById(this.Exam.id)}return(0,q.Z)(o,[{key:"ngOnInit",value:function(){this.Exam.EduCompId=this.AuthService.getEduCompId(),this.myForm=this.fb.group({examId:["",s.kI.required],file:["",s.kI.required],examGrade:["",[s.kI.required,U.D.minusNum]]})}},{key:"getExamById",value:function(e){var i=this;this.spinner.show(),this.ExamsService.getExamById(e).subscribe(function(r){console.log("getExamById: ",r),r&&(i.Exam=r),i.spinner.hide()})}},{key:"UploadExamStudentGrades",value:function(){var e=this;this.myForm.valid&&(this.spinner.show(),this.ExamsService.UploadExamStudentGrades(this.myForm.value).subscribe(function(i){1==i.returnValue?e.toastr.success("\u062a\u0645 \u0631\u0641\u0639 \u0627\u0644\u062f\u0631\u062c\u0627\u062a"):e.toastr.error(i.returnString),e.spinner.hide()}))}},{key:"onChange",value:function(e){var i=this,r=e.target.files[0].name,l=e.target.files[0].size,u=e.target.files[0].type,c=e.target.files[0].lastModified,m=e.target.files[0].lastModifiedDate;if(e.target.files){var d=new FileReader;d.readAsDataURL(e.target.files[0]),d.onload=function(p){var T={FileAsBase64:p.target.result,name:r,size:l,type:u,LastModified:c,LastModifiedDate:m};console.log(T),i.myForm.controls.file.setValue(T)}}}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(A.gz),t.Y36(s.qu),t.Y36(C.Ye),t.Y36(L._W),t.Y36(qa.R),t.Y36(k.e),t.Y36(b.t2))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-upload-exam-grades"]],decls:30,vars:15,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","","routerLink","/dashboard/exams/exams-index",1,"btn","btn-warning","bg-light-warning","float-right"],[1,"form-container",3,"formGroup"],["type","hidden","id","examId","formControlName","examId",3,"ngModel"],[1,"col-4"],["appearance","legacy"],["matInput","","type","text","formControlName","examGrade"],["accept",".xlsx,.xls","type","file",1,"form-control",3,"change"],["fileInput",""],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"click"]],template:function(a,e){1&a&&(t._UZ(0,"ngx-spinner"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"mat-card"),t.TgZ(4,"mat-card-title"),t._uU(5),t.ALo(6,"translate"),t.TgZ(7,"a",2),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.qZA(),t.TgZ(10,"mat-card-content"),t.TgZ(11,"div",0),t.TgZ(12,"div",1),t.TgZ(13,"form",3),t._UZ(14,"input",4),t.TgZ(15,"div",0),t.TgZ(16,"div",5),t.TgZ(17,"mat-form-field",6),t.TgZ(18,"mat-label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"div",0),t.TgZ(23,"div",5),t.TgZ(24,"input",8,9),t.NdJ("change",function(r){return e.onChange(r)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"mat-card-actions",10),t.TgZ(27,"button",11),t.NdJ("click",function(){return e.UploadExamStudentGrades()}),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(5),t.AsE(" ",t.lcZ(6,7,"Exam.StudentGradesUpload")," - ",e.Exam.exam_ar_name," "),t.xp6(3),t.hij(" ",t.lcZ(9,9,"General.Back")," "),t.xp6(5),t.Q6J("formGroup",e.myForm),t.xp6(1),t.Q6J("ngModel",e.Exam.id),t.xp6(5),t.Oqu(t.lcZ(20,11,"Exam.Grade")),t.xp6(9),t.hij(" ",t.lcZ(29,13,"General.Upload")," "))},directives:[b.Ro,_.a8,_.n5,y.zs,A.yS,_.dn,s._Y,s.JL,s.sg,s.Fj,s.JJ,s.u,Z.KE,Z.hX,j.Nt,_.hq,y.lW],pipes:[S.X$],styles:[""]}),n}(),W=function(){var n=function(){function o(a){(0,x.Z)(this,o),this.http=a}return(0,q.Z)(o,[{key:"addStudyingGroup",value:function(e){return this.http.post("".concat(v.N.apiURL,"studyinggroup/save-studying-groups"),e)}},{key:"getStudentsGroups",value:function(e){return this.http.post("".concat(v.N.apiURL,"studyinggroup/return-studying-groups"),e)}},{key:"getGroupById",value:function(e){return this.http.get("".concat(v.N.apiURL,"studyinggroup/get-group-by-Id/").concat(e))}},{key:"RemoveStudentGroup",value:function(e){return this.http.get("".concat(v.N.apiURL,"studyinggroup/delete-by-Id/").concat(e))}},{key:"searchStudents",value:function(e){return this.http.post("".concat(v.N.apiURL,"studyinggroup/search-student-groups"),e)}},{key:"checkStudent",value:function(e){return this.http.post(v.N.apiURL+"studyinggroup/search-student-in-group",e)}},{key:"addStudent",value:function(e,i){return this.http.get("".concat(v.N.apiURL,"studyinggroup/add-student-groups/").concat(e,"/").concat(i))}},{key:"deleteStudent",value:function(e,i){return this.http.get("".concat(v.N.apiURL,"studyinggroup/remove-student-groups/").concat(e,"/").concat(i))}},{key:"uploadStudentsByExcel",value:function(e){return this.http.post(v.N.apiURL+"studyinggroup/upload-excel-student-groups",e)}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.LFG(et.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n}();function ya(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.AddGroup")," "))}function Sa(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"labels.AddGroup")," - ",a.groupName," ")}}function Ua(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function ja(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function Fa(n,o){if(1&n&&(t.TgZ(0,"mat-hint",22),t.YNc(1,Ua,3,3,"span",2),t.YNc(2,ja,3,3,"span",2),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.groupNameCtrl||null==a.groupNameCtrl.errors?null:a.groupNameCtrl.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.groupNameCtrl||null==a.groupNameCtrl.errors?null:a.groupNameCtrl.errors.whiteSpace)}}function La(n,o){if(1&n&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.teacherUserId),t.xp6(1),t.hij(" ",a.teacher_ar_name," ")}}function Na(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.MustChoosevalue")," "))}function Ma(n,o){if(1&n&&(t.TgZ(0,"mat-hint",22),t.YNc(1,Na,3,3,"span",2),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.teacherIdCtrl||null==a.teacherIdCtrl.errors?null:a.teacherIdCtrl.errors.required)}}function wa(n,o){if(1&n&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.Value),t.xp6(1),t.hij(" ",a.Text," ")}}function ka(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.MustChoosevalue")," "))}function Ya(n,o){if(1&n&&(t.TgZ(0,"mat-hint",22),t.YNc(1,ka,3,3,"span",2),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.subjectIdCtrl||null==a.subjectIdCtrl.errors?null:a.subjectIdCtrl.errors.required)}}function Ja(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Da(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function Qa(n,o){if(1&n&&(t.TgZ(0,"mat-hint",22),t.YNc(1,Ja,3,3,"span",2),t.YNc(2,Da,3,3,"span",2),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.maxLimitCtrl||null==a.maxLimitCtrl.errors?null:a.maxLimitCtrl.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.maxLimitCtrl||null==a.maxLimitCtrl.errors?null:a.maxLimitCtrl.errors.whiteSpace)}}function Ea(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){return t.CHM(a),t.oxw(2).OnEdit()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Update")," "))}function Ga(n,o){if(1&n&&(t.TgZ(0,"mat-card-actions",20),t.YNc(1,Ea,3,3,"button",21),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.groupId>0)}}function Pa(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){return t.CHM(a),t.oxw().addStudyingGroup()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Add")," "))}var Ba=function(o){return{functionId:o}},Oa=function(){var n=function(){function o(a,e,i,r,l,u,c,m){var d=this;(0,x.Z)(this,o),this.fb=a,this.route=e,this.authserv=i,this.router=r,this.msg=l,this.GeneralService=u,this.StudentsGroupsService=c,this.spinner=m,this.groupId=0,this.Teachers=[],this.subjects=[],this.submitted=!1,this.route.queryParamMap.subscribe(function(p){d.groupId=Number(p.get("groupId")),d.groupId>0&&d.getGroupById(d.groupId),d.functionId=Number(p.get("functionId")),d.functionId&&d.authserv.getUserRowFunctions(d.functionId).subscribe(function(h){h&&(d.rowFunctions=h)})})}return(0,q.Z)(o,[{key:"teacherIdCtrl",get:function(){return this.myForm.get("teacherUserId")}},{key:"groupNameCtrl",get:function(){return this.myForm.get("groupName")}},{key:"maxLimitCtrl",get:function(){return this.myForm.get("maxLimit")}},{key:"subjectIdCtrl",get:function(){return this.myForm.get("subjectId")}},{key:"currentYearCtrl",get:function(){return this.myForm.get("currentYear")}},{key:"IdCtrl",get:function(){return this.myForm.get("Id")}},{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.myForm=this.fb.group({Id:"",groupName:["",s.kI.required],teacherUserId:["",s.kI.required],subjectId:["",s.kI.required],maxLimit:["",s.kI.required],currentYear:[1,s.kI.required],EducompId:this.EduCompId,Publish:[1],IsHidden:[0]}),this.getTeachersByEducompId()}},{key:"ngAfterViewInit",value:function(){var e=this;this.authserv.EduCompId.subscribe(function(i){e.EduCompId=i.EduCompId,e.getTeachersByEducompId()})}},{key:"getGroupById",value:function(e){var i=this;this.StudentsGroupsService.getGroupById(e).subscribe(function(r){var l,u,c,m;null===(l=i.teacherIdCtrl)||void 0===l||l.setValue(r.teacherId),i.getSubjectByTeacherId(),i.groupId=r.Id,i.IdCtrl.setValue(r.Id),i.groupName=null==r?void 0:r.Name,null===(u=i.groupNameCtrl)||void 0===u||u.setValue(r.Name),null===(c=i.maxLimitCtrl)||void 0===c||c.setValue(r.maxLimit),null===(m=i.currentYearCtrl)||void 0===m||m.setValue(r.currentYear),i.subjectIdCtrl.setValue(String(null==r?void 0:r.subjectId))})}},{key:"addStudyingGroup",value:function(){var e=this;this.submitted=!0,this.myForm.valid&&(this.spinner.show(),this.StudentsGroupsService.addStudyingGroup(this.myForm.value).subscribe(function(r){console.log("group added",r),1==r.returnValue?e.msg.success("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629"):e.msg.error(r.returnString),e.spinner.hide()}))}},{key:"OnEdit",value:function(){var e=this;this.myForm.valid&&(this.groupId>0&&this.myForm.controls.Id.setValue(this.groupId),this.spinner.show(),this.StudentsGroupsService.addStudyingGroup(this.myForm.value).subscribe(function(i){1==i.returnValue&&(e.msg.success("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629 "),e.submitted=!1),e.spinner.hide()}))}},{key:"getTeachersByEducompId",value:function(){var e=this;this.GeneralService.getTeachersByEducompId(this.EduCompId).subscribe(function(i){e.Teachers=i.lstTeachers})}},{key:"getSubjectByTeacherId",value:function(){var i,e=this;(null===(i=this.teacherIdCtrl)||void 0===i?void 0:i.value)&&this.GeneralService.getSubjectByTeacherId(this.teacherIdCtrl.value).subscribe(function(r){e.subjects=r.lsts})}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(s.qu),t.Y36(A.gz),t.Y36(k.e),t.Y36(A.F0),t.Y36(L._W),t.Y36(O.m),t.Y36(W),t.Y36(b.t2))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-student-group"]],decls:68,vars:46,consts:[[1,"row"],[1,"col-12"],[4,"ngIf"],["mat-raised-button","","routerLink","../student-group",1,"btn","btn-info","bg-light-info","float-right",3,"queryParams"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["appearance","legacy"],["matInput","","formControlName","groupName"],["class","danger",4,"ngIf"],["formControlName","teacherUserId",3,"selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","subjectId"],["matInput","","type","number","formControlName","maxLimit"],[1,"col-md-12","col-12"],["formControlName","currentYear",1,"row"],[1,"col-4"],[3,"value"],["align","end",4,"ngIf"],["align","end"],["mat-raised-button","","class","btn btn-primary",3,"click",4,"ngIf"],[1,"danger"],["mat-raised-button","",1,"btn","btn-primary",3,"click"]],template:function(a,e){1&a&&(t._UZ(0,"ngx-spinner"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"mat-card"),t.TgZ(4,"mat-card-title"),t.YNc(5,ya,3,3,"span",2),t.YNc(6,Sa,3,4,"span",2),t.TgZ(7,"a",3),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.qZA(),t.TgZ(10,"mat-card-content",4),t.TgZ(11,"div",0),t.TgZ(12,"div",1),t.TgZ(13,"form",5),t.TgZ(14,"div",0),t.TgZ(15,"div",6),t.TgZ(16,"mat-form-field",7),t.TgZ(17,"mat-label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"input",8),t.YNc(21,Fa,3,2,"mat-hint",9),t.qZA(),t.qZA(),t.TgZ(22,"div",6),t.TgZ(23,"mat-form-field",7),t.TgZ(24,"mat-label"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"mat-select",10),t.NdJ("selectionChange",function(){return e.getSubjectByTeacherId()}),t.TgZ(28,"mat-option",11),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.YNc(31,La,2,2,"mat-option",12),t.qZA(),t.YNc(32,Ma,2,1,"mat-hint",9),t.qZA(),t.qZA(),t.TgZ(33,"div",6),t.TgZ(34,"mat-form-field",7),t.TgZ(35,"mat-label"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"mat-select",13),t.TgZ(39,"mat-option",11),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.YNc(42,wa,2,2,"mat-option",12),t.qZA(),t.YNc(43,Ya,2,1,"mat-hint",9),t.qZA(),t.qZA(),t.TgZ(44,"div",6),t.TgZ(45,"mat-form-field",7),t.TgZ(46,"mat-label"),t._uU(47),t.ALo(48,"translate"),t.qZA(),t._UZ(49,"input",14),t.YNc(50,Qa,3,2,"mat-hint",9),t.qZA(),t.qZA(),t.TgZ(51,"div",15),t.TgZ(52,"div"),t.TgZ(53,"mat-label"),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"mat-radio-group",16),t.TgZ(57,"div",17),t.TgZ(58,"mat-radio-button",18),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.qZA(),t.TgZ(61,"div",17),t.TgZ(62,"mat-radio-button",18),t._uU(63),t.ALo(64,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(65,Ga,2,1,"mat-card-actions",19),t.TgZ(66,"mat-card-actions",20),t.YNc(67,Pa,3,3,"button",21),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(5),t.Q6J("ngIf",0==e.groupId),t.xp6(1),t.Q6J("ngIf",e.groupId>0),t.xp6(1),t.Q6J("queryParams",t.VKq(44,Ba,e.functionId)),t.xp6(1),t.hij(" ",t.lcZ(9,24,"General.Back")," "),t.xp6(5),t.Q6J("formGroup",e.myForm),t.xp6(5),t.Oqu(t.lcZ(19,26,"labels.GroupName")),t.xp6(3),t.Q6J("ngIf",(null==e.groupNameCtrl?null:e.groupNameCtrl.invalid)&&((null==e.groupNameCtrl?null:e.groupNameCtrl.touched)||e.submitted)),t.xp6(4),t.Oqu(t.lcZ(26,28,"Material.Teacher")),t.xp6(4),t.Oqu(t.lcZ(30,30,"Material.Teacher")),t.xp6(2),t.Q6J("ngForOf",e.Teachers),t.xp6(1),t.Q6J("ngIf",(null==e.teacherIdCtrl?null:e.teacherIdCtrl.invalid)&&((null==e.teacherIdCtrl?null:e.teacherIdCtrl.touched)||e.submitted)),t.xp6(4),t.Oqu(t.lcZ(37,32,"Material.Subjects")),t.xp6(4),t.hij(" ",t.lcZ(41,34,"Material.Subjects")," "),t.xp6(2),t.Q6J("ngForOf",e.subjects),t.xp6(1),t.Q6J("ngIf",(null==e.subjectIdCtrl?null:e.subjectIdCtrl.invalid)&&((null==e.subjectIdCtrl?null:e.subjectIdCtrl.touched)||e.submitted)),t.xp6(4),t.Oqu(t.lcZ(48,36,"labels.MaxLimit")),t.xp6(3),t.Q6J("ngIf",(null==e.maxLimitCtrl?null:e.maxLimitCtrl.invalid)&&((null==e.maxLimitCtrl?null:e.maxLimitCtrl.touched)||e.submitted)),t.xp6(4),t.hij(" ",t.lcZ(55,38,"labels.EducationalYear")," "),t.xp6(4),t.Q6J("value",0),t.xp6(1),t.hij(" ",t.lcZ(60,40,"labels.CurrentYear")," "),t.xp6(3),t.Q6J("value",1),t.xp6(1),t.hij("",t.lcZ(64,42,"labels.NextYear")," "),t.xp6(2),t.Q6J("ngIf",e.groupId>0),t.xp6(2),t.Q6J("ngIf",0==e.groupId))},directives:[b.Ro,_.a8,_.n5,C.O5,y.zs,A.yS,_.dn,s._Y,s.JL,s.sg,Z.KE,Z.hX,j.Nt,s.Fj,s.JJ,s.u,E.gD,G.ey,C.sg,s.wV,Y.VQ,Y.U0,_.hq,Z.bx,y.lW],pipes:[S.X$],styles:[""]}),n}();function Va(n,o){if(1&n&&(t.TgZ(0,"mat-option",17),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.teacherUserId),t.xp6(1),t.hij(" ",a.teacher_ar_name," ")}}function Ra(n,o){1&n&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Name")," "))}function za(n,o){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(a.Name)}}function $a(n,o){1&n&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Teacher")," "))}function Ha(n,o){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(a.Teacher)}}function Xa(n,o){1&n&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Materials")," "))}function Wa(n,o){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(a.Subject)}}function Ka(n,o){1&n&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.MaxLimit")," "))}function ti(n,o){if(1&n&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(a.maxLimit)}}function ei(n,o){1&n&&t._UZ(0,"th",34)}var ot=function(o,a){return{groupId:o,functionId:a}};function ni(n,o){if(1&n&&(t.TgZ(0,"a",43),t._UZ(1,"i",44),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n){var a=t.oxw(2).$implicit,e=t.oxw();t.Q6J("queryParams",t.WLB(4,ot,a.Id,e.functionId)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"labels.AssignStudentToGroup")," ")}}function ai(n,o){if(1&n&&(t.TgZ(0,"a",45),t._UZ(1,"i",44),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&n){var a=t.oxw(2).$implicit,e=t.oxw();t.Q6J("queryParams",t.WLB(4,ot,a.Id,e.functionId)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"General.Edit")," ")}}function ii(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(a);var i=t.oxw(2).$implicit;return t.oxw().openDeleateDialog(i)}),t._UZ(1,"i",47),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"General.Delete")," "))}function oi(n,o){if(1&n&&(t.ynx(0),t.YNc(1,ni,4,7,"a",40),t.YNc(2,ai,4,7,"a",41),t.YNc(3,ii,4,3,"a",42),t.BQk()),2&n){var a=o.$implicit;t.xp6(1),t.Q6J("ngIf","AssignStudentToGroup"===a.functionName),t.xp6(1),t.Q6J("ngIf","Edit"===a.functionName),t.xp6(1),t.Q6J("ngIf","Delete"===a.functionName)}}function ri(n,o){if(1&n&&(t.TgZ(0,"td",35),t.TgZ(1,"div",36),t.TgZ(2,"button",37),t._uU(3," actions "),t.qZA(),t.TgZ(4,"div",38),t.YNc(5,oi,4,3,"ng-container",39),t.qZA(),t.qZA(),t.qZA()),2&n){var a=t.oxw();t.xp6(5),t.Q6J("ngForOf",a.rowFunctions)}}function li(n,o){1&n&&t._UZ(0,"tr",48)}function si(n,o){1&n&&t._UZ(0,"tr",49)}function ui(n,o){if(1&n&&(t.TgZ(0,"tr",50),t.TgZ(1,"td",51),t._uU(2),t.qZA(),t.qZA()),2&n){t.oxw();var a=t.MAs(61);t.xp6(2),t.hij(' No data matching the filter "',a.value,'" ')}}var di=function(o){return{functionId:o}},ci=function(){return[10]},mi=function(){var n=function(){function o(a,e,i,r,l,u,c,m){var d=this;(0,x.Z)(this,o),this.route=a,this.fb=e,this.StudentsGroupsService=i,this.toastr=r,this.authserv=l,this.dialog=u,this.GeneralService=c,this.spinner=m,this.p=1,this.maxSize=9,this.Teachers=[],this.groups=[],this.displayedColumns=["name","teacher","material","maxno","actions"],a.queryParamMap.subscribe(function(p){d.functionId=Number(p.get("functionId")),d.functionId&&d.authserv.getUserRowFunctions(d.functionId).subscribe(function(h){h&&(d.rowFunctions=h)})})}return(0,q.Z)(o,[{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.myForm=this.fb.group({nameQuery:[""],teacherUserId:[""],EduCompId:[this.EduCompId],currentYear:[1],page:[""]}),this.getTeachersByEducompId(),this.getStudentsGroups(1)}},{key:"EduCompIdCtrl",get:function(){return this.myForm.get("EduCompId")}},{key:"applyFilter",value:function(e){this.dataSource.filter=e.target.value.trim().toLowerCase()}},{key:"ngAfterViewInit",value:function(){var e=this;this.authserv.EduCompId.subscribe(function(i){e.EduCompId=i.EduCompId,e.EduCompIdCtrl.setValue(i.EduCompId),e.getStudentsGroups(1),e.getTeachersByEducompId()}),this.authserv.branchId.subscribe(function(i){e.getStudentsGroups(1),e.getTeachersByEducompId()}),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"getStudentsGroups",value:function(e){var r,i=this;null===(r=this.myForm.controls.page)||void 0===r||r.setValue(e),this.p=e,this.spinner.show(),this.StudentsGroupsService.getStudentsGroups(this.myForm.value).subscribe(function(l){i.groups=l.List,i.dataSource=new g.by(l.List),i.itemsCount=l.TotalItemCount,i.spinner.hide()})}},{key:"removeGroup",value:function(e){var i=this;this.StudentsGroupsService.RemoveStudentGroup(e.Id).subscribe(function(r){if(r){var l=i.dataSource.data.findIndex(function(u){return u.Id==e.Id});i.dataSource.data.splice(l,1),i.dataSource.paginator=i.paginator,i.dataSource.sort=i.sort,i.toastr.success("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629")}})}},{key:"openDeleateDialog",value:function(e){var i=this;this.dialog.open(J.F,{data:{msg:e.Name}}).afterClosed().subscribe(function(r){r&&i.removeGroup(e)})}},{key:"getTeachersByEducompId",value:function(){var e=this;this.GeneralService.getTeachersByEducompId(this.EduCompId).subscribe(function(i){e.Teachers=i.lstTeachers})}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(A.gz),t.Y36(s.qu),t.Y36(W),t.Y36(L._W),t.Y36(k.e),t.Y36(I.uw),t.Y36(O.m),t.Y36(b.t2))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-student-group-index"]],viewQuery:function(a,e){var i;1&a&&(t.Gf(D.NW,5),t.Gf(F.YE,5)),2&a&&(t.iGM(i=t.CRH())&&(e.paginator=i.first),t.iGM(i=t.CRH())&&(e.sort=i.first))},decls:83,vars:44,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","","routerLink","../add-group",1,"btn","btn-info","bg-light-info","float-right",3,"queryParams"],[1,"fa","fa-plus-square"],["mat-raised-button","",1,"btn","btn-info","float-right",3,"click"],[1,"fa","fa-search"],[1,"container-fluid"],[1,"form-container",3,"formGroup"],[1,"col-md-6","col-12"],["appearance","legacy"],["formControlName","teacherUserId"],["value",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","nameQuery"],[1,"col-md-12","col-12"],["formControlName","currentYear",1,"row"],[1,"col-4"],[3,"value"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","teacher"],["matColumnDef","material"],["matColumnDef","maxno"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["ngbDropdown","",1,"d-inline-block"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-outline-primary"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],[4,"ngFor","ngForOf"],["ngbDropdownItem","","routerLink","../assign-student-to-group",3,"queryParams",4,"ngIf"],["ngbDropdownItem","","routerLink","../add-group",3,"queryParams",4,"ngIf"],["ngbDropdownItem","",3,"click",4,"ngIf"],["ngbDropdownItem","","routerLink","../assign-student-to-group",3,"queryParams"],[1,"fa","fa-edit","mr-2"],["ngbDropdownItem","","routerLink","../add-group",3,"queryParams"],["ngbDropdownItem","",3,"click"],[1,"fa","fa-times","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(a,e){1&a&&(t._UZ(0,"ngx-spinner"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"mat-card"),t.TgZ(4,"mat-card-title"),t._uU(5),t.ALo(6,"translate"),t.TgZ(7,"a",2),t._UZ(8,"i",3),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"a",4),t.NdJ("click",function(){return e.getStudentsGroups(1)}),t._UZ(12,"i",5),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.TgZ(15,"mat-card-content",6),t.TgZ(16,"div",0),t.TgZ(17,"div",1),t.TgZ(18,"form",7),t.TgZ(19,"div",0),t.TgZ(20,"div",8),t.TgZ(21,"mat-form-field",9),t.TgZ(22,"mat-label"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"mat-select",10),t.TgZ(26,"mat-option",11),t._uU(27),t.ALo(28,"translate"),t.qZA(),t.YNc(29,Va,2,2,"mat-option",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"div",8),t.TgZ(31,"mat-form-field",9),t.TgZ(32,"mat-label"),t._uU(33),t.ALo(34,"translate"),t.qZA(),t._UZ(35,"input",13),t.qZA(),t.qZA(),t.TgZ(36,"div",14),t.TgZ(37,"div"),t.TgZ(38,"mat-label"),t._uU(39),t.ALo(40,"translate"),t.qZA(),t.TgZ(41,"mat-radio-group",15),t.TgZ(42,"div",16),t.TgZ(43,"mat-radio-button",17),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.qZA(),t.TgZ(46,"div",16),t.TgZ(47,"mat-radio-button",17),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",0),t.TgZ(51,"div",1),t.TgZ(52,"mat-card"),t.TgZ(53,"mat-card-title"),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"mat-card-content"),t.TgZ(57,"mat-form-field",18),t.TgZ(58,"mat-label"),t._uU(59,"Filter"),t.qZA(),t.TgZ(60,"input",19,20),t.NdJ("keyup",function(r){return e.applyFilter(r)}),t.qZA(),t.qZA(),t.TgZ(62,"div",21),t.TgZ(63,"table",22),t.ynx(64,23),t.YNc(65,Ra,3,3,"th",24),t.YNc(66,za,2,1,"td",25),t.BQk(),t.ynx(67,26),t.YNc(68,$a,3,3,"th",24),t.YNc(69,Ha,2,1,"td",25),t.BQk(),t.ynx(70,27),t.YNc(71,Xa,3,3,"th",24),t.YNc(72,Wa,2,1,"td",25),t.BQk(),t.ynx(73,28),t.YNc(74,Ka,3,3,"th",24),t.YNc(75,ti,2,1,"td",25),t.BQk(),t.ynx(76,29),t.YNc(77,ei,1,0,"th",24),t.YNc(78,ri,6,1,"td",25),t.BQk(),t.YNc(79,li,1,0,"tr",30),t.YNc(80,si,1,0,"tr",31),t.YNc(81,ui,3,1,"tr",32),t.qZA(),t.TgZ(82,"mat-paginator",33),t.NdJ("page",function(r){return e.getStudentsGroups(r.pageIndex+1)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(5),t.hij(" ",t.lcZ(6,21,"General.Search")," "),t.xp6(2),t.Q6J("queryParams",t.VKq(41,di,e.functionId)),t.xp6(2),t.hij(" ",t.lcZ(10,23,"General.Add")," "),t.xp6(4),t.hij(" ",t.lcZ(14,25,"General.Search")," "),t.xp6(5),t.Q6J("formGroup",e.myForm),t.xp6(5),t.hij(" ",t.lcZ(24,27,"Material.Teacher")," "),t.xp6(4),t.hij(" ",t.lcZ(28,29,"Material.Teacher"),""),t.xp6(2),t.Q6J("ngForOf",e.Teachers),t.xp6(4),t.hij(" ",t.lcZ(34,31,"labels.Name")," "),t.xp6(6),t.hij(" ",t.lcZ(40,33,"labels.EducationalYear")," "),t.xp6(4),t.Q6J("value",0),t.xp6(1),t.hij(" ",t.lcZ(45,35,"labels.CurrentYear")," "),t.xp6(3),t.Q6J("value",1),t.xp6(1),t.hij("",t.lcZ(49,37,"labels.NextYear")," "),t.xp6(6),t.hij(" ",t.lcZ(55,39,"Material.Groups")," "),t.xp6(9),t.Q6J("dataSource",e.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(43,ci))("length",e.itemsCount)("pageSize",10))},directives:[b.Ro,_.a8,_.n5,y.zs,A.yS,_.dn,s._Y,s.JL,s.sg,Z.KE,Z.hX,E.gD,s.JJ,s.u,G.ey,C.sg,j.Nt,s.Fj,Y.VQ,Y.U0,g.BZ,F.YE,g.w1,g.fO,g.Dz,g.as,g.nj,g.Ee,D.NW,g.ge,F.nU,g.ev,N.jt,N.iD,N.Vi,C.O5,N.TH,g.XQ,g.Gk],pipes:[S.X$],styles:[""]}),n}(),K=f(5245);function pi(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Name")," "))}function gi(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(a.Name)}}function hi(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Email")," "))}function _i(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(a.Email)}}function fi(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.MobileNo")," "))}function Zi(n,o){if(1&n&&(t.TgZ(0,"td",32),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.xp6(1),t.Oqu(a.Mobile)}}function vi(n,o){1&n&&(t.TgZ(0,"th",31),t._uU(1,"actions"),t.qZA())}function Ai(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"td",32),t.TgZ(1,"button",33),t.NdJ("click",function(){var r=t.CHM(a).$implicit;return t.oxw().openDeleateDialog(r)}),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA(),t.qZA(),t.qZA()}}function bi(n,o){1&n&&t._UZ(0,"tr",34)}function Ti(n,o){1&n&&t._UZ(0,"tr",35)}function Ci(n,o){if(1&n&&(t.TgZ(0,"tr",36),t.TgZ(1,"td",37),t._uU(2),t.qZA(),t.qZA()),2&n){t.oxw();var a=t.MAs(53);t.xp6(2),t.hij(' No data matching the filter "',a.value,'" ')}}var Ii=function(o){return{functionId:o}},qi=function(){return[10]},xi=function(){var n=function(){function o(a,e,i,r,l,u,c,m){var d=this;(0,x.Z)(this,o),this.route=a,this.authserv=e,this.router=i,this.fb=r,this.StudentsGroupsService=l,this.toastr=u,this.dialog=c,this.spinner=m,this.groupId=0,this.p=1,this.groupMaxCount=0,this.groupCount=0,this.ExcelFile=null,this.students=[],this.displayedColumns=["Name","Email","Mobile","actions"],this.route.queryParamMap.subscribe(function(p){d.groupId=Number(p.get("groupId")),d.functionId=Number(p.get("functionId")),d.functionId&&d.authserv.getUserRowFunctions(d.functionId).subscribe(function(h){h&&(d.rowFunctions=h)})})}return(0,q.Z)(o,[{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.myForm=this.fb.group({page:[1],groupId:[this.groupId],EduCompId:[this.EduCompId],emailQuery:[""],mobileQuery:[""]}),this.searchStudents(1)}},{key:"EduCompIdCtrl",get:function(){return this.myForm.get("EduCompId")}},{key:"groupIdCtrl",get:function(){return this.myForm.get("groupId")}},{key:"ngAfterViewInit",value:function(){var e=this;this.authserv.EduCompId.subscribe(function(i){e.EduCompId=i.EduCompId,e.EduCompIdCtrl.setValue(i.EduCompId),e.searchStudents(1)}),this.authserv.branchId.subscribe(function(i){e.searchStudents(1)}),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"applyFilter",value:function(e){this.dataSource.filter=e.target.value.trim().toLowerCase()}},{key:"searchStudents",value:function(e){var r,i=this;null===(r=this.myForm.controls.page)||void 0===r||r.setValue(e),this.p=e,this.spinner.show(),this.p=e,this.StudentsGroupsService.searchStudents(this.myForm.value).subscribe(function(l){i.students=l.List,i.dataSource=new g.by(l.List),i.groupCount=l.Count,console.log("Count",l.Count),i.spinner.hide()})}},{key:"addStudent",value:function(){var e=this;this.spinner.show(),console.log("form values add",this.myForm.value),this.StudentsGroupsService.checkStudent(this.myForm.value).subscribe(function(i){var r;i.InGroup?e.toastr.info("\u0647\u0630\u0627 \u0627\u0644\u0637\u0627\u0644\u0628 \u0645\u0648\u062c\u0648\u062f \u0645\u0633\u0628\u0642\u0627\u064e \u062f\u0627\u062e\u0644 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629"):(e.spinner.show(),e.StudentsGroupsService.addStudent(null===(r=i.student)||void 0===r?void 0:r.userId,e.groupId).subscribe(function(l){"Student already exists in a group with the same teacher and subject"==l.returnString?e.toastr.info("\u0647\u0630\u0627 \u0627\u0644\u0637\u0627\u0644\u0628 \u0645\u0648\u062c\u0648\u062f \u0645\u0633\u0628\u0642\u0627\u064e \u062f\u0627\u062e\u0644 \u0645\u062c\u0645\u0648\u0639\u0629 \u0644\u0646\u0641\u0633 \u0627\u0644\u0645\u0627\u062f\u0629 \u0648\u0646\u0641\u0633 \u0627\u0644\u0645\u062f\u0631\u0633"):(e.toastr.success("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0637\u0627\u0644\u0628 \u0628\u0646\u062c\u0627\u062d"),e.searchStudents(1)),e.spinner.hide()}))})}},{key:"openDeleateDialog",value:function(e){var i=this;this.dialog.open(J.F,{data:{msg:e.Name}}).afterClosed().subscribe(function(r){r&&i.deleteStudent(e)})}},{key:"deleteStudent",value:function(e){var i=this;this.spinner.show(),this.StudentsGroupsService.deleteStudent(e.userId,this.groupId).subscribe(function(r){if(1==r.returnValue){var l=i.dataSource.data.findIndex(function(u){return e});i.dataSource.data.splice(l,1),i.dataSource.paginator=i.paginator,i.toastr.success("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0637\u0627\u0644\u0628 \u0645\u0646 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0629")}else i.toastr.warning(r);i.spinner.hide()})}},{key:"uploadStudentsByExcel",value:function(){var e=this;null==this.ExcelFile?this.toastr.info("\u064a\u062c\u0628 \u0625\u0631\u0641\u0627\u0642 Excel File"):(this.spinner.show(),this.StudentsGroupsService.uploadStudentsByExcel({ExcelFile:this.ExcelFile,groupId:this.groupId}).subscribe(function(i){1==i.returnValue?e.toastr.success("\u062a\u0645 \u0631\u0641\u0639 \u0627\u0644\u0645\u0644\u0641 \u0628\u0646\u062c\u0627\u062d "):console.log("ExcelFile",i),e.spinner.hide()}))}},{key:"onChange",value:function(e){var i=this,r=e.target.files[0].name,l=e.target.files[0].size,u=e.target.files[0].type,c=e.target.files[0].lastModified,m=e.target.files[0].lastModifiedDate;if(e.target.files){var d=new FileReader;d.readAsDataURL(e.target.files[0]),d.onload=function(p){var T={FileAsBase64:p.target.result.replace("data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,",""),name:r,size:l,type:u,LastModified:c,LastModifiedDate:m};i.ExcelFile=T}}}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(A.gz),t.Y36(k.e),t.Y36(A.F0),t.Y36(s.qu),t.Y36(W),t.Y36(L._W),t.Y36(I.uw),t.Y36(b.t2))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-assign-student-to-group"]],viewQuery:function(a,e){var i;1&a&&(t.Gf(D.NW,5),t.Gf(F.YE,5)),2&a&&(t.iGM(i=t.CRH())&&(e.paginator=i.first),t.iGM(i=t.CRH())&&(e.sort=i.first))},decls:72,vars:35,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","","routerLink","../student-group",1,"btn","btn-info","bg-light-info","float-right",3,"queryParams"],["mat-raised-button","",1,"btn","btn-warning","float-right",3,"click"],[1,"fa","fa-search"],["mat-raised-button","",1,"btn","btn-info","float-right",3,"click"],[1,"fa","fa-plus-square"],[1,"container-fluid"],[1,"form-container",3,"formGroup"],[1,"col-md-6","col-12"],["appearance","legacy"],["matInput","","type","text","formControlName","emailQuery"],["matInput","","type","text","formControlName","mobileQuery"],["type","file","name","uploadedFile",1,"file-upload",3,"change"],["type","button",1,"btn","btn-primary","pull-left","ad-qus","font-dro",3,"click"],[1,"fa","fa-upload"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","Name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Email"],["matColumnDef","Mobile"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-mini-fab","","color","warn","matTooltip","delete student",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(a,e){1&a&&(t._UZ(0,"ngx-spinner"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"mat-card"),t.TgZ(4,"mat-card-title"),t._uU(5),t.ALo(6,"translate"),t.TgZ(7,"a",2),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"a",3),t.NdJ("click",function(){return e.searchStudents(1)}),t._uU(11),t.ALo(12,"translate"),t._UZ(13,"i",4),t.qZA(),t.TgZ(14,"a",5),t.NdJ("click",function(){return e.addStudent()}),t._uU(15),t.ALo(16,"translate"),t._UZ(17,"i",6),t.qZA(),t.qZA(),t.TgZ(18,"mat-card-content",7),t.TgZ(19,"div",0),t.TgZ(20,"div",1),t.TgZ(21,"form",8),t.TgZ(22,"div",0),t.TgZ(23,"div",9),t.TgZ(24,"mat-form-field",10),t.TgZ(25,"mat-label"),t._uU(26),t.ALo(27,"translate"),t.qZA(),t._UZ(28,"input",11),t.qZA(),t.qZA(),t.TgZ(29,"div",9),t.TgZ(30,"mat-form-field",10),t.TgZ(31,"mat-label"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t._UZ(34,"input",12),t.qZA(),t.qZA(),t.TgZ(35,"div",9),t.TgZ(36,"mat-label"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t.TgZ(39,"input",13),t.NdJ("change",function(r){return e.onChange(r)}),t.qZA(),t.qZA(),t.TgZ(40,"div",9),t.TgZ(41,"button",14),t.NdJ("click",function(){return e.uploadStudentsByExcel()}),t._UZ(42,"i",15),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(45,"div",0),t.TgZ(46,"div",1),t.TgZ(47,"mat-card"),t.TgZ(48,"mat-card-content"),t.TgZ(49,"mat-form-field",16),t.TgZ(50,"mat-label"),t._uU(51,"Filter"),t.qZA(),t.TgZ(52,"input",17,18),t.NdJ("keyup",function(r){return e.applyFilter(r)}),t.qZA(),t.qZA(),t.TgZ(54,"div",19),t.TgZ(55,"table",20),t.ynx(56,21),t.YNc(57,pi,3,3,"th",22),t.YNc(58,gi,2,1,"td",23),t.BQk(),t.ynx(59,24),t.YNc(60,hi,3,3,"th",22),t.YNc(61,_i,2,1,"td",23),t.BQk(),t.ynx(62,25),t.YNc(63,fi,3,3,"th",22),t.YNc(64,Zi,2,1,"td",23),t.BQk(),t.ynx(65,26),t.YNc(66,vi,2,0,"th",22),t.YNc(67,Ai,4,0,"td",23),t.BQk(),t.YNc(68,bi,1,0,"tr",27),t.YNc(69,Ti,1,0,"tr",28),t.YNc(70,Ci,3,1,"tr",29),t.qZA(),t.TgZ(71,"mat-paginator",30),t.NdJ("page",function(r){return e.searchStudents(r.pageIndex+1)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(5),t.hij(" ",t.lcZ(6,16,"labels.AssignStudentToGroup")," "),t.xp6(2),t.Q6J("queryParams",t.VKq(32,Ii,e.functionId)),t.xp6(1),t.hij(" ",t.lcZ(9,18,"General.Back")," "),t.xp6(3),t.hij(" ",t.lcZ(12,20,"General.Search")," "),t.xp6(4),t.hij(" ",t.lcZ(16,22,"General.Add")," "),t.xp6(6),t.Q6J("formGroup",e.myForm),t.xp6(5),t.hij(" ",t.lcZ(27,24,"labels.Email")," "),t.xp6(6),t.hij(" ",t.lcZ(33,26,"labels.MobileNo")," "),t.xp6(5),t.hij(" ",t.lcZ(38,28,"labels.ExcelSheet")," "),t.xp6(6),t.hij(" ",t.lcZ(44,30,"General.Upload")," "),t.xp6(12),t.Q6J("dataSource",e.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(34,qi))("length",e.groupCount)("pageSize",10))},directives:[b.Ro,_.a8,_.n5,y.zs,A.yS,_.dn,s._Y,s.JL,s.sg,Z.KE,Z.hX,j.Nt,s.Fj,s.JJ,s.u,g.BZ,F.YE,g.w1,g.fO,g.Dz,g.as,g.nj,g.Ee,D.NW,g.ge,F.nU,g.ev,y.lW,V.gM,K.Hw,g.XQ,g.Gk],pipes:[S.X$],styles:[""]}),n}(),R=f(9430),yi=f(530);function Si(n,o){if(1&n&&(t.TgZ(0,"mat-option",4),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.teacherUserId),t.xp6(1),t.hij(" ",a.teacher_ar_name," ")}}var Ui=function(){var n=function(){function o(a,e){(0,x.Z)(this,o),this.authserv=a,this.generalService=e}return(0,q.Z)(o,[{key:"ngOnInit",value:function(){this.EduCompId=Number(this.authserv.getEduCompId()),this.onSelectSubjects()}},{key:"onSelectSubjects",value:function(){var e=this;this.generalService.getTeacherBySubjectAndEduCompId(this.EduCompId,0).subscribe(function(i){i&&(e.teachers=i.teachers,console.log("edu",e.EduCompId),console.log("hhhh",i.teachers))})}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(k.e),t.Y36(O.m))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-teacher-by-educational-component-Id"]],inputs:{control:"control",subjectControl:"subjectControl",submitted:"submitted"},decls:11,vars:11,consts:[["appearance","legacy"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"control","submitted","isSelect"],[3,"value"]],template:function(a,e){1&a&&(t.TgZ(0,"mat-form-field",0),t.TgZ(1,"mat-label"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-select",1),t.TgZ(5,"mat-option"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.YNc(8,Si,2,2,"mat-option",2),t.qZA(),t.TgZ(9,"mat-hint"),t._UZ(10,"input-validation-msg",3),t.qZA(),t.qZA()),2&a&&(t.xp6(2),t.Oqu(t.lcZ(3,7,"labels.Teacher")),t.xp6(2),t.Q6J("formControl",e.control),t.xp6(2),t.Oqu(t.lcZ(7,9,"General.Choose")),t.xp6(2),t.Q6J("ngForOf",e.teachers),t.xp6(2),t.Q6J("control",e.control)("submitted",e.submitted)("isSelect",!0))},directives:[Z.KE,Z.hX,E.gD,s.JJ,s.oH,G.ey,C.sg,Z.bx,yi.p],pipes:[S.X$],styles:[""]}),n}();function ji(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Fi(n,o){if(1&n&&(t.TgZ(0,"mat-hint",24),t.YNc(1,ji,3,3,"span",25),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl||null==a.FormCtrl.subject_ar_name||null==a.FormCtrl.subject_ar_name.errors?null:a.FormCtrl.subject_ar_name.errors.required)}}function Li(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Ni(n,o){if(1&n&&(t.TgZ(0,"mat-hint",24),t.YNc(1,Li,3,3,"span",25),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl||null==a.FormCtrl.subject_en_name||null==a.FormCtrl.subject_en_name.errors?null:a.FormCtrl.subject_en_name.errors.required)}}function Mi(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function wi(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"course.unCorrectLink")," "))}function ki(n,o){if(1&n&&(t.TgZ(0,"mat-hint",24),t.YNc(1,Mi,3,3,"span",25),t.YNc(2,wi,3,3,"span",25),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl||null==a.FormCtrl.subjectPromoVideoPath||null==a.FormCtrl.subjectPromoVideoPath.errors?null:a.FormCtrl.subjectPromoVideoPath.errors.required),t.xp6(1),t.Q6J("ngIf",null==a.FormCtrl||null==a.FormCtrl.subjectPromoVideoPath||null==a.FormCtrl.subjectPromoVideoPath.errors?null:a.FormCtrl.subjectPromoVideoPath.errors.noSpace)}}function Yi(n,o){if(1&n&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.stage_ar_name," ")}}function Ji(n,o){if(1&n&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&n){var a=o.$implicit;t.Q6J("value",a.id),t.xp6(1),t.hij(" ",a.Educational_year_ar_name," ")}}var Di=function(o){return{functionId:o}},rt=function(){var n=function(){function o(a,e,i,r,l,u,c,m){var d=this;(0,x.Z)(this,o),this.route=a,this.fb=e,this.toastr=i,this.translate=r,this.SubjectsService=l,this.generlServ=u,this.spinner=c,this.eduServ=m,this.subjectId=0,this.mainSubjects=[],this.countriesList=[],this.stagesList=[],this.Years=[],this.submitted=!1,this.coverPath=null,this.route.paramMap.subscribe(function(p){d.subjectId=Number(p.get("subjectId")),d.subjectId>0&&d.getSubjectByID(d.subjectId)}),this.translate.onLangChange.subscribe(function(p){d.currentLang=p.lang}),a.queryParamMap.subscribe(function(p){d.functionId=Number(p.get("functionId"))})}return(0,q.Z)(o,[{key:"ngOnInit",value:function(){this.getAllCountriesList(),this.getMainSubject(),this.myForm=this.fb.group({subject_id:[this.subjectId],subject_ar_name:[null,[s.kI.required,s.kI.maxLength(100),U.D.whiteSpace]],subject_en_name:[null,[s.kI.required,s.kI.maxLength(100),U.D.whiteSpace]],subjectThumbnailId:[null],parent_ID:[null],country_id:[null],stage_id:[null],Educational_yearID:[null,s.kI.required],subjectPromoVideoPath:[null],subjectDescription:[null],subjectThumbnailFileBase64:[null],teacherUserId:[null,s.kI.required]})}},{key:"FormCtrl",get:function(){return this.myForm.controls}},{key:"getSubjectByID",value:function(e){var i=this;this.spinner.show(),this.SubjectsService.getSubjectByID(e).subscribe(function(r){null!=r.subject_id&&(i.subjectId=r.subject_id,i.myForm.patchValue(r),i.coverPath="".concat(v.N.apiURL.replace("/api/","")).concat(r.attach_path),i.getEducationalStageByCountryID(),i.getYearbyStageID(r.stage_id),i.spinner.hide())})}},{key:"addEditSubject",value:function(){var i,r,l,u,c,m,d,p,h,T,P,Q,e=this;this.submitted=!0;var M={};M.subject_id=null===(i=this.FormCtrl.subject_id)||void 0===i?void 0:i.value,M.subject_ar_name=null===(r=this.FormCtrl.subject_ar_name)||void 0===r?void 0:r.value,M.subject_en_name=null===(l=this.FormCtrl.subject_en_name)||void 0===l?void 0:l.value,M.parent_ID=null===(u=this.FormCtrl.parent_ID)||void 0===u?void 0:u.value,M.teacherUserId=null===(c=this.FormCtrl.teacherUserId)||void 0===c?void 0:c.value,M.Educational_yearID=null===(m=this.FormCtrl.Educational_yearID)||void 0===m?void 0:m.value,M.subjectThumbnailId=null===(d=this.FormCtrl.subjectThumbnailId)||void 0===d?void 0:d.value,M.subjectDescription=null===(p=this.FormCtrl.subjectDescription)||void 0===p?void 0:p.value,M.subjectThumbnailFileBase64=null===(h=this.FormCtrl.subjectThumbnailFileBase64)||void 0===h?void 0:h.value,M.subjectPromoVideoPath=null===(T=this.FormCtrl.subjectPromoVideoPath)||void 0===T?void 0:T.value,(null===(P=this.FormCtrl.subjectThumbnailId)||void 0===P?void 0:P.value)||(null===(Q=this.FormCtrl.subjectThumbnailFileBase64)||void 0===Q?void 0:Q.value)?this.myForm.valid&&(this.spinner.show(),this.SubjectsService.addEditSubject(M).subscribe(function(z){1==z.returnValue&&(e.submitted=!1,e.spinner.hide(),e.toastr.success("Subject Added successfully"))})):this.toastr.warning("\u0645\u0646 \u0641\u0636\u0644\u0643 \u0627\u062e\u062a\u0631 \u0635\u0648\u0631\u0629 \u0627\u0644\u063a\u0644\u0627\u0641")}},{key:"getMainSubject",value:function(){var e=this;this.SubjectsService.getMainSubject().subscribe(function(i){e.mainSubjects=i,e.spinner.hide()})}},{key:"getAllCountriesList",value:function(){var e=this;this.generlServ.getAllCountriesList().subscribe(function(i){e.countriesList=i,1==i.length&&(e.FormCtrl.country_id.setValue(i[0].country_id),e.getEducationalStageByCountryID()),e.spinner.hide()})}},{key:"getEducationalStageByCountryID",value:function(){var i,r,e=this;(null===(i=this.FormCtrl.country_id)||void 0===i?void 0:i.value)&&(this.spinner.show(),this.eduServ.getEducationalStageByCountryID(null===(r=this.FormCtrl.country_id)||void 0===r?void 0:r.value).subscribe(function(l){var u,c,m;e.stagesList=l.eduYearsList,1==(null===(u=e.stagesList)||void 0===u?void 0:u.length)&&(e.FormCtrl.stage_id.setValue(null===(c=e.stagesList[0])||void 0===c?void 0:c.id),e.getYearbyStageID(null===(m=e.stagesList[0])||void 0===m?void 0:m.id)),e.spinner.hide()}))}},{key:"getYearbyStageID",value:function(e){var i=this;""!=e&&(this.spinner.show(),this.eduServ.getYearbyStageID(e).subscribe(function(r){i.Years=r.eduYearsList,i.spinner.hide()}))}},{key:"imageUrl",value:function(){var e,i,r,l;return null!=(null===(i=null===(e=this.FormCtrl.subjectThumbnailFileBase64)||void 0===e?void 0:e.value)||void 0===i?void 0:i.FileAsBase64)?null===(l=null===(r=this.FormCtrl.subjectThumbnailFileBase64)||void 0===r?void 0:r.value)||void 0===l?void 0:l.FileAsBase64:this.coverPath}},{key:"onChange",value:function(e){var i=this,r=e.target.files[0].name,l=e.target.files[0].size,u=e.target.files[0].type,c=e.target.files[0].lastModified,m=e.target.files[0].lastModifiedDate;if(e.target.files){var d=new FileReader;d.readAsDataURL(e.target.files[0]),d.onload=function(p){var h;null===(h=i.FormCtrl.subjectThumbnailFileBase64)||void 0===h||h.setValue({FileAsBase64:p.target.result,name:r,size:l,type:u,LastModified:c,LastModifiedDate:m})}}}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(A.gz),t.Y36(s.qu),t.Y36(R.K),t.Y36(S.sK),t.Y36(w),t.Y36(O.m),t.Y36(b.t2),t.Y36(it.i))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-subject"]],decls:80,vars:54,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","","routerLink","/dashboard/educational-setup/subjects/index",1,"btn","bg-light-warning","float-right",3,"queryParams"],[1,"container-fluid"],[1,"form-container",3,"formGroup"],[1,"col-md-6","col-12"],["appearance","legacy"],["matInput","","formControlName","subject_ar_name"],["class","danger",4,"ngIf"],["matInput","","formControlName","subject_en_name"],["matInput","","formControlName","subjectPromoVideoPath"],[1,"h-100","row","align-items-center","evenly"],["id","input-file","type","file","accept","image/*",3,"hidden","change"],["for","input-file","mat-raised-button","",1,"btn","btn-primary","float-right"],[1,"mt-1","mr-2","float-right"],[1,"coverPhoto",3,"src","alt"],["matInput","","formControlName","subjectDescription"],[1,"col-md-4","col-12"],["formControlName","stage_id",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","Educational_yearID"],[3,"control","submitted"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],[1,"danger"],[4,"ngIf"],[3,"value"]],template:function(a,e){1&a&&(t._UZ(0,"ngx-spinner"),t.TgZ(1,"div",0),t.TgZ(2,"div",1),t.TgZ(3,"mat-card"),t.TgZ(4,"mat-card-title"),t._uU(5),t.ALo(6,"translate"),t.TgZ(7,"button",2),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.qZA(),t.TgZ(10,"mat-card-content",3),t.TgZ(11,"div",0),t.TgZ(12,"div",1),t.TgZ(13,"form",4),t.TgZ(14,"div",0),t.TgZ(15,"div",5),t.TgZ(16,"div",0),t.TgZ(17,"div",1),t.TgZ(18,"mat-form-field",6),t.TgZ(19,"mat-label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"input",7),t.YNc(23,Fi,2,1,"mat-hint",8),t.qZA(),t.qZA(),t.TgZ(24,"div",1),t.TgZ(25,"mat-form-field",6),t.TgZ(26,"mat-label"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t._UZ(29,"input",9),t.YNc(30,Ni,2,1,"mat-hint",8),t.qZA(),t.qZA(),t.TgZ(31,"div",1),t.TgZ(32,"mat-form-field",6),t.TgZ(33,"mat-label"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t._UZ(36,"input",10),t.YNc(37,ki,3,2,"mat-hint",8),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(38,"div",5),t.TgZ(39,"div",11),t.TgZ(40,"input",12),t.NdJ("change",function(r){return e.onChange(r)}),t.qZA(),t.TgZ(41,"label",13),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.TgZ(44,"span",14),t._UZ(45,"img",15),t.ALo(46,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"div",1),t.TgZ(48,"mat-form-field",6),t.TgZ(49,"mat-label"),t._uU(50),t.ALo(51,"translate"),t.qZA(),t._UZ(52,"textarea",16),t.qZA(),t.qZA(),t.TgZ(53,"div",17),t.TgZ(54,"mat-form-field",6),t.TgZ(55,"mat-label"),t._uU(56),t.ALo(57,"translate"),t.qZA(),t.TgZ(58,"mat-select",18),t.NdJ("selectionChange",function(){return e.getYearbyStageID(null==e.FormCtrl||null==e.FormCtrl.stage_id?null:e.FormCtrl.stage_id.value)}),t.TgZ(59,"mat-option"),t._uU(60),t.ALo(61,"translate"),t.qZA(),t.YNc(62,Yi,2,2,"mat-option",19),t.qZA(),t.qZA(),t.qZA(),t.TgZ(63,"div",17),t.TgZ(64,"mat-form-field",6),t.TgZ(65,"mat-label"),t._uU(66),t.ALo(67,"translate"),t.qZA(),t.TgZ(68,"mat-select",20),t.TgZ(69,"mat-option"),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.YNc(72,Ji,2,2,"mat-option",19),t.qZA(),t.qZA(),t.qZA(),t.TgZ(73,"div",17),t._UZ(74,"app-teacher-by-educational-component-Id",21),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(75,"mat-card-actions",22),t.TgZ(76,"button",23),t.NdJ("click",function(){return e.addEditSubject()}),t._uU(77),t.ALo(78,"translate"),t.ALo(79,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(5),t.hij(" ",t.lcZ(6,24,"Material.AddSubject")," "),t.xp6(2),t.Q6J("queryParams",t.VKq(52,Di,e.functionId)),t.xp6(1),t.hij(" ",t.lcZ(9,26,"General.Back")," "),t.xp6(5),t.Q6J("formGroup",e.myForm),t.xp6(7),t.Oqu(t.lcZ(21,28,"labels.arName")),t.xp6(3),t.Q6J("ngIf",(null==e.FormCtrl||null==e.FormCtrl.subject_ar_name?null:e.FormCtrl.subject_ar_name.invalid)&&((null==e.FormCtrl||null==e.FormCtrl.subject_ar_name?null:e.FormCtrl.subject_ar_name.touched)||e.submitted)),t.xp6(4),t.hij(" ",t.lcZ(28,30,"labels.enName")," "),t.xp6(3),t.Q6J("ngIf",(null==e.FormCtrl||null==e.FormCtrl.subject_en_name?null:e.FormCtrl.subject_en_name.invalid)&&((null==e.FormCtrl||null==e.FormCtrl.subject_en_name?null:e.FormCtrl.subject_en_name.touched)||e.submitted)),t.xp6(4),t.Oqu(t.lcZ(35,32,"labels.promoLink")),t.xp6(3),t.Q6J("ngIf",(null==e.FormCtrl||null==e.FormCtrl.subjectPromoVideoPath?null:e.FormCtrl.subjectPromoVideoPath.invalid)&&((null==e.FormCtrl||null==e.FormCtrl.subjectPromoVideoPath?null:e.FormCtrl.subjectPromoVideoPath.touched)||e.submitted)),t.xp6(3),t.Q6J("hidden",!0),t.xp6(2),t.hij("",t.lcZ(43,34,"labels.coverPhoto")," "),t.xp6(3),t.s9C("alt",t.lcZ(46,36,"labels.coverPhoto")),t.Q6J("src",e.imageUrl(),t.LSH),t.xp6(5),t.hij("",t.lcZ(51,38,"labels.description")," "),t.xp6(6),t.hij("",t.lcZ(57,40,"Navbar.EducationalStage")," "),t.xp6(4),t.hij(" ",t.lcZ(61,42,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",e.stagesList),t.xp6(4),t.hij(" ",t.lcZ(67,44,"labels.EducationalYear")," "),t.xp6(4),t.hij(" ",t.lcZ(71,46,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",e.Years),t.xp6(2),t.Q6J("control",e.FormCtrl.teacherUserId)("submitted",e.submitted),t.xp6(3),t.hij(" ",0==e.subjectId?t.lcZ(78,48,"General.Add"):t.lcZ(79,50,"General.Update")," "))},directives:[b.Ro,_.a8,_.n5,y.lW,A.rH,_.dn,s._Y,s.JL,s.sg,Z.KE,Z.hX,j.Nt,s.Fj,s.JJ,s.u,C.O5,E.gD,G.ey,C.sg,Ui,_.hq,Z.bx],pipes:[S.X$],styles:[".coverPhoto[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:10px;margin:5px 0;overflow:hidden}"]}),n}();function Qi(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"subjects.AddLesson")," "))}function Ei(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"subjects.UpdateLesson")," - ",a.lesson_name," ")}}function Gi(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Pi(n,o){if(1&n&&(t.TgZ(0,"mat-hint",21),t.YNc(1,Gi,3,3,"span",1),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==a.FormCtrls.lesson_ar_name.errors?null:a.FormCtrls.lesson_ar_name.errors.required)&&(null==a.FormCtrls.lesson_ar_name.errors?null:a.FormCtrls.lesson_ar_name.errors.whiteSpace))}}function Bi(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Oi(n,o){if(1&n&&(t.TgZ(0,"mat-hint",21),t.YNc(1,Bi,3,3,"span",1),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==a.FormCtrls.lesson_en_name.errors?null:a.FormCtrls.lesson_en_name.errors.required)&&(null==a.FormCtrls.lesson_en_name.errors?null:a.FormCtrls.lesson_en_name.errors.whiteSpace))}}function Vi(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){return t.CHM(a),t.oxw().addUpdateLesson()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Add")," "))}function Ri(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){return t.CHM(a),t.oxw().addUpdateLesson()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Update")," "))}var lt=function(){var n=function(){function o(a,e,i,r,l,u,c){(0,x.Z)(this,o),this.fb=a,this.msg=e,this.route=i,this.spinner=r,this.SubjectsService=l,this.data=u,this.dialogRef=c,this.submitted=!1,this.coverPath=null,this.baseUrl=null==v.N?void 0:v.N.apiURL.replace("/api/",""),this.unitId=u.unitId,this.lessonId=u.lesson.id,this.lessonId>0&&this.getLessonById()}return(0,q.Z)(o,[{key:"ngOnInit",value:function(){this.myForm=this.fb.group({id:[this.lessonId],lesson_ar_name:["",[s.kI.required,U.D.whiteSpace]],lesson_en_name:["",[s.kI.required,U.D.whiteSpace]],lessonDescription:[""],thumbnailPic:[null]})}},{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"getLessonById",value:function(){var e=this;this.spinner.show(),this.SubjectsService.getLessonById(this.lessonId).subscribe(function(i){var r;i.addedLesson&&(e.myForm.patchValue(i.addedLesson),e.lesson_name=i.addedLesson.lesson_ar_name,e.coverPath=e.imgUrl(null===(r=i.addedLesson.lessonThumb)||void 0===r?void 0:r.attach_path),e.spinner.hide())})}},{key:"addUpdateLesson",value:function(){var i,r,l,u,c,e=this;this.submitted=!0;var m={},d={};d.id=null===(i=this.FormCtrls.id)||void 0===i?void 0:i.value,d.lesson_ar_name=null===(r=this.FormCtrls.lesson_ar_name)||void 0===r?void 0:r.value,d.lesson_en_name=null===(l=this.FormCtrls.lesson_en_name)||void 0===l?void 0:l.value,d.lessonDescription=null===(u=this.FormCtrls.lessonDescription)||void 0===u?void 0:u.value,d.thumbnailPic=null===(c=this.FormCtrls.thumbnailPic)||void 0===c?void 0:c.value,m.addedLesson=d,null!=d.thumbnailPic||this.coverPath!=this.imgUrl(void 0)&&this.coverPath!=this.imgUrl(null)?this.myForm.valid&&(this.spinner.show(),this.SubjectsService.addUpdateLesson(this.unitId,m).subscribe(function(p){p&&(e.dialogRef.close(p),e.spinner.hide(),e.msg.success(0==e.lessonId?"General.AddSuccessfully":"General.UpdateSuccessfully"))})):this.msg.warning("\u0645\u0646 \u0641\u0636\u0644\u0643 \u0627\u062e\u062a\u0631 \u0635\u0648\u0631\u0629 \u0627\u0644\u063a\u0644\u0627\u0641")}},{key:"imgUrl",value:function(e){return this.baseUrl+e}},{key:"onChange",value:function(e){var i=this,r=e.target.files[0].name,l=e.target.files[0].size,u=e.target.files[0].type,c=e.target.files[0].lastModified,m=e.target.files[0].lastModifiedDate;if(e.target.files){var d=new FileReader;d.readAsDataURL(e.target.files[0]),d.onload=function(p){var h=p.target.result,T={FileAsBase64:h,name:r,size:l,type:u,LastModified:c,LastModifiedDate:m};i.coverPath=h,i.FormCtrls.thumbnailPic.setValue(T)}}}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(s.qu),t.Y36(R.K),t.Y36(A.gz),t.Y36(b.t2),t.Y36(w),t.Y36(I.WI),t.Y36(I.so))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-lesson"]],decls:43,vars:24,consts:[["mat-dialog-title","",1,"primary-color"],[4,"ngIf"],["mat-dialog-content",""],[3,"formGroup"],[1,"row"],[1,"col-9"],[1,"media"],["width","70","height","70","alt","avatar",1,"rounded","mr-3",3,"src"],[1,"col-3"],["type","button","mat-raised-button","",1,"btn","btn-danger",3,"click"],["hidden","","type","file","accept","image/*","id","file",3,"change"],["fileInput",""],[1,"col-12"],["appearance","legacy"],["matInput","","type","text","formControlName","lesson_ar_name"],["class","danger",4,"ngIf"],["matInput","","type","text","formControlName","lesson_en_name"],["matInput","","formControlName","lessonDescription"],["mat-dialog-actions",""],["mat-raised-button","",1,"btn","btn-danger","float-right",3,"mat-dialog-close"],["mat-raised-button","","cdkFocusInitial","","class","btn btn-primary float-right",3,"click",4,"ngIf"],[1,"danger"],["mat-raised-button","","cdkFocusInitial","",1,"btn","btn-primary","float-right",3,"click"]],template:function(a,e){if(1&a){var i=t.EpF();t.TgZ(0,"h1",0),t.YNc(1,Qi,3,3,"span",1),t.YNc(2,Ei,3,4,"span",1),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"form",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t._UZ(8,"img",7),t.qZA(),t.qZA(),t.TgZ(9,"div",8),t.TgZ(10,"button",9),t.NdJ("click",function(){return t.CHM(i),t.MAs(14).click()}),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"input",10,11),t.NdJ("change",function(l){return e.onChange(l)}),t.qZA(),t.qZA(),t.TgZ(15,"div",12),t.TgZ(16,"mat-form-field",13),t.TgZ(17,"mat-label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"input",14),t.YNc(21,Pi,2,1,"mat-hint",15),t.qZA(),t.qZA(),t.TgZ(22,"div",12),t.TgZ(23,"mat-form-field",13),t.TgZ(24,"mat-label"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t._UZ(27,"input",16),t.YNc(28,Oi,2,1,"mat-hint",15),t.qZA(),t.qZA(),t.TgZ(29,"div",12),t.TgZ(30,"mat-form-field",13),t.TgZ(31,"mat-label"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"textarea",17),t._uU(35," "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"div",18),t.TgZ(37,"button",19),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.YNc(40,Vi,3,3,"button",20),t.YNc(41,Ri,3,3,"button",20),t.qZA(),t._UZ(42,"ngx-spinner")}2&a&&(t.xp6(1),t.Q6J("ngIf",0==e.lessonId),t.xp6(1),t.Q6J("ngIf",e.lessonId>0),t.xp6(2),t.Q6J("formGroup",e.myForm),t.xp6(4),t.s9C("src",e.coverPath,t.LSH),t.xp6(3),t.hij(" ",t.lcZ(12,14,"subjects.CoverPhoto")," "),t.xp6(7),t.hij(" ",t.lcZ(19,16,"labels.arName")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrls.lesson_ar_name.invalid&&(e.FormCtrls.lesson_ar_name.touched||e.submitted)),t.xp6(4),t.hij(" ",t.lcZ(26,18,"labels.enName")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrls.lesson_en_name.invalid&&(e.FormCtrls.lesson_en_name.touched||e.submitted)),t.xp6(4),t.hij(" ",t.lcZ(33,20,"labels.description")," "),t.xp6(5),t.Q6J("mat-dialog-close",!1),t.xp6(1),t.hij(" ",t.lcZ(39,22,"General.Close")," "),t.xp6(2),t.Q6J("ngIf",0==e.lessonId),t.xp6(1),t.Q6J("ngIf",e.lessonId>0))},directives:[I.uh,C.O5,I.xY,s._Y,s.JL,s.sg,y.lW,Z.KE,Z.hX,j.Nt,s.Fj,s.JJ,s.u,I.H8,I.ZT,b.Ro,Z.bx],pipes:[S.X$],styles:[""]}),n}();function zi(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"subjects.AddUnit")," "))}function $i(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"subjects.UpdateUnit")," - ",a.unit_name," ")}}function Hi(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Xi(n,o){if(1&n&&(t.TgZ(0,"mat-hint",21),t.YNc(1,Hi,3,3,"span",1),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==a.FormCtrls.unit_ar_name.errors?null:a.FormCtrls.unit_ar_name.errors.required)&&(null==a.FormCtrls.unit_ar_name.errors?null:a.FormCtrls.unit_ar_name.errors.whiteSpace))}}function Wi(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Ki(n,o){if(1&n&&(t.TgZ(0,"mat-hint",21),t.YNc(1,Wi,3,3,"span",1),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==a.FormCtrls.unit_en_name.errors?null:a.FormCtrls.unit_en_name.errors.required)&&(null==a.FormCtrls.unit_en_name.errors?null:a.FormCtrls.unit_en_name.errors.whiteSpace))}}function to(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){return t.CHM(a),t.oxw().addUpdateUnit()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Add")," "))}function eo(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"button",22),t.NdJ("click",function(){return t.CHM(a),t.oxw().addUpdateUnit()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Update")," "))}var no=function(){var n=function(){function o(a,e,i,r,l,u,c){(0,x.Z)(this,o),this.fb=a,this.msg=e,this.route=i,this.spinner=r,this.SubjectsService=l,this.data=u,this.dialogRef=c,this.submitted=!1,this.coverPath=null,this.baseUrl=null==v.N?void 0:v.N.apiURL.replace("/api/",""),this.subjectId=u.subjectId,this.unitId=u.unitId,this.unitId>0&&this.getUnitById()}return(0,q.Z)(o,[{key:"ngOnInit",value:function(){this.myForm=this.fb.group({id:[this.unitId],unit_ar_name:["",[s.kI.required,U.D.whiteSpace]],unit_en_name:["",[s.kI.required,U.D.whiteSpace]],unitDescription:[""],thumbnailPic:[null]})}},{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"getUnitById",value:function(){var e=this;this.spinner.show(),this.SubjectsService.getUnitById(this.unitId).subscribe(function(i){var r;i.addedUnit&&(e.myForm.patchValue(i.addedUnit),e.unit_name=i.addedUnit.unit_ar_name,e.subjectId=i.addedUnit.subjectid,e.coverPath=e.imgUrl(null===(r=i.addedUnit.unitThumb)||void 0===r?void 0:r.attach_path),e.spinner.hide())})}},{key:"addUpdateUnit",value:function(){var i,r,l,u,c,e=this;this.submitted=!0;var m={},d={},p={};d.id=null===(i=this.FormCtrls.id)||void 0===i?void 0:i.value,d.unit_ar_name=null===(r=this.FormCtrls.unit_ar_name)||void 0===r?void 0:r.value,d.unit_en_name=null===(l=this.FormCtrls.unit_en_name)||void 0===l?void 0:l.value,d.unitDescription=null===(u=this.FormCtrls.unitDescription)||void 0===u?void 0:u.value,d.thumbnailPic=null===(c=this.FormCtrls.thumbnailPic)||void 0===c?void 0:c.value,p.subject_id=this.subjectId,m.addedUnit=d,m.currentSubject=p,console.log("coverPath",this.coverPath),console.log("imgUrl",this.imgUrl(null)),null!=d.thumbnailPic||this.coverPath!=this.imgUrl(void 0)&&this.coverPath!=this.imgUrl(null)?this.myForm.valid&&(this.spinner.show(),this.SubjectsService.addUpdateUnit(m).subscribe(function(h){h&&(e.spinner.hide(),e.dialogRef.close(h),e.msg.success(0==e.unitId?"General.AddSuccessfully":"General.UpdateSuccessfully"))})):this.msg.warning("\u0645\u0646 \u0641\u0636\u0644\u0643 \u0627\u062e\u062a\u0631 \u0635\u0648\u0631\u0629 \u0627\u0644\u063a\u0644\u0627\u0641")}},{key:"imgUrl",value:function(e){return this.baseUrl+e}},{key:"onChange",value:function(e){var i=this,r=e.target.files[0].name,l=e.target.files[0].size,u=e.target.files[0].type,c=e.target.files[0].lastModified,m=e.target.files[0].lastModifiedDate;if(e.target.files){var d=new FileReader;d.readAsDataURL(e.target.files[0]),d.onload=function(p){var h=p.target.result,T={FileAsBase64:h,name:r,size:l,type:u,LastModified:c,LastModifiedDate:m};i.coverPath=h,i.FormCtrls.thumbnailPic.setValue(T)}}}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(s.qu),t.Y36(R.K),t.Y36(A.gz),t.Y36(b.t2),t.Y36(w),t.Y36(I.WI),t.Y36(I.so))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-unit"]],decls:43,vars:24,consts:[["mat-dialog-title","",1,"primary-color"],[4,"ngIf"],["mat-dialog-content",""],[3,"formGroup"],[1,"row"],[1,"col-9"],[1,"media"],["width","70","height","70","alt","avatar",1,"rounded","mr-3",3,"src"],[1,"col-3"],["type","button","mat-raised-button","",1,"btn","btn-danger",3,"click"],["hidden","","type","file","accept","image/*","id","file",3,"change"],["fileInput",""],[1,"col-12"],["appearance","legacy"],["matInput","","type","text","formControlName","unit_ar_name"],["class","danger",4,"ngIf"],["matInput","","type","text","formControlName","unit_en_name"],["matInput","","formControlName","unitDescription"],["mat-dialog-actions",""],["mat-raised-button","",1,"btn","btn-danger","float-right",3,"mat-dialog-close"],["mat-raised-button","","cdkFocusInitial","","class","btn btn-primary float-right",3,"click",4,"ngIf"],[1,"danger"],["mat-raised-button","","cdkFocusInitial","",1,"btn","btn-primary","float-right",3,"click"]],template:function(a,e){if(1&a){var i=t.EpF();t.TgZ(0,"h1",0),t.YNc(1,zi,3,3,"span",1),t.YNc(2,$i,3,4,"span",1),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"form",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"div",6),t._UZ(8,"img",7),t.qZA(),t.qZA(),t.TgZ(9,"div",8),t.TgZ(10,"button",9),t.NdJ("click",function(){return t.CHM(i),t.MAs(14).click()}),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"input",10,11),t.NdJ("change",function(l){return e.onChange(l)}),t.qZA(),t.qZA(),t.TgZ(15,"div",12),t.TgZ(16,"mat-form-field",13),t.TgZ(17,"mat-label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"input",14),t.YNc(21,Xi,2,1,"mat-hint",15),t.qZA(),t.qZA(),t.TgZ(22,"div",12),t.TgZ(23,"mat-form-field",13),t.TgZ(24,"mat-label"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t._UZ(27,"input",16),t.YNc(28,Ki,2,1,"mat-hint",15),t.qZA(),t.qZA(),t.TgZ(29,"div",12),t.TgZ(30,"mat-form-field",13),t.TgZ(31,"mat-label"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.TgZ(34,"textarea",17),t._uU(35," "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"div",18),t.TgZ(37,"button",19),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.YNc(40,to,3,3,"button",20),t.YNc(41,eo,3,3,"button",20),t.qZA(),t._UZ(42,"ngx-spinner")}2&a&&(t.xp6(1),t.Q6J("ngIf",0==e.unitId),t.xp6(1),t.Q6J("ngIf",e.unitId>0),t.xp6(2),t.Q6J("formGroup",e.myForm),t.xp6(4),t.s9C("src",e.coverPath,t.LSH),t.xp6(3),t.hij(" ",t.lcZ(12,14,"subjects.CoverPhoto")," "),t.xp6(7),t.hij(" ",t.lcZ(19,16,"labels.arName")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrls.unit_ar_name.invalid&&(e.FormCtrls.unit_ar_name.touched||e.submitted)),t.xp6(4),t.hij(" ",t.lcZ(26,18,"labels.enName")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrls.unit_en_name.invalid&&(e.FormCtrls.unit_en_name.touched||e.submitted)),t.xp6(4),t.hij(" ",t.lcZ(33,20,"labels.description")," "),t.xp6(5),t.Q6J("mat-dialog-close",!1),t.xp6(1),t.hij(" ",t.lcZ(39,22,"General.Close")," "),t.xp6(2),t.Q6J("ngIf",0==e.unitId),t.xp6(1),t.Q6J("ngIf",e.unitId>0))},directives:[I.uh,C.O5,I.xY,s._Y,s.JL,s.sg,y.lW,Z.KE,Z.hX,j.Nt,s.Fj,s.JJ,s.u,I.H8,I.ZT,b.Ro,Z.bx],pipes:[S.X$],styles:[".primary-color[_ngcontent-%COMP%]{border-bottom:1px solid}"]}),n}(),ao=f(226);function io(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function oo(n,o){if(1&n&&(t.TgZ(0,"mat-hint",16),t.YNc(1,io,3,3,"span",17),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==a.FormCtrls.topic_ar_name.errors?null:a.FormCtrls.topic_ar_name.errors.required)&&(null==a.FormCtrls.topic_ar_name.errors?null:a.FormCtrls.topic_ar_name.errors.whiteSpace))}}function ro(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function lo(n,o){if(1&n&&(t.TgZ(0,"mat-hint",16),t.YNc(1,ro,3,3,"span",17),t.qZA()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==a.FormCtrls.topic_en_name.errors?null:a.FormCtrls.topic_en_name.errors.required)&&(null==a.FormCtrls.topic_en_name.errors?null:a.FormCtrls.topic_en_name.errors.whiteSpace))}}function so(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){return t.CHM(a),t.oxw().addUpdateTopic()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Add")," "))}function uo(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){return t.CHM(a),t.oxw().addUpdateTopic()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Update")," "))}function co(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t.TgZ(8,"button",23),t.NdJ("click",function(){var u=t.CHM(a).$implicit;return t.oxw(2).getTopicById(u)}),t.TgZ(9,"mat-icon"),t._uU(10,"edit"),t.qZA(),t.qZA(),t.TgZ(11,"button",24),t.NdJ("click",function(){var u=t.CHM(a).$implicit;return t.oxw(2).openDeleateDialog(u)}),t.TgZ(12,"mat-icon"),t._uU(13,"delete"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){var e=o.$implicit,i=o.index;t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Oqu(e.topic_ar_name),t.xp6(2),t.Oqu(e.topic_en_name)}}function mo(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"pagination-controls",25),t.NdJ("pageChange",function(r){t.CHM(a);var l=t.oxw(2);return l.p=r,l.getTopicsByLessonId()}),t.qZA()}if(2&n){var e=t.oxw(2);t.Q6J("maxSize",e.maxSize)}}var po=function(o,a){return{itemsPerPage:10,currentPage:o,totalItems:a}};function go(n,o){if(1&n&&(t.TgZ(0,"div",19),t.TgZ(1,"table",20),t.TgZ(2,"thead"),t.TgZ(3,"tr"),t.TgZ(4,"th"),t._uU(5,"#"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"actions\xad"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"tbody"),t.YNc(15,co,14,3,"tr",21),t.ALo(16,"paginate"),t.qZA(),t.qZA(),t.YNc(17,mo,1,1,"pagination-controls",22),t.qZA()),2&n){var a=t.oxw();t.xp6(7),t.Oqu(t.lcZ(8,5,"labels.arName")),t.xp6(3),t.Oqu(t.lcZ(11,7,"labels.enName")),t.xp6(5),t.Q6J("ngForOf",t.xi3(16,9,a.topics,t.WLB(12,po,a.p,a.itemsCount)))("ngForTrackBy",a.track),t.xp6(2),t.Q6J("ngIf",(null==a.topics?null:a.topics.length)>0)}}function ho(n,o){1&n&&(t.TgZ(0,"div",26),t.TgZ(1,"div",27),t.TgZ(2,"h4",28),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"subjects.TopicsIsEmpty")," "))}var _o=function(){var n=function(){function o(a,e,i,r,l,u,c){(0,x.Z)(this,o),this.spinner=a,this.msg=e,this.dialog=i,this.fb=r,this.subjectsService=l,this.data=u,this.dialogRef=c,this.submitted=!1,this.p=1,this.maxSize=9,this.lessonId=u.lessonId}return(0,q.Z)(o,[{key:"ngOnInit",value:function(){this.getTopicsByLessonId(),this.myForm=this.fb.group({id:[0],topic_ar_name:["",[s.kI.required,s.kI.maxLength(100),U.D.whiteSpace]],topic_en_name:[""]})}},{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"getTopicsByLessonId",value:function(){var e=this;this.spinner.show(),this.subjectsService.getTopicsByLessonId(this.p,this.lessonId).subscribe(function(i){console.log("getTopicsByLessonId",i),e.topics=i.edu_topic,e.itemsCount=i.topicsSize,e.spinner.hide()})}},{key:"getTopicById",value:function(e){this.myForm.patchValue(e)}},{key:"getTopicByIds",value:function(e){var i=this;this.spinner.show(),this.subjectsService.getTopicById(this.lessonId,e).subscribe(function(r){null!=r.id&&(i.myForm.patchValue(r),i.spinner.hide())})}},{key:"addUpdateTopic",value:function(){var i,e=this;this.submitted=!0;var r={};r.LessonID=this.lessonId,r.id=null===(i=this.FormCtrls.id)||void 0===i?void 0:i.value,r.topic_ar_name=this.FormCtrls.topic_ar_name.value,r.topic_en_name=this.FormCtrls.topic_en_name.value,r.state=!0,this.myForm.valid&&(this.spinner.show(),this.subjectsService.addUpdateTopic(r).subscribe(function(l){var u;1==l.returnValue&&(e.submitted=!1,e.myForm.reset(),null===(u=e.FormCtrls.id)||void 0===u||u.setValue(0),e.getTopicsByLessonId(),e.msg.success(0==r.id?"General.AddSuccessfully":"General.UpdeteSuccessfully")),e.spinner.hide()}))}},{key:"openDeleateDialog",value:function(e){var i=this;this.dialog.open(J.F,{data:{msg:e.topic_ar_name}}).afterClosed().subscribe(function(r){r&&i.deleteTopic(e)})}},{key:"deleteTopic",value:function(e){var i=this;this.spinner.show(),this.subjectsService.deleteTopic(e.id).subscribe(function(r){if(1==r.returnValue){i.msg.success("General.DeleteSuccessfully");var l=i.topics.indexOf(e);i.topics.splice(l,1)}i.spinner.hide()})}},{key:"track",value:function(e,i){return i.id}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(b.t2),t.Y36(R.K),t.Y36(I.uw),t.Y36(s.qu),t.Y36(w),t.Y36(I.WI),t.Y36(I.so))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-topics"]],decls:32,vars:20,consts:[["mat-dialog-title","",1,"primary-color"],["mat-dialog-content",""],[3,"formGroup"],[1,"row"],[1,"col-6"],["appearance","legacy"],["matInput","","type","text","formControlName","topic_ar_name"],["class","danger",4,"ngIf"],["matInput","","type","text","formControlName","topic_en_name"],[1,"col-12"],["mat-raised-button","","cdkFocusInitial","","class","btn btn-primary float-right",3,"click",4,"ngIf"],["class","full-wid-table","style","overflow: hidden !important",4,"ngIf","ngIfElse"],["class","text-center"],["topicsEmpty",""],["mat-dialog-actions",""],["mat-raised-button","",1,"btn","btn-danger","float-right",3,"mat-dialog-close"],[1,"danger"],[4,"ngIf"],["mat-raised-button","","cdkFocusInitial","",1,"btn","btn-primary","float-right",3,"click"],[1,"full-wid-table",2,"overflow","hidden !important"],["id","sotbmod",1,"table","table-striped","table-hover","table-full-width","rtl"],[4,"ngFor","ngForOf","ngForTrackBy"],["dir","ltr","previousLabel","","nextLabel","",3,"maxSize","pageChange",4,"ngIf"],["mat-mini-fab","","color","primary",1,"mr-1",3,"click"],["mat-mini-fab","","color","warn",1,"mr-1",3,"click"],["dir","ltr","previousLabel","","nextLabel","",3,"maxSize","pageChange"],[1,"col-4"],["role","alert",1,"alert","bg-light-warning","alert-dismissible","mb-2"],[1,"alert-heading","mb-2"]],template:function(a,e){if(1&a&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div",1),t.TgZ(4,"form",2),t.TgZ(5,"div",3),t.TgZ(6,"div",4),t.TgZ(7,"mat-form-field",5),t.TgZ(8,"mat-label"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t._UZ(11,"input",6),t.YNc(12,oo,2,1,"mat-hint",7),t.qZA(),t.qZA(),t.TgZ(13,"div",4),t.TgZ(14,"mat-form-field",5),t.TgZ(15,"mat-label"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t._UZ(18,"input",8),t.YNc(19,lo,2,1,"mat-hint",7),t.qZA(),t.qZA(),t.TgZ(20,"div",9),t.YNc(21,so,3,3,"button",10),t.YNc(22,uo,3,3,"button",10),t.qZA(),t.qZA(),t.qZA(),t._UZ(23,"hr"),t.YNc(24,go,18,15,"div",11),t.YNc(25,ho,5,3,"ng-template",12,13,t.W1O),t.qZA(),t.TgZ(27,"div",14),t.TgZ(28,"button",15),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.qZA(),t._UZ(31,"ngx-spinner")),2&a){var i=t.MAs(26);t.xp6(1),t.hij(" ",t.lcZ(2,12,"subjects.Topics"),"\n"),t.xp6(3),t.Q6J("formGroup",e.myForm),t.xp6(5),t.hij(" ",t.lcZ(10,14,"labels.arName")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrls.topic_ar_name.invalid&&(e.FormCtrls.topic_ar_name.touched||e.submitted)),t.xp6(4),t.hij(" ",t.lcZ(17,16,"labels.enName")," "),t.xp6(3),t.Q6J("ngIf",e.FormCtrls.topic_en_name.invalid&&(e.FormCtrls.topic_en_name.touched||e.submitted)),t.xp6(2),t.Q6J("ngIf",0==(null==e.FormCtrls.id?null:e.FormCtrls.id.value)),t.xp6(1),t.Q6J("ngIf",(null==e.FormCtrls.id?null:e.FormCtrls.id.value)>0),t.xp6(2),t.Q6J("ngIf",(null==e.topics?null:e.topics.length)>0)("ngIfElse",i),t.xp6(4),t.Q6J("mat-dialog-close",!1),t.xp6(1),t.hij(" ",t.lcZ(30,18,"General.Close")," ")}},directives:[I.uh,I.xY,s._Y,s.JL,s.sg,Z.KE,Z.hX,j.Nt,s.Fj,s.JJ,s.u,C.O5,I.H8,y.lW,I.ZT,b.Ro,Z.bx,C.sg,K.Hw,$.LS,ao.Lv],pipes:[S.X$,$._s],styles:[".mat-dialog-content[_ngcontent-%COMP%]{max-height:76vh}"]}),n}();function fo(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"div",5),t.TgZ(1,"mat-card"),t.TgZ(2,"div",6),t._UZ(3,"img",7),t.qZA(),t.TgZ(4,"mat-card-header"),t.TgZ(5,"mat-card-subtitle",8),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"mat-card-content"),t.TgZ(8,"p",8),t._uU(9),t.qZA(),t.qZA(),t.TgZ(10,"mat-card-actions"),t.TgZ(11,"button",9),t.NdJ("click",function(){var u=t.CHM(a).$implicit;return t.oxw(2).openAddTopicDialog(u.id)}),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"button",10),t.NdJ("click",function(){var u=t.CHM(a).$implicit;return t.oxw(2).openAddLessonDialog(u)}),t.TgZ(15,"mat-icon",11),t._uU(16,"edit"),t.qZA(),t.qZA(),t.TgZ(17,"button",10),t.NdJ("click",function(){var u=t.CHM(a).$implicit;return t.oxw(2).openDeleateDialog(u)}),t.TgZ(18,"mat-icon",12),t._uU(19,"delete"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){var e=o.$implicit,i=t.oxw(2);t.xp6(3),t.Q6J("src",i.imgUrl(null==e.lessonThumb?null:e.lessonThumb.attach_path),t.LSH),t.xp6(2),t.Q6J("title",null==e?null:e.lesson_ar_name),t.xp6(1),t.hij(" ",null==e?null:e.lesson_ar_name,""),t.xp6(2),t.Q6J("title",null==e?null:e.lessonDescription),t.xp6(1),t.hij(" ",null==e?null:e.lessonDescription," "),t.xp6(3),t.hij(" ",t.lcZ(13,6,"subjects.Topics")," ")}}function Zo(n,o){if(1&n&&(t.ynx(0),t.YNc(1,fo,20,8,"div",4),t.BQk()),2&n){var a=t.oxw();t.xp6(1),t.Q6J("ngForOf",a.lessons)}}function vo(n,o){1&n&&(t.TgZ(0,"div",13),t.TgZ(1,"div",14),t.TgZ(2,"h4",15),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,2,"subjects.LessonsIsEmpty")," "),t.xp6(3),t.Oqu(t.lcZ(7,4,"subjects.clickToAddLesson")))}var Ao=function(){var n=function(){function o(a,e,i,r){(0,x.Z)(this,o),this.spinner=a,this.msg=e,this.dialog=i,this.subjectsService=r,this.baseUrl=null==v.N?void 0:v.N.apiURL.replace("/api/","")}return(0,q.Z)(o,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(){this.unitId>0&&this.getLessons(),this.AddedLesson&&this.lessons.push(this.AddedLesson)}},{key:"getLessons",value:function(){var e=this;this.spinner.show(),this.subjectsService.getLessons(this.unitId).subscribe(function(i){e.lessons=i,e.spinner.hide()})}},{key:"deleteLesson",value:function(e){var i=this;this.spinner.show(),this.subjectsService.deleteLesson(e.id).subscribe(function(r){if(1==r.returnValue){var l=i.lessons.indexOf(e);i.lessons.splice(l,1),i.msg.success("General.DeleteSuccessfully")}i.spinner.hide()})}},{key:"openDeleateDialog",value:function(e){var i=this;this.dialog.open(J.F,{data:{msg:e.lesson_ar_name}}).afterClosed().subscribe(function(r){r&&i.deleteLesson(e)})}},{key:"openAddLessonDialog",value:function(e){var i=this;this.dialog.open(lt,{data:{unitId:this.unitId,lesson:e},minWidth:"60vw"}).afterClosed().subscribe(function(r){i.getLessons()})}},{key:"openAddTopicDialog",value:function(e){this.dialog.open(_o,{data:{lessonId:e,lesson:null},minWidth:"85vw",maxHeight:"95vh"}).afterClosed().subscribe(function(i){})}},{key:"imgUrl",value:function(e){return this.baseUrl+e}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(b.t2),t.Y36(L._W),t.Y36(I.uw),t.Y36(w))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-lessons-index"]],inputs:{unitId:"unitId",AddedLesson:"AddedLesson"},features:[t.TTD],decls:4,vars:2,consts:[[1,"row"],[4,"ngIf","ngIfElse"],["class","text-center"],["emptyLessons",""],["class","col-md-3 col-12",4,"ngFor","ngForOf"],[1,"col-md-3","col-12"],[1,"card-img"],["alt","lesson cover",1,"material-card-img",3,"src"],[3,"title"],["mat-button","",3,"click"],["mat-icon-button","",1,"mr-2",3,"click"],["color","primary"],["color","warn"],[1,"col-4"],["role","alert",1,"alert","bg-light-warning","alert-dismissible","mb-2"],[1,"alert-heading","mb-2"]],template:function(a,e){if(1&a&&(t.TgZ(0,"div",0),t.YNc(1,Zo,2,1,"ng-container",1),t.YNc(2,vo,8,6,"ng-template",2,3,t.W1O),t.qZA()),2&a){var i=t.MAs(3);t.xp6(1),t.Q6J("ngIf",(null==e.lessons?null:e.lessons.length)>0)("ngIfElse",i)}},directives:[C.O5,C.sg,_.a8,_.dk,_.$j,_.dn,_.hq,y.lW,K.Hw],pipes:[S.X$],styles:[".mat-card[_ngcontent-%COMP%]{padding:5px}.mat-card-header[_ngcontent-%COMP%]{max-height:50px;min-height:20px;overflow:hidden;flex-direction:row;text-overflow:ellipsis;white-space:nowrap;display:-webkit-box;-webkit-line-clamp:3}.mat-card-content[_ngcontent-%COMP%]{max-height:50px;height:50px;overflow:hidden}.material-card-img[_ngcontent-%COMP%]{height:200px;width:100%}.mat-card-subtitle[_ngcontent-%COMP%], .mat-card-content[_ngcontent-%COMP%]{margin-bottom:10px}"]}),n}(),bo=function(o){return{"bg-light-info":o}};function To(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"mat-card",10),t.TgZ(2,"div",0),t.TgZ(3,"div",11),t.TgZ(4,"a",12),t.NdJ("click",function(){var u=t.CHM(a).$implicit;return t.oxw().SelectUnitId(u)}),t._UZ(5,"img",13),t.TgZ(6,"div",14),t.TgZ(7,"div",15),t.TgZ(8,"mat-card-subtitle",16),t._uU(9),t.qZA(),t.qZA(),t.TgZ(10,"p",17),t.TgZ(11,"small",16),t._uU(12),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",18),t.TgZ(14,"div",19),t.TgZ(15,"button",20),t._UZ(16,"i",21),t.qZA(),t.TgZ(17,"div",22),t.ynx(18),t.TgZ(19,"a",23),t.NdJ("click",function(){var u=t.CHM(a).$implicit;return t.oxw().openDeleateDialog(u)}),t._UZ(20,"i",24),t._uU(21),t.ALo(22,"translate"),t.qZA(),t.TgZ(23,"a",23),t.NdJ("click",function(){var u=t.CHM(a).$implicit;return t.oxw().openAddUnitDialog(u.id)}),t._UZ(24,"i",25),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&n){var e=o.$implicit,i=t.oxw();t.xp6(1),t.Tol(t.VKq(13,bo,i.selectedUnitId==e.id)),t.xp6(4),t.Q6J("src",i.imgUrl(null==e.unitThumb?null:e.unitThumb.attach_path),t.LSH),t.xp6(3),t.Q6J("title",e.unit_ar_name),t.xp6(1),t.hij(" ",e.unit_ar_name," "),t.xp6(2),t.Q6J("title",e.unitDescription),t.xp6(1),t.Oqu(e.unitDescription),t.xp6(9),t.hij(" ",t.lcZ(22,9,"General.Delete")," "),t.xp6(4),t.hij(" ",t.lcZ(26,11,"General.Edit")," ")}}function Co(n,o){if(1&n){var a=t.EpF();t.TgZ(0,"a",26),t.NdJ("click",function(){return t.CHM(a),t.oxw().openAddLessonDialog()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"subjects.AddLesson")," "))}var Io=function(o){return{functionId:o}},xo=[{path:"",redirectTo:"subjects"},{path:"subjects",children:[{path:"",redirectTo:"index"},{path:"index",component:Xn},{path:"add-subject",component:rt},{path:"edit-subject/:subjectId",component:rt},{path:"subject-structure/:subjectId",component:function(){var n=function(){function o(a,e,i,r,l,u,c,m){var d=this;(0,x.Z)(this,o),this.spinner=a,this.route=e,this.subjectsService=i,this.router=r,this.fb=l,this.authserv=u,this.msg=c,this.dialog=m,this.baseUrl=null==v.N?void 0:v.N.apiURL.replace("/api/",""),e.paramMap.subscribe(function(p){d.subjectId=Number(p.get("subjectId"))}),e.queryParamMap.subscribe(function(p){d.functionId=Number(p.get("functionId"))})}return(0,q.Z)(o,[{key:"ngOnInit",value:function(){this.getUnits()}},{key:"getUnits",value:function(){var e=this;this.spinner.show(),this.subjectsService.getUnits(this.subjectId).subscribe(function(i){var r,l;e.units=i,e.selectedUnitId=null===(r=i[0])||void 0===r?void 0:r.id,e.selectedUnitName=null===(l=i[0])||void 0===l?void 0:l.unit_ar_name,e.spinner.hide()})}},{key:"SelectUnitId",value:function(e){this.selectedUnitId=e.id,this.selectedUnitName=e.unit_ar_name}},{key:"deleteUnit",value:function(e){var i=this;this.spinner.show(),this.subjectsService.deleteUnit(e.id).subscribe(function(r){if(1==r.returnValue){var l=i.units.indexOf(e);i.units.splice(l,1),i.msg.success("General.DeleteSuccessfully")}i.spinner.hide()})}},{key:"openDeleateDialog",value:function(e){var i=this;this.dialog.open(J.F,{data:{msg:e.unit_ar_name}}).afterClosed().subscribe(function(r){r&&i.deleteUnit(e)})}},{key:"openAddUnitDialog",value:function(e){var i=this;this.dialog.open(no,{data:{unitId:e>0?e:0,subjectId:this.subjectId},minWidth:"60vw"}).afterClosed().subscribe(function(r){(null==r?void 0:r.id)>0&&i.getUnits()})}},{key:"openAddLessonDialog",value:function(){var e=this;this.dialog.open(lt,{data:{unitId:this.selectedUnitId,lesson:{id:0}},minWidth:"60vw"}).afterClosed().subscribe(function(i){(null==i?void 0:i.id)>0&&(e.AddedLesson=i)})}},{key:"imgUrl",value:function(e){return this.baseUrl+e}},{key:"track",value:function(e,i){return i.id}}]),o}();return n.\u0275fac=function(a){return new(a||n)(t.Y36(b.t2),t.Y36(A.gz),t.Y36(w),t.Y36(A.F0),t.Y36(s.qu),t.Y36(k.e),t.Y36(L._W),t.Y36(I.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-strcture-index"]],decls:19,vars:15,consts:[[1,"row"],[1,"col-12"],[1,"content-header","bg-light-info","p-1","mt-0","mb-1"],["mat-raised-button","",1,"btn","btn-primary","bg-light-primary",3,"click"],["mat-raised-button","","routerLink","/dashboard/educational-setup/subjects/index",1,"btn","btn-warning","bg-light-warning",3,"queryParams"],[1,"col-md-3","mt-3"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-md-9"],["mat-raised-button","","class","btn btn-primary bg-light-primary float-right",3,"click",4,"ngIf"],[3,"unitId","AddedLesson"],[1,"p-0"],[1,"col-10","p-0"],[1,"media",3,"click"],["alt","profile-img","height","64","width","64",1,"rounded","mr-3",3,"src"],[1,"media-body"],[1,"col-12","d-flex","flex-sm-row","flex-column","justify-content-start","px-0","mb-sm-2"],[3,"title"],[1,"text-muted","mb-0","mt-1","mt-sm-0","unitDescription"],[1,"col-2","p-0"],["ngbDropdown","",1,"dropdown","btn-group","mr-1","mb-1"],["ngbDropdownToggle","","type","button",1,"btn","btn-icon","round","mr-1","mb-1","dropdown-toggle","btn-dropdown"],[1,"fa","fa-cog","font-medium-3"],["ngbDropdownMenu","","role","menu",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"ft-trash","font-medium-3","mr-2"],[1,"ft-edit-2","font-medium-3","mr-2"],["mat-raised-button","",1,"btn","btn-primary","bg-light-primary","float-right",3,"click"]],template:function(a,e){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"a",3),t.NdJ("click",function(){return e.openAddUnitDialog(0)}),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"a",4),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"div",0),t.TgZ(10,"div",5),t.YNc(11,To,27,15,"div",6),t.qZA(),t.TgZ(12,"div",7),t.TgZ(13,"mat-card"),t.TgZ(14,"mat-card-title"),t._uU(15),t.YNc(16,Co,3,3,"a",8),t.qZA(),t.TgZ(17,"mat-card-content"),t._UZ(18,"app-lessons-index",9),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(4),t.hij(" ",t.lcZ(5,9,"subjects.AddUnit")," "),t.xp6(2),t.Q6J("queryParams",t.VKq(13,Io,e.functionId)),t.xp6(1),t.hij(" ",t.lcZ(8,11,"General.Back")," "),t.xp6(4),t.Q6J("ngForOf",e.units)("ngForTrackBy",e.track),t.xp6(4),t.hij(" ",e.selectedUnitName," "),t.xp6(1),t.Q6J("ngIf",e.selectedUnitId>0),t.xp6(2),t.Q6J("unitId",e.selectedUnitId)("AddedLesson",e.AddedLesson))},directives:[y.zs,A.yS,C.sg,_.a8,_.n5,C.O5,_.dn,Ao,_.$j,N.jt,N.iD,N.Vi],pipes:[S.X$],styles:[".btn-icon[_ngcontent-%COMP%], .btn-dropdown[_ngcontent-%COMP%]:hover{box-shadow:none;max-width:30px}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.content-header[_ngcontent-%COMP%]{text-align:left}.unitDescription[_ngcontent-%COMP%]{max-height:50px;min-height:20px;overflow:hidden}"]}),n}()},{path:"material-search/:subjectId",component:xn},{path:"upload-attendance/:materialId",component:Ca},{path:"upload-exam-student-grades/:examId",component:xa},{path:"add-material",component:Se},{path:"manually-attendance/:materialId",component:we},{path:"material-points/:materialId",component:ke}]},{path:"student-group",component:mi},{path:"add-group",component:Oa},{path:"assign-student-to-group",component:xi}],yo=function(){var n=(0,q.Z)(function o(){(0,x.Z)(this,o)});return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[A.Bz.forChild(xo)],A.Bz]}),n}(),So=f(2003),Uo=f(8109),jo=function(){var n=(0,q.Z)(function o(){(0,x.Z)(this,o)});return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[C.ez,yo,s.UX,Uo.m,So.q,N.IJ,b.ef,$.JX]]}),n}()}}]);