"use strict";(self.webpackChunkegyTrainingNew=self.webpackChunkegyTrainingNew||[]).push([[933],{6933:function(rt,Fe,h){h.r(Fe),h.d(Fe,{DashboardModule:function(){return cl}});var Y=h(3144),j=h(5671),f=h(9808),Z=h(3075),T=h(8109),S=h(5568),e=h(8555),F=h(5054),Q=h(4330),t=h(1891),ae=h(4008),W=h(2290),u=h(6405),C=h(7011),E=h(9224),ce=h(7423),k=h(7322),K=h(7531),Ie=h(4107),pe=h(508),se=h(2925);function ye(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function ne(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.MustEnterCorrectValue")," "))}function ze(l,p){if(1&l&&(t.TgZ(0,"mat-hint",39),t.YNc(1,ye,3,3,"span",40),t.YNc(2,ne,3,3,"span",40),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.UserName.errors?null:d.FormCtrls.UserName.errors.required),t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.UserName.errors?null:d.FormCtrls.UserName.errors.bigZero)}}function Te(l,p){if(1&l&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.Q6J("value",d.Id),t.xp6(1),t.hij(" ",d.Ar_Name," ")}}function Ge(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.MustChoosevalue")," "))}function ue(l,p){if(1&l&&(t.TgZ(0,"mat-hint",42),t.YNc(1,Ge,3,3,"span",40),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.Religion.errors?null:d.FormCtrls.Religion.errors.required)}}function he(l,p){if(1&l&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.Q6J("value",d.gender_id),t.xp6(1),t.hij(" ",d.gender_ar_name," ")}}function Ne(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.MustChoosevalue")," "))}function fe(l,p){if(1&l&&(t.TgZ(0,"mat-hint",42),t.YNc(1,Ne,3,3,"span",40),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.Gender.errors?null:d.FormCtrls.Gender.errors.required)}}function H(l,p){if(1&l&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.Q6J("value",d.Id),t.xp6(1),t.hij(" ",d.Ar_Name," ")}}function Qe(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.MustChoosevalue")," "))}function $e(l,p){if(1&l&&(t.TgZ(0,"mat-hint",42),t.YNc(1,Qe,3,3,"span",40),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.EducationTypeId.errors?null:d.FormCtrls.EducationTypeId.errors.required)}}function ht(l,p){if(1&l&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.Q6J("value",d.Id),t.xp6(1),t.hij(" ",d.Name," ")}}function _t(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.MustChoosevalue")," "))}function Nt(l,p){if(1&l&&(t.TgZ(0,"mat-hint",42),t.YNc(1,_t,3,3,"span",40),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.CenterBranchId.errors?null:d.FormCtrls.CenterBranchId.errors.required)}}function Rt(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.MustChoosevalue")," "))}function bt(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.MustChoosevalue")," "))}function Mt(l,p){if(1&l&&(t.TgZ(0,"mat-hint",42),t.YNc(1,Rt,3,3,"span",40),t.YNc(2,bt,3,3,"span",40),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.SchoolName.errors?null:d.FormCtrls.SchoolName.errors.required),t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.SchoolName.errors?null:d.FormCtrls.SchoolName.errors.whiteSpace)}}function Ke(l,p){if(1&l&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.Q6J("value",d.Id),t.xp6(1),t.hij(" ",d.Ar_Name," ")}}function ft(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.MustChoosevalue")," "))}function zt(l,p){if(1&l&&(t.TgZ(0,"mat-hint",42),t.YNc(1,ft,3,3,"span",40),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.EducationalDivision.errors?null:d.FormCtrls.EducationalDivision.errors.required)}}function In(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.MustChoosevalue")," "))}function yn(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.MustChoosevalue")," "))}function Qt(l,p){if(1&l&&(t.TgZ(0,"mat-hint",42),t.YNc(1,In,3,3,"span",40),t.YNc(2,yn,3,3,"span",40),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.GuardianJob.errors?null:d.FormCtrls.GuardianJob.errors.required),t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.GuardianJob.errors?null:d.FormCtrls.GuardianJob.errors.whiteSpace)}}function qn(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Jt(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1," You must enter 11 number. "),t.qZA())}function Fn(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function ve(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.NumberMustStartWith")," . "))}function Je(l,p){if(1&l&&(t.TgZ(0,"mat-hint",42),t.YNc(1,qn,3,3,"span",40),t.YNc(2,Jt,2,0,"span",40),t.YNc(3,Fn,3,3,"span",40),t.YNc(4,ve,3,3,"span",40),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.StudentNumber.errors?null:d.FormCtrls.StudentNumber.errors.required),t.xp6(1),t.Q6J("ngIf",(null==d.FormCtrls.StudentNumber.errors?null:d.FormCtrls.StudentNumber.errors.maxlength)||(null==d.FormCtrls.StudentNumber.errors?null:d.FormCtrls.StudentNumber.errors.minlength)),t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.StudentNumber.errors?null:d.FormCtrls.StudentNumber.errors.pattern),t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.StudentNumber.errors?null:d.FormCtrls.StudentNumber.errors.startsWith)}}function B(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function A(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1," You must enter 11 number. "),t.qZA())}function b(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function I(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.NumberMustStartWith")," . "))}function O(l,p){if(1&l&&(t.TgZ(0,"mat-hint",42),t.YNc(1,B,3,3,"span",40),t.YNc(2,A,2,0,"span",40),t.YNc(3,b,3,3,"span",40),t.YNc(4,I,3,3,"span",40),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.StudentWhatsAppNumber.errors?null:d.FormCtrls.StudentWhatsAppNumber.errors.required),t.xp6(1),t.Q6J("ngIf",(null==d.FormCtrls.StudentWhatsAppNumber.errors?null:d.FormCtrls.StudentWhatsAppNumber.errors.maxlength)||(null==d.FormCtrls.StudentWhatsAppNumber.errors?null:d.FormCtrls.StudentWhatsAppNumber.errors.minlength)),t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.StudentWhatsAppNumber.errors?null:d.FormCtrls.StudentWhatsAppNumber.errors.pattern),t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.StudentWhatsAppNumber.errors?null:d.FormCtrls.StudentWhatsAppNumber.errors.startsWith)}}function $(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function te(l,p){if(1&l&&(t.TgZ(0,"mat-hint",42),t.YNc(1,$,3,3,"span",40),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.HomeTelephone.errors?null:d.FormCtrls.HomeTelephone.errors.pattern)}}function re(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function de(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1," You must enter 11 number. "),t.qZA())}function ge(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function Ze(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.NumberMustStartWith")," . "))}function we(l,p){if(1&l&&(t.TgZ(0,"mat-hint",42),t.YNc(1,re,3,3,"span",40),t.YNc(2,de,2,0,"span",40),t.YNc(3,ge,3,3,"span",40),t.YNc(4,Ze,3,3,"span",40),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.FatherMobile.errors?null:d.FormCtrls.FatherMobile.errors.required),t.xp6(1),t.Q6J("ngIf",(null==d.FormCtrls.FatherMobile.errors?null:d.FormCtrls.FatherMobile.errors.maxlength)||(null==d.FormCtrls.FatherMobile.errors?null:d.FormCtrls.FatherMobile.errors.minlength)),t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.FatherMobile.errors?null:d.FormCtrls.FatherMobile.errors.pattern),t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.FatherMobile.errors?null:d.FormCtrls.FatherMobile.errors.startsWith)}}function Se(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Pe(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1," You must enter 11 number. "),t.qZA())}function He(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function Ve(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.NumberMustStartWith")," . "))}function at(l,p){if(1&l&&(t.TgZ(0,"mat-hint",42),t.YNc(1,Se,3,3,"span",40),t.YNc(2,Pe,2,0,"span",40),t.YNc(3,He,3,3,"span",40),t.YNc(4,Ve,3,3,"span",40),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.FatherWhatsAppNumber.errors?null:d.FormCtrls.FatherWhatsAppNumber.errors.required),t.xp6(1),t.Q6J("ngIf",(null==d.FormCtrls.FatherWhatsAppNumber.errors?null:d.FormCtrls.FatherWhatsAppNumber.errors.maxlength)||(null==d.FormCtrls.FatherWhatsAppNumber.errors?null:d.FormCtrls.FatherWhatsAppNumber.errors.minlength)),t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.FatherWhatsAppNumber.errors?null:d.FormCtrls.FatherWhatsAppNumber.errors.pattern),t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.FatherWhatsAppNumber.errors?null:d.FormCtrls.FatherWhatsAppNumber.errors.startsWith)}}function ot(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function It(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1," You must enter 11 number. "),t.qZA())}function yt(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function qt(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.NumberMustStartWith")," . "))}function Ft(l,p){if(1&l&&(t.TgZ(0,"mat-hint",42),t.YNc(1,ot,3,3,"span",40),t.YNc(2,It,2,0,"span",40),t.YNc(3,yt,3,3,"span",40),t.YNc(4,qt,3,3,"span",40),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.MotherMobile.errors?null:d.FormCtrls.MotherMobile.errors.required),t.xp6(1),t.Q6J("ngIf",(null==d.FormCtrls.MotherMobile.errors?null:d.FormCtrls.MotherMobile.errors.maxlength)||(null==d.FormCtrls.MotherMobile.errors?null:d.FormCtrls.MotherMobile.errors.minlength)),t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.MotherMobile.errors?null:d.FormCtrls.MotherMobile.errors.pattern),t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.MotherMobile.errors?null:d.FormCtrls.MotherMobile.errors.startsWith)}}function wt(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function St(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1," You must enter 11 number. "),t.qZA())}function Oe(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function qe(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.NumberMustStartWith")," . "))}function M(l,p){if(1&l&&(t.TgZ(0,"mat-hint",42),t.YNc(1,wt,3,3,"span",40),t.YNc(2,St,2,0,"span",40),t.YNc(3,Oe,3,3,"span",40),t.YNc(4,qe,3,3,"span",40),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.MotherWhatsAppNumber.errors?null:d.FormCtrls.MotherWhatsAppNumber.errors.required),t.xp6(1),t.Q6J("ngIf",(null==d.FormCtrls.MotherWhatsAppNumber.errors?null:d.FormCtrls.MotherWhatsAppNumber.errors.maxlength)||(null==d.FormCtrls.MotherWhatsAppNumber.errors?null:d.FormCtrls.MotherWhatsAppNumber.errors.minlength)),t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.MotherWhatsAppNumber.errors?null:d.FormCtrls.MotherWhatsAppNumber.errors.pattern),t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.MotherWhatsAppNumber.errors?null:d.FormCtrls.MotherWhatsAppNumber.errors.startsWith)}}function At(l,p){if(1&l&&(t.TgZ(0,"mat-option",41),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.Q6J("value",d.Id),t.xp6(1),t.hij(" ",d.Ar_Name," ")}}function vt(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.MustChoosevalue")," "))}function Le(l,p){if(1&l&&(t.TgZ(0,"mat-hint",42),t.YNc(1,vt,3,3,"span",40),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.Area.errors?null:d.FormCtrls.Area.errors.required)}}function Ut(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Ot(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.mustEnterValue")," "))}function Zt(l,p){if(1&l&&(t.TgZ(0,"mat-hint",42),t.YNc(1,Ut,3,3,"span",40),t.YNc(2,Ot,3,3,"span",40),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.Address.errors?null:d.FormCtrls.Address.errors.required),t.xp6(1),t.Q6J("ngIf",null==d.FormCtrls.Address.errors?null:d.FormCtrls.Address.errors.whiteSpace)}}var Gt=function(p){return{functionId:p}},ct=function(){var l=function(){function p(d,c,m,_,U,V){var ee=this;(0,j.Z)(this,p),this.reservationServ=d,this.fb=c,this.toaster=m,this.route=_,this.spinner=U,this.authserv=V,this.submitted=!1,this.route.paramMap.subscribe(function(me){ee.reservationId=Number(me.get("reservationId"))}),_.queryParamMap.subscribe(function(me){ee.functionId=Number(me.get("functionId"))})}return(0,Y.Z)(p,[{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.getReservationEdit(this.reservationId),this.myForm=this.fb.group({userId:[this.reservationId,[Z.kI.required]],Id:["",[Z.kI.required]],UserName:["",[Z.kI.required,Q.D.whiteSpace]],Religion:["",[Z.kI.required]],Gender:["",[Z.kI.required]],EducationTypeId:["",[Z.kI.required]],CenterBranchId:["",[Z.kI.required]],SchoolName:["",[Z.kI.required,Q.D.whiteSpace]],EducationalDivision:["",[Z.kI.required]],GuardianJob:["",[Z.kI.required,Q.D.whiteSpace]],Area:["",[Z.kI.required]],Address:["",[Z.kI.required,Q.D.whiteSpace]],StudentNumber:["",[Z.kI.required,Z.kI.maxLength(11),Z.kI.minLength(11),Z.kI.pattern(/^(\(?\+?[0-9]*\)?)?[0-9_\- \(\)]*$/),Q.D.MobileStartsWith]],StudentWhatsAppNumber:["",[Z.kI.required,Z.kI.maxLength(11),Z.kI.minLength(11),Z.kI.pattern(/^(\(?\+?[0-9]*\)?)?[0-9_\- \(\)]*$/),Q.D.MobileStartsWith]],FatherMobile:["",[Z.kI.required,Z.kI.maxLength(11),Z.kI.minLength(11),Z.kI.pattern(/^(\(?\+?[0-9]*\)?)?[0-9_\- \(\)]*$/),Q.D.MobileStartsWith]],FatherWhatsAppNumber:["",[Z.kI.required,Z.kI.maxLength(11),Z.kI.minLength(11),Z.kI.pattern(/^(\(?\+?[0-9]*\)?)?[0-9_\- \(\)]*$/),Q.D.MobileStartsWith]],MotherMobile:["",[Z.kI.required,Z.kI.maxLength(11),Z.kI.minLength(11),Z.kI.pattern(/^(\(?\+?[0-9]*\)?)?[0-9_\- \(\)]*$/),Q.D.MobileStartsWith]],MotherWhatsAppNumber:["",[Z.kI.required,Z.kI.maxLength(11),Z.kI.minLength(11),Z.kI.pattern(/^(\(?\+?[0-9]*\)?)?[0-9_\- \(\)]*$/),Q.D.MobileStartsWith]],HomeTelephone:["",[Z.kI.pattern(/^(\(?\+?[0-9]*\)?)?[0-9_\- \(\)]*$/)]],SentviewId:["",[Z.kI.required]],currentYear:["",[Z.kI.required]],EduCompId:["",[Z.kI.required]],City:[""],competitions:[""],Hobbies:[""],workshops:[""]})}},{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"ngAfterViewInit",value:function(){var c=this;this.authserv.EduCompId.subscribe(function(m){var _;c.EduCompId=m.EduCompId,null===(_=c.FormCtrls)||void 0===_||_.EduCompIdCtrl.setValue(m.EduCompId)})}},{key:"getReservationEdit",value:function(c){var m=this;this.spinner.show(),this.reservationServ.getReservationEdit(c,this.EduCompId).subscribe(function(_){var U,V,ee;m.myForm.patchValue(_.Reservation),m.Religions=_.Religion,m.Genders=_.Gender,m.EducationalDivisions=_.EducationalDivision,m.EducationTypes=_.EducationTypeId,m.Areas=_.Area,m.ProfilePicture=null===(U=_.Reservation)||void 0===U?void 0:U.ProfilePicture_Path,m.ProfilePicture_Path="mozakretyapi".concat(null===(V=_.Reservation)||void 0===V?void 0:V.ProfilePicture_Path),m.returnBranchesByEducTypeId(null===(ee=_.Reservation)||void 0===ee?void 0:ee.EducationTypeId),m.spinner.hide()})}},{key:"SubmitReservation",value:function(){var c=this;if(this.ProfilePicture||this.ProfilePicture_Path){var m={Reservation:this.myForm.value,profilePicture:this.ProfilePicture||this.ProfilePicture_Path};this.myForm.valid&&(this.spinner.show(),this.reservationServ.SubmitReservationEdit(m).subscribe(function(_){200==_.returnValue&&"Success"==_.returnString?c.toaster.success("\u062a\u0645 \u062a\u063a\u064a\u0631 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0628\u0646\u062c\u0627\u062d"):c.toaster.error(_.returnString,_.returnValue),c.spinner.hide()}))}else this.toaster.warning("\u064a\u062c\u0628 \u0627\u062e\u062a\u064a\u0627\u0631 \u0635\u0648\u0631\u0647 \u0634\u062e\u0635\u064a\u0629")}},{key:"returnBranchesByEducTypeId",value:function(c){var m=this;this.CenterBranches=[],this.reservationServ.returnBranchesByEducTypeId(c,this.EduCompId).subscribe(function(_){m.CenterBranches=_})}},{key:"onChange",value:function(c){var m=this,_=c.target.files[0].name,U=c.target.files[0].size,V=c.target.files[0].type,ee=c.target.files[0].lastModified,me=c.target.files[0].lastModifiedDate;if(c.target.files){var xe=new FileReader;xe.readAsDataURL(c.target.files[0]),xe.onload=function(Ae){var Me=Ae.target.result,Ct={FileAsBase64:Me,name:_,size:U,type:V,LastModified:ee,LastModifiedDate:me};m.ProfilePicture_Path=Me,m.ProfilePicture=Ct}}}}]),p}();return l.\u0275fac=function(d){return new(d||l)(t.Y36(ae.D),t.Y36(Z.qu),t.Y36(W._W),t.Y36(e.gz),t.Y36(u.t2),t.Y36(C.e))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-reservation-edit"]],decls:174,vars:116,consts:[[1,"row"],[1,"col-12"],[1,"content-header"],[1,"example-card"],["mat-raised-button","","routerLink","/dashboard/reservation/index",1,"btn","btn-warning","bg-light-warning","float-right",3,"queryParams"],[1,"container-fluid",3,"formGroup"],[1,"row","f-w"],[1,"col-md-4","col-12"],["appearance","legacy"],["matInput","","type","text","formControlName","UserName"],["class","danger",4,"ngIf"],["formControlName","Religion"],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"col-md-2","col-12"],["type","button","mat-raised-button","",1,"btn","btn-danger",3,"click"],["hidden","","type","file","accept","image/*","id","file",3,"change"],["fileInput",""],[1,"media"],["width","70","height","70","alt","avatar",1,"rounded","mr-3",3,"src"],["formControlName","Gender"],["formControlName","EducationTypeId",3,"selectionChange"],["formControlName","CenterBranchId"],["matInput","","type","text","formControlName","SchoolName"],["formControlName","EducationalDivision"],["matInput","","type","text","formControlName","GuardianJob"],["matInput","","type","text","formControlName","StudentNumber"],["matInput","","type","text","formControlName","StudentWhatsAppNumber"],["matInput","","type","text","formControlName","HomeTelephone"],[1,"col-md-6","col-12"],["matInput","","type","text","formControlName","FatherMobile"],["matInput","","type","text","formControlName","FatherWhatsAppNumber"],["matInput","","type","text","formControlName","MotherMobile"],["matInput","","type","text","formControlName","MotherWhatsAppNumber"],["formControlName","Area"],[1,"col-md-8","col-12"],["matInput","","type","text","formControlName","Address"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],[1,"danger"],[4,"ngIf"],[3,"value"],[1,"text-danger"]],template:function(d,c){if(1&d){var m=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",0),t.TgZ(7,"div",1),t.TgZ(8,"mat-card",3),t.TgZ(9,"mat-card-title"),t._uU(10),t.ALo(11,"translate"),t.TgZ(12,"button",4),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.TgZ(15,"mat-card-content"),t.TgZ(16,"form",5),t.TgZ(17,"div",6),t.TgZ(18,"div",7),t.TgZ(19,"mat-form-field",8),t.TgZ(20,"mat-label"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t._UZ(23,"input",9),t.YNc(24,ze,3,2,"mat-hint",10),t.qZA(),t.qZA(),t.TgZ(25,"div",7),t.TgZ(26,"mat-form-field",8),t.TgZ(27,"mat-label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"mat-select",11),t.TgZ(31,"mat-option"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.YNc(34,Te,2,2,"mat-option",12),t.qZA(),t.YNc(35,ue,2,1,"mat-hint",13),t.qZA(),t.qZA(),t.TgZ(36,"div",14),t.TgZ(37,"button",15),t.NdJ("click",function(){return t.CHM(m),t.MAs(41).click()}),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.TgZ(40,"input",16,17),t.NdJ("change",function(U){return c.onChange(U)}),t.qZA(),t.qZA(),t.TgZ(42,"div",14),t.TgZ(43,"div",18),t._UZ(44,"img",19),t.qZA(),t.qZA(),t.TgZ(45,"div",7),t.TgZ(46,"mat-form-field",8),t.TgZ(47,"mat-label"),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"mat-select",20),t.TgZ(51,"mat-option"),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.YNc(54,he,2,2,"mat-option",12),t.qZA(),t.YNc(55,fe,2,1,"mat-hint",13),t.qZA(),t.qZA(),t.TgZ(56,"div",7),t.TgZ(57,"mat-form-field",8),t.TgZ(58,"mat-label"),t._uU(59),t.ALo(60,"translate"),t.qZA(),t.TgZ(61,"mat-select",21),t.NdJ("selectionChange",function(){return c.returnBranchesByEducTypeId(c.FormCtrls.EducationTypeId.value)}),t.TgZ(62,"mat-option"),t._uU(63),t.ALo(64,"translate"),t.qZA(),t.YNc(65,H,2,2,"mat-option",12),t.qZA(),t.YNc(66,$e,2,1,"mat-hint",13),t.qZA(),t.qZA(),t.TgZ(67,"div",7),t.TgZ(68,"mat-form-field",8),t.TgZ(69,"mat-label"),t._uU(70),t.ALo(71,"translate"),t.qZA(),t.TgZ(72,"mat-select",22),t.TgZ(73,"mat-option"),t._uU(74),t.ALo(75,"translate"),t.qZA(),t.YNc(76,ht,2,2,"mat-option",12),t.qZA(),t.YNc(77,Nt,2,1,"mat-hint",13),t.qZA(),t.qZA(),t.TgZ(78,"div",7),t.TgZ(79,"mat-form-field",8),t.TgZ(80,"mat-label"),t._uU(81),t.ALo(82,"translate"),t.qZA(),t._UZ(83,"input",23),t.YNc(84,Mt,3,2,"mat-hint",13),t.qZA(),t.qZA(),t.TgZ(85,"div",7),t.TgZ(86,"mat-form-field",8),t.TgZ(87,"mat-label"),t._uU(88),t.ALo(89,"translate"),t.qZA(),t.TgZ(90,"mat-select",24),t.TgZ(91,"mat-option"),t._uU(92),t.ALo(93,"translate"),t.qZA(),t.YNc(94,Ke,2,2,"mat-option",12),t.qZA(),t.YNc(95,zt,2,1,"mat-hint",13),t.qZA(),t.qZA(),t.TgZ(96,"div",7),t.TgZ(97,"mat-form-field",8),t.TgZ(98,"mat-label"),t._uU(99),t.ALo(100,"translate"),t.qZA(),t._UZ(101,"input",25),t.YNc(102,Qt,3,2,"mat-hint",13),t.qZA(),t.qZA(),t.TgZ(103,"div",7),t.TgZ(104,"mat-form-field",8),t.TgZ(105,"mat-label"),t._uU(106),t.ALo(107,"translate"),t.qZA(),t._UZ(108,"input",26),t.YNc(109,Je,5,4,"mat-hint",13),t.qZA(),t.qZA(),t.TgZ(110,"div",7),t.TgZ(111,"mat-form-field",8),t.TgZ(112,"mat-label"),t._uU(113),t.ALo(114,"translate"),t.qZA(),t._UZ(115,"input",27),t.YNc(116,O,5,4,"mat-hint",13),t.qZA(),t.qZA(),t.TgZ(117,"div",7),t.TgZ(118,"mat-form-field",8),t.TgZ(119,"mat-label"),t._uU(120),t.ALo(121,"translate"),t.qZA(),t._UZ(122,"input",28),t.YNc(123,te,2,1,"mat-hint",13),t.qZA(),t.qZA(),t.TgZ(124,"div",29),t.TgZ(125,"mat-form-field",8),t.TgZ(126,"mat-label"),t._uU(127),t.ALo(128,"translate"),t.qZA(),t._UZ(129,"input",30),t.YNc(130,we,5,4,"mat-hint",13),t.qZA(),t.qZA(),t.TgZ(131,"div",29),t.TgZ(132,"mat-form-field",8),t.TgZ(133,"mat-label"),t._uU(134),t.ALo(135,"translate"),t.qZA(),t._UZ(136,"input",31),t.YNc(137,at,5,4,"mat-hint",13),t.qZA(),t.qZA(),t.TgZ(138,"div",29),t.TgZ(139,"mat-form-field",8),t.TgZ(140,"mat-label"),t._uU(141),t.ALo(142,"translate"),t.qZA(),t._UZ(143,"input",32),t.YNc(144,Ft,5,4,"mat-hint",13),t.qZA(),t.qZA(),t.TgZ(145,"div",29),t.TgZ(146,"mat-form-field",8),t.TgZ(147,"mat-label"),t._uU(148),t.ALo(149,"translate"),t.qZA(),t._UZ(150,"input",33),t.YNc(151,M,5,4,"mat-hint",13),t.qZA(),t.qZA(),t.TgZ(152,"div",7),t.TgZ(153,"mat-form-field",8),t.TgZ(154,"mat-label"),t._uU(155),t.ALo(156,"translate"),t.qZA(),t.TgZ(157,"mat-select",34),t.TgZ(158,"mat-option"),t._uU(159),t.ALo(160,"translate"),t.qZA(),t.YNc(161,At,2,2,"mat-option",12),t.qZA(),t.YNc(162,Le,2,1,"mat-hint",13),t.qZA(),t.qZA(),t.TgZ(163,"div",35),t.TgZ(164,"mat-form-field",8),t.TgZ(165,"mat-label"),t._uU(166),t.ALo(167,"translate"),t.qZA(),t._UZ(168,"input",36),t.YNc(169,Zt,3,2,"mat-hint",13),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(170,"mat-card-actions",37),t.TgZ(171,"button",38),t.NdJ("click",function(){return c.SubmitReservation()}),t._uU(172),t.ALo(173,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}2&d&&(t.xp6(3),t.lnq(" ",t.lcZ(4,56,"Navbar.ReservationList")," - ",t.lcZ(5,58,"Reservation.ReservationData")," - ",null==c.FormCtrls.UserName?null:c.FormCtrls.UserName.value," "),t.xp6(7),t.hij(" ",t.lcZ(11,60,"Reservation.ReservationData")," "),t.xp6(2),t.Q6J("queryParams",t.VKq(114,Gt,c.functionId)),t.xp6(1),t.hij(" ",t.lcZ(14,62,"General.Back")," "),t.xp6(3),t.Q6J("formGroup",c.myForm),t.xp6(5),t.hij(" ",t.lcZ(22,64,"labels.Name")," "),t.xp6(3),t.Q6J("ngIf",c.FormCtrls.UserName.invalid&&(c.FormCtrls.UserName.touched||c.submitted)),t.xp6(4),t.hij(" ",t.lcZ(29,66,"labels.Religion")," "),t.xp6(4),t.Oqu(t.lcZ(33,68,"General.Choose")),t.xp6(2),t.Q6J("ngForOf",c.Religions),t.xp6(1),t.Q6J("ngIf",c.FormCtrls.Religion.invalid&&(c.FormCtrls.Religion.touched||c.submitted)),t.xp6(3),t.hij(" ",t.lcZ(39,70,"labels.ProfilePicture")," "),t.xp6(6),t.Q6J("src",c.ProfilePicture_Path,t.LSH),t.xp6(4),t.hij(" ",t.lcZ(49,72,"labels.Gender")," "),t.xp6(4),t.hij(" ",t.lcZ(53,74,"General.Choose")," "),t.xp6(2),t.Q6J("ngForOf",c.Genders),t.xp6(1),t.Q6J("ngIf",c.FormCtrls.Gender.invalid&&(c.FormCtrls.Gender.touched||c.submitted)),t.xp6(4),t.hij(" ",t.lcZ(60,76,"labels.EducationType")," "),t.xp6(4),t.Oqu(t.lcZ(64,78,"General.Choose")),t.xp6(2),t.Q6J("ngForOf",c.EducationTypes),t.xp6(1),t.Q6J("ngIf",c.FormCtrls.EducationTypeId.invalid&&(c.FormCtrls.EducationTypeId.touched||c.submitted)),t.xp6(4),t.hij(" ",t.lcZ(71,80,"labels.CenterBranch")," "),t.xp6(4),t.hij(" ",t.lcZ(75,82,"General.Choose")," "),t.xp6(2),t.Q6J("ngForOf",c.CenterBranches),t.xp6(1),t.Q6J("ngIf",c.FormCtrls.CenterBranchId.invalid&&(c.FormCtrls.CenterBranchId.touched||c.submitted)),t.xp6(4),t.hij(" ",t.lcZ(82,84,"labels.SchoolName")," "),t.xp6(3),t.Q6J("ngIf",c.FormCtrls.SchoolName.invalid&&(c.FormCtrls.SchoolName.touched||c.submitted)),t.xp6(4),t.hij(" ",t.lcZ(89,86,"labels.EducationalDivision")," "),t.xp6(4),t.Oqu(t.lcZ(93,88,"General.Choose")),t.xp6(2),t.Q6J("ngForOf",c.EducationalDivisions),t.xp6(1),t.Q6J("ngIf",c.FormCtrls.EducationalDivision.invalid&&(c.FormCtrls.EducationalDivision.touched||c.submitted)),t.xp6(4),t.hij(" ",t.lcZ(100,90,"labels.GuardianJob")," "),t.xp6(3),t.Q6J("ngIf",c.FormCtrls.GuardianJob.invalid&&(c.FormCtrls.GuardianJob.touched||c.submitted)),t.xp6(4),t.hij(" ",t.lcZ(107,92,"labels.StudentNumber")," "),t.xp6(3),t.Q6J("ngIf",c.FormCtrls.StudentNumber.invalid&&(c.FormCtrls.StudentNumber.touched||c.submitted)),t.xp6(4),t.hij(" ",t.lcZ(114,94,"labels.StudentWhatsapp")," "),t.xp6(3),t.Q6J("ngIf",c.FormCtrls.StudentWhatsAppNumber.invalid&&(c.FormCtrls.StudentWhatsAppNumber.touched||c.submitted)),t.xp6(4),t.hij(" ",t.lcZ(121,96,"labels.HomeTelephone")," "),t.xp6(3),t.Q6J("ngIf",c.FormCtrls.HomeTelephone.invalid&&(c.FormCtrls.HomeTelephone.touched||c.submitted)),t.xp6(4),t.hij(" ",t.lcZ(128,98,"labels.FatherMobile")," "),t.xp6(3),t.Q6J("ngIf",c.FormCtrls.FatherMobile.invalid&&(c.FormCtrls.FatherMobile.touched||c.submitted)),t.xp6(4),t.hij(" ",t.lcZ(135,100,"labels.FatherWhatsapp")," "),t.xp6(3),t.Q6J("ngIf",c.FormCtrls.FatherWhatsAppNumber.invalid&&(c.FormCtrls.FatherWhatsAppNumber.touched||c.submitted)),t.xp6(4),t.hij(" ",t.lcZ(142,102,"labels.MotherMobile")," "),t.xp6(3),t.Q6J("ngIf",c.FormCtrls.MotherMobile.invalid&&(c.FormCtrls.MotherMobile.touched||c.submitted)),t.xp6(4),t.hij(" ",t.lcZ(149,104,"labels.MotherWhatsapp")," "),t.xp6(3),t.Q6J("ngIf",c.FormCtrls.MotherWhatsAppNumber.invalid&&(c.FormCtrls.MotherWhatsAppNumber.touched||c.submitted)),t.xp6(4),t.hij(" ",t.lcZ(156,106,"Reservation.AreaReservation")," "),t.xp6(4),t.Oqu(t.lcZ(160,108,"General.Choose")),t.xp6(2),t.Q6J("ngForOf",c.Areas),t.xp6(1),t.Q6J("ngIf",c.FormCtrls.Area.invalid&&(c.FormCtrls.Area.touched||c.submitted)),t.xp6(4),t.hij(" ",t.lcZ(167,110,"labels.Address")," "),t.xp6(3),t.Q6J("ngIf",c.FormCtrls.Address.invalid&&(c.FormCtrls.Address.touched||c.submitted)),t.xp6(3),t.hij(" ",t.lcZ(173,112,"General.Update")," "))},directives:[E.a8,E.n5,ce.lW,e.rH,E.dn,Z._Y,Z.JL,Z.sg,k.KE,k.hX,K.Nt,Z.Fj,Z.JJ,Z.u,f.O5,Ie.gD,pe.ey,f.sg,E.hq,k.bx],pipes:[se.X$],styles:[".media[_ngcontent-%COMP%]{padding:0;margin-top:-15px}"]}),l}(),Ye=h(6087),be=h(4847),J=h(2075),je=h(8966);function Vt(l,p){if(1&l&&(t.TgZ(0,"table",6),t.TgZ(1,"thead"),t.TgZ(2,"tr"),t.TgZ(3,"th"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"th"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"th"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"th"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"th"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"th"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(36,"tbody"),t.TgZ(37,"tr"),t.TgZ(38,"td"),t._uU(39),t.qZA(),t.TgZ(40,"td"),t._uU(41),t.qZA(),t.TgZ(42,"td"),t._uU(43),t.qZA(),t.TgZ(44,"td"),t._uU(45),t.qZA(),t.TgZ(46,"td"),t._uU(47),t.qZA(),t.TgZ(48,"td"),t._uU(49),t.qZA(),t.TgZ(50,"td"),t._uU(51),t.qZA(),t.TgZ(52,"td"),t._uU(53),t.qZA(),t.TgZ(54,"td"),t._uU(55),t.qZA(),t.TgZ(56,"td"),t._uU(57),t.qZA(),t.TgZ(58,"td"),t._uU(59),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&l){var d=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,22,"labels.Name")),t.xp6(3),t.Oqu(t.lcZ(8,24,"labels.Email")),t.xp6(3),t.Oqu(t.lcZ(11,26,"labels.Religion")),t.xp6(3),t.Oqu(t.lcZ(14,28,"labels.Gender")),t.xp6(3),t.Oqu(t.lcZ(17,30,"labels.EducationType")),t.xp6(3),t.Oqu(t.lcZ(20,32,"Reservation.AreaReservation")),t.xp6(3),t.Oqu(t.lcZ(23,34,"labels.branchName")),t.xp6(3),t.Oqu(t.lcZ(26,36,"labels.Hobbies")),t.xp6(3),t.Oqu(t.lcZ(29,38,"labels.Competitions")),t.xp6(3),t.Oqu(t.lcZ(32,40,"labels.Workshops")),t.xp6(3),t.Oqu(t.lcZ(35,42,"labels.SchoolName")),t.xp6(5),t.Oqu(null==d.reservation?null:d.reservation.Name),t.xp6(2),t.Oqu(null==d.reservation?null:d.reservation.Email),t.xp6(2),t.Oqu(null==d.reservation?null:d.reservation.Religion.Ar_Name),t.xp6(2),t.Oqu(null==d.reservation?null:d.reservation.Gender.gender_ar_name),t.xp6(2),t.Oqu(null==d.reservation?null:d.reservation.EducationType.Ar_Name),t.xp6(2),t.Oqu(null==d.reservation?null:d.reservation.Area.Ar_Name),t.xp6(2),t.Oqu(null==d.reservation?null:d.reservation.CenterBranch),t.xp6(2),t.Oqu(null==d.reservation?null:d.reservation.Hobbies),t.xp6(2),t.Oqu(null==d.reservation?null:d.reservation.Competitions),t.xp6(2),t.Oqu(null==d.reservation?null:d.reservation.Workshops),t.xp6(2),t.hij(" ",null==d.reservation?null:d.reservation.SchoolName," ")}}function Lt(l,p){if(1&l&&(t.TgZ(0,"table",6),t.TgZ(1,"thead"),t.TgZ(2,"tr"),t.TgZ(3,"th"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"th"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"th"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"th"),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"th"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t.TgZ(21,"th"),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"th"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"th"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(30,"tbody"),t.TgZ(31,"tr"),t.TgZ(32,"td"),t._uU(33),t.qZA(),t.TgZ(34,"td"),t._uU(35),t.qZA(),t.TgZ(36,"td"),t._uU(37),t.qZA(),t.TgZ(38,"td"),t._uU(39),t.qZA(),t.TgZ(40,"td"),t._uU(41),t.qZA(),t.TgZ(42,"td"),t._uU(43),t.qZA(),t.TgZ(44,"td"),t._uU(45),t.qZA(),t.TgZ(46,"td"),t._uU(47),t.qZA(),t.TgZ(48,"td"),t._uU(49),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&l){var d=t.oxw();t.xp6(4),t.Oqu(t.lcZ(5,18,"labels.GuardianJob")),t.xp6(3),t.Oqu(t.lcZ(8,20,"labels.FatherMobile")),t.xp6(3),t.Oqu(t.lcZ(11,22,"labels.FatherWhatsapp")),t.xp6(3),t.Oqu(t.lcZ(14,24,"labels.MotherMobile")),t.xp6(3),t.Oqu(t.lcZ(17,26,"labels.MotherWhatsapp")),t.xp6(3),t.Oqu(t.lcZ(20,28,"labels.StudentNumber")),t.xp6(3),t.Oqu(t.lcZ(23,30,"labels.StudentWhatsapp")),t.xp6(3),t.Oqu(t.lcZ(26,32,"labels.HomeTelephone")),t.xp6(3),t.Oqu(t.lcZ(29,34,"labels.Address")),t.xp6(5),t.Oqu(null==d.reservation?null:d.reservation.GuardianJob),t.xp6(2),t.Oqu(null==d.reservation?null:d.reservation.FatherMobile),t.xp6(2),t.Oqu(null==d.reservation?null:d.reservation.FatherWhatsAppNumber.Ar_Name),t.xp6(2),t.Oqu(null==d.reservation?null:d.reservation.MotherMobile),t.xp6(2),t.Oqu(null==d.reservation?null:d.reservation.MotherWhatsAppNumber),t.xp6(2),t.Oqu(null==d.reservation?null:d.reservation.StudentNumber),t.xp6(2),t.Oqu(null==d.reservation?null:d.reservation.StudentWhatsAppNumber),t.xp6(2),t.Oqu(null==d.reservation?null:d.reservation.HomeTelephon),t.xp6(2),t.Oqu(null==d.reservation?null:d.reservation.Address)}}var mt=function(){var l=function(){function p(d,c){var m=this;(0,j.Z)(this,p),this.reservationService=d,this.data=c,this.reservationService.ReservationDetails(c.reservationId).subscribe(function(U){m.reservation=U})}return(0,Y.Z)(p,[{key:"ngOnInit",value:function(){}}]),p}();return l.\u0275fac=function(d){return new(d||l)(t.Y36(ae.D),t.Y36(je.WI))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-reservation-details"]],decls:10,vars:6,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"table-responsive"],["class","table table-striped m-0",4,"ngIf"],["mat-dialog-actions","","align","end"],["mat-button","",1,"btn","btn-danger","float-right",3,"mat-dialog-close"],[1,"table","table-striped","m-0"]],template:function(d,c){1&d&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div",1),t.TgZ(4,"div",2),t.YNc(5,Vt,60,44,"table",3),t.YNc(6,Lt,50,36,"table",3),t.qZA(),t.qZA(),t.TgZ(7,"div",4),t.TgZ(8,"button",5),t._uU(9," Close "),t.qZA(),t.qZA()),2&d&&(t.xp6(1),t.Oqu(t.lcZ(2,4,"Reservation.ReservationDetails")),t.xp6(4),t.Q6J("ngIf",c.reservation),t.xp6(1),t.Q6J("ngIf",c.reservation),t.xp6(2),t.Q6J("mat-dialog-close",!1))},directives:[je.uh,je.xY,f.O5,je.H8,ce.lW,je.ZT],pipes:[se.X$],styles:[".table[_ngcontent-%COMP%]{width:100}"]}),l}(),Pt=h(4159),kt=h(9814),Xe=h(9772),$t=h(3865);function an(l,p){if(1&l&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.Q6J("value",d.Id),t.xp6(1),t.hij(" ",d.groupName," ")}}function on(l,p){if(1&l&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.Q6J("value",d.Id),t.xp6(1),t.hij(" ",d.Ar_Name," ")}}function rn(l,p){if(1&l&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.Q6J("value",d.Id),t.xp6(1),t.hij(" ",d.Ar_Name," ")}}function ii(l,p){1&l&&(t.TgZ(0,"th",46),t._uU(1,"#"),t.qZA())}function ai(l,p){if(1&l&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&l){var d=p.index;t.xp6(1),t.Oqu(d+1)}}function oi(l,p){1&l&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Name")," "))}function ri(l,p){if(1&l&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(d.Name)}}function li(l,p){1&l&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.AccountName")," "))}function si(l,p){if(1&l&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(d.UserName)}}function ui(l,p){1&l&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.CenterCode")," "))}function di(l,p){if(1&l&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(d.CenterCode)}}function dn(l,p){1&l&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.branchName")," "))}function cn(l,p){if(1&l&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(d.CenterBranchName)}}function ln(l,p){1&l&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Mobile")," "))}function Kt(l,p){if(1&l&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(d.StudentNumber)}}function ci(l,p){1&l&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Status")," "))}function Jn(l,p){if(1&l&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(null==d.Status?null:d.Status.Ar_Name)}}function mi(l,p){1&l&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Group")," "))}function pi(l,p){if(1&l&&(t.TgZ(0,"span"),t._uU(1),t._UZ(2,"br"),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.hij(" - ",null==d.studyingGroup?null:d.studyingGroup.groupName," ")}}function gi(l,p){if(1&l&&(t.TgZ(0,"td",47),t.YNc(1,pi,3,1,"span",48),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Q6J("ngForOf",null==d?null:d.Group)}}function hi(l,p){1&l&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Discount")," "))}function _i(l,p){if(1&l&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.hij(" ",null==d||null==d.Discount?null:d.Discount.Ar_Name," ")}}function fi(l,p){1&l&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Date")," "))}function On(l,p){if(1&l&&(t.TgZ(0,"td",47),t._uU(1),t.ALo(2,"NewDate"),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,d.ReservationDate)," ")}}function Et(l,p){1&l&&(t.TgZ(0,"th",46),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Notes")," "))}function mn(l,p){if(1&l&&(t.TgZ(0,"td",47),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(null==d.Status?null:d.Status.Notes)}}function pn(l,p){1&l&&(t.TgZ(0,"th",46),t._uU(1,"actions"),t.qZA())}var Ht=function(p){return{functionId:p}};function gn(l,p){if(1&l&&(t.TgZ(0,"a",53),t._UZ(1,"i",54),t.qZA()),2&l){var d=t.oxw(2).$implicit,c=t.oxw();t.MGl("routerLink","/dashboard/reservation/edit-reservation/",null==d?null:d.Id,""),t.Q6J("queryParams",t.VKq(2,Ht,c.functionId))}}function wn(l,p){if(1&l&&(t.TgZ(0,"a",55),t._UZ(1,"i",56),t.qZA()),2&l){var d=t.oxw(2).$implicit,c=t.oxw();t.MGl("routerLink","/dashboard/reservation/reservation-status/",null==d?null:d.Id,""),t.Q6J("queryParams",t.VKq(2,Ht,c.functionId))}}function Wt(l,p){if(1&l&&(t.TgZ(0,"a",57),t._UZ(1,"i",58),t.qZA()),2&l){var d=t.oxw(2).$implicit,c=t.oxw();t.MGl("routerLink","/dashboard/reservation/student-discount/",null==d||null==d.Status?null:d.Status.userId,""),t.Q6J("queryParams",t.VKq(2,Ht,c.functionId))}}function Sn(l,p){if(1&l){var d=t.EpF();t.TgZ(0,"a",59),t.NdJ("click",function(){t.CHM(d);var _=t.oxw(2).$implicit;return t.oxw().ReservationDetailsDialog(_.Id)}),t._UZ(1,"i",60),t.qZA()}if(2&l){var c=t.oxw(3);t.Q6J("queryParams",t.VKq(1,Ht,c.functionId))}}function Tt(l,p){if(1&l&&(t.ynx(0),t.YNc(1,gn,2,4,"a",49),t.YNc(2,wn,2,4,"a",50),t.YNc(3,Wt,2,4,"a",51),t.YNc(4,Sn,2,3,"a",52),t.BQk()),2&l){var d=p.$implicit;t.xp6(1),t.Q6J("ngIf","Edit"===d.functionName),t.xp6(1),t.Q6J("ngIf","Status"===d.functionName),t.xp6(1),t.Q6J("ngIf","Discount"===d.functionName),t.xp6(1),t.Q6J("ngIf","Details"===d.functionName)}}function Yt(l,p){if(1&l&&(t.TgZ(0,"td",47),t.YNc(1,Tt,5,4,"ng-container",48),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngForOf",d.rowFunctions)}}function xt(l,p){1&l&&t._UZ(0,"tr",61)}function pt(l,p){1&l&&t._UZ(0,"tr",62)}function sn(l,p){if(1&l&&(t.TgZ(0,"tr",63),t.TgZ(1,"td",64),t._uU(2),t.qZA(),t.qZA()),2&l){t.oxw();var d=t.MAs(99);t.xp6(2),t.hij(' No data matching the filter "',d.value,'" ')}}var hn=function(){return[10]},vi=function(){var l=function(){function p(d,c,m,_,U,V,ee,me){var xe=this;(0,j.Z)(this,p),this.fb=d,this.reservationService=c,this.toaster=m,this.route=_,this.authserv=U,this.SubjectMaterialsService=V,this.spinner=ee,this.dialog=me,this.itemsCount=0,this.displayedColumns=["#","name","accountName","code","branch","mobile","status","group","discount","date","note","actions"],_.queryParamMap.subscribe(function(Ae){xe.functionId=Number(Ae.get("functionId")),xe.functionId&&xe.authserv.getUserRowFunctions(xe.functionId).subscribe(function(Me){Me&&(xe.rowFunctions=Me)})})}return(0,Y.Z)(p,[{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.branchId=this.authserv.getBranchId(),this.myForm=this.fb.group({EduCompId:[this.EduCompId,Z.kI.required],branchId:[],email:["",Z.kI.email],name:[""],mobile:[""],code:[""],groupId:[""],statusId:[""],cityId:[""],currentYear:[1],page:[]}),this.getGroupsByEduCompId(),this.returnStatus(),this.getArea(),this.getReservationsList(1)}},{key:"page",get:function(){return this.myForm.get("page")}},{key:"branchIdCtrl",get:function(){return this.myForm.get("branchId")}},{key:"EduCompIdCtrl",get:function(){return this.myForm.get("EduCompId")}},{key:"currentYearCtrl",get:function(){return this.myForm.get("currentYear")}},{key:"ngAfterViewInit",value:function(){var c=this;this.authserv.EduCompId.subscribe(function(m){c.EduCompId=m.EduCompId,c.EduCompIdCtrl.setValue(m.EduCompId)}),this.authserv.branchId.subscribe(function(m){c.branchId=m.branchId,c.branchIdCtrl.setValue(m.branchId),c.getReservationsList(1)}),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"applyFilter",value:function(c){this.dataSource.filter=c.target.value.trim().toLowerCase()}},{key:"getReservationsList",value:function(c){var _,m=this;null===(_=this.page)||void 0===_||_.setValue(c),this.EduCompIdCtrl.value&&"null"!=this.EduCompIdCtrl.value?this.myForm.valid&&(this.spinner.show(),this.reservationService.getReservationsList(this.myForm.value).subscribe(function(U){m.Reservations=U.list,m.dataSource=new J.by(U.list),m.itemsCount=U.itemsCount,m.spinner.hide()})):this.toaster.warning("You Must Select Center")}},{key:"getGroupsByEduCompId",value:function(){var c=this;this.SubjectMaterialsService.getGroupsByEduCompId(this.EduCompId).subscribe(function(m){1==m.retunValue&&(c.groups=m.lstEduCompGroups)})}},{key:"returnStatus",value:function(){var c=this;this.reservationService.returnStatus().subscribe(function(m){c.Status=m})}},{key:"getArea",value:function(){var c=this;this.reservationService.getArea().subscribe(function(m){c.Areas=m})}},{key:"ReservationDetailsDialog",value:function(c){this.dialog.open(mt,{data:{reservationId:c},minWidth:"90vw"}).afterClosed().subscribe()}},{key:"Reset",value:function(){this.myForm.reset(),this.EduCompIdCtrl.setValue(this.EduCompId),this.branchIdCtrl.setValue(this.branchId),this.currentYearCtrl.setValue(1)}}]),p}();return l.\u0275fac=function(d){return new(d||l)(t.Y36(Z.qu),t.Y36(ae.D),t.Y36(W._W),t.Y36(e.gz),t.Y36(C.e),t.Y36(Pt.r),t.Y36(u.t2),t.Y36(je.uw))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-reservation-index"]],viewQuery:function(d,c){var m;1&d&&(t.Gf(Ye.NW,5),t.Gf(be.YE,5)),2&d&&(t.iGM(m=t.CRH())&&(c.paginator=m.first),t.iGM(m=t.CRH())&&(c.sort=m.first))},decls:142,vars:64,consts:[[1,"row"],[1,"col-12"],[1,"content-header"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-3","col-12"],["appearance","legacy"],["matInput","","type","text","formControlName","name"],["matInput","","type","text","formControlName","email","autocomplete","new-password"],["matInput","","type","text","formControlName","mobile"],["matInput","","type","code","formControlName","code"],[1,"col-md-4","col-12"],["formControlName","groupId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","statusId"],["formControlName","cityId"],["formControlName","currentYear",1,"row"],[1,"col-4"],[3,"value"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],["addBtn",""],["mat-raised-button","",1,"btn","btn-warning",3,"click"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","accountName"],["matColumnDef","code"],["matColumnDef","branch"],["matColumnDef","mobile"],["matColumnDef","status"],["matColumnDef","group"],["matColumnDef","discount"],["matColumnDef","date"],["matColumnDef","note"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngFor","ngForOf"],["class","success p-0","matTooltip","Edit",3,"routerLink","queryParams",4,"ngIf"],["class","info p-0","matTooltip","Change Status",3,"routerLink","queryParams",4,"ngIf"],["class","success p-0","matTooltip","Change Discount",3,"routerLink","queryParams",4,"ngIf"],["class","info p-0","matTooltip","Details",3,"queryParams","click",4,"ngIf"],["matTooltip","Edit",1,"success","p-0",3,"routerLink","queryParams"],[1,"ft-edit-2","font-medium-3","mr-2"],["matTooltip","Change Status",1,"info","p-0",3,"routerLink","queryParams"],[1,"ft-settings","font-medium-3","mr-2"],["matTooltip","Change Discount",1,"success","p-0",3,"routerLink","queryParams"],[1,"fa","fa-money","font-medium-3","mr-2"],["matTooltip","Details",1,"info","p-0",3,"queryParams","click"],[1,"ft-alert-circle","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(d,c){1&d&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"div",0),t.TgZ(6,"div",1),t.TgZ(7,"mat-card"),t.TgZ(8,"mat-card-title"),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"mat-card-content",3),t.TgZ(12,"div",0),t.TgZ(13,"div",1),t.TgZ(14,"form",4),t.TgZ(15,"div",0),t.TgZ(16,"div",5),t.TgZ(17,"mat-form-field",6),t.TgZ(18,"mat-label"),t._uU(19),t.ALo(20,"translate"),t.qZA(),t._UZ(21,"input",7),t.qZA(),t.qZA(),t.TgZ(22,"div",5),t.TgZ(23,"mat-form-field",6),t.TgZ(24,"mat-label"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t._UZ(27,"input",8),t.qZA(),t.qZA(),t.TgZ(28,"div",5),t.TgZ(29,"mat-form-field",6),t.TgZ(30,"mat-label"),t._uU(31),t.ALo(32,"translate"),t.qZA(),t._UZ(33,"input",9),t.qZA(),t.qZA(),t.TgZ(34,"div",5),t.TgZ(35,"mat-form-field",6),t.TgZ(36,"mat-label"),t._uU(37),t.ALo(38,"translate"),t.qZA(),t._UZ(39,"input",10),t.qZA(),t.qZA(),t.TgZ(40,"div",11),t.TgZ(41,"mat-form-field",6),t.TgZ(42,"mat-label"),t._uU(43),t.ALo(44,"translate"),t.qZA(),t.TgZ(45,"mat-select",12),t.TgZ(46,"mat-option"),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.YNc(49,an,2,2,"mat-option",13),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",11),t.TgZ(51,"mat-form-field",6),t.TgZ(52,"mat-label"),t._uU(53),t.ALo(54,"translate"),t.qZA(),t.TgZ(55,"mat-select",14),t.TgZ(56,"mat-option"),t._uU(57),t.ALo(58,"translate"),t.qZA(),t.YNc(59,on,2,2,"mat-option",13),t.qZA(),t.qZA(),t.qZA(),t.TgZ(60,"div",11),t.TgZ(61,"mat-form-field",6),t.TgZ(62,"mat-label"),t._uU(63),t.ALo(64,"translate"),t.qZA(),t.TgZ(65,"mat-select",15),t.TgZ(66,"mat-option"),t._uU(67),t.ALo(68,"translate"),t.qZA(),t.YNc(69,rn,2,2,"mat-option",13),t.qZA(),t.qZA(),t.qZA(),t.TgZ(70,"div",1),t.TgZ(71,"mat-radio-group",16),t.TgZ(72,"div",17),t.TgZ(73,"mat-radio-button",18),t._uU(74),t.ALo(75,"translate"),t.qZA(),t.qZA(),t.TgZ(76,"div",17),t.TgZ(77,"mat-radio-button",18),t._uU(78),t.ALo(79,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(80,"mat-card-actions",19),t.TgZ(81,"button",20,21),t.NdJ("click",function(){return c.getReservationsList(1)}),t._uU(83),t.ALo(84,"translate"),t.qZA(),t.TgZ(85,"button",22),t.NdJ("click",function(){return c.Reset()}),t._uU(86),t.ALo(87,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(88,"div",0),t.TgZ(89,"div",1),t.TgZ(90,"mat-card"),t.TgZ(91,"mat-card-title"),t._uU(92),t.ALo(93,"translate"),t.qZA(),t.TgZ(94,"mat-card-content"),t.TgZ(95,"mat-form-field",23),t.TgZ(96,"mat-label"),t._uU(97,"Filter"),t.qZA(),t.TgZ(98,"input",24,25),t.NdJ("keyup",function(_){return c.applyFilter(_)}),t.qZA(),t.qZA(),t.TgZ(100,"div",26),t.TgZ(101,"table",27),t.ynx(102,28),t.YNc(103,ii,2,0,"th",29),t.YNc(104,ai,2,1,"td",30),t.BQk(),t.ynx(105,31),t.YNc(106,oi,3,3,"th",29),t.YNc(107,ri,2,1,"td",30),t.BQk(),t.ynx(108,32),t.YNc(109,li,3,3,"th",29),t.YNc(110,si,2,1,"td",30),t.BQk(),t.ynx(111,33),t.YNc(112,ui,3,3,"th",29),t.YNc(113,di,2,1,"td",30),t.BQk(),t.ynx(114,34),t.YNc(115,dn,3,3,"th",29),t.YNc(116,cn,2,1,"td",30),t.BQk(),t.ynx(117,35),t.YNc(118,ln,3,3,"th",29),t.YNc(119,Kt,2,1,"td",30),t.BQk(),t.ynx(120,36),t.YNc(121,ci,3,3,"th",29),t.YNc(122,Jn,2,1,"td",30),t.BQk(),t.ynx(123,37),t.YNc(124,mi,3,3,"th",29),t.YNc(125,gi,2,1,"td",30),t.BQk(),t.ynx(126,38),t.YNc(127,hi,3,3,"th",29),t.YNc(128,_i,2,1,"td",30),t.BQk(),t.ynx(129,39),t.YNc(130,fi,3,3,"th",29),t.YNc(131,On,3,3,"td",30),t.BQk(),t.ynx(132,40),t.YNc(133,Et,3,3,"th",29),t.YNc(134,mn,2,1,"td",30),t.BQk(),t.ynx(135,41),t.YNc(136,pn,2,0,"th",29),t.YNc(137,Yt,2,1,"td",30),t.BQk(),t.YNc(138,xt,1,0,"tr",42),t.YNc(139,pt,1,0,"tr",43),t.YNc(140,sn,3,1,"tr",44),t.qZA(),t.TgZ(141,"mat-paginator",45),t.NdJ("page",function(_){return c.getReservationsList(_.pageIndex+1)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&d&&(t.xp6(3),t.hij(" ",t.lcZ(4,29,"Navbar.ReservationList")," "),t.xp6(6),t.hij(" ",t.lcZ(10,31,"General.Search")," "),t.xp6(5),t.Q6J("formGroup",c.myForm),t.xp6(5),t.hij(" ",t.lcZ(20,33,"labels.Name")," "),t.xp6(6),t.hij(" ",t.lcZ(26,35,"labels.Email")," "),t.xp6(6),t.hij(" ",t.lcZ(32,37,"labels.Mobile")," "),t.xp6(6),t.hij(" ",t.lcZ(38,39,"labels.CenterCode")," "),t.xp6(6),t.hij("",t.lcZ(44,41,"labels.Group")," "),t.xp6(4),t.hij(" ",t.lcZ(48,43,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",c.groups),t.xp6(4),t.hij("",t.lcZ(54,45,"labels.Status")," "),t.xp6(4),t.hij(" ",t.lcZ(58,47,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",c.Status),t.xp6(4),t.hij(" ",t.lcZ(64,49,"Reservation.AreaReservation")," "),t.xp6(4),t.hij(" ",t.lcZ(68,51,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",c.Areas),t.xp6(4),t.Q6J("value",0),t.xp6(1),t.hij(" ",t.lcZ(75,53,"labels.CurrentYear")," "),t.xp6(3),t.Q6J("value",1),t.xp6(1),t.hij("",t.lcZ(79,55,"labels.NextYear")," "),t.xp6(5),t.hij(" ",t.lcZ(84,57,"General.Search")," "),t.xp6(3),t.hij(" ",t.lcZ(87,59,"General.Reset")," "),t.xp6(6),t.hij(" ",t.lcZ(93,61,"Navbar.ReservationList")," "),t.xp6(9),t.Q6J("dataSource",c.dataSource),t.xp6(37),t.Q6J("matHeaderRowDef",c.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",c.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(63,hn))("length",c.itemsCount)("pageSize",10))},directives:[E.a8,E.n5,E.dn,Z._Y,Z.JL,Z.sg,k.KE,k.hX,K.Nt,Z.Fj,Z.JJ,Z.u,Ie.gD,pe.ey,f.sg,kt.VQ,kt.U0,E.hq,ce.lW,J.BZ,be.YE,J.w1,J.fO,J.Dz,J.as,J.nj,J.Ee,Ye.NW,J.ge,be.nU,J.ev,f.O5,e.yS,Xe.gM,J.XQ,J.Gk],pipes:[se.X$,$t.H],styles:[""]}),l}(),Zi=h(5318);function Ci(l,p){if(1&l&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.Q6J("value",d.Id),t.xp6(1),t.hij(" ",d.Ar_Name," ")}}function bi(l,p){if(1&l&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.Q6J("value",d.Id),t.xp6(1),t.hij(" ",d.groupName," ")}}function Ai(l,p){if(1&l&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.Q6J("value",d.Id),t.xp6(1),t.hij(" ",d.reasonText," ")}}function Ti(l,p){if(1&l&&(t.TgZ(0,"div",6),t.TgZ(1,"mat-form-field",7),t.TgZ(2,"mat-label"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"mat-select",40),t.TgZ(6,"mat-option"),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.YNc(9,Ai,2,2,"mat-option",12),t.qZA(),t.qZA(),t.qZA()),2&l){var d=t.oxw();t.xp6(3),t.hij("",t.lcZ(4,3,"labels.Reason")," "),t.xp6(4),t.hij(" ",t.lcZ(8,5,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",d.Reasons)}}function xi(l,p){1&l&&(t.TgZ(0,"th",41),t._uU(1,"#"),t.qZA())}function Ii(l,p){if(1&l&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&l){var d=p.index;t.xp6(1),t.Oqu(d+1)}}function yi(l,p){1&l&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Name")," "))}function qi(l,p){if(1&l&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(null==d?null:d.Name)}}function Fi(l,p){1&l&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.CenterCode")," "))}function wi(l,p){if(1&l&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(null==d?null:d.Code)}}function Si(l,p){1&l&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Status")," "))}function Ui(l,p){if(1&l&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(null==d||null==d.Status?null:d.Status.Ar_Name)}}function ki(l,p){1&l&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Reason")," "))}function Ei(l,p){if(1&l&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(null==d?null:d.reasonText)}}function Di(l,p){1&l&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Group")," "))}function Ni(l,p){if(1&l&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(null==d?null:d.groupName)}}function Mi(l,p){1&l&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.FromDate")," "))}function Qi(l,p){if(1&l&&(t.TgZ(0,"td",42),t._uU(1),t.ALo(2,"NewDate"),t.ALo(3,"Time"),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.AsE(" ",t.lcZ(2,2,null==d?null:d.FromDate)," ",t.lcZ(3,4,null==d?null:d.FromDate)," ")}}function Ji(l,p){1&l&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.ToDate")," "))}function Oi(l,p){if(1&l&&(t.TgZ(0,"td",42),t._uU(1),t.ALo(2,"NewDate"),t.ALo(3,"Time"),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.AsE(" ",t.lcZ(2,2,null==d?null:d.ToDate)," ",t.lcZ(3,4,null==d?null:d.ToDate)," ")}}function Li(l,p){1&l&&(t.TgZ(0,"th",41),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Notes")," "))}function Pi(l,p){if(1&l&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(null==d?null:d.Note)}}function Yi(l,p){1&l&&t._UZ(0,"tr",43)}function ji(l,p){1&l&&t._UZ(0,"tr",44)}function Bi(l,p){if(1&l&&(t.TgZ(0,"tr",45),t.TgZ(1,"td",46),t._uU(2),t.qZA(),t.qZA()),2&l){t.oxw();var d=t.MAs(74);t.xp6(2),t.hij(' No data matching the filter "',d.value,'" ')}}var Ri=function(p){return{functionId:p}},Gi=function(){return[10]},Vi=function(){var l=function(){function p(d,c,m,_,U,V){var ee=this;(0,j.Z)(this,p),this.route=d,this.spinner=c,this.fb=m,this.reservationServ=_,this.toaster=U,this.authservice=V,this.submitted=!1,this.userName="",this.displayedColumns=["#","name","code","status","reason","group","from","to","note"],this.route.paramMap.subscribe(function(me){ee.reservationId=Number(me.get("reservationId"))}),d.queryParamMap.subscribe(function(me){ee.functionId=Number(me.get("functionId"))})}return(0,Y.Z)(p,[{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"Id",get:function(){return this.myForm.get("EduCompUser_Status.Id")}},{key:"statusId",get:function(){return this.myForm.get("EduCompUser_Status.statusId")}},{key:"groupId",get:function(){return this.myForm.get("EduCompUser_Status.groupId")}},{key:"note",get:function(){return this.myForm.get("EduCompUser_Status.note")}},{key:"EduCompUserId",get:function(){return this.myForm.get("EduCompUser_Status.EduCompUserId")}},{key:"statusReasonId",get:function(){return this.myForm.get("EduCompUser_Status.statusReasonId")}},{key:"CenterBranchId",get:function(){return this.myForm.get("EduCompUser_Status.CenterBranchId")}},{key:"ngOnInit",value:function(){var c,m;this.EduCompId=this.authservice.getEduCompId(),this.branchId=this.authservice.getBranchId(),this.getStudentStatus(this.reservationId,this.EduCompId),this.returnBranchesByEduCompId(),this.myForm=this.fb.group({EduCompUser_Status:this.fb.group({Id:["",Z.kI.required],statusId:["",Z.kI.required],groupId:[""],note:[""],EduCompUserId:[""],statusReasonId:[""],CenterBranchId:[""]}),studentUserId:["",Z.kI.required],Code:[""],reserveId:[""],EduCompId:[""],AcceptReservation:[""]}),null===(c=this.FormCtrls.AcceptReservation)||void 0===c||c.setValue(this.AcceptReservation),null===(m=this.FormCtrls.EduCompId)||void 0===m||m.setValue(this.EduCompId)}},{key:"ngAfterViewInit",value:function(){var c=this;this.authservice.EduCompId.subscribe(function(m){c.EduCompId=m.EduCompId,c.getStudentStatus(c.reservationId,m.EduCompId),c.EduCompUserId.setValue(m.EduCompId)}),this.authservice.branchId.subscribe(function(m){c.branchId=m.branchId,c.CenterBranchId.setValue(m.branchId)}),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"applyFilter",value:function(c){this.dataSource.filter=c.target.value.trim().toLowerCase()}},{key:"getStudentStatus",value:function(c,m){var _=this;this.spinner.show(),this.reservationServ.GetStudentStatus(c,m).subscribe(function(U){var V;_.getReasonsByStatusId(U.EduCompUser_Status.statusId),_.statuses=U.statuses,_.studyingGroups=U.studyingGroups,_.myForm.patchValue(U),_.FormCtrls.studentUserId.setValue(U.studentUserId),_.userName=U.userName,null===(V=_.FormCtrls.AcceptReservation)||void 0===V||V.setValue(_.AcceptReservation),_.ReservationStatusPaging(1),_.spinner.hide()})}},{key:"SubmitReservationStatus",value:function(c){var _,m=this;this.CenterBranchId.setValue(this.branchId),(null===(_=this.CenterBranchId)||void 0===_?void 0:_.value)?this.myForm.valid&&(c.target.disabled=!0,this.spinner.show(),this.reservationServ.SubmitReservationStatus(this.myForm.value).subscribe(function(U){c.target.disabled=!1,200==U.returnValue&&"Success"==U.returnString?(m.toaster.success("\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u062a\u063a\u064a\u0631\u0627\u062a \u0628\u0646\u062c\u0627\u062d"),m.ReservationStatusPaging(1),m.getStudentStatus(m.reservationId,m.EduCompId)):m.toaster.error(U.returnString,U.returnValue),m.spinner.hide()})):this.toaster.warning("\u064a\u062c\u0628 \u0627\u062e\u062a\u064a\u0627\u0631 \u0641\u0631\u0639")}},{key:"ReservationStatusPaging",value:function(c){var _,m=this;this.spinner.show(),this.reservationServ.ReservationStatusPaging(c,null===(_=this.EduCompUserId)||void 0===_?void 0:_.value).subscribe(function(U){m.dataSource=new J.by(U.list),m.itemsCount=U.itemsCount,m.spinner.hide()})}},{key:"getReasonsByStatusId",value:function(c){var _,m=this;this.Reasons=[],null===(_=this.statusReasonId)||void 0===_||_.setValue(""),c&&this.reservationServ.getReasonsByStatusId(c).subscribe(function(U){m.Reasons=U})}},{key:"returnBranchesByEduCompId",value:function(){var c=this;this.CenterBranches=[],this.reservationServ.returnBranchesByEduCompId(this.EduCompId).subscribe(function(m){c.CenterBranches=m})}}]),p}();return l.\u0275fac=function(d){return new(d||l)(t.Y36(e.gz),t.Y36(u.t2),t.Y36(Z.qu),t.Y36(ae.D),t.Y36(W._W),t.Y36(C.e))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-reservation-status"]],viewQuery:function(d,c){var m;1&d&&(t.Gf(Ye.NW,5),t.Gf(be.YE,5)),2&d&&(t.iGM(m=t.CRH())&&(c.paginator=m.first),t.iGM(m=t.CRH())&&(c.sort=m.first))},decls:108,vars:55,consts:[[1,"row"],[1,"col-12"],[1,"content-header"],[1,"example-card"],["mat-raised-button","","routerLink","/dashboard/reservation/index",1,"btn","btn-warning","bg-light-warning","float-right",3,"queryParams"],[1,"container-fluid",3,"formGroup"],[1,"col-md-4","col-12"],["appearance","legacy"],["matInput","","type","text","readonly","",3,"value"],["matInput","","type","Code","formControlName","Code"],["formGroupName","EduCompUser_Status"],["formControlName","statusId",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","groupId"],["class","col-md-4 col-12",4,"ngIf"],[1,"col-8"],["matInput","","type","text","formControlName","note"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","code"],["matColumnDef","status"],["matColumnDef","reason"],["matColumnDef","group"],["matColumnDef","from"],["matColumnDef","to"],["matColumnDef","note"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","page"],[3,"value"],["formControlName","statusReasonId"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(d,c){1&d&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",0),t.TgZ(7,"div",1),t.TgZ(8,"mat-card",3),t.TgZ(9,"mat-card-title"),t._uU(10),t.ALo(11,"translate"),t.TgZ(12,"button",4),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.qZA(),t.TgZ(15,"mat-card-content"),t.TgZ(16,"form",5),t.TgZ(17,"div",0),t.TgZ(18,"div",6),t.TgZ(19,"mat-form-field",7),t.TgZ(20,"mat-label"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t._UZ(23,"input",8),t.qZA(),t.qZA(),t.TgZ(24,"div",6),t.TgZ(25,"mat-form-field",7),t.TgZ(26,"mat-label"),t._uU(27),t.ALo(28,"translate"),t.qZA(),t._UZ(29,"input",9),t.qZA(),t.qZA(),t.ynx(30,10),t.TgZ(31,"div",6),t.TgZ(32,"mat-form-field",7),t.TgZ(33,"mat-label"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"mat-select",11),t.NdJ("selectionChange",function(){return c.getReasonsByStatusId(null==c.statusId?null:c.statusId.value)}),t.TgZ(37,"mat-option"),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.YNc(40,Ci,2,2,"mat-option",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"div",6),t.TgZ(42,"mat-form-field",7),t.TgZ(43,"mat-label"),t._uU(44),t.ALo(45,"translate"),t.qZA(),t.TgZ(46,"mat-select",13),t.TgZ(47,"mat-option"),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.YNc(50,bi,2,2,"mat-option",12),t.qZA(),t.qZA(),t.qZA(),t.YNc(51,Ti,10,7,"div",14),t.TgZ(52,"div",15),t.TgZ(53,"mat-form-field",7),t.TgZ(54,"mat-label"),t._uU(55),t.ALo(56,"translate"),t.qZA(),t.TgZ(57,"textarea",16),t._uU(58,"                  "),t.qZA(),t.qZA(),t.qZA(),t.BQk(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(59,"mat-card-actions",17),t.TgZ(60,"button",18),t.NdJ("click",function(_){return c.SubmitReservationStatus(_)}),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(63,"div",0),t.TgZ(64,"div",1),t.TgZ(65,"mat-card"),t.TgZ(66,"mat-card-title"),t._uU(67),t.ALo(68,"translate"),t.qZA(),t.TgZ(69,"mat-card-content"),t.TgZ(70,"mat-form-field",19),t.TgZ(71,"mat-label"),t._uU(72,"Filter"),t.qZA(),t.TgZ(73,"input",20,21),t.NdJ("keyup",function(_){return c.applyFilter(_)}),t.qZA(),t.qZA(),t.TgZ(75,"div",22),t.TgZ(76,"table",23),t.ynx(77,24),t.YNc(78,xi,2,0,"th",25),t.YNc(79,Ii,2,1,"td",26),t.BQk(),t.ynx(80,27),t.YNc(81,yi,3,3,"th",25),t.YNc(82,qi,2,1,"td",26),t.BQk(),t.ynx(83,28),t.YNc(84,Fi,3,3,"th",25),t.YNc(85,wi,2,1,"td",26),t.BQk(),t.ynx(86,29),t.YNc(87,Si,3,3,"th",25),t.YNc(88,Ui,2,1,"td",26),t.BQk(),t.ynx(89,30),t.YNc(90,ki,3,3,"th",25),t.YNc(91,Ei,2,1,"td",26),t.BQk(),t.ynx(92,31),t.YNc(93,Di,3,3,"th",25),t.YNc(94,Ni,2,1,"td",26),t.BQk(),t.ynx(95,32),t.YNc(96,Mi,3,3,"th",25),t.YNc(97,Qi,4,6,"td",26),t.BQk(),t.ynx(98,33),t.YNc(99,Ji,3,3,"th",25),t.YNc(100,Oi,4,6,"td",26),t.BQk(),t.ynx(101,34),t.YNc(102,Li,3,3,"th",25),t.YNc(103,Pi,2,1,"td",26),t.BQk(),t.YNc(104,Yi,1,0,"tr",35),t.YNc(105,ji,1,0,"tr",36),t.YNc(106,Bi,3,1,"tr",37),t.qZA(),t.TgZ(107,"mat-paginator",38),t.NdJ("page",function(_){return c.ReservationStatusPaging(_.pageIndex+1)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&d&&(t.xp6(3),t.lnq(" ",t.lcZ(4,26,"Navbar.ReservationList")," - ",t.lcZ(5,28,"labels.StudentStatusEdit")," - ",c.userName," "),t.xp6(7),t.hij(" ",t.lcZ(11,30,"labels.StudentStatusEdit")," "),t.xp6(2),t.Q6J("queryParams",t.VKq(52,Ri,c.functionId)),t.xp6(1),t.hij(" ",t.lcZ(14,32,"General.Back")," "),t.xp6(3),t.Q6J("formGroup",c.myForm),t.xp6(5),t.hij(" ",t.lcZ(22,34,"labels.Name")," "),t.xp6(2),t.Q6J("value",c.userName),t.xp6(4),t.hij(" ",t.lcZ(28,36,"labels.CenterCode")," "),t.xp6(7),t.hij("",t.lcZ(35,38,"labels.Status")," "),t.xp6(4),t.hij(" ",t.lcZ(39,40,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",c.statuses),t.xp6(4),t.hij("",t.lcZ(45,42,"labels.Group")," "),t.xp6(4),t.hij(" ",t.lcZ(49,44,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",c.studyingGroups),t.xp6(1),t.Q6J("ngIf",2==(null==c.statusId?null:c.statusId.value)||4==(null==c.statusId?null:c.statusId.value)||5==(null==c.statusId?null:c.statusId.value)),t.xp6(4),t.hij(" ",t.lcZ(56,46,"labels.Notes")," "),t.xp6(6),t.hij(" ",t.lcZ(62,48,"General.Update")," "),t.xp6(6),t.hij(" ",t.lcZ(68,50,"labels.StudentStatus")," "),t.xp6(9),t.Q6J("dataSource",c.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",c.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",c.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(54,Gi))("length",c.itemsCount)("pageSize",10))},directives:[E.a8,E.n5,ce.lW,e.rH,E.dn,Z._Y,Z.JL,Z.sg,k.KE,k.hX,K.Nt,Z.Fj,Z.JJ,Z.u,Z.x0,Ie.gD,pe.ey,f.sg,f.O5,E.hq,J.BZ,be.YE,J.w1,J.fO,J.Dz,J.as,J.nj,J.Ee,Ye.NW,J.ge,be.nU,J.ev,J.XQ,J.Gk],pipes:[se.X$,$t.H,Zi._],styles:[""]}),l}(),Hi=h(6489);function Wi(l,p){if(1&l&&(t.TgZ(0,"mat-option",19),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.Q6J("value",null==d?null:d.Id),t.xp6(1),t.hij(" ",d.PreviewName," ")}}function zi(l,p){1&l&&(t.TgZ(0,"th",36),t._uU(1,"#"),t.qZA())}function $i(l,p){if(1&l&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&l){var d=p.index;t.xp6(1),t.Oqu(d+1)}}function Ki(l,p){1&l&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Name")," "))}function Un(l,p){if(1&l&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.hij(" ",null==d||null==d.UserDetails?null:d.UserDetails.ar_name," ")}}function Xi(l,p){1&l&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Discount")," "))}function ea(l,p){if(1&l&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.AsE(" ",null==d||null==d.CustomDiscountDetails?null:d.CustomDiscountDetails.Ar_Name," - ",null==d||null==d.CustomDiscountDetails?null:d.CustomDiscountDetails.Amount," % ")}}function ta(l,p){1&l&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.teacher")," "))}function na(l,p){if(1&l&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(null==d?null:d.Teacher)}}function ia(l,p){1&l&&(t.TgZ(0,"th",36),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Notes")," "))}function aa(l,p){if(1&l&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(null==d?null:d.note)}}function oa(l,p){1&l&&t._UZ(0,"tr",38)}function ra(l,p){1&l&&t._UZ(0,"tr",39)}function la(l,p){if(1&l&&(t.TgZ(0,"tr",40),t.TgZ(1,"td",41),t._uU(2),t.qZA(),t.qZA()),2&l){t.oxw();var d=t.MAs(11);t.xp6(2),t.hij(' No data matching the filter "',d.value,'" ')}}var sa=function(){return[5,10,20]};function ua(l,p){if(1&l){var d=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-card"),t.TgZ(3,"mat-card-title"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"mat-card-content"),t.TgZ(7,"mat-form-field",20),t.TgZ(8,"mat-label"),t._uU(9,"Filter"),t.qZA(),t.TgZ(10,"input",21,22),t.NdJ("keyup",function(_){return t.CHM(d),t.oxw().applyFilter(_)}),t.qZA(),t.qZA(),t.TgZ(12,"div",23),t.TgZ(13,"table",24),t.ynx(14,25),t.YNc(15,zi,2,0,"th",26),t.YNc(16,$i,2,1,"td",27),t.BQk(),t.ynx(17,28),t.YNc(18,Ki,3,3,"th",26),t.YNc(19,Un,2,1,"td",27),t.BQk(),t.ynx(20,29),t.YNc(21,Xi,3,3,"th",26),t.YNc(22,ea,2,2,"td",27),t.BQk(),t.ynx(23,30),t.YNc(24,ta,3,3,"th",26),t.YNc(25,na,2,1,"td",27),t.BQk(),t.ynx(26,31),t.YNc(27,ia,3,3,"th",26),t.YNc(28,aa,2,1,"td",27),t.BQk(),t.YNc(29,oa,1,0,"tr",32),t.YNc(30,ra,1,0,"tr",33),t.YNc(31,la,3,1,"tr",34),t.qZA(),t.TgZ(32,"mat-paginator",35),t._uU(33,"> "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&l){var c=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,6,"labels.Discount")," "),t.xp6(9),t.Q6J("dataSource",c.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",c.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",c.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(8,sa))("pageSize",10)}}var da=function(){var l=function(){function p(d,c,m,_,U,V,ee){var me=this;(0,j.Z)(this,p),this.fb=d,this.reservationServ=c,this.toaster=m,this.route=_,this.authservice=U,this.ManageViewsService=V,this.spinner=ee,this.userName=" ",this.displayedColumns=["#","name","discount","teacher","note"],_.queryParamMap.subscribe(function(xe){me.functionId=Number(xe.get("functionId"))})}return(0,Y.Z)(p,[{key:"ngOnInit",value:function(){this.EduCompId=this.authservice.getEduCompId(),this.getCustomDiscount(),this.searchForm=this.fb.group({sentCode:[""],sentCenterCode:[""],sentMobile:[""],sentEmail:[""],InCenter:[!0]}),this.myForm=this.fb.group({userId:[this.userId,Z.kI.required],customDiscountId:["",Z.kI.required],note:[""]})}},{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"ngAfterViewInit",value:function(){var c=this;this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.authservice.EduCompId.subscribe(function(m){c.EduCompId=m.EduCompId,c.getCustomDiscount()})}},{key:"applyFilter",value:function(c){this.dataSource.filter=c.target.value.trim().toLowerCase()}},{key:"searchStudent",value:function(){var c=this;this.spinner.show(),this.ManageViewsService.searchStudent(this.EduCompId,this.searchForm.value).subscribe(function(m){1==m.returnValue&&(c.userId=m.userId,c.getStudentCustomDiscount(),c.getStudentCustomDiscountsList()),c.spinner.hide()})}},{key:"updateStudentCustomDiscount",value:function(){var c=this;this.myForm.valid&&(this.spinner.show(),this.reservationServ.updateStudentCustomDiscount(this.myForm.value).subscribe(function(m){c.getStudentCustomDiscountsList(),c.toaster.success("\u062a\u0645 \u0627\u0644\u062a\u063a\u064a\u064a\u0631"),c.spinner.hide()}))}},{key:"getStudentCustomDiscount",value:function(){var c=this;this.spinner.show(),this.reservationServ.getStudentCustomDiscount(this.userId).subscribe(function(m){var _;console.log("getStudentCustomDiscount",m),null!=m?(c.userName=m.User.ar_name,c.FormCtrls.userId.setValue(m.User.user_ID),c.FormCtrls.customDiscountId.setValue((null===(_=m.Discount)||void 0===_?void 0:_.Id)||""),c.FormCtrls.note.setValue(m.note)):(c.toaster.warning("Student not found"),c.userName="",c.myForm.reset()),c.spinner.hide()})}},{key:"getStudentCustomDiscountsList",value:function(){var c=this;this.spinner.show(),this.reservationServ.getStudentCustomDiscountsList(this.userId).subscribe(function(m){c.dataSource=new J.by(m),c.dataSource.paginator=c.paginator,c.spinner.hide()})}},{key:"getCustomDiscount",value:function(){var c=this;this.reservationServ.getCustomDiscount(this.EduCompId).subscribe(function(m){c.CustomDiscountList=m})}}]),p}();return l.\u0275fac=function(d){return new(d||l)(t.Y36(Z.qu),t.Y36(ae.D),t.Y36(W._W),t.Y36(e.gz),t.Y36(C.e),t.Y36(Hi.N),t.Y36(u.t2))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-student-discount"]],viewQuery:function(d,c){var m;1&d&&(t.Gf(Ye.NW,5),t.Gf(be.YE,5)),2&d&&(t.iGM(m=t.CRH())&&(c.paginator=m.first),t.iGM(m=t.CRH())&&(c.sort=m.first))},decls:80,vars:48,consts:[[1,"row"],[1,"col-12"],[1,"content-header"],[1,"container-fluid",3,"formGroup"],[1,"row","f-w"],[1,"col-md-6","col-12"],["appearance","legacy"],["matInput","","type","text","formControlName","sentCenterCode"],["matInput","","type","email","formControlName","sentEmail"],["matInput","","type","text","formControlName","sentMobile"],["matInput","","type","text","formControlName","sentCode"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],[1,"example-card"],["matInput","","type","text","readonly","",3,"value"],["formControlName","customDiscountId"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","note"],["class","row",4,"ngIf"],[3,"value"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","discount"],["matColumnDef","teacher"],["matColumnDef","note"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(d,c){1&d&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3),t.ALo(4,"translate"),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",0),t.TgZ(7,"div",1),t.TgZ(8,"mat-card"),t.TgZ(9,"mat-card-title"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"mat-card-content"),t.TgZ(13,"form",3),t.TgZ(14,"div",4),t.TgZ(15,"div",5),t.TgZ(16,"mat-form-field",6),t.TgZ(17,"mat-label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"input",7),t.qZA(),t.qZA(),t.TgZ(21,"div",5),t.TgZ(22,"mat-form-field",6),t.TgZ(23,"mat-label"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t._UZ(26,"input",8),t.qZA(),t.qZA(),t.TgZ(27,"div",5),t.TgZ(28,"mat-form-field",6),t.TgZ(29,"mat-label"),t._uU(30),t.ALo(31,"translate"),t.qZA(),t._UZ(32,"input",9),t.qZA(),t.qZA(),t.TgZ(33,"div",5),t.TgZ(34,"mat-form-field",6),t.TgZ(35,"mat-label"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t._UZ(38,"input",10),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(39,"mat-card-actions",11),t.TgZ(40,"button",12),t.NdJ("click",function(){return c.searchStudent()}),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(43,"div",0),t.TgZ(44,"div",1),t.TgZ(45,"mat-card",13),t.TgZ(46,"mat-card-title"),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"mat-card-content"),t.TgZ(50,"form",3),t.TgZ(51,"div",0),t.TgZ(52,"div",5),t.TgZ(53,"mat-form-field",6),t.TgZ(54,"mat-label"),t._uU(55),t.ALo(56,"translate"),t.qZA(),t._UZ(57,"input",14),t.qZA(),t.qZA(),t.TgZ(58,"div",5),t.TgZ(59,"mat-form-field",6),t.TgZ(60,"mat-label"),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.TgZ(63,"mat-select",15),t.TgZ(64,"mat-option"),t._uU(65),t.ALo(66,"translate"),t.qZA(),t.YNc(67,Wi,2,2,"mat-option",16),t.qZA(),t.qZA(),t.qZA(),t.TgZ(68,"div",1),t.TgZ(69,"mat-form-field",6),t.TgZ(70,"mat-label"),t._uU(71),t.ALo(72,"translate"),t.qZA(),t.TgZ(73,"textarea",17),t._uU(74,"                "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(75,"mat-card-actions",11),t.TgZ(76,"button",12),t.NdJ("click",function(){return c.updateStudentCustomDiscount()}),t._uU(77),t.ALo(78,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(79,ua,34,9,"div",18)),2&d&&(t.xp6(3),t.lnq(" ",t.lcZ(4,20,"Navbar.ReservationList")," - ",t.lcZ(5,22,"labels.UpdateDiscount")," - ",c.userName," "),t.xp6(7),t.hij(" ",t.lcZ(11,24,"labels.SearchStudent")," "),t.xp6(3),t.Q6J("formGroup",c.searchForm),t.xp6(5),t.Oqu(t.lcZ(19,26,"labels.CenterCode")),t.xp6(6),t.Oqu(t.lcZ(25,28,"labels.Email")),t.xp6(6),t.Oqu(t.lcZ(31,30,"labels.Mobile")),t.xp6(6),t.Oqu(t.lcZ(37,32,"labels.Code")),t.xp6(5),t.hij(" ",t.lcZ(42,34,"General.Search")," "),t.xp6(6),t.hij(" ",t.lcZ(48,36,"labels.UpdateDiscount")," "),t.xp6(3),t.Q6J("formGroup",c.myForm),t.xp6(5),t.hij(" ",t.lcZ(56,38,"labels.Name")," "),t.xp6(2),t.Q6J("value",c.userName),t.xp6(4),t.hij("",t.lcZ(62,40,"labels.DiscountType")," "),t.xp6(4),t.hij(" ",t.lcZ(66,42,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",c.CustomDiscountList),t.xp6(4),t.hij(" ",t.lcZ(72,44,"labels.Notes")," "),t.xp6(6),t.hij(" ",t.lcZ(78,46,"General.Update")," "),t.xp6(2),t.Q6J("ngIf",(null==c.dataSource||null==c.dataSource.data?null:c.dataSource.data.length)>0))},directives:[E.a8,E.n5,E.dn,Z._Y,Z.JL,Z.sg,k.KE,k.hX,K.Nt,Z.Fj,Z.JJ,Z.u,E.hq,ce.lW,Ie.gD,pe.ey,f.sg,f.O5,J.BZ,be.YE,J.w1,J.fO,J.Dz,J.as,J.nj,J.Ee,Ye.NW,J.ge,be.nU,J.ev,J.XQ,J.Gk],pipes:[se.X$],styles:[""]}),l}(),ca=h(4759);function ma(l,p){if(1&l&&(t.TgZ(0,"mat-option",33),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.Q6J("value",d.Id),t.xp6(1),t.hij(" ",d.groupName," ")}}function pa(l,p){if(1&l&&(t.TgZ(0,"mat-option",33),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.Q6J("value",d.Id),t.xp6(1),t.hij(" ",d.Ar_Name," ")}}function ga(l,p){1&l&&(t.TgZ(0,"th",34),t._uU(1,"#"),t.qZA())}function ha(l,p){if(1&l&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&l){var d=p.index;t.xp6(1),t.Oqu(d+1)}}function _a(l,p){1&l&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Name")," "))}function Ln(l,p){if(1&l&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(d.ar_name)}}function kn(l,p){1&l&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Email")," "))}function fa(l,p){if(1&l&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(d.account_email)}}function va(l,p){1&l&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Mobile")," "))}function Za(l,p){if(1&l&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(d.mobile)}}function Pn(l,p){1&l&&(t.TgZ(0,"th",34),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Code")," "))}function Ca(l,p){if(1&l&&(t.TgZ(0,"td",35),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(d.code)}}function ba(l,p){1&l&&(t.TgZ(0,"th",34),t._uU(1,"actions"),t.qZA())}function Aa(l,p){1&l&&t.GkF(0)}var Xt=function(p){return{functionId:p}};function Ta(l,p){if(1&l&&(t.TgZ(0,"td",35),t.TgZ(1,"a",36),t._UZ(2,"i",37),t.qZA(),t.YNc(3,Aa,1,0,"ng-container",38),t.qZA()),2&l){var d=p.$implicit,c=t.oxw();t.xp6(1),t.MGl("routerLink","/dashboard/reservation/balance-details/",null==d?null:d.user_ID,""),t.Q6J("queryParams",t.VKq(3,Xt,c.functionId)),t.xp6(2),t.Q6J("ngForOf",c.rowFunctions)}}function xa(l,p){1&l&&t._UZ(0,"tr",39)}function Ia(l,p){1&l&&t._UZ(0,"tr",40)}function ya(l,p){if(1&l&&(t.TgZ(0,"tr",41),t.TgZ(1,"td",42),t._uU(2),t.qZA(),t.qZA()),2&l){t.oxw();var d=t.MAs(71);t.xp6(2),t.hij(' No data matching the filter "',d.value,'" ')}}var qa=function(){return[10]},Fa=function(){var l=function(){function p(d,c,m,_,U,V,ee){(0,j.Z)(this,p),this.fb=d,this.toastr=c,this.route=m,this.SearchStudentsService=_,this.SubjectMaterialsService=U,this.authserv=V,this.spinner=ee,this.groups=[],this.Statuts=[],this.students=[],this.displayedColumns=["#","email","mobile","name","code","actions"],this.p=1,this.maxSize=9,this.userId=null}return(0,Y.Z)(p,[{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.myForm=this.fb.group({queryStringEm:["",Z.kI.email],queryStringCo:[""],queryStringPhoneNumber:[""],queryStringMozakretyCode:[""],statusId:[""],studyingGroup:[""],page:[""]}),this.getStudentsByEduCompId(1),this.getStudentGroupsAndStatuts()}},{key:"getStudentsByEduCompId",value:function(c){var _,m=this;null===(_=this.myForm.controls.page)||void 0===_||_.setValue(c),this.p=c,this.spinner.show(),this.SearchStudentsService.getStudentsByEduCompId(this.EduCompId,this.myForm.value).subscribe(function(U){console.log("getStudents",U),m.students=U.lists,console.log("hello",U.lists),m.dataSource=new J.by(U.lists),m.itemsCount=U.totalCount,m.spinner.hide()})}},{key:"getStudentGroupsAndStatuts",value:function(){var c=this;this.spinner.show(),this.SearchStudentsService.getStudentGroupsAndStatuts(this.EduCompId).subscribe(function(m){c.groups=m.studyingGroups,c.Statuts=m.status,c.spinner.hide()})}},{key:"applyFilter",value:function(c){this.dataSource.filter=c.target.value.trim().toLowerCase()}},{key:"ngAfterViewInit",value:function(){var c=this;this.authserv.EduCompId.subscribe(function(m){c.EduCompId=m.EduCompId,c.getStudentGroupsAndStatuts()}),this.authserv.branchId.subscribe(function(m){c.getStudentsByEduCompId(1)}),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"deleteStudent",value:function(c){var m=this;confirm("Are you sure?")&&(this.spinner.show(),this.SearchStudentsService.deleteStudent(this.EduCompId,c).subscribe(function(U){if(console.log("deleteStudent",U),1==U.returnValue){var V=m.students.findIndex(function(ee){return ee.user_ID==c});console.log(V),m.students.splice(V,1),m.toastr.success("\u062a\u0645 \u0627\u0644\u062d\u0630\u0641")}else console.log("Error:",U);m.spinner.hide()}))}},{key:"getUserId",value:function(c){this.userId=c}}]),p}();return l.\u0275fac=function(d){return new(d||l)(t.Y36(Z.qu),t.Y36(W._W),t.Y36(e.gz),t.Y36(ca.I),t.Y36(Pt.r),t.Y36(C.e),t.Y36(u.t2))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-students-index"]],viewQuery:function(d,c){var m;1&d&&(t.Gf(Ye.NW,5),t.Gf(be.YE,5)),2&d&&(t.iGM(m=t.CRH())&&(c.paginator=m.first),t.iGM(m=t.CRH())&&(c.sort=m.first))},decls:96,vars:43,consts:[[1,"row"],[1,"col-12"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-4","col-12"],["appearance","legacy"],["matInput","","type","text","formControlName","queryStringEm"],["matInput","","type","text","formControlName","queryStringPhoneNumber"],["matInput","","type","code","formControlName","queryStringMozakretyCode"],["matInput","","type","code","formControlName","queryStringCo"],["formControlName","groupId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","statusId"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],["addBtn",""],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","email"],["matColumnDef","mobile"],["matColumnDef","code"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","page"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["matTooltip","\u0631\u0635\u064a\u062f \u0627\u0644\u0637\u0627\u0644\u0628 ",1,"success","p-0",3,"routerLink","queryParams"],[1,"fa","fa-money","font-medium-3","mr-2"],[4,"ngFor","ngForOf"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(d,c){1&d&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-card"),t.TgZ(3,"mat-card-title"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"mat-card-content",2),t.TgZ(7,"div",0),t.TgZ(8,"div",1),t.TgZ(9,"form",3),t.TgZ(10,"div",0),t.TgZ(11,"div",4),t.TgZ(12,"mat-form-field",5),t.TgZ(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"input",6),t.qZA(),t.qZA(),t.TgZ(17,"div",4),t.TgZ(18,"mat-form-field",5),t.TgZ(19,"mat-label"),t._uU(20),t.ALo(21,"translate"),t.qZA(),t._UZ(22,"input",7),t.qZA(),t.qZA(),t.TgZ(23,"div",4),t.TgZ(24,"mat-form-field",5),t.TgZ(25,"mat-label"),t._uU(26),t.ALo(27,"translate"),t.qZA(),t._UZ(28,"input",8),t.qZA(),t.qZA(),t.TgZ(29,"div",4),t.TgZ(30,"mat-form-field",5),t.TgZ(31,"mat-label"),t._uU(32),t.ALo(33,"translate"),t.qZA(),t._UZ(34,"input",9),t.qZA(),t.qZA(),t.TgZ(35,"div",4),t.TgZ(36,"mat-form-field",5),t.TgZ(37,"mat-label"),t._uU(38),t.ALo(39,"translate"),t.qZA(),t.TgZ(40,"mat-select",10),t.TgZ(41,"mat-option"),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.YNc(44,ma,2,2,"mat-option",11),t.qZA(),t.qZA(),t.qZA(),t.TgZ(45,"div",4),t.TgZ(46,"mat-form-field",5),t.TgZ(47,"mat-label"),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.TgZ(50,"mat-select",12),t.TgZ(51,"mat-option"),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.YNc(54,pa,2,2,"mat-option",11),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(55,"mat-card-actions",13),t.TgZ(56,"button",14,15),t.NdJ("click",function(){return c.getStudentsByEduCompId(1)}),t._uU(58),t.ALo(59,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(60,"div",0),t.TgZ(61,"div",1),t.TgZ(62,"mat-card"),t.TgZ(63,"mat-card-title"),t._uU(64),t.ALo(65,"translate"),t.qZA(),t.TgZ(66,"mat-card-content"),t.TgZ(67,"mat-form-field",16),t.TgZ(68,"mat-label"),t._uU(69,"Filter"),t.qZA(),t.TgZ(70,"input",17,18),t.NdJ("keyup",function(_){return c.applyFilter(_)}),t.qZA(),t.qZA(),t.TgZ(72,"div",19),t.TgZ(73,"table",20),t.ynx(74,21),t.YNc(75,ga,2,0,"th",22),t.YNc(76,ha,2,1,"td",23),t.BQk(),t.ynx(77,24),t.YNc(78,_a,3,3,"th",22),t.YNc(79,Ln,2,1,"td",23),t.BQk(),t.ynx(80,25),t.YNc(81,kn,3,3,"th",22),t.YNc(82,fa,2,1,"td",23),t.BQk(),t.ynx(83,26),t.YNc(84,va,3,3,"th",22),t.YNc(85,Za,2,1,"td",23),t.BQk(),t.ynx(86,27),t.YNc(87,Pn,3,3,"th",22),t.YNc(88,Ca,2,1,"td",23),t.BQk(),t.ynx(89,28),t.YNc(90,ba,2,0,"th",22),t.YNc(91,Ta,4,5,"td",23),t.BQk(),t.YNc(92,xa,1,0,"tr",29),t.YNc(93,Ia,1,0,"tr",30),t.YNc(94,ya,3,1,"tr",31),t.qZA(),t.TgZ(95,"mat-paginator",32),t.NdJ("page",function(_){return c.getStudentsByEduCompId(_.pageIndex+1)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&d&&(t.xp6(4),t.hij(" ",t.lcZ(5,20,"General.Search")," "),t.xp6(5),t.Q6J("formGroup",c.myForm),t.xp6(5),t.hij(" ",t.lcZ(15,22,"labels.Email")," "),t.xp6(6),t.hij(" ",t.lcZ(21,24,"labels.Mobile")," "),t.xp6(6),t.hij(" ",t.lcZ(27,26,"labels.MozakrtyCode")," "),t.xp6(6),t.hij(" ",t.lcZ(33,28,"labels.CenterCode")," "),t.xp6(6),t.hij("",t.lcZ(39,30,"labels.Group")," "),t.xp6(4),t.hij(" ",t.lcZ(43,32,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",c.groups),t.xp6(4),t.hij("",t.lcZ(49,34,"labels.Status")," "),t.xp6(4),t.hij(" ",t.lcZ(53,36,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",c.Statuts),t.xp6(4),t.hij(" ",t.lcZ(59,38,"General.Search")," "),t.xp6(6),t.hij(" ",t.lcZ(65,40,"Navbar.Students")," "),t.xp6(9),t.Q6J("dataSource",c.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",c.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",c.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(42,qa))("length",c.itemsCount)("pageSize",10))},directives:[E.a8,E.n5,E.dn,Z._Y,Z.JL,Z.sg,k.KE,k.hX,K.Nt,Z.Fj,Z.JJ,Z.u,Ie.gD,pe.ey,f.sg,E.hq,ce.lW,J.BZ,be.YE,J.w1,J.fO,J.Dz,J.as,J.nj,J.Ee,Ye.NW,J.ge,be.nU,J.ev,e.yS,Xe.gM,J.XQ,J.Gk],pipes:[se.X$],styles:[""]}),l}(),jt=h(1069),un=h(9430),_n=h(136),fn=h(7777),vn=h(8521),Zn=h(520),wa=function(){var l=function(p){(0,_n.Z)(c,p);var d=(0,fn.Z)(c);function c(m){var _;return(0,j.Z)(this,c),(_=d.call(this,m)).http=m,_.getAllBranchesURL="usermanagement/returnCenterBranchesByEduComp/",_.addEditBranchesURL="usermanagement/AddEditBranch",_.deleteBranchesURL="usermanagement/deleteBranch",_.getAllDistrictsURL="usermanagement/returnDistrictsList",_.getAllAllCenterBranchesURL="usermanagement/returnAllCenterBranches",_}return(0,Y.Z)(c,[{key:"getAllBranches",value:function(_){return this.get(this.getAllBranchesURL+"/"+_)}},{key:"getAllAllCenterBranches",value:function(_,U){return this.get(this.getAllAllCenterBranchesURL+"/"+_+"/"+U)}},{key:"addEditBranches",value:function(_){return this.post(this.addEditBranchesURL,_)}},{key:"deleteBranch",value:function(_){return this.delete(this.deleteBranchesURL+"/"+_)}},{key:"getAllDistricts",value:function(){return this.get(this.getAllDistrictsURL)}}]),c}(vn.K);return l.\u0275fac=function(d){return new(d||l)(t.LFG(Zn.eN))},l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l}(),En=h(8657),Yn=h(5471);function Sa(l,p){1&l&&t._UZ(0,"i",25)}function Ua(l,p){if(1&l){var d=t.EpF();t.TgZ(0,"button",26),t.NdJ("click",function(){return t.CHM(d),t.oxw().clearForm()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Reset")," "))}function ka(l,p){1&l&&(t.TgZ(0,"th",27),t._uU(1,"#"),t.qZA())}function Ea(l,p){if(1&l&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&l){var d=p.index;t.xp6(1),t.Oqu(d+1)}}function Da(l,p){1&l&&(t.TgZ(0,"th",29),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Name")," "))}function Na(l,p){if(1&l&&(t.TgZ(0,"td",28),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(d.Name)}}function jn(l,p){1&l&&t._UZ(0,"th",27)}function Ma(l,p){if(1&l){var d=t.EpF();t.TgZ(0,"a",33),t.NdJ("click",function(){t.CHM(d);var m=t.oxw(2).$implicit;return t.oxw().editBranch(m)}),t.ALo(1,"translate"),t._UZ(2,"i",34),t.qZA()}2&l&&t.s9C("matTooltip",t.lcZ(1,1,"General.Edit"))}function Qa(l,p){if(1&l){var d=t.EpF();t.TgZ(0,"a",35),t.NdJ("click",function(){t.CHM(d);var m=t.oxw(2).$implicit;return t.oxw().openDeleateDialog(m)}),t.ALo(1,"translate"),t._UZ(2,"i",36),t.qZA()}2&l&&t.s9C("matTooltip",t.lcZ(1,1,"General.Delete"))}function Ja(l,p){if(1&l&&(t.ynx(0),t.YNc(1,Ma,3,3,"a",31),t.YNc(2,Qa,3,3,"a",32),t.BQk()),2&l){var d=p.$implicit;t.xp6(1),t.Q6J("ngIf","Edit"===d.functionName),t.xp6(1),t.Q6J("ngIf","Delete"===d.functionName)}}function Oa(l,p){if(1&l&&(t.TgZ(0,"td",28),t.YNc(1,Ja,3,2,"ng-container",30),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngForOf",d.rowFunctions)}}function La(l,p){1&l&&t._UZ(0,"tr",37)}function Pa(l,p){1&l&&t._UZ(0,"tr",38)}function Bn(l,p){if(1&l&&(t.TgZ(0,"tr",39),t.TgZ(1,"td",40),t._uU(2),t.qZA(),t.qZA()),2&l){t.oxw();var d=t.MAs(32);t.xp6(2),t.hij(' No data matching the filter "',d.value,'" ')}}var Ya=function(){return[10]},ja=function(){var l=function(){function p(d,c,m,_,U,V,ee,me){var xe=this;(0,j.Z)(this,p),this.route=d,this.fb=c,this.authserv=m,this.msg=_,this.branchService=U,this.spinner=V,this.dialog=ee,this.languageService=me,this.submitted=!1,this.itemsCount=0,this.curPage=1,this.branches=[],this.displayedColumns=["#","Name","actions"],d.queryParamMap.subscribe(function(Ae){xe.functionId=Number(Ae.get("functionId")),xe.functionId&&xe.authserv.getUserRowFunctions(xe.functionId).subscribe(function(Me){Me&&(xe.rowFunctions=Me)})}),this.EduCompId=Number(m.getEduCompId())}return(0,Y.Z)(p,[{key:"ngOnInit",value:function(){this.myForm=this.fb.group({branchId:[0],branchName:["",[Z.kI.required,Q.D.whiteSpace]],districtId:[null]}),this.getAllBranches(this.curPage)}},{key:"ngAfterViewInit",value:function(){var c=this;this.authserv.EduCompId.subscribe(function(m){c.EduCompId=m.EduCompId,c.getAllBranches(1),c.dataSource.paginator=c.paginator}),this.dataSource&&(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)}},{key:"applyFilter",value:function(c){this.dataSource.filter=c.target.value.trim().toLowerCase()}},{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"getAllBranches",value:function(c){var m=this;this.spinner.show(),this.curPage=c,this.branchService.getAllAllCenterBranches(this.EduCompId,c).subscribe(function(_){_&&(m.branches=_.centerBrnachesList,m.dataSource=new J.by(_.centerBrnachesList),m.itemsCount=_.itemsCount,m.dataSource.sort=m.sort),m.spinner.hide()})}},{key:"editBranch",value:function(c){var m,_;null===(m=this.FormCtrls.branchId)||void 0===m||m.setValue(c.Id),null===(_=this.FormCtrls.branchName)||void 0===_||_.setValue(c.Name)}},{key:"removeBranch",value:function(c){var m=this;this.spinner.show(),this.branchService.deleteBranch(c.Id).subscribe(function(_){_?(m.msg.success("General.DeleteSuccessfully"),1==m.dataSource.data.length&&m.curPage>1?(m.getAllBranches(m.curPage-1),m.paginator.pageIndex=m.curPage-1):m.getAllBranches(m.curPage),c.Id==m.FormCtrls.branchId.value&&m.clearForm()):m.msg.error(_.returnString),m.spinner.hide()})}},{key:"onSubmit",value:function(){var m,_,U,c=this;if(this.submitted=!0,this.myForm.valid){this.spinner.show();var V={};V.Id=null===(m=this.FormCtrls.branchId)||void 0===m?void 0:m.value,V.Name=null===(_=this.FormCtrls.branchName)||void 0===_?void 0:_.value,V.districtId=null===(U=this.FormCtrls.districtId)||void 0===U?void 0:U.value,V.EduCompId=this.EduCompId,this.branchService.addEditBranches(V).subscribe(function(ee){ee&&200===ee.returnValue?(0==V.Id?(c.getAllBranches(1),c.dataSource.paginator=c.paginator):c.getAllBranches(c.curPage),c.msg.success(0==V.Id?"General.AddSuccessfully":"General.UpdateSuccessfully"),c.clearForm()):c.msg.error(null==ee?void 0:ee.returnString),c.spinner.hide()})}else this.msg.error("General.FormNotValid")}},{key:"openDeleateDialog",value:function(c){var m=this;this.dialog.open(jt.F,{data:{msg:c.Name,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(_){_&&m.removeBranch(c)})}},{key:"clearForm",value:function(){this.myForm.reset(),this.FormCtrls.branchId.setValue(0),this.submitted=!1}}]),p}();return l.\u0275fac=function(d){return new(d||l)(t.Y36(e.gz),t.Y36(Z.qu),t.Y36(C.e),t.Y36(un.K),t.Y36(wa),t.Y36(u.t2),t.Y36(je.uw),t.Y36(En.T))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-center-branches"]],viewQuery:function(d,c){var m;1&d&&(t.Gf(Ye.NW,5),t.Gf(be.YE,5)),2&d&&(t.iGM(m=t.CRH())&&(c.paginator=m.first),t.iGM(m=t.CRH())&&(c.sort=m.first))},decls:48,vars:23,consts:[[1,"row"],[1,"col-12"],[1,"container-fluid"],[3,"formGroup"],["label","labels.Name","autocomplete","new-password",3,"control","submitted"],["align","end"],["mat-raised-button","",1,"btn","btn-info","bg-light-info",3,"click"],["addBtn",""],["class","fa fa-plus mr-1",4,"ngIf"],["mat-raised-button","","class","btn btn-warning",3,"click",4,"ngIf"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","page"],[1,"fa","fa-plus","mr-1"],["mat-raised-button","",1,"btn","btn-warning",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],[4,"ngFor","ngForOf"],["class","success p-0",3,"matTooltip","click",4,"ngIf"],["class","danger p-0",3,"matTooltip","click",4,"ngIf"],[1,"success","p-0",3,"matTooltip","click"],[1,"ft-edit-2","font-medium-3","mr-2"],[1,"danger","p-0",3,"matTooltip","click"],[1,"ft-trash","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(d,c){1&d&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-card"),t.TgZ(3,"mat-card-title"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"mat-card-content",2),t.TgZ(7,"div",0),t.TgZ(8,"div",1),t.TgZ(9,"form",3),t.TgZ(10,"div",0),t.TgZ(11,"div",1),t._UZ(12,"app-input",4),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"mat-card-actions",5),t.TgZ(14,"button",6,7),t.NdJ("click",function(){return c.onSubmit()}),t.YNc(16,Sa,1,0,"i",8),t._uU(17),t.ALo(18,"translate"),t.qZA(),t.YNc(19,Ua,3,3,"button",9),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"div",0),t.TgZ(21,"div",1),t.TgZ(22,"mat-card"),t.TgZ(23,"mat-card-title"),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"mat-card-content"),t.TgZ(27,"mat-form-field",10),t.TgZ(28,"mat-label"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"input",11,12),t.NdJ("keyup",function(_){return c.applyFilter(_)}),t.qZA(),t.qZA(),t.TgZ(33,"div",13),t.TgZ(34,"table",14),t.ynx(35,15),t.YNc(36,ka,2,0,"th",16),t.YNc(37,Ea,2,1,"td",17),t.BQk(),t.ynx(38,18),t.YNc(39,Da,3,3,"th",19),t.YNc(40,Na,2,1,"td",17),t.BQk(),t.ynx(41,20),t.YNc(42,jn,1,0,"th",16),t.YNc(43,Oa,2,1,"td",17),t.BQk(),t.YNc(44,La,1,0,"tr",21),t.YNc(45,Pa,1,0,"tr",22),t.YNc(46,Bn,3,1,"tr",23),t.qZA(),t.TgZ(47,"mat-paginator",24),t.NdJ("page",function(_){return c.getAllBranches(_.pageIndex+1)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&d&&(t.xp6(4),t.hij(" ",t.lcZ(5,14,0==c.FormCtrls.branchId.value?"labels.CreateCenterBranch":"labels.UpdateCenterBranch")," "),t.xp6(5),t.Q6J("formGroup",c.myForm),t.xp6(3),t.Q6J("control",c.FormCtrls.branchName)("submitted",c.submitted),t.xp6(4),t.Q6J("ngIf",0==c.FormCtrls.branchId.value),t.xp6(1),t.hij(" ",t.lcZ(18,16,0==c.FormCtrls.branchId.value?"General.Add":"General.Update")," "),t.xp6(2),t.Q6J("ngIf",c.FormCtrls.branchId.value>0),t.xp6(5),t.hij(" ",t.lcZ(25,18,"Navbar.CenterBranches")," "),t.xp6(5),t.Oqu(t.lcZ(30,20,"General.Search")),t.xp6(5),t.Q6J("dataSource",c.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",c.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",c.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(22,Ya))("length",c.itemsCount))},directives:[E.a8,E.n5,E.dn,Z._Y,Z.JL,Z.sg,Yn.a,E.hq,ce.lW,f.O5,k.KE,k.hX,K.Nt,J.BZ,be.YE,J.w1,J.fO,J.Dz,J.as,J.nj,J.Ee,Ye.NW,J.ge,J.ev,be.nU,f.sg,Xe.gM,J.XQ,J.Gk],pipes:[se.X$],styles:[""]}),l}(),Cn=h(6666),Ba=function(){var l=function(p){(0,_n.Z)(c,p);var d=(0,fn.Z)(c);function c(m){var _;return(0,j.Z)(this,c),(_=d.call(this,m)).http=m,_.addEditFunctionURL="usermanagement/AddEditFunction",_.deleteFunctionURL="usermanagement/deleteFunction",_}return(0,Y.Z)(c,[{key:"addEditFunction",value:function(_){return this.post(this.addEditFunctionURL,_)}},{key:"deleteFunction",value:function(_){return this.delete(this.deleteFunctionURL+"/"+_)}}]),c}(vn.K);return l.\u0275fac=function(d){return new(d||l)(t.LFG(Zn.eN))},l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l}(),Ra=["addBtn"];function Ga(l,p){1&l&&(t.TgZ(0,"span"),t._UZ(1,"i",32),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&l&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"labels.mustEnterValue")," "))}function Va(l,p){if(1&l&&(t.TgZ(0,"mat-hint",30),t.YNc(1,Ga,4,3,"span",31),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==d.functionNameArCtrl.errors?null:d.functionNameArCtrl.errors.required)||(null==d.functionNameArCtrl.errors?null:d.functionNameArCtrl.errors.whiteSpace))}}function Ha(l,p){1&l&&(t.TgZ(0,"span"),t._UZ(1,"i",32),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&l&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"labels.mustEnterValue")," "))}function Wa(l,p){if(1&l&&(t.TgZ(0,"mat-hint",30),t.YNc(1,Ha,4,3,"span",31),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngIf",(null==d.functionNameEnCtrl.errors?null:d.functionNameEnCtrl.errors.required)||(null==d.functionNameEnCtrl.errors?null:d.functionNameEnCtrl.errors.whiteSpace))}}function za(l,p){1&l&&(t.TgZ(0,"th",33),t._uU(1,"#"),t.qZA())}function $a(l,p){if(1&l&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&l){var d=p.index;t.xp6(1),t.Oqu(d+1)}}function Ka(l,p){1&l&&(t.TgZ(0,"th",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.arName")," "))}function Xa(l,p){if(1&l&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(d.functionName)}}function eo(l,p){1&l&&(t.TgZ(0,"th",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.enName")," "))}function to(l,p){if(1&l&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(d.function_en_name)}}function Rn(l,p){1&l&&(t.TgZ(0,"th",33),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Link")," "))}function Dn(l,p){if(1&l&&(t.TgZ(0,"td",34),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(d.functionURL)}}function no(l,p){1&l&&t._UZ(0,"th",33)}function io(l,p){if(1&l){var d=t.EpF();t.TgZ(0,"a",38),t.NdJ("click",function(){t.CHM(d);var m=t.oxw(2).$implicit;return t.oxw().editFunction(m)}),t.ALo(1,"translate"),t._UZ(2,"i",39),t.qZA()}2&l&&t.s9C("matTooltip",t.lcZ(1,1,"General.Edit"))}function ao(l,p){if(1&l){var d=t.EpF();t.TgZ(0,"a",40),t.NdJ("click",function(){t.CHM(d);var m=t.oxw(2).$implicit;return t.oxw().openDeleateDialog(m)}),t.ALo(1,"translate"),t._UZ(2,"i",41),t.qZA()}2&l&&t.s9C("matTooltip",t.lcZ(1,1,"General.Delete"))}function oo(l,p){if(1&l&&(t.ynx(0),t.YNc(1,io,3,3,"a",36),t.YNc(2,ao,3,3,"a",37),t.BQk()),2&l){var d=p.$implicit;t.xp6(1),t.Q6J("ngIf","Update"===d.functionName),t.xp6(1),t.Q6J("ngIf","Delete"===d.functionName)}}function ro(l,p){if(1&l&&(t.TgZ(0,"td",34),t.YNc(1,oo,3,2,"ng-container",35),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngForOf",d.rowFunctions)}}function lo(l,p){1&l&&t._UZ(0,"tr",42)}function so(l,p){1&l&&t._UZ(0,"tr",43)}function uo(l,p){if(1&l&&(t.TgZ(0,"tr",44),t.TgZ(1,"td",45),t._uU(2),t.qZA(),t.qZA()),2&l){t.oxw();var d=t.MAs(48);t.xp6(2),t.hij(' No data matching the filter "',d.value,'" ')}}var co=function(){return[10]},mo=function(){var l=function(){function p(d,c,m,_,U,V,ee,me){var xe=this;(0,j.Z)(this,p),this.route=d,this.fb=c,this.authserv=m,this.msg=_,this.roleService=U,this.functionService=V,this.spinner=ee,this.dialog=me,this.submitted=!1,this.functions=[],this.displayedColumns=["#","arName","enName","link","actions"],d.queryParamMap.subscribe(function(Ae){xe.functionId=Number(Ae.get("functionId")),xe.functionId&&xe.authserv.getUserRowFunctions(xe.functionId).subscribe(function(Me){Me&&(xe.rowFunctions=Me)})})}return(0,Y.Z)(p,[{key:"functionIdCtrl",get:function(){return this.myForm.get("functionId")}},{key:"functionNameEnCtrl",get:function(){return this.myForm.get("functionNameEn")}},{key:"functionNameArCtrl",get:function(){return this.myForm.get("functionNameAr")}},{key:"linkCtrl",get:function(){return this.myForm.get("link")}},{key:"ngOnInit",value:function(){this.myForm=this.fb.group({functionId:[0],functionNameEn:["",[Z.kI.required,Q.D.whiteSpace]],functionNameAr:["",[Z.kI.required,Q.D.whiteSpace]],link:[null]}),this.getAllFunctions(1)}},{key:"ngAfterViewInit",value:function(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"applyFilter",value:function(c){this.dataSource.filter=c.target.value.trim().toLowerCase()}},{key:"getAllFunctions",value:function(c){var m=this;this.spinner.show(),this.roleService.getAllFunctions(c,!1).subscribe(function(_){_&&(console.log("functions: ",_),m.functions=_.functions,m.dataSource=new J.by(_.functions),m.itemsCount=_.itemsCount),m.spinner.hide()})}},{key:"editFunction",value:function(c){var m,_,U,V;null===(m=this.functionIdCtrl)||void 0===m||m.setValue(c.Id),null===(_=this.functionNameEnCtrl)||void 0===_||_.setValue(c.function_en_name),null===(U=this.functionNameArCtrl)||void 0===U||U.setValue(c.functionName),null===(V=this.linkCtrl)||void 0===V||V.setValue(c.functionURL),this.addBtn.nativeElement.innerText="update"}},{key:"removeFunction",value:function(c){var m=this;this.spinner.show(),this.functionService.deleteFunction(c.Id).subscribe(function(_){_&&(m.getAllFunctions(1),m.msg.success("\u062a\u0645 \u0645\u0633\u062d \u0627\u0644\u0648\u0638\u064a\u0641\u0647 \u0628\u0646\u062c\u0627\u062d")),m.spinner.hide()})}},{key:"onSubmit",value:function(){var m,_,U,V,c=this;if(this.submitted=!0,this.myForm.valid){this.spinner.show();var ee={};ee.Id=null===(m=this.functionIdCtrl)||void 0===m?void 0:m.value,ee.functionName=null===(_=this.functionNameArCtrl)||void 0===_?void 0:_.value,ee.function_en_name=null===(U=this.functionNameEnCtrl)||void 0===U?void 0:U.value,ee.functionURL=null===(V=this.linkCtrl)||void 0===V?void 0:V.value,this.functionService.addEditFunction(ee).subscribe(function(me){c.addBtn.nativeElement.innerText="Add",c.submitted=!1,me&&200===me.returnValue&&(c.getAllFunctions(1),c.msg.success("\u062a\u0645 \u0625\u0636\u0627\u0641\u0647/\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u0638\u064a\u0641\u0647 \u0628\u0646\u062c\u0627\u062d"),c.myForm.reset()),c.spinner.show()})}}},{key:"openDeleateDialog",value:function(c){var m=this;this.dialog.open(jt.F,{data:{msg:c.functionName,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(_){_&&m.removeFunction(c)})}}]),p}();return l.\u0275fac=function(d){return new(d||l)(t.Y36(e.gz),t.Y36(Z.qu),t.Y36(C.e),t.Y36(W._W),t.Y36(Cn.f),t.Y36(Ba),t.Y36(u.t2),t.Y36(je.uw))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-functions-setup"]],viewQuery:function(d,c){var m;1&d&&(t.Gf(Ye.NW,5),t.Gf(be.YE,5),t.Gf(Ra,5,t.SBq)),2&d&&(t.iGM(m=t.CRH())&&(c.paginator=m.first),t.iGM(m=t.CRH())&&(c.sort=m.first),t.iGM(m=t.CRH())&&(c.addBtn=m.first))},decls:70,vars:27,consts:[[1,"row"],[1,"col-12"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-4","col-12"],["appearance","legacy"],["matInput","","type","text","formControlName","functionNameAr","autocomplete","new-password"],["class","text-danger",4,"ngIf"],["matInput","","type","text","formControlName","functionNameEn","autocomplete","new-password"],["matInput","","type","text","formControlName","link","autocomplete","new-password"],["align","end"],["mat-raised-button","",1,"btn","btn-primary","bg-light-info",3,"click"],["addBtn",""],[1,"fa","fa-plus"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","arName"],["matColumnDef","enName"],["matColumnDef","link"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","page"],[1,"text-danger"],[4,"ngIf"],[1,"ft-alert-circle","align-middle"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngFor","ngForOf"],["class","success p-0",3,"matTooltip","click",4,"ngIf"],["class","danger p-0",3,"matTooltip","click",4,"ngIf"],[1,"success","p-0",3,"matTooltip","click"],[1,"ft-edit-2","font-medium-3","mr-2"],[1,"danger","p-0",3,"matTooltip","click"],[1,"ft-trash","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(d,c){1&d&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-card"),t.TgZ(3,"mat-card-title"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"mat-card-content",2),t.TgZ(7,"div",0),t.TgZ(8,"div",1),t.TgZ(9,"form",3),t.TgZ(10,"div",0),t.TgZ(11,"div",4),t.TgZ(12,"mat-form-field",5),t.TgZ(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"input",6),t.YNc(17,Va,2,1,"mat-hint",7),t.qZA(),t.qZA(),t.TgZ(18,"div",4),t.TgZ(19,"mat-form-field",5),t.TgZ(20,"mat-label"),t._uU(21),t.ALo(22,"translate"),t.qZA(),t._UZ(23,"input",8),t.YNc(24,Wa,2,1,"mat-hint",7),t.qZA(),t.qZA(),t.TgZ(25,"div",4),t.TgZ(26,"mat-form-field",5),t.TgZ(27,"mat-label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t._UZ(30,"input",9),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"mat-card-actions",10),t.TgZ(32,"button",11,12),t.NdJ("click",function(){return c.onSubmit()}),t._UZ(34,"i",13),t._uU(35),t.ALo(36,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(37,"div",0),t.TgZ(38,"div",1),t.TgZ(39,"mat-card"),t.TgZ(40,"mat-card-title"),t._uU(41),t.ALo(42,"translate"),t.qZA(),t.TgZ(43,"mat-card-content"),t.TgZ(44,"mat-form-field",14),t.TgZ(45,"mat-label"),t._uU(46,"Filter"),t.qZA(),t.TgZ(47,"input",15,16),t.NdJ("keyup",function(_){return c.applyFilter(_)}),t.qZA(),t.qZA(),t.TgZ(49,"div",17),t.TgZ(50,"table",18),t.ynx(51,19),t.YNc(52,za,2,0,"th",20),t.YNc(53,$a,2,1,"td",21),t.BQk(),t.ynx(54,22),t.YNc(55,Ka,3,3,"th",20),t.YNc(56,Xa,2,1,"td",21),t.BQk(),t.ynx(57,23),t.YNc(58,eo,3,3,"th",20),t.YNc(59,to,2,1,"td",21),t.BQk(),t.ynx(60,24),t.YNc(61,Rn,3,3,"th",20),t.YNc(62,Dn,2,1,"td",21),t.BQk(),t.ynx(63,25),t.YNc(64,no,1,0,"th",20),t.YNc(65,ro,2,1,"td",21),t.BQk(),t.YNc(66,lo,1,0,"tr",26),t.YNc(67,so,1,0,"tr",27),t.YNc(68,uo,3,1,"tr",28),t.qZA(),t.TgZ(69,"mat-paginator",29),t.NdJ("page",function(_){return c.getAllFunctions(_.pageIndex+1)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&d&&(t.xp6(4),t.hij(" ",t.lcZ(5,14,"labels.CreateFunction")," "),t.xp6(5),t.Q6J("formGroup",c.myForm),t.xp6(5),t.hij(" ",t.lcZ(15,16,"labels.arName")," "),t.xp6(3),t.Q6J("ngIf",c.functionNameArCtrl.invalid&&(c.functionNameArCtrl.touched||c.submitted)),t.xp6(4),t.hij(" ",t.lcZ(22,18,"labels.enName")," "),t.xp6(3),t.Q6J("ngIf",c.functionNameEnCtrl.invalid&&(c.functionNameEnCtrl.touched||c.submitted)),t.xp6(4),t.hij(" ",t.lcZ(29,20,"labels.Link")," "),t.xp6(7),t.hij(" ",t.lcZ(36,22,"General.Add")," "),t.xp6(6),t.hij(" ",t.lcZ(42,24,"Navbar.Functions"),""),t.xp6(9),t.Q6J("dataSource",c.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",c.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",c.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(26,co))("length",c.itemsCount))},directives:[E.a8,E.n5,E.dn,Z._Y,Z.JL,Z.sg,k.KE,k.hX,K.Nt,Z.Fj,Z.JJ,Z.u,f.O5,E.hq,ce.lW,J.BZ,be.YE,J.w1,J.fO,J.Dz,J.as,J.nj,J.Ee,Ye.NW,k.bx,J.ge,be.nU,J.ev,f.sg,Xe.gM,J.XQ,J.Gk],pipes:[se.X$],styles:[""]}),l}();function po(l,p){1&l&&t._UZ(0,"i",24)}function go(l,p){if(1&l){var d=t.EpF();t.TgZ(0,"button",25),t.NdJ("click",function(){return t.CHM(d),t.oxw().clearForm()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Reset")," "))}function ho(l,p){1&l&&(t.TgZ(0,"th",26),t._uU(1,"#"),t.qZA())}function _o(l,p){if(1&l&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&l){var d=p.index;t.xp6(1),t.Oqu(d+1)}}function fo(l,p){1&l&&(t.TgZ(0,"th",28),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Name")," "))}function vo(l,p){if(1&l&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(d.roleName)}}function Zo(l,p){1&l&&t._UZ(0,"th",26)}function Co(l,p){if(1&l){var d=t.EpF();t.TgZ(0,"a",33),t.NdJ("click",function(){t.CHM(d);var m=t.oxw(2).$implicit;return t.oxw().editRole(m)}),t.ALo(1,"translate"),t._UZ(2,"i",34),t.qZA()}2&l&&t.s9C("matTooltip",t.lcZ(1,1,"General.Edit"))}function bo(l,p){if(1&l){var d=t.EpF();t.TgZ(0,"a",35),t.NdJ("click",function(){t.CHM(d);var m=t.oxw(2).$implicit;return t.oxw().openDeleateDialog(m)}),t.ALo(1,"translate"),t._UZ(2,"i",36),t.qZA()}2&l&&t.s9C("matTooltip",t.lcZ(1,1,"General.Delete"))}var Ao=function(p,d){return{parentId:p,functionId:d}};function To(l,p){if(1&l&&(t.TgZ(0,"a",37),t._UZ(1,"i",38),t.qZA()),2&l){var d=t.oxw().$implicit,c=t.oxw().$implicit,m=t.oxw();t.MGl("routerLink","/dashboard/users/role-fuctions/",c.Id,""),t.Q6J("queryParams",t.WLB(2,Ao,m.functionId,d.Id))}}function xo(l,p){if(1&l&&(t.ynx(0),t.YNc(1,Co,3,3,"a",30),t.YNc(2,bo,3,3,"a",31),t.YNc(3,To,2,5,"a",32),t.BQk()),2&l){var d=p.$implicit;t.xp6(1),t.Q6J("ngIf","Update"===d.functionName),t.xp6(1),t.Q6J("ngIf","Delete"===d.functionName),t.xp6(1),t.Q6J("ngIf","Functions"===d.functionName)}}function Io(l,p){if(1&l&&(t.TgZ(0,"td",27),t.YNc(1,xo,4,3,"ng-container",29),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngForOf",d.rowFunctions)}}function yo(l,p){1&l&&t._UZ(0,"tr",39)}function qo(l,p){1&l&&t._UZ(0,"tr",40)}function Fo(l,p){if(1&l&&(t.TgZ(0,"tr",41),t.TgZ(1,"td",42),t._uU(2),t.qZA(),t.qZA()),2&l){t.oxw();var d=t.MAs(31);t.xp6(2),t.hij(' No data matching the filter "',d.value,'" ')}}var wo=function(){return[5,10,20]},So=function(){var l=function(){function p(d,c,m,_,U,V,ee){var me=this;(0,j.Z)(this,p),this.route=d,this.fb=c,this.authserv=m,this.msg=_,this.roleService=U,this.spinner=V,this.dialog=ee,this.roles=[],this.displayedColumns=["#","roleName","actions"],d.queryParamMap.subscribe(function(xe){me.functionId=Number(xe.get("functionId")),me.functionId&&me.authserv.getUserRowFunctions(me.functionId).subscribe(function(Ae){Ae&&(me.rowFunctions=Ae)})}),this.EduCompId=Number(m.getEduCompId())}return(0,Y.Z)(p,[{key:"roleIdCtrl",get:function(){return this.myForm.get("roleId")}},{key:"roleNameCtrl",get:function(){return this.myForm.get("roleName")}},{key:"ngOnInit",value:function(){this.myForm=this.fb.group({roleId:[0],roleName:[null,[Z.kI.required]]}),this.getAllRoles()}},{key:"ngAfterViewInit",value:function(){var c=this;this.authserv.EduCompId.subscribe(function(m){c.EduCompId=m.EduCompId,c.getAllRoles()})}},{key:"getAllRoles",value:function(){var c=this;this.spinner.show(),this.roleService.getAllRoles(this.EduCompId).subscribe(function(m){m&&(c.roles=m,c.dataSource=new J.by(m),c.dataSource.paginator=c.paginator,c.dataSource.sort=c.sort),c.spinner.hide()})}},{key:"applyFilter",value:function(c){this.dataSource.filter=c.target.value.trim().toLowerCase()}},{key:"editRole",value:function(c){var m,_;null===(m=this.roleIdCtrl)||void 0===m||m.setValue(c.Id),null===(_=this.roleNameCtrl)||void 0===_||_.setValue(c.roleName)}},{key:"onSubmit",value:function(){var m,_,c=this;if(null===(m=this.roleNameCtrl)||void 0===m?void 0:m.value)if(this.myForm.valid){this.spinner.show();var U={};U.Id=null===(_=this.roleIdCtrl)||void 0===_?void 0:_.value,U.roleName=this.roleNameCtrl.value,U.EduCompId=this.EduCompId,console.log("role model",U),this.roleService.addEditRole(U).subscribe(function(V){var ee,me;V&&200===V.returnValue&&(0==(null===(ee=c.roleIdCtrl)||void 0===ee?void 0:ee.value)?(c.getAllRoles(),c.dataSource.paginator.firstPage(),c.msg.success("General.AddSuccessfully")):(c.getAllRoles(),c.msg.success("General.UpdateSuccessfully")),c.myForm.reset(),null===(me=c.roleIdCtrl)||void 0===me||me.setValue(0)),c.spinner.hide()})}else this.msg.error("General.FormNotValid");else this.msg.warning("\u064a\u0631\u062c\u064a \u0625\u062f\u062e\u0627\u0644 \u0627\u0633\u0645 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0647")}},{key:"openDeleateDialog",value:function(c){var m=this;this.dialog.open(jt.F,{data:{msg:c.roleName,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(_){_&&m.removeRole(c)})}},{key:"removeRole",value:function(c){var m=this;this.spinner.show(),this.roleService.deleteRole(c.Id).subscribe(function(_){"Success"==_.returnString?(m.getAllRoles(),m.msg.success("General.DeleteSuccessfully")):m.msg.warning(_.returnString),m.roleIdCtrl.value&&m.myForm.reset(),m.spinner.hide()})}},{key:"clearForm",value:function(){this.myForm.reset(),this.roleIdCtrl.setValue(0)}}]),p}();return l.\u0275fac=function(d){return new(d||l)(t.Y36(e.gz),t.Y36(Z.qu),t.Y36(C.e),t.Y36(un.K),t.Y36(Cn.f),t.Y36(u.t2),t.Y36(je.uw))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-add-role"]],viewQuery:function(d,c){var m;1&d&&(t.Gf(Ye.NW,5),t.Gf(be.YE,5)),2&d&&(t.iGM(m=t.CRH())&&(c.paginator=m.first),t.iGM(m=t.CRH())&&(c.sort=m.first))},decls:47,vars:21,consts:[[1,"row"],[1,"col-12"],[1,"container-fluid"],[3,"formGroup"],["label","labels.Name","type","text",3,"control"],["align","end"],["mat-raised-button","",1,"btn","btn-info","bg-light-info",3,"click"],["class","fa fa-plus mr-1",4,"ngIf"],["mat-raised-button","","class","btn btn-warning",3,"click",4,"ngIf"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","roleName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions"],[1,"fa","fa-plus","mr-1"],["mat-raised-button","",1,"btn","btn-warning",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],[4,"ngFor","ngForOf"],["class","success p-0",3,"matTooltip","click",4,"ngIf"],["class","danger p-0",3,"matTooltip","click",4,"ngIf"],["class","info p-0","matTooltip","add functions",3,"routerLink","queryParams",4,"ngIf"],[1,"success","p-0",3,"matTooltip","click"],[1,"ft-edit-2","font-medium-3","mr-2"],[1,"danger","p-0",3,"matTooltip","click"],[1,"ft-trash","font-medium-3","mr-2"],["matTooltip","add functions",1,"info","p-0",3,"routerLink","queryParams"],[1,"ft-git-branch","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(d,c){1&d&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-card"),t.TgZ(3,"mat-card-title"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"mat-card-content",2),t.TgZ(7,"div",0),t.TgZ(8,"div",1),t.TgZ(9,"form",3),t.TgZ(10,"div",0),t.TgZ(11,"div",1),t._UZ(12,"app-input",4),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"mat-card-actions",5),t.TgZ(14,"button",6),t.NdJ("click",function(){return c.onSubmit()}),t.YNc(15,po,1,0,"i",7),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.YNc(18,go,3,3,"button",8),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",0),t.TgZ(20,"div",1),t.TgZ(21,"mat-card"),t.TgZ(22,"mat-card-title"),t._uU(23),t.ALo(24,"translate"),t.qZA(),t.TgZ(25,"mat-card-content"),t.TgZ(26,"mat-form-field",9),t.TgZ(27,"mat-label"),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"input",10,11),t.NdJ("keyup",function(_){return c.applyFilter(_)}),t.qZA(),t.qZA(),t.TgZ(32,"div",12),t.TgZ(33,"table",13),t.ynx(34,14),t.YNc(35,ho,2,0,"th",15),t.YNc(36,_o,2,1,"td",16),t.BQk(),t.ynx(37,17),t.YNc(38,fo,3,3,"th",18),t.YNc(39,vo,2,1,"td",16),t.BQk(),t.ynx(40,19),t.YNc(41,Zo,1,0,"th",15),t.YNc(42,Io,2,1,"td",16),t.BQk(),t.YNc(43,yo,1,0,"tr",20),t.YNc(44,qo,1,0,"tr",21),t.YNc(45,Fo,3,1,"tr",22),t.qZA(),t._UZ(46,"mat-paginator",23),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&d&&(t.xp6(4),t.hij(" ",t.lcZ(5,12,"labels.AddRole")," "),t.xp6(5),t.Q6J("formGroup",c.myForm),t.xp6(3),t.Q6J("control",c.roleNameCtrl),t.xp6(3),t.Q6J("ngIf",0==c.roleIdCtrl.value),t.xp6(1),t.hij(" ",t.lcZ(17,14,0==c.roleIdCtrl.value?"General.Add":"General.Update")," "),t.xp6(2),t.Q6J("ngIf",c.roleIdCtrl.value>0),t.xp6(5),t.hij(" ",t.lcZ(24,16,"Navbar.Roles"),""),t.xp6(5),t.Oqu(t.lcZ(29,18,"General.Search")),t.xp6(5),t.Q6J("dataSource",c.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",c.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",c.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(20,wo)))},directives:[E.a8,E.n5,E.dn,Z._Y,Z.JL,Z.sg,Yn.a,E.hq,ce.lW,f.O5,k.KE,k.hX,K.Nt,J.BZ,be.YE,J.w1,J.fO,J.Dz,J.as,J.nj,J.Ee,Ye.NW,J.ge,J.ev,be.nU,f.sg,Xe.gM,e.yS,J.XQ,J.Gk],pipes:[se.X$],styles:[""]}),l}(),Gn=h(7446);function en(l,p){if(1&l){var d=t.EpF();t.TgZ(0,"div",12),t.TgZ(1,"mat-checkbox",13),t.NdJ("change",function(U){var ee=t.CHM(d).$implicit;return t.oxw(2).onFunctionToogle(ee.Id,U)}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&l){var c=p.$implicit,m=t.oxw(2);t.xp6(1),t.MGl("id","functions",c.Id,""),t.Q6J("checked",m.rolefunctionIds.includes(c.Id)),t.xp6(1),t.hij(" ",t.lcZ(3,3,c.functionName)," ")}}function Uo(l,p){if(1&l&&(t.TgZ(0,"div",10),t.TgZ(1,"mat-card"),t.TgZ(2,"mat-card-title"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"mat-card-content"),t.TgZ(6,"div",0),t.YNc(7,en,4,5,"div",11),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&l){var d=p.$implicit;t.xp6(3),t.Oqu(t.lcZ(4,2,d.classificationName)),t.xp6(4),t.Q6J("ngForOf",d.functions)}}var ko=function(p){return{functionId:p}},Eo=function(){var l=function(){function p(d,c,m,_,U,V){var ee=this;(0,j.Z)(this,p),this.router=d,this.route=c,this.fb=m,this.msg=_,this.roleService=U,this.spinner=V,this.functions=[],this.groupFunctions=[],this.roleFunctions=[],this.rolefunctionIds=[],this.roleName="",this.allChecked=!1,this.allFunctionsLength=0,this.route.paramMap.subscribe(function(me){ee.roleId=Number(me.get("roleId"))}),this.route.queryParamMap.subscribe(function(me){ee.functionId=Number(me.get("parentId"))})}return(0,Y.Z)(p,[{key:"ngOnInit",value:function(){this.getAllFunctions(),this.getAllRoleFunctions()}},{key:"getAllFunctions",value:function(){var c=this;this.spinner.show(),this.roleService.getAllFunctions(0,!0).subscribe(function(m){m&&(c.groupFunctions=m,c.groupFunctions.forEach(function(_){c.allFunctionsLength=c.allFunctionsLength+_.functions.length})),c.spinner.hide()})}},{key:"getAllRoleFunctions",value:function(){var c=this;this.spinner.show(),this.roleService.getAllRoleFunctions(this.roleId).subscribe(function(m){if(m){c.roleFunctions=m,c.roleName=c.roleFunctions[0].roleName;for(var _=0;_<c.roleFunctions.length;_++)c.rolefunctionIds.push(c.roleFunctions[_].function.Id);c.allChecked=c.rolefunctionIds.length===c.allFunctionsLength}c.spinner.hide()})}},{key:"onFunctionToogle",value:function(c,m){if(!0===m.checked)this.rolefunctionIds.push(c);else if(!1===m.checked){var _=this.rolefunctionIds.findIndex(function(U){return U===c});this.rolefunctionIds.splice(_,1)}this.allChecked=this.rolefunctionIds.length===this.allFunctionsLength}},{key:"SelectAll",value:function(){var c=this;this.allChecked=!this.allChecked,this.allChecked?this.groupFunctions.forEach(function(m){m.functions.forEach(function(_){c.rolefunctionIds.includes(_.Id)||c.rolefunctionIds.push(_.Id)})}):this.rolefunctionIds=[]}},{key:"onAddFunctions",value:function(){var c=this,m={};m.roleId=this.roleId,m.functionsList=this.rolefunctionIds,this.spinner.show(),this.roleService.addEditRoleFunctions(m).subscribe(function(_){_&&200===_.returnValue&&c.msg.success("General.AddSuccessfully"),c.spinner.hide()})}}]),p}();return l.\u0275fac=function(d){return new(d||l)(t.Y36(e.F0),t.Y36(e.gz),t.Y36(Z.qu),t.Y36(un.K),t.Y36(Cn.f),t.Y36(u.t2))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-role-functions"]],decls:24,vars:17,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","","routerLink","/dashboard/roles",1,"btn","btn-warning","bg-light-warning","float-right",3,"queryParams"],[1,"container-fluid"],["color","accent",1,"mb-1",3,"checked","change"],["class","col-md-4 col-12",4,"ngFor","ngForOf"],["align","end"],["mat-raised-button","",1,"btn","btn-primary","bg-light-info",3,"click"],["addBtn",""],[1,"fa","fa-plus","mr-1"],[1,"col-md-4","col-12"],["class","col-12 col-xl-6",4,"ngFor","ngForOf"],[1,"col-12","col-xl-6"],[3,"id","checked","change"]],template:function(d,c){1&d&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-card"),t.TgZ(3,"mat-card-title"),t._uU(4),t.ALo(5,"translate"),t.TgZ(6,"a",2),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.qZA(),t.TgZ(9,"mat-card-content",3),t.TgZ(10,"div",0),t.TgZ(11,"div",1),t.TgZ(12,"div",0),t.TgZ(13,"div",1),t.TgZ(14,"mat-checkbox",4),t.NdJ("change",function(){return c.SelectAll()}),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.qZA(),t.YNc(17,Uo,8,4,"div",5),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(18,"mat-card-actions",6),t.TgZ(19,"button",7,8),t.NdJ("click",function(){return c.onAddFunctions()}),t._UZ(21,"i",9),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&d&&(t.xp6(4),t.hij(" ",t.lcZ(5,7,"labels.AddRoleFunctions")," "),t.xp6(2),t.Q6J("queryParams",t.VKq(15,ko,c.functionId)),t.xp6(1),t.hij(" ",t.lcZ(8,9,"General.Back")," "),t.xp6(7),t.Q6J("checked",c.allChecked),t.xp6(1),t.hij(" ",t.lcZ(16,11,"General.SelectAll")," "),t.xp6(2),t.Q6J("ngForOf",c.groupFunctions),t.xp6(5),t.hij(" ",t.lcZ(23,13,"General.Add")," "))},directives:[E.a8,E.n5,ce.zs,e.yS,E.dn,Gn.oG,f.sg,E.hq,ce.lW],pipes:[se.X$],styles:[""]}),l}(),Nn=h(7762),Vn=function(){var l=function(p){(0,_n.Z)(c,p);var d=(0,fn.Z)(c);function c(m){var _;return(0,j.Z)(this,c),(_=d.call(this,m)).http=m,_}return(0,Y.Z)(c,[{key:"getAllUsers",value:function(_,U,V){return this.post("usermanagement/returnUsersByEduComp/".concat(_,"/").concat(U),V)}},{key:"addEditUser",value:function(_){return this.post("usermanagement/create-user-account",_)}},{key:"deleteUser",value:function(_){return this.delete("usermanagement/deleteUser/".concat(_))}},{key:"getAllBranchesByCenter",value:function(_){return this.get("usermanagement/returnCenterBranchesByEduComp/".concat(_))}},{key:"copyDataFromHR",value:function(_){return this.get("HRusermanagement/create-user-account/".concat(_))}}]),c}(vn.K);return l.\u0275fac=function(d){return new(d||l)(t.LFG(Zn.eN))},l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l}(),Do=function(){var l=function(){function p(){(0,j.Z)(this,p)}return(0,Y.Z)(p,[{key:"groupBy",value:function(c,m){var _=c.reduce(function(U,V){return U[V[m]]?U[V[m]].push(V):U[V[m]]=[V],U},{});return Object.keys(_).map(function(U){return{key:U,List:_[U]}})}}]),p}();return l.\u0275fac=function(d){return new(d||l)},l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l}(),tn=h(6856);function No(l,p){if(1&l&&(t.TgZ(0,"mat-option",36),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.Q6J("value",d.Id),t.xp6(1),t.hij(" ",d.Name," ")}}function Hn(l,p){1&l&&(t.TgZ(0,"span"),t._UZ(1,"i",39),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&l&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"labels.MustChoosevalue")," "))}function Mo(l,p){if(1&l&&(t.TgZ(0,"mat-hint",37),t.YNc(1,Hn,4,3,"span",38),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngIf",null==d.branchIdCtrl.errors?null:d.branchIdCtrl.errors.required)}}function Qo(l,p){if(1&l){var d=t.EpF();t.TgZ(0,"div",41),t.TgZ(1,"mat-checkbox",42),t.NdJ("change",function(U){var ee=t.CHM(d).$implicit;return t.oxw(2).onFunctionToogle(ee.Id,U)}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()}if(2&l){var c=p.$implicit,m=t.oxw(2);t.xp6(1),t.MGl("id","functions",c.Id,""),t.Q6J("checked",m.functionIds.includes(c.Id)),t.xp6(1),t.hij(" ",t.lcZ(3,3,c.function.function_en_name)," ")}}function Jo(l,p){if(1&l&&(t.TgZ(0,"div",4),t.TgZ(1,"mat-card"),t.TgZ(2,"mat-card-title"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"mat-card-content"),t.TgZ(6,"div",0),t.YNc(7,Qo,4,5,"div",40),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&l){var d=p.$implicit;t.xp6(3),t.Oqu(t.lcZ(4,2,d.key)),t.xp6(4),t.Q6J("ngForOf",d.List)}}function Oo(l,p){1&l&&(t.TgZ(0,"th",43),t._uU(1,"#"),t.qZA())}function Lo(l,p){if(1&l&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&l){var d=p.index;t.xp6(1),t.Oqu(d+1)}}function bn(l,p){1&l&&(t.TgZ(0,"th",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.branchName")," "))}function Po(l,p){if(1&l&&(t.TgZ(0,"td",44),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.hij(" ",d.branchName," ")}}function Yo(l,p){1&l&&(t.TgZ(0,"th",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.FunctionName")," "))}function Wn(l,p){if(1&l){var d=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"td"),t.TgZ(5,"a",46),t.NdJ("click",function(){var U=t.CHM(d).$implicit;return t.oxw(2).openDeleateFunctionDialog(U)}),t._UZ(6,"i",47),t.qZA(),t.qZA(),t.qZA()}if(2&l){var c=p.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,1,c.functionName))}}function zn(l,p){if(1&l&&(t.TgZ(0,"td",44),t.YNc(1,Wn,7,3,"tr",45),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Q6J("ngForOf",d.roleFunctionsList)}}function jo(l,p){1&l&&(t.TgZ(0,"th",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.FromDate")," "))}function Bo(l,p){if(1&l&&(t.TgZ(0,"td",44),t._uU(1),t.ALo(2,"date"),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,d.from,"dd/MM/yyyy")," ")}}function Ro(l,p){1&l&&(t.TgZ(0,"th",43),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.ToDate")," "))}function Go(l,p){if(1&l&&(t.TgZ(0,"td",44),t._uU(1),t.ALo(2,"date"),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,d.to,"dd/MM/yyyy")," ")}}function Vo(l,p){1&l&&(t.TgZ(0,"th",43),t._uU(1,"actions"),t.qZA())}function Ho(l,p){if(1&l){var d=t.EpF();t.TgZ(0,"a",49),t.NdJ("click",function(){t.CHM(d);var m=t.oxw(2).$implicit;return t.oxw().openDeleateDialog(m)}),t._UZ(1,"i",50),t.qZA()}}function Wo(l,p){if(1&l&&(t.ynx(0),t.YNc(1,Ho,2,0,"a",48),t.BQk()),2&l){var d=p.$implicit;t.xp6(1),t.Q6J("ngIf","Delete"===d.functionName)}}function zo(l,p){if(1&l&&(t.TgZ(0,"td",44),t.YNc(1,Wo,2,1,"ng-container",45),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngForOf",d.rowFunctions)}}function $o(l,p){1&l&&t._UZ(0,"tr",51)}function Ko(l,p){1&l&&t._UZ(0,"tr",52)}function Xo(l,p){if(1&l&&(t.TgZ(0,"tr",53),t.TgZ(1,"td",54),t._uU(2),t.qZA(),t.qZA()),2&l){t.oxw();var d=t.MAs(61);t.xp6(2),t.hij(' No data matching the filter "',null==d?null:d.value,'" ')}}var er=function(){return[5,10,20]},tr=function(){var l=function(){function p(d,c,m,_,U,V,ee,me,xe,Ae){var Me=this;(0,j.Z)(this,p),this.route=d,this.fb=c,this.msg=m,this.userService=_,this.authserv=U,this.roleService=V,this.groupByService=ee,this.dialog=me,this.datePipe=xe,this.spinner=Ae,this.allFunctionsLength=0,this.submitted=!1,this.allChecked=!1,this.branches=[],this.groupFunctions=[],this.functionIds=[],this.checkedfunctionIds=[],this.userBranchesWithFunctions=[],this.displayedColumns=["#","branchName","FunctionName","from","to","actions"],this.route.paramMap.subscribe(function(Ct){Me.userId=Number(Ct.get("userId")),Me.roleId=Number(Ct.get("roleId"))}),d.queryParamMap.subscribe(function(Ct){Me.functionId=Number(Ct.get("functionId")),Me.functionId&&Me.authserv.getUserRowFunctions(Me.functionId).subscribe(function(ti){ti&&(Me.rowFunctions=ti)})})}return(0,Y.Z)(p,[{key:"branchIdCtrl",get:function(){return this.myForm.get("branchsIds")}},{key:"fromDateCtrl",get:function(){return this.myForm.get("fromDate")}},{key:"toDateCtrl",get:function(){return this.myForm.get("toDate")}},{key:"ngOnInit",value:function(){this.myForm=this.fb.group({branchsIds:[[]],fromDate:[""],toDate:[""]}),this.EduCompId=Number(this.authserv.getEduCompId()),this.getAllBranchesByCenter(),this.getAllFunctions(),this.getAllUserBranchesWithFunctions()}},{key:"ngAfterViewInit",value:function(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"applyFilter",value:function(c){this.dataSource.filter=c.target.value.trim().toLowerCase()}},{key:"getAllBranchesByCenter",value:function(){var c=this;this.spinner.show(),this.userService.getAllBranchesByCenter(this.EduCompId).subscribe(function(m){m&&(c.branches=m),c.spinner.hide()})}},{key:"getAllFunctions",value:function(){var c=this;this.spinner.show(),this.roleService.getAllFunctionsByRoleId(this.roleId).subscribe(function(m){m&&(c.groupFunctions=c.groupByService.groupBy(m,"classificationName"),c.groupFunctions.forEach(function(_){c.allFunctionsLength=c.allFunctionsLength+_.List.length})),c.spinner.hide()})}},{key:"onFunctionToogle",value:function(c,m){if(!0===m.checked)this.functionIds.push(c);else if(!1===m.checked){var _=this.functionIds.findIndex(function(U){return U===c});this.functionIds.splice(_,1)}this.allChecked=this.functionIds.length===this.allFunctionsLength}},{key:"SelectAll",value:function(){var c=this;this.allChecked=!this.allChecked,this.allChecked?this.groupFunctions.forEach(function(m){m.List.forEach(function(_){c.functionIds.includes(_.Id)||c.functionIds.push(_.Id)})}):this.functionIds=[]}},{key:"getAllUserBranchesWithFunctions",value:function(){var c=this;this.spinner.show(),this.roleService.getAllUserBranchesWithFunctions(this.userId).subscribe(function(m){if(m){c.userBranchesWithFunctions=m.branchUserList,c.dataSource=new J.by(m.branchUserList);var U,_=(0,Nn.Z)(c.userBranchesWithFunctions);try{for(_.s();!(U=_.n()).done;){var me,ee=(0,Nn.Z)(U.value.roleFunctionsList);try{for(ee.s();!(me=ee.n()).done;)c.checkedfunctionIds.push(me.value.Id)}catch(Ae){ee.e(Ae)}finally{ee.f()}}}catch(Ae){_.e(Ae)}finally{_.f()}}c.spinner.hide()})}},{key:"removeBranch",value:function(c){var m=this;this.spinner.show(),this.roleService.deleteUserBranchRoleFunction(this.userId,c.branchId).subscribe(function(_){if(_){var U=m.dataSource.data.findIndex(function(V){return V==c});m.dataSource.data.splice(U,1),m.dataSource.paginator=m.paginator,m.msg.success("branch has been deleted success")}m.spinner.hide()})}},{key:"onDeleteFunction",value:function(c){var m=this;this.spinner.show(),this.roleService.deleteUserRoleFunctions(c.centerBranchUserFuncId).subscribe(function(_){_&&(m.getAllUserBranchesWithFunctions(),m.msg.success("function has been deleted success")),m.spinner.hide()})}},{key:"onSubmit",value:function(){var m,_,c=this;if(this.submitted=!0,this.functionIds.length<=0)this.msg.warning("Must select at least one function");else if(0!=(null===(m=this.branchIdCtrl)||void 0===m?void 0:m.value.length)){if(this.myForm.valid){this.spinner.show();var U={};U.roleFunctionsIds=this.functionIds,U.branchsIds=null===(_=this.branchIdCtrl)||void 0===_?void 0:_.value,U.branchUser={},U.branchUser.userId=this.userId,U.branchUser.branchId=0,U.branchUser.from=this.datePipe.transform(this.fromDateCtrl.value),U.branchUser.to=this.datePipe.transform(this.toDateCtrl.value),this.roleService.addUserBranchesAndRoleFunctions(U).subscribe(function(V){c.submitted=!1,V&&(c.getAllUserBranchesWithFunctions(),c.msg.success("branch has been added success"),c.myForm.reset(),c.functionIds=[],c.checkedfunctionIds=[],c.allChecked=!1),c.spinner.hide()})}}else this.msg.warning("Must select at least one branch")}},{key:"openDeleateDialog",value:function(c){var m=this;this.dialog.open(jt.F,{data:{msg:c.branchName,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(_){_&&m.removeBranch(c)})}},{key:"openDeleateFunctionDialog",value:function(c){var m=this;this.dialog.open(jt.F,{data:{msg:c.functionName,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(_){_&&m.onDeleteFunction(c)})}}]),p}();return l.\u0275fac=function(d){return new(d||l)(t.Y36(e.gz),t.Y36(Z.qu),t.Y36(W._W),t.Y36(Vn),t.Y36(C.e),t.Y36(Cn.f),t.Y36(Do),t.Y36(je.uw),t.Y36(f.uU),t.Y36(u.t2))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-user-branches-roles"]],viewQuery:function(d,c){var m;1&d&&(t.Gf(Ye.NW,5),t.Gf(be.YE,5)),2&d&&(t.iGM(m=t.CRH())&&(c.paginator=m.first),t.iGM(m=t.CRH())&&(c.sort=m.first))},decls:86,vars:38,consts:[[1,"row"],[1,"col-12"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-4","col-12"],["appearance","legacy"],["formControlName","branchsIds","multiple",""],[3,"value",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],["matInput","","formControlName","fromDate",3,"matDatepicker"],["matSuffix","",3,"for"],["fromDate",""],["matInput","","formControlName","toDate",3,"matDatepicker"],["toDate",""],["color","accent",3,"checked","change"],["class","col-md-4 col-12",4,"ngFor","ngForOf"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],["addBtn",""],["appearance","standard"],["matInput","",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","branchName"],["matColumnDef","FunctionName"],["matColumnDef","from"],["matColumnDef","to"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions"],[3,"value"],[1,"text-danger"],[4,"ngIf"],[1,"ft-alert-circle","align-middle"],["class","col-12 col-xl-6",4,"ngFor","ngForOf"],[1,"col-12","col-xl-6"],[3,"id","checked","change"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngFor","ngForOf"],[3,"click"],["aria-hidden","true",1,"fa","fa-times","fa","fa-white"],["class","danger p-0","matTooltip","Delete",3,"click",4,"ngIf"],["matTooltip","Delete",1,"danger","p-0",3,"click"],[1,"ft-trash","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(d,c){if(1&d&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-card"),t.TgZ(3,"mat-card-title"),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"mat-card-content",2),t.TgZ(7,"div",0),t.TgZ(8,"div",1),t.TgZ(9,"form",3),t.TgZ(10,"div",0),t.TgZ(11,"div",4),t.TgZ(12,"mat-form-field",5),t.TgZ(13,"mat-label"),t._uU(14),t.ALo(15,"translate"),t.qZA(),t.TgZ(16,"mat-select",6),t.TgZ(17,"mat-option"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.YNc(20,No,2,2,"mat-option",7),t.qZA(),t.YNc(21,Mo,2,1,"mat-hint",8),t.qZA(),t.qZA(),t.TgZ(22,"div",4),t.TgZ(23,"mat-form-field",5),t.TgZ(24,"mat-label"),t._uU(25),t.ALo(26,"translate"),t.qZA(),t._UZ(27,"input",9),t._UZ(28,"mat-datepicker-toggle",10),t._UZ(29,"mat-datepicker",null,11),t.qZA(),t.qZA(),t.TgZ(31,"div",4),t.TgZ(32,"mat-form-field",5),t.TgZ(33,"mat-label"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t._UZ(36,"input",12),t._UZ(37,"mat-datepicker-toggle",10),t._UZ(38,"mat-datepicker",null,13),t.qZA(),t.qZA(),t.TgZ(40,"div",1),t.TgZ(41,"mat-checkbox",14),t.NdJ("change",function(){return c.SelectAll()}),t._uU(42),t.ALo(43,"translate"),t.qZA(),t.qZA(),t.YNc(44,Jo,8,4,"div",15),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(45,"mat-card-actions",16),t.TgZ(46,"button",17,18),t.NdJ("click",function(){return c.onSubmit()}),t._uU(48),t.ALo(49,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(50,"div",0),t.TgZ(51,"div",1),t.TgZ(52,"mat-card"),t.TgZ(53,"mat-card-title"),t._uU(54),t.ALo(55,"translate"),t.qZA(),t.TgZ(56,"mat-card-content"),t.TgZ(57,"mat-form-field",19),t.TgZ(58,"mat-label"),t._uU(59,"Filter"),t.qZA(),t.TgZ(60,"input",20,21),t.NdJ("keyup",function(V){return c.applyFilter(V)}),t.qZA(),t.qZA(),t.TgZ(62,"div",22),t.TgZ(63,"table",23),t.ynx(64,24),t.YNc(65,Oo,2,0,"th",25),t.YNc(66,Lo,2,1,"td",26),t.BQk(),t.ynx(67,27),t.YNc(68,bn,3,3,"th",25),t.YNc(69,Po,2,1,"td",26),t.BQk(),t.ynx(70,28),t.YNc(71,Yo,3,3,"th",25),t.YNc(72,zn,2,1,"td",26),t.BQk(),t.ynx(73,29),t.YNc(74,jo,3,3,"th",25),t.YNc(75,Bo,3,4,"td",26),t.BQk(),t.ynx(76,30),t.YNc(77,Ro,3,3,"th",25),t.YNc(78,Go,3,4,"td",26),t.BQk(),t.ynx(79,31),t.YNc(80,Vo,2,0,"th",25),t.YNc(81,zo,2,1,"td",26),t.BQk(),t.YNc(82,$o,1,0,"tr",32),t.YNc(83,Ko,1,0,"tr",33),t.YNc(84,Xo,3,1,"tr",34),t.qZA(),t._UZ(85,"mat-paginator",35),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&d){var m=t.MAs(30),_=t.MAs(39);t.xp6(4),t.hij(" ",t.lcZ(5,21,"labels.AddUserBranchesAndRoles")," "),t.xp6(5),t.Q6J("formGroup",c.myForm),t.xp6(5),t.hij("",t.lcZ(15,23,"labels.branchName")," "),t.xp6(4),t.hij(" ",t.lcZ(19,25,"General.Choose"),""),t.xp6(2),t.Q6J("ngForOf",c.branches),t.xp6(1),t.Q6J("ngIf",c.branchIdCtrl.invalid&&(c.branchIdCtrl.touched||c.submitted)),t.xp6(4),t.hij(" ",t.lcZ(26,27,"labels.FromDate"),""),t.xp6(2),t.Q6J("matDatepicker",m),t.xp6(1),t.Q6J("for",m),t.xp6(6),t.hij(" ",t.lcZ(35,29,"labels.ToDate"),""),t.xp6(2),t.Q6J("matDatepicker",_),t.xp6(1),t.Q6J("for",_),t.xp6(4),t.Q6J("checked",c.allChecked),t.xp6(1),t.hij(" ",t.lcZ(43,31,"General.SelectAll")," "),t.xp6(2),t.Q6J("ngForOf",c.groupFunctions),t.xp6(4),t.hij(" ",t.lcZ(49,33,"General.Save")," "),t.xp6(6),t.hij(" ",t.lcZ(55,35,"labels.UserBranchesAndRoles"),""),t.xp6(9),t.Q6J("dataSource",c.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",c.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",c.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(37,er))}},directives:[E.a8,E.n5,E.dn,Z._Y,Z.JL,Z.sg,k.KE,k.hX,Ie.gD,Z.JJ,Z.u,pe.ey,f.sg,f.O5,K.Nt,Z.Fj,tn.hl,tn.nW,k.R9,tn.Mq,Gn.oG,E.hq,ce.lW,J.BZ,be.YE,J.w1,J.fO,J.Dz,J.as,J.nj,J.Ee,Ye.NW,k.bx,J.ge,be.nU,J.ev,Xe.gM,J.XQ,J.Gk],pipes:[se.X$,f.uU],styles:[""]}),l}(),$n=function(){var l=function(p){(0,_n.Z)(c,p);var d=(0,fn.Z)(c);function c(m){var _;return(0,j.Z)(this,c),(_=d.call(this,m)).http=m,_}return(0,Y.Z)(c,[{key:"getJopTitlebyDepartment",value:function(_,U){return this.get("usermanagement/returnAllUserDepartments/".concat(_,"/").concat(U))}},{key:"addJopTitlebyDepartment",value:function(_){return this.post("usermanagement/CreateUserDepartmentJobTitle",_)}},{key:"editAllDeparment",value:function(_,U){return this.put("usermanagement/EditUserDepartmentJobTitle/".concat(U),_)}},{key:"editJobTitle",value:function(_,U){return this.put("usermanagement/editJobTitleforuser/".concat(U),_)}},{key:"deleteUserDeptJobTitle",value:function(_,U){return this.delete("usermanagement/deleteUserDepartment/".concat(_,"/").concat(U))}},{key:"deleteJopTitle",value:function(_){return this.delete("usermanagement/deleteJobTitleForuser/".concat(_))}}]),c}(vn.K);return l.\u0275fac=function(d){return new(d||l)(t.LFG(Zn.eN))},l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l}();function nr(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1," You must choose a value. "),t.qZA())}function ir(l,p){if(1&l&&(t.TgZ(0,"mat-hint",14),t.YNc(1,nr,2,0,"span",15),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngIf",null==d.departmentCtrl.fromDate||null==d.departmentCtrl.fromDate.errors?null:d.departmentCtrl.fromDate.errors.required)}}var ar=function(){var l=function(){function p(d,c,m,_,U,V,ee){(0,j.Z)(this,p),this.dialogRef=d,this.data=c,this.fb=m,this.toastr=_,this._serjopTitlebyDepartment=U,this.translate=V,this.datePipe=ee,this.submitted=!1}return(0,Y.Z)(p,[{key:"ngOnInit",value:function(){console.log(this.data),this.myForm=this.fb.group({userid:[this.data.user_dept_job_id],fromDate:[this.data.from_date,[Z.kI.required]],toDate:[this.data.to_date]})}},{key:"departmentCtrl",get:function(){return this.myForm.controls}},{key:"updateJobTitle",value:function(){var c=this;if(this.departmentCtrl.toDate.value&&this.departmentCtrl.fromDate.value>this.departmentCtrl.toDate.value)this.toastr.error("\u062a\u0627\u0631\u064a\u062e \u0628\u062f\u0627\u064a\u0629 \u0627\u0644\u0641\u062a\u0631\u0629 \u0623\u0643\u0628\u0631 \u0645\u0646 \u062a\u0627\u0631\u064a\u062e \u0646\u0647\u0627\u064a\u0629 \u0627\u0644\u0641\u062a\u0631\u0629");else{this.submitted=!0;var m={from_date:this.datePipe.transform(this.myForm.value.fromDate),to_date:this.datePipe.transform(this.myForm.value.toDate)};this.myForm.valid&&this._serjopTitlebyDepartment.editJobTitle(m,this.data.user_dept_job_id).subscribe(function(_){1==_.returnValue?(c.submitted=!1,c.translate.get("jobTitlebyDepartment.toasterSaveSucses").subscribe(function(U){U&&c.toastr.success(U)}),c.myForm.reset(),c.dialogRef.close(!0)):c.toastr.error(_.returnString)})}}}]),p}();return l.\u0275fac=function(d){return new(d||l)(t.Y36(je.so),t.Y36(je.WI),t.Y36(Z.qu),t.Y36(W._W),t.Y36($n),t.Y36(se.sK),t.Y36(f.uU))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-update-date"]],decls:31,vars:22,consts:[["mat-dialog-title","",1,"primary-color"],["mat-dialog-content",""],[1,"row",3,"formGroup"],[1,"col-md-6","col-12"],["appearance","legacy"],["matInput","","formControlName","fromDate",3,"matDatepicker"],["matSuffix","",3,"for"],["fromDate",""],["class","text-danger",4,"ngIf"],["matInput","","formControlName","toDate",3,"matDatepicker"],["toDate",""],["mat-dialog-actions","","align","end",3,"click"],["mat-raised-button","",1,"btn","btn-primary"],["mat-raised-button","",1,"btn","btn-danger",3,"mat-dialog-close"],[1,"text-danger"],[4,"ngIf"]],template:function(d,c){if(1&d&&(t.TgZ(0,"h1",0),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"div",1),t.TgZ(4,"form",2),t.TgZ(5,"div",3),t.TgZ(6,"mat-form-field",4),t.TgZ(7,"mat-label"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t._UZ(10,"input",5),t._UZ(11,"mat-datepicker-toggle",6),t._UZ(12,"mat-datepicker",null,7),t.YNc(14,ir,2,1,"mat-hint",8),t.qZA(),t.qZA(),t.TgZ(15,"div",3),t.TgZ(16,"mat-form-field",4),t.TgZ(17,"mat-label"),t._uU(18),t.ALo(19,"translate"),t.qZA(),t._UZ(20,"input",9),t._UZ(21,"mat-datepicker-toggle",6),t._UZ(22,"mat-datepicker",null,10),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(24,"div",11),t.NdJ("click",function(){return c.updateJobTitle()}),t.TgZ(25,"button",12),t._uU(26),t.ALo(27,"translate"),t.qZA(),t.TgZ(28,"button",13),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.qZA()),2&d){var m=t.MAs(13),_=t.MAs(23);t.xp6(1),t.hij(" ",t.lcZ(2,12,"updateDate.update"),"\n"),t.xp6(3),t.Q6J("formGroup",c.myForm),t.xp6(4),t.hij(" ",t.lcZ(9,14,"jobTitlebyDepartment.FromDate")," "),t.xp6(2),t.Q6J("matDatepicker",m),t.xp6(1),t.Q6J("for",m),t.xp6(3),t.Q6J("ngIf",(null==c.departmentCtrl.fromDate?null:c.departmentCtrl.fromDate.invalid)&&((null==c.departmentCtrl.fromDate?null:c.departmentCtrl.fromDate.touched)||c.submitted)),t.xp6(4),t.hij(" ",t.lcZ(19,16,"jobTitlebyDepartment.toDate")," "),t.xp6(2),t.Q6J("matDatepicker",_),t.xp6(1),t.Q6J("for",_),t.xp6(5),t.hij(" ",t.lcZ(27,18,"updateDate.update")," "),t.xp6(2),t.Q6J("mat-dialog-close",!1),t.xp6(1),t.hij(" ",t.lcZ(30,20,"General.close")," ")}},directives:[je.uh,je.xY,Z._Y,Z.JL,Z.sg,k.KE,k.hX,K.Nt,Z.Fj,tn.hl,Z.JJ,Z.u,tn.nW,k.R9,tn.Mq,f.O5,je.H8,ce.lW,je.ZT,k.bx],pipes:[se.X$],styles:[""]}),l}(),or=h(3217),rr=h(1123),lr=h(2222);function sr(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"titlecase"),t.ALo(3,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,t.lcZ(3,3,"jobTitlebyDepartment.adddepartment"))," "))}function ur(l,p){1&l&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"titlecase"),t.ALo(3,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,t.lcZ(3,3,"jobTitlebyDepartment.update"))," "))}function dr(l,p){if(1&l){var d=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){return t.CHM(d),t.oxw().addAll()}),t._UZ(1,"i",33),t._uU(2),t.ALo(3,"translate"),t.qZA()}2&l&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"General.Add")," "))}function cr(l,p){if(1&l){var d=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){return t.CHM(d),t.oxw().updetAll()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Update")," "))}function mr(l,p){if(1&l){var d=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){return t.CHM(d),t.oxw().clearForm()}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"General.Reset")," "))}function pr(l,p){1&l&&(t.TgZ(0,"th",35),t._uU(1,"#"),t.qZA())}function gr(l,p){if(1&l&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&l){var d=p.index;t.xp6(1),t.hij(" ",d+1," ")}}function hr(l,p){1&l&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"jobTitlebyDepartment.ArabicDepartmentName")," "))}function _r(l,p){if(1&l&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.hij(" ",d.dept_ar_name," ")}}function fr(l,p){1&l&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"jobTitlebyDepartment.EnglishDepartmentName")," "))}function vr(l,p){if(1&l&&(t.TgZ(0,"td",36),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.hij(" ",d.dept_en_name," ")}}function Zr(l,p){1&l&&(t.TgZ(0,"th",37),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"jobTitlebyDepartment.allJobTitle")," "))}function Cr(l,p){if(1&l){var d=t.EpF();t.TgZ(0,"a",44),t.NdJ("click",function(){t.CHM(d);var m=t.oxw(2).$implicit;return t.oxw(2).openDeleateDialogJop(m)}),t._UZ(1,"i",45),t.qZA()}}function br(l,p){if(1&l){var d=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(d);var _=t.oxw(2).$implicit;return t.oxw(2).editDate(_)}),t._UZ(1,"i",47),t.qZA()}if(2&l){var c=t.oxw().$implicit;t.s9C("matTooltip",c.function_en_name)}}function Ar(l,p){if(1&l&&(t.ynx(0),t.YNc(1,Cr,2,0,"a",42),t.YNc(2,br,2,1,"a",43),t.BQk()),2&l){var d=p.$implicit;t.xp6(1),t.Q6J("ngIf","DeleteArticalJob"===d.functionName),t.xp6(1),t.Q6J("ngIf","UpdateArticalJob"===d.functionName)}}function Kn(l,p){if(1&l&&(t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"td"),t.YNc(12,Ar,3,2,"ng-container",41),t.qZA(),t.qZA()),2&l){var d=p.$implicit,c=t.oxw(2);t.xp6(2),t.hij(" ",d.job_en_name," "),t.xp6(2),t.hij(" ",d.job_ar_name," "),t.xp6(2),t.Oqu(t.xi3(7,5,d.from_date,"dd-MM-yyyy")),t.xp6(3),t.Oqu(t.xi3(10,8,d.to_date,"dd-MM-yyyy")),t.xp6(3),t.Q6J("ngForOf",c.rowFunctions)}}function Tr(l,p){if(1&l&&(t.TgZ(0,"td",36),t.TgZ(1,"table",38),t.TgZ(2,"thead",39),t.TgZ(3,"tr"),t.TgZ(4,"th",40),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"th",40),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"th",40),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"th",40),t._uU(14),t.ALo(15,"translate"),t.qZA(),t._UZ(16,"th",40),t.qZA(),t.qZA(),t.TgZ(17,"tbody"),t.YNc(18,Kn,13,11,"tr",41),t.qZA(),t.qZA(),t.qZA()),2&l){var d=p.$implicit;t.xp6(5),t.hij(" ",t.lcZ(6,5,"labels.enName")," "),t.xp6(3),t.hij(" ",t.lcZ(9,7,"labels.arName")," "),t.xp6(3),t.hij(" ",t.lcZ(12,9,"labels.FromDate")," "),t.xp6(3),t.hij(" ",t.lcZ(15,11,"labels.ToDate")," "),t.xp6(4),t.Q6J("ngForOf",d.job_departments)}}function xr(l,p){1&l&&t._UZ(0,"th",35)}function Ir(l,p){if(1&l){var d=t.EpF();t.TgZ(0,"a",46),t.NdJ("click",function(){t.CHM(d);var m=t.oxw(2).$implicit;return t.oxw().editAll(m)}),t.ALo(1,"translate"),t._UZ(2,"i",50),t.qZA()}2&l&&t.s9C("matTooltip",t.lcZ(1,1,"General.Edit"))}function yr(l,p){if(1&l){var d=t.EpF();t.TgZ(0,"a",51),t.NdJ("click",function(){t.CHM(d);var m=t.oxw(2).$implicit;return t.oxw().openDeleateDialog(m)}),t.ALo(1,"translate"),t._UZ(2,"i",52),t.qZA()}2&l&&t.s9C("matTooltip",t.lcZ(1,1,"General.Delete"))}function qr(l,p){if(1&l&&(t.ynx(0),t.YNc(1,Ir,3,3,"a",43),t.YNc(2,yr,3,3,"a",49),t.BQk()),2&l){var d=p.$implicit;t.xp6(1),t.Q6J("ngIf","Edit"===d.functionName),t.xp6(1),t.Q6J("ngIf","Delete"===d.functionName)}}function Xn(l,p){if(1&l&&(t.TgZ(0,"td",48),t.YNc(1,qr,3,2,"ng-container",41),t.qZA()),2&l){var d=t.oxw();t.xp6(1),t.Q6J("ngForOf",d.rowFunctions)}}function Fr(l,p){1&l&&t._UZ(0,"tr",53)}function wr(l,p){1&l&&t._UZ(0,"tr",54)}function Sr(l,p){if(1&l&&(t.TgZ(0,"tr",55),t.TgZ(1,"td",56),t._uU(2),t.qZA(),t.qZA()),2&l){t.oxw();var d=t.MAs(37);t.xp6(2),t.hij(' No data matching the filter "',d.value,'" ')}}var Ur=function(p){return{functionId:p}},kr=function(){return[10]},Er=function(){var l=function(){function p(d,c,m,_,U,V,ee,me,xe){var Ae=this;(0,j.Z)(this,p),this.fb=d,this.spinner=c,this.jopTitleDepartmentService=m,this.toastr=_,this.route=U,this.dialog=V,this.authserv=ee,this.datePipe=me,this.languageService=xe,this.submitted=!1,this.itemsCounts=0,this.alljoblist=[],this.displayedColumns=["id","dept_en_name","dept_ar_name","JobTitle","actions"],this.currentDate=new Date,this.jopTitle=[],this.dep_id=0,this.curPage=1,this.initTable=!0,U.paramMap.subscribe(function(Me){Ae.userId=Number(Me.get("userId"))}),U.queryParamMap.subscribe(function(Me){Ae.functionId=Number(Me.get("functionId")),Ae.functionParentId=Number(Me.get("parentId")),Ae.functionId&&Ae.authserv.getUserRowFunctions(Ae.functionId).subscribe(function(Ct){Ct&&(Ae.rowFunctions=Ct)})}),this.EduCompId=Number(ee.getEduCompId())}return(0,Y.Z)(p,[{key:"ngOnInit",value:function(){this.getall(1),this.myForm=this.fb.group({dept_id:[0,[Z.kI.required]],job_departments:[{value:"",disabled:!0},[Z.kI.required]],from_date:[null],to_date:[null]},{validator:Q.D.dateBefore("from_date","to_date")})}},{key:"ngAfterViewInit",value:function(){var c=this;this.dataSource&&(this.dataSource.paginator=this.paginator,this.startSortingTable()),this.authserv.EduCompId.subscribe(function(m){c.EduCompId=m.EduCompId})}},{key:"formCtrls",get:function(){return this.myForm.controls}},{key:"applyFilter",value:function(c){this.dataSource.filter=c.trim().toLowerCase()}},{key:"customFilter",value:function(){this.dataSource.filterPredicate=function(c,m){var _,U,V,ee;return-1!=(null===(_=c.dept_ar_name)||void 0===_?void 0:_.toLocaleLowerCase().indexOf(m))||-1!=(null===(U=c.dept_en_name)||void 0===U?void 0:U.toLocaleLowerCase().indexOf(m))||-1!=(null===(V=c.job_departments)||void 0===V?void 0:V.map(function(me){return me.job_ar_name}).join(" ").toLocaleLowerCase().indexOf(m))||-1!=(null===(ee=c.job_departments)||void 0===ee?void 0:ee.map(function(me){return me.job_en_name}).join(" ").toLocaleLowerCase().indexOf(m))}}},{key:"getall",value:function(c){var m=this;return this.curPage=c,this.spinner.show(),this.jopTitleDepartmentService.getJopTitlebyDepartment(this.userId,c).subscribe(function(_){_&&(m.dataSource=new J.by(_.userDepartmentJobtitleList),m.itemsCounts=_.itemsCounts,m.username=_.employee_name,m.startSortingTable(),m.customFilter()),m.spinner.hide()})}},{key:"startSortingTable",value:function(){var c=this;this.dataSource.sortingDataAccessor=function(m,_){var U,V;return"JobTitle"===_?c.languageService.isArabic?null===(U=m.job_departments[0])||void 0===U?void 0:U.job_en_name:null===(V=m.job_departments[0])||void 0===V?void 0:V.job_en_name:m[_]},this.dataSource.sort=this.sort}},{key:"addAll",value:function(){var m,c=this;if(this.submitted=!0,this.myForm.valid){var _={user_id:this.userId,jobTitle_dept_id:this.formCtrls.job_departments.value,from_date:this.datePipe.transform(null!==(m=this.myForm.value.from_date)&&void 0!==m?m:this.currentDate),to_date:this.datePipe.transform(this.myForm.value.to_date)};this.spinner.show(),this.jopTitleDepartmentService.addJopTitlebyDepartment(_).subscribe(function(U){1==U.returnValue?(c.getall(1),c.dataSource.paginator=c.paginator,c.toastr.success("General.AddSuccessfully"),c.clearForm()):c.toastr.error(U.returnString),c.spinner.hide()})}else this.toastr.error("General.FormNotValid")}},{key:"updetAll",value:function(){var m,c=this;if(this.submitted=!0,this.myForm.valid){var _={user_id:this.userId,jobTitle_dept_id:this.formCtrls.job_departments.value,from_date:this.datePipe.transform(null!==(m=this.myForm.value.from_date)&&void 0!==m?m:this.currentDate),to_date:this.datePipe.transform(this.myForm.value.to_date)};this.spinner.show(),this.jopTitleDepartmentService.editAllDeparment(_,this.formCtrls.dept_id.value).subscribe(function(U){1==U.returnValue?(c.getall(c.curPage),c.toastr.success("General.UpdateSuccessfully"),c.clearForm(),c.dep_id=0):c.toastr.error(U.returnString),c.spinner.hide()})}else this.toastr.error("General.FormNotValid")}},{key:"editAll",value:function(c){var m;this.dep_id=c.dept_id,this.formCtrls.dept_id.setValue(c.dept_id),null===(m=this.formCtrls.job_departments)||void 0===m||m.setValue(c.job_departments.map(function(_){return _.dep_job_id}))}},{key:"editDate",value:function(c){var m=this;this.dialog.open(ar,{data:{user_dept_job_id:c.user_dept_job_id,from_date:c.from_date,to_date:c.to_date}}).afterClosed().subscribe(function(_){console.log(_),_&&m.getall(m.curPage)})}},{key:"deleteUserDeptJobTitle",value:function(c){var m=this;this.spinner.show(),this.jopTitleDepartmentService.deleteUserDeptJobTitle(this.userId,c.dept_id).subscribe(function(_){1==_.returnValue?(m.toastr.success("General.DeleteSuccessfully"),c.dept_id==m.formCtrls.dept_id.value&&m.clearForm(),1==m.dataSource.data.length&&m.curPage>1?(m.getall(m.curPage-1),m.paginator.pageIndex=m.curPage-1):m.getall(m.curPage)):m.toastr.error(_.returnString),m.spinner.hide()})}},{key:"openDeleateDialog",value:function(c){var m=this;this.dialog.open(jt.F,{data:{msg:this.languageService.isArabic?c.dept_en_name:c.dept_ar_name,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(_){_&&m.deleteUserDeptJobTitle(c)})}},{key:"deleteJopTitle",value:function(c){var m=this;this.spinner.show(),this.jopTitleDepartmentService.deleteJopTitle(c.user_dept_job_id).subscribe(function(_){1==_.returnValue?(m.toastr.success("General.DeleteSuccessfully"),m.getall(m.curPage)):m.toastr.error(_.returnString),m.spinner.hide()})}},{key:"openDeleateDialogJop",value:function(c){var m=this;this.dialog.open(jt.F,{data:{msg:this.languageService.isArabic?c.job_ar_name:c.job_en_name,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(_){_&&m.deleteJopTitle(c)})}},{key:"clearForm",value:function(){var c;this.myForm.reset(),null===(c=this.formCtrls.dept_id)||void 0===c||c.setValue(0),this.dep_id=0,this.submitted=!1}}]),p}();return l.\u0275fac=function(d){return new(d||l)(t.Y36(Z.qu),t.Y36(u.t2),t.Y36($n),t.Y36(un.K),t.Y36(e.gz),t.Y36(je.uw),t.Y36(C.e),t.Y36(f.uU),t.Y36(En.T))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-deparment-jop-title"]],viewQuery:function(d,c){var m;1&d&&(t.Gf(be.YE,7),t.Gf(Ye.NW,7)),2&d&&(t.iGM(m=t.CRH())&&(c.sort=m.first),t.iGM(m=t.CRH())&&(c.paginator=m.first))},decls:59,vars:36,consts:[[4,"ngIf"],["mat-raised-button","","routerLink","/dashboard/users",1,"btn","btn-warning","bg-light-warning","float-right",3,"queryParams"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[3,"formGroup"],[1,"col-md-6","col-12"],[3,"control","submitted"],[3,"control","departmentControl","submitted","multiple"],["label","labels.FromDate",3,"control","submitted"],["label","labels.ToDate",3,"control","submitted"],["align","end"],["mat-raised-button","","class","btn btn-info bg-light-info",3,"click",4,"ngIf"],["mat-raised-button","","class","btn btn-warning",3,"click",4,"ngIf"],["appearance","standard"],["matInput","","placeholder","Ex.ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","dept_ar_name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","dept_en_name"],["matColumnDef","JobTitle"],["matColumnDef","actions"],["mat-cell","","class","text-center px-2",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of departments",3,"pageSizeOptions","length","pageSize","page"],["mat-raised-button","",1,"btn","btn-info","bg-light-info",3,"click"],[1,"fa","fa-plus","mr-1"],["mat-raised-button","",1,"btn","btn-warning",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],[1,"table","table-sm"],[1,"thead-dark"],["scope","col"],[4,"ngFor","ngForOf"],["class","danger p-0",3,"click",4,"ngIf"],["class","success p-0",3,"matTooltip","click",4,"ngIf"],[1,"danger","p-0",3,"click"],["aria-hidden","true",1,"fa","fa-times","fa","fa-white"],[1,"success","p-0",3,"matTooltip","click"],["aria-hidden","true",1,"ft-edit-2","font-medium-3","mr-2"],["mat-cell","",1,"text-center","px-2"],["class","danger p-0",3,"matTooltip","click",4,"ngIf"],[1,"ft-edit-2","font-medium-3","mr-2"],[1,"danger","p-0",3,"matTooltip","click"],[1,"ft-trash","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","5",1,"mat-cell"]],template:function(d,c){1&d&&(t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-title"),t.YNc(2,sr,4,5,"span",0),t.YNc(3,ur,4,5,"span",0),t._uU(4),t.TgZ(5,"a",1),t._uU(6),t.ALo(7,"translate"),t.qZA(),t.qZA(),t.TgZ(8,"mat-card-content",2),t.TgZ(9,"div",3),t.TgZ(10,"div",4),t.TgZ(11,"form",5),t.TgZ(12,"div",3),t.TgZ(13,"div",6),t._UZ(14,"department-dropdown",7),t.qZA(),t.TgZ(15,"div",6),t._UZ(16,"job-title-by-department-dropdown",8),t.qZA(),t.TgZ(17,"div",6),t._UZ(18,"app-datepicker",9),t.qZA(),t.TgZ(19,"div",6),t._UZ(20,"app-datepicker",10),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"mat-card-actions",11),t.YNc(22,dr,4,3,"button",12),t.YNc(23,cr,3,3,"button",12),t.YNc(24,mr,3,3,"button",13),t.qZA(),t.qZA(),t.TgZ(25,"div",3),t.TgZ(26,"div",4),t.TgZ(27,"mat-card"),t.TgZ(28,"mat-card-title"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"mat-card-content",2),t.TgZ(32,"mat-form-field",14),t.TgZ(33,"mat-label"),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"input",15,16),t.NdJ("keyup",function(_){return c.applyFilter(_.target.value)}),t.qZA(),t.qZA(),t.TgZ(38,"div",17),t.TgZ(39,"table",18),t.ynx(40,19),t.YNc(41,pr,2,0,"th",20),t.YNc(42,gr,2,1,"td",21),t.BQk(),t.ynx(43,22),t.YNc(44,hr,3,3,"th",23),t.YNc(45,_r,2,1,"td",21),t.BQk(),t.ynx(46,24),t.YNc(47,fr,3,3,"th",23),t.YNc(48,vr,2,1,"td",21),t.BQk(),t.ynx(49,25),t.YNc(50,Zr,3,3,"th",23),t.YNc(51,Tr,19,13,"td",21),t.BQk(),t.ynx(52,26),t.YNc(53,xr,1,0,"th",20),t.YNc(54,Xn,2,1,"td",27),t.BQk(),t.YNc(55,Fr,1,0,"tr",28),t.YNc(56,wr,1,0,"tr",29),t.YNc(57,Sr,3,1,"tr",30),t.qZA(),t.qZA(),t.TgZ(58,"mat-paginator",31),t.NdJ("page",function(_){return c.getall(_.pageIndex+1)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&d&&(t.xp6(2),t.Q6J("ngIf",0==c.dep_id),t.xp6(1),t.Q6J("ngIf",c.dep_id>0),t.xp6(1),t.hij(" - ",c.username," "),t.xp6(1),t.Q6J("queryParams",t.VKq(33,Ur,c.functionParentId)),t.xp6(1),t.hij(" ",t.lcZ(7,27,"General.Back")," "),t.xp6(5),t.Q6J("formGroup",c.myForm),t.xp6(3),t.Q6J("control",c.formCtrls.dept_id)("submitted",c.submitted),t.xp6(2),t.Q6J("control",c.formCtrls.job_departments)("departmentControl",c.formCtrls.dept_id)("submitted",c.submitted)("multiple",!0),t.xp6(2),t.Q6J("control",c.formCtrls.from_date)("submitted",c.submitted),t.xp6(2),t.Q6J("control",c.formCtrls.to_date)("submitted",c.submitted),t.xp6(2),t.Q6J("ngIf",0==c.dep_id),t.xp6(1),t.Q6J("ngIf",c.dep_id>0),t.xp6(1),t.Q6J("ngIf",c.dep_id>0),t.xp6(5),t.hij(" ",t.lcZ(30,29,"jobTitlebyDepartment.department")," "),t.xp6(5),t.Oqu(t.lcZ(35,31,"General.Search")),t.xp6(5),t.Q6J("dataSource",c.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",c.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",c.displayedColumns),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(35,kr))("length",c.itemsCounts)("pageSize",10))},directives:[E.a8,E.n5,f.O5,ce.zs,e.yS,E.dn,Z._Y,Z.JL,Z.sg,or.C,rr.a,lr.Q,E.hq,k.KE,k.hX,K.Nt,J.BZ,be.YE,J.w1,J.fO,J.Dz,J.as,J.nj,J.Ee,Ye.NW,ce.lW,J.ge,J.ev,be.nU,f.sg,Xe.gM,J.XQ,J.Gk],pipes:[se.X$,f.rS,f.uU],styles:[""]}),l}(),Dr=h(4920),Nr=h(2850),Mr=h(6896),Qr=h(6137);function Jr(l,p){1&l&&(t.TgZ(0,"th",20),t._uU(1,"#"),t.qZA())}function Or(l,p){if(1&l&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&l){var d=p.index;t.xp6(1),t.Oqu(d+1)}}function Lr(l,p){1&l&&(t.TgZ(0,"th",22),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Name")," "))}function Pr(l,p){if(1&l&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(d.ar_name)}}function Yr(l,p){1&l&&(t.TgZ(0,"th",22),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Email")," "))}function jr(l,p){if(1&l&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(d.account_email)}}function Br(l,p){1&l&&(t.TgZ(0,"th",22),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Mobile")," "))}function Rr(l,p){if(1&l&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(d.mobile)}}function Gr(l,p){1&l&&(t.TgZ(0,"th",22),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"labels.Code")," "))}function Vr(l,p){if(1&l&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&l){var d=p.$implicit;t.xp6(1),t.Oqu(d.code)}}function Hr(l,p){1&l&&(t.TgZ(0,"th",20),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&l&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"actions")))}function Wr(l,p){if(1&l){var d=t.EpF();t.TgZ(0,"a",25),t.NdJ("click",function(){t.CHM(d);var m=t.oxw(2).$implicit;return t.oxw(2).openDeleateDialog(m)}),t.ALo(1,"translate"),t._UZ(2,"i",26),t.qZA()}2&l&&t.s9C("matTooltip",t.lcZ(1,1,"General.Delete"))}function zr(l,p){if(1&l&&(t.ynx(0),t.YNc(1,Wr,3,3,"a",24),t.BQk()),2&l){var d=p.$implicit;t.xp6(1),t.Q6J("ngIf","Delete"===d.functionName)}}function $r(l,p){if(1&l&&(t.TgZ(0,"td",21),t.YNc(1,zr,2,1,"ng-container",23),t.qZA()),2&l){var d=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",d.rowFunctions)}}function Kr(l,p){1&l&&t._UZ(0,"tr",27)}function Xr(l,p){1&l&&t._UZ(0,"tr",28)}function el(l,p){1&l&&t._UZ(0,"tr",29)}function tl(l,p){if(1&l&&(t.TgZ(0,"table",7),t.ynx(1,8),t.YNc(2,Jr,2,0,"th",9),t.YNc(3,Or,2,1,"td",10),t.BQk(),t.ynx(4,11),t.YNc(5,Lr,3,3,"th",12),t.YNc(6,Pr,2,1,"td",10),t.BQk(),t.ynx(7,13),t.YNc(8,Yr,3,3,"th",12),t.YNc(9,jr,2,1,"td",10),t.BQk(),t.ynx(10,14),t.YNc(11,Br,3,3,"th",12),t.YNc(12,Rr,2,1,"td",10),t.BQk(),t.ynx(13,15),t.YNc(14,Gr,3,3,"th",12),t.YNc(15,Vr,2,1,"td",10),t.BQk(),t.ynx(16,16),t.YNc(17,Hr,3,3,"th",9),t.YNc(18,$r,2,1,"td",10),t.BQk(),t.YNc(19,Kr,1,0,"tr",17),t.YNc(20,Xr,1,0,"tr",18),t.YNc(21,el,1,0,"tr",19),t.qZA()),2&l){var d=t.oxw();t.Q6J("dataSource",d.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",d.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",d.displayedColumns)}}function nl(l,p){if(1&l&&t._UZ(0,"app-table-skeleton",30),2&l){var d=t.oxw();t.Q6J("displayedColumns",d.displayedColumns)}}var il=function(){return[10]},al=function(){var l=function(){function p(d,c,m,_,U,V,ee,me,xe){var Ae=this;(0,j.Z)(this,p),this.fb=d,this.toastr=c,this.userService=m,this.authserv=_,this.spinner=U,this.dialog=V,this.route=ee,this.appConstants=me,this.languageService=xe,this.submitted=!1,this.isLoaded=!1,this.itemsCounts=0,this.items=16184,this.curPage=1,this.displayedColumns=["#","ar_name","account_email","mobile","code","actions"],ee.queryParamMap.subscribe(function(Me){Ae.functionId=Number(Me.get("functionId")),Ae.functionId&&Ae.authserv.getUserRowFunctions(Ae.functionId).subscribe(function(Ct){Ct&&(Ae.rowFunctions=Ct)})}),this.EduCompId=Number(this.authserv.getEduCompId())}return(0,Y.Z)(p,[{key:"ngOnInit",value:function(){this.myForm=this.fb.group({userId:[0,[Z.kI.required]],userName:[null,[Z.kI.required,Z.kI.pattern(/^[a-zA-Z \u0600-\u065F\u066A-\u06EF\u06FA-\u06FF]+$/),Q.D.whiteSpace]],email:[null,[Z.kI.required,Z.kI.email]],phone:[null,[Z.kI.required,Z.kI.pattern(/^(\(?\+?[0-9]*\)?)?[0-9_ \-\(\)\S*$]*$/),Z.kI.maxLength(this.appConstants.MobileLength),Z.kI.minLength(this.appConstants.MobileLength),Q.D.MobileStartsWith]],password:[null,[Z.kI.required,Q.D.whiteSpace,Z.kI.minLength(3)]],confirmedPass:[null],code:[null,[Z.kI.required,Q.D.whiteSpace]]},{validator:Q.D.mustMatch("password","confirmedPass")}),this.getAllUsers(this.curPage)}},{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"ngAfterViewInit",value:function(){var c=this;this.dataSource&&(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort),this.authserv.EduCompId.subscribe(function(m){c.EduCompId=m.EduCompId,c.resetSearch(),c.dataSource.paginator=c.paginator})}},{key:"applyFilter",value:function(c){this.dataSource.filter=c.target.value.trim().toLowerCase()}},{key:"getAllUsers",value:function(c){var _,U,V,ee,m=this;this.isLoaded=!1;var me={ar_name:null===(_=this.FormCtrls.userName.value)||void 0===_?void 0:_.trim().toLowerCase(),account_email:null===(U=this.FormCtrls.email.value)||void 0===U?void 0:U.trim().toLowerCase(),mobile:null===(V=this.FormCtrls.phone.value)||void 0===V?void 0:V.trim(),code:null===(ee=this.FormCtrls.code.value)||void 0===ee?void 0:ee.trim().toLowerCase()};this.itemsCounts=0,this.curPage=c,this.userService.getAllUsers(this.EduCompId,c,me).subscribe(function(xe){xe&&(m.dataSource=new J.by(xe.usersList),m.itemsCounts=xe.countItems,m.dataSource.sort=m.sort,m.isLoaded=!0)})}},{key:"editUser",value:function(c){var m,_,U,V,ee;null===(m=this.FormCtrls.userId)||void 0===m||m.setValue(c.user_ID),null===(_=this.FormCtrls.userName)||void 0===_||_.setValue(c.ar_name),null===(U=this.FormCtrls.email)||void 0===U||U.setValue(c.account_email),null===(V=this.FormCtrls.phone)||void 0===V||V.setValue(c.mobile),null===(ee=this.FormCtrls.code)||void 0===ee||ee.setValue(c.code)}},{key:"removeUser",value:function(c){var m=this;this.spinner.show(),this.userService.deleteUser(c.user_ID).subscribe(function(_){_&&1==(null==_?void 0:_.returnValue)?(m.toastr.success("General.DeleteSuccessfully"),c.user_ID==m.FormCtrls.userId.value&&m.clearForm(),1==m.dataSource.data.length&&m.curPage>1?(m.getAllUsers(m.curPage-1),m.paginator.pageIndex=m.curPage-1):m.getAllUsers(m.curPage)):m.toastr.error(null==_?void 0:_.returnString),m.spinner.hide()})}},{key:"onSubmit",value:function(){var m,_,U,V,ee,me,xe,c=this;if(this.submitted=!0,this.myForm.valid){this.spinner.show();var Ae={user:{}};Ae.user.user_ID=null===(m=this.FormCtrls.userId)||void 0===m?void 0:m.value,Ae.user.ar_name=null===(_=this.FormCtrls.userName)||void 0===_?void 0:_.value,Ae.user.account_email=null===(V=null===(U=this.FormCtrls)||void 0===U?void 0:U.email)||void 0===V?void 0:V.value,Ae.user.mobile=null===(ee=this.FormCtrls.phone)||void 0===ee?void 0:ee.value,Ae.user.account_password=null===(me=this.FormCtrls.password)||void 0===me?void 0:me.value,Ae.code=null===(xe=this.FormCtrls.code)||void 0===xe?void 0:xe.value,Ae.EduCompId=this.EduCompId,this.userService.addEditUser(Ae).subscribe(function(Me){Me&&null!==Me&&(0==Me.returnValue?c.toastr.error(Me.returnString):(c.clearForm(),0==Ae.user.user_ID?(c.getAllUsers(1),c.dataSource.paginator=c.paginator):c.getAllUsers(c.curPage),c.toastr.success(0==Ae.user.user_ID?"General.AddSuccessfully":"General.UpdateSuccessfully"))),c.spinner.hide()})}else this.toastr.error("General.FormNotValid")}},{key:"openDeleateDialog",value:function(c){var m=this;this.dialog.open(jt.F,{data:{msg:c.ar_name,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(_){_&&m.removeUser(c)})}},{key:"clearForm",value:function(){this.myForm.reset(),this.FormCtrls.userId.setValue(0),this.submitted=!1}},{key:"resetSearch",value:function(){this.clearForm(),this.getAllUsers(1),this.dataSource.paginator=this.paginator}},{key:"getDataFromHR",value:function(){var c=this;this.spinner.show(),this.userService.copyDataFromHR(this.EduCompId).subscribe(function(m){c.spinner.hide(),m.returnValue==Dr.N.success&&(c.getAllUsers(1),c.toastr.success("copyHrSuccess"))})}}]),p}();return l.\u0275fac=function(d){return new(d||l)(t.Y36(Z.qu),t.Y36(un.K),t.Y36(Vn),t.Y36(C.e),t.Y36(u.t2),t.Y36(je.uw),t.Y36(e.gz),t.Y36(Nr.$),t.Y36(En.T))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-users"]],viewQuery:function(d,c){var m;1&d&&(t.Gf(Ye.NW,5),t.Gf(be.YE,5)),2&d&&(t.iGM(m=t.CRH())&&(c.paginator=m.first),t.iGM(m=t.CRH())&&(c.sort=m.first))},decls:12,vars:10,consts:[[1,"admin-index-card"],["title","labels.Employees"],[1,"orange-btn","radius-btn","get-from-hr","integration-btn","float-right","d-inline-block","mx-1","mb-2",3,"click"],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource",4,"ngIf","ngIfElse"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","disabled","page"],["loading",""],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","ar_name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","account_email"],["matColumnDef","mobile"],["matColumnDef","code"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],[4,"ngFor","ngForOf"],["class","danger p-0",3,"matTooltip","click",4,"ngIf"],[1,"danger","p-0",3,"matTooltip","click"],[1,"fa","fa-trash","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[3,"displayedColumns"]],template:function(d,c){if(1&d&&(t.TgZ(0,"mat-card",0),t.TgZ(1,"mat-card-title"),t._UZ(2,"page-title",1),t.TgZ(3,"button",2),t.NdJ("click",function(){return c.getDataFromHR()}),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.qZA(),t.TgZ(6,"mat-card-content"),t.TgZ(7,"div",3),t.YNc(8,tl,22,3,"table",4),t.TgZ(9,"mat-paginator",5),t.NdJ("page",function(U){return c.getAllUsers(U.pageIndex+1)}),t.qZA(),t.qZA(),t.YNc(10,nl,1,1,"ng-template",null,6,t.W1O),t.qZA(),t.qZA()),2&d){var m=t.MAs(11);t.xp6(4),t.hij(" ",t.lcZ(5,7,"getFromHr")," "),t.xp6(4),t.Q6J("ngIf",c.isLoaded)("ngIfElse",m),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(9,il))("length",c.itemsCounts)("pageSize",10)("disabled",!c.isLoaded)}},directives:[E.a8,E.n5,Mr.T,E.dn,f.O5,Ye.NW,J.BZ,be.YE,J.w1,J.fO,J.Dz,J.as,J.nj,J.Ee,J.ge,J.ev,be.nU,f.sg,Xe.gM,J.XQ,J.Gk,Qr.I],pipes:[se.X$],styles:[""]}),l}(),ol=h(6770),ll=[{path:"",component:function(){var l=function(){function p(){(0,j.Z)(this,p)}return(0,Y.Z)(p,[{key:"ngOnInit",value:function(){}}]),p}();return l.\u0275fac=function(d){return new(d||l)},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-dashboard"]],decls:3,vars:0,consts:[["count","5","appearance","circle"]],template:function(d,c){1&d&&(t.TgZ(0,"p"),t._uU(1,"dashboard works!"),t.qZA(),t._UZ(2,"ngx-skeleton-loader",0))},directives:[ol.xr],styles:[""]}),l}(),data:{breadcrumb:{label:"Navbar.Dashboard",view:"dashboard"}}},{path:"users",children:[{path:"",redirectTo:"index",pathMatch:"full",data:{breadcrumb:{label:"labels.Users",disable:!0},view:"user-index"}},{path:"index",component:al,data:{breadcrumb:"labels.Employees",view:"user-index"}},{path:"user-roles-branches/:userId/:roleId",component:tr,data:{view:"user-roles"}},{path:"functions",component:mo},{path:"center-branches",component:ja,data:{breadcrumb:"labels.Branch",view:"center-branches"}},{path:"students-index",component:Fa},{path:"roles",component:So,data:{breadcrumb:"Navbar.Roles",view:"roles"}},{path:"role-fuctions/:roleId",component:Eo,data:{breadcrumb:"labels.AddRoleFunctions",view:"role-functions"}},{path:"user-dep-job/:userId",component:Er,data:{breadcrumb:"jobTitlebyDepartment.adddepartment",view:"user-dep-job"}}]},{path:"reservation",children:[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:vi},{path:"edit-reservation/:reservationId",component:ct},{path:"reservation-status/:reservationId",component:Vi},{path:"student-discount",component:da},{path:"balance-details/:userId",component:F.g}]},{path:"educational-setup",loadChildren:function(){return h.e(957).then(h.bind(h,3691)).then(function(p){return p.EducationalSetupModule})}},{path:"setup",loadChildren:function(){return Promise.resolve().then(h.bind(h,9941)).then(function(p){return p.SetupModule})},data:{breadcrumb:{label:"Navbar.Setup",disable:!0}}},{path:"exams-setup",loadChildren:function(){return Promise.all([h.e(592),h.e(440)]).then(h.bind(h,6440)).then(function(p){return p.ExamsModule})},data:{breadcrumb:"Navbar.ExamsSetup"}},{path:"reports",loadChildren:function(){return h.e(264).then(h.bind(h,4264)).then(function(p){return p.ReportsModule})}}],sl=function(){var l=(0,Y.Z)(function p(){(0,j.Z)(this,p)});return l.\u0275fac=function(d){return new(d||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[[e.Bz.forChild(ll)],e.Bz]}),l}(),ul=h(8198),ei=h(9778),dl=h(9941),cl=function(){var l=(0,Y.Z)(function p(){(0,j.Z)(this,p)});return l.\u0275fac=function(d){return new(d||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({providers:[{provide:pe._A,useClass:ei.B},{provide:pe.sG,useValue:ei.F}],imports:[[f.ez,sl,Z.u5,Z.UX,T.m,S.q,ul.IJ,dl.SetupModule,u.ef]]}),l}()},1803:function(rt,Fe,h){h.d(Fe,{Y:function(){return ne}});var Y=h(5671),j=h(3144),f=h(3075),Z=h(8966),T=h(4330),S=h(1891),e=h(8555),F=h(9430),Q=h(4423),t=h(4159),ae=h(6002),W=h(7011),u=h(6405),C=h(9808),E=h(8657),ce=h(7834),k=h(6896),K=h(8632),Ie=h(5471),pe=h(2222),se=h(4724),ye=h(2925),ne=function(){var ze=function(){function Te(Ge,ue,he,Ne,fe,H,Qe,$e,ht,_t,Nt,Rt,bt,Mt){var Ke=this;(0,Y.Z)(this,Te),this.route=Ge,this.router=ue,this.fb=he,this.toastr=Ne,this.SubjectsService=fe,this.SubjectMaterialsService=H,this.courseService=Qe,this.authserv=$e,this.spinner=ht,this.datePipe=_t,this.languageService=Nt,this.appStrings=Rt,this.data=bt,this.dialogRef=Mt,this.submitted=!1,this.Teachers=[],this.getGroupsValue=[],this.isMandatoryRadioList=[{label:"labels.Yes",value:!0},{label:"noOptional",value:!1}],this.subjectId=bt.subjectId,this.unitId=bt.unitId,this.materialId=bt.materialId,this.route.queryParamMap.subscribe(function(ft){Ke.functionId=Number(ft.get("functionId")),Ke.functionId&&Ke.authserv.getUserRowFunctions(Ke.functionId).subscribe(function(zt){zt&&(Ke.rowFunctions=zt)})})}return(0,j.Z)(Te,[{key:"onCloseDialog",value:function(){var ue=null;this.materialId&&(ue={id:this.materialId,ar_name:this.materialName,type:this.appStrings.stageLecture,order:this.order,isMandatory:this.isMandatory}),this.dialogRef.close(ue)}},{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.branchId=this.authserv.getBranchId(),this.myForm=this.fb.group({subjectId:[this.subjectId,[f.kI.required]],EditedMaterialId:[this.materialId],materialName:["",[f.kI.required,T.D.whiteSpace]],IsOnline:[1,[f.kI.required]],num_views:[0],fromDate:["",[f.kI.required]],toDate:[""],orderNum:["",[f.kI.required,T.D.bigZero]],isMandatory:[!0,[f.kI.required]]},{validator:T.D.dateBefore("fromDate","toDate")})}},{key:"FormCtrl",get:function(){return this.myForm.controls}},{key:"ngAfterViewInit",value:function(){var ue=this;this.authserv.EduCompId.subscribe(function(he){ue.EduCompId=he.EduCompId}),this.authserv.branchId.subscribe(function(he){ue.branchId=he.branchId}),null!=this.materialId&&this.getMaterialById()}},{key:"addEditMaterial",value:function(){var he,Ne,fe,H,Qe,$e,ue=this;if(this.submitted=!0,1==this.FormCtrl.IsOnline.value&&Number(null===(he=this.FormCtrl.num_views)||void 0===he?void 0:he.value)<0)this.toastr.warning("Material.noOfViesMsgError");else if(this.myForm.valid){this.spinner.show();var ht={EditedMaterialId:this.materialId,isOnline:null===(Ne=this.FormCtrl.IsOnline)||void 0===Ne?void 0:Ne.value,subjectId:this.subjectId,unitID:this.unitId,num_views:null===(fe=this.FormCtrl.num_views)||void 0===fe?void 0:fe.value,materialName:null===(H=this.FormCtrl.materialName)||void 0===H?void 0:H.value,toDate:this.datePipe.transform(null===(Qe=this.FormCtrl.toDate)||void 0===Qe?void 0:Qe.value),fromDate:this.datePipe.transform(null===($e=this.FormCtrl.fromDate)||void 0===$e?void 0:$e.value),orderNum:this.FormCtrl.orderNum.value,isMandatory:this.FormCtrl.isMandatory.value};this.SubjectMaterialsService.addEditMaterial(ht).subscribe(function(_t){1==_t.returnValue?(ue.toastr.success(null==ue.materialId?"General.AddSuccessfully":"General.UpdateSuccessfully"),ue.materialName=ht.materialName,ue.order=ht.orderNum,ue.isMandatory=ht.isMandatory,ue.submitted=!1,ue.materialId=_t.Id,ue.onCloseDialog(),ue.router.navigate(["/dashboard/setup/course/structure-lectures"],{queryParams:{materialId:_t.Id,functionId:ue.functionId,subjectId:ue.subjectId}})):ue.toastr.error(_t.returnString),ue.spinner.hide()})}}},{key:"getMaterialById",value:function(){var ue=this;this.spinner.show(),this.SubjectMaterialsService.getMaterialById(this.subjectId,this.materialId).subscribe(function(he){1==he.retunValue&&(ue.myForm.patchValue(he.model),ue.FormCtrl.num_views.setValue(0),ue.materialName=he.model.materialName),ue.spinner.hide()})}},{key:"getGroupsByEduCompId",value:function(){var ue=this;this.SubjectMaterialsService.getGroupsByEduCompId(this.EduCompId).subscribe(function(he){1==he.retunValue&&(ue.groups=he.lstEduCompGroups)})}},{key:"getTeacherByEduCompId",value:function(){var ue=this;this.spinner.show(),this.SubjectsService.getTeacherBySubjectAndEduCompId(this.EduCompId,this.subjectId).subscribe(function(he){1==he.retunValue&&(ue.Teachers=he.teachers),ue.spinner.hide()})}},{key:"returnSearchedUnitsBySubjectId",value:function(){var ue=this;this.SubjectMaterialsService.returnSearchedUnitsBySubjectId(this.subjectId).subscribe(function(he){ue.units=he})}},{key:"returnSearchedLessonsByUnitId",value:function(ue){var he=this;this.SubjectMaterialsService.returnSearchedLessonsByUnitId(ue).subscribe(function(Ne){he.Lessons=Ne})}}]),Te}();return ze.\u0275fac=function(Ge){return new(Ge||ze)(S.Y36(e.gz),S.Y36(e.F0),S.Y36(f.qu),S.Y36(F.K),S.Y36(Q.n),S.Y36(t.r),S.Y36(ae.N),S.Y36(W.e),S.Y36(u.t2),S.Y36(C.uU),S.Y36(E.T),S.Y36(ce.e),S.Y36(Z.WI),S.Y36(Z.so))},ze.\u0275cmp=S.Xpm({type:ze,selectors:[["app-add-material-main-data"]],decls:21,vars:17,consts:[["mat-dialog-title","",1,"mb-2"],["addTitle","course.AddLecture","editTitle","course.UpdateLecture",3,"id"],[1,"fas","fa-times-circle","closeIcon","float-right",3,"mat-dialog-close"],[1,"dark-blue",3,"percentage"],[1,"mt-3"],[3,"formGroup"],[1,"row"],[1,"col-12"],["label","labels.Name","type","text",3,"control","submitted"],["label","labels.FromDate",3,"control","submitted"],["label","labels.ToDate",3,"control","submitted"],["label","labels.Order","type","number",3,"control","submitted"],["label","isRequired",3,"control","radioList"],["mat-dialog-actions",""],[1,"orange-btn","radius-btn","w-100",3,"click"]],template:function(Ge,ue){var he;1&Ge&&(S.TgZ(0,"p",0),S._UZ(1,"page-title",1),S._UZ(2,"i",2),S.qZA(),S._UZ(3,"progress-bar",3),S.TgZ(4,"div",4),S.TgZ(5,"form",5),S.TgZ(6,"div",6),S.TgZ(7,"div",7),S._UZ(8,"app-input",8),S.qZA(),S.TgZ(9,"div",7),S._UZ(10,"app-datepicker",9),S.qZA(),S.TgZ(11,"div",7),S._UZ(12,"app-datepicker",10),S.qZA(),S.TgZ(13,"div",7),S._UZ(14,"app-input",11),S.qZA(),S.TgZ(15,"div",7),S._UZ(16,"app-radio-button",12),S.qZA(),S.qZA(),S.qZA(),S.TgZ(17,"div",13),S.TgZ(18,"button",14),S.NdJ("click",function(){return ue.addEditMaterial()}),S._uU(19),S.ALo(20,"translate"),S.qZA(),S.qZA(),S.qZA()),2&Ge&&(S.xp6(1),S.Q6J("id",null!==(he=ue.materialId)&&void 0!==he?he:0),S.xp6(1),S.Q6J("mat-dialog-close",!1),S.xp6(1),S.Q6J("percentage",100),S.xp6(2),S.Q6J("formGroup",ue.myForm),S.xp6(3),S.Q6J("control",ue.FormCtrl.materialName)("submitted",ue.submitted),S.xp6(2),S.Q6J("control",ue.FormCtrl.fromDate)("submitted",ue.submitted),S.xp6(2),S.Q6J("control",ue.FormCtrl.toDate)("submitted",ue.submitted),S.xp6(2),S.Q6J("control",ue.FormCtrl.orderNum)("submitted",ue.submitted),S.xp6(2),S.Q6J("control",ue.FormCtrl.isMandatory)("radioList",ue.isMandatoryRadioList),S.xp6(3),S.hij(" ",S.lcZ(20,15,"General.Done")," "))},directives:[Z.uh,k.T,Z.ZT,K.R,f._Y,f.JL,f.sg,Ie.a,pe.Q,se._,Z.H8],pipes:[ye.X$],styles:[".mat-tab-group[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:10px!important}.mat-card-actions[_ngcontent-%COMP%]{margin-bottom:0!important}.mat-radio-group[_ngcontent-%COMP%]{margin:0!important;padding:0 10px!important;display:flex;justify-content:space-around}.mat-radio-button[_ngcontent-%COMP%]{margin:0 10px!important}"]}),ze}()},6160:function(rt,Fe,h){h.d(Fe,{M:function(){return Fn}});var Y=h(5671),j=h(3144),f=h(3075),Z=h(8966),T=h(6087),S=h(4847),e=h(2075),F=h(1069),Q=h(4330),t=h(567),ae=h(1059),W=h(4850),u=h(1891),C=h(3938),E=h(7011),ce=h(9430),k=h(6405),K=h(5013),Ie=h(9224),pe=h(5471),se=h(9808),ye=h(7423),ne=h(5245),ze=h(9814),Te=h(7322),Ge=h(2925);function ue(ve,Je){if(1&ve){var B=u.EpF();u.TgZ(0,"div",26),u.TgZ(1,"button",27),u.NdJ("click",function(){return u.CHM(B),u.oxw().removeQuestionImg()}),u.ALo(2,"translate"),u.TgZ(3,"mat-icon"),u._uU(4,"delete"),u.qZA(),u.qZA(),u.qZA()}2&ve&&(u.xp6(1),u.s9C("title",u.lcZ(2,1,"labels.RemoveImage")))}function he(ve,Je){if(1&ve){var B=u.EpF();u.TgZ(0,"div",26),u.TgZ(1,"button",27),u.NdJ("click",function(){return u.CHM(B),u.oxw(2).answerOneRemove_image()}),u.ALo(2,"translate"),u.TgZ(3,"mat-icon"),u._uU(4,"delete"),u.qZA(),u.qZA(),u.qZA()}2&ve&&(u.xp6(1),u.s9C("title",u.lcZ(2,1,"labels.RemoveImage")))}function Ne(ve,Je){if(1&ve){var B=u.EpF();u.TgZ(0,"div",26),u.TgZ(1,"button",27),u.NdJ("click",function(){return u.CHM(B),u.oxw(2).answerTwoRemove_image()}),u.ALo(2,"translate"),u.TgZ(3,"mat-icon"),u._uU(4,"delete"),u.qZA(),u.qZA(),u.qZA()}2&ve&&(u.xp6(1),u.s9C("title",u.lcZ(2,1,"labels.RemoveImage")))}function fe(ve,Je){if(1&ve){var B=u.EpF();u.TgZ(0,"div",26),u.TgZ(1,"button",27),u.NdJ("click",function(){return u.CHM(B),u.oxw(2).answerThreeRemove_image()}),u.ALo(2,"translate"),u.TgZ(3,"mat-icon"),u._uU(4,"delete"),u.qZA(),u.qZA(),u.qZA()}2&ve&&(u.xp6(1),u.s9C("title",u.lcZ(2,1,"labels.RemoveImage")))}function H(ve,Je){if(1&ve){var B=u.EpF();u.TgZ(0,"div",26),u.TgZ(1,"button",27),u.NdJ("click",function(){return u.CHM(B),u.oxw(2).answerFourRemove_image()}),u.ALo(2,"translate"),u.TgZ(3,"mat-icon"),u._uU(4,"delete"),u.qZA(),u.qZA(),u.qZA()}2&ve&&(u.xp6(1),u.s9C("title",u.lcZ(2,1,"labels.RemoveImage")))}function Qe(ve,Je){if(1&ve){var B=u.EpF();u.ynx(0,2),u.TgZ(1,"mat-card"),u.TgZ(2,"mat-radio-group",28),u.TgZ(3,"mat-radio-button",29),u.NdJ("click",function(){return u.CHM(B),u.oxw().onSelectCorrect(0)}),u.qZA(),u.qZA(),u.TgZ(4,"mat-card-subtitle"),u._uU(5),u.ALo(6,"translate"),u.qZA(),u.TgZ(7,"mat-card-content"),u.TgZ(8,"div",2),u.TgZ(9,"div",6),u._UZ(10,"app-input",30),u.qZA(),u.TgZ(11,"div",6),u.TgZ(12,"div",2),u.TgZ(13,"div",8),u.TgZ(14,"mat-label"),u._uU(15),u.ALo(16,"translate"),u.qZA(),u.TgZ(17,"label",31),u._UZ(18,"i",32),u.qZA(),u.TgZ(19,"input",33),u.NdJ("change",function(I){return u.CHM(B),u.oxw().importOneFile(I)}),u.qZA(),u.qZA(),u.YNc(20,he,5,3,"div",10),u.TgZ(21,"div",11),u.TgZ(22,"div",12),u._UZ(23,"img",13),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(24,"mat-card"),u.TgZ(25,"mat-radio-group",34),u.TgZ(26,"mat-radio-button",29),u.NdJ("click",function(){return u.CHM(B),u.oxw().onSelectCorrect(1)}),u.qZA(),u.qZA(),u.TgZ(27,"mat-card-subtitle"),u._uU(28),u.ALo(29,"translate"),u.qZA(),u.TgZ(30,"mat-card-content"),u.TgZ(31,"div",2),u.TgZ(32,"div",6),u._UZ(33,"app-input",30),u.qZA(),u.TgZ(34,"div",6),u.TgZ(35,"div",2),u.TgZ(36,"div",8),u.TgZ(37,"mat-label"),u._uU(38),u.ALo(39,"translate"),u.qZA(),u.TgZ(40,"label",31),u._UZ(41,"i",32),u.qZA(),u.TgZ(42,"input",35),u.NdJ("change",function(I){return u.CHM(B),u.oxw().importTwoFile(I)}),u.qZA(),u.qZA(),u.YNc(43,Ne,5,3,"div",10),u.TgZ(44,"div",11),u.TgZ(45,"div",12),u._UZ(46,"img",13),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(47,"mat-card"),u.TgZ(48,"mat-radio-group",36),u.TgZ(49,"mat-radio-button",29),u.NdJ("click",function(){return u.CHM(B),u.oxw().onSelectCorrect(2)}),u.qZA(),u.qZA(),u.TgZ(50,"mat-card-subtitle"),u._uU(51),u.ALo(52,"translate"),u.qZA(),u.TgZ(53,"mat-card-content"),u.TgZ(54,"div",2),u.TgZ(55,"div",6),u._UZ(56,"app-input",30),u.qZA(),u.TgZ(57,"div",6),u.TgZ(58,"div",2),u.TgZ(59,"div",8),u.TgZ(60,"mat-label"),u._uU(61),u.ALo(62,"translate"),u.qZA(),u.TgZ(63,"label",31),u._UZ(64,"i",32),u.qZA(),u.TgZ(65,"input",37),u.NdJ("change",function(I){return u.CHM(B),u.oxw().importThreeFile(I)}),u.qZA(),u.qZA(),u.YNc(66,fe,5,3,"div",10),u.TgZ(67,"div",11),u.TgZ(68,"div",12),u._UZ(69,"img",13),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(70,"mat-card"),u.TgZ(71,"mat-radio-group",38),u.TgZ(72,"mat-radio-button",29),u.NdJ("click",function(){return u.CHM(B),u.oxw().onSelectCorrect(3)}),u.qZA(),u.qZA(),u.TgZ(73,"mat-card-subtitle"),u._uU(74),u.ALo(75,"translate"),u.qZA(),u.TgZ(76,"mat-card-content"),u.TgZ(77,"div",2),u.TgZ(78,"div",6),u._UZ(79,"app-input",30),u.qZA(),u.TgZ(80,"div",6),u.TgZ(81,"div",2),u.TgZ(82,"div",8),u.TgZ(83,"mat-label"),u._uU(84),u.ALo(85,"translate"),u.qZA(),u.TgZ(86,"label",31),u._UZ(87,"i",32),u.qZA(),u.TgZ(88,"input",39),u.NdJ("change",function(I){return u.CHM(B),u.oxw().importFourFile(I)}),u.qZA(),u.qZA(),u.YNc(89,H,5,3,"div",10),u.TgZ(90,"div",11),u.TgZ(91,"div",12),u._UZ(92,"img",13),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.BQk()}if(2&ve){var A=u.oxw();u.xp6(3),u.Q6J("value",0)("checked",A.FormCtrl.answerOneIsCorrect.value),u.xp6(2),u.hij(" ",u.lcZ(6,40,"labels.AnswerNumber")," (1) "),u.xp6(5),u.Q6J("control",A.FormCtrl.answerOne)("submitted",A.submitted),u.xp6(5),u.hij(" ",u.lcZ(16,42,"labels.AnswerPic")," (1) "),u.xp6(5),u.Q6J("ngIf",A.FormCtrl.answerOneImage.value),u.xp6(3),u.ekj("hideImg",!(null!=A.FormCtrl.answerOneImage&&A.FormCtrl.answerOneImage.value)),u.Q6J("src",null==A.FormCtrl.answerOneImage?null:A.FormCtrl.answerOneImage.value,u.LSH),u.xp6(3),u.Q6J("value",1)("checked",A.FormCtrl.answerTwoIsCorrect.value),u.xp6(2),u.hij(" ",u.lcZ(29,44,"labels.AnswerNumber")," (2) "),u.xp6(5),u.Q6J("control",A.FormCtrl.answerTwo)("submitted",A.submitted),u.xp6(5),u.hij(" ",u.lcZ(39,46,"labels.AnswerPic")," (2) "),u.xp6(5),u.Q6J("ngIf",A.FormCtrl.answerTwoImage.value),u.xp6(3),u.ekj("hideImg",!(null!=A.FormCtrl.answerTwoImage&&A.FormCtrl.answerTwoImage.value)),u.Q6J("src",null==A.FormCtrl.answerTwoImage?null:A.FormCtrl.answerTwoImage.value,u.LSH),u.xp6(3),u.Q6J("value",2)("checked",A.FormCtrl.answerThreeIsCorrect.value),u.xp6(2),u.hij(" ",u.lcZ(52,48,"labels.AnswerNumber")," (3) "),u.xp6(5),u.Q6J("control",A.FormCtrl.answerThree)("submitted",A.submitted),u.xp6(5),u.hij(" ",u.lcZ(62,50,"labels.AnswerPic")," (3) "),u.xp6(5),u.Q6J("ngIf",A.FormCtrl.answerThreeImage.value),u.xp6(3),u.ekj("hideImg",!(null!=A.FormCtrl.answerThreeImage&&A.FormCtrl.answerThreeImage.value)),u.Q6J("src",null==A.FormCtrl.answerThreeImage?null:A.FormCtrl.answerThreeImage.value,u.LSH),u.xp6(3),u.Q6J("value",3)("checked",A.FormCtrl.answerFourIsCorrect.value),u.xp6(2),u.hij(" ",u.lcZ(75,52,"labels.AnswerNumber")," (4) "),u.xp6(5),u.Q6J("control",A.FormCtrl.answerFour)("submitted",A.submitted),u.xp6(5),u.hij(" ",u.lcZ(85,54,"labels.AnswerPic")," (4) "),u.xp6(5),u.Q6J("ngIf",A.FormCtrl.answerFourImage.value),u.xp6(3),u.ekj("hideImg",!(null!=A.FormCtrl.answerFourImage&&A.FormCtrl.answerFourImage.value)),u.Q6J("src",null==A.FormCtrl.answerFourImage?null:A.FormCtrl.answerFourImage.value,u.LSH)}}function $e(ve,Je){if(1&ve){var B=u.EpF();u.TgZ(0,"button",25),u.NdJ("click",function(){u.CHM(B);var b=u.oxw();return b.myForm.reset(),b.questionId=0,b.FormCtrl.questionTypeId.setValue(2)}),u._uU(1),u.ALo(2,"translate"),u.qZA()}2&ve&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"General.Reset")," "))}function ht(ve,Je){if(1&ve){var B=u.EpF();u.TgZ(0,"button",40),u.NdJ("click",function(){return u.CHM(B),u.oxw().onSubmit()}),u._UZ(1,"i",41),u._uU(2),u.ALo(3,"translate"),u.qZA()}if(2&ve){var A=u.oxw();u.Q6J("disabled",0==A.examGroupHeaderId),u.xp6(2),u.hij(" ",u.lcZ(3,2,"General.Add")," ")}}function _t(ve,Je){if(1&ve){var B=u.EpF();u.TgZ(0,"button",42),u.NdJ("click",function(){return u.CHM(B),u.oxw().onSubmit()}),u._uU(1),u.ALo(2,"translate"),u.qZA()}2&ve&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"General.Update")," "))}function Nt(ve,Je){if(1&ve&&(u.TgZ(0,"a",47),u._UZ(1,"img",48),u.qZA()),2&ve){var B=u.oxw().$implicit,A=u.oxw();u.Q6J("href",B.Image,u.LSH),u.xp6(1),u.Q6J("src",A.uploadFileService.previewPicture(B.Image),u.LSH)}}function Rt(ve,Je){if(1&ve){var B=u.EpF();u.TgZ(0,"tr",43),u.TgZ(1,"td"),u._uU(2),u.qZA(),u.TgZ(3,"td"),u._uU(4),u.qZA(),u.TgZ(5,"td"),u.YNc(6,Nt,2,2,"a",44),u.qZA(),u.TgZ(7,"td"),u._uU(8),u.qZA(),u.TgZ(9,"td"),u.TgZ(10,"button",45),u.NdJ("click",function(){var $=u.CHM(B).$implicit;return u.oxw().getQuestionForEditByID($.ExamQuestId)}),u.TgZ(11,"mat-icon"),u._uU(12,"edit"),u.qZA(),u.qZA(),u.TgZ(13,"button",46),u.NdJ("click",function(){var $=u.CHM(B).$implicit;return u.oxw().removeExamQuestion($.ExamQuestId)}),u.TgZ(14,"mat-icon"),u._uU(15,"delete"),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&ve){var A=Je.$implicit,b=u.oxw();u.xp6(2),u.Oqu(A.ExamQuestId),u.xp6(2),u.hij(" ",A.Text," "),u.xp6(2),u.Q6J("ngIf",A.Image)("ngIfElse",b.noImg),u.xp6(2),u.Oqu(A.QuestionTypeAr)}}var bt=function(){var ve=function(){function Je(B,A,b,I,O,$){(0,Y.Z)(this,Je),this.fb=B,this.examService=A,this.authserv=b,this.toastr=I,this.spinner=O,this.uploadFileService=$,this.examGroupHeaderId=0,this.subjectId=0,this.closeDialog=new u.vpe,this.unitId=0,this.lessonId=0,this.units=[],this.lessions=[],this.questionsInGrid=[],this.questionId=0,this.submitted=!1,this.oneIsCorrect=!1,this.twoIsCorrect=!1,this.threeIsCorrect=!1,this.fourIsCorrect=!1,this.questionFile=null,this.answerOneFile=null,this.answerTwoFile=null,this.answerThreeFile=null,this.answerFourFile=null,this.perfectAnswerAttach_preview=null,0!=this.examGroupHeaderId&&this.getAllQuestionsByHeadId()}return(0,j.Z)(Je,[{key:"ngOnInit",value:function(){this.myForm=this.fb.group({mainQuestion:[null],questionTypeId:[2,f.kI.required],questionImage:[null],remove_image:[!1],exam_question_text:[null],questionPerfectAnswer:[null],perfect_answer_attach:[null],questionMark:["",[f.kI.required,Q.D.bigZero]],answerOneId:[null],answerOne:[null],answerOneIsCorrect:[null],answerOneImage:[null],answerTwoId:[null],answerTwo:[null],answerTwoIsCorrect:[null],answerTwoImage:[null],answerThreeId:[null],answerThree:[null],answerThreeIsCorrect:[null],answerThreeImage:[null],answerFourId:[null],answerFour:[null],answerFourIsCorrect:[null],answerFourImage:[null],answerOneRemove_image:[!1],answerTwoRemove_image:[!1],answerThreeRemove_image:[!1],answerFourRemove_image:[!1]}),this.educationCompanyId=this.authserv.getEduCompId(),this.questionTypeValidation()}},{key:"ngOnChanges",value:function(A){var b;(null===(b=A.examGroupHeaderId)||void 0===b?void 0:b.currentValue)>0&&this.getAllQuestionsByHeadId()}},{key:"FormCtrl",get:function(){return this.myForm.controls}},{key:"getAllQuestionsByHeadId",value:function(){var A=this;this.spinner.show(),this.examService.getAllQuestionsByHeadId(this.examGroupHeaderId).subscribe(function(b){b&&(console.log("getAllQuestionsByHeadId",b),A.questionsInGrid=[],A.questionsInGrid=b,A.spinner.hide())})}},{key:"questionTypeValidation",value:function(){var A,b,I,O;1===(null===(A=this.FormCtrl.questionTypeId)||void 0===A?void 0:A.value)||(null===(b=this.FormCtrl.questionPerfectAnswer)||void 0===b||b.clearAsyncValidators(),null===(I=this.FormCtrl.questionPerfectAnswer)||void 0===I||I.reset()),null===(O=this.FormCtrl.questionPerfectAnswer)||void 0===O||O.updateValueAndValidity()}},{key:"onSubmit",value:function(){var A,b,I,O,$,te,re,de,ge,Ze,we,Se,Pe,He,Ve,at,ot,It,yt,qt,Ft,wt,St,Oe,qe,M,At,vt,Le,Ut;if(this.submitted=!0,2==(null===(A=this.FormCtrl.questionTypeId)||void 0===A?void 0:A.value)){var Zt=this.FormCtrl.questionImage.value,ct={choice_id:null!==(I=null===(b=this.FormCtrl.answerOneId)||void 0===b?void 0:b.value)&&void 0!==I?I:0,choice_text:null===(O=this.FormCtrl.answerOne)||void 0===O?void 0:O.value,is_correct:!(0!==this.FormCtrl.answerOneIsCorrect.value&&!this.FormCtrl.answerOneIsCorrect.value),choice_image:this.answerOneFile||null,remove_image:null===($=this.FormCtrl.answerOneRemove_image)||void 0===$?void 0:$.value,path:null===(te=this.FormCtrl.answerOneImage)||void 0===te?void 0:te.value},be={choice_id:null!==(de=null===(re=this.FormCtrl.answerTwoId)||void 0===re?void 0:re.value)&&void 0!==de?de:0,choice_text:null===(ge=this.FormCtrl.answerTwo)||void 0===ge?void 0:ge.value,is_correct:!!(null===(Ze=this.FormCtrl.answerTwoIsCorrect)||void 0===Ze?void 0:Ze.value),choice_image:this.answerTwoFile||null,remove_image:null===(we=this.FormCtrl.answerTwoRemove_image)||void 0===we?void 0:we.value,path:null===(Se=this.FormCtrl.answerTwoImage)||void 0===Se?void 0:Se.value},je={choice_id:null!==(He=null===(Pe=this.FormCtrl.answerThreeId)||void 0===Pe?void 0:Pe.value)&&void 0!==He?He:0,choice_text:null===(Ve=this.FormCtrl.answerThree)||void 0===Ve?void 0:Ve.value,is_correct:!!(null===(at=this.FormCtrl.answerThreeIsCorrect)||void 0===at?void 0:at.value),choice_image:this.answerThreeFile||null,remove_image:null===(ot=this.FormCtrl.answerThreeRemove_image)||void 0===ot?void 0:ot.value,path:null===(It=this.FormCtrl.answerThreeImage)||void 0===It?void 0:It.value},Lt={choice_id:null!==(qt=null===(yt=this.FormCtrl.answerFourId)||void 0===yt?void 0:yt.value)&&void 0!==qt?qt:0,choice_text:null===(Ft=this.FormCtrl.answerFour)||void 0===Ft?void 0:Ft.value,is_correct:!!(null===(wt=this.FormCtrl.answerFourIsCorrect)||void 0===wt?void 0:wt.value),choice_image:this.answerFourFile||null,remove_image:null===(St=this.FormCtrl.answerFourRemove_image)||void 0===St?void 0:St.value,path:null===(Oe=this.FormCtrl.answerFourImage)||void 0===Oe?void 0:Oe.value},mt={exam_question_main_question:null===(qe=this.FormCtrl.mainQuestion)||void 0===qe?void 0:qe.value,exam_question_mark:null===(M=this.FormCtrl.questionMark)||void 0===M?void 0:M.value,exam_question_perfect_answer:null===(At=this.FormCtrl.questionPerfectAnswer)||void 0===At?void 0:At.value,exam_question_text:null===(vt=this.FormCtrl.exam_question_text)||void 0===vt?void 0:vt.value,exam_question_type_id:null===(Le=this.FormCtrl.questionTypeId)||void 0===Le?void 0:Le.value,exam_selected_question_head_id:this.examGroupHeaderId,exam_selected_subject_id:this.subjectId,exam_question_image:this.questionFile||null,remove_image:null===(Ut=this.FormCtrl.remove_image)||void 0===Ut?void 0:Ut.value,exam_question_id:this.questionId,mcq_choices:[ct,be,je,Lt]};if(console.log("toAddEdit_mcq_question=> ",mt),(null===mt.exam_question_text||""==mt.exam_question_text||null==mt.exam_question_text)&&null===mt.exam_question_image&&null===Zt)return void this.toastr.warning("Exam.QuestionMsgError");var kt=!1;if([ct,be,je,Lt].forEach(function(Xe){Xe.is_correct&&(Xe.choice_text||Xe.choice_image||Xe.path)&&(kt=!0)}),!kt)return void this.toastr.warning("Exam.MustChooseCorrectAnswer");if((null===ct.choice_text||""==ct.choice_text||null==ct.choice_text)&&null===ct.choice_image&&null==ct.path)return void this.toastr.warning("Exam.QuestionOneMsgError");if((null===be.choice_text||""==be.choice_text||null==be.choice_text)&&null===be.choice_image&&null==be.path)return void this.toastr.warning("Exam.QuestionTwoMsgError");this.questionId>0?this.editMcqQuestion(mt):this.addMcqQuestion(mt)}}},{key:"addMcqQuestion",value:function(A){var b=this;this.myForm.valid&&(this.spinner.show(),this.examService.addQuestion(A).subscribe(function(I){var O,$,te,re,de,ge,Ze;200==I.returnValue?(b.getAllQuestionsByHeadId(),null===(O=b.FormCtrl.mainQuestion)||void 0===O||O.setValue(null),null===($=b.FormCtrl.questionMark)||void 0===$||$.setValue(null),null===(te=b.FormCtrl.questionTypeId)||void 0===te||te.setValue(null),null===(re=b.FormCtrl.questionImage)||void 0===re||re.setValue(null),null===(de=b.FormCtrl.exam_question_text)||void 0===de||de.setValue(null),null===(ge=b.FormCtrl.questionPerfectAnswer)||void 0===ge||ge.setValue(null),null===(Ze=b.FormCtrl.perfect_answer_attach)||void 0===Ze||Ze.setValue(null),b.myForm.reset(),b.FormCtrl.questionTypeId.setValue(2),b.resetFileInputs(),b.submitted=!1,b.toastr.success("General.AddSuccessfully")):b.toastr.error(I.returnString),b.spinner.hide()}))}},{key:"editMcqQuestion",value:function(A){var b=this;this.myForm.valid&&(this.spinner.show(),this.examService.editQuestion(A).subscribe(function(I){var O,$,te,re,de,ge,Ze;I&&(b.getAllQuestionsByHeadId(),null===(O=b.FormCtrl.mainQuestion)||void 0===O||O.setValue(null),null===($=b.FormCtrl.questionMark)||void 0===$||$.setValue(null),null===(te=b.FormCtrl.questionTypeId)||void 0===te||te.setValue(null),null===(re=b.FormCtrl.questionImage)||void 0===re||re.setValue(null),null===(de=b.FormCtrl.exam_question_text)||void 0===de||de.setValue(null),null===(ge=b.FormCtrl.questionPerfectAnswer)||void 0===ge||ge.setValue(null),null===(Ze=b.FormCtrl.perfect_answer_attach)||void 0===Ze||Ze.setValue(null),b.oneIsCorrect=!1,b.twoIsCorrect=!1,b.threeIsCorrect=!1,b.fourIsCorrect=!1,b.myForm.reset(),b.FormCtrl.questionTypeId.setValue(2),b.resetFileInputs(),b.toastr.success("General.UpdateSuccessfully"),b.submitted=!1,b.questionId=0),b.spinner.hide()}))}},{key:"getQuestionForEditByID",value:function(A){var b=this;this.spinner.show(),this.examService.getQuestionForEditByID(A).subscribe(function(I){var O,$,te,re,de,ge,Ze,we,Se,Pe,He,Ve,at,ot,It,yt,qt,Ft,wt,St,Oe,qe,M,At,vt,Le,Ut,Ot,Zt,Gt,ct,Ye,be,J,je,Vt,Lt,mt,Pt,kt,Xe,$t,an,on,rn;I&&(null===(O=b.FormCtrl.mainQuestion)||void 0===O||O.setValue(I.main_question),null===($=b.FormCtrl.questionMark)||void 0===$||$.setValue(I.mark),null===(te=b.FormCtrl.exam_question_text)||void 0===te||te.setValue(I.question_text),null===(re=b.FormCtrl.questionImage)||void 0===re||re.setValue(null!=(null==I?void 0:I.attach_path)?b.uploadFileService.previewPicture(null==I?void 0:I.attach_path):null),null===(de=b.FormCtrl.questionTypeId)||void 0===de||de.setValue(I.question_type_id),b.questionId=A,2==I.question_type_id&&(null===(ge=b.FormCtrl.answerOneId)||void 0===ge||ge.setValue(null===(Ze=I.MCQ_Choices[0])||void 0===Ze?void 0:Ze.Id),null===(we=b.FormCtrl.answerOne)||void 0===we||we.setValue(null===(Se=I.MCQ_Choices[0])||void 0===Se?void 0:Se.Text),null===(Pe=b.FormCtrl.answerOneImage)||void 0===Pe||Pe.setValue(null!=(null===(He=null==I?void 0:I.MCQ_Choices[0])||void 0===He?void 0:He.Image)?b.uploadFileService.previewPicture(null===(Ve=null==I?void 0:I.MCQ_Choices[0])||void 0===Ve?void 0:Ve.Image):null),null===(at=b.FormCtrl.answerOneIsCorrect)||void 0===at||at.setValue(null===(ot=I.MCQ_Choices[0])||void 0===ot?void 0:ot.Is_Correct),b.oneIsCorrect=null===(It=I.MCQ_Choices[0])||void 0===It?void 0:It.Is_Correct,null===(yt=b.FormCtrl.answerTwoId)||void 0===yt||yt.setValue(null===(qt=I.MCQ_Choices[1])||void 0===qt?void 0:qt.Id),null===(Ft=b.FormCtrl.answerTwo)||void 0===Ft||Ft.setValue(null===(wt=I.MCQ_Choices[1])||void 0===wt?void 0:wt.Text),null===(St=b.FormCtrl.answerTwoImage)||void 0===St||St.setValue(null!=(null===(Oe=null==I?void 0:I.MCQ_Choices[1])||void 0===Oe?void 0:Oe.Image)?b.uploadFileService.previewPicture(null===(qe=null==I?void 0:I.MCQ_Choices[1])||void 0===qe?void 0:qe.Image):null),null===(M=b.FormCtrl.answerTwoIsCorrect)||void 0===M||M.setValue(null===(At=I.MCQ_Choices[1])||void 0===At?void 0:At.Is_Correct),b.twoIsCorrect=null===(vt=I.MCQ_Choices[1])||void 0===vt?void 0:vt.Is_Correct,null===(Le=b.FormCtrl.answerThreeId)||void 0===Le||Le.setValue(null===(Ut=I.MCQ_Choices[2])||void 0===Ut?void 0:Ut.Id),null===(Ot=b.FormCtrl.answerThree)||void 0===Ot||Ot.setValue(null===(Zt=I.MCQ_Choices[2])||void 0===Zt?void 0:Zt.Text),null===(Gt=b.FormCtrl.answerThreeImage)||void 0===Gt||Gt.setValue(null!=(null===(ct=null==I?void 0:I.MCQ_Choices[2])||void 0===ct?void 0:ct.Image)?b.uploadFileService.previewPicture(null===(Ye=null==I?void 0:I.MCQ_Choices[2])||void 0===Ye?void 0:Ye.Image):null),null===(be=b.FormCtrl.answerThreeIsCorrect)||void 0===be||be.setValue(null===(J=I.MCQ_Choices[2])||void 0===J?void 0:J.Is_Correct),b.threeIsCorrect=null===(je=I.MCQ_Choices[2])||void 0===je?void 0:je.Is_Correct,null===(Vt=b.FormCtrl.answerFourId)||void 0===Vt||Vt.setValue(null===(Lt=I.MCQ_Choices[3])||void 0===Lt?void 0:Lt.Id),null===(mt=b.FormCtrl.answerFour)||void 0===mt||mt.setValue(null===(Pt=I.MCQ_Choices[3])||void 0===Pt?void 0:Pt.Text),null===(kt=b.FormCtrl.answerFourImage)||void 0===kt||kt.setValue(null!=(null===(Xe=null==I?void 0:I.MCQ_Choices[3])||void 0===Xe?void 0:Xe.Image)?b.uploadFileService.previewPicture(null===($t=null==I?void 0:I.MCQ_Choices[3])||void 0===$t?void 0:$t.Image):null),null===(an=b.FormCtrl.answerFourIsCorrect)||void 0===an||an.setValue(null===(on=I.MCQ_Choices[3])||void 0===on?void 0:on.Is_Correct),b.fourIsCorrect=null===(rn=I.MCQ_Choices[3])||void 0===rn?void 0:rn.Is_Correct)),b.spinner.hide()})}},{key:"removeExamQuestion",value:function(A){var b=this;confirm("\u0647\u0644 \u0627\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u0627\u0644\u062d\u0630\u0641")&&(this.spinner.show(),this.examService.deleteExamQuestion(A).subscribe(function(O){if("Done"===O.returnString){var $=b.questionsInGrid.findIndex(function(te){return te.Id==A});b.questionsInGrid.splice($,1)}else b.toastr.info(O.returnString);b.spinner.hide()}))}},{key:"importFile",value:function(A){var b=this;this.uploadFileService.uploadFile(A).then(function(I){setTimeout(function(){b.FormCtrl.questionImage.setValue(I.FileAsBase64),b.questionFile=I},100)})}},{key:"importOneFile",value:function(A){var b=this;this.uploadFileService.uploadFile(A).then(function(I){setTimeout(function(){b.answerOneFile=I,b.FormCtrl.answerOneImage.setValue(I.FileAsBase64)},100)})}},{key:"importTwoFile",value:function(A){var b=this;this.uploadFileService.uploadFile(A).then(function(I){setTimeout(function(){b.answerTwoFile=I,b.FormCtrl.answerTwoImage.setValue(I.FileAsBase64)},100)})}},{key:"importThreeFile",value:function(A){var b=this;this.uploadFileService.uploadFile(A).then(function(I){setTimeout(function(){b.answerThreeFile=I,b.FormCtrl.answerThreeImage.setValue(I.FileAsBase64)},100)})}},{key:"importFourFile",value:function(A){var b=this;this.uploadFileService.uploadFile(A).then(function(I){setTimeout(function(){b.answerFourFile=I,b.FormCtrl.answerFourImage.setValue(I.FileAsBase64)},100)})}},{key:"onSelectCorrect",value:function(A){var b,I,O,$,te,re,de,ge,Ze,we,Se,Pe,He,Ve,at,ot;0===A&&(null===(b=this.FormCtrl.answerOneIsCorrect)||void 0===b||b.setValue(0),null===(I=this.FormCtrl.answerTwoIsCorrect)||void 0===I||I.setValue(null),null===(O=this.FormCtrl.answerThreeIsCorrect)||void 0===O||O.setValue(null),null===($=this.FormCtrl.answerFourIsCorrect)||void 0===$||$.setValue(null)),1===A&&(null===(te=this.FormCtrl.answerOneIsCorrect)||void 0===te||te.setValue(null),null===(re=this.FormCtrl.answerTwoIsCorrect)||void 0===re||re.setValue(1),null===(de=this.FormCtrl.answerThreeIsCorrect)||void 0===de||de.setValue(null),null===(ge=this.FormCtrl.answerFourIsCorrect)||void 0===ge||ge.setValue(null)),2===A&&(null===(Ze=this.FormCtrl.answerOneIsCorrect)||void 0===Ze||Ze.setValue(null),null===(we=this.FormCtrl.answerTwoIsCorrect)||void 0===we||we.setValue(null),null===(Se=this.FormCtrl.answerThreeIsCorrect)||void 0===Se||Se.setValue(2),null===(Pe=this.FormCtrl.answerFourIsCorrect)||void 0===Pe||Pe.setValue(null)),3===A&&(null===(He=this.FormCtrl.answerOneIsCorrect)||void 0===He||He.setValue(null),null===(Ve=this.FormCtrl.answerTwoIsCorrect)||void 0===Ve||Ve.setValue(null),null===(at=this.FormCtrl.answerThreeIsCorrect)||void 0===at||at.setValue(null),null===(ot=this.FormCtrl.answerFourIsCorrect)||void 0===ot||ot.setValue(3))}},{key:"resetFileInputs",value:function(){document.querySelectorAll('input[type="file"]').forEach(function(b){b.value=null}),this.questionFile=null,this.answerOneFile=null,this.answerTwoFile=null,this.answerThreeFile=null,this.answerFourFile=null}},{key:"removeQuestionImg",value:function(){this.FormCtrl.remove_image.setValue(!0),this.FormCtrl.questionImage.setValue(null),this.questionFile=null}},{key:"answerOneRemove_image",value:function(){this.FormCtrl.answerOneRemove_image.setValue(!0),this.FormCtrl.answerOneImage.setValue(null),this.answerOneFile=null}},{key:"answerTwoRemove_image",value:function(){this.FormCtrl.answerTwoRemove_image.setValue(!0),this.FormCtrl.answerTwoImage.setValue(null),this.answerTwoFile=null}},{key:"answerThreeRemove_image",value:function(){this.FormCtrl.answerThreeRemove_image.setValue(!0),this.FormCtrl.answerThreeImage.setValue(null),this.FormCtrl.answerThreeFile=null}},{key:"answerFourRemove_image",value:function(){this.FormCtrl.answerFourRemove_image.setValue(!0),this.FormCtrl.answerFourImage.setValue(null),this.answerFourFile=null}}]),Je}();return ve.\u0275fac=function(B){return new(B||ve)(u.Y36(f.qu),u.Y36(C.R),u.Y36(E.e),u.Y36(ce.K),u.Y36(k.t2),u.Y36(K.f))},ve.\u0275cmp=u.Xpm({type:ve,selectors:[["app-add-edit-sub-question"]],inputs:{examId:"examId",examGroupHeaderId:"examGroupHeaderId",subjectId:"subjectId"},outputs:{closeDialog:"closeDialog"},features:[u.TTD],decls:51,vars:31,consts:[["mat-dialog-content","",1,"exam-model-box"],[1,"container-fluid",3,"formGroup"],[1,"row"],[1,"col-md-6","col-12"],["label","labels.mainQuestion","type","text",3,"control","submitted"],["label","labels.QuestionMark","type","number",3,"control","submitted"],[1,"col-12"],["label","labels.question_ar_text","type","text",3,"control","submitted"],[1,"col-md-4","col-12"],["type","file","name","questionImage","accept","image/*",1,"form-control","font-dro","clearInputs",3,"change"],["class","col-1",4,"ngIf"],[1,"col-md-7","col-11"],[1,"question-img"],[1,"coverPhoto",3,"src"],["class","row",4,"ngIf"],["align","end",1,"col-12"],["mat-raised-button","","class","btn btn-warning bg-light-warning",3,"click",4,"ngIf"],["mat-raised-button","","id","examQuestionsButton","class","btn btn-info bg-light-info",3,"disabled","click",4,"ngIf"],["mat-raised-button","","id","editQuestionButton","class","btn btn-info bg-light-info",3,"click",4,"ngIf"],[1,"col-md-12"],[1,"full-wid-table",2,"overflow","hidden !important"],["id","sotbmod",1,"table","table-striped","table-hover","table-full-width","rtl"],["id","addedExamQuestionsHolder"],["id","ExamQuestion-2626853",4,"ngFor","ngForOf"],["align","end"],["mat-raised-button","",1,"btn","btn-warning","bg-light-warning",3,"click"],[1,"col-1"],["mat-mini-fab","","color","warn",1,"mr-1",3,"title","click"],["formControlName","answerOneIsCorrect"],[3,"value","checked","click"],["label","labels.AnswerText","type","text",3,"control","submitted"],["for","radio-0"],[1,"icon","icon_radio"],["type","file","accept","image/*","name","answerOneImage",1,"form-control","font-dro","clearInputs",3,"change"],["formControlName","answerTwoIsCorrect"],["type","file","accept","image/*","name","answerTwoImage",1,"form-control","font-dro","clearInputs",3,"change"],["formControlName","answerThreeIsCorrect"],["type","file","accept","image/*","name","answerThreeImage",1,"form-control","font-dro","clearInputs",3,"change"],["formControlName","answerFourIsCorrect"],["type","file","accept","image/*","name","answerFourImage",1,"form-control","font-dro","clearInputs",3,"change"],["mat-raised-button","","id","examQuestionsButton",1,"btn","btn-info","bg-light-info",3,"disabled","click"],[1,"fa","fa-plus"],["mat-raised-button","","id","editQuestionButton",1,"btn","btn-info","bg-light-info",3,"click"],["id","ExamQuestion-2626853"],["target","_blank",3,"href",4,"ngIf","ngIfElse"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"click"],["target","_blank",3,"href"],["width","50","height","50",3,"src"]],template:function(B,A){1&B&&(u.TgZ(0,"mat-card-title"),u.TgZ(1,"span"),u._uU(2),u.ALo(3,"translate"),u.qZA(),u.qZA(),u.TgZ(4,"div",0),u.TgZ(5,"form",1),u.TgZ(6,"div",2),u.TgZ(7,"div",3),u._UZ(8,"app-input",4),u.qZA(),u.TgZ(9,"div",3),u._UZ(10,"app-input",5),u.qZA(),u.TgZ(11,"div",6),u._UZ(12,"app-input",7),u.qZA(),u.TgZ(13,"div",6),u.TgZ(14,"div",2),u.TgZ(15,"div",8),u.TgZ(16,"input",9),u.NdJ("change",function(I){return A.importFile(I)}),u.qZA(),u.qZA(),u.YNc(17,ue,5,3,"div",10),u.TgZ(18,"div",11),u.TgZ(19,"div",12),u._UZ(20,"img",13),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u._UZ(21,"hr"),u.YNc(22,Qe,93,56,"ng-container",14),u.TgZ(23,"mat-card-actions",15),u.YNc(24,$e,3,3,"button",16),u.YNc(25,ht,4,4,"button",17),u.YNc(26,_t,3,3,"button",18),u.qZA(),u.TgZ(27,"div",19),u.TgZ(28,"div",20),u.TgZ(29,"table",21),u.TgZ(30,"thead"),u.TgZ(31,"tr"),u.TgZ(32,"th"),u._uU(33,"#"),u.qZA(),u.TgZ(34,"th"),u._uU(35),u.ALo(36,"translate"),u.qZA(),u.TgZ(37,"th"),u._uU(38),u.ALo(39,"translate"),u.qZA(),u.TgZ(40,"th"),u._uU(41),u.ALo(42,"translate"),u.qZA(),u.TgZ(43,"th"),u._uU(44,"\xad"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(45,"tbody",22),u.YNc(46,Rt,16,5,"tr",23),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(47,"mat-dialog-actions",24),u.TgZ(48,"button",25),u.NdJ("click",function(){return A.closeDialog.emit()}),u._uU(49),u.ALo(50,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&B&&(u.xp6(2),u.Oqu(u.lcZ(3,21,"labels.AddQuestion")),u.xp6(3),u.Q6J("formGroup",A.myForm),u.xp6(3),u.Q6J("control",A.FormCtrl.mainQuestion)("submitted",A.submitted),u.xp6(2),u.Q6J("control",A.FormCtrl.questionMark)("submitted",A.submitted),u.xp6(2),u.Q6J("control",A.FormCtrl.exam_question_text)("submitted",A.submitted),u.xp6(5),u.Q6J("ngIf",A.FormCtrl.questionImage.value),u.xp6(3),u.ekj("hideImg",!(null!=A.FormCtrl.questionImage&&A.FormCtrl.questionImage.value)),u.Q6J("src",null==A.FormCtrl.questionImage?null:A.FormCtrl.questionImage.value,u.LSH),u.xp6(2),u.Q6J("ngIf",2==(null==A.FormCtrl.questionTypeId?null:A.FormCtrl.questionTypeId.value)),u.xp6(2),u.Q6J("ngIf",A.questionId>0),u.xp6(1),u.Q6J("ngIf",0==A.questionId),u.xp6(1),u.Q6J("ngIf",A.questionId>0),u.xp6(9),u.Oqu(u.lcZ(36,23,"labels.question_ar_text")),u.xp6(3),u.Oqu(u.lcZ(39,25,"labels.QuestionImage")),u.xp6(3),u.Oqu(u.lcZ(42,27,"labels.QuestionType")),u.xp6(5),u.Q6J("ngForOf",A.questionsInGrid),u.xp6(3),u.hij(" ",u.lcZ(50,29,"General.Close")," "))},directives:[Ie.n5,Z.xY,f._Y,f.JL,f.sg,pe.a,se.O5,Ie.hq,se.sg,Z.H8,ye.lW,ne.Hw,Ie.a8,ze.VQ,f.JJ,f.u,ze.U0,Ie.$j,Ie.dn,Te.hX],pipes:[Ge.X$],styles:[".mat-dialog-content[_ngcontent-%COMP%]{max-height:80vh}.mat-card-subtitle[_ngcontent-%COMP%]{margin-top:5px!important}.question-img[_ngcontent-%COMP%]{max-width:100%!important;max-height:156px!important}.hideImg[_ngcontent-%COMP%]{visibility:hidden}.coverPhoto[_ngcontent-%COMP%]{width:200px;height:150px;border-radius:10px;margin:5px 0;border:.5px solid gray}.remove_image[_ngcontent-%COMP%]{display:block}.mat-card-title[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:10px!important}"]}),ve}(),Mt=h(7162),Ke=h(8555),ft=h(5086),zt=h(7834),In=h(2850),yn=h(6896),Qt=h(8632),qn=h(2222),Jt=h(4724),Fn=function(){var ve=function(){function Je(B,A,b,I,O,$,te,re,de,ge,Ze,we,Se,Pe,He){var Ve=this;(0,Y.Z)(this,Je),this.location=B,this.fb=A,this.authserv=b,this.examService=I,this.route=O,this.router=$,this.msg=te,this.generalService=re,this.dialog=de,this.datePipe=ge,this.spinner=Ze,this.appStrings=we,this.data=Se,this.dialogRef=Pe,this.appConstants=He,this.countries=[],this.stages=[],this.educationYears=[],this.subjects=[],this.examTypes=[],this.units=[],this.lessions=[],this.discountTypes=[],this.examGroups=[],this.examHeaders=[],this.GroupsHeadersList=[],this.examGroupHeaderIdToEdit=0,this.displayedColumns=["#","questionNumber","questionType","question_title","actions"],this.submitted=!1,this.GroupHeadsubmitted=!1,this.examId=0,this.editGroupHeaderMode=!1,this.isRepeatableExam=!1,this.isSendWhats=!1,this.examGroupHeaderId=0,this.svgManager=new Mt.E,this.isMandatoryRadioList=[{label:"labels.Yes",value:!0},{label:"noOptional",value:!1}],this.type=Se.type,this.subId=Se.subjectId,this.unitId=Se.unitId,this.examId=Se.examId,this.examId>0&&(this.getExamById(),this.getAllGroupHeaderByExamId()),this.route.queryParamMap.subscribe(function(at){Ve.functionId=Number(at.get("functionId")),Ve.parentId=Number(at.get("parentId")),Ve.functionId&&Ve.authserv.getUserRowFunctions(Ve.functionId).subscribe(function(ot){ot&&(Ve.rowFunctions=ot)})})}return(0,j.Z)(Je,[{key:"ngOnInit",value:function(){var A,b,I,O,$,te;this.myForm=this.fb.group({examName:["",[f.kI.required,Q.D.whiteSpace]],examDuration:["",[f.kI.required,f.kI.pattern(this.appConstants.hourMinutesPattern)]],fromDate:[""],toDate:[""],formHour:[""],toHours:[""],isRepeatable:[!0,f.kI.required],repeatNumbers:[1e3],degreeToPass:["",[f.kI.required,Q.D.minusNum,f.kI.max(100)]],order:["",[f.kI.required,Q.D.bigZero]],isMandatory:[!0,[f.kI.required]]},{validator:Q.D.dateBefore("fromDate","toDate")}),this.GroupHeadersForm=this.fb.group({examGroup:["\u0627\u0644\u0633\u0624\u0627\u0644 \u0627\u0644\u0627\u0648\u0644",f.kI.required],examHeader:["\u0627\u062e\u062a\u0631  \u0627\u0644\u0625\u062c\u0627\u0628\u0629 \u0627\u0644\u0635\u062d\u064a\u062d\u0629",f.kI.required],examContent:[null]}),this.EduCompId=this.authserv.getEduCompId(),this.branchId=this.authserv.getBranchId(),null===(A=this.FormCtrl.stageId)||void 0===A||A.disable(),null===(b=this.FormCtrl.educationYearId)||void 0===b||b.disable(),null===(I=this.FormCtrl.subjectId)||void 0===I||I.disable(),null===(O=this.FormCtrl.teacherUserId)||void 0===O||O.disable(),null===($=this.FormCtrl.unitId)||void 0===$||$.disable(),null===(te=this.FormCtrl.lessionId)||void 0===te||te.disable(),this.getAllCountieres(),this.getAllExamTypes(),this.getAllQuestionGroups(),this.getAllQuestionHeaders(),this.examTypeValidator(),this.RepeatableValidator()}},{key:"onCloseDialog",value:function(){var A=null;this.examId&&(A={id:this.examId,ar_name:this.exam_ar_name,type:this.appStrings.stageExam,order:this.order,isMandatory:this.isMandatory}),this.dialogRef.close(A)}},{key:"ngAfterViewInit",value:function(){var A=this;this.authserv.EduCompId.subscribe(function(b){A.EduCompId=b.EduCompId}),this.authserv.branchId.subscribe(function(b){A.branchId=b.branchId}),this.examId>0&&this.getExamById(),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"filter_question_group",value:function(A){var b=A.toLowerCase();return this.examGroups.filter(function(I){return I.question_group_ar_name.toLowerCase().includes(b)})}},{key:"filter_question_header",value:function(A){var b=A.toLowerCase();return this.examHeaders.filter(function(I){return I.question_head_ar_name.toLowerCase().includes(b)})}},{key:"FormCtrl",get:function(){return this.myForm.controls}},{key:"GroupHeadersFormCtrl",get:function(){return this.GroupHeadersForm.controls}},{key:"getExamById",value:function(){var A=this;this.spinner.show(),this.examService.getExamById(this.examId).subscribe(function(b){var I,O,$,te,re,de,ge,Ze,we,Se,Pe;if(b){null===(I=A.FormCtrl.toHours)||void 0===I||I.setValue(null==b?void 0:b.toHour),null===(O=A.FormCtrl.examName)||void 0===O||O.setValue(null==b?void 0:b.exam_ar_name),A.exam_ar_name=null==b?void 0:b.exam_ar_name,null===($=A.FormCtrl.formHour)||void 0===$||$.setValue(null==b?void 0:b.fromHour),null===(te=A.FormCtrl.canSellIndividually)||void 0===te||te.setValue(null==b?void 0:b.Individually_Purchased);var He=b.exam_period_minute%60;null===(re=A.FormCtrl.examDuration)||void 0===re||re.setValue("".concat((b.exam_period_minute-He)/60,":").concat(He)),null!=(null==b?void 0:b.Subject_ID)&&null==(null==b?void 0:b.Subject_ID)&&1==b.quiz&&(null===(de=A.FormCtrl.examTypeId)||void 0===de||de.setValue(4)),null===(ge=A.FormCtrl.fromDate)||void 0===ge||ge.setValue(b.Avilable_Date_From),null===(Ze=A.FormCtrl.toDate)||void 0===Ze||Ze.setValue(b.Avilable_Date_To),null===(we=A.FormCtrl.degreeToPass)||void 0===we||we.setValue(b.percentageToPass),null===(Se=A.FormCtrl.order)||void 0===Se||Se.setValue(b.orderNum),A.order=b.orderNum,null===(Pe=A.FormCtrl.isMandatory)||void 0===Pe||Pe.setValue(b.isMandatory),A.isMandatory=b.isMandatory}A.spinner.hide()})}},{key:"getAllGroupHeaderByExamId",value:function(){var A=this;this.examService.getAllGroupHeaderByExamId(this.examId).subscribe(function(b){b&&(A.GroupsHeadersList=b,A.dataSource=new e.by(b),A.itemsCount=b.length)})}},{key:"getAllQuestionGroups",value:function(){var A=this;this.examService.getAllQuestionGroups().subscribe(function(b){var I;b&&(A.examGroups=b,A.filteredExamGroups=null===(I=A.GroupHeadersFormCtrl.examGroup)||void 0===I?void 0:I.valueChanges.pipe((0,ae.O)(""),(0,W.U)(function(O){return A.filter_question_group(O||"")})))})}},{key:"getAllQuestionHeaders",value:function(){var A=this;this.examService.getAllQuestionHeaders().subscribe(function(b){var I;b&&(A.examHeaders=b,A.filteredExamHeaders=null===(I=A.GroupHeadersFormCtrl.examHeader)||void 0===I?void 0:I.valueChanges.pipe((0,ae.O)(""),(0,W.U)(function(O){return A.filter_question_header(O||"")})))})}},{key:"onSubmit",value:function(){var A,b,I,O,$,te,re={id:this.examId,Avilable_Date_From:this.datePipe.transform(null===(A=this.FormCtrl.fromDate)||void 0===A?void 0:A.value),Avilable_Date_To:this.datePipe.transform(this.FormCtrl.toDate.value),EduCompId:this.EduCompId,exam_ar_name:null===(b=this.FormCtrl.examName)||void 0===b?void 0:b.value,fromHour:null===(I=this.FormCtrl.formHour)||void 0===I?void 0:I.value,repeatableExam:null===(O=this.FormCtrl.isRepeatable)||void 0===O?void 0:O.value,repeatableExam_Count:null===($=this.FormCtrl.repeatNumbers)||void 0===$?void 0:$.value,Subject_ID:this.subId,Unit_ID:this.unitId,toHour:null===(te=this.FormCtrl.toHours)||void 0===te?void 0:te.value,percentageToPass:this.FormCtrl.degreeToPass.value,orderNum:this.FormCtrl.order.value,isMandatory:this.FormCtrl.isMandatory.value,exam_type_id:this.type},de={exam_hour:Number(this.FormCtrl.examDuration.value.split(":")[0]),exam_minute:Number(this.FormCtrl.examDuration.value.split(":")[1]),exam:re};this.addExam(de)}},{key:"addExam",value:function(A){var b=this,I=this.GroupHeadersForm.valid;this.submitted=!0,0!=this.examId||I?this.myForm.valid?(this.spinner.show(),this.examService.addExam(A).subscribe(function(O){if(1==O.returnValue&&O.examId>0){console.log("addExam",O);var $=0==b.examId;b.msg.success($?"General.AddSuccessfully":"General.UpdateSuccessfully"),b.exam_ar_name=A.exam.exam_ar_name,b.order=A.exam.orderNum,b.isMandatory=A.exam.isMandatory,b.examId=O.examId,$?b.onAddExamGroupHeader():(b.spinner.hide(),b.onCloseDialog(),b.router.navigate(["/dashboard/setup/course/structure-exam/".concat(b.examId,"/").concat(b.GroupsHeadersList[0].id,"/").concat(b.subId)],{queryParams:{functionId:b.functionId}})),b.submitted=!1}else b.msg.error(null==O?void 0:O.returnString),b.spinner.hide()})):this.msg.error("General.FormNotValid"):this.GroupHeadsubmitted=!0}},{key:"onAddExamGroupHeader",value:function(){var b,I,O,$,te,A=this;if(null===(I=null===(b=this.dataSource)||void 0===b?void 0:b.data)||void 0===I?void 0:I.find(function(Ze){var we,Se;return Ze.group_name==(null===(we=A.GroupHeadersFormCtrl.examGroup)||void 0===we?void 0:we.value)&&Ze.head_name==(null===(Se=A.GroupHeadersFormCtrl.examHeader)||void 0===Se?void 0:Se.value)}))this.msg.info("Cannot add the same header with same group");else{var ge={exam_question_group_text:null===(O=this.GroupHeadersFormCtrl.examGroup)||void 0===O?void 0:O.value,exam_question_head_title:null===($=this.GroupHeadersFormCtrl.examContent)||void 0===$?void 0:$.value,exam_question_head_text:null===(te=this.GroupHeadersFormCtrl.examHeader)||void 0===te?void 0:te.value,exam:{id:this.examId}};this.GroupHeadersForm.valid?(this.spinner.show(),this.examService.addExamGroupHeader(ge).subscribe(function(Ze){var we,Se,Pe,He;if(Ze){A.getAllGroupHeaderByExamId();var Ve={Id:Ze.exam_question_head_id,group_name:null===(we=A.GroupHeadersFormCtrl.examGroup)||void 0===we?void 0:we.value,head_name:null===(Se=A.GroupHeadersFormCtrl.examHeader)||void 0===Se?void 0:Se.value,question_title:null===(Pe=A.GroupHeadersFormCtrl.examContent)||void 0===Pe?void 0:Pe.value};null===(He=A.GroupHeadersFormCtrl.examContent)||void 0===He||He.setValue(null),A.spinner.hide(),A.onCloseDialog(),A.router.navigate(["/dashboard/setup/course/structure-exam/".concat(A.examId,"/").concat(Ve.Id,"/").concat(A.subId)],{queryParams:{functionId:A.functionId}})}})):0==this.examId&&this.msg.error("General.FormNotValid")}}},{key:"getExamHeadById",value:function(A){var b,I,O;this.editGroupHeaderMode=!0,this.examGroupHeaderIdToEdit=A.id,null===(b=this.GroupHeadersFormCtrl.examGroup)||void 0===b||b.setValue(null==A?void 0:A.questionNumber),null===(I=this.GroupHeadersFormCtrl.examContent)||void 0===I||I.setValue(null==A?void 0:A.question_title),null===(O=this.GroupHeadersFormCtrl.examHeader)||void 0===O||O.setValue(null==A?void 0:A.questionType)}},{key:"editExamGroupHead",value:function(){var b,I,O,A=this,$={exam_question_head_id:this.examGroupHeaderIdToEdit,group:null===(b=this.GroupHeadersFormCtrl.examGroup)||void 0===b?void 0:b.value,head:null===(I=this.GroupHeadersFormCtrl.examHeader)||void 0===I?void 0:I.value,title:null===(O=this.GroupHeadersFormCtrl.examContent)||void 0===O?void 0:O.value};this.spinner.show(),this.examService.editExamGroupHeader($).subscribe(function(te){var re,de;if(te){var ge=A.dataSource.data.find(function(Ze){return Ze.id==A.examGroupHeaderIdToEdit});ge&&(ge.questionNumber=$.group,ge.questionType=$.head,ge.question_title=null===(re=A.GroupHeadersFormCtrl.examContent)||void 0===re?void 0:re.value),A.editGroupHeaderMode=!1,null===(de=A.GroupHeadersFormCtrl.examContent)||void 0===de||de.setValue(null),A.msg.success("General.UpdateSuccessfully")}A.spinner.hide()})}},{key:"removeExamGroupHead",value:function(A){var b=this;this.spinner.show(),this.examService.deleteExamGroupHeader(A.id).subscribe(function(I){if(1==I.returnValue){var O=b.dataSource.data.findIndex(function($){return $==A});b.dataSource.data.splice(O,1),b.dataSource.paginator=b.paginator,b.msg.success("General.DeleteSuccessfully")}else b.msg.error(I.returnString);b.spinner.hide()})}},{key:"openDeleateDialog",value:function(A){var b=this;this.dialog.open(F.F,{data:{msg:A.questionNumber,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(I){I&&b.removeExamGroupHead(A)})}},{key:"addSubQuestionDialog",value:function(A){console.log(A),this.dialog.open(bt,{data:{examId:this.examId,examGroupHeaderId:A.id,subjectId:this.subId}}).afterClosed().subscribe(function(b){})}},{key:"addSubQuestion",value:function(A){this.examGroupHeaderId=A}},{key:"getAllExamTypes",value:function(){var A=this;this.examService.getAllExamType().subscribe(function(b){b&&(A.examTypes=b)})}},{key:"onSelectExamType",value:function(){var A,b,I,O,$,te,re,de;1==(null===(A=this.FormCtrl.examTypeId)||void 0===A?void 0:A.value)?(null===(b=this.FormCtrl.unitId)||void 0===b||b.enable(),null===(I=this.FormCtrl.lessionId)||void 0===I||I.enable()):2==(null===(O=this.FormCtrl.examTypeId)||void 0===O?void 0:O.value)?(null===($=this.FormCtrl.unitId)||void 0===$||$.enable(),null===(te=this.FormCtrl.lessionId)||void 0===te||te.disable()):(null===(re=this.FormCtrl.unitId)||void 0===re||re.disable(),null===(de=this.FormCtrl.lessionId)||void 0===de||de.disable())}},{key:"getAllCountieres",value:function(){var A=this;this.examService.getAllCountries().subscribe(function(b){b&&(A.countries=b)})}},{key:"onSelectCountry",value:function(){var b,I,O,$,te,re,A=this;(null===(b=this.FormCtrl.countryId)||void 0===b?void 0:b.value)?this.examService.getAllStages(null===(I=this.FormCtrl.countryId)||void 0===I?void 0:I.value).subscribe(function(de){var ge;de&&(A.stages=de,null===(ge=A.FormCtrl.stageId)||void 0===ge||ge.enable())}):(null===(O=this.FormCtrl.stageId)||void 0===O||O.disable(),null===($=this.FormCtrl.educationYearId)||void 0===$||$.disable(),null===(te=this.FormCtrl.subjectId)||void 0===te||te.disable(),null===(re=this.FormCtrl.teacherUserId)||void 0===re||re.disable())}},{key:"onSelectStages",value:function(){var b,I,O,$,te,re,de,ge,A=this;null===(b=this.FormCtrl.educationYearId)||void 0===b||b.setValue(""),null===(I=this.FormCtrl.subjectId)||void 0===I||I.setValue(""),null===(O=this.FormCtrl.teacherUserId)||void 0===O||O.setValue(""),(null===($=this.FormCtrl.stageId)||void 0===$?void 0:$.value)?this.examService.getAllEducationYears(null===(te=this.FormCtrl.stageId)||void 0===te?void 0:te.value).subscribe(function(Ze){var we;Ze&&(A.educationYears=Ze,null===(we=A.FormCtrl.educationYearId)||void 0===we||we.enable())}):(null===(re=this.FormCtrl.educationYearId)||void 0===re||re.disable(),null===(de=this.FormCtrl.subjectId)||void 0===de||de.disable(),null===(ge=this.FormCtrl.teacherUserId)||void 0===ge||ge.disable())}},{key:"onSelectEducationYears",value:function(){var b,I,O,$,te,re,A=this;null===(b=this.FormCtrl.subjectId)||void 0===b||b.setValue(""),null===(I=this.FormCtrl.teacherUserId)||void 0===I||I.setValue(""),(null===(O=this.FormCtrl.educationYearId)||void 0===O?void 0:O.value)?this.examService.getAllSubjects(null===($=this.FormCtrl.educationYearId)||void 0===$?void 0:$.value).subscribe(function(de){var ge;de&&(A.subjects=de,null===(ge=A.FormCtrl.subjectId)||void 0===ge||ge.enable())}):(null===(te=this.FormCtrl.subjectId)||void 0===te||te.disable(),null===(re=this.FormCtrl.teacherUserId)||void 0===re||re.disable())}},{key:"onSelectSubjects",value:function(){var b,I,O,$,A=this;(null===(b=this.FormCtrl.subjectId)||void 0===b?void 0:b.value)?(0,t.D)([this.generalService.getTeacherBySubjectAndEduCompId(this.EduCompId,null===(I=this.FormCtrl.subjectId)||void 0===I?void 0:I.value),this.examService.getAllUnitsBySublectId(null===(O=this.FormCtrl.subjectId)||void 0===O?void 0:O.value)]).subscribe(function(te){var re;A.teachers=te[0].teachers,A.units=te[1],null===(re=A.FormCtrl.teacherUserId)||void 0===re||re.enable()}):null===($=this.FormCtrl.teacherUserId)||void 0===$||$.disable()}},{key:"onSelectUnit",value:function(){var b,I,A=this;null!=(null===(b=this.FormCtrl.unitId)||void 0===b?void 0:b.value)&&this.examService.getAllLessonsByUnitId(null===(I=this.FormCtrl.unitId)||void 0===I?void 0:I.value).subscribe(function(O){O&&(A.lessions=O)})}},{key:"examTypeValidator",value:function(){var A,b,I,O,$,te,re,de,ge,Ze,we,Se,Pe=null===(A=this.FormCtrl.examTypeId)||void 0===A?void 0:A.value;1==Pe?(null===(b=this.FormCtrl.unitId)||void 0===b||b.setValidators([f.kI.required]),null===(I=this.FormCtrl.lessionId)||void 0===I||I.setValidators([f.kI.required])):2==Pe?(null===(O=this.FormCtrl.unitId)||void 0===O||O.setValidators([f.kI.required]),null===($=this.FormCtrl.lessionId)||void 0===$||$.clearValidators(),null===(te=this.FormCtrl.lessionId)||void 0===te||te.reset()):(null===(re=this.FormCtrl.unitId)||void 0===re||re.clearValidators(),null===(de=this.FormCtrl.unitId)||void 0===de||de.reset(),null===(ge=this.FormCtrl.lessionId)||void 0===ge||ge.clearValidators(),null===(Ze=this.FormCtrl.lessionId)||void 0===Ze||Ze.reset()),null===(we=this.FormCtrl.unitId)||void 0===we||we.updateValueAndValidity(),null===(Se=this.FormCtrl.lessionId)||void 0===Se||Se.updateValueAndValidity()}},{key:"RepeatableValidator",value:function(){var A,b,I,O,$,te,re,de,ge,Ze=null===(A=this.FormCtrl.hasCustomDiscount)||void 0===A?void 0:A.value;1==Ze?(null===(b=this.FormCtrl.repeatNumbers)||void 0===b||b.setValidators([f.kI.required]),null===(I=this.FormCtrl.repeatingPrice)||void 0===I||I.setValidators([f.kI.required])):0==Ze&&(null===(O=this.FormCtrl.repeatNumbers)||void 0===O||O.clearValidators(),null===($=this.FormCtrl.repeatingPrice)||void 0===$||$.clearValidators(),null===(te=this.FormCtrl.repeatNumbers)||void 0===te||te.reset(),null===(re=this.FormCtrl.repeatingPrice)||void 0===re||re.reset()),null===(de=this.FormCtrl.repeatNumbers)||void 0===de||de.updateValueAndValidity(),null===(ge=this.FormCtrl.repeatingPrice)||void 0===ge||ge.updateValueAndValidity()}}]),Je}();return ve.\u0275fac=function(B){return new(B||ve)(u.Y36(se.Ye),u.Y36(f.qu),u.Y36(E.e),u.Y36(C.R),u.Y36(Ke.gz),u.Y36(Ke.F0),u.Y36(ce.K),u.Y36(ft.m),u.Y36(Z.uw),u.Y36(se.uU),u.Y36(k.t2),u.Y36(zt.e),u.Y36(Z.WI),u.Y36(Z.so),u.Y36(In.$))},ve.\u0275cmp=u.Xpm({type:ve,selectors:[["app-add-exam"]],viewQuery:function(B,A){var b;1&B&&(u.Gf(T.NW,5),u.Gf(S.YE,5)),2&B&&(u.iGM(b=u.CRH())&&(A.paginator=b.first),u.iGM(b=u.CRH())&&(A.sort=b.first))},decls:29,vars:26,consts:[["mat-dialog-title","",1,"mb-2"],["addTitle","course.AddExam","editTitle","labels.EditExam",3,"id"],[1,"fas","fa-times-circle","closeIcon","float-right",3,"mat-dialog-close"],[1,"dark-blue",3,"percentage"],[1,"mtop-30"],[3,"formGroup"],[1,"row"],[1,"col-md-6","col-12"],["label","labels.ExamNm","type","text",3,"control","submitted"],[1,"col-md-6","col-12","time-input"],["label","Exam.examDuration","placeholder","hh:mm",3,"control","submitted","svgIcon"],["label","labels.FromDate",3,"control","submitted"],["label","labels.ToDate",3,"control","submitted"],["label","labels.FromTime","type","time",3,"control","submitted"],["label","labels.ToTime","type","time",3,"control","submitted"],["label","labels.passPercentage","type","number",3,"control","submitted"],["label","labels.Order","type","number",3,"control","submitted"],[1,"col-md-6","col-12","mtop-15"],["label","isRequired",3,"control","radioList"],[1,"orange-btn","radius-btn","w-100",3,"click"]],template:function(B,A){1&B&&(u.TgZ(0,"p",0),u._UZ(1,"page-title",1),u._UZ(2,"i",2),u.qZA(),u._UZ(3,"progress-bar",3),u.TgZ(4,"mat-dialog-content",4),u.TgZ(5,"form",5),u.TgZ(6,"div",6),u.TgZ(7,"div",7),u._UZ(8,"app-input",8),u.qZA(),u.TgZ(9,"div",9),u._UZ(10,"app-input",10),u.qZA(),u.TgZ(11,"div",7),u._UZ(12,"app-datepicker",11),u.qZA(),u.TgZ(13,"div",7),u._UZ(14,"app-datepicker",12),u.qZA(),u.TgZ(15,"div",7),u._UZ(16,"app-input",13),u.qZA(),u.TgZ(17,"div",7),u._UZ(18,"app-input",14),u.qZA(),u.TgZ(19,"div",7),u._UZ(20,"app-input",15),u.qZA(),u.TgZ(21,"div",7),u._UZ(22,"app-input",16),u.qZA(),u.TgZ(23,"div",17),u._UZ(24,"app-radio-button",18),u.qZA(),u.TgZ(25,"div",17),u.TgZ(26,"button",19),u.NdJ("click",function(){return A.onSubmit()}),u._uU(27),u.ALo(28,"translate"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&B&&(u.xp6(1),u.Q6J("id",A.examId),u.xp6(1),u.Q6J("mat-dialog-close",!1),u.xp6(1),u.Q6J("percentage",100),u.xp6(2),u.Q6J("formGroup",A.myForm),u.xp6(3),u.Q6J("control",A.FormCtrl.examName)("submitted",A.submitted),u.xp6(2),u.Q6J("control",A.FormCtrl.examDuration)("submitted",A.submitted)("svgIcon",A.svgManager.time_input),u.xp6(2),u.Q6J("control",A.FormCtrl.fromDate)("submitted",A.submitted),u.xp6(2),u.Q6J("control",A.FormCtrl.toDate)("submitted",A.submitted),u.xp6(2),u.Q6J("control",A.FormCtrl.formHour)("submitted",A.submitted),u.xp6(2),u.Q6J("control",A.FormCtrl.toHours)("submitted",A.submitted),u.xp6(2),u.Q6J("control",A.FormCtrl.degreeToPass)("submitted",A.submitted),u.xp6(2),u.Q6J("control",A.FormCtrl.order)("submitted",A.submitted),u.xp6(2),u.Q6J("control",A.FormCtrl.isMandatory)("radioList",A.isMandatoryRadioList),u.xp6(3),u.hij(" ",u.lcZ(28,24,0==A.examId?"General.Create":"General.Update")," "))},directives:[Z.uh,yn.T,Z.ZT,Qt.R,Z.xY,f._Y,f.JL,f.sg,pe.a,qn.Q,Jt._],pipes:[Ge.X$],styles:[".mat-tab-group[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{font-size:1.1rem;margin-bottom:10px!important}.mat-card-actions[_ngcontent-%COMP%]{margin-bottom:0!important}.mat-radio-group[_ngcontent-%COMP%]{margin:0!important;padding:0 10px!important;display:flex;justify-content:space-around}.mat-radio-button[_ngcontent-%COMP%]{margin:0 5px!important}.is-mandatory[_ngcontent-%COMP%]{margin:12px 0}.mat-mini-fab[_ngcontent-%COMP%]{display:flex;justify-content:center;align-content:center;border-radius:50%;padding:0}"]}),ve}()},8452:function(rt,Fe,h){h.d(Fe,{H:function(){return e}});var Y=h(5671),j=h(3144),f=h(1891),Z=h(8966),T=h(6896),S=h(2925),e=function(){var F=function(){function Q(t){(0,Y.Z)(this,Q),this.dialogRef=t}return(0,j.Z)(Q,[{key:"ngOnInit",value:function(){}}]),Q}();return F.\u0275fac=function(t){return new(t||F)(f.Y36(Z.so))},F.\u0275cmp=f.Xpm({type:F,selectors:[["app-save-exam-dialog"]],decls:15,vars:12,consts:[["mat-dialog-title","",1,"mb-2"],["title","Exam.saveExam?"],[1,"fas","fa-times-circle","closeIcon","float-right",3,"mat-dialog-close"],[1,"sub-title"],[1,"orange-btn","radius-btn","w-100",3,"mat-dialog-close"],[1,"text-btn"],[1,"dark-blue-btn","radius-btn","w-100",3,"mat-dialog-close"]],template:function(t,ae){1&t&&(f.TgZ(0,"p",0),f._UZ(1,"page-title",1),f._UZ(2,"i",2),f.qZA(),f.TgZ(3,"mat-dialog-content"),f.TgZ(4,"div",3),f._uU(5),f.ALo(6,"translate"),f.qZA(),f.TgZ(7,"button",4),f.TgZ(8,"span",5),f._uU(9),f.ALo(10,"translate"),f.qZA(),f.qZA(),f.TgZ(11,"button",6),f.TgZ(12,"span",5),f._uU(13),f.ALo(14,"translate"),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(2),f.Q6J("mat-dialog-close",!1),f.xp6(3),f.hij(" ",f.lcZ(6,6,"Exam.youCanReturnAnyTimeAndEditOrAddQuestions")," "),f.xp6(2),f.Q6J("mat-dialog-close",!0),f.xp6(2),f.hij(" ",f.lcZ(10,8,"General.Save")," "),f.xp6(2),f.Q6J("mat-dialog-close",!1),f.xp6(2),f.hij(" ",f.lcZ(14,10,"General.cancel")," "))},directives:[Z.uh,T.T,Z.ZT,Z.xY],pipes:[S.X$],styles:[".sub-title[_ngcontent-%COMP%]{font-size:13.5px;line-height:1.47;letter-spacing:-.41px;color:#8c8c8c}.orange-btn[_ngcontent-%COMP%]{margin-top:32px}.dark-blue-btn[_ngcontent-%COMP%]{margin-top:16px}"]}),F}()},3375:function(rt,Fe,h){h.d(Fe,{$:function(){return ue}});var Y=h(5671),j=h(3144),f=h(3075),Z=h(8966),T=h(567),S=h(4920),e=h(2772),F=h(1891),Q=h(6405),t=h(3938),ae=h(7011),W=h(8657),u=h(9430),C=h(6896),E=h(7322),ce=h(4107),k=h(9808),K=h(530),Ie=h(9224),pe=h(508),se=h(2925);function ye(he,Ne){if(1&he&&(F.TgZ(0,"mat-option",15),F._uU(1),F.qZA()),2&he){var fe=Ne.$implicit;F.Q6J("value",fe.Imp_ID),F.xp6(1),F.AsE(" ",fe.Imp_From_Date," - ",fe.Imp_To_Date," ")}}function ne(he,Ne){if(1&he&&(F.TgZ(0,"mat-option",15),F._uU(1),F.qZA()),2&he){var Qe,fe=Ne.$implicit,H=F.oxw(2);F.Q6J("value",fe.exam_id),F.xp6(1),F.hij(" ",H.langService.isArabic?null!==(Qe=fe.Egy_ar_exam)&&void 0!==Qe?Qe:fe.Egy_en_exam:null!==(Qe=fe.Egy_en_exam)&&void 0!==Qe?Qe:fe.Egy_ar_exam," ")}}function ze(he,Ne){if(1&he&&(F.TgZ(0,"div",16),F.TgZ(1,"mat-label",7),F._uU(2),F.ALo(3,"translate"),F.qZA(),F.TgZ(4,"mat-form-field",8),F.TgZ(5,"mat-select",17),F.ALo(6,"translate"),F.YNc(7,ne,2,2,"mat-option",10),F.qZA(),F.TgZ(8,"mat-hint"),F._UZ(9,"input-validation-msg",11),F.qZA(),F.qZA(),F.qZA()),2&he){var fe=F.oxw();F.xp6(2),F.hij(" ",F.lcZ(3,8,"Navbar.Exams")," "),F.xp6(2),F.Q6J("appearance",fe.appearance),F.xp6(1),F.s9C("placeholder",F.lcZ(6,10,"Navbar.Exams")),F.Q6J("formControl",fe.examIdsCtrl),F.xp6(2),F.Q6J("ngForOf",fe.exams),F.xp6(2),F.Q6J("control",fe.examIdsCtrl)("submitted",fe.submitted)("isSelect",!0)}}function Te(he,Ne){if(1&he){var fe=F.EpF();F.TgZ(0,"button",18),F.NdJ("click",function(){return F.CHM(fe),F.oxw().copyExamsToHR()}),F._uU(1),F.ALo(2,"translate"),F.qZA()}2&he&&(F.xp6(1),F.hij(" ",F.lcZ(2,1,"General.Save")," "))}function Ge(he,Ne){if(1&he){var fe=F.EpF();F.TgZ(0,"button",18),F.NdJ("click",function(){return F.CHM(fe),F.oxw().copySurveyToHR()}),F._uU(1),F.ALo(2,"translate"),F.qZA()}2&he&&(F.xp6(1),F.hij(" ",F.lcZ(2,1,"General.Save")," "))}var ue=function(){var he=function(){function Ne(fe,H,Qe,$e,ht,_t,Nt,Rt){var bt=this;(0,Y.Z)(this,Ne),this.fb=fe,this.spinner=H,this.examsService=Qe,this.authserv=$e,this.langService=ht,this.toastr=_t,this.data=Nt,this.dialogRef=Rt,this.submitted=!1,this.appearance=e.cm,this.subjectId=Nt.subjectId,this.EduCompId=this.authserv.getEduCompId(),H.show(),(0,T.D)([this.examsService.getImplemenationsByCourseID(this.subjectId,this.EduCompId),this.examsService.getExamByCourseId(this.subjectId)]).subscribe(function(Mt){H.hide();var Ke=Mt[0],ft=Mt[1];(null==Ke?void 0:Ke.returnValue)==S.N.success&&(bt.implementationList=null==Ke?void 0:Ke.ImplementationList),(null==ft?void 0:ft.returnValue)==S.N.success&&(bt.exams=null==ft?void 0:ft.EgyExams)})}return(0,j.Z)(Ne,[{key:"impIdCtrl",get:function(){return this.form.get("impId")}},{key:"examIdsCtrl",get:function(){return this.form.get("examIds")}},{key:"ngOnInit",value:function(){var H,Qe;this.form=this.fb.group({impId:[null,f.kI.required],examIds:[null,f.kI.required],eduCompId:[this.EduCompId,f.kI.required]}),(null===(H=this.data)||void 0===H?void 0:H.surveyId)>0&&this.examIdsCtrl.setValue([null===(Qe=this.data)||void 0===Qe?void 0:Qe.surveyId])}},{key:"copyExamsToHR",value:function(){var H=this;this.submitted=!0,this.form.valid?(this.spinner.show(),this.examsService.copyExamsToHR({EduComp:this.EduCompId,impID:this.impIdCtrl.value,ExamsIDs:this.examIdsCtrl.value}).subscribe(function($e){$e.returnValue==S.N.success&&(H.toastr.success("sendHrSuccess"),H.spinner.hide(),H.dialogRef.close())})):this.toastr.error("General.FormNotValid")}},{key:"copySurveyToHR",value:function(){var H=this;this.submitted=!0,this.form.valid?(this.spinner.show(),this.examsService.copySurveyToHR({EduComp:this.EduCompId,impID:this.impIdCtrl.value,ExamsIDs:this.examIdsCtrl.value}).subscribe(function($e){$e.returnValue==S.N.success&&(H.toastr.success("sendHrSuccess"),H.spinner.hide(),H.dialogRef.close())})):this.toastr.error("General.FormNotValid")}}]),Ne}();return he.\u0275fac=function(fe){return new(fe||he)(F.Y36(f.qu),F.Y36(Q.t2),F.Y36(t.R),F.Y36(ae.e),F.Y36(W.T),F.Y36(u.K),F.Y36(Z.WI),F.Y36(Z.so))},he.\u0275cmp=F.Xpm({type:he,selectors:[["app-exams-integration"]],decls:19,vars:15,consts:[["mat-dialog-title","",1,"mb-2","border-0"],[3,"title"],[1,"fas","fa-times-circle","closeIcon","float-right",3,"mat-dialog-close"],[1,"mt-3"],[3,"formGroup"],[1,"row"],[1,"col-12","mb-4"],[1,"input-label"],[3,"appearance"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"control","submitted","isSelect"],["class","col-12 mb-2",4,"ngIf"],["align","end"],["class","orange-btn radius-btn w-100",3,"click",4,"ngIf"],[3,"value"],[1,"col-12","mb-2"],["multiple","",3,"formControl","placeholder"],[1,"orange-btn","radius-btn","w-100",3,"click"]],template:function(fe,H){1&fe&&(F.TgZ(0,"p",0),F._UZ(1,"page-title",1),F._UZ(2,"i",2),F.qZA(),F.TgZ(3,"div",3),F.TgZ(4,"form",4),F.TgZ(5,"div",5),F.TgZ(6,"div",6),F.TgZ(7,"mat-label",7),F._uU(8),F.ALo(9,"translate"),F.qZA(),F.TgZ(10,"mat-form-field",8),F.TgZ(11,"mat-select",9),F.YNc(12,ye,2,3,"mat-option",10),F.qZA(),F.TgZ(13,"mat-hint"),F._UZ(14,"input-validation-msg",11),F.qZA(),F.qZA(),F.qZA(),F.YNc(15,ze,10,12,"div",12),F.qZA(),F.qZA(),F.qZA(),F.TgZ(16,"mat-card-actions",13),F.YNc(17,Te,3,3,"button",14),F.YNc(18,Ge,3,3,"button",14),F.qZA()),2&fe&&(F.xp6(1),F.Q6J("title",null!=H.data&&H.data.surveyId?"surveyIntegration":"examIntegration"),F.xp6(1),F.Q6J("mat-dialog-close",!1),F.xp6(2),F.Q6J("formGroup",H.form),F.xp6(4),F.hij(" ",F.lcZ(9,13,"Implementations")," "),F.xp6(2),F.Q6J("appearance",H.appearance),F.xp6(1),F.Q6J("formControl",H.impIdCtrl),F.xp6(1),F.Q6J("ngForOf",H.implementationList),F.xp6(2),F.Q6J("control",H.impIdCtrl)("submitted",H.submitted)("isSelect",!0),F.xp6(1),F.Q6J("ngIf",!(null!=H.data&&H.data.surveyId)),F.xp6(2),F.Q6J("ngIf",!(null!=H.data&&H.data.surveyId)),F.xp6(1),F.Q6J("ngIf",null==H.data?null:H.data.surveyId))},directives:[Z.uh,C.T,Z.ZT,f._Y,f.JL,f.sg,E.hX,E.KE,ce.gD,f.JJ,f.oH,k.sg,E.bx,K.p,k.O5,Ie.hq,pe.ey],pipes:[se.X$],styles:[""]}),he}()},9941:function(rt,Fe,h){h.r(Fe),h.d(Fe,{SetupModule:function(){return mc}});var Y=h(3144),j=h(5671),f=h(9808),Z=h(4330),T=h(3075),S=h(8966),e=h(1891),F=h(9430),Q=h(6405),t=h(4423),ae=h(5013),W=h(8657),u=h(6896),C=h(8941),E=h(5471),ce=h(2721),k=h(9224),K=h(2925),Ie=function(){var i=function(){function s(a,n,o,r,g,v,x,w){(0,j.Z)(this,s),this.fb=a,this.msg=n,this.spinner=o,this.subjectsService=r,this.uploadFileService=g,this.languageService=v,this.data=x,this.dialogRef=w,this.coverPath="https://via.placeholder.com/150",this.submitted=!1,this.subjectId=x.subjectId,this.unitId=x.unitId,this.unitId>0&&this.getUnitById()}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){this.myForm=this.fb.group({id:[this.unitId],unit_ar_name:["",[T.kI.required,Z.D.whiteSpace]],unit_en_name:["",[T.kI.required,Z.D.whiteSpace]],unitDescription:[""],thumbnailPic:[null]})}},{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"getUnitById",value:function(){var n=this;this.spinner.show(),this.subjectsService.getUnitById(this.unitId).subscribe(function(o){var r;o.addedUnit&&(n.myForm.patchValue(o.addedUnit),n.FormCtrls.thumbnailPic.setValue(null===(r=o.addedUnit.unitThumb)||void 0===r?void 0:r.attach_path),n.unit_name=o.addedUnit.unit_ar_name,n.subjectId=o.addedUnit.subjectid),n.spinner.hide()})}},{key:"addUpdateUnit",value:function(){var o,r,g,v,x,n=this;this.submitted=!0;var w={};if(this.myForm.valid){this.spinner.show();var q={},N={};q.id=null===(o=this.FormCtrls.id)||void 0===o?void 0:o.value,q.unit_ar_name=null===(r=this.FormCtrls.unit_ar_name)||void 0===r?void 0:r.value,q.unit_en_name=null===(g=this.FormCtrls.unit_en_name)||void 0===g?void 0:g.value,q.unitDescription=null===(v=this.FormCtrls.unitDescription)||void 0===v?void 0:v.value,q.thumbnailPic=null===(x=this.FormCtrls.thumbnailPic)||void 0===x?void 0:x.value,N.subject_id=this.subjectId,w.addedUnit=q,w.currentSubject=N,this.subjectsService.addUpdateUnit(w).subscribe(function(L){L&&(n.dialogRef.close(L),n.msg.success(0==n.unitId?"General.AddSuccessfully":"General.UpdateSuccessfully")),n.spinner.hide()})}else this.msg.error("General.FormNotValid")}},{key:"onChange",value:function(n){var o=this;this.uploadFileService.uploadFile(n).then(function(r){o.FormCtrls.thumbnailPic.setValue(r)})}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(T.qu),e.Y36(F.K),e.Y36(Q.t2),e.Y36(t.n),e.Y36(ae.f),e.Y36(W.T),e.Y36(S.WI),e.Y36(S.so))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-unit"]],decls:21,vars:16,consts:[["mat-dialog-title","",1,"mb-2","border-0"],["addTitle","course.AddStage","editTitle","course.UpdateStage",3,"id"],[1,"fas","fa-times-circle","closeIcon","float-right",3,"mat-dialog-close"],[1,"mt-3"],[3,"formGroup"],[1,"row"],[1,"col-9"],[1,"media"],["width","70","height","70","alt","avatar",1,"rounded","mr-3",3,"src"],[1,"col-3","d-flex","align-items-center"],["accept","image/*","htmlId","file","label","course.coverPhoto",3,"control","submitted","showIcon"],[1,"col-12"],["label","labels.arName","type","text",3,"control","submitted"],["label","labels.enName","type","text",3,"control","submitted"],["label","course.description","rows","2",3,"control","submitted"],["align","end"],[1,"orange-btn","radius-btn","w-25",3,"click"]],template:function(a,n){var o,r;1&a&&(e.TgZ(0,"p",0),e._UZ(1,"page-title",1),e._UZ(2,"i",2),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"form",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"div",7),e._UZ(8,"img",8),e.qZA(),e.qZA(),e.TgZ(9,"div",9),e._UZ(10,"app-button-file-input",10),e.qZA(),e.TgZ(11,"div",11),e._UZ(12,"app-input",12),e.qZA(),e.TgZ(13,"div",11),e._UZ(14,"app-input",13),e.qZA(),e.TgZ(15,"div",11),e._UZ(16,"app-textarea",14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"mat-card-actions",15),e.TgZ(18,"button",16),e.NdJ("click",function(){return n.addUpdateUnit()}),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.qZA()),2&a&&(e.xp6(1),e.Q6J("id",null!==(o=n.unitId)&&void 0!==o?o:0),e.xp6(1),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("formGroup",n.myForm),e.xp6(4),e.Q6J("src",null!==(r=n.uploadFileService.previewPicture(n.FormCtrls.thumbnailPic.value))&&void 0!==r?r:n.coverPath,e.LSH),e.xp6(2),e.Q6J("control",n.FormCtrls.thumbnailPic)("submitted",n.submitted)("showIcon",!1),e.xp6(2),e.Q6J("control",n.FormCtrls.unit_ar_name)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.FormCtrls.unit_en_name)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.FormCtrls.unitDescription)("submitted",n.submitted),e.xp6(3),e.hij(" ",e.lcZ(20,14,0==n.unitId?"General.Add":"General.Update")," "))},directives:[S.uh,u.T,S.ZT,T._Y,T.JL,T.sg,C.m,E.a,ce.R,k.hq],pipes:[K.X$],styles:[".mat-dialog-title[_ngcontent-%COMP%]{border-bottom:1px solid}"]}),i}(),pe=h(1069),se=h(1803),ye=h(6160),ne=h(8555),ze=h(6002),Te=h(7011),Ge=h(7834),ue=h(8632),he=h(655),Ne=h(8843),fe=h(530),H=h(7322),Qe=h(3954);function $e(){$e=function(){return i};var i={},s=Object.prototype,a=s.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",g=n.toStringTag||"@@toStringTag";function v(D,y,P){return Object.defineProperty(D,y,{value:P,enumerable:!0,configurable:!0,writable:!0}),D[y]}try{v({},"")}catch(D){v=function(P,G,z){return P[G]=z}}function x(D,y,P,G){var De,Ue,oe,Ce,X=Object.create((y&&y.prototype instanceof N?y:N).prototype),_e=new tt(G||[]);return X._invoke=(De=D,Ue=P,oe=_e,Ce="suspendedStart",function(Re,ut){if("executing"===Ce)throw new Error("Generator is already running");if("completed"===Ce){if("throw"===Re)throw ut;return{value:void 0,done:!0}}for(oe.method=Re,oe.arg=ut;;){var Dt=oe.delegate;if(Dt){var it=lt(Dt,oe);if(it){if(it===q)continue;return it}}if("next"===oe.method)oe.sent=oe._sent=oe.arg;else if("throw"===oe.method){if("suspendedStart"===Ce)throw Ce="completed",oe.arg;oe.dispatchException(oe.arg)}else"return"===oe.method&&oe.abrupt("return",oe.arg);Ce="executing";var dt=w(De,Ue,oe);if("normal"===dt.type){if(Ce=oe.done?"completed":"suspendedYield",dt.arg===q)continue;return{value:dt.arg,done:oe.done}}"throw"===dt.type&&(Ce="completed",oe.method="throw",oe.arg=dt.arg)}}),X}function w(D,y,P){try{return{type:"normal",arg:D.call(y,P)}}catch(G){return{type:"throw",arg:G}}}i.wrap=x;var q={};function N(){}function L(){}function R(){}var le={};v(le,o,function(){return this});var ke=Object.getPrototypeOf,Ee=ke&&ke(ke(nt([])));Ee&&Ee!==s&&a.call(Ee,o)&&(le=Ee);var ie=R.prototype=N.prototype=Object.create(le);function Be(D){["next","throw","return"].forEach(function(y){v(D,y,function(P){return this._invoke(y,P)})})}function We(D,y){function P(z,X,_e,De){var Ue=w(D[z],D,X);if("throw"!==Ue.type){var oe=Ue.arg,Ce=oe.value;return Ce&&"object"==typeof Ce&&a.call(Ce,"__await")?y.resolve(Ce.__await).then(function(Re){P("next",Re,_e,De)},function(Re){P("throw",Re,_e,De)}):y.resolve(Ce).then(function(Re){oe.value=Re,_e(oe)},function(Re){return P("throw",Re,_e,De)})}De(Ue.arg)}var G;this._invoke=function(z,X){function _e(){return new y(function(De,Ue){P(z,X,De,Ue)})}return G=G?G.then(_e,_e):_e()}}function lt(D,y){var P=D.iterator[y.method];if(void 0===P){if(y.delegate=null,"throw"===y.method){if(D.iterator.return&&(y.method="return",y.arg=void 0,lt(D,y),"throw"===y.method))return q;y.method="throw",y.arg=new TypeError("The iterator does not provide a 'throw' method")}return q}var G=w(P,D.iterator,y.arg);if("throw"===G.type)return y.method="throw",y.arg=G.arg,y.delegate=null,q;var z=G.arg;return z?z.done?(y[D.resultName]=z.value,y.next=D.nextLoc,"return"!==y.method&&(y.method="next",y.arg=void 0),y.delegate=null,q):z:(y.method="throw",y.arg=new TypeError("iterator result is not an object"),y.delegate=null,q)}function gt(D){var y={tryLoc:D[0]};1 in D&&(y.catchLoc=D[1]),2 in D&&(y.finallyLoc=D[2],y.afterLoc=D[3]),this.tryEntries.push(y)}function et(D){var y=D.completion||{};y.type="normal",delete y.arg,D.completion=y}function tt(D){this.tryEntries=[{tryLoc:"root"}],D.forEach(gt,this),this.reset(!0)}function nt(D){if(D){var y=D[o];if(y)return y.call(D);if("function"==typeof D.next)return D;if(!isNaN(D.length)){var P=-1,G=function z(){for(;++P<D.length;)if(a.call(D,P))return z.value=D[P],z.done=!1,z;return z.value=void 0,z.done=!0,z};return G.next=G}}return{next:st}}function st(){return{value:void 0,done:!0}}return L.prototype=R,v(ie,"constructor",R),v(R,"constructor",L),L.displayName=v(R,g,"GeneratorFunction"),i.isGeneratorFunction=function(D){var y="function"==typeof D&&D.constructor;return!!y&&(y===L||"GeneratorFunction"===(y.displayName||y.name))},i.mark=function(D){return Object.setPrototypeOf?Object.setPrototypeOf(D,R):(D.__proto__=R,v(D,g,"GeneratorFunction")),D.prototype=Object.create(ie),D},i.awrap=function(D){return{__await:D}},Be(We.prototype),v(We.prototype,r,function(){return this}),i.AsyncIterator=We,i.async=function(D,y,P,G,z){void 0===z&&(z=Promise);var X=new We(x(D,y,P,G),z);return i.isGeneratorFunction(y)?X:X.next().then(function(_e){return _e.done?_e.value:X.next()})},Be(ie),v(ie,g,"Generator"),v(ie,o,function(){return this}),v(ie,"toString",function(){return"[object Generator]"}),i.keys=function(D){var y=[];for(var P in D)y.push(P);return y.reverse(),function G(){for(;y.length;){var z=y.pop();if(z in D)return G.value=z,G.done=!1,G}return G.done=!0,G}},i.values=nt,tt.prototype={constructor:tt,reset:function(y){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(et),!y)for(var P in this)"t"===P.charAt(0)&&a.call(this,P)&&!isNaN(+P.slice(1))&&(this[P]=void 0)},stop:function(){this.done=!0;var y=this.tryEntries[0].completion;if("throw"===y.type)throw y.arg;return this.rval},dispatchException:function(y){if(this.done)throw y;var P=this;function G(oe,Ce){return _e.type="throw",_e.arg=y,P.next=oe,Ce&&(P.method="next",P.arg=void 0),!!Ce}for(var z=this.tryEntries.length-1;z>=0;--z){var X=this.tryEntries[z],_e=X.completion;if("root"===X.tryLoc)return G("end");if(X.tryLoc<=this.prev){var De=a.call(X,"catchLoc"),Ue=a.call(X,"finallyLoc");if(De&&Ue){if(this.prev<X.catchLoc)return G(X.catchLoc,!0);if(this.prev<X.finallyLoc)return G(X.finallyLoc)}else if(De){if(this.prev<X.catchLoc)return G(X.catchLoc,!0)}else{if(!Ue)throw new Error("try statement without catch or finally");if(this.prev<X.finallyLoc)return G(X.finallyLoc)}}}},abrupt:function(y,P){for(var G=this.tryEntries.length-1;G>=0;--G){var z=this.tryEntries[G];if(z.tryLoc<=this.prev&&a.call(z,"finallyLoc")&&this.prev<z.finallyLoc){var X=z;break}}X&&("break"===y||"continue"===y)&&X.tryLoc<=P&&P<=X.finallyLoc&&(X=null);var _e=X?X.completion:{};return _e.type=y,_e.arg=P,X?(this.method="next",this.next=X.finallyLoc,q):this.complete(_e)},complete:function(y,P){if("throw"===y.type)throw y.arg;return"break"===y.type||"continue"===y.type?this.next=y.arg:"return"===y.type?(this.rval=this.arg=y.arg,this.method="return",this.next="end"):"normal"===y.type&&P&&(this.next=P),q},finish:function(y){for(var P=this.tryEntries.length-1;P>=0;--P){var G=this.tryEntries[P];if(G.finallyLoc===y)return this.complete(G.completion,G.afterLoc),et(G),q}},catch:function(y){for(var P=this.tryEntries.length-1;P>=0;--P){var G=this.tryEntries[P];if(G.tryLoc===y){var z=G.completion;if("throw"===z.type){var X=z.arg;et(G)}return X}}throw new Error("illegal catch attempt")},delegateYield:function(y,P,G){return this.delegate={iterator:nt(y),resultName:P,nextLoc:G},"next"===this.method&&(this.arg=void 0),q}},i}function ht(i,s){if(1&i&&(e.TgZ(0,"mat-label",7),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){var a=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,1,a.upperLabel),"\n")}}function _t(i,s){if(1&i&&e._UZ(0,"i"),2&i){var a=e.oxw(2);e.Tol(a.icon)}}function Nt(i,s){if(1&i&&e._UZ(0,"i"),2&i){var a=e.oxw(2);e.Tol(a.icon)}}function Rt(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){return e.CHM(a),e.oxw(),e.MAs(4).click()}),e.YNc(1,_t,1,2,"i",9),e.TgZ(2,"span",10),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.YNc(5,Nt,1,2,"i",9),e.qZA()}if(2&i){var n=e.oxw();e.Tol("file-input-btn "+n.btnClass),e.xp6(1),e.Q6J("ngIf",n.showIcon&&!n.isIconAfter),e.xp6(2),e.hij(" ",e.lcZ(4,5,n.label)," "),e.xp6(2),e.Q6J("ngIf",n.showIcon&&n.isIconAfter)}}function bt(i,s){if(1&i&&e._UZ(0,"img",19),2&i){var a=e.oxw(2);e.Q6J("src",a.appAssets.pdf,e.LSH)}}function Mt(i,s){if(1&i&&e._UZ(0,"img",19),2&i){var a=e.oxw(2);e.Q6J("src",a.fileService.previewPicture(a.control.value),e.LSH)}}function Ke(i,s){if(1&i&&(e.ynx(0),e._uU(1),e.ALo(2,"fileSize"),e.BQk()),2&i){var n,a=e.oxw(3);e.xp6(1),e.hij(" ",e.lcZ(2,1,null!==(n=a.control.value.size)&&void 0!==n?n:null==a.fileObject?null:a.fileObject.size)," ")}}function ft(i,s){if(1&i&&(e.ynx(0),e._uU(1),e.ALo(2,"date"),e.BQk()),2&i){var a=e.oxw(3);e.xp6(1),e.hij(" . ",e.xi3(2,1,null==a.fileObject?null:a.fileObject.date,"d MMM, y")," ")}}function zt(i,s){if(1&i&&(e._uU(0),e.ALo(1,"date")),2&i){var a=e.oxw(3);e.hij(" . ",e.xi3(1,1,a.todayDate,"d MMM, y")," ")}}function In(i,s){if(1&i&&(e.TgZ(0,"div",20),e.YNc(1,Ke,3,3,"ng-container",21),e.YNc(2,ft,3,4,"ng-container",22),e.YNc(3,zt,2,4,"ng-template",null,23,e.W1O),e.qZA()),2&i){var a=e.MAs(4),n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.control.value.size||(null==n.fileObject?null:n.fileObject.size)),e.xp6(1),e.Q6J("ngIf",n.fileObject)("ngIfElse",a)}}function yn(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"div",11),e.TgZ(1,"div",12),e.YNc(2,bt,1,1,"img",13),e.YNc(3,Mt,1,1,"img",13),e.qZA(),e.TgZ(4,"div",14),e.TgZ(5,"div",15),e._uU(6),e.qZA(),e.YNc(7,In,5,3,"div",16),e.TgZ(8,"div",17),e.TgZ(9,"i",18),e.NdJ("click",function(){return e.CHM(a),e.oxw().deleteFile()}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){var o,n=e.oxw();e.xp6(2),e.Q6J("ngIf",!n.isImage()),e.xp6(1),e.Q6J("ngIf",n.isImage()),e.xp6(3),e.Oqu(null!==(o=null!==(o=n.control.value.name)&&void 0!==o?o:null==n.fileObject?null:n.fileObject.name)&&void 0!==o?o:""),e.xp6(1),e.Q6J("ngIf",n.control.value.size||n.fileObject)}}var Qt=function(){var i=function(){function s(a,n,o){(0,j.Z)(this,s),this.fileService=a,this.msg=n,this.appAssets=o,this.submitted=!1,this.showIcon=!0,this.icon="icon-cloud-upload",this.isIconAfter=!1,this.btnClass="btn btn-filebtn",this.label="General.UploadFromCo",this.onChange=new e.vpe,this.onDelete=new e.vpe,this.todayDate=new Date}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(){this.removeFile&&this.fileService.resetFileById(this.htmlId)}},{key:"uploadFile",value:function(n){return(0,he.mG)(this,void 0,void 0,$e().mark(function o(){var r=this;return $e().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.fileService.uploadFile(n).then(function(x){x.size>10485760?(r.msg.warning("General.largFileError"),r.htmlId&&r.fileService.resetFileById(r.htmlId)):setTimeout(function(){var w;null===(w=r.control)||void 0===w||w.setValue(x),r.onChange.emit(x)},100)});case 2:case"end":return v.stop()}},o,this)}))}},{key:"isImage",value:function(){var n,o;return this.fileObject?null===(n=this.fileObject.type)||void 0===n?void 0:n.includes("image"):null===(o=this.control.value.type)||void 0===o?void 0:o.includes("image")}},{key:"deleteFile",value:function(){var n;null===(n=this.control)||void 0===n||n.setValue(null),this.htmlId&&this.fileService.resetFileById(this.htmlId),this.onDelete.emit()}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(ae.f),e.Y36(F.K),e.Y36(Ne.U))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-button-file-input-new"]],inputs:{control:"control",submitted:"submitted",accept:"accept",removeFile:"removeFile",htmlId:"htmlId",showIcon:"showIcon",icon:"icon",isIconAfter:"isIconAfter",btnClass:"btnClass",label:"label",upperLabel:"upperLabel",fileObject:"fileObject"},outputs:{onChange:"onChange",onDelete:"onDelete"},features:[e.TTD],decls:7,vars:8,consts:[["class","input-label",4,"ngIf"],["type","button",3,"class","click",4,"ngIf"],["class","file-info",4,"ngIf"],["hidden","","type","file",1,"form-control",3,"id","accept","change"],["fileInput",""],[1,"danger"],[3,"control","submitted","isFile"],[1,"input-label"],["type","button",3,"click"],[3,"class",4,"ngIf"],[1,"text-btn"],[1,"file-info"],[1,"img"],[3,"src",4,"ngIf"],[1,"content"],[1,"name"],["class","size",4,"ngIf"],[1,"delete"],[1,"fas","fa-trash-alt",3,"click"],[3,"src"],[1,"size"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["today",""]],template:function(a,n){1&a&&(e.YNc(0,ht,3,3,"mat-label",0),e.YNc(1,Rt,6,7,"button",1),e.YNc(2,yn,10,4,"div",2),e.TgZ(3,"input",3,4),e.NdJ("change",function(r){return n.uploadFile(r)}),e.qZA(),e.TgZ(5,"span",5),e._UZ(6,"input-validation-msg",6),e.qZA()),2&a&&(e.Q6J("ngIf",n.upperLabel),e.xp6(1),e.Q6J("ngIf",!n.control.value),e.xp6(1),e.Q6J("ngIf",n.control.value),e.xp6(1),e.Q6J("id",n.htmlId)("accept",n.accept),e.xp6(3),e.Q6J("control",n.control)("submitted",n.submitted)("isFile",!0))},directives:[f.O5,fe.p,H.hX],pipes:[K.X$,Qe.H,f.uU],styles:[".btn-filebtn[_ngcontent-%COMP%]{width:100%;border:1px dashed #dcdfe6;background:#f2f6fc;padding:15px;color:#193141;display:flex;justify-content:center;align-items:center;gap:2px 10px;align-content:center;flex-wrap:nowrap;flex-direction:row;border-radius:11.7px;min-height:50px;font-size:13px}.btn-filebtn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#c4c4c4}.input-label[_ngcontent-%COMP%]{margin-bottom:3px;display:inline-block}.file-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:5px;padding:8px;border-radius:15px;border:solid 1px #dbdbdb;height:50px}.file-info[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:25px;height:100%}.file-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-grow:1}.file-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:14px;line-height:1.6;color:#7b809a}.file-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]{font-size:12px;line-height:1.4;letter-spacing:-.05px;color:#7b809a}.file-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{color:#d1031b}.file-info[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px;cursor:pointer}"]}),i}(),qn=function(){var i=function(){function s(a,n,o,r,g,v,x,w,q,N,L){var R=this;(0,j.Z)(this,s),this.route=a,this.fb=n,this.toastr=o,this.courseService=r,this.authserv=g,this.spinner=v,this.languageService=x,this.uploadFileService=w,this.appStrings=q,this.data=N,this.dialogRef=L,this.unitId=0,this.attachmentId=0,this.submitted=!1,this.unitId=N.unitId,this.subject_id=N.subject_id,this.attachmentId=N.attachmentId,this.route.queryParamMap.subscribe(function(le){R.functionId=Number(le.get("functionId"))}),this.EduCompId=this.authserv.getEduCompId()}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){this.myForm=this.fb.group({id:[this.attachmentId],file_ar_name:["",[T.kI.required]],file_en_name:["",[T.kI.required]],attachFile:[null,[T.kI.required]],orderNum:["",[T.kI.required,Z.D.bigZero]]}),this.attachmentId>0&&this.getAttachmentById()}},{key:"onCloseDialog",value:function(){var n=null;this.attachmentId&&(n={id:this.attachmentId,ar_name:this.attach.file_ar_name,en_name:this.attach.file_en_name,type:this.appStrings.stageAttach,order:this.attach.orderNum}),this.dialogRef.close(n)}},{key:"formCtrls",get:function(){return this.myForm.controls}},{key:"getAttachmentById",value:function(){var n=this;this.spinner.show(),this.courseService.getUnitAttachmentById(this.attachmentId).subscribe(function(o){o&&(n.myForm.patchValue(o.fileEduUnit[0]),n.formCtrls.attachFile.setValue(o.fileEduUnit[0].attach_path),n.attach=o.fileEduUnit[0],o.fileEduUnit[0].attach_path&&(n.savedFile={name:o.fileEduUnit[0].attachName,size:Number(o.fileEduUnit[0].size),date:o.fileEduUnit[0].date,type:"application/pdf"})),n.spinner.hide()})}},{key:"onSubmit",value:function(){var n=this;if(this.submitted=!0,this.myForm.valid){this.spinner.show();var o={id:this.formCtrls.id.value,ar_name:this.formCtrls.file_ar_name.value,en_name:this.formCtrls.file_en_name.value,subject_id:this.subject_id,unit_id:this.unitId,File:this.formCtrls.attachFile.value,orderNum:this.formCtrls.orderNum.value};this.courseService.addEditUnitAttachment(o).subscribe(function(r){1==r.returnValue?(n.toastr.success(0==o.id?"General.AddSuccessfully":"General.UpdateSuccessfully"),n.submitted=!1,n.onCloseDialog()):n.toastr.error(r.returnString),n.spinner.hide()})}else this.toastr.error("General.FormNotValid")}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(ne.gz),e.Y36(T.qu),e.Y36(F.K),e.Y36(ze.N),e.Y36(Te.e),e.Y36(Q.t2),e.Y36(W.T),e.Y36(ae.f),e.Y36(Ge.e),e.Y36(S.WI),e.Y36(S.so))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-unit-attachment"]],decls:19,vars:16,consts:[["mat-dialog-title","",1,"mb-2"],["addTitle","course.AddFile","editTitle","course.UpdateFile",3,"id"],[1,"fas","fa-times-circle","closeIcon","float-right",3,"mat-dialog-close"],[1,"dark-blue",3,"percentage"],[1,"mtop-30"],[1,"mbottom-20",3,"formGroup"],[1,"row"],[1,"col-12"],["label","labels.enName","type","text",3,"control","submitted"],["label","labels.arName","type","text",3,"control","submitted"],["label","labels.Order","type","number",3,"control","submitted"],["accept",".pdf","htmlId","unit-attach","upperLabel","uploadFile","icon","fas fa-cloud-upload-alt",3,"control","submitted","fileObject","onChange"],["align","end"],[1,"orange-btn","radius-btn","w-100","mbottom-16",3,"click"]],template:function(a,n){1&a&&(e.TgZ(0,"p",0),e._UZ(1,"page-title",1),e._UZ(2,"i",2),e.qZA(),e._UZ(3,"progress-bar",3),e.TgZ(4,"mat-dialog-content",4),e.TgZ(5,"form",5),e.TgZ(6,"div",6),e.TgZ(7,"div",7),e._UZ(8,"app-input",8),e.qZA(),e.TgZ(9,"div",7),e._UZ(10,"app-input",9),e.qZA(),e.TgZ(11,"div",7),e._UZ(12,"app-input",10),e.qZA(),e.TgZ(13,"div",7),e.TgZ(14,"app-button-file-input-new",11),e.NdJ("onChange",function(){return n.savedFile=null}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"mat-dialog-actions",12),e.TgZ(16,"button",13),e.NdJ("click",function(){return n.onSubmit()}),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.qZA()),2&a&&(e.xp6(1),e.Q6J("id",n.attachmentId),e.xp6(1),e.Q6J("mat-dialog-close",!1),e.xp6(1),e.Q6J("percentage",100),e.xp6(2),e.Q6J("formGroup",n.myForm),e.xp6(3),e.Q6J("control",n.formCtrls.file_en_name)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.formCtrls.file_ar_name)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.formCtrls.orderNum)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.formCtrls.attachFile)("submitted",n.submitted)("fileObject",n.savedFile),e.xp6(3),e.hij(" ",e.lcZ(18,14,0==n.attachmentId?"General.Add":"General.Update")," "))},directives:[S.uh,u.T,S.ZT,ue.R,S.xY,T._Y,T.JL,T.sg,E.a,Qt,S.H8],pipes:[K.X$],styles:[".center[_ngcontent-%COMP%]{text-align:center}embed[_ngcontent-%COMP%]{width:400px;height:400px}"]}),i}(),Jt=h(7162),Fn=h(3375),ve=h(3938),Je=h(4159),B=h(6770),A=h(9772),b=["dialogTemplate"];function I(i,s){if(1&i&&e._UZ(0,"page-title",22),2&i){var a=e.oxw();e.Q6J("title",null!=a.langService&&a.langService.isArabic?a.course.subCourse_ar_name:a.course.subCourse_en_name)}}var O=function(){return{height:"20px",width:"100px",margin:"0px",borderRadius:"10px"}};function $(i,s){1&i&&e._UZ(0,"ngx-skeleton-loader",23),2&i&&e.Q6J("theme",e.DdM(1,O))}function te(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"span",24),e.NdJ("click",function(){var v=e.CHM(a),x=v.$implicit,w=v.index;return e.oxw().changeSelectedUnit(x,w)}),e._uU(1),e.qZA()}if(2&i){var r,n=s.$implicit,o=e.oxw();e.ekj("active",o.selectedUnitId==n.id),e.xp6(1),e.hij(" ",o.langService.isArabic?null!==(r=n.unit_ar_name)&&void 0!==r?r:n.unit_en_name:null!==(r=n.unit_en_name)&&void 0!==r?r:n.unit_ar_name," ")}}function re(i,s){1&i&&e._UZ(0,"span")}var de=function(s){return{functionId:s}};function ge(i,s){if(1&i&&(e.TgZ(0,"a",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){var a=e.oxw().$implicit,n=e.oxw(3);e.cQ8("routerLink","/dashboard/setup/course/structure-exam/",a.id,"/",a.examQuestionHeadId,"/",n.subjectId,""),e.Q6J("queryParams",e.VKq(8,de,n.functionId)),e.xp6(1),e.AsE(" ",a.questionsCount," ",e.lcZ(2,6,"labels.Questions")," ")}}function Ze(i,s){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){var a=e.oxw().$implicit;e.xp6(1),e.hij(" ",(a.size/1e6).toFixed(2)," MB ")}}var we=function(s,a,n){return{materialId:s,functionId:a,subjectId:n}};function Se(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"div",28),e.TgZ(1,"div",29),e.TgZ(2,"span",30),e._UZ(3,"img",31),e.qZA(),e.TgZ(4,"div",32),e._uU(5),e.qZA(),e.TgZ(6,"div",33),e.YNc(7,re,1,0,"span",34),e.YNc(8,ge,3,10,"a",35),e.YNc(9,Ze,2,1,"span",34),e.qZA(),e.TgZ(10,"div",36),e.TgZ(11,"a",37),e.NdJ("click",function(){var x=e.CHM(a).$implicit;return e.oxw(3).editUnitData(x)}),e.ALo(12,"translate"),e._UZ(13,"i",38),e.qZA(),e.TgZ(14,"a",39),e.NdJ("click",function(){var x=e.CHM(a).$implicit;return e.oxw(3).openDeleteUnitDataDialog(x)}),e.ALo(15,"translate"),e._UZ(16,"i",40),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){var r,n=s.$implicit,o=e.oxw(3);e.xp6(3),e.Q6J("src",o.getFileIcon(n.type),e.LSH),e.xp6(1),e.ekj("isLecture",n.type==o.appStrings.stageLecture),e.Q6J("routerLink",n.type==o.appStrings.stageLecture?"/dashboard/setup/course/structure-lectures":null)("queryParams",e.kEZ(15,we,n.id,o.functionId,o.subjectId)),e.xp6(1),e.hij(" ",o.langService.isArabic?null!==(r=n.ar_name)&&void 0!==r?r:n.en_name:null!==(r=n.en_name)&&void 0!==r?r:n.ar_name," "),e.xp6(2),e.Q6J("ngIf",n.type==o.appStrings.stageLecture),e.xp6(1),e.Q6J("ngIf",n.type==o.appStrings.stageExam),e.xp6(1),e.Q6J("ngIf",n.type==o.appStrings.stageAttach),e.xp6(2),e.s9C("matTooltip",e.lcZ(12,11,"General.Edit")),e.xp6(3),e.s9C("matTooltip",e.lcZ(15,13,"General.Delete"))}}function Pe(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"div",42),e.TgZ(1,"button",43),e.NdJ("click",function(){return e.CHM(a),e.oxw(3).openCreationDialog()}),e._UZ(2,"i",12),e.TgZ(3,"p"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA(),e.qZA()}2&i&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"addStageData"),""))}function He(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",25),e.YNc(2,Se,17,19,"div",26),e.YNc(3,Pe,6,3,"div",27),e.qZA(),e.BQk()),2&i){var a=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",a.unitData),e.xp6(1),e.Q6J("ngIf",a.units.length>0)}}function Ve(i,s){if(1&i&&(e.ynx(0),e.YNc(1,He,4,2,"ng-container",14),e.BQk()),2&i){var a=e.oxw(),n=e.MAs(39);e.xp6(1),e.Q6J("ngIf",a.isLoaded)("ngIfElse",n)}}function at(i,s){1&i&&(e.TgZ(0,"div",44),e.TgZ(1,"div",45),e.TgZ(2,"div",46),e.TgZ(3,"div",47),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"i",48),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(5),e.Oqu(e.lcZ(6,1,"noDataFind")))}function ot(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"p",49),e._UZ(1,"page-title",50),e._UZ(2,"i",51),e.qZA(),e._UZ(3,"progress-bar",52),e.TgZ(4,"div",53),e.TgZ(5,"div",54),e.TgZ(6,"div",55),e.NdJ("click",function(){e.CHM(a);var r=e.oxw();return r.selectedCreationItem=r.appStrings.stageLecture}),e._UZ(7,"img",56),e.TgZ(8,"p"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.TgZ(11,"div",55),e.NdJ("click",function(){e.CHM(a);var r=e.oxw();return r.selectedCreationItem=r.appStrings.stageExam}),e._UZ(12,"img",56),e.TgZ(13,"p"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.TgZ(16,"div",55),e.NdJ("click",function(){e.CHM(a);var r=e.oxw();return r.selectedCreationItem=r.appStrings.stageAttach}),e._UZ(17,"img",56),e.TgZ(18,"p"),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",57),e.TgZ(22,"button",58),e.NdJ("click",function(){return e.CHM(a),e.oxw().next()}),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.qZA()}if(2&i){var n=e.oxw();e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(1),e.Q6J("percentage",50),e.xp6(3),e.ekj("active",n.selectedCreationItem==n.appStrings.stageLecture),e.xp6(1),e.Q6J("src",n.assets.add_folder,e.LSH),e.xp6(2),e.hij(" ",e.lcZ(10,15,"Material.Lecture")," "),e.xp6(2),e.ekj("active",n.selectedCreationItem==n.appStrings.stageExam),e.xp6(1),e.Q6J("src",n.assets.quiz,e.LSH),e.xp6(2),e.hij(" ",e.lcZ(15,17,"quiz")," "),e.xp6(2),e.ekj("active",n.selectedCreationItem==n.appStrings.stageAttach),e.xp6(1),e.Q6J("src",n.assets.add_file,e.LSH),e.xp6(2),e.hij(" ",e.lcZ(20,19,"file")," "),e.xp6(4),e.hij(" ",e.lcZ(24,21,"General.Next")," ")}}var It=function(){return{height:"50px",margin:"0px",borderRadius:"10px"}};function yt(i,s){1&i&&(e.TgZ(0,"div",45),e._UZ(1,"ngx-skeleton-loader",23),e.qZA()),2&i&&(e.xp6(1),e.Q6J("theme",e.DdM(1,It)))}var qt=function(){return[1,2,3,4]};function Ft(i,s){1&i&&(e.TgZ(0,"div",59),e.YNc(1,yt,2,2,"div",60),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngForOf",e.DdM(1,qt)))}var wt=function(s){return{functionId:23,parentId:s}},St=function(){var i=function(){function s(a,n,o,r,g,v,x,w,q,N,L,R){var le=this;(0,j.Z)(this,s),this.spinner=a,this.route=n,this.subjectsService=o,this.courseService=r,this.examService=g,this.SubjectMaterialsService=v,this.router=x,this.authserv=w,this.msg=q,this.langService=N,this.dialog=L,this.appStrings=R,this.units=[],this.unitData=[],this.selectedUnitIndex=null,this.svgManager=new Jt.E,this.assets=new Ne.U,this.isLoaded=!1,this.isCourseLoaded=!1,n.paramMap.subscribe(function(ke){le.subjectId=Number(ke.get("courseId")),le.courseService.getCourseById(le.subjectId).subscribe(function(Ee){le.course=Ee,le.isCourseLoaded=!0})}),n.queryParamMap.subscribe(function(ke){le.functionId=Number(ke.get("functionId")),le.functionId&&le.authserv.getUserRowFunctions(le.functionId).subscribe(function(Ee){Ee&&(le.rowFunctions=Ee)})})}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){this.getUnits()}},{key:"getUnits",value:function(){var n=this;this.spinner.show(),this.subjectsService.getUnits(this.subjectId).subscribe(function(o){o.length>0?(n.units=o,n.changeSelectedUnit(o[0],0)):n.isLoaded=!0,n.spinner.hide()})}},{key:"getSelectedUnitData",value:function(){var n=this;this.isLoaded=!1,this.courseService.getAllUnitData(this.selectedUnitId).subscribe(function(o){o&&(n.isLoaded=!0,n.unitData=o.model,n.sortUnitDataByOrder())})}},{key:"changeSelectedUnit",value:function(n,o){this.selectedUnitIndex=o>this.units.length-1?0:o,n||(n=this.units[this.selectedUnitIndex]),this.unitData=[],this.selectedUnitId=n.id,this.selectedUnitName=this.langService.isArabic?n.unit_ar_name:n.unit_en_name,this.getSelectedUnitData()}},{key:"openAddEditUnitDialog",value:function(n){var o=this;this.dialog.open(Ie,{data:{unitId:n>0?n:0,subjectId:this.subjectId},width:"500px",panelClass:"dialog-radius",disableClose:!0}).afterClosed().subscribe(function(r){if((null==r?void 0:r.id)>0){var g=o.units.findIndex(function(v){return v.id==r.id});g<0?o.units.push(r):o.units[g]=r,((null==r?void 0:r.id)==o.selectedUnitId||1==o.units.length)&&(o.selectedUnitName=o.langService.isArabic?r.unit_ar_name:r.unit_en_name,o.selectedUnitId=r.id,o.selectedUnitIndex=o.units.findIndex(function(v){return v.id==o.selectedUnitId}),o.getSelectedUnitData())}})}},{key:"openDeleteUnitDialog",value:function(n){var o=this;this.dialog.open(pe.F,{data:{msg:this.langService.isArabic?n.unit_ar_name:n.unit_en_name,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(r){r&&o.deleteUnit(n)})}},{key:"deleteUnit",value:function(n){var o=this;this.spinner.show(),this.subjectsService.deleteUnit(n.id).subscribe(function(r){if(1==r.returnValue){var g=o.units.indexOf(n);o.units.splice(g,1),o.msg.success("General.DeleteSuccessfully"),n.id==o.selectedUnitId&&o.changeSelectedUnit(null,o.selectedUnitIndex)}else o.msg.error(null==r?void 0:r.returnString);o.spinner.hide()})}},{key:"editUnitData",value:function(n){n.type==this.appStrings.stageLecture?this.openAddEditLectureDialog(n.id):n.type==this.appStrings.stageExam?this.openAddEditExamDialog(n.id):n.type==this.appStrings.stageAttach&&this.openAddEditAttachmentDialog(n.id)}},{key:"openAddEditLectureDialog",value:function(n){var o=this;this.dialog.open(se.Y,{data:{subjectId:this.subjectId,unitId:this.selectedUnitId,materialId:n>0?n:null},maxHeight:"94vh",width:"500px",disableClose:!0}).afterClosed().subscribe(function(r){o.getSelectedUnitData()})}},{key:"openAddEditExamDialog",value:function(n){var o=this;this.dialog.open(ye.M,{data:{subjectId:this.subjectId,unitId:this.selectedUnitId,type:3,examId:n>0?n:0},maxHeight:"99vh",width:"700px",autoFocus:!1,disableClose:!0}).afterClosed().subscribe(function(r){o.getSelectedUnitData()})}},{key:"openAddEditAttachmentDialog",value:function(n){var o=this;this.dialog.open(qn,{data:{subject_id:this.subjectId,unitId:this.selectedUnitId,attachmentId:n},maxHeight:"99vh",width:"500px",autoFocus:!1,disableClose:!0}).afterClosed().subscribe(function(r){o.getSelectedUnitData()})}},{key:"afterCloseUnitDataDialogs",value:function(n){var o=this.unitData.findIndex(function(r){return r.id==n.id});o<0?this.unitData.push(n):this.unitData[o]=n,this.sortUnitDataByOrder()}},{key:"openDeleteUnitDataDialog",value:function(n){var r,g,o=this;this.dialog.open(pe.F,{data:{msg:this.langService.isEnglish?null!==(r=n.ar_name)&&void 0!==r?r:n.en_name:null!==(g=n.en_name)&&void 0!==g?g:n.ar_name,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(v){v&&o.deleteUnitData(n)})}},{key:"deleteUnitData",value:function(n){var r,o=this;n.type==this.appStrings.stageLecture?r=this.SubjectMaterialsService.deleteMaterial(n.id):n.type==this.appStrings.stageExam?r=this.examService.deleteExam(n.id):n.type==this.appStrings.stageAttach&&(r=this.courseService.deleteUnitAttachment(n.id)),this.spinner.show(),r.subscribe(function(g){var v;if(1==g.data||1==g.returnValue){var x=o.unitData.findIndex(function(w){return w==n});o.unitData.splice(x,1),o.msg.success("General.DeleteSuccessfully")}else o.msg.success(null!==(v=null==g?void 0:g.returnString)&&void 0!==v?v:"General.error");o.spinner.hide()})}},{key:"sortUnitDataByOrder",value:function(){this.unitData=this.unitData.sort(function(n,o){return n.order-o.order})}},{key:"track",value:function(n,o){return o.id}},{key:"getFileIcon",value:function(n){return n==this.appStrings.stageLecture?this.svgManager.folder:n==this.appStrings.stageExam?this.svgManager.exam_content:n==this.appStrings.stageAttach?this.svgManager.pdf:void 0}},{key:"openCreationDialog",value:function(){this.selectedCreationItem=null,this.dialog.open(this.dialogTemplate,{panelClass:"dialog-radius"}).afterClosed().subscribe(function(n){})}},{key:"next",value:function(){this.selectedCreationItem&&this.dialog.closeAll(),this.selectedCreationItem==this.appStrings.stageLecture?this.openAddEditLectureDialog(null):this.selectedCreationItem==this.appStrings.stageExam?this.openAddEditExamDialog(0):this.selectedCreationItem==this.appStrings.stageAttach&&this.openAddEditAttachmentDialog(0)}},{key:"examIntegrationDialog",value:function(){this.dialog.open(Fn.$,{data:{subjectId:this.subjectId,unitId:this.selectedUnitId},panelClass:"dialog-radius",width:"40%"}).afterClosed().subscribe(function(n){})}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(Q.t2),e.Y36(ne.gz),e.Y36(t.n),e.Y36(ze.N),e.Y36(ve.R),e.Y36(Je.r),e.Y36(ne.F0),e.Y36(Te.e),e.Y36(F.K),e.Y36(W.T),e.Y36(S.uw),e.Y36(Ge.e))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-structure-index"]],viewQuery:function(a,n){var o;1&a&&e.Gf(b,5),2&a&&e.iGM(o=e.CRH())&&(n.dialogTemplate=o.first)},decls:40,vars:35,consts:[[1,"admin-index-card","add-structure"],[1,"px-2"],[3,"title",4,"ngIf","ngIfElse"],[1,"orange-btn","radius-btn","exam-integration","integration-btn","float-right","d-inline-block","mx-1","mb-2",3,"click"],[1,"orange-btn","radius-btn","survey","integration-btn","float-right","d-inline-block","mx-1","mb-2",3,"routerLink","queryParams"],["courseLoader",""],[1,"px-2","mt-1"],[1,"row"],[1,"col-12","mt-2"],[1,"stage-header"],["class","stage mx-2",3,"active","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"stage","add-stage","mx-2",3,"click"],[1,"ft-plus-circle"],[1,"col-12","mt-3","stage-content"],[4,"ngIf","ngIfElse"],["nodata",""],["align","end",1,"pr-3","pt-0"],[1,"dark-blue-btn","radius-btn","cancel-btn",3,"routerLink","queryParams"],[1,"text-btn"],["routerLink","/dashboard/setup/course/index",1,"orange-btn","radius-btn","next-btn",3,"queryParams"],["dialogTemplate",""],["loader",""],[3,"title"],[3,"theme"],[1,"stage","mx-2",3,"click"],[1,"row","px-1","justify-content-between"],["class","col-12 col-lg-6",4,"ngFor","ngForOf"],["class","col-12 col-lg-6 mb-2",4,"ngIf"],[1,"col-12","col-lg-6"],[1,"stage-content-row"],[1,"icon","col-1","p-0","m-0"],["height","35","width","35","alt","icon",1,"mr-2","avatar",3,"src"],[1,"name","col-7","p-0","m-0",3,"routerLink","queryParams"],[1,"time","col-2","p-0","m-0"],[4,"ngIf"],[3,"routerLink","queryParams",4,"ngIf"],[1,"action","text-center","col-2","p-0","m-0"],[1,"dark-blue","mr-2",3,"matTooltip","click"],[1,"fas","fa-pen","font-medium-3","mr-2"],[1,"danger",3,"matTooltip","click"],[1,"fa","fa-trash","font-medium-3","mr-2"],[3,"routerLink","queryParams"],[1,"col-12","col-lg-6","mb-2"],[1,"dashed-btn",3,"click"],[1,"row","px-1","justify-content-center"],[1,"col-12","col-lg-6","px-0","mb-2"],["role","alert",1,"alert","bg-light-secondary","mb-2","text-center"],[1,"alert-icon-right"],[1,"ft-alert-triangle"],["mat-dialog-title",""],["title","General.Add"],[1,"fas","fa-times-circle","closeIcon","float-right",3,"mat-dialog-close"],[1,"dark-blue",3,"percentage"],["mat-dialog-content",""],[1,"create-data-dialog","mb-3","mt-4"],[1,"create-data-dialog-box",3,"click"],["width","85","height","85",3,"src"],["mat-dialog-actions",""],[1,"orange-btn","radius-btn","w-100",3,"click"],[1,"px-1","justify-content-between",2,"display","flex","flex-wrap","wrap"],["class","col-12 col-lg-6 px-0 mb-2",4,"ngFor","ngForOf"]],template:function(a,n){if(1&a&&(e.TgZ(0,"mat-card",0),e.TgZ(1,"mat-card-title",1),e.YNc(2,I,1,1,"page-title",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return n.examIntegrationDialog()}),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"button",4),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.YNc(9,$,1,2,"ng-template",null,5,e.W1O),e.qZA(),e.TgZ(11,"mat-card-subtitle",6),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"mat-card-content"),e.TgZ(15,"div",7),e.TgZ(16,"div",8),e.TgZ(17,"div",9),e.YNc(18,te,2,3,"span",10),e.TgZ(19,"span",11),e.NdJ("click",function(){return n.openAddEditUnitDialog(0)}),e._uU(20),e.ALo(21,"translate"),e._UZ(22,"i",12),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",13),e.YNc(24,Ve,2,2,"ng-container",14),e.YNc(25,at,8,3,"ng-template",null,15,e.W1O),e.qZA(),e.qZA(),e.TgZ(27,"mat-card-actions",16),e.TgZ(28,"button",17),e.TgZ(29,"span",18),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.qZA(),e.TgZ(32,"button",19),e.TgZ(33,"span",18),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(36,ot,25,23,"ng-template",null,20,e.W1O),e.YNc(38,Ft,2,2,"ng-template",null,21,e.W1O)),2&a){var o=e.MAs(10),r=e.MAs(26);e.xp6(2),e.Q6J("ngIf",n.isCourseLoaded)("ngIfElse",o),e.xp6(2),e.hij(" ",e.lcZ(5,17,"examIntegration")," "),e.xp6(2),e.MGl("routerLink","/dashboard/exams-setup/survey/",null==n.course?null:n.course.id,""),e.Q6J("queryParams",e.VKq(29,wt,n.functionId)),e.xp6(1),e.hij(" ",e.lcZ(8,19,"survey")," "),e.xp6(5),e.hij(" ",e.lcZ(13,21,"AddGeneralInfCourse")," "),e.xp6(6),e.Q6J("ngForOf",n.units)("ngForTrackBy",n.track),e.xp6(2),e.hij(" ",e.lcZ(21,23,"course.AddStage")," "),e.xp6(4),e.Q6J("ngIf",null!=n.selectedUnitIndex)("ngIfElse",r),e.xp6(4),e.MGl("routerLink","/dashboard/setup/course/edit-course/",n.subjectId,"/0"),e.Q6J("queryParams",e.VKq(31,de,n.functionId)),e.xp6(2),e.hij(" ",e.lcZ(31,25,"General.Back")," "),e.xp6(2),e.Q6J("queryParams",e.VKq(33,de,n.functionId)),e.xp6(2),e.hij(" ",e.lcZ(35,27,"General.Submit")," ")}},directives:[k.a8,k.n5,f.O5,ne.rH,k.$j,k.dn,f.sg,k.hq,u.T,B.xr,A.gM,ne.yS,S.uh,S.ZT,ue.R,S.xY,S.H8],pipes:[K.X$],styles:[".add-structure .mat-card-content{min-height:calc(100vh - 206px)!important}.btn-icon[_ngcontent-%COMP%], .btn-dropdown[_ngcontent-%COMP%]:hover{box-shadow:none;max-width:30px}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.content-header[_ngcontent-%COMP%]{text-align:left}.unitDescription[_ngcontent-%COMP%]{max-height:50px;min-height:20px;overflow:hidden}.mat-card-title[_ngcontent-%COMP%]{margin:0!important}.type-text[_ngcontent-%COMP%]{margin-bottom:1rem!important;font-size:14px}.stage-header[_ngcontent-%COMP%]{border-radius:5px;box-shadow:0 2px 4px #8f8f8f40;background-color:#fafafa;padding:5px 15px 0}.stage-header[_ngcontent-%COMP%]   .stage[_ngcontent-%COMP%]{font-family:agrandirBold,Roboto-Bold,sans-serif;font-size:18px;color:#e86820;cursor:pointer;padding:7px 20px;display:inline-block;border-bottom:4px solid transparent;border-radius:4px}.stage-header[_ngcontent-%COMP%]   .stage[_ngcontent-%COMP%]:hover:not(.add-stage), .stage-header[_ngcontent-%COMP%]   .stage.active[_ngcontent-%COMP%]:not(.add-stage){border-bottom:4px solid #e86820}.stage-header[_ngcontent-%COMP%]   .add-stage[_ngcontent-%COMP%]{color:#437a9f}  .create-data-dialog-box{display:inline-block!important;border:3px solid transparent;border-radius:8.9px;box-shadow:0 1.2px 7.5px #305d7c33;background-color:#e2eaf033;margin:0 10px;width:120px;height:150px;text-align:center;cursor:pointer}  .create-data-dialog-box p,   .create-data-dialog-box img{margin:13px auto}  .create-data-dialog-box p{color:#193141;margin:auto;font-size:13px;font-family:agrandirBold,Roboto-Bold,sans-serif}  .create-data-dialog-box.active{border:3px solid #437a9f}.isLecture[_ngcontent-%COMP%]{cursor:pointer}.survey[_ngcontent-%COMP%], .exam-integration[_ngcontent-%COMP%]{letter-spacing:2px;padding:10px 13px;border-radius:15px}.survey[_ngcontent-%COMP%]{background-color:#555}.exam-integration[_ngcontent-%COMP%]{background-color:#437a9f}"]}),i}(),Oe=h(6087),qe=h(4847),M=h(2075),At=h(1222),vt=h(2222),Le=h(7423),Ut=function(){var i=function(){function s(a,n,o,r,g,v,x,w,q){(0,j.Z)(this,s),this.translate=a,this.fb=n,this.jobTitleService=o,this.toastr=r,this.spinner=g,this.datePipe=v,this.languageService=x,this.dialogRef=w,this.data=q,this.submitted=!1,this.department=q.department}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){this.myForm=this.fb.group({from_date:[null,[T.kI.required]],to_date:[null]},{validator:Z.D.dateBefore("from_date","to_date")}),this.myForm.patchValue(this.department)}},{key:"formCtrl",get:function(){return this.myForm.controls}},{key:"update_JobTitle_Department",value:function(){var n=this;if(this.submitted=!0,this.myForm.valid){var o={from_date:this.datePipe.transform(this.formCtrl.from_date.value),to_date:this.datePipe.transform(this.formCtrl.to_date.value)};this.spinner.show(),this.jobTitleService.update_JobTitle_Department(o,this.department.job_title_dep_id).subscribe(function(r){1==r.returnValue?(n.toastr.success("General.UpdateSuccessfully"),n.dialogRef.close(!0)):n.toastr.error(r.returnString),n.spinner.hide()})}else this.toastr.error("General.FormNotValid")}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(K.sK),e.Y36(T.qu),e.Y36(At._),e.Y36(F.K),e.Y36(Q.t2),e.Y36(f.uU),e.Y36(W.T),e.Y36(S.so),e.Y36(S.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-update-job-department"]],decls:16,vars:16,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"row",3,"formGroup"],[1,"col-12"],["label","labels.FromDate",3,"control","submitted"],["label","labels.ToDate",3,"control","submitted"],["mat-dialog-actions","","align","end"],["mat-raised-button","",1,"btn","btn-danger",3,"mat-dialog-close"],["mat-raised-button","","cdkFocusInitial","",1,"btn","btn-info",3,"click"]],template:function(a,n){var o;1&a&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"form",2),e.TgZ(5,"div",3),e._UZ(6,"app-datepicker",4),e.qZA(),e.TgZ(7,"div",3),e._UZ(8,"app-datepicker",5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",6),e.TgZ(10,"button",7),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"button",8),e.NdJ("click",function(){return n.update_JobTitle_Department()}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA()),2&a&&(e.xp6(1),e.AsE(" ",e.lcZ(2,10,"JobTitle.updateJobTitleDepartment")," - ",n.languageService.isArabic?null!==(o=n.department.ar_name)&&void 0!==o?o:n.department.en_name:null!==(o=n.department.en_name)&&void 0!==o?o:n.department.ar_name,"\n"),e.xp6(3),e.Q6J("formGroup",n.myForm),e.xp6(2),e.Q6J("control",n.formCtrl.from_date)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.formCtrl.to_date)("submitted",n.submitted),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(1),e.hij(" ",e.lcZ(12,12,"General.Close")," "),e.xp6(3),e.hij(" ",e.lcZ(15,14,"General.Save")," "))},directives:[S.uh,S.xY,T._Y,T.JL,T.sg,vt.Q,S.H8,Le.lW,S.ZT],pipes:[K.X$],styles:[""]}),i}(),Ot=h(3973),Zt=h(6137);function Gt(i,s){1&i&&(e.TgZ(0,"th",19),e._uU(1,"#"),e.qZA())}function ct(i,s){if(1&i&&(e.TgZ(0,"td",20),e._uU(1),e.qZA()),2&i){var a=s.index;e.xp6(1),e.hij(" ",a+1," ")}}function Ye(i,s){1&i&&(e.TgZ(0,"th",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.enName")," "))}function be(i,s){if(1&i&&(e.TgZ(0,"td",20),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.hij(" ",a.en_name," ")}}function J(i,s){1&i&&(e.TgZ(0,"th",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.arName")," "))}function je(i,s){if(1&i&&(e.TgZ(0,"td",20),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.hij(" ",a.ar_name," ")}}function Vt(i,s){1&i&&(e.TgZ(0,"th",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Departments.allDept")," "))}function Lt(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"a",29),e.NdJ("click",function(){e.CHM(a);var o=e.oxw(2).$implicit;return e.oxw(4).updateDapartmentDialog(o)}),e._UZ(1,"i",30),e.qZA()}}function mt(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"a",31),e.NdJ("click",function(){e.CHM(a);var o=e.oxw(2).$implicit;return e.oxw(4).openDeleatedepartmentDialog(o)}),e._UZ(1,"i",32),e.qZA()}}function Pt(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Lt,2,0,"a",27),e.YNc(2,mt,2,0,"a",28),e.BQk()),2&i){var a=s.$implicit;e.xp6(1),e.Q6J("ngIf","UpdateJobDepartment"===a.functionName),e.xp6(1),e.Q6J("ngIf","deleteJobDepartment"===a.functionName)}}function kt(i,s){if(1&i&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"td"),e.YNc(10,Pt,3,2,"ng-container",26),e.qZA(),e.qZA()),2&i){var o,a=s.$implicit,n=e.oxw(4);e.xp6(2),e.hij(" ",n.languageService.isArabic?null!==(o=a.ar_name)&&void 0!==o?o:a.en_name:null!==(o=a.en_name)&&void 0!==o?o:a.ar_name," "),e.xp6(2),e.Oqu(e.xi3(5,4,a.from_date,"dd-MM-yyyy")),e.xp6(3),e.Oqu(e.xi3(8,7,a.to_date,"dd-MM-yyyy")),e.xp6(3),e.Q6J("ngForOf",n.rowFunctions)}}function Xe(i,s){if(1&i&&(e.TgZ(0,"table",23),e.TgZ(1,"thead",24),e.TgZ(2,"tr"),e.TgZ(3,"th",25),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th",25),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",25),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"th",25),e.qZA(),e.qZA(),e.TgZ(13,"tbody"),e.YNc(14,kt,11,10,"tr",26),e.qZA(),e.qZA()),2&i){var a=e.oxw().$implicit;e.xp6(4),e.Oqu(e.lcZ(5,4,"labels.Name")),e.xp6(3),e.Oqu(e.lcZ(8,6,"labels.FromDate")),e.xp6(3),e.Oqu(e.lcZ(11,8,"labels.ToDate")),e.xp6(4),e.Q6J("ngForOf",a.departments)}}function $t(i,s){if(1&i&&(e.TgZ(0,"td",20),e.YNc(1,Xe,15,10,"table",22),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.Q6J("ngIf",(null==a.departments?null:a.departments.length)>0)}}function an(i,s){1&i&&(e.TgZ(0,"th",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"actions")))}function on(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"a",34),e.NdJ("click",function(){e.CHM(a);var o=e.oxw(2).$implicit;return e.oxw(2).openDeleateDialog(o)}),e.ALo(1,"translate"),e._UZ(2,"i",35),e.qZA()}2&i&&e.s9C("matTooltip",e.lcZ(1,1,"General.Delete"))}function rn(i,s){if(1&i&&(e.ynx(0),e.YNc(1,on,3,3,"a",33),e.BQk()),2&i){var a=s.$implicit;e.xp6(1),e.Q6J("ngIf","Delete"===a.functionName)}}function ii(i,s){if(1&i&&(e.TgZ(0,"td",20),e.YNc(1,rn,2,1,"ng-container",26),e.qZA()),2&i){var a=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",a.rowFunctions)}}function ai(i,s){1&i&&e._UZ(0,"tr",36)}function oi(i,s){1&i&&e._UZ(0,"tr",37)}function ri(i,s){1&i&&e._UZ(0,"tr",38)}function li(i,s){if(1&i&&(e.TgZ(0,"table",7),e.ynx(1,8),e.YNc(2,Gt,2,0,"th",9),e.YNc(3,ct,2,1,"td",10),e.BQk(),e.ynx(4,11),e.YNc(5,Ye,3,3,"th",12),e.YNc(6,be,2,1,"td",10),e.BQk(),e.ynx(7,13),e.YNc(8,J,3,3,"th",12),e.YNc(9,je,2,1,"td",10),e.BQk(),e.ynx(10,14),e.YNc(11,Vt,3,3,"th",12),e.YNc(12,$t,2,1,"td",10),e.BQk(),e.ynx(13,15),e.YNc(14,an,3,3,"th",9),e.YNc(15,ii,2,1,"td",10),e.BQk(),e.YNc(16,ai,1,0,"tr",16),e.YNc(17,oi,1,0,"tr",17),e.YNc(18,ri,1,0,"tr",18),e.qZA()),2&i){var a=e.oxw();e.Q6J("dataSource",a.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",a.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns)}}function si(i,s){if(1&i&&e._UZ(0,"app-table-skeleton",39),2&i){var a=e.oxw();e.Q6J("displayedColumns",a.displayedColumns)}}var ui=function(){return[10]},di=function(){var i=function(){function s(a,n,o,r,g,v,x,w,q,N){var L=this;(0,j.Z)(this,s),this.jobTitleService=a,this.fb=n,this.toastr=o,this.spinner=r,this.dialog=g,this.datePipe=v,this.route=x,this.authService=w,this.languageService=q,this.departmentService=N,this.currentDate=new Date,this.itemsCounts=0,this.curPage=1,this.submitted=!1,this.isLoaded=!1,this.jobTitleList=[],this.displayedColumns=["#","en_name","ar_name","department","actions"],x.queryParamMap.subscribe(function(R){L.functionId=Number(R.get("functionId")),L.functionId&&L.authService.getUserRowFunctions(L.functionId).subscribe(function(le){le.length>0&&(L.rowFunctions=le)})}),this.EduCompId=Number(w.getEduCompId())}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){this.getAllJobTitles(this.curPage),this.myForm=this.fb.group({id:[0,T.kI.required],ar_name:["",[T.kI.required,Z.D.whiteSpace]],en_name:["",[T.kI.required,Z.D.whiteSpace]],departmentsIds:[null,T.kI.required],from_date:[null],to_date:[null]},{validator:Z.D.dateBefore("from_date","to_date")})}},{key:"formCtrl",get:function(){var n;return null===(n=this.myForm)||void 0===n?void 0:n.controls}},{key:"resetSearch",value:function(){this.clearForm(),this.getAllJobTitles(1),this.dataSource.paginator=this.paginator}},{key:"ngAfterViewInit",value:function(){var n=this;this.dataSource&&(this.dataSource.paginator=this.paginator,this.startSortingTable()),this.authService.EduCompId.subscribe(function(o){n.EduCompId=o.EduCompId,n.getAllJobTitles(1),n.dataSource.paginator=n.paginator})}},{key:"startSortingTable",value:function(){var n=this;this.dataSource.sortingDataAccessor=function(o,r){var g,v,x,w,q,N;return"department"===r?n.languageService.isArabic?null!==(v=null===(g=o.departments[0])||void 0===g?void 0:g.ar_name)&&void 0!==v?v:null===(x=o.departments[0])||void 0===x?void 0:x.en_name:null!==(q=null===(w=o.departments[0])||void 0===w?void 0:w.en_name)&&void 0!==q?q:null===(N=o.departments[0])||void 0===N?void 0:N.ar_name:o[r]},this.dataSource.sort=this.sort}},{key:"applyFilter",value:function(n){this.dataSource.filter=n.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}},{key:"getAllJobTitles",value:function(n){var r,g,v,x,w,q,N,o=this;this.isLoaded=!1,this.curPage=n;var L={job_ar_name:null===(g=null===(r=this.formCtrl)||void 0===r?void 0:r.ar_name.value)||void 0===g?void 0:g.trim().toLowerCase(),job_en_name:null===(x=null===(v=this.formCtrl)||void 0===v?void 0:v.en_name.value)||void 0===x?void 0:x.trim().toLowerCase(),dep_ids:null===(w=this.formCtrl)||void 0===w?void 0:w.departmentsIds.value,fromDate:this.datePipe.transform(null===(q=this.formCtrl)||void 0===q?void 0:q.from_date.value),toDate:this.datePipe.transform(null===(N=this.formCtrl)||void 0===N?void 0:N.to_date.value)};this.jobTitleService.getAllJobTitles(L,this.EduCompId,n).subscribe(function(R){R&&(o.dataSource=new M.by(R.jobTitle_list),o.itemsCounts=R.countItems,o.startSortingTable(),o.isLoaded=!0)})}},{key:"getJobTitleToEdit",value:function(n){this.myForm.patchValue(n);var o=[];n.departments.forEach(function(r){null==o||o.push(r.id)}),this.formCtrl.departmentsIds.setValue(o)}},{key:"addJobTitle",value:function(){var o,n=this;if(this.submitted=!0,this.myForm.valid){var r={id:this.formCtrl.id.value,EduCompId:this.EduCompId,ar_name:this.formCtrl.ar_name.value,en_name:this.formCtrl.en_name.value,departmentsIds:this.formCtrl.departmentsIds.value,from_date:this.datePipe.transform(null!==(o=this.formCtrl.from_date.value)&&void 0!==o?o:this.currentDate),to_date:this.datePipe.transform(this.formCtrl.to_date.value)};this.spinner.show(),this.jobTitleService.addJobTitle(r).subscribe(function(g){1==g.returnValue?(n.clearForm(),n.getAllJobTitles(1),n.dataSource.paginator=n.paginator,n.toastr.success("General.AddSuccessfully")):n.toastr.error(g.returnString),n.spinner.hide()})}else this.toastr.error("General.FormNotValid")}},{key:"updateJobTitles",value:function(){var o,n=this;if(this.submitted=!0,this.myForm.valid){var r={};r.EduCompId=this.EduCompId,r.ar_name=this.formCtrl.ar_name.value,r.en_name=this.formCtrl.en_name.value,r.departmentsIds=this.formCtrl.departmentsIds.value,r.from_date=this.datePipe.transform(null!==(o=this.formCtrl.from_date.value)&&void 0!==o?o:this.currentDate),r.to_date=this.datePipe.transform(this.formCtrl.to_date.value),this.spinner.show(),this.jobTitleService.updateJobTitles(r,this.formCtrl.id.value).subscribe(function(g){1==g.returnValue?(n.clearForm(),n.getAllJobTitles(n.curPage),n.toastr.success("General.UpdateSuccessfully")):n.toastr.error(g.returnString),n.spinner.hide()})}else this.toastr.error("General.FormNotValid")}},{key:"deleteJobTitle",value:function(n){var o=this;this.spinner.show(),this.jobTitleService.deleteJobTitles(n.id).subscribe(function(r){1==r.returnValue?(o.toastr.success("General.DeleteSuccessfully"),n.id==o.formCtrl.id.value&&o.clearForm(),1==o.dataSource.data.length&&o.curPage>1?(o.getAllJobTitles(o.curPage-1),o.paginator.pageIndex=o.curPage-1):o.getAllJobTitles(o.curPage)):o.toastr.error(r.returnString),o.spinner.hide()})}},{key:"deleteJobTitleDepartment",value:function(n){var o=this;this.spinner.show(),this.jobTitleService.deleteJobTitleDepartment(n.job_title_dep_id).subscribe(function(r){1==r.returnValue?(o.getAllJobTitles(o.curPage),o.toastr.success("General.DeleteSuccessfully")):o.toastr.error(r.returnString),o.spinner.hide()})}},{key:"updateDapartmentDialog",value:function(n){var o=this;this.dialog.open(Ut,{data:{department:n}}).afterClosed().subscribe(function(r){r&&o.getAllJobTitles(o.curPage)})}},{key:"openDeleateDialog",value:function(n){var r,g,o=this;this.dialog.open(pe.F,{data:{msg:this.languageService.isArabic?null!==(r=n.ar_name)&&void 0!==r?r:n.en_name:null!==(g=n.en_name)&&void 0!==g?g:n.ar_name,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(v){v&&o.deleteJobTitle(n)})}},{key:"openDeleatedepartmentDialog",value:function(n){var r,g,o=this;this.dialog.open(pe.F,{data:{msg:this.languageService.isArabic?null!==(r=n.ar_name)&&void 0!==r?r:n.en_name:null!==(g=n.en_name)&&void 0!==g?g:n.ar_name,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(v){v&&o.deleteJobTitleDepartment(n)})}},{key:"clearForm",value:function(){this.myForm.reset(),this.formCtrl.id.setValue(0),this.submitted=!1}},{key:"getDataFromHR",value:function(){var n=this;this.spinner.show(),this.departmentService.getDataFromHR(this.EduCompId).subscribe(function(o){n.spinner.hide(),o.List&&(n.getAllJobTitles(n.curPage),n.toastr.success("copyHrSuccess"))})}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(At._),e.Y36(T.qu),e.Y36(F.K),e.Y36(Q.t2),e.Y36(S.uw),e.Y36(f.uU),e.Y36(ne.gz),e.Y36(Te.e),e.Y36(W.T),e.Y36(Ot.n))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-job-title"]],viewQuery:function(a,n){var o;1&a&&(e.Gf(qe.YE,5),e.Gf(Oe.NW,5)),2&a&&(e.iGM(o=e.CRH())&&(n.sort=o.first),e.iGM(o=e.CRH())&&(n.paginator=o.first))},decls:12,vars:10,consts:[[1,"admin-index-card"],["title","JobTitle.alljob"],[1,"orange-btn","radius-btn","get-from-hr","integration-btn","float-right","d-inline-block","mx-1","mb-2",3,"click"],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource",4,"ngIf","ngIfElse"],["showFirstLastButtons","","aria-label","Select page of departments",3,"pageSizeOptions","length","pageSize","disabled","page"],["loading",""],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","en_name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","ar_name"],["matColumnDef","department"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["class","table table-sm",4,"ngIf"],[1,"table","table-sm"],[1,"thead-dark"],["scope","col"],[4,"ngFor","ngForOf"],["class","success p-0",3,"click",4,"ngIf"],["class","danger p-0",3,"click",4,"ngIf"],[1,"success","p-0",3,"click"],[1,"ft-edit-2","mr-2"],[1,"danger","p-0",3,"click"],["aria-hidden","true",1,"fa","fa-times","fa","fa-white"],["class","danger p-0",3,"matTooltip","click",4,"ngIf"],[1,"danger","p-0",3,"matTooltip","click"],[1,"fa","fa-trash","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[3,"displayedColumns"]],template:function(a,n){if(1&a&&(e.TgZ(0,"mat-card",0),e.TgZ(1,"mat-card-title"),e._UZ(2,"page-title",1),e.TgZ(3,"button",2),e.NdJ("click",function(){return n.getDataFromHR()}),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA(),e.TgZ(6,"mat-card-content"),e.TgZ(7,"div",3),e.YNc(8,li,19,3,"table",4),e.TgZ(9,"mat-paginator",5),e.NdJ("page",function(g){return n.getAllJobTitles(g.pageIndex+1)}),e.qZA(),e.qZA(),e.YNc(10,si,1,1,"ng-template",null,6,e.W1O),e.qZA(),e.qZA()),2&a){var o=e.MAs(11);e.xp6(4),e.hij(" ",e.lcZ(5,7,"getFromHr")," "),e.xp6(4),e.Q6J("ngIf",n.isLoaded)("ngIfElse",o),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(9,ui))("length",n.itemsCounts)("pageSize",10)("disabled",!n.isLoaded)}},directives:[k.a8,k.n5,u.T,k.dn,f.O5,Oe.NW,M.BZ,qe.YE,M.w1,M.fO,M.Dz,M.as,M.nj,M.Ee,M.ge,M.ev,qe.nU,f.sg,A.gM,M.XQ,M.Gk,Zt.I],pipes:[K.X$,f.uU],styles:[".mat-card-subtitle[_ngcontent-%COMP%]{display:block;width:100%}"]}),i}(),dn=h(4920),cn=h(714),ln=function(){var i=function(){function s(a){(0,j.Z)(this,s),this.router=a,this.hideDefaultTitle=!1,this.onClick=new e.vpe}return(0,Y.Z)(s,[{key:"click",value:function(n){var o=this;this.url&&this.router.navigateByUrl("/",{skipLocationChange:!0}).then(function(){o.router.navigate([o.url],{queryParams:o.params})}),this.onClick.emit(n)}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(ne.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["create-new-btn"]],inputs:{url:"url",label:"label",params:"params",class:"class",hideDefaultTitle:"hideDefaultTitle"},outputs:{onClick:"onClick"},decls:8,vars:12,consts:[["id","create-new-btn",3,"click"],[1,"text-btn"],[1,"ft-plus-circle"]],template:function(a,n){1&a&&(e.TgZ(0,"button",0),e.NdJ("click",function(r){return n.click(r)}),e.TgZ(1,"span",1),e._uU(2),e.ALo(3,"titlecase"),e.ALo(4,"translate"),e.ALo(5,"titlecase"),e.ALo(6,"translate"),e.qZA(),e._UZ(7,"i",2),e.qZA()),2&a&&(e.Tol("orange-btn radius-btn "+n.class),e.xp6(2),e.AsE(" ",n.hideDefaultTitle?"":e.lcZ(3,4,e.lcZ(4,6,"General.Create"))," ",e.lcZ(5,8,e.lcZ(6,10,n.label))," "))},pipes:[f.rS,K.X$],styles:["#create-new-btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:10px;padding:16px 40px;border-radius:20px;background-color:#e86820;font-family:Roboto-Regular,sans-serif}#create-new-btn[_ngcontent-%COMP%]   .text-btn[_ngcontent-%COMP%]{font-family:Roboto-Regular,sans-serif;font-size:14.5px;line-height:normal;letter-spacing:normal}#create-new-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:15px;display:inline-block;margin-top:1px}"]}),i}(),Kt=h(3852);function ci(i,s){if(1&i&&(e.TgZ(0,"div",11),e.TgZ(1,"mat-card",14),e._UZ(2,"img",15),e.TgZ(3,"p",16),e._uU(4),e.qZA(),e.qZA(),e.qZA()),2&i){var a=s.$implicit,n=e.oxw(3);e.xp6(2),e.MGl("alt","",a.name," /icon"),e.Q6J("src",n.fileService.previewPicture(a.attach_path),e.LSH),e.xp6(2),e.Oqu(a.name)}}var Jn=function(s){return{functionId:s}};function mi(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",9),e.YNc(2,ci,5,3,"div",10),e.TgZ(3,"div",11),e.TgZ(4,"button",12),e._UZ(5,"i",13),e.TgZ(6,"p"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()),2&i){var a=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",a.categories),e.xp6(2),e.Q6J("queryParams",e.VKq(5,Jn,a.functionId)),e.xp6(3),e.Oqu(e.lcZ(8,3,"addNew"))}}function pi(i,s){if(1&i&&(e.ynx(0),e.YNc(1,mi,9,7,"ng-container",6),e.BQk()),2&i){var a=e.oxw(),n=e.MAs(15);e.xp6(1),e.Q6J("ngIf",(null==a.categories?null:a.categories.length)>0)("ngIfElse",n)}}function gi(i,s){1&i&&(e.TgZ(0,"div",18),e._UZ(1,"app-card-skeleton",19),e.qZA()),2&i&&(e.xp6(1),e.Q6J("height",200))}var hi=function(){return[]};function _i(i,s){1&i&&(e.TgZ(0,"div",9),e.YNc(1,gi,2,1,"div",17),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngForOf",e.DdM(1,hi).constructor(5)))}function fi(i,s){1&i&&(e.TgZ(0,"span",20),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"General.emptycategories")," "))}var On=function(){var i=function(){function s(a,n,o,r,g,v,x){var w=this;(0,j.Z)(this,s),this.translate=a,this.spinner=n,this.authService=o,this.fileService=r,this.categorieservice=g,this.route=v,this.messagesService=x,this.isLoaded=!1,this.translate.onLangChange.subscribe(function(q){w.curLang=q.lang}),v.queryParamMap.subscribe(function(q){w.functionId=Number(q.get("functionId"))})}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){this.EduCompId=Number(this.authService.getEduCompId()),this.authService.isAdmin()&&this.geAll()}},{key:"ngAfterViewInit",value:function(){var n=this;this.authService.EduCompId.subscribe(function(o){n.EduCompId=o.EduCompId,n.geAll()})}},{key:"geAll",value:function(){var n=this;this.categorieservice.getCategories().subscribe(function(o){n.categories=o.MainCategories,n.isLoaded=!0})}},{key:"getDataFromHR",value:function(){var n=this;this.spinner.show(),this.categorieservice.getDataFromHR(this.EduCompId).subscribe(function(o){n.spinner.hide(),o.returnValue==dn.N.success&&(n.geAll(),n.messagesService.success("copyHrSuccess"))})}},{key:"sendDataToHR",value:function(){var n=this;this.spinner.show(),this.categorieservice.sendDataToHR(this.EduCompId).subscribe(function(o){n.spinner.hide(),o.returnValue==dn.N.success&&n.messagesService.success("sendHrSuccess")})}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(K.sK),e.Y36(Q.t2),e.Y36(Te.e),e.Y36(ae.f),e.Y36(cn.G),e.Y36(ne.gz),e.Y36(F.K))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-categorie"]],decls:16,vars:11,consts:[[1,"admin-index-card"],["title","categories.categories"],["label","categories.category","url","/dashboard/setup/add-category",1,"float-right","float-right","d-inline-block","mx-1","mb-2","mt--5",3,"params"],[1,"orange-btn","radius-btn","send-to-hr","integration-btn","float-right","d-inline-block","mx-1","mb-2",3,"click"],[1,"orange-btn","radius-btn","get-from-hr","integration-btn","float-right","d-inline-block","mx-1","mb-2",3,"click"],[2,"max-height","94%"],[4,"ngIf","ngIfElse"],["loading",""],["empty",""],[1,"row"],["class","col-6 col-md-4 col-lg-3 col-xl-2",4,"ngFor","ngForOf"],[1,"col-6","col-md-4","col-lg-3","col-xl-2"],["routerLink","/dashboard/setup/add-category",1,"dashed-btn",3,"queryParams"],[1,"ft-plus-circle"],[1,"cat-box"],[1,"cat-img",3,"src","alt"],[1,"cat-name","roboto-medium"],["class","col-xl-5 col-lg-3 col-md-4 col-sm-6 col-12",4,"ngFor","ngForOf"],[1,"col-xl-5","col-lg-3","col-md-4","col-sm-6","col-12"],[3,"height"],[1,"alert","bg-light-warning"]],template:function(a,n){if(1&a&&(e.TgZ(0,"mat-card",0),e.TgZ(1,"mat-card-title"),e._UZ(2,"page-title",1),e._UZ(3,"create-new-btn",2),e.TgZ(4,"button",3),e.NdJ("click",function(){return n.sendDataToHR()}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"button",4),e.NdJ("click",function(){return n.getDataFromHR()}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.qZA(),e.TgZ(10,"mat-card-content",5),e.YNc(11,pi,2,2,"ng-container",6),e.YNc(12,_i,2,2,"ng-template",null,7,e.W1O),e.YNc(14,fi,3,3,"ng-template",null,8,e.W1O),e.qZA(),e.qZA()),2&a){var o=e.MAs(13);e.xp6(3),e.Q6J("params",e.VKq(9,Jn,n.functionId)),e.xp6(2),e.hij(" ",e.lcZ(6,5,"sendToHr")," "),e.xp6(3),e.hij(" ",e.lcZ(9,7,"getFromHr")," "),e.xp6(3),e.Q6J("ngIf",n.isLoaded)("ngIfElse",o)}},directives:[k.a8,k.n5,u.T,ln,k.dn,f.O5,f.sg,ne.rH,Kt.Y],pipes:[K.X$],styles:[".mat-card-title[_ngcontent-%COMP%]{color:#193141;font-size:32px}.cat-box[_ngcontent-%COMP%]{width:100%;padding:22px;border-radius:10px;box-shadow:0 1.9px 11.9px #305d7c33;background-color:#e2eaf033;display:flex;flex-direction:column;flex-wrap:nowrap;align-content:center;justify-content:center;align-items:center;margin-bottom:30px}.cat-img[_ngcontent-%COMP%]{width:100px;height:100px;margin-bottom:15px}.cat-name[_ngcontent-%COMP%]{width:100%;height:65px;overflow-y:clip;overflow-x:clip;font-size:15px;text-align:center;color:#193141;letter-spacing:.36px;margin-bottom:0}"]}),i}(),Et=h(2290),mn=h(136),pn=h(7777),Ht=h(8521),gn=h(520),wn=function(){var i=function(s){(0,mn.Z)(n,s);var a=(0,pn.Z)(n);function n(o){var r;return(0,j.Z)(this,n),(r=a.call(this,o)).http=o,r}return(0,Y.Z)(n,[{key:"CashPaymentSearch",value:function(r,g){return this.post("CashPayment/returnUserDataByPhoneNumber/".concat(g),r)}},{key:"CashPaymentPost",value:function(r,g){return this.post("CashPayment/CashPaymentPost/".concat(r),g)}},{key:"GetItemsByLesson",value:function(r,g,v,x){return this.get("".concat("CashPayment/returnItemsByLessonId","/",r,"/").concat(g,"/").concat(v,"/").concat(x))}},{key:"GetItemsByUnit",value:function(r,g,v,x){return this.get("CashPayment/returnItemsByUnitId/".concat(r,"/").concat(g,"/").concat(v,"/").concat(x))}},{key:"GetItemsBySubject",value:function(r,g,v,x){return this.get("CashPayment/returnItemsBySubjectId/".concat(r,"/").concat(g,"/").concat(v,"/").concat(x))}},{key:"GetItemsByLessonWithEnded",value:function(r,g,v,x,w){return this.get("CashPayment/returnItemsByLessonIdSpecialViews/".concat(r,"/").concat(g,"/").concat(v,"/").concat(x,"/").concat(w))}},{key:"geItemPrice",value:function(r,g){return this.get("CashPayment/returnMaterialPriceById/".concat(r,"/").concat(g))}},{key:"getPaymentsHistory",value:function(r,g){return this.get("CashPayment/returnUserPaymentsHistoryTable/".concat(r,"/").concat(g))}},{key:"ManualPaymentByExcel",value:function(r,g){return this.post("CashPayment/postManualPaymentByExcel/".concat(r),g)}}]),n}(Ht.K);return i.\u0275fac=function(a){return new(a||i)(e.LFG(gn.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i}(),Wt=h(5086),Sn=h(6471),Tt=h(7531),Yt=h(9814),xt=h(4107),pt=h(508),sn=h(9966),hn=h(226),vi=h(3865),Zi=h(5318);function Ci(i,s){1&i&&(e.ynx(0),e.TgZ(1,"div",15),e.TgZ(2,"label",20),e._uU(3,"\u0627\u0644\u0625\u0633\u0645 \u0628\u0627\u0644\u0643\u0627\u0645\u0644"),e.qZA(),e._UZ(4,"input",21),e.qZA(),e.TgZ(5,"div",15),e.TgZ(6,"label",22),e._uU(7,"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u0649"),e.qZA(),e._UZ(8,"input",23),e.qZA(),e.TgZ(9,"div",15),e.TgZ(10,"label",24),e._uU(11,"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u062d\u0627\u0644\u064a"),e.qZA(),e._UZ(12,"input",25),e.qZA(),e.TgZ(13,"div",15),e.TgZ(14,"label",26),e._uU(15,"\u0631\u0642\u0645 \u0627\u0644\u0645\u0648\u0628\u0627\u064a\u0644"),e.qZA(),e._UZ(16,"input",27),e.qZA(),e.BQk())}function bi(i,s){1&i&&(e.ynx(0),e.TgZ(1,"div",15),e.TgZ(2,"mat-radio-button",16),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA(),e.TgZ(5,"div",15),e.TgZ(6,"mat-radio-button",16),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.TgZ(9,"div",15),e.TgZ(10,"mat-radio-button",16),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.BQk()),2&i&&(e.xp6(2),e.Q6J("value",5),e.xp6(1),e.hij(" ",e.lcZ(4,6,"labels.Exam")," "),e.xp6(3),e.Q6J("value",11),e.xp6(1),e.hij(" ",e.lcZ(8,8,"labels.Template")," "),e.xp6(3),e.Q6J("value",4),e.xp6(1),e.hij(" ",e.lcZ(12,10,"labels.Balance")," "))}function Ai(i,s){if(1&i&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.Q6J("value",a.teacherUserId),e.xp6(1),e.hij(" ",a.teacher_ar_name," ")}}function Ti(i,s){if(1&i&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function xi(i,s){if(1&i&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function Ii(i,s){if(1&i&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function yi(i,s){if(1&i&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function qi(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function Fi(i,s){if(1&i&&(e.TgZ(0,"mat-hint",36),e.YNc(1,qi,3,3,"span",17),e.qZA()),2&i){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==a.paymentFormCtrl.itemId.errors?null:a.paymentFormCtrl.itemId.errors.required)}}function wi(i,s){if(1&i){var a=e.EpF();e.ynx(0),e.TgZ(1,"div",15),e.TgZ(2,"mat-form-field",5),e.TgZ(3,"mat-label"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-select",28),e.NdJ("selectionChange",function(){return e.CHM(a),e.oxw().getSubjectByTeacherId()}),e.TgZ(7,"mat-option"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.YNc(10,Ai,2,2,"mat-option",29),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",15),e.TgZ(12,"mat-form-field",5),e.TgZ(13,"mat-label"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"mat-select",30),e.NdJ("selectionChange",function(){e.CHM(a);var r=e.oxw();return r.getUnitsBySubjectId(r.paymentFormCtrl.subjectId.value)}),e.TgZ(17,"mat-option"),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.YNc(20,Ti,2,2,"mat-option",29),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",15),e.TgZ(22,"mat-form-field",5),e.TgZ(23,"mat-label"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"mat-select",31),e.NdJ("selectionChange",function(){e.CHM(a);var r=e.oxw();return r.getLessonsByUnitId(r.paymentFormCtrl.unitId.value)}),e.TgZ(27,"mat-option"),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.YNc(30,xi,2,2,"mat-option",29),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"div",15),e.TgZ(32,"mat-form-field",5),e.TgZ(33,"mat-label"),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"mat-select",32),e.NdJ("selectionChange",function(){e.CHM(a);var r=e.oxw();return r.GetItemsByLesson(r.paymentFormCtrl.lessonId.value)}),e.TgZ(37,"mat-option"),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.YNc(40,Ii,2,2,"mat-option",29),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"div",15),e.TgZ(42,"mat-form-field",5),e.TgZ(43,"mat-label"),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.TgZ(46,"mat-select",33),e.NdJ("selectionChange",function(){return e.CHM(a),e.oxw().geItemPrice()}),e.TgZ(47,"mat-option"),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.YNc(50,yi,2,2,"mat-option",29),e.qZA(),e.YNc(51,Fi,2,1,"mat-hint",34),e.qZA(),e.qZA(),e.TgZ(52,"div",15),e.TgZ(53,"mat-label"),e._uU(54),e.ALo(55,"translate"),e.qZA(),e._UZ(56,"input",35),e.qZA(),e.BQk()}if(2&i){var n=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,17,"labels.Teacher")),e.xp6(4),e.Oqu(e.lcZ(9,19,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",n.Teachers),e.xp6(4),e.Oqu(e.lcZ(15,21,"labels.Subject")),e.xp6(4),e.Oqu(e.lcZ(19,23,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",n.subjects),e.xp6(4),e.Oqu(e.lcZ(25,25,"labels.Unit")),e.xp6(4),e.Oqu(e.lcZ(29,27,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",n.units),e.xp6(4),e.Oqu(e.lcZ(35,29,"labels.Lesson")),e.xp6(4),e.Oqu(e.lcZ(39,31,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",n.lessons),e.xp6(4),e.Oqu(e.lcZ(45,33,"Material.Lecture")),e.xp6(4),e.Oqu(e.lcZ(49,35,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",n.materials),e.xp6(1),e.Q6J("ngIf",n.paymentFormCtrl.itemId.invalid&&(n.paymentFormCtrl.itemId.touched||n.submitted)),e.xp6(3),e.Oqu(e.lcZ(55,37,"labels.Price"))}}function Si(i,s){if(1&i&&(e.TgZ(0,"mat-option",16),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.Q6J("value",a.teacherUserId),e.xp6(1),e.hij(" ",a.teacher_ar_name," ")}}function Ui(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function ki(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function Ei(i,s){1&i&&e._UZ(0,"span")}function Di(i,s){if(1&i&&(e.TgZ(0,"mat-hint",36),e.YNc(1,Ui,3,3,"span",17),e.YNc(2,ki,3,3,"span",17),e.YNc(3,Ei,1,0,"span",17),e.qZA()),2&i){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==a.paymentFormCtrl.balance.errors?null:a.paymentFormCtrl.balance.errors.required),e.xp6(1),e.Q6J("ngIf",null==a.paymentFormCtrl.balance.errors?null:a.paymentFormCtrl.balance.errors.minusNum),e.xp6(1),e.Q6J("ngIf",a.paymentForm)}}function Ni(i,s){if(1&i){var a=e.EpF();e.ynx(0),e.TgZ(1,"div",15),e.TgZ(2,"mat-form-field",5),e.TgZ(3,"mat-label"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-select",28),e.NdJ("selectionChange",function(){e.CHM(a);var r=e.oxw();return r.getStageByTeacherId(r.paymentFormCtrl.teacherUserId.value)}),e.TgZ(7,"mat-option"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.YNc(10,Si,2,2,"mat-option",29),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",15),e.TgZ(12,"mat-form-field",5),e.TgZ(13,"mat-label"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e._UZ(16,"input",37),e.YNc(17,Di,4,3,"mat-hint",34),e.qZA(),e.qZA(),e.BQk()}if(2&i){var n=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,5,"labels.Teacher")),e.xp6(4),e.Oqu(e.lcZ(9,7,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",n.Teachers),e.xp6(4),e.Oqu(e.lcZ(15,9,"Balance.Balance")),e.xp6(3),e.Q6J("ngIf",n.paymentFormCtrl.balance.invalid&&(n.paymentFormCtrl.balance.touched||n.submitted))}}function Mi(i,s){if(1&i){var a=e.EpF();e.ynx(0),e.TgZ(1,"div",4),e.TgZ(2,"label",38),e._uU(3,"Excel Sheet"),e.qZA(),e.TgZ(4,"input",39),e.NdJ("change",function(o){return e.CHM(a),e.oxw().onChange(o)}),e.qZA(),e.qZA(),e.BQk()}}function Qi(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){return e.CHM(a),e.oxw().AddCashPayment()}),e._UZ(1,"i",41),e._uU(2," \u0627\u0634\u062a\u0631\u0627\u0643 "),e.qZA()}}function Ji(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"button",40),e.NdJ("click",function(){return e.CHM(a),e.oxw().ManualPaymentByExcel()}),e._UZ(1,"i",42),e._uU(2," Upload "),e.qZA()}}function Oi(i,s){if(1&i&&(e.TgZ(0,"tr"),e._UZ(1,"td"),e._UZ(2,"td"),e._UZ(3,"td"),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"NewDate"),e.ALo(15,"Time"),e.qZA(),e.qZA()),2&i){var a=s.$implicit;e.xp6(5),e.Oqu(null==a?null:a.centerName),e.xp6(2),e.Oqu(null==a?null:a.teacherName),e.xp6(2),e.Oqu(null==a?null:a.amount),e.xp6(2),e.Oqu(null==a?null:a.payment_method),e.xp6(2),e.AsE("",e.lcZ(14,6,null==a?null:a.Date)," - ",e.lcZ(15,8,null==a?null:a.Date),"")}}function Li(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"div",46),e.TgZ(1,"pagination-controls",47),e.NdJ("pageChange",function(r){e.CHM(a);var g=e.oxw(2);return g.p=r,g.getPaymentsHistory()}),e.qZA(),e.qZA()}if(2&i){var n=e.oxw(2);e.xp6(1),e.Q6J("maxSize",n.maxSize)}}var Pi=function(s,a){return{itemsPerPage:10,currentPage:s,totalItems:a}};function Yi(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"table",43),e.TgZ(2,"thead"),e.TgZ(3,"tr"),e.TgZ(4,"th"),e._uU(5,"\u0627\u0644\u0646\u0648\u0639"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"\u0627\u0644\u0627\u0633\u0645"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"\u0627\u0644\u0645\u0627\u062f\u0629"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"\u0627\u0644\u0633\u0646\u062a\u0631"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"\u0627\u0644\u0645\u062f\u0631\u0633"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"\u0627\u0644\u0642\u064a\u0645\u0647"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"tbody"),e.YNc(21,Oi,16,10,"tr",44),e.ALo(22,"paginate"),e.qZA(),e.qZA(),e.YNc(23,Li,2,1,"div",45),e.BQk()),2&i){var a=e.oxw();e.xp6(21),e.Q6J("ngForOf",e.xi3(22,3,a.userPaymentsHistories,e.WLB(6,Pi,a.p,a.itemsCount)))("ngForTrackBy",a.track),e.xp6(2),e.Q6J("ngIf",a.itemsCount>10)}}var ji=function(){var i=function(){function s(a,n,o,r,g,v,x){(0,j.Z)(this,s),this.authService=a,this.fb=n,this.toastr=o,this.CashPaymentService=r,this.GeneralService=g,this.EducationalService=v,this.spinner=x,this.Errors=[],this.Teachers=[],this.stages=[],this.years=[],this.subjects=[],this.units=[],this.lessons=[],this.lectures=[],this.materials=[],this.userPaymentsHistories=[],this.submitted=!1,this.selectedUserDate="",this.p=1,this.maxSize=9,this.PaymentByExcel=null}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){var n=this;this.EduCompId=this.authService.getEduCompId(),this.branchId=this.authService.getBranchId(),this.getTeachersByEducompId(),this.searchForm=this.fb.group({code:[""],mobile:[""],centerCode:[""],searchedMail:[""],searchedName:[""]}),this.paymentForm=this.fb.group({userId:[null,[T.kI.required]],itemId:[""],itemTypeId:[6],teacherUserId:["",T.kI.required],balance:[""],userMobile:[""],userEmail:[""],userName:[""],currentBalance:[""],uploadedFile:[""],itemPrice:[""],isPaymentExcel:[!1],yearId:[""],subjectId:[""],unitId:[""],lessonId:[""]}),this.paymentForm.valueChanges.subscribe(function(o){n.getFormValidationErrors(n.paymentForm)}),this.paymentFormCtrl.userMobile.disable(),this.paymentFormCtrl.userEmail.disable(),this.paymentFormCtrl.userName.disable(),this.paymentFormCtrl.currentBalance.disable(),this.paymentFormCtrl.itemPrice.disable(),this.isPaymentExcelValidators(),this.itemTypeIdValidators()}},{key:"paymentFormCtrl",get:function(){return this.paymentForm.controls}},{key:"ngAfterViewInit",value:function(){var n=this;this.authService.EduCompId.subscribe(function(o){n.EduCompId=o.EduCompId,n.getTeachersByEducompId()}),this.authService.branchId.subscribe(function(o){n.branchId=o.branchId})}},{key:"CashPaymentSearch",value:function(){var n=this;this.spinner.show(),this.CashPaymentService.CashPaymentSearch(this.searchForm.value,this.EduCompId).subscribe(function(o){var r;console.log("PaymentSearch",o),(null===(r=o.model)||void 0===r?void 0:r.userId)?(n.paymentFormCtrl.userId.setValue(o.model.userId),n.paymentFormCtrl.yearId.setValue(o.model.yearId),n.getPaymentsHistory(),n.paymentFormCtrl.userMobile.setValue(o.model.userMobile),n.paymentFormCtrl.userEmail.setValue(o.model.userEmail),n.paymentFormCtrl.userName.setValue(o.model.userName),n.paymentFormCtrl.currentBalance.setValue(o.model.currentBalance)):0==o.returnValue&&n.toastr.info(o.returnString),n.spinner.hide()})}},{key:"AddCashPayment",value:function(){var n=this;this.itemTypeIdValidators(),this.isPaymentExcelValidators(),this.submitted=!0,this.paymentForm.valid&&(this.spinner.show(),this.CashPaymentService.CashPaymentPost(this.EduCompId,this.paymentForm.value).subscribe(function(r){1==r.returnValue&&"Success"==r.returnString&&(n.toastr.success("\u062a\u0645 \u0627\u0644\u062f\u0641\u0639 "),n.getPaymentsHistory(),n.CashPaymentSearch(),n.submitted=!1),n.spinner.hide()}))}},{key:"ManualPaymentByExcel",value:function(){var n=this;this.spinner.show();var o={itemId:this.paymentFormCtrl.itemId.value,itemTypeId:this.paymentFormCtrl.itemTypeId.value,uploadedFile:this.paymentFormCtrl.uploadedFile.value};console.log("Add",o),this.CashPaymentService.ManualPaymentByExcel(this.EduCompId,o).subscribe(function(r){console.log("ByExcel",r),1==r.returnValue?n.toastr.success("\u062a\u0645 \u0627\u0644\u062f\u0641\u0639 "):console.log("ERROR_UPLOAD_EXCEL",r),n.spinner.hide()})}},{key:"getPaymentsHistory",value:function(){var n=this;this.spinner.show(),this.CashPaymentService.getPaymentsHistory(this.p,this.paymentFormCtrl.userId.value).subscribe(function(o){n.userPaymentsHistories=o.userPayments,n.itemsCount=o.totalCount,n.spinner.hide()})}},{key:"getTeachersByEducompId",value:function(){var n=this;this.spinner.show(),this.GeneralService.getTeachersByEducompId(this.EduCompId).subscribe(function(o){n.Teachers=o.lstTeachers,n.spinner.hide()})}},{key:"getSubjectByTeacherId",value:function(){var n=this;this.lessons=[],this.units=[],this.subjects=[],this.materials=[],this.paymentFormCtrl.yearId.value&&this.GeneralService.getSubjectByTeacherId(this.paymentFormCtrl.teacherUserId.value,this.paymentFormCtrl.yearId.value).subscribe(function(o){n.subjects=o.lsts})}},{key:"getUnitsBySubjectId",value:function(n){var o=this;this.lessons=[],this.units=[],this.materials=[],""!=n&&(this.EducationalService.GetUnits(n).subscribe(function(r){o.units=r}),this.GetItemsBySubject(n))}},{key:"getLessonsByUnitId",value:function(n){var o=this;this.lessons=[],this.materials=[],""!=n&&(this.EducationalService.GetLessons(n).subscribe(function(r){o.lessons=r}),this.GetItemsByUnit(n))}},{key:"GetItemsByLesson",value:function(n){var o=this;this.CashPaymentService.GetItemsByLesson(this.EduCompId,n,this.paymentFormCtrl.itemTypeId.value,this.paymentFormCtrl.teacherUserId.value).subscribe(function(r){o.materials=r})}},{key:"GetItemsByUnit",value:function(n){var o=this;this.CashPaymentService.GetItemsByUnit(this.EduCompId,n,this.paymentFormCtrl.itemTypeId.value,this.paymentFormCtrl.teacherUserId.value).subscribe(function(r){o.materials=r})}},{key:"GetItemsBySubject",value:function(n){var o=this;this.CashPaymentService.GetItemsBySubject(this.EduCompId,n,this.paymentFormCtrl.itemTypeId.value,this.paymentFormCtrl.teacherUserId.value).subscribe(function(r){o.materials=r})}},{key:"geItemPrice",value:function(){var n=this;0==this.paymentFormCtrl.isPaymentExcel.value&&this.paymentFormCtrl.itemId.value&&this.CashPaymentService.geItemPrice(this.paymentFormCtrl.itemId.value,this.paymentFormCtrl.userId.value).subscribe(function(o){1==o.returnValue?n.paymentFormCtrl.itemPrice.setValue(o.price):console.log("gerMaterialPrice",o)})}},{key:"isPaymentExcelValidators",value:function(){var n=this.paymentFormCtrl.isPaymentExcel.value;0==n&&(this.paymentFormCtrl.uploadedFile.setValue(""),this.paymentFormCtrl.uploadedFile.clearValidators()),1==n&&this.paymentFormCtrl.uploadedFile.setValidators([T.kI.required]),this.paymentFormCtrl.itemTypeId.updateValueAndValidity(),this.paymentFormCtrl.uploadedFile.updateValueAndValidity()}},{key:"track",value:function(n,o){return o.userId}},{key:"getFormValidationErrors",value:function(n){var o=this;this.Errors=[],Object.keys(n.controls).forEach(function(g){var v=n.get(g).errors;null!=v&&Object.keys(v).forEach(function(x){o.Errors.push({key:g,error:x})})})}},{key:"itemTypeIdValidators",value:function(){var n=this.paymentFormCtrl.itemTypeId.value;4==n&&(this.paymentFormCtrl.balance.setValidators([T.kI.required,Z.D.minusNum]),this.paymentFormCtrl.itemId.reset(),this.paymentFormCtrl.itemId.clearValidators()),4!=n&&(this.paymentFormCtrl.itemId.setValidators([T.kI.required]),this.paymentFormCtrl.balance.reset(),this.paymentFormCtrl.balance.clearValidators()),this.paymentFormCtrl.itemId.updateValueAndValidity(),this.paymentFormCtrl.balance.updateValueAndValidity()}},{key:"onChange",value:function(n){var o=this,r=n.target.files[0].name,g=n.target.files[0].size,v=n.target.files[0].type,x=n.target.files[0].lastModified,w=n.target.files[0].lastModifiedDate;if(n.target.files){var q=new FileReader;q.readAsDataURL(n.target.files[0]),q.onload=function(N){var R={FileAsBase64:N.target.result.replace("data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,",""),name:r,size:g,type:v,LastModified:x,LastModifiedDate:w};o.PaymentByExcel=R,console.log(R),o.paymentForm.controls.uploadedFile.setValue(R)}}}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(Te.e),e.Y36(T.qu),e.Y36(Et._W),e.Y36(wn),e.Y36(Wt.m),e.Y36(Sn.i),e.Y36(Q.t2))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-manual-cash-payment"]],decls:81,vars:47,consts:[[1,"row"],[1,"col-12"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-4","col-12"],["appearance","legacy"],["matInput","","type","text","formControlName","searchedName"],["matInput","","type","text","formControlName","code"],["matInput","","type","text","formControlName","centerCode"],["matInput","","type","email","formControlName","searchedMail"],["matInput","","type","text","formControlName","mobile"],["align","end"],["mat-raised-button","","type","button",1,"btn","btn-primary",3,"click"],[1,"container-fluid",3,"formGroup"],["formControlName","isPaymentExcel",1,"row"],[1,"col-md-3","col-12"],[3,"value"],[4,"ngIf"],["name","itemTypeId","formControlName","itemTypeId",1,"row"],["id","submitButton","type","button","class","btn btn-primary pull-left font-dro",3,"click",4,"ngIf"],["for","userName"],["id","userName","formControlName","userName","type","text",1,"form-control"],["for","userEmail"],["id","userEmail","formControlName","userEmail","type","email",1,"form-control"],["for","currentBalance"],["id","currentBalance","formControlName","currentBalance","type","text",1,"form-control"],["for","userMobile"],["id","userMobile","formControlName","userMobile","type","text",1,"form-control"],["formControlName","teacherUserId",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","subjectId",3,"selectionChange"],["formControlName","unitId",3,"selectionChange"],["formControlName","lessonId",3,"selectionChange"],["formControlName","itemId",3,"selectionChange"],["class","text-danger",4,"ngIf"],["id","itemPrice","formControlName","itemPrice",1,"form-control"],[1,"text-danger"],["matInput","","type","number","formControlName","balance"],["for","uploadedFile"],["type","file","accept",".xlsx,.xls","name","uploadedFile",1,"form-control",3,"change"],["id","submitButton","type","button",1,"btn","btn-primary","pull-left","font-dro",3,"click"],[1,"fa","fa-plus"],[1,"fa","fa-upload"],[1,"table","table-striped","table-hover","table-full-width","rtl"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","paginator-box",4,"ngIf"],[1,"paginator-box"],["dir","ltr","previousLabel","","nextLabel","",3,"maxSize","pageChange"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-card-content",2),e.TgZ(7,"div",0),e.TgZ(8,"div",1),e.TgZ(9,"form",3),e.TgZ(10,"div",0),e.TgZ(11,"div",4),e.TgZ(12,"mat-form-field",5),e.TgZ(13,"mat-label"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e._UZ(16,"input",6),e.qZA(),e.qZA(),e.TgZ(17,"div",4),e.TgZ(18,"mat-form-field",5),e.TgZ(19,"mat-label"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e._UZ(22,"input",7),e.qZA(),e.qZA(),e.TgZ(23,"div",4),e.TgZ(24,"mat-form-field",5),e.TgZ(25,"mat-label"),e._uU(26),e.ALo(27,"translate"),e.qZA(),e._UZ(28,"input",8),e.qZA(),e.qZA(),e.TgZ(29,"div",4),e.TgZ(30,"mat-form-field",5),e.TgZ(31,"mat-label"),e._uU(32),e.ALo(33,"translate"),e.qZA(),e._UZ(34,"input",9),e.qZA(),e.qZA(),e.TgZ(35,"div",4),e.TgZ(36,"mat-form-field",5),e.TgZ(37,"mat-label"),e._uU(38),e.ALo(39,"translate"),e.qZA(),e._UZ(40,"input",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"mat-card-actions",11),e.TgZ(42,"button",12),e.NdJ("click",function(){return n.CashPaymentSearch()}),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(45,"div",0),e.TgZ(46,"div",1),e.TgZ(47,"mat-card"),e.TgZ(48,"mat-card-title"),e._uU(49),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"mat-card-content"),e.TgZ(52,"div",0),e.TgZ(53,"div",1),e.TgZ(54,"form",13),e.TgZ(55,"div",0),e.TgZ(56,"div",1),e.TgZ(57,"mat-radio-group",14),e.TgZ(58,"div",15),e.TgZ(59,"mat-radio-button",16),e._uU(60),e.ALo(61,"translate"),e.qZA(),e.qZA(),e.TgZ(62,"div",15),e.TgZ(63,"mat-radio-button",16),e._uU(64),e.ALo(65,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(66,Ci,17,0,"ng-container",17),e.TgZ(67,"div",1),e.TgZ(68,"mat-radio-group",18),e.TgZ(69,"div",15),e.TgZ(70,"mat-radio-button",16),e._uU(71),e.ALo(72,"translate"),e.qZA(),e.qZA(),e.YNc(73,bi,13,12,"ng-container",17),e.qZA(),e.qZA(),e.YNc(74,wi,57,39,"ng-container",17),e.YNc(75,Ni,18,11,"ng-container",17),e.YNc(76,Mi,5,0,"ng-container",17),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(77,"mat-card-actions",11),e.YNc(78,Qi,3,0,"button",19),e.YNc(79,Ji,3,0,"button",19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(80,Yi,24,9,"ng-container",17)),2&a&&(e.xp6(4),e.hij(" ",e.lcZ(5,25,"Balance.ManualPayment")," "),e.xp6(5),e.Q6J("formGroup",n.searchForm),e.xp6(5),e.Oqu(e.lcZ(15,27,"labels.Name")),e.xp6(6),e.Oqu(e.lcZ(21,29,"labels.Code")),e.xp6(6),e.Oqu(e.lcZ(27,31,"labels.CenterCode")),e.xp6(6),e.Oqu(e.lcZ(33,33,"labels.Email")),e.xp6(6),e.Oqu(e.lcZ(39,35,"labels.Mobile")),e.xp6(5),e.hij(" ",e.lcZ(44,37,"General.Search")," "),e.xp6(6),e.AsE(" ",e.lcZ(50,39,"Balance.ManualPayment")," - ",null==n.paymentFormCtrl.userName?null:n.paymentFormCtrl.userName.value," "),e.xp6(5),e.Q6J("formGroup",n.paymentForm),e.xp6(5),e.Q6J("value",!1),e.xp6(1),e.hij(" ",e.lcZ(61,41,"labels.Individually")," "),e.xp6(3),e.Q6J("value",!0),e.xp6(1),e.hij(" ",e.lcZ(65,43,"labels.group")," "),e.xp6(2),e.Q6J("ngIf",!n.paymentFormCtrl.isPaymentExcel.value),e.xp6(4),e.Q6J("value",6),e.xp6(1),e.hij(" ",e.lcZ(72,45,"labels.Lecture")," "),e.xp6(2),e.Q6J("ngIf",!n.paymentFormCtrl.isPaymentExcel.value),e.xp6(1),e.Q6J("ngIf",4!=n.paymentFormCtrl.itemTypeId.value),e.xp6(1),e.Q6J("ngIf",4==n.paymentFormCtrl.itemTypeId.value),e.xp6(1),e.Q6J("ngIf",n.paymentFormCtrl.isPaymentExcel.value),e.xp6(2),e.Q6J("ngIf",0==n.paymentFormCtrl.isPaymentExcel.value),e.xp6(1),e.Q6J("ngIf",1==n.paymentFormCtrl.isPaymentExcel.value),e.xp6(1),e.Q6J("ngIf",0!=(null==n.userPaymentsHistories?null:n.userPaymentsHistories.length)))},directives:[k.a8,k.n5,k.dn,T._Y,T.JL,T.sg,H.KE,H.hX,Tt.Nt,T.Fj,T.JJ,T.u,k.hq,Le.lW,Yt.VQ,Yt.U0,f.O5,xt.gD,pt.ey,f.sg,H.bx,T.wV,sn.LS,hn.Lv],pipes:[K.X$,sn._s,vi.H,Zi._],styles:[""]}),i}(),Bi=h(2625);function Ri(i,s){if(1&i&&(e.TgZ(0,"mat-option",14),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.Q6J("value",a.teacherUserId),e.xp6(1),e.hij(" ",a.teacher_ar_name," ")}}function Gi(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1," Must Choose a value "),e.qZA())}function Vi(i,s){if(1&i&&(e.TgZ(0,"mat-hint",15),e.YNc(1,Gi,2,0,"span",16),e.qZA()),2&i){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.FormCtrls.teacherId.errors?null:a.FormCtrls.teacherId.errors.required)}}function Hi(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Wi(i,s){if(1&i&&(e.TgZ(0,"mat-hint",15),e.YNc(1,Hi,3,3,"span",16),e.qZA()),2&i){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==a.FormCtrls.Amount.errors?null:a.FormCtrls.Amount.errors.required)||(null==a.FormCtrls.Amount.errors?null:a.FormCtrls.Amount.errors.bigZero))}}function zi(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function $i(i,s){if(1&i&&(e.TgZ(0,"mat-hint",15),e.YNc(1,zi,3,3,"span",16),e.qZA()),2&i){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==a.FormCtrls.Price.errors?null:a.FormCtrls.Price.errors.required)||(null==a.FormCtrls.Price.errors?null:a.FormCtrls.Price.errors.bigZero))}}var Ki=function(){var i=function(){function s(a,n,o,r,g,v,x){(0,j.Z)(this,s),this.spinner=a,this.fb=n,this.generateCodesService=o,this.authService=r,this.toastr=g,this.GeneralService=v,this.fileService=x,this.submitted=!1}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){this.EduCompId=Number(this.authService.getEduCompId()),this.branchId=Number(this.authService.getEduCompId()),this.getTeachersByEducompId(this.EduCompId),this.myForm=this.fb.group({teacherId:["",T.kI.required],EduCompId:[this.EduCompId,T.kI.required],Amount:["",[T.kI.required,Z.D.bigZero]],Price:["",[T.kI.required,Z.D.bigZero]]})}},{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"ngAfterViewInit",value:function(){var n=this;this.authService.EduCompId.subscribe(function(o){n.EduCompId=o.EduCompId,n.getTeachersByEducompId(o.EduCompId)}),this.authService.branchId.subscribe(function(o){n.branchId=o.branchId})}},{key:"GenerateBalanceCodes",value:function(){var n=this;this.submitted=!0,this.FormCtrls.EduCompId.setValue(this.EduCompId);var o={Amount:this.FormCtrls.Amount.value,Price:this.FormCtrls.Price.value,teacherId:this.FormCtrls.teacherId.value,EduCompId:this.EduCompId};this.myForm.valid&&(this.spinner.show(),this.generateCodesService.GenerateBalanceCodes(o).subscribe(function(r){n.submitted=!1,1==r.returnValue?(n.fileService.downloadFile(r.path),n.myForm.reset()):n.toastr.error(r.returnString,"Codes Not Generated !"),n.spinner.hide()}))}},{key:"getTeachersByEducompId",value:function(n){var o=this;n&&this.GeneralService.getTeachersByEducompId(n).subscribe(function(r){o.Teachers=r.lstTeachers})}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(Q.t2),e.Y36(T.qu),e.Y36(Bi.K),e.Y36(Te.e),e.Y36(Et._W),e.Y36(Wt.m),e.Y36(ae.f))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-generate-balance-codes"]],decls:38,vars:23,consts:[[1,"row"],[1,"col-12"],[1,"example-card"],[1,"container-fluid",3,"formGroup"],[1,"row","f-w"],[1,"col-md-4","col-12"],["appearance","legacy"],["formControlName","teacherId"],[3,"value",4,"ngFor","ngForOf"],["class","danger",4,"ngIf"],["matInput","","type","number","formControlName","Amount"],["matInput","","type","number","formControlName","Price"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],[3,"value"],[1,"danger"],[4,"ngIf"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card",2),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-card-content"),e.TgZ(7,"form",3),e.TgZ(8,"div",4),e.TgZ(9,"div",5),e.TgZ(10,"mat-form-field",6),e.TgZ(11,"mat-label"),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"mat-select",7),e.TgZ(15,"mat-option"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.YNc(18,Ri,2,2,"mat-option",8),e.qZA(),e.YNc(19,Vi,2,1,"mat-hint",9),e.qZA(),e.qZA(),e.TgZ(20,"div",5),e.TgZ(21,"mat-form-field",6),e.TgZ(22,"mat-label"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e._UZ(25,"input",10),e.YNc(26,Wi,2,1,"mat-hint",9),e.qZA(),e.qZA(),e.TgZ(27,"div",5),e.TgZ(28,"mat-form-field",6),e.TgZ(29,"mat-label"),e._uU(30),e.ALo(31,"translate"),e.qZA(),e._UZ(32,"input",11),e.YNc(33,$i,2,1,"mat-hint",9),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"mat-card-actions",12),e.TgZ(35,"button",13),e.NdJ("click",function(){return n.GenerateBalanceCodes()}),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(4),e.hij("",e.lcZ(5,11,"Navbar.GenerateBalanceCodes")," "),e.xp6(3),e.Q6J("formGroup",n.myForm),e.xp6(5),e.Oqu(e.lcZ(13,13,"labels.Teacher")),e.xp6(4),e.Oqu(e.lcZ(17,15,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",n.Teachers),e.xp6(1),e.Q6J("ngIf",n.FormCtrls.teacherId.invalid&&(n.FormCtrls.teacherId.touched||n.submitted)),e.xp6(4),e.hij(" ",e.lcZ(24,17,"labels.CodesCount"),""),e.xp6(3),e.Q6J("ngIf",n.FormCtrls.Amount.invalid&&(n.FormCtrls.Amount.touched||n.submitted)),e.xp6(4),e.hij(" ",e.lcZ(31,19,"labels.CodePrice"),""),e.xp6(3),e.Q6J("ngIf",n.FormCtrls.Price.invalid&&(n.FormCtrls.Price.touched||n.submitted)),e.xp6(3),e.hij(" ",e.lcZ(37,21,"General.Generate")," "))},directives:[k.a8,k.n5,k.dn,T._Y,T.JL,T.sg,H.KE,H.hX,xt.gD,T.JJ,T.u,pt.ey,f.sg,f.O5,Tt.Nt,T.wV,T.Fj,k.hq,Le.lW,H.bx],pipes:[K.X$],styles:[""]}),i}(),Un=h(6489);function Xi(i,s){1&i&&(e.TgZ(0,"div",1),e.TgZ(1,"mat-radio-group",32),e.TgZ(2,"div",12),e.TgZ(3,"mat-radio-button",13),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA(),e.TgZ(6,"div",12),e.TgZ(7,"mat-radio-button",13),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(3),e.Q6J("value",!0),e.xp6(1),e.hij(" ",e.lcZ(5,4,"labels.DeleteTemplate")," "),e.xp6(3),e.Q6J("value",!1),e.xp6(1),e.hij(" ",e.lcZ(9,6,"labels.DeleteStudentAnswers")," "))}function ea(i,s){if(1&i&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.Q6J("value",a.teacherUserId),e.xp6(1),e.hij(" ",a.teacher_ar_name," ")}}function ta(i,s){if(1&i&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function na(i,s){if(1&i&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function ia(i,s){if(1&i&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function aa(i,s){if(1&i&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function oa(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function ra(i,s){if(1&i&&(e.TgZ(0,"mat-hint",33),e.YNc(1,oa,3,3,"span",34),e.qZA()),2&i){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==a.resetFormCtrl.itemId.errors?null:a.resetFormCtrl.itemId.errors.required)}}function la(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function sa(i,s){if(1&i&&(e.TgZ(0,"mat-hint",33),e.YNc(1,la,3,3,"span",34),e.qZA()),2&i){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==a.resetFormCtrl.paymentMethod.errors?null:a.resetFormCtrl.paymentMethod.errors.required)}}function ua(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function da(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function ca(i,s){if(1&i&&(e.TgZ(0,"mat-hint",33),e.YNc(1,ua,3,3,"span",34),e.YNc(2,da,3,3,"span",34),e.qZA()),2&i){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==a.resetFormCtrl.extraViews.errors?null:a.resetFormCtrl.extraViews.errors.required),e.xp6(1),e.Q6J("ngIf",null==a.resetFormCtrl.extraViews.errors?null:a.resetFormCtrl.extraViews.errors.bigZero)}}function ma(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function pa(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function ga(i,s){if(1&i&&(e.TgZ(0,"mat-hint",33),e.YNc(1,ma,3,3,"span",34),e.YNc(2,pa,3,3,"span",34),e.qZA()),2&i){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==a.resetFormCtrl.paidAmount.errors?null:a.resetFormCtrl.paidAmount.errors.required),e.xp6(1),e.Q6J("ngIf",null==a.resetFormCtrl.paidAmount.errors?null:a.resetFormCtrl.paidAmount.errors.minusNum)}}function ha(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-card-content"),e.TgZ(7,"form",2),e.TgZ(8,"div",3),e.TgZ(9,"div",1),e.TgZ(10,"mat-radio-group",17),e.TgZ(11,"div",12),e.TgZ(12,"mat-radio-button",13),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.qZA(),e.TgZ(15,"div",12),e.TgZ(16,"mat-radio-button",13),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.qZA(),e.TgZ(19,"div",12),e.TgZ(20,"mat-radio-button",13),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",4),e.TgZ(24,"mat-form-field",5),e.TgZ(25,"mat-label"),e._uU(26),e.ALo(27,"translate"),e.qZA(),e._UZ(28,"input",18),e.qZA(),e.qZA(),e.TgZ(29,"div",4),e.TgZ(30,"mat-form-field",5),e.TgZ(31,"mat-label"),e._uU(32),e.ALo(33,"translate"),e.qZA(),e._UZ(34,"input",18),e.qZA(),e.qZA(),e.YNc(35,Xi,10,8,"div",19),e.TgZ(36,"div",12),e.TgZ(37,"mat-form-field",5),e.TgZ(38,"mat-label"),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"mat-select",20),e.NdJ("selectionChange",function(){return e.CHM(a),e.oxw().getSubjectByTeacherId()}),e.TgZ(42,"mat-option"),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.YNc(45,ea,2,2,"mat-option",21),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"div",12),e.TgZ(47,"mat-form-field",5),e.TgZ(48,"mat-label"),e._uU(49),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"mat-select",22),e.NdJ("selectionChange",function(){e.CHM(a);var r=e.oxw();return r.getUnitsBySubjectId(r.resetFormCtrl.subjectId.value)}),e.TgZ(52,"mat-option"),e._uU(53),e.ALo(54,"translate"),e.qZA(),e.YNc(55,ta,2,2,"mat-option",21),e.qZA(),e.qZA(),e.qZA(),e.TgZ(56,"div",12),e.TgZ(57,"mat-form-field",5),e.TgZ(58,"mat-label"),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.TgZ(61,"mat-select",23),e.NdJ("selectionChange",function(){e.CHM(a);var r=e.oxw();return r.getLessonsByUnitId(r.resetFormCtrl.unitId.value)}),e.TgZ(62,"mat-option"),e._uU(63),e.ALo(64,"translate"),e.qZA(),e.YNc(65,na,2,2,"mat-option",21),e.qZA(),e.qZA(),e.qZA(),e.TgZ(66,"div",12),e.TgZ(67,"mat-form-field",5),e.TgZ(68,"mat-label"),e._uU(69),e.ALo(70,"translate"),e.qZA(),e.TgZ(71,"mat-select",24),e.NdJ("selectionChange",function(){e.CHM(a);var r=e.oxw();return r.GetItemsByLesson(r.resetFormCtrl.lessonId.value,r.resetFormCtrl.teacherUserId.value)}),e.TgZ(72,"mat-option"),e._uU(73),e.ALo(74,"translate"),e.qZA(),e.YNc(75,ia,2,2,"mat-option",21),e.qZA(),e.qZA(),e.qZA(),e.TgZ(76,"div",12),e.TgZ(77,"mat-form-field",5),e.TgZ(78,"mat-label"),e._uU(79),e.ALo(80,"translate"),e.qZA(),e.TgZ(81,"mat-select",25),e.TgZ(82,"mat-option"),e._uU(83),e.ALo(84,"translate"),e.qZA(),e.YNc(85,aa,2,2,"mat-option",21),e.qZA(),e.YNc(86,ra,2,1,"mat-hint",26),e.qZA(),e.qZA(),e.TgZ(87,"div",12),e.TgZ(88,"mat-form-field",5),e.TgZ(89,"mat-label"),e._uU(90),e.ALo(91,"translate"),e.qZA(),e.TgZ(92,"mat-select",27),e.TgZ(93,"mat-option"),e._uU(94),e.ALo(95,"translate"),e.qZA(),e.TgZ(96,"mat-option",13),e._uU(97),e.ALo(98,"translate"),e.qZA(),e.TgZ(99,"mat-option",13),e._uU(100),e.ALo(101,"translate"),e.qZA(),e.qZA(),e.YNc(102,sa,2,1,"mat-hint",26),e.qZA(),e.qZA(),e.TgZ(103,"div",4),e.TgZ(104,"mat-form-field",5),e.TgZ(105,"mat-label"),e._uU(106),e.ALo(107,"translate"),e.qZA(),e._UZ(108,"input",28),e.YNc(109,ca,3,2,"mat-hint",26),e.qZA(),e.qZA(),e.TgZ(110,"div",4),e.TgZ(111,"mat-form-field",5),e.TgZ(112,"mat-label"),e._uU(113),e.ALo(114,"translate"),e.qZA(),e._UZ(115,"input",29),e.YNc(116,ga,3,2,"mat-hint",26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(117,"mat-card-actions",14),e.TgZ(118,"button",30),e.NdJ("click",function(){return e.CHM(a),e.oxw().resetViews()}),e._UZ(119,"i",31),e._uU(120),e.ALo(121,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){var n=e.oxw();e.xp6(4),e.AsE(" ",e.lcZ(5,42,"labels.Student")," - ",n.username," "),e.xp6(3),e.Q6J("formGroup",n.resetForm),e.xp6(5),e.Q6J("value",6),e.xp6(1),e.hij(" ",e.lcZ(14,44,"Material.Lecture")," "),e.xp6(3),e.Q6J("value",5),e.xp6(1),e.hij(" ",e.lcZ(18,46,"labels.Exam")," "),e.xp6(3),e.Q6J("value",11),e.xp6(1),e.hij(" ",e.lcZ(22,48,"labels.Template")," "),e.xp6(5),e.Oqu(e.lcZ(27,50,"labels.Name")),e.xp6(2),e.Q6J("value",n.username),e.xp6(4),e.Oqu(e.lcZ(33,52,"labels.Email")),e.xp6(2),e.Q6J("value",n.email),e.xp6(1),e.Q6J("ngIf",11==n.resetFormCtrl.itemTypeId.value),e.xp6(4),e.Oqu(e.lcZ(40,54,"labels.Teacher")),e.xp6(4),e.Oqu(e.lcZ(44,56,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",n.Teachers),e.xp6(4),e.Oqu(e.lcZ(50,58,"labels.Subject")),e.xp6(4),e.Oqu(e.lcZ(54,60,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",n.subjects),e.xp6(4),e.Oqu(e.lcZ(60,62,"labels.Unit")),e.xp6(4),e.Oqu(e.lcZ(64,64,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",n.units),e.xp6(4),e.Oqu(e.lcZ(70,66,"labels.Lesson")),e.xp6(4),e.Oqu(e.lcZ(74,68,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",n.lessons),e.xp6(4),e.Oqu(e.lcZ(80,70,"Material.Lecture")),e.xp6(4),e.Oqu(e.lcZ(84,72,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",n.materials),e.xp6(1),e.Q6J("ngIf",n.resetFormCtrl.itemId.invalid&&(n.resetFormCtrl.itemId.touched||n.submitted)),e.xp6(4),e.Oqu(e.lcZ(91,74,"Balance.PaymentMethod")),e.xp6(4),e.Oqu(e.lcZ(95,76,"General.Choose")),e.xp6(2),e.Q6J("value",1),e.xp6(1),e.hij(" ",e.lcZ(98,78,"Balance.Balance"),""),e.xp6(2),e.Q6J("value",2),e.xp6(1),e.hij(" ",e.lcZ(101,80,"Balance.ManualPayment"),""),e.xp6(2),e.Q6J("ngIf",n.resetFormCtrl.paymentMethod.invalid&&(n.resetFormCtrl.paymentMethod.touched||n.submitted)),e.xp6(4),e.Oqu(e.lcZ(107,82,"labels.NumberViews")),e.xp6(3),e.Q6J("ngIf",n.resetFormCtrl.extraViews.invalid&&(n.resetFormCtrl.extraViews.touched||n.submitted)),e.xp6(4),e.Oqu(e.lcZ(114,84,"labels.Amount")),e.xp6(3),e.Q6J("ngIf",n.resetFormCtrl.paidAmount.invalid&&(n.resetFormCtrl.paidAmount.touched||n.submitted)),e.xp6(4),e.hij(" ",e.lcZ(121,86,"General.Add")," ")}}var _a=function(){var i=function(){function s(a,n,o,r,g,v,x,w){(0,j.Z)(this,s),this.authService=a,this.fb=n,this.spinner=o,this.ManageViewsService=r,this.toastr=g,this.GeneralService=v,this.EducationalService=x,this.CashPaymentService=w,this.Teachers=[],this.stages=[],this.years=[],this.subjects=[],this.units=[],this.lessons=[],this.lectures=[],this.materials=[],this.submitted=!1,this.email="",this.username=""}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){this.EduCompId=Number(this.authService.getEduCompId()),this.branchId=Number(this.authService.getEduCompId()),this.getTeachersByEducompId(),this.searchForm=this.fb.group({sentCode:[""],sentCenterCode:[""],sentMobile:[""],sentEmail:[""],InCenter:[!0]}),this.resetForm=this.fb.group({userId:[null,[T.kI.required]],itemId:["",[T.kI.required]],itemTypeId:[6],paymentMethod:["",[T.kI.required]],extraViews:["",[T.kI.required,Z.D.bigZero]],paidAmount:["",[T.kI.required,Z.D.minusNum]],resetTemplate:[!1],teacherUserId:[""],yearId:[""],subjectId:[""],unitId:[""],lessonId:[""]})}},{key:"resetFormCtrl",get:function(){return this.resetForm.controls}},{key:"ngAfterViewInit",value:function(){var n=this;this.authService.EduCompId.subscribe(function(o){n.EduCompId=o.EduCompId,n.getTeachersByEducompId()}),this.authService.branchId.subscribe(function(o){n.branchId=o.branchId})}},{key:"searchStudent",value:function(){var n=this;this.spinner.show(),this.ManageViewsService.searchStudent(this.EduCompId,this.searchForm.value).subscribe(function(o){1==o.returnValue?(n.email=o.email,n.username=o.username,n.resetFormCtrl.userId.setValue(o.userId),n.resetFormCtrl.yearId.setValue(o.yearId)):n.toastr.error(o.returnString),n.spinner.hide()})}},{key:"resetViews",value:function(){var n=this;this.submitted=!0,this.resetFormCtrl.userId.value?this.resetForm.valid&&(this.spinner.show(),this.ManageViewsService.resetViews(this.EduCompId,this.resetForm.value).subscribe(function(o){var r;1==o.returnValue?(n.resetForm.reset(),n.searchForm.reset(),null===(r=n.resetFormCtrl)||void 0===r||r.itemTypeId.setValue(6),n.toastr.success("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0634\u0627\u0647\u062f\u0627\u062a")):n.toastr.error(o.returnString),n.spinner.hide()})):this.toastr.warning("Must Choose Student")}},{key:"getTeachersByEducompId",value:function(){var n=this;this.spinner.show(),this.GeneralService.getTeachersByEducompId(this.EduCompId).subscribe(function(o){n.Teachers=o.lstTeachers,n.spinner.hide()})}},{key:"getSubjectByTeacherId",value:function(){var n=this;this.lessons=[],this.units=[],this.subjects=[],this.materials=[],this.resetFormCtrl.yearId.value&&this.GeneralService.getSubjectByTeacherId(this.resetFormCtrl.teacherUserId.value,this.resetFormCtrl.yearId.value).subscribe(function(o){n.subjects=o.lsts})}},{key:"getUnitsBySubjectId",value:function(n){var o=this;this.lessons=[],this.units=[],this.materials=[],this.resetFormCtrl.subjectId.value&&(this.EducationalService.GetUnits(n).subscribe(function(r){o.units=r}),this.GetItemsBySubject(n))}},{key:"getLessonsByUnitId",value:function(n){var o=this;this.lessons=[],this.materials=[],this.resetFormCtrl.unitId.value&&(this.EducationalService.GetLessons(n).subscribe(function(r){o.lessons=r}),this.GetItemsByUnit(n))}},{key:"GetItemsByLesson",value:function(n,o){var g,v,r=this;(null===(g=this.resetFormCtrl)||void 0===g?void 0:g.itemTypeId.value)?n&&this.CashPaymentService.GetItemsByLesson(this.EduCompId,n,null===(v=this.resetFormCtrl)||void 0===v?void 0:v.itemTypeId.value,o).subscribe(function(x){r.materials=x}):this.toastr.warning("\u064a\u062c\u0628 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0646\u0648\u0639")}},{key:"GetItemsByUnit",value:function(n){var o=this;this.CashPaymentService.GetItemsByUnit(this.EduCompId,n,this.resetFormCtrl.itemTypeId.value,this.resetFormCtrl.teacherUserId.value).subscribe(function(r){o.materials=r})}},{key:"GetItemsBySubject",value:function(n){var o=this;this.CashPaymentService.GetItemsBySubject(this.EduCompId,n,this.resetFormCtrl.itemTypeId.value,this.resetFormCtrl.teacherUserId.value).subscribe(function(r){o.materials=r})}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(Te.e),e.Y36(T.qu),e.Y36(Q.t2),e.Y36(Un.N),e.Y36(Et._W),e.Y36(Wt.m),e.Y36(Sn.i),e.Y36(wn))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-manage-views"]],decls:48,vars:28,consts:[[1,"row"],[1,"col-12"],[1,"container-fluid",3,"formGroup"],[1,"row","f-w"],[1,"col-md-6","col-12"],["appearance","legacy"],["matInput","","type","text","formControlName","sentCenterCode"],["matInput","","type","email","formControlName","sentEmail"],["matInput","","type","text","formControlName","sentMobile"],["matInput","","type","text","formControlName","sentCode"],[1,"col-md-8","col-6"],["formControlName","InCenter",1,"row"],[1,"col-md-3","col-12"],[3,"value"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],["class","row",4,"ngIf"],["formControlName","itemTypeId",1,"row"],["matInput","","type","text","redonly","",3,"value"],["class","col-12",4,"ngIf"],["formControlName","teacherUserId",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","subjectId",3,"selectionChange"],["formControlName","unitId",3,"selectionChange"],["formControlName","lessonId",3,"selectionChange"],["formControlName","itemId"],["class","text-danger",4,"ngIf"],["formControlName","paymentMethod"],["matInput","","type","number","formControlName","extraViews"],["matInput","","type","number","formControlName","paidAmount"],["mat-raised-button","",1,"btn","btn-primary","bg-light-info",3,"click"],[1,"fa","fa-plus"],["formControlName","resetTemplate",1,"row"],[1,"text-danger"],[4,"ngIf"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-card-content"),e.TgZ(7,"form",2),e.TgZ(8,"div",3),e.TgZ(9,"div",4),e.TgZ(10,"mat-form-field",5),e.TgZ(11,"mat-label"),e._uU(12),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"input",6),e.qZA(),e.qZA(),e.TgZ(15,"div",4),e.TgZ(16,"mat-form-field",5),e.TgZ(17,"mat-label"),e._uU(18),e.ALo(19,"translate"),e.qZA(),e._UZ(20,"input",7),e.qZA(),e.qZA(),e.TgZ(21,"div",4),e.TgZ(22,"mat-form-field",5),e.TgZ(23,"mat-label"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e._UZ(26,"input",8),e.qZA(),e.qZA(),e.TgZ(27,"div",4),e.TgZ(28,"mat-form-field",5),e.TgZ(29,"mat-label"),e._uU(30),e.ALo(31,"translate"),e.qZA(),e._UZ(32,"input",9),e.qZA(),e.qZA(),e.TgZ(33,"div",10),e.TgZ(34,"mat-radio-group",11),e.TgZ(35,"div",12),e.TgZ(36,"mat-radio-button",13),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.qZA(),e.TgZ(39,"div",12),e.TgZ(40,"mat-radio-button",13),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(43,"mat-card-actions",14),e.TgZ(44,"button",15),e.NdJ("click",function(){return n.searchStudent()}),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(47,ha,122,88,"div",16)),2&a&&(e.xp6(4),e.hij(" ",e.lcZ(5,12,"Navbar.ManageViews")," "),e.xp6(3),e.Q6J("formGroup",n.searchForm),e.xp6(5),e.Oqu(e.lcZ(13,14,"labels.CenterCode")),e.xp6(6),e.Oqu(e.lcZ(19,16,"labels.Email")),e.xp6(6),e.Oqu(e.lcZ(25,18,"labels.Mobile")),e.xp6(6),e.Oqu(e.lcZ(31,20,"labels.Code")),e.xp6(6),e.Q6J("value",!0),e.xp6(1),e.hij(" ",e.lcZ(38,22,"labels.InCenter")," "),e.xp6(3),e.Q6J("value",!1),e.xp6(1),e.hij(" ",e.lcZ(42,24,"labels.OutCenter")," "),e.xp6(4),e.hij(" ",e.lcZ(46,26,"General.Search")," "),e.xp6(2),e.Q6J("ngIf",n.resetFormCtrl.userId.value))},directives:[k.a8,k.n5,k.dn,T._Y,T.JL,T.sg,H.KE,H.hX,Tt.Nt,T.Fj,T.JJ,T.u,Yt.VQ,Yt.U0,k.hq,Le.lW,f.O5,xt.gD,pt.ey,f.sg,T.wV,H.bx],pipes:[K.X$],styles:[""]}),i}(),Ln=function(){var i=function(s){(0,mn.Z)(n,s);var a=(0,pn.Z)(n);function n(o){var r;return(0,j.Z)(this,n),(r=a.call(this,o)).http=o,r}return(0,Y.Z)(n,[{key:"sendSingularWhatsAppMsg",value:function(r){return this.post("whats-app/send-singular-message",r)}},{key:"sendWhatsAppMsg",value:function(r){return this.post("whats-app/send-message",r)}}]),n}(Ht.K);return i.\u0275fac=function(a){return new(a||i)(e.LFG(gn.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i}();function kn(){kn=function(){return i};var i={},s=Object.prototype,a=s.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",r=n.asyncIterator||"@@asyncIterator",g=n.toStringTag||"@@toStringTag";function v(D,y,P){return Object.defineProperty(D,y,{value:P,enumerable:!0,configurable:!0,writable:!0}),D[y]}try{v({},"")}catch(D){v=function(P,G,z){return P[G]=z}}function x(D,y,P,G){var De,Ue,oe,Ce,X=Object.create((y&&y.prototype instanceof N?y:N).prototype),_e=new tt(G||[]);return X._invoke=(De=D,Ue=P,oe=_e,Ce="suspendedStart",function(Re,ut){if("executing"===Ce)throw new Error("Generator is already running");if("completed"===Ce){if("throw"===Re)throw ut;return{value:void 0,done:!0}}for(oe.method=Re,oe.arg=ut;;){var Dt=oe.delegate;if(Dt){var it=lt(Dt,oe);if(it){if(it===q)continue;return it}}if("next"===oe.method)oe.sent=oe._sent=oe.arg;else if("throw"===oe.method){if("suspendedStart"===Ce)throw Ce="completed",oe.arg;oe.dispatchException(oe.arg)}else"return"===oe.method&&oe.abrupt("return",oe.arg);Ce="executing";var dt=w(De,Ue,oe);if("normal"===dt.type){if(Ce=oe.done?"completed":"suspendedYield",dt.arg===q)continue;return{value:dt.arg,done:oe.done}}"throw"===dt.type&&(Ce="completed",oe.method="throw",oe.arg=dt.arg)}}),X}function w(D,y,P){try{return{type:"normal",arg:D.call(y,P)}}catch(G){return{type:"throw",arg:G}}}i.wrap=x;var q={};function N(){}function L(){}function R(){}var le={};v(le,o,function(){return this});var ke=Object.getPrototypeOf,Ee=ke&&ke(ke(nt([])));Ee&&Ee!==s&&a.call(Ee,o)&&(le=Ee);var ie=R.prototype=N.prototype=Object.create(le);function Be(D){["next","throw","return"].forEach(function(y){v(D,y,function(P){return this._invoke(y,P)})})}function We(D,y){function P(z,X,_e,De){var Ue=w(D[z],D,X);if("throw"!==Ue.type){var oe=Ue.arg,Ce=oe.value;return Ce&&"object"==typeof Ce&&a.call(Ce,"__await")?y.resolve(Ce.__await).then(function(Re){P("next",Re,_e,De)},function(Re){P("throw",Re,_e,De)}):y.resolve(Ce).then(function(Re){oe.value=Re,_e(oe)},function(Re){return P("throw",Re,_e,De)})}De(Ue.arg)}var G;this._invoke=function(z,X){function _e(){return new y(function(De,Ue){P(z,X,De,Ue)})}return G=G?G.then(_e,_e):_e()}}function lt(D,y){var P=D.iterator[y.method];if(void 0===P){if(y.delegate=null,"throw"===y.method){if(D.iterator.return&&(y.method="return",y.arg=void 0,lt(D,y),"throw"===y.method))return q;y.method="throw",y.arg=new TypeError("The iterator does not provide a 'throw' method")}return q}var G=w(P,D.iterator,y.arg);if("throw"===G.type)return y.method="throw",y.arg=G.arg,y.delegate=null,q;var z=G.arg;return z?z.done?(y[D.resultName]=z.value,y.next=D.nextLoc,"return"!==y.method&&(y.method="next",y.arg=void 0),y.delegate=null,q):z:(y.method="throw",y.arg=new TypeError("iterator result is not an object"),y.delegate=null,q)}function gt(D){var y={tryLoc:D[0]};1 in D&&(y.catchLoc=D[1]),2 in D&&(y.finallyLoc=D[2],y.afterLoc=D[3]),this.tryEntries.push(y)}function et(D){var y=D.completion||{};y.type="normal",delete y.arg,D.completion=y}function tt(D){this.tryEntries=[{tryLoc:"root"}],D.forEach(gt,this),this.reset(!0)}function nt(D){if(D){var y=D[o];if(y)return y.call(D);if("function"==typeof D.next)return D;if(!isNaN(D.length)){var P=-1,G=function z(){for(;++P<D.length;)if(a.call(D,P))return z.value=D[P],z.done=!1,z;return z.value=void 0,z.done=!0,z};return G.next=G}}return{next:st}}function st(){return{value:void 0,done:!0}}return L.prototype=R,v(ie,"constructor",R),v(R,"constructor",L),L.displayName=v(R,g,"GeneratorFunction"),i.isGeneratorFunction=function(D){var y="function"==typeof D&&D.constructor;return!!y&&(y===L||"GeneratorFunction"===(y.displayName||y.name))},i.mark=function(D){return Object.setPrototypeOf?Object.setPrototypeOf(D,R):(D.__proto__=R,v(D,g,"GeneratorFunction")),D.prototype=Object.create(ie),D},i.awrap=function(D){return{__await:D}},Be(We.prototype),v(We.prototype,r,function(){return this}),i.AsyncIterator=We,i.async=function(D,y,P,G,z){void 0===z&&(z=Promise);var X=new We(x(D,y,P,G),z);return i.isGeneratorFunction(y)?X:X.next().then(function(_e){return _e.done?_e.value:X.next()})},Be(ie),v(ie,g,"Generator"),v(ie,o,function(){return this}),v(ie,"toString",function(){return"[object Generator]"}),i.keys=function(D){var y=[];for(var P in D)y.push(P);return y.reverse(),function G(){for(;y.length;){var z=y.pop();if(z in D)return G.value=z,G.done=!1,G}return G.done=!0,G}},i.values=nt,tt.prototype={constructor:tt,reset:function(y){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(et),!y)for(var P in this)"t"===P.charAt(0)&&a.call(this,P)&&!isNaN(+P.slice(1))&&(this[P]=void 0)},stop:function(){this.done=!0;var y=this.tryEntries[0].completion;if("throw"===y.type)throw y.arg;return this.rval},dispatchException:function(y){if(this.done)throw y;var P=this;function G(oe,Ce){return _e.type="throw",_e.arg=y,P.next=oe,Ce&&(P.method="next",P.arg=void 0),!!Ce}for(var z=this.tryEntries.length-1;z>=0;--z){var X=this.tryEntries[z],_e=X.completion;if("root"===X.tryLoc)return G("end");if(X.tryLoc<=this.prev){var De=a.call(X,"catchLoc"),Ue=a.call(X,"finallyLoc");if(De&&Ue){if(this.prev<X.catchLoc)return G(X.catchLoc,!0);if(this.prev<X.finallyLoc)return G(X.finallyLoc)}else if(De){if(this.prev<X.catchLoc)return G(X.catchLoc,!0)}else{if(!Ue)throw new Error("try statement without catch or finally");if(this.prev<X.finallyLoc)return G(X.finallyLoc)}}}},abrupt:function(y,P){for(var G=this.tryEntries.length-1;G>=0;--G){var z=this.tryEntries[G];if(z.tryLoc<=this.prev&&a.call(z,"finallyLoc")&&this.prev<z.finallyLoc){var X=z;break}}X&&("break"===y||"continue"===y)&&X.tryLoc<=P&&P<=X.finallyLoc&&(X=null);var _e=X?X.completion:{};return _e.type=y,_e.arg=P,X?(this.method="next",this.next=X.finallyLoc,q):this.complete(_e)},complete:function(y,P){if("throw"===y.type)throw y.arg;return"break"===y.type||"continue"===y.type?this.next=y.arg:"return"===y.type?(this.rval=this.arg=y.arg,this.method="return",this.next="end"):"normal"===y.type&&P&&(this.next=P),q},finish:function(y){for(var P=this.tryEntries.length-1;P>=0;--P){var G=this.tryEntries[P];if(G.finallyLoc===y)return this.complete(G.completion,G.afterLoc),et(G),q}},catch:function(y){for(var P=this.tryEntries.length-1;P>=0;--P){var G=this.tryEntries[P];if(G.tryLoc===y){var z=G.completion;if("throw"===z.type){var X=z.arg;et(G)}return X}}throw new Error("illegal catch attempt")},delegateYield:function(y,P,G){return this.delegate={iterator:nt(y),resultName:P,nextLoc:G},"next"===this.method&&(this.arg=void 0),q}},i}var fa=function(s){return{"row ml-0":s}},va=function(s){return{"col-md-4 col-12":s}},Za=function(s){return{"col-md-8 col-12":s}},Pn=function(){var i=function(){function s(a,n){(0,j.Z)(this,s),this.fileService=a,this.msg=n,this.submitted=!1}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(){this.removeFile&&this.fileService.resetFileById(this.htmlId)}},{key:"uploadFile",value:function(n){return(0,he.mG)(this,void 0,void 0,kn().mark(function o(){var r=this;return kn().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.fileService.uploadFile(n).then(function(x){x.size>10485760?(r.msg.warning("General.largFileError"),r.htmlId&&r.fileService.resetFileById(r.htmlId)):setTimeout(function(){var w;null===(w=r.control)||void 0===w||w.setValue(x)},100)});case 2:case"end":return v.stop()}},o,this)}))}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(ae.f),e.Y36(F.K))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-file-input"]],inputs:{control:"control",submitted:"submitted",accept:"accept",removeFile:"removeFile",htmlId:"htmlId",label:"label"},features:[e.TTD],decls:8,vars:17,consts:[[1,"row"],[1,"col-12",3,"ngClass"],[1,"pt-2","pl-0",3,"ngClass"],["type","file","name","answerFourImage",1,"form-control",3,"id","accept","ngClass","change"],[1,"danger"],[3,"control","submitted","isFile"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-label",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",3),e.NdJ("change",function(r){return n.uploadFile(r)}),e.qZA(),e.TgZ(6,"span",4),e._UZ(7,"input-validation-msg",5),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(1),e.Q6J("ngClass",e.VKq(11,fa,n.label)),e.xp6(1),e.Q6J("ngClass",e.VKq(13,va,n.label)),e.xp6(1),e.hij(" ",e.lcZ(4,9,n.label)," "),e.xp6(2),e.Q6J("id",n.htmlId)("accept",n.accept)("ngClass",e.VKq(15,Za,n.label)),e.xp6(2),e.Q6J("control",n.control)("submitted",n.submitted)("isFile",!0))},directives:[f.mk,H.hX,fe.p],pipes:[K.X$],styles:[""]}),i}();function Ca(i,s){if(1&i&&(e.TgZ(0,"li",14),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.hij(" ",a," ")}}function ba(i,s){if(1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-card-content"),e.TgZ(7,"div",0),e.TgZ(8,"div",11),e.TgZ(9,"ul",12),e.YNc(10,Ca,2,1,"li",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){var a=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,2,"labels.FailureList")," "),e.xp6(6),e.Q6J("ngForOf",a.errors)}}var Aa=function(){var i=function(){function s(a,n,o,r,g,v){(0,j.Z)(this,s),this.fb=a,this.toastr=n,this.whatsAppService=o,this.authService=r,this.spinner=g,this.fileService=v,this.submitted=!1,this.errors=[],this.eduCompId=this.authService.getEduCompId()}return(0,Y.Z)(s,[{key:"msgCtrl",get:function(){return this.myForm.get("msg")}},{key:"fileCtrl",get:function(){return this.myForm.get("file")}},{key:"ngOnInit",value:function(){this.myForm=this.fb.group({msg:["",[T.kI.required,Z.D.whiteSpace]],file:["",T.kI.required]})}},{key:"ngAfterViewInit",value:function(){var n=this;this.authService.EduCompId.subscribe(function(o){n.eduCompId=o.EduCompId})}},{key:"onSubmit",value:function(){var o,r,n=this;if(this.submitted=!0,this.myForm.valid){var g={};g.adminEducationCompanyId=+this.eduCompId,g.msg=null===(o=this.msgCtrl)||void 0===o?void 0:o.value,g.file=null===(r=this.fileCtrl)||void 0===r?void 0:r.value,this.spinner.show(),this.whatsAppService.sendWhatsAppMsg(g).subscribe(function(v){v&&(v.isSendAllSuccess?(n.toastr.success("General.sendToAllSuccess"),n.myForm.reset()):v.isSendAllSuccess||(n.toastr.success("General.sendToSomeSuccess"),n.errors=v.errors),n.myForm.reset(),n.submitted=!1,n.fileService.resetFileById("msg-file")),n.spinner.hide()})}else this.toastr.error("General.FormNotValid")}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(T.qu),e.Y36(F.K),e.Y36(Ln),e.Y36(Te.e),e.Y36(Q.t2),e.Y36(ae.f))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-send-whatsapp-msg"]],decls:32,vars:18,consts:[[1,"row"],[1,"col-12"],[1,"container-fluid",3,"formGroup"],["accept",".xlsx,.xls","htmlId","msg-file",3,"control","submitted"],[1,"col-12","mt-2"],["label","labels.Message","rows","2",3,"control","submitted"],["role","alert",1,"alert","bg-light-warning","mb-2"],[1,"alert-link"],["align","end"],["mat-raised-button","",1,"btn","btn-info","bg-light-info",3,"click"],["class","row",4,"ngIf"],[1,"col-6"],[1,"list-group"],["class","list-group-item disabled",4,"ngFor","ngForOf"],[1,"list-group-item","disabled"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-card-content"),e.TgZ(7,"div",0),e.TgZ(8,"div",1),e.TgZ(9,"form",2),e.TgZ(10,"div",0),e.TgZ(11,"div",1),e.TgZ(12,"mat-label"),e._uU(13),e.ALo(14,"translate"),e.TgZ(15,"strong"),e._uU(16,"codes"),e.qZA(),e._uU(17,"' "),e.qZA(),e._UZ(18,"app-file-input",3),e.qZA(),e.TgZ(19,"div",4),e._UZ(20,"app-textarea",5),e.qZA(),e.TgZ(21,"div",1),e.TgZ(22,"div",6),e._uU(23),e.ALo(24,"translate"),e.TgZ(25,"a",7),e._uU(26," 9999 "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(27,"mat-card-actions",8),e.TgZ(28,"button",9),e.NdJ("click",function(){return n.onSubmit()}),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(31,ba,11,4,"div",10)),2&a&&(e.xp6(4),e.hij(" ",e.lcZ(5,10,"Navbar.SendWhatsappMsg")," "),e.xp6(5),e.Q6J("formGroup",n.myForm),e.xp6(4),e.hij(" ",e.lcZ(14,12,"labels.MustHasColCodes")," '"),e.xp6(5),e.Q6J("control",n.fileCtrl)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.msgCtrl)("submitted",n.submitted),e.xp6(3),e.hij(" ",e.lcZ(24,14,"General.maxNoOfUsers")," "),e.xp6(6),e.hij(" ",e.lcZ(30,16,"General.Send")," "),e.xp6(2),e.Q6J("ngIf",(null==n.errors?null:n.errors.length)>0))},directives:[k.a8,k.n5,k.dn,T._Y,T.JL,T.sg,H.hX,Pn,ce.R,k.hq,Le.lW,f.O5,f.sg],pipes:[K.X$],styles:[".check-box[_ngcontent-%COMP%]{margin:20px 0}"]}),i}(),Xt=h(6856);function Ta(i,s){1&i&&(e.TgZ(0,"div",1),e.TgZ(1,"mat-radio-group",36),e.TgZ(2,"div",12),e.TgZ(3,"mat-radio-button",13),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA(),e.TgZ(6,"div",12),e.TgZ(7,"mat-radio-button",13),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(3),e.Q6J("value",!0),e.xp6(1),e.hij(" ",e.lcZ(5,4,"labels.DeleteTemplate")," "),e.xp6(3),e.Q6J("value",!1),e.xp6(1),e.hij(" ",e.lcZ(9,6,"labels.DeleteStudentAnswers")," "))}function xa(i,s){if(1&i&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.Q6J("value",a.teacherUserId),e.xp6(1),e.hij(" ",a.teacher_ar_name," ")}}function Ia(i,s){if(1&i&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function ya(i,s){if(1&i&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function qa(i,s){if(1&i&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function Fa(i,s){if(1&i&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function jt(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function un(i,s){if(1&i&&(e.TgZ(0,"mat-hint",37),e.YNc(1,jt,3,3,"span",38),e.qZA()),2&i){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==a.resetFormCtrl.itemId.errors?null:a.resetFormCtrl.itemId.errors.required)}}function _n(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function fn(i,s){if(1&i&&(e.TgZ(0,"mat-hint",37),e.YNc(1,_n,3,3,"span",38),e.qZA()),2&i){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==a.resetFormCtrl.paymentMethod.errors?null:a.resetFormCtrl.paymentMethod.errors.required)}}function vn(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Zn(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function wa(i,s){if(1&i&&(e.TgZ(0,"mat-hint",37),e.YNc(1,vn,3,3,"span",38),e.YNc(2,Zn,3,3,"span",38),e.qZA()),2&i){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==a.resetFormCtrl.extraViews.errors?null:a.resetFormCtrl.extraViews.errors.required),e.xp6(1),e.Q6J("ngIf",null==a.resetFormCtrl.extraViews.errors?null:a.resetFormCtrl.extraViews.errors.bigZero)}}function En(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Yn(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function Sa(i,s){if(1&i&&(e.TgZ(0,"mat-hint",37),e.YNc(1,En,3,3,"span",38),e.YNc(2,Yn,3,3,"span",38),e.qZA()),2&i){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==a.resetFormCtrl.paidAmount.errors?null:a.resetFormCtrl.paidAmount.errors.required),e.xp6(1),e.Q6J("ngIf",null==a.resetFormCtrl.paidAmount.errors?null:a.resetFormCtrl.paidAmount.errors.minusNum)}}function Ua(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1," You must choose a Date. "),e.qZA())}function ka(i,s){if(1&i&&(e.TgZ(0,"mat-hint",37),e.YNc(1,Ua,2,0,"span",38),e.qZA()),2&i){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==a.resetFormCtrl.toDate.errors?null:a.resetFormCtrl.toDate.errors.required)}}function Ea(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-card-content"),e.TgZ(7,"form",2),e.TgZ(8,"div",3),e.TgZ(9,"div",1),e.TgZ(10,"mat-radio-group",17),e.TgZ(11,"div",12),e.TgZ(12,"mat-radio-button",13),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.qZA(),e.TgZ(15,"div",12),e.TgZ(16,"mat-radio-button",13),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.qZA(),e.TgZ(19,"div",12),e.TgZ(20,"mat-radio-button",13),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",4),e.TgZ(24,"mat-form-field",5),e.TgZ(25,"mat-label"),e._uU(26),e.ALo(27,"translate"),e.qZA(),e._UZ(28,"input",18),e.qZA(),e.qZA(),e.TgZ(29,"div",4),e.TgZ(30,"mat-form-field",5),e.TgZ(31,"mat-label"),e._uU(32),e.ALo(33,"translate"),e.qZA(),e._UZ(34,"input",18),e.qZA(),e.qZA(),e.YNc(35,Ta,10,8,"div",19),e.TgZ(36,"div",12),e.TgZ(37,"mat-form-field",5),e.TgZ(38,"mat-label"),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"mat-select",20),e.NdJ("selectionChange",function(){return e.CHM(a),e.oxw().getSubjectByTeacherId()}),e.TgZ(42,"mat-option"),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.YNc(45,xa,2,2,"mat-option",21),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"div",12),e.TgZ(47,"mat-form-field",5),e.TgZ(48,"mat-label"),e._uU(49),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"mat-select",22),e.NdJ("selectionChange",function(){e.CHM(a);var g=e.oxw();return g.getUnitsBySubjectId(g.resetFormCtrl.subjectId.value)}),e.TgZ(52,"mat-option"),e._uU(53),e.ALo(54,"translate"),e.qZA(),e.YNc(55,Ia,2,2,"mat-option",21),e.qZA(),e.qZA(),e.qZA(),e.TgZ(56,"div",12),e.TgZ(57,"mat-form-field",5),e.TgZ(58,"mat-label"),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.TgZ(61,"mat-select",23),e.NdJ("selectionChange",function(){e.CHM(a);var g=e.oxw();return g.getLessonsByUnitId(g.resetFormCtrl.unitId.value)}),e.TgZ(62,"mat-option"),e._uU(63),e.ALo(64,"translate"),e.qZA(),e.YNc(65,ya,2,2,"mat-option",21),e.qZA(),e.qZA(),e.qZA(),e.TgZ(66,"div",12),e.TgZ(67,"mat-form-field",5),e.TgZ(68,"mat-label"),e._uU(69),e.ALo(70,"translate"),e.qZA(),e.TgZ(71,"mat-select",24),e.NdJ("selectionChange",function(){e.CHM(a);var g=e.oxw();return g.GetItemsByLessonWithEnded(g.resetFormCtrl.lessonId.value,g.resetFormCtrl.teacherUserId.value)}),e.TgZ(72,"mat-option"),e._uU(73),e.ALo(74,"translate"),e.qZA(),e.YNc(75,qa,2,2,"mat-option",21),e.qZA(),e.qZA(),e.qZA(),e.TgZ(76,"div",12),e.TgZ(77,"mat-form-field",5),e.TgZ(78,"mat-label"),e._uU(79),e.ALo(80,"translate"),e.qZA(),e.TgZ(81,"mat-select",25),e.TgZ(82,"mat-option"),e._uU(83),e.ALo(84,"translate"),e.qZA(),e.YNc(85,Fa,2,2,"mat-option",21),e.qZA(),e.YNc(86,un,2,1,"mat-hint",26),e.qZA(),e.qZA(),e.TgZ(87,"div",12),e.TgZ(88,"mat-form-field",5),e.TgZ(89,"mat-label"),e._uU(90),e.ALo(91,"translate"),e.qZA(),e.TgZ(92,"mat-select",27),e.TgZ(93,"mat-option"),e._uU(94),e.ALo(95,"translate"),e.qZA(),e.TgZ(96,"mat-option",13),e._uU(97),e.ALo(98,"translate"),e.qZA(),e.TgZ(99,"mat-option",13),e._uU(100),e.ALo(101,"translate"),e.qZA(),e.qZA(),e.YNc(102,fn,2,1,"mat-hint",26),e.qZA(),e.qZA(),e.TgZ(103,"div",28),e.TgZ(104,"mat-form-field",5),e.TgZ(105,"mat-label"),e._uU(106),e.ALo(107,"translate"),e.qZA(),e._UZ(108,"input",29),e.YNc(109,wa,3,2,"mat-hint",26),e.qZA(),e.qZA(),e.TgZ(110,"div",28),e.TgZ(111,"mat-form-field",5),e.TgZ(112,"mat-label"),e._uU(113),e.ALo(114,"translate"),e.qZA(),e._UZ(115,"input",30),e.YNc(116,Sa,3,2,"mat-hint",26),e.qZA(),e.qZA(),e.TgZ(117,"div",28),e.TgZ(118,"mat-form-field",5),e.TgZ(119,"mat-label"),e._uU(120),e.ALo(121,"translate"),e.qZA(),e._UZ(122,"input",31),e._UZ(123,"mat-datepicker-toggle",32),e._UZ(124,"mat-datepicker",null,33),e.YNc(126,ka,2,1,"mat-hint",26),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(127,"mat-card-actions",14),e.TgZ(128,"button",34),e.NdJ("click",function(){return e.CHM(a),e.oxw().addExceptionalViews()}),e._UZ(129,"i",35),e._uU(130),e.ALo(131,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){var n=e.MAs(125),o=e.oxw();e.xp6(4),e.AsE(" ",e.lcZ(5,46,"labels.Student")," - ",o.username," "),e.xp6(3),e.Q6J("formGroup",o.resetForm),e.xp6(5),e.Q6J("value",15),e.xp6(1),e.hij(" ",e.lcZ(14,48,"Material.Lecture")," "),e.xp6(3),e.Q6J("value",16),e.xp6(1),e.hij(" ",e.lcZ(18,50,"labels.Exam")," "),e.xp6(3),e.Q6J("value",3),e.xp6(1),e.hij(" ",e.lcZ(22,52,"labels.Template")," "),e.xp6(5),e.Oqu(e.lcZ(27,54,"labels.Name")),e.xp6(2),e.Q6J("value",o.username),e.xp6(4),e.Oqu(e.lcZ(33,56,"labels.Email")),e.xp6(2),e.Q6J("value",o.email),e.xp6(1),e.Q6J("ngIf",3==o.resetFormCtrl.itemTypeId.value),e.xp6(4),e.Oqu(e.lcZ(40,58,"labels.Teacher")),e.xp6(4),e.Oqu(e.lcZ(44,60,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",o.Teachers),e.xp6(4),e.Oqu(e.lcZ(50,62,"labels.Subject")),e.xp6(4),e.Oqu(e.lcZ(54,64,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",o.subjects),e.xp6(4),e.Oqu(e.lcZ(60,66,"labels.Unit")),e.xp6(4),e.Oqu(e.lcZ(64,68,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",o.units),e.xp6(4),e.Oqu(e.lcZ(70,70,"labels.Lesson")),e.xp6(4),e.Oqu(e.lcZ(74,72,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",o.lessons),e.xp6(4),e.Oqu(e.lcZ(80,74,"Material.Lecture")),e.xp6(4),e.Oqu(e.lcZ(84,76,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",o.materials),e.xp6(1),e.Q6J("ngIf",o.resetFormCtrl.itemId.invalid&&(o.resetFormCtrl.itemId.touched||o.submitted)),e.xp6(4),e.Oqu(e.lcZ(91,78,"Balance.PaymentMethod")),e.xp6(4),e.Oqu(e.lcZ(95,80,"General.Choose")),e.xp6(2),e.Q6J("value",1),e.xp6(1),e.hij(" ",e.lcZ(98,82,"Balance.Balance"),""),e.xp6(2),e.Q6J("value",2),e.xp6(1),e.hij(" ",e.lcZ(101,84,"Balance.ManualPayment"),""),e.xp6(2),e.Q6J("ngIf",o.resetFormCtrl.paymentMethod.invalid&&(o.resetFormCtrl.paymentMethod.touched||o.submitted)),e.xp6(4),e.Oqu(e.lcZ(107,86,"labels.NumberViews")),e.xp6(3),e.Q6J("ngIf",o.resetFormCtrl.extraViews.invalid&&(o.resetFormCtrl.extraViews.touched||o.submitted)),e.xp6(4),e.Oqu(e.lcZ(114,88,"labels.Amount")),e.xp6(3),e.Q6J("ngIf",o.resetFormCtrl.paidAmount.invalid&&(o.resetFormCtrl.paidAmount.touched||o.submitted)),e.xp6(4),e.hij(" ",e.lcZ(121,90,"labels.ToDate"),""),e.xp6(2),e.Q6J("matDatepicker",n),e.xp6(1),e.Q6J("for",n),e.xp6(3),e.Q6J("ngIf",o.resetFormCtrl.toDate.invalid&&(o.resetFormCtrl.toDate.touched||o.submitted)),e.xp6(4),e.hij(" ",e.lcZ(131,92,"General.Add")," ")}}var Da=function(){var i=function(){function s(a,n,o,r,g,v,x,w){(0,j.Z)(this,s),this.authService=a,this.fb=n,this.ManageViewsService=o,this.toastr=r,this.GeneralService=g,this.EducationalService=v,this.CashPaymentService=x,this.spinner=w,this.submitted=!1,this.email="",this.username=""}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){this.EduCompId=Number(this.authService.getEduCompId()),this.branchId=Number(this.authService.getEduCompId()),this.getTeachersByEducompId(),this.searchForm=this.fb.group({sentCode:[""],sentCenterCode:[""],sentMobile:[""],sentEmail:[""],InCenter:[!0]}),this.resetForm=this.fb.group({userId:[null,[T.kI.required]],itemId:["",[T.kI.required]],itemTypeId:[15],paymentMethod:["",[T.kI.required]],extraViews:["",[T.kI.required,Z.D.bigZero]],paidAmount:["",[T.kI.required,Z.D.minusNum]],toDate:["",[T.kI.required]],resetTemplate:[!1],teacherUserId:[""],stageId:[""],yearId:[""],subjectId:[""],unitId:[""],lessonId:[""]})}},{key:"resetFormCtrl",get:function(){return this.resetForm.controls}},{key:"ngAfterViewInit",value:function(){var n=this;this.authService.EduCompId.subscribe(function(o){n.EduCompId=o.EduCompId,n.getTeachersByEducompId()}),this.authService.branchId.subscribe(function(o){n.branchId=o.branchId})}},{key:"searchStudent",value:function(){var n=this;this.spinner.show(),this.ManageViewsService.searchStudent(this.EduCompId,this.searchForm.value).subscribe(function(o){1==o.returnValue?(n.email=o.email,n.username=o.username,n.resetFormCtrl.userId.setValue(o.userId),n.resetFormCtrl.yearId.setValue(o.yearId)):n.toastr.error(o.returnString),n.spinner.hide()})}},{key:"addExceptionalViews",value:function(){var n=this;this.submitted=!0,this.resetFormCtrl.itemTypeId.value||this.toastr.warning("Must Select "),this.resetForm.valid&&(this.spinner.show(),this.ManageViewsService.addExceptionalViews(this.EduCompId,this.resetForm.value).subscribe(function(o){1==o.returnValue?(n.resetForm.reset(),n.searchForm.reset(),n.toastr.success("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0634\u0627\u0647\u062f\u0627\u062a")):n.toastr.error(o.returnString),n.spinner.hide()}))}},{key:"getTeachersByEducompId",value:function(){var n=this;this.spinner.show(),this.GeneralService.getTeachersByEducompId(this.EduCompId).subscribe(function(o){n.Teachers=o.lstTeachers,n.spinner.hide()})}},{key:"getSubjectByTeacherId",value:function(){var n=this;this.lessons=[],this.units=[],this.subjects=[],this.materials=[],this.resetFormCtrl.yearId.value&&this.GeneralService.getSubjectByTeacherId(this.resetFormCtrl.teacherUserId.value,this.resetFormCtrl.yearId.value).subscribe(function(o){n.subjects=o.lsts})}},{key:"getUnitsBySubjectId",value:function(n){var o=this;this.lessons=[],this.units=[],this.materials=[],this.resetFormCtrl.subjectId.value&&this.EducationalService.GetUnits(n).subscribe(function(r){o.units=r})}},{key:"getLessonsByUnitId",value:function(n){var o=this;this.lessons=[],this.materials=[],this.resetFormCtrl.unitId.value&&this.EducationalService.GetLessons(n).subscribe(function(r){o.lessons=r})}},{key:"GetItemsByLessonWithEnded",value:function(n,o){var g,r=this;this.CashPaymentService.GetItemsByLessonWithEnded(this.EduCompId,n,null===(g=this.resetFormCtrl)||void 0===g?void 0:g.itemTypeId.value,o,!0).subscribe(function(v){r.materials=v})}},{key:"GetItemsByUnit",value:function(n){var o=this;this.CashPaymentService.GetItemsByUnit(this.EduCompId,n,this.resetFormCtrl.itemTypeId.value,this.resetFormCtrl.teacherUserId.value).subscribe(function(r){o.materials=r})}},{key:"GetItemsBySubject",value:function(n){var o=this;this.CashPaymentService.GetItemsBySubject(this.EduCompId,n,this.resetFormCtrl.itemTypeId.value,this.resetFormCtrl.teacherUserId.value).subscribe(function(r){o.materials=r})}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(Te.e),e.Y36(T.qu),e.Y36(Un.N),e.Y36(Et._W),e.Y36(Wt.m),e.Y36(Sn.i),e.Y36(wn),e.Y36(Q.t2))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-exceptional-views"]],decls:48,vars:28,consts:[[1,"row"],[1,"col-12"],[1,"container-fluid",3,"formGroup"],[1,"row","f-w"],[1,"col-md-6","col-12"],["appearance","legacy"],["matInput","","type","text","formControlName","sentCenterCode"],["matInput","","type","email","formControlName","sentEmail"],["matInput","","type","text","formControlName","sentMobile"],["matInput","","type","text","formControlName","sentCode"],[1,"col-md-8","col-6"],["formControlName","InCenter",1,"row"],[1,"col-md-3","col-12"],[3,"value"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],["class","row",4,"ngIf"],["formControlName","itemTypeId",1,"row"],["matInput","","type","text","redonly","",3,"value"],["class","col-12",4,"ngIf"],["formControlName","teacherUserId",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","subjectId",3,"selectionChange"],["formControlName","unitId",3,"selectionChange"],["formControlName","lessonId",3,"selectionChange"],["formControlName","itemId"],["class","text-danger",4,"ngIf"],["formControlName","paymentMethod"],[1,"col-md-4","col-12"],["matInput","","type","number","formControlName","extraViews"],["matInput","","type","number","formControlName","paidAmount"],["matInput","","formControlName","toDate",3,"matDatepicker"],["matSuffix","",3,"for"],["toDate",""],["mat-raised-button","",1,"btn","btn-primary","bg-light-info",3,"click"],[1,"fa","fa-plus"],["formControlName","resetTemplate",1,"row"],[1,"text-danger"],[4,"ngIf"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-card-content"),e.TgZ(7,"form",2),e.TgZ(8,"div",3),e.TgZ(9,"div",4),e.TgZ(10,"mat-form-field",5),e.TgZ(11,"mat-label"),e._uU(12),e.ALo(13,"translate"),e.qZA(),e._UZ(14,"input",6),e.qZA(),e.qZA(),e.TgZ(15,"div",4),e.TgZ(16,"mat-form-field",5),e.TgZ(17,"mat-label"),e._uU(18),e.ALo(19,"translate"),e.qZA(),e._UZ(20,"input",7),e.qZA(),e.qZA(),e.TgZ(21,"div",4),e.TgZ(22,"mat-form-field",5),e.TgZ(23,"mat-label"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e._UZ(26,"input",8),e.qZA(),e.qZA(),e.TgZ(27,"div",4),e.TgZ(28,"mat-form-field",5),e.TgZ(29,"mat-label"),e._uU(30),e.ALo(31,"translate"),e.qZA(),e._UZ(32,"input",9),e.qZA(),e.qZA(),e.TgZ(33,"div",10),e.TgZ(34,"mat-radio-group",11),e.TgZ(35,"div",12),e.TgZ(36,"mat-radio-button",13),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.qZA(),e.TgZ(39,"div",12),e.TgZ(40,"mat-radio-button",13),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(43,"mat-card-actions",14),e.TgZ(44,"button",15),e.NdJ("click",function(){return n.searchStudent()}),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(47,Ea,132,94,"div",16)),2&a&&(e.xp6(4),e.hij(" ",e.lcZ(5,12,"Navbar.ExceptionalViews")," "),e.xp6(3),e.Q6J("formGroup",n.searchForm),e.xp6(5),e.Oqu(e.lcZ(13,14,"labels.CenterCode")),e.xp6(6),e.Oqu(e.lcZ(19,16,"labels.Email")),e.xp6(6),e.Oqu(e.lcZ(25,18,"labels.Mobile")),e.xp6(6),e.Oqu(e.lcZ(31,20,"labels.Code")),e.xp6(6),e.Q6J("value",!0),e.xp6(1),e.hij(" ",e.lcZ(38,22,"labels.InCenter")," "),e.xp6(3),e.Q6J("value",!1),e.xp6(1),e.hij(" ",e.lcZ(42,24,"labels.OutCenter")," "),e.xp6(4),e.hij(" ",e.lcZ(46,26,"General.Search")," "),e.xp6(2),e.Q6J("ngIf",n.resetFormCtrl.userId.value))},directives:[k.a8,k.n5,k.dn,T._Y,T.JL,T.sg,H.KE,H.hX,Tt.Nt,T.Fj,T.JJ,T.u,Yt.VQ,Yt.U0,k.hq,Le.lW,f.O5,xt.gD,pt.ey,f.sg,T.wV,Xt.hl,Xt.nW,H.R9,Xt.Mq,H.bx],pipes:[K.X$],styles:[""]}),i}(),Na=function(){var i=function(){function s(a,n){(0,j.Z)(this,s),this.toastr=a,this.translate=n}return(0,Y.Z)(s,[{key:"isFormEmpty",value:function(n){var o=!0;for(var r in n.controls)n.get(r).value&&(o=!1);return o}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.LFG(Et._W),e.LFG(K.sK))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i}(),jn=h(7446);function Ma(i,s){if(1&i&&(e.TgZ(0,"table",13),e.TgZ(1,"thead"),e.TgZ(2,"tr"),e.TgZ(3,"th"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"tbody"),e.TgZ(10,"tr"),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){var a=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,4,"labels.Name")),e.xp6(3),e.Oqu(e.lcZ(8,6,"labels.Email")),e.xp6(5),e.Oqu(a.searchResponse.username),e.xp6(2),e.Oqu(a.searchResponse.email)}}function Qa(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-card-content"),e.TgZ(7,"div",0),e.TgZ(8,"div",1),e.TgZ(9,"form",3),e.TgZ(10,"div",0),e.TgZ(11,"div",1),e.TgZ(12,"div",14),e.TgZ(13,"mat-label",1),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"div",15),e.TgZ(17,"mat-checkbox",16),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.qZA(),e.TgZ(20,"div",15),e.TgZ(21,"mat-checkbox",17),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.qZA(),e.TgZ(24,"div",15),e.TgZ(25,"mat-checkbox",18),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",1),e.TgZ(29,"mat-form-field",5),e.TgZ(30,"mat-label"),e._uU(31),e.ALo(32,"translate"),e.qZA(),e._UZ(33,"textarea",19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"mat-card-actions",10),e.TgZ(35,"button",11),e.NdJ("click",function(r){return e.CHM(a),e.oxw().onSubmit(r)}),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){var n=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,11,"Navbar.SendWhatsappMsg")," "),e.xp6(5),e.Q6J("formGroup",n.myForm),e.xp6(5),e.hij(" ",e.lcZ(15,13,"labels.SendMessageTo")," "),e.xp6(3),e.Q6J("value",!0),e.xp6(1),e.hij(" ",e.lcZ(19,15,"labels.ForStudentsWhatsapp")," "),e.xp6(3),e.Q6J("value",!0),e.xp6(1),e.hij(" ",e.lcZ(23,17,"labels.ForFatherWhatsapp")," "),e.xp6(3),e.Q6J("value",!0),e.xp6(1),e.hij(" ",e.lcZ(27,19,"labels.ForMotherWhatsapp")," "),e.xp6(5),e.hij(" ",e.lcZ(32,21,"labels.Message")," "),e.xp6(5),e.hij(" ",e.lcZ(37,23,"General.Send")," ")}}function Ja(i,s){if(1&i&&(e.TgZ(0,"li",22),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.hij(" ",a," ")}}function Oa(i,s){if(1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-card-content"),e.TgZ(7,"div",0),e.TgZ(8,"div",4),e.TgZ(9,"ul",20),e.YNc(10,Ja,2,1,"li",21),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){var a=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,2,"Labels.FailureList")," "),e.xp6(6),e.Q6J("ngForOf",a.errors)}}var La=function(){var i=function(){function s(a,n,o,r,g,v,x,w){(0,j.Z)(this,s),this.fb=a,this.whatsappService=n,this.authService=o,this.SearchStudentService=r,this.spinner=g,this.formValidationService=v,this.toastr=x,this.translate=w,this.errors=[]}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){this.EduCompId=this.authService.getEduCompId(),this.myForm=this.fb.group({userId:["",T.kI.required],AdminEducationCompanyId:[this.EduCompId,T.kI.required],msg:["",T.kI.required],sendToStudentWhatsApp:[!1],sendToFatherWhatsApp:[!1],sendToMotherWhatsApp:[!1]}),this.searchForm=this.fb.group({sentCenterCode:[""],sentMobile:[""],sentEmail:[""]})}},{key:"onSearch",value:function(){var n=this;this.formValidationService.isFormEmpty(this.searchForm)?this.toastr.error(this.translate.instant("Response.EmptyForm")):this.SearchStudentService.searchStudent(this.EduCompId,this.searchForm.value).subscribe(function(o){1==o.returnValue&&(n.searchResponse=o,n.myForm.controls.userId.setValue(o.userId))})}},{key:"onSubmit",value:function(n){n.target.disabled=!0,this.whatsappService.sendSingularWhatsAppMsg(this.myForm.value).subscribe(function(o){n.target.disabled=!1,o&&console.log(o)})}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(T.qu),e.Y36(Ln),e.Y36(Te.e),e.Y36(Un.N),e.Y36(Q.t2),e.Y36(Na),e.Y36(Et._W),e.Y36(K.sK))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-send-singular-whatsapp-msg"]],decls:37,vars:19,consts:[[1,"row"],[1,"col-12"],[1,"container-fluid"],[3,"formGroup"],[1,"col-6"],["appearance","legacy"],["matInput","","type","text","formControlName","sentEmail"],["matInput","","type","text","formControlName","sentMobile"],["matInput","","type","text","formControlName","sentCenterCode"],["class","table table-striped table-hover table-full-width rtl",4,"ngIf"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],["class","row",4,"ngIf"],[1,"table","table-striped","table-hover","table-full-width","rtl"],[1,"row","check-box"],[1,"col-md-4","co-12"],["formControlName","sendToStudentWhatsApp",3,"value"],["formControlName","sendToFatherWhatsApp",3,"value"],["formControlName","sendToMotherWhatsApp",3,"value"],["matInput","","type","text","formControlName","msg"],[1,"list-group"],["class","list-group-item disabled",4,"ngFor","ngForOf"],[1,"list-group-item","disabled"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card",2),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-card-content"),e.TgZ(7,"div",0),e.TgZ(8,"div",1),e.TgZ(9,"form",3),e.TgZ(10,"div",0),e.TgZ(11,"div",4),e.TgZ(12,"mat-form-field",5),e.TgZ(13,"mat-label"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e._UZ(16,"input",6),e.qZA(),e.qZA(),e.TgZ(17,"div",4),e.TgZ(18,"mat-form-field",5),e.TgZ(19,"mat-label"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e._UZ(22,"input",7),e.qZA(),e.qZA(),e.TgZ(23,"div",4),e.TgZ(24,"mat-form-field",5),e.TgZ(25,"mat-label"),e._uU(26),e.ALo(27,"translate"),e.qZA(),e._UZ(28,"input",8),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(29,Ma,15,8,"table",9),e.TgZ(30,"mat-card-actions",10),e.TgZ(31,"button",11),e.NdJ("click",function(){return n.onSearch()}),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(34,Qa,38,25,"div",12),e.YNc(35,Oa,11,4,"div",12),e._UZ(36,"div",0)),2&a&&(e.xp6(4),e.hij(" ",e.lcZ(5,9,"Navbar.SendWhatsappMsg")," "),e.xp6(5),e.Q6J("formGroup",n.searchForm),e.xp6(5),e.hij(" ",e.lcZ(15,11,"labels.Email")," "),e.xp6(6),e.hij(" ",e.lcZ(21,13,"labels.Mobile")," "),e.xp6(6),e.hij(" ",e.lcZ(27,15,"labels.Code")," "),e.xp6(3),e.Q6J("ngIf",n.searchResponse),e.xp6(3),e.hij(" ",e.lcZ(33,17,"General.Search")," "),e.xp6(2),e.Q6J("ngIf",n.searchResponse),e.xp6(1),e.Q6J("ngIf",(null==n.errors?null:n.errors.length)>0))},directives:[k.a8,k.n5,k.dn,T._Y,T.JL,T.sg,H.KE,H.hX,Tt.Nt,T.Fj,T.JJ,T.u,f.O5,k.hq,Le.lW,jn.oG,f.sg],pipes:[K.X$],styles:[""]}),i}(),Pa=h(6666),Bn=function(){var i=function(s){(0,mn.Z)(n,s);var a=(0,pn.Z)(n);function n(o){var r;return(0,j.Z)(this,n),(r=a.call(this,o)).http=o,r}return(0,Y.Z)(n,[{key:"addAnnouncement",value:function(r){return this.post("AJAX/AddAnnouncement",r)}},{key:"getAnnounceById",value:function(r){return this.get("Announcement/get-announce-by-Id/".concat(r))}},{key:"getAnnouncements",value:function(r){return this.get("Announcement/GetAnnouncement/".concat(r))}},{key:"getAllAnnouncements",value:function(r){return this.get("Announcement/GetAllAnnouncement/".concat(r))}}]),n}(Ht.K);return i.\u0275fac=function(a){return new(a||i)(e.LFG(gn.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i}();function Ya(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.AddAnnounce")," "))}function ja(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.EditAnnounce")," "))}function Cn(i,s){if(1&i&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.Q6J("value",a.teacherUserId),e.xp6(1),e.hij(" ",a.teacher_ar_name," ")}}function Ba(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1," Must Choose a value "),e.qZA())}function Ra(i,s){if(1&i&&(e.TgZ(0,"mat-hint",29),e.YNc(1,Ba,2,0,"span",2),e.qZA()),2&i){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.FormCtrls.teacherId.errors?null:a.FormCtrls.teacherId.errors.required)}}function Ga(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1," You must choose a value. "),e.qZA())}function Va(i,s){if(1&i&&(e.TgZ(0,"mat-hint",30),e.YNc(1,Ga,2,0,"span",2),e.qZA()),2&i){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.FormCtrls.fromDate.errors?null:a.FormCtrls.fromDate.errors.required)}}function Ha(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1," You must choose a value. "),e.qZA())}function Wa(i,s){if(1&i&&(e.TgZ(0,"mat-hint",30),e.YNc(1,Ha,2,0,"span",2),e.qZA()),2&i){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.FormCtrls.toDate.errors?null:a.FormCtrls.toDate.errors.required)}}function za(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){return e.CHM(a),e.oxw(2).OnSubmit()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"General.Update")," "))}function $a(i,s){if(1&i&&(e.TgZ(0,"mat-card-actions",26),e.YNc(1,za,3,3,"button",31),e.qZA()),2&i){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.announceId>0)}}function Ka(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){return e.CHM(a),e.oxw().onSubmit()}),e._UZ(1,"i",34),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.Add")," "))}var Xa=function(s){return{functionId:s}},eo=function(){var i=function(){function s(a,n,o,r,g,v,x,w,q,N){var L=this;(0,j.Z)(this,s),this.route=a,this.fb=n,this.authserv=o,this.msg=r,this.GeneralService=g,this.roleService=v,this.spinner=x,this.dialog=w,this.datePipe=q,this.announcementService=N,this.announceId=0,this.submitted=!1,this.route.queryParamMap.subscribe(function(R){L.announceId=Number(R.get("announceId")),L.announceId>0&&L.getAnnounceById(L.announceId),L.functionId=Number(R.get("functionId")),L.functionId&&L.authserv.getUserRowFunctions(L.functionId).subscribe(function(le){le&&(L.rowFunctions=le)})})}return(0,Y.Z)(s,[{key:"getAnnounceById",value:function(n){var o=this;this.announcementService.getAnnounceById(n).subscribe(function(r){console.log("getGroupById",r),o.announceId=r.Id,o.FormCtrls.Id.setValue(r.Id),o.FormCtrls.fromDate.setValue(r.From_Date),o.FormCtrls.toDate.setValue(r.To_Date),o.FormCtrls.teacherUserId.setValue(r.teacherUserId),o.FormCtrls.announcementText.setValue(r.announcement_text),o.FormCtrls.announcementPicture.setValue(r.attach_path),o.picturePath="mozakretyapi".concat(r.attach_path)})}},{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.myForm=this.fb.group({Id:"",announcementText:[],announcementPicture:[""],fromDate:[,T.kI.required],toDate:[,T.kI.required],teacherUserId:[],eduCompId:[this.EduCompId]}),this.getTeachersByEducompId(this.EduCompId)}},{key:"getTeachersByEducompId",value:function(n){var o=this;n&&this.GeneralService.getTeachersByEducompId(n).subscribe(function(r){console.log("teachers",r.lstTeachers),o.Teachers=r.lstTeachers})}},{key:"ngAfterViewInit",value:function(){var n=this;this.authserv.EduCompId.subscribe(function(o){n.EduCompId=o.EduCompId})}},{key:"onSubmit",value:function(){var n=this;this.submitted=!0,this.FormCtrls.fromDate.value>this.FormCtrls.toDate.value?this.msg.error("\u062a\u0627\u0631\u064a\u062e \u0628\u062f\u0627\u064a\u0629 \u0627\u0644\u0641\u062a\u0631\u0629 \u0623\u0643\u0628\u0631 \u0645\u0646 \u062a\u0627\u0631\u064a\u062e \u0646\u0647\u0627\u064a\u0629 \u0627\u0644\u0641\u062a\u0631\u0629"):this.FormCtrls.announcementText.value||this.FormCtrls.announcementPicture.value?0==this.announceId?this.myForm.valid&&(this.FormCtrls.fromDate.setValue(this.datePipe.transform(this.FormCtrls.fromDate.value)),this.FormCtrls.toDate.setValue(this.datePipe.transform(this.FormCtrls.toDate.value)),this.announcementService.addAnnouncement(this.myForm.value).subscribe(function(o){1==o.returnValue?n.msg.success("\u062a\u0645 \u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u0627\u0639\u0644\u0627\u0646 \u0628\u0646\u062c\u0627\u062d"):2==o.returnValue&&n.msg.error("\u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u0627\u0639\u0644\u0627\u0646"),n.submitted=!1,n.spinner.hide()})):this.myForm.valid&&(this.FormCtrls.Id.setValue(this.announceId),this.FormCtrls.fromDate.setValue(this.datePipe.transform(this.FormCtrls.fromDate.value)),this.FormCtrls.toDate.setValue(this.datePipe.transform(this.FormCtrls.toDate.value)),this.announcementService.addAnnouncement(this.myForm.value).subscribe(function(o){1==o.returnValue?n.msg.success("\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0627\u0639\u0644\u0627\u0646 \u0628\u0646\u062c\u0627\u062d"):2==o.returnValue&&n.msg.error("\u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0627\u0639\u0644\u0627\u0646"),n.submitted=!1,n.spinner.hide()})):this.msg.error("\u064a\u062c\u0628 \u0627\u062f\u062e\u0627\u0644 \u0635\u064a\u063a\u0629 \u0627\u0644\u0627\u0639\u0644\u0627\u0646 \u0623\u0648 \u0635\u0648\u0631\u0629 \u0627\u0644\u0627\u0639\u0644\u0627\u0646 \u0623\u0648 \u0643\u0644\u0627\u0647\u0645\u0627")}},{key:"onChange",value:function(n){var o=this,r=n.target.files[0].name,g=n.target.files[0].size,v=n.target.files[0].type,x=n.target.files[0].lastModified,w=n.target.files[0].lastModifiedDate;if(n.target.files){var q=new FileReader;q.readAsDataURL(n.target.files[0]),q.onload=function(N){var L=N.target.result;o.FormCtrls.announcementPicture.setValue({FileAsBase64:L,name:r,size:g,type:v,LastModified:x,LastModifiedDate:w}),o.picturePath=L}}}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(ne.gz),e.Y36(T.qu),e.Y36(Te.e),e.Y36(Et._W),e.Y36(Wt.m),e.Y36(Pa.f),e.Y36(Q.t2),e.Y36(S.uw),e.Y36(f.uU),e.Y36(Bn))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-announcement-setup"]],decls:64,vars:38,consts:[[1,"row"],[1,"col-12"],[4,"ngIf"],["mat-raised-button","","routerLink","../announcement-index",1,"btn","btn-warning","bg-light-warning","float-right",3,"queryParams"],[1,"container-fluid"],[1,"media"],["alt","No Image","height","64","width","64",1,"users-avatar-shadow","avatar","mr-3","rounded-circle",3,"src"],[1,"media-body"],[1,"d-flex","flex-sm-row","flex-column","justify-content-start","px-0","mb-sm-2"],["type","button","mat-raised-button","",1,"btn","btn-sm","bg-light-primary","mb-1","mb-sm-0",3,"click"],["hidden","","type","file","accept","image/*","id","file",3,"change"],["fileInput",""],[1,"container-fluid",3,"formGroup"],[1,"col-6"],["appearance","legacy"],["formControlName","teacherUserId"],[3,"value",4,"ngFor","ngForOf"],["class","danger",4,"ngIf"],["matInput","","formControlName","fromDate",3,"matDatepicker"],["matSuffix","",3,"for"],["fromDate",""],["class","text-danger",4,"ngIf"],["matInput","","formControlName","toDate",3,"matDatepicker"],["toDate",""],["matInput","","cols","20","formControlName","announcementText"],["align","end",4,"ngIf"],["align","end"],["mat-raised-button","","class","btn btn-primary bg-light-info",3,"click",4,"ngIf"],[3,"value"],[1,"danger"],[1,"text-danger"],["mat-raised-button","","class","btn btn-primary",3,"click",4,"ngIf"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],["mat-raised-button","",1,"btn","btn-primary","bg-light-info",3,"click"],[1,"fa","fa-plus"]],template:function(a,n){if(1&a){var o=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e.YNc(4,Ya,3,3,"span",2),e.YNc(5,ja,3,3,"span",2),e.TgZ(6,"a",3),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.TgZ(9,"mat-card-content",4),e.TgZ(10,"div",5),e._UZ(11,"img",6),e.TgZ(12,"div",7),e.TgZ(13,"div",8),e.TgZ(14,"button",9),e.NdJ("click",function(){return e.CHM(o),e.MAs(18).click()}),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"input",10,11),e.NdJ("change",function(x){return n.onChange(x)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",0),e.TgZ(20,"div",1),e.TgZ(21,"form",12),e.TgZ(22,"div",0),e.TgZ(23,"div",13),e.TgZ(24,"mat-form-field",14),e.TgZ(25,"mat-label"),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"mat-select",15),e.TgZ(29,"mat-option"),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.YNc(32,Cn,2,2,"mat-option",16),e.qZA(),e.YNc(33,Ra,2,1,"mat-hint",17),e.qZA(),e.qZA(),e._UZ(34,"div",13),e.TgZ(35,"div",13),e.TgZ(36,"mat-form-field",14),e.TgZ(37,"mat-label"),e._uU(38),e.ALo(39,"translate"),e.qZA(),e._UZ(40,"input",18),e._UZ(41,"mat-datepicker-toggle",19),e._UZ(42,"mat-datepicker",null,20),e.YNc(44,Va,2,1,"mat-hint",21),e.qZA(),e.qZA(),e.TgZ(45,"div",13),e.TgZ(46,"mat-form-field",14),e.TgZ(47,"mat-label"),e._uU(48),e.ALo(49,"translate"),e.qZA(),e._UZ(50,"input",22),e._UZ(51,"mat-datepicker-toggle",19),e._UZ(52,"mat-datepicker",null,23),e.YNc(54,Wa,2,1,"mat-hint",21),e.qZA(),e.qZA(),e.TgZ(55,"div",1),e.TgZ(56,"mat-form-field",14),e.TgZ(57,"mat-label"),e._uU(58),e.ALo(59,"translate"),e.qZA(),e._UZ(60,"textarea",24),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(61,$a,2,1,"mat-card-actions",25),e.TgZ(62,"mat-card-actions",26),e.YNc(63,Ka,4,3,"button",27),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&a){var r=e.MAs(43),g=e.MAs(53);e.xp6(4),e.Q6J("ngIf",0==n.announceId),e.xp6(1),e.Q6J("ngIf",n.announceId>0),e.xp6(1),e.Q6J("queryParams",e.VKq(36,Xa,n.functionId)),e.xp6(1),e.hij(" ",e.lcZ(8,22,"General.Back")," "),e.xp6(4),e.s9C("src",n.picturePath,e.LSH),e.xp6(4),e.hij(" ",e.lcZ(16,24,"labels.AnnouncePicture")," "),e.xp6(6),e.Q6J("formGroup",n.myForm),e.xp6(5),e.Oqu(e.lcZ(27,26,"labels.Teacher")),e.xp6(4),e.Oqu(e.lcZ(31,28,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",n.Teachers),e.xp6(1),e.Q6J("ngIf",n.FormCtrls.teacherUserId.invalid&&(n.FormCtrls.teacherUserId.touched||n.submitted)),e.xp6(5),e.hij(" ",e.lcZ(39,30,"labels.FromDate")," "),e.xp6(2),e.Q6J("matDatepicker",r),e.xp6(1),e.Q6J("for",r),e.xp6(3),e.Q6J("ngIf",n.FormCtrls.fromDate.invalid&&(n.FormCtrls.fromDate.touched||n.submitted)),e.xp6(4),e.hij(" ",e.lcZ(49,32,"labels.ToDate")," "),e.xp6(2),e.Q6J("matDatepicker",g),e.xp6(1),e.Q6J("for",g),e.xp6(3),e.Q6J("ngIf",n.FormCtrls.toDate.invalid&&(n.FormCtrls.toDate.touched||n.submitted)),e.xp6(4),e.hij(" ",e.lcZ(59,34,"labels.Announcement")," "),e.xp6(3),e.Q6J("ngIf",n.announceId>0),e.xp6(2),e.Q6J("ngIf",0==n.announceId)}},directives:[k.a8,k.n5,f.O5,Le.zs,ne.yS,k.dn,Le.lW,T._Y,T.JL,T.sg,H.KE,H.hX,xt.gD,T.JJ,T.u,pt.ey,f.sg,Tt.Nt,T.Fj,Xt.hl,Xt.nW,H.R9,Xt.Mq,k.hq,H.bx],pipes:[K.X$],styles:[""]}),i}(),to=h(2397),Rn=h(3251),Dn=h(5245);function no(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",7),e._UZ(2,"app-input",21),e.qZA(),e.TgZ(3,"div",7),e._UZ(4,"app-input",22),e.qZA(),e.BQk()),2&i){var a=e.oxw();e.xp6(2),e.Q6J("control",a.lecturesFormCtrls.from)("submitted",a.ExamSubmitted),e.xp6(2),e.Q6J("control",a.lecturesFormCtrls.to)("submitted",a.ExamSubmitted)}}function io(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e.TgZ(6,"button",23),e.NdJ("click",function(){var g=e.CHM(a).$implicit;return e.oxw().DeleatePointDialog(g,"lecture")}),e.TgZ(7,"mat-icon"),e._uU(8,"delete"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){var n=s.$implicit;e.xp6(2),e.hij(" ",n.AttendanceValue," "),e.xp6(2),e.hij(" ",n.AbsenceValue," ")}}function ao(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"pagination-controls",24),e.NdJ("pageChange",function(r){return e.CHM(a),e.oxw().LecturePage=r}),e.qZA()}if(2&i){var n=e.oxw();e.Q6J("maxSize",n.maxSize)}}function oo(i,s){1&i&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.ByQuestion")," "))}function ro(i,s){1&i&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.ByGroupQuestions")," "))}function lo(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"tr"),e.YNc(1,oo,3,3,"td",6),e.YNc(2,ro,3,3,"td",6),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e.TgZ(10,"button",23),e.NdJ("click",function(){var g=e.CHM(a).$implicit;return e.oxw().DeleatePointDialog(g,"Exam")}),e.TgZ(11,"mat-icon"),e._uU(12,"delete"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){var n=s.$implicit;e.xp6(1),e.Q6J("ngIf",null==n.FromValue&&null==n.ToValue),e.xp6(1),e.Q6J("ngIf",null!=n.FromValue&&null!=n.ToValue),e.xp6(2),e.Oqu(n.FromValue||"-"),e.xp6(2),e.Oqu(n.ToValue||"-"),e.xp6(2),e.Oqu(n.Value||"-")}}function so(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"pagination-controls",25),e.NdJ("pageChange",function(r){return e.CHM(a),e.oxw().ExamPage=r}),e.qZA()}if(2&i){var n=e.oxw();e.Q6J("maxSize",n.maxSize)}}var uo=function(s){return{functionId:s}},co=function(s){return{itemsPerPage:9,currentPage:s,id:"lecture"}},mo=function(s){return{itemsPerPage:9,currentPage:s,id:"exam"}},po=function(){var i=function(){function s(a,n,o,r,g,v,x,w){var q=this;(0,j.Z)(this,s),this.fb=a,this.route=n,this.toastr=o,this.authserv=r,this.GeneralService=g,this.PointsService=v,this.dialog=x,this.spinner=w,this.lecsubmitted=!1,this.ExamSubmitted=!1,this.LecturePage=1,this.ExamPage=1,this.maxSize=9,n.paramMap.subscribe(function(N){q.courseId=Number(N.get("courseId")),console.log(q.courseId)}),n.queryParamMap.subscribe(function(N){q.functionId=Number(N.get("functionId"))})}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){this.EduCompId=Number(this.authserv.getEduCompId()),this.getExamPoints(),this.getLeturePoints(),this.getTeachersByEducompId(),this.lecturesForm=this.fb.group({ByQuestion:[!1,[T.kI.required]],attendancevalue:["",[T.kI.required,Z.D.minusNum]],absencevalue:["",[T.kI.required,Z.D.minusNum]]}),this.ExamForm=this.fb.group({ByQuestion:[!1,[T.kI.required]],from:["",[T.kI.required,Z.D.minusNum]],to:["",[T.kI.required,Z.D.minusNum]],value:["",[T.kI.required,Z.D.minusNum]]},{}),this.ByQuestionValidators(!0)}},{key:"lecturesFormCtrls",get:function(){return this.lecturesForm.controls}},{key:"ExamFormCtrls",get:function(){return this.ExamForm.controls}},{key:"addLecturePoint",value:function(){var o,r,g,n=this;if(this.lecsubmitted=!0,null!=this.courseId){if(this.lecturesForm.valid){this.spinner.show();var v={ByQuestion:null===(o=this.lecturesFormCtrls)||void 0===o?void 0:o.ByQuestion.value,from:null,to:null,selectedSubjectId:this.courseId,value:null,absencevalue:null===(r=this.lecturesFormCtrls)||void 0===r?void 0:r.absencevalue.value,attendancevalue:null===(g=this.lecturesFormCtrls)||void 0===g?void 0:g.attendancevalue.value,questionAttempt:null,questionAttempts:null,isLecture:!0};this.PointsService.addPoints(this.EduCompId,v).subscribe(function(x){var w;1==x.returnValue&&(n.getLeturePoints(),n.toastr.success("General.AddSuccessfully"),n.lecsubmitted=!1,n.lecturesForm.reset(),null===(w=n.lecturesFormCtrls)||void 0===w||w.ByQuestion.setValue(!1)),n.spinner.hide()})}}else this.toastr.warning("Please select courseId")}},{key:"addExamPoint",value:function(){var o,r,g,v,n=this;if(this.ExamSubmitted=!0,null!=this.courseId){if(this.getLeturePoints(),this.ExamForm.valid){this.spinner.show();var x={ByQuestion:null===(o=this.ExamFormCtrls)||void 0===o?void 0:o.ByQuestion.value,from:null===(r=this.ExamFormCtrls)||void 0===r?void 0:r.from.value,to:null===(g=this.ExamFormCtrls)||void 0===g?void 0:g.to.value,value:null===(v=this.ExamFormCtrls)||void 0===v?void 0:v.value.value,selectedSubjectId:this.courseId,isLecture:!1};this.fromToExamValidators(),this.PointsService.addPoints(this.EduCompId,x).subscribe(function(w){var q;1==w.returnValue&&(n.getExamPoints(),n.toastr.success("General.AddSuccessfully"),n.ExamSubmitted=!1,n.ExamForm.reset(),null===(q=n.ExamFormCtrls)||void 0===q||q.ByQuestion.setValue(!1)),n.spinner.hide()})}}else this.toastr.warning("Please select course")}},{key:"getLeturePoints",value:function(){var n=this;this.spinner.show(),this.PointsService.getPoints(this.courseId,6,this.EduCompId).subscribe(function(o){o&&(n.lecturePoints=o),n.spinner.hide()})}},{key:"getExamPoints",value:function(){var n=this;this.spinner.show(),this.PointsService.getPoints(this.courseId,3,this.EduCompId).subscribe(function(o){o&&(n.ExamPoints=o),n.spinner.hide()})}},{key:"DeleatePointDialog",value:function(n,o){var r=this;this.dialog.open(pe.F,{data:{msg:"".concat(n.Value,": points"),panelClass:"dialog-radius"}}).afterClosed().subscribe(function(g){g&&r.deletePoint(n,o)})}},{key:"deletePoint",value:function(n,o){var r=this;this.spinner.show(),this.PointsService.deletePoint(n.Id).subscribe(function(g){if(1==g.returnValue){if("lecture"==o){var v=r.lecturePoints.findIndex(function(w){return w==n});r.lecturePoints.splice(v,1)}else{var x=r.ExamPoints.findIndex(function(w){return w==n});r.ExamPoints.splice(x,1)}r.toastr.success("General.DeleteSuccessfully")}else r.toastr.error(g.returnString);r.spinner.hide()})}},{key:"getTeachersByEducompId",value:function(){var n=this;this.GeneralService.getTeachersByEducompId(this.EduCompId).subscribe(function(o){n.Teachers=o.lstTeachers})}},{key:"onChangeTeacher",value:function(n){var o=this;null!=n&&(this.teacherUserId=n,this.getExamPoints(),this.getLeturePoints(),this.GeneralService.getSubjectByTeacherId(n).subscribe(function(r){o.subjects=r.lsts}))}},{key:"onChangeSunbject",value:function(n){this.SubjectId=n,this.ExamFormCtrls.selectedSubjectId.setValue(n)}},{key:"ByQuestionValidators",value:function(n){1==n?(this.ExamFormCtrls.from.reset(),this.ExamFormCtrls.from.clearValidators(),this.ExamFormCtrls.to.reset(),this.ExamFormCtrls.to.clearValidators()):(this.ExamFormCtrls.from.setValidators([T.kI.required,Z.D.minusNum]),this.ExamFormCtrls.to.setValidators([T.kI.required,Z.D.bigZero])),this.ExamFormCtrls.from.updateValueAndValidity(),this.ExamFormCtrls.to.updateValueAndValidity()}},{key:"fromToExamValidators",value:function(){""!=this.ExamFormCtrls.from.value&&""!=this.ExamFormCtrls.to.value&&this.ExamForm.setValidators([Z.D.smallerThanNumbers("from","to")])}},{key:"track",value:function(n,o){return o.Id}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(T.qu),e.Y36(ne.gz),e.Y36(F.K),e.Y36(Te.e),e.Y36(Wt.m),e.Y36(to.q),e.Y36(S.uw),e.Y36(Q.t2))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-points-setup"]],decls:83,vars:67,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","","routerLink","/dashboard/setup/course/index",1,"btn","btn-warning","bg-light-warning","float-right",3,"queryParams"],[1,"container-fluid"],[3,"label"],[3,"formGroup"],[4,"ngIf"],[1,"col-lg-4","col-12"],["type","number","label","labels.AttendancePoints",3,"control","submitted"],["type","number","label","labels.AbsencePoints",3,"control","submitted"],["align","end"],["mat-raised-button","","type","button",1,"btn","btn-primary","bg-light-info",3,"click"],[1,"fa","fa-plus"],[1,"table"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"paginator-box"],["previousLabel","","nextLabel","","id","lecture",3,"maxSize","pageChange",4,"ngIf"],["type","number","label","labels.From",3,"control","submitted"],["type","number","label","labels.To",3,"control","submitted"],["type","number","label","labels.pointsNumber",3,"control","submitted"],["previousLabel","","nextLabel","","id","exam",3,"maxSize","pageChange",4,"ngIf"],["type","number","lable","labels.From",3,"control","submitted"],["type","number","lable","labels.To",3,"control","submitted"],["mat-mini-fab","","color","warn",3,"click"],["previousLabel","","nextLabel","","id","lecture",3,"maxSize","pageChange"],["previousLabel","","nextLabel","","id","exam",3,"maxSize","pageChange"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"a",2),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.TgZ(9,"mat-card-content",3),e._UZ(10,"div",0),e.TgZ(11,"div",0),e.TgZ(12,"div",1),e.TgZ(13,"mat-tab-group"),e.TgZ(14,"mat-tab",4),e.ALo(15,"translate"),e.TgZ(16,"form",5),e.TgZ(17,"div",0),e.YNc(18,no,5,4,"ng-container",6),e.TgZ(19,"div",7),e._UZ(20,"app-input",8),e.qZA(),e.TgZ(21,"div",7),e._UZ(22,"app-input",9),e.qZA(),e.qZA(),e.TgZ(23,"mat-card-actions",10),e.TgZ(24,"button",11),e.NdJ("click",function(){return n.addLecturePoint()}),e._UZ(25,"i",12),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.qZA(),e.qZA(),e.ynx(28),e.TgZ(29,"table",13),e.TgZ(30,"thead"),e.TgZ(31,"tr"),e.TgZ(32,"th"),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"th"),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"th"),e._uU(39,"actions"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(40,"tbody"),e.YNc(41,io,9,2,"tr",14),e.ALo(42,"paginate"),e.qZA(),e.TgZ(43,"div",15),e.YNc(44,ao,1,1,"pagination-controls",16),e.qZA(),e.qZA(),e.BQk(),e.qZA(),e.TgZ(45,"mat-tab",4),e.ALo(46,"translate"),e.TgZ(47,"form",5),e.TgZ(48,"div",0),e.TgZ(49,"div",7),e._UZ(50,"app-input",17),e.qZA(),e.TgZ(51,"div",7),e._UZ(52,"app-input",18),e.qZA(),e.TgZ(53,"div",7),e._UZ(54,"app-input",19),e.qZA(),e.qZA(),e.TgZ(55,"mat-card-actions",10),e.TgZ(56,"button",11),e.NdJ("click",function(){return n.addExamPoint()}),e._UZ(57,"i",12),e._uU(58),e.ALo(59,"translate"),e.qZA(),e.qZA(),e.qZA(),e.ynx(60),e.TgZ(61,"table",13),e.TgZ(62,"thead"),e.TgZ(63,"tr"),e.TgZ(64,"th"),e._uU(65),e.ALo(66,"translate"),e.qZA(),e.TgZ(67,"th"),e._uU(68),e.ALo(69,"translate"),e.qZA(),e.TgZ(70,"th"),e._uU(71),e.ALo(72,"translate"),e.qZA(),e.TgZ(73,"th"),e._uU(74),e.ALo(75,"translate"),e.qZA(),e.TgZ(76,"th"),e._uU(77,"actions"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(78,"tbody"),e.YNc(79,lo,13,5,"tr",14),e.ALo(80,"paginate"),e.qZA(),e.TgZ(81,"div",15),e.YNc(82,so,1,1,"pagination-controls",20),e.qZA(),e.qZA(),e.BQk(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(4),e.hij(" ",e.lcZ(5,31,"Navbar.Points")," "),e.xp6(2),e.Q6J("queryParams",e.VKq(61,uo,n.functionId)),e.xp6(1),e.hij(" ",e.lcZ(8,33,"General.Back")," "),e.xp6(7),e.s9C("label",e.lcZ(15,35,"Material.Lectures")),e.xp6(2),e.Q6J("formGroup",n.lecturesForm),e.xp6(4),e.Q6J("control",n.lecturesFormCtrls.attendancevalue)("submitted",n.lecsubmitted),e.xp6(2),e.Q6J("control",n.lecturesFormCtrls.absencevalue)("submitted",n.lecsubmitted),e.xp6(4),e.hij(" ",e.lcZ(27,37,"General.Add")," "),e.xp6(7),e.hij(" ",e.lcZ(34,39,"labels.AttendancePoints")," "),e.xp6(3),e.hij(" ",e.lcZ(37,41,"labels.AbsencePoints")," "),e.xp6(5),e.Q6J("ngForOf",e.xi3(42,43,n.lecturePoints,e.VKq(63,co,n.LecturePage)))("ngForTrackBy",n.track),e.xp6(3),e.Q6J("ngIf",(null==n.lecturePoints?null:n.lecturePoints.length)>9),e.xp6(1),e.s9C("label",e.lcZ(46,46,"Material.Exams")),e.xp6(2),e.Q6J("formGroup",n.ExamForm),e.xp6(3),e.Q6J("control",n.ExamFormCtrls.from)("submitted",n.ExamSubmitted),e.xp6(2),e.Q6J("control",n.ExamFormCtrls.to)("submitted",n.ExamSubmitted),e.xp6(2),e.Q6J("control",n.ExamFormCtrls.value)("submitted",n.ExamSubmitted),e.xp6(4),e.hij(" ",e.lcZ(59,48,"General.Add")," "),e.xp6(7),e.hij(" ",e.lcZ(66,50,"labels.ByQuestion")," "),e.xp6(3),e.hij(" ",e.lcZ(69,52,"labels.From")," "),e.xp6(3),e.hij(" ",e.lcZ(72,54,"labels.To")," "),e.xp6(3),e.hij(" ",e.lcZ(75,56,"labels.pointsNumber")," "),e.xp6(5),e.Q6J("ngForOf",e.xi3(80,58,n.ExamPoints,e.VKq(65,mo,n.ExamPage)))("ngForTrackBy",n.track),e.xp6(3),e.Q6J("ngIf",(null==n.ExamPoints?null:n.ExamPoints.length)>9))},directives:[k.a8,k.n5,Le.zs,ne.yS,k.dn,Rn.SP,Rn.uX,T._Y,T.JL,T.sg,f.O5,E.a,k.hq,Le.lW,f.sg,Dn.Hw,sn.LS],pipes:[K.X$,sn._s],styles:[""]}),i}();function go(i,s){1&i&&(e.TgZ(0,"th",19),e._uU(1,"#"),e.qZA())}function ho(i,s){if(1&i&&(e.TgZ(0,"td",20),e._uU(1),e.qZA()),2&i){var a=s.index;e.xp6(1),e.hij(" ",a+1," ")}}function _o(i,s){1&i&&(e.TgZ(0,"th",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.enName")," "))}function fo(i,s){if(1&i&&(e.TgZ(0,"td",20),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.Oqu(a.en_name)}}function vo(i,s){1&i&&(e.TgZ(0,"th",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.arName")," "))}function Zo(i,s){if(1&i&&(e.TgZ(0,"td",20),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.Oqu(a.ar_name)}}function Co(i,s){1&i&&(e.TgZ(0,"th",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"actions")))}function bo(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"a",24),e.NdJ("click",function(){e.CHM(a);var o=e.oxw(2).$implicit;return e.oxw(3).openDeleateDialog(o)}),e.ALo(1,"translate"),e._UZ(2,"i",25),e.qZA()}2&i&&e.s9C("matTooltip",e.lcZ(1,1,"General.Delete"))}function Ao(i,s){if(1&i&&(e.ynx(0),e.YNc(1,bo,3,3,"a",23),e.BQk()),2&i){var a=s.$implicit;e.xp6(1),e.Q6J("ngIf","Delete"===a.functionName)}}function To(i,s){if(1&i&&(e.TgZ(0,"td",20),e.YNc(1,Ao,2,1,"ng-container",22),e.qZA()),2&i){var a=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",a.rowFunctions)}}function xo(i,s){1&i&&e._UZ(0,"tr",26)}function Io(i,s){1&i&&e._UZ(0,"tr",27)}function yo(i,s){1&i&&e._UZ(0,"tr",28)}function qo(i,s){if(1&i&&(e.TgZ(0,"table",8),e.ynx(1,9),e.YNc(2,go,2,0,"th",10),e.YNc(3,ho,2,1,"td",11),e.BQk(),e.ynx(4,12),e.YNc(5,_o,3,3,"th",13),e.YNc(6,fo,2,1,"td",11),e.BQk(),e.ynx(7,14),e.YNc(8,vo,3,3,"th",13),e.YNc(9,Zo,2,1,"td",11),e.BQk(),e.ynx(10,15),e.YNc(11,Co,3,3,"th",10),e.YNc(12,To,2,1,"td",11),e.BQk(),e.YNc(13,xo,1,0,"tr",16),e.YNc(14,Io,1,0,"tr",17),e.YNc(15,yo,1,0,"tr",18),e.qZA()),2&i){var a=e.oxw(2);e.Q6J("dataSource",a.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",a.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns)}}function Fo(i,s){if(1&i&&e._UZ(0,"app-table-skeleton",29),2&i){var a=e.oxw(2);e.Q6J("displayedColumns",a.displayedColumns)}}var wo=function(){return[10]};function So(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"mat-card",1),e.TgZ(1,"mat-card-title"),e._UZ(2,"page-title",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return e.CHM(a),e.oxw().getDataFromHR()}),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.qZA(),e.TgZ(6,"mat-card-content"),e.TgZ(7,"div",4),e.YNc(8,qo,16,3,"table",5),e.TgZ(9,"mat-paginator",6),e.NdJ("page",function(g){return e.CHM(a),e.oxw().getAllDepartments(g.pageIndex+1)}),e.qZA(),e.qZA(),e.YNc(10,Fo,1,1,"ng-template",null,7,e.W1O),e.qZA(),e.qZA()}if(2&i){var n=e.MAs(11),o=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,7,"getFromHr")," "),e.xp6(4),e.Q6J("ngIf",o.isLoaded)("ngIfElse",n),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(9,wo))("length",o.itemsCounts)("pageSize",10)("disabled",!o.isLoaded)}}var Gn=function(){var i=function(){function s(a,n,o,r,g,v,x,w){var q=this;(0,j.Z)(this,s),this.departmentService=a,this.fb=n,this.toastr=o,this.spinner=r,this.dialog=g,this.route=v,this.authService=x,this.languageService=w,this.showAddOnly=!1,this.displayedColumns=["en_name","ar_name","actions"],this.itemsCounts=0,this.curPage=1,this.submitted=!1,this.isLoaded=!1,v.queryParamMap.subscribe(function(N){q.functionId=Number(N.get("functionId")),q.functionId&&q.authService.getUserRowFunctions(q.functionId).subscribe(function(L){L.length>0&&(q.rowFunctions=L)})}),this.EduCompId=Number(x.getEduCompId())}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){this.getAllDepartments(this.curPage),this.myForm=this.fb.group({id:[0],ar_name:["",[T.kI.required,Z.D.whiteSpace]],en_name:["",[T.kI.required,Z.D.whiteSpace]]})}},{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"ngAfterViewInit",value:function(){var n=this;this.authService.EduCompId.subscribe(function(o){n.EduCompId=o.EduCompId,n.getAllDepartments(1),n.dataSource.paginator=n.paginator}),this.dataSource&&(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)}},{key:"applyFilter",value:function(n){this.dataSource.filter=n.target.value.trim().toLowerCase()}},{key:"getAllDepartments",value:function(n){var o=this;this.curPage=n,this.isLoaded=!1,this.departmentService.getAllDepartments(n,this.EduCompId).subscribe(function(r){r&&(o.dataSource=new M.by(r.depratmentsList),o.itemsCounts=r.countItems,o.dataSource.sort=o.sort,o.isLoaded=!0)})}},{key:"onSubmit",value:function(){if(this.submitted=!0,this.myForm.valid){var n={};n.id=this.FormCtrls.id.value,n.ar_name=this.FormCtrls.ar_name.value,n.en_name=this.FormCtrls.en_name.value,n.EduCompId=this.EduCompId,this.spinner.show(),0==n.id?this.addDepartment(n):this.updateDepartment(n,n.id)}else this.toastr.error("General.FormNotValid")}},{key:"addDepartment",value:function(n){var o=this;this.departmentService.addDepartment(n).subscribe(function(r){1==r.returnValue?(o.getAllDepartments(1),o.dataSource.paginator=o.paginator,o.toastr.success("General.AddSuccessfully"),o.clearForm()):o.toastr.error(r.returnString),o.spinner.hide()})}},{key:"updateDepartment",value:function(n,o){var r=this;this.departmentService.editDepartment(n,o).subscribe(function(g){1==g.returnValue?(r.getAllDepartments(r.curPage),r.toastr.success("General.UpdateSuccessfully"),r.clearForm()):r.toastr.error(g.returnString),r.spinner.hide()})}},{key:"getDepartmentById",value:function(n){this.myForm.patchValue(n)}},{key:"deleteDepartment",value:function(n){var o=this;this.spinner.show(),this.departmentService.deleteDepartment(n.id).subscribe(function(r){1==r.returnValue?(o.toastr.success("General.DeleteSuccessfully"),1==o.dataSource.data.length&&o.curPage>1?(o.getAllDepartments(o.curPage-1),o.paginator.pageIndex=o.curPage-1):o.getAllDepartments(o.curPage),n.id==o.FormCtrls.id.value&&o.clearForm()):o.toastr.error(r.returnString),o.spinner.hide()})}},{key:"openDeleateDialog",value:function(n){var r,g,o=this;this.dialog.open(pe.F,{data:{msg:this.languageService.isArabic?null!==(r=n.ar_name)&&void 0!==r?r:n.en_name:null!==(g=n.en_name)&&void 0!==g?g:n.ar_name,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(v){v&&o.deleteDepartment(n)})}},{key:"clearForm",value:function(){this.myForm.reset(),this.FormCtrls.id.setValue(0),this.submitted=!1}},{key:"getDataFromHR",value:function(){var n=this;this.spinner.show(),this.departmentService.getDataFromHR(this.EduCompId).subscribe(function(o){n.spinner.hide(),o.List&&(n.getAllDepartments(1),n.toastr.success("copyHrSuccess"))})}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(Ot.n),e.Y36(T.qu),e.Y36(F.K),e.Y36(Q.t2),e.Y36(S.uw),e.Y36(ne.gz),e.Y36(Te.e),e.Y36(W.T))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-department"]],viewQuery:function(a,n){var o;1&a&&(e.Gf(qe.YE,5),e.Gf(Oe.NW,5)),2&a&&(e.iGM(o=e.CRH())&&(n.sort=o.first),e.iGM(o=e.CRH())&&(n.paginator=o.first))},inputs:{showAddOnly:"showAddOnly"},decls:1,vars:1,consts:[["class","admin-index-card",4,"ngIf"],[1,"admin-index-card"],["title","Departments.allDept"],[1,"orange-btn","radius-btn","get-from-hr","integration-btn","float-right","d-inline-block","mx-1","mb-2",3,"click"],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource",4,"ngIf","ngIfElse"],["showFirstLastButtons","","aria-label","Select page of departments","nex","",3,"pageSizeOptions","length","pageSize","disabled","page"],["loading",""],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","en_name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","ar_name"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],[4,"ngFor","ngForOf"],["class","danger",3,"matTooltip","click",4,"ngIf"],[1,"danger",3,"matTooltip","click"],[1,"fa","fa-trash","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[3,"displayedColumns"]],template:function(a,n){1&a&&e.YNc(0,So,12,10,"mat-card",0),2&a&&e.Q6J("ngIf",!n.showAddOnly)},directives:[f.O5,k.a8,k.n5,u.T,k.dn,Oe.NW,M.BZ,qe.YE,M.w1,M.fO,M.Dz,M.as,M.nj,M.Ee,M.ge,M.ev,qe.nU,f.sg,A.gM,M.XQ,M.Gk,Zt.I],pipes:[K.X$],styles:[""]}),i}(),en=h(2772),Uo=h(567),ko=h(3063);function Eo(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"app-diploma-card",12),e.NdJ("onDelete",function(){var v=e.CHM(a).$implicit;return e.oxw(2).openDeleteDialog(v)}),e.qZA(),e.qZA()}if(2&i){var n=s.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("diploma",n)("isAdmin",!0)("rowFunctions",o.rowFunctions)("functionId",o.functionId)}}var Nn=function(s){return{functionId:s}};function Vn(i,s){if(1&i&&(e.TgZ(0,"div",0),e.YNc(1,Eo,2,4,"div",8),e.TgZ(2,"div",9),e.TgZ(3,"button",10),e._UZ(4,"i",11),e.TgZ(5,"p"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i){var a=e.oxw();e.xp6(1),e.Q6J("ngForOf",a.diplomaList),e.xp6(2),e.Q6J("queryParams",e.VKq(5,Nn,a.functionId)),e.xp6(3),e.hij(" ",e.lcZ(7,3,"addNew"),"")}}function Do(i,s){1&i&&(e.TgZ(0,"div",14),e._UZ(1,"app-card-skeleton",15),e.qZA()),2&i&&(e.xp6(1),e.Q6J("height",290))}var tn=function(){return[]};function No(i,s){1&i&&(e.TgZ(0,"div",0),e.YNc(1,Do,2,1,"div",13),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngForOf",e.DdM(1,tn).constructor(4)))}var Hn=function(){var i=function(){function s(a,n,o,r,g,v,x,w,q){var N=this;(0,j.Z)(this,s),this.courseServ=a,this.authserv=o,this.spinner=r,this.msg=g,this.dialog=v,this.languageService=x,this.data=w,this.dialogRef=q,this.rowFunctions=null,this.isLoaded=!1,n.queryParamMap.subscribe(function(L){N.functionId=Number(L.get("functionId")),N.functionId&&N.authserv.getUserRowFunctions(N.functionId).subscribe(function(R){R.length>0&&(N.rowFunctions=R)})})}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){this.EduCompId=Number(this.authserv.getEduCompId()),this.getAllDiplomas()}},{key:"getAllDiplomas",value:function(){var n=this;this.courseServ.getAllDiploma().subscribe(function(o){o&&(n.isLoaded=!0,n.diplomaList=o)})}},{key:"openDeleteDialog",value:function(n){var o=this;this.dialog.open(pe.F,{data:{msg:this.languageService.isArabic?n.diploma_ar_name:n.diploma_en_name,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(g){g&&o.removeDiploma(n.id)})}},{key:"removeDiploma",value:function(n){var o=this;this.spinner.show(),this.courseServ.removeDiploma(n).subscribe(function(r){r&&(o.msg.success("General.DeleteSuccessfully"),o.getAllDiplomas()),o.spinner.hide()})}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(ze.N),e.Y36(ne.gz),e.Y36(Te.e),e.Y36(Q.t2),e.Y36(F.K),e.Y36(S.uw),e.Y36(W.T),e.Y36(S.WI,8),e.Y36(S.so,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-diploma"]],decls:10,vars:6,consts:[[1,"row"],[1,"col-12"],[1,"admin-index-card"],["title","course.Diplomas"],["url","/dashboard/setup/diploma/add","label","course.createDiploma",1,"float-right","d-inline-block","mb-2","mx-1","mt--5",3,"params","hideDefaultTitle"],[2,"max-height","94%"],["class","row",4,"ngIf","ngIfElse"],["loading",""],["class","col-lg-3 col-md-4 col-12 mb-3",4,"ngFor","ngForOf"],[1,"col-lg-3","col-md-4","col-12","mb-3"],["routerLink","/dashboard/setup/diploma/add",1,"dashed-btn",2,"height","290px",3,"queryParams"],[1,"ft-plus-circle"],[3,"diploma","isAdmin","rowFunctions","functionId","onDelete"],["class","col-lg-3 col-md-4 col-sm-6 col-12",4,"ngFor","ngForOf"],[1,"col-lg-3","col-md-4","col-sm-6","col-12"],[3,"height"]],template:function(a,n){if(1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card",2),e.TgZ(3,"mat-card-title"),e._UZ(4,"page-title",3),e._UZ(5,"create-new-btn",4),e.qZA(),e.TgZ(6,"mat-card-content",5),e.YNc(7,Vn,8,7,"div",6),e.YNc(8,No,2,2,"ng-template",null,7,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a){var o=e.MAs(9);e.xp6(5),e.Q6J("params",e.VKq(4,Nn,n.functionId))("hideDefaultTitle",!0),e.xp6(2),e.Q6J("ngIf",n.isLoaded)("ngIfElse",o)}},directives:[k.a8,k.n5,u.T,ln,k.dn,f.O5,f.sg,ne.rH,ko.k,Kt.Y],pipes:[K.X$],styles:[".coverPhoto[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;margin:10px}.mat-column-promoLink[_ngcontent-%COMP%]{max-width:100px!important;word-wrap:break-word!important;white-space:unset!important;-webkit-padding-end:15px;padding-inline-end:15px}.sm-action-col[_ngcontent-%COMP%]{min-width:60px}.dates[_ngcontent-%COMP%]{min-width:90px}"]}),i}(),Mo=h(2850),Qo=h(4724);function Jo(i,s){1&i&&(e.TgZ(0,"mat-option",7),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.Q6J("value",null),e.xp6(1),e.hij(" ",e.lcZ(2,2,"General.Choose")," "))}function Oo(i,s){if(1&i&&(e.TgZ(0,"mat-option",7),e._uU(1),e.qZA()),2&i){var o,a=s.$implicit,n=e.oxw();e.Q6J("value",a.id),e.xp6(1),e.hij(" ",n.languageService.isArabic?null!==(o=a.diploma_ar_name)&&void 0!==o?o:a.diploma_en_name:null!==(o=a.diploma_en_name)&&void 0!==o?o:a.diploma_ar_name," ")}}var Lo=function(){var i=function(){function s(a,n,o){(0,j.Z)(this,s),this.courseService=a,this.languageService=n,this.authService=o,this.multiple=!1,this.reload=!1,this.disable=!1,this.appearance=en.cm,this.EduCompId=Number(o.getEduCompId())}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){this.getAllDiploma()}},{key:"ngAfterViewInit",value:function(){var n=this;this.authService.EduCompId.subscribe(function(o){n.EduCompId=o.EduCompId,n.control.setValue(null),n.getAllDiploma()})}},{key:"ngOnChanges",value:function(n){var o,r;n.reload&&this.getAllDiploma(),(null===(o=n.disable)||void 0===o?void 0:o.currentValue)&&this.control.disable(),(null===(r=n.disable)||void 0===r?void 0:r.currentValue)||this.control.enable()}},{key:"getAllDiploma",value:function(){var n=this;this.courseService.getAllDiplomasDropDown(this.EduCompId).subscribe(function(o){o&&(n.diplomaList=o,n.reload=!1)})}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(ze.N),e.Y36(W.T),e.Y36(Te.e))},i.\u0275cmp=e.Xpm({type:i,selectors:[["diploma-dropdown"]],inputs:{control:"control",submitted:"submitted",multiple:"multiple",reload:"reload",disable:"disable",appearance:"appearance"},features:[e.TTD],decls:10,vars:12,consts:[[3,"dir"],[1,"input-label"],[3,"appearance"],[3,"formControl","multiple"],[3,"value",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"control","submitted","isSelect"],[3,"value"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"mat-label",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-form-field",2),e.TgZ(5,"mat-select",3),e.YNc(6,Jo,3,4,"mat-option",4),e.YNc(7,Oo,2,2,"mat-option",5),e.qZA(),e.TgZ(8,"mat-hint"),e._UZ(9,"input-validation-msg",6),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.Q6J("dir",n.languageService.isArabic?"rtl":"ltr"),e.xp6(2),e.Oqu(e.lcZ(3,10,"course.Diploma")),e.xp6(2),e.Q6J("appearance",n.appearance),e.xp6(1),e.Q6J("formControl",n.control)("multiple",n.multiple),e.xp6(1),e.Q6J("ngIf",!n.multiple),e.xp6(1),e.Q6J("ngForOf",n.diplomaList),e.xp6(2),e.Q6J("control",n.control)("submitted",n.submitted)("isSelect",!0))},directives:[hn.Lv,H.hX,H.KE,xt.gD,T.JJ,T.oH,f.O5,f.sg,H.bx,fe.p,pt.ey],pipes:[K.X$],styles:[""]}),i}(),bn=h(7861),Po=h(2368),Yo=function(){var i=function(){function s(){(0,j.Z)(this,s),this.labelPosition="before",this.disabled=!1,this.submitted=!1,this.color=en.Ac.primary,this.onChange=new e.vpe}return(0,Y.Z)(s,[{key:"ngOnChanges",value:function(n){var o,r,g,v;(null===(o=n.disabled)||void 0===o?void 0:o.currentValue)?null===(r=this.control)||void 0===r||r.disable():(null===(g=n.disabled)||void 0===g?void 0:g.currentValue)||null===(v=this.control)||void 0===v||v.enable()}},{key:"change",value:function(n){this.onChange.emit(n)}}]),s}();return i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["slide-toggle"]],inputs:{control:"control",label:"label",labelPosition:"labelPosition",disabled:"disabled",submitted:"submitted",class:"class",id:"id",color:"color"},outputs:{onChange:"onChange"},features:[e.TTD],decls:3,vars:9,consts:[[3,"formControl","color","id","labelPosition","change"]],template:function(a,n){1&a&&(e.TgZ(0,"mat-slide-toggle",0),e.NdJ("change",function(r){return n.change(r.checked)}),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&a&&(e.Tol(n.class),e.Q6J("formControl",n.control)("color",n.color)("id",n.id)("labelPosition",n.labelPosition),e.xp6(1),e.hij(" ",e.lcZ(2,7,n.label),"\n"))},directives:[Po.Rr,T.JJ,T.oH],pipes:[K.X$],styles:[".mat-slide-toggle .mat-slide-toggle-label{gap:5px 10px}  .mat-slide-toggle .mat-slide-toggle-content{font-size:14.5px;color:#437a9f;text-transform:none;text-transform:initial}  .mat-slide-toggle .mat-slide-toggle-bar{height:16px!important;background-color:#dcdfe6}  .mat-slide-toggle .mat-slide-toggle-thumb-container{top:1.6px;left:2px}  .mat-slide-toggle .mat-slide-toggle-thumb{height:12px!important;width:12px!important;position:absolute}  .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{left:5px}  .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#437a9f52!important}  .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb{background-color:#437a9f!important}"]}),i}(),Wn=h(3217),zn=function(){var i=function(){function s(a){(0,j.Z)(this,s),this.el=a,this.isDragging=!1,this.startX=0,this.startScrollX=0}return(0,Y.Z)(s,[{key:"onMouseDown",value:function(n){this.isDragging=!0,this.startX=n.clientX,this.startScrollX=this.el.nativeElement.scrollLeft}},{key:"onMouseUp",value:function(){this.isDragging=!1}},{key:"onMouseMove",value:function(n){this.isDragging&&(this.el.nativeElement.scrollLeft=this.startScrollX-(n.clientX-this.startX))}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(e.SBq))},i.\u0275dir=e.lG2({type:i,selectors:[["","appScrollableHorizontal",""]],hostBindings:function(a,n){1&a&&e.NdJ("mousedown",function(r){return n.onMouseDown(r)})("mouseup",function(){return n.onMouseUp()},!1,e.evT)("mousemove",function(r){return n.onMouseMove(r)},!1,e.evT)}}),i}();function jo(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"div",66),e.NdJ("click",function(){var v=e.CHM(a).$implicit;return e.oxw(2).onChaneMainCategory(v.id)}),e.TgZ(1,"span"),e.TgZ(2,"img",67),e.NdJ("error",function(g){e.CHM(a);var v=e.oxw(2);return v.fileService.onError(g,v.appAssets.categoryNoImg)}),e.qZA(),e.qZA(),e.TgZ(3,"span",68),e._uU(4),e.qZA(),e.qZA()}if(2&i){var n=s.$implicit,o=e.oxw(2);e.ekj("selected",o.isCategorySelected(n.id)),e.xp6(2),e.Q6J("src",o.fileService.previewPicture(n.attach_path),e.LSH),e.xp6(2),e.hij(" ",n.name," ")}}function Bo(i,s){if(1&i&&(e.TgZ(0,"div",64),e.YNc(1,jo,5,4,"div",65),e.qZA()),2&i){var a=e.oxw();e.xp6(1),e.Q6J("ngForOf",a.mainCategories)}}function Ro(i,s){1&i&&(e.TgZ(0,"div",71),e._UZ(1,"app-card-skeleton",72),e.qZA()),2&i&&(e.xp6(1),e.Q6J("height",107))}var Go=function(){return[]};function Vo(i,s){1&i&&(e.TgZ(0,"div",69),e.YNc(1,Ro,2,1,"div",70),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngForOf",e.DdM(1,Go).constructor(8)))}function Ho(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",73),e._uU(2),e.qZA(),e.BQk()),2&i){var a=s.$implicit;e.xp6(1),e.Q6J("value",a.id),e.xp6(1),e.hij(" ",a.name," ")}}function Wo(i,s){if(1&i&&(e.TgZ(0,"li",74),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.hij(" ",a," ")}}function zo(i,s){if(1&i&&(e.TgZ(0,"li",75),e._UZ(1,"app-input",76),e.qZA()),2&i){var a=e.oxw();e.xp6(1),e.Q6J("control",a.FormCtrls.learningOutcomes)("submitted",a.submitted)}}function $o(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"li",77),e.TgZ(1,"button",78),e.NdJ("click",function(){return e.CHM(a),e.oxw().addWhatWillLearn=!0}),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"i",79),e.qZA(),e.qZA()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"course.addNewOutcome")," \xa0 "))}function Ko(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"li",77),e.TgZ(1,"button",78),e.NdJ("click",function(){return e.CHM(a),e.oxw().saveNewLearn()}),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"i",79),e.qZA(),e.qZA()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.Save")," \xa0 "))}function Xo(i,s){1&i&&(e.TgZ(0,"span",80),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"course.EnterOneOneLearningOutcome")," "))}function er(i,s){1&i&&(e.TgZ(0,"th",90),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"course.department")," "))}function tr(i,s){if(1&i&&(e.TgZ(0,"td",91),e._uU(1),e.qZA()),2&i){var a=s.$implicit,n=e.oxw(2);e.xp6(1),e.hij(" ",n.languageService.isArabic?a.departmentArName:a.departmentEnName," ")}}function $n(i,s){1&i&&(e.TgZ(0,"th",90),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"course.jobTitle")," "))}function nr(i,s){if(1&i&&(e.TgZ(0,"td",91),e._uU(1),e.qZA()),2&i){var a=s.$implicit,n=e.oxw(2);e.xp6(1),e.hij(" ",n.languageService.isArabic?a.jobTitleArName:a.jobTitleEnName," ")}}function ir(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"mat-checkbox",94),e.NdJ("change",function(r){return e.CHM(a),e.oxw(3).selectAll(r.checked,!0)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){var n=e.oxw(3);e.Q6J("checked",n.isAllCheckboxSelectedBasic),e.xp6(1),e.hij(" ",e.lcZ(2,2,"all")," ")}}function ar(i,s){1&i&&(e._uU(0),e.ALo(1,"translate")),2&i&&e.hij(" ",e.lcZ(1,1,"all")," ")}function or(i,s){if(1&i&&(e.TgZ(0,"th",90),e.YNc(1,ir,3,4,"mat-checkbox",92),e.YNc(2,ar,2,3,"ng-template",null,93,e.W1O),e.qZA()),2&i){var a=e.MAs(3),n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==n.dataSourceBasic||null==n.dataSourceBasic.data?null:n.dataSourceBasic.data.length)>0)("ngIfElse",a)}}function rr(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"td",91),e.TgZ(1,"mat-checkbox",95),e.NdJ("change",function(r){var v=e.CHM(a).index;return e.oxw(2).changeCheckbox(r.checked,v,!0)}),e.qZA(),e.qZA()}if(2&i){var n=s.$implicit;e.xp6(1),e.Q6J("checked",n.checked)}}function lr(i,s){1&i&&e._UZ(0,"tr",96)}function sr(i,s){1&i&&e._UZ(0,"tr",97)}function ur(i,s){if(1&i&&(e.TgZ(0,"div",81),e.TgZ(1,"table",82),e.ynx(2,83),e.YNc(3,er,3,3,"th",84),e.YNc(4,tr,2,1,"td",85),e.BQk(),e.ynx(5,86),e.YNc(6,$n,3,3,"th",84),e.YNc(7,nr,2,1,"td",85),e.BQk(),e.ynx(8,87),e.YNc(9,or,4,2,"th",84),e.YNc(10,rr,2,1,"td",85),e.BQk(),e.YNc(11,lr,1,0,"tr",88),e.YNc(12,sr,1,0,"tr",89),e.qZA(),e.TgZ(13,"mat-hint",10),e._UZ(14,"input-validation-msg",11),e.qZA(),e.qZA()),2&i){var a=e.oxw();e.xp6(1),e.Q6J("dataSource",a.dataSourceBasic),e.xp6(10),e.Q6J("matHeaderRowDef",a.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns),e.xp6(2),e.Q6J("control",a.mandatoryJobCtrl)("submitted",a.submitted)("isSelect",!0)}}function dr(i,s){if(1&i&&e._UZ(0,"app-table-skeleton",98),2&i){var a=e.oxw();e.Q6J("displayedColumns",a.displayedColumns)}}function cr(i,s){1&i&&(e.TgZ(0,"th",90),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"course.department")," "))}function mr(i,s){if(1&i&&(e.TgZ(0,"td",91),e._uU(1),e.qZA()),2&i){var a=s.$implicit,n=e.oxw(2);e.xp6(1),e.hij(" ",n.languageService.isArabic?a.departmentArName:a.departmentEnName," ")}}function pr(i,s){1&i&&(e.TgZ(0,"th",90),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"course.jobTitle")," "))}function gr(i,s){if(1&i&&(e.TgZ(0,"td",91),e._uU(1),e.qZA()),2&i){var a=s.$implicit,n=e.oxw(2);e.xp6(1),e.hij(" ",n.languageService.isArabic?a.jobTitleArName:a.jobTitleEnName," ")}}function hr(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"mat-checkbox",94),e.NdJ("change",function(r){return e.CHM(a),e.oxw(3).selectAll(r.checked,!1)}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){var n=e.oxw(3);e.Q6J("checked",n.isAllCheckboxSelectedRecommended),e.xp6(1),e.hij(" ",e.lcZ(2,2,"all")," ")}}function _r(i,s){1&i&&(e._uU(0),e.ALo(1,"translate")),2&i&&e.hij(" ",e.lcZ(1,1,"all")," ")}function fr(i,s){if(1&i&&(e.TgZ(0,"th",90),e.YNc(1,hr,3,4,"mat-checkbox",92),e.YNc(2,_r,2,3,"ng-template",null,93,e.W1O),e.qZA()),2&i){var a=e.MAs(3),n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==n.dataSourceRecommended||null==n.dataSourceRecommended.data?null:n.dataSourceRecommended.data.length)>0)("ngIfElse",a)}}function vr(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"td",91),e.TgZ(1,"mat-checkbox",95),e.NdJ("change",function(r){var v=e.CHM(a).index;return e.oxw(2).changeCheckbox(r.checked,v,!1)}),e.qZA(),e.qZA()}if(2&i){var n=s.$implicit;e.xp6(1),e.Q6J("checked",n.checked)}}function Zr(i,s){1&i&&e._UZ(0,"tr",96)}function Cr(i,s){1&i&&e._UZ(0,"tr",97)}function br(i,s){if(1&i&&(e.TgZ(0,"div",81),e.TgZ(1,"table",82),e.ynx(2,83),e.YNc(3,cr,3,3,"th",84),e.YNc(4,mr,2,1,"td",85),e.BQk(),e.ynx(5,86),e.YNc(6,pr,3,3,"th",84),e.YNc(7,gr,2,1,"td",85),e.BQk(),e.ynx(8,87),e.YNc(9,fr,4,2,"th",84),e.YNc(10,vr,2,1,"td",85),e.BQk(),e.YNc(11,Zr,1,0,"tr",88),e.YNc(12,Cr,1,0,"tr",89),e.qZA(),e.TgZ(13,"mat-hint",10),e._UZ(14,"input-validation-msg",11),e.qZA(),e.qZA()),2&i){var a=e.oxw();e.xp6(1),e.Q6J("dataSource",a.dataSourceRecommended),e.xp6(10),e.Q6J("matHeaderRowDef",a.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns),e.xp6(2),e.Q6J("control",a.recommendedJobCtrl)("submitted",a.submitted)("isSelect",!0)}}function Ar(i,s){if(1&i&&e._UZ(0,"app-table-skeleton",98),2&i){var a=e.oxw();e.Q6J("displayedColumns",a.displayedColumns)}}var Kn=function(s){return{functionId:s}};function Tr(i,s){if(1&i&&(e.TgZ(0,"button",99),e.TgZ(1,"span",100),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA()),2&i){var a=e.oxw();e.Q6J("routerLink",a.backBtnUrl)("queryParams",e.VKq(5,Kn,a.functionId)),e.xp6(2),e.hij(" ",e.lcZ(3,3,"General.cancel")," ")}}function xr(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"button",101),e.NdJ("click",function(){e.CHM(a);var o=e.oxw();return o.stepIndex=o.stepIndex-1}),e.TgZ(1,"span",100),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.Back")," "))}function Ir(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"button",102),e.NdJ("click",function(){e.CHM(a);var o=e.oxw();return o.stepIndex=o.stepIndex+1}),e.TgZ(1,"span",100),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.Next")," "))}function yr(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"button",102),e.NdJ("click",function(){return e.CHM(a),e.oxw().onSubmit()}),e.TgZ(1,"span",100),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA()}if(2&i){var n=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,1,0==n.courseId?"General.Create":"General.Update")," ")}}var qr=function(s){return{"margin-top":s}},Xn=function(){var i=function(){function s(a,n,o,r,g,v,x,w,q,N,L,R,le,ke,Ee){var ie=this;(0,j.Z)(this,s),this.courseServ=a,this.jobServ=n,this.categoriesService=o,this.ar=r,this.fb=g,this.msg=v,this.fileService=x,this.spinner=w,this.authserv=q,this.router=N,this.datePipe=L,this.languageService=R,this.dialog=le,this.appAssets=ke,this.appConstants=Ee,this.courseId=0,this.isLoadedMainCategories=!1,this.submitted=!1,this.imageChange=!1,this.removeImage=0,this.currentDate=new Date,this.reloadDiploma=!1,this.appearance=en.cm,this.stepIndex=0,this.isLoadedBasic=!0,this.isLoadedRecommended=!0,this.displayedColumns=["course.department","course.jobTitle","all"],this.whatWillLearn=[],this.addWhatWillLearn=!1,this.isFromRequestPage=0,this.svgManager=new Jt.E,this.isAllCheckboxSelectedBasic=!1,this.isAllCheckboxSelectedRecommended=!1,this.followDiplomaRadioList=[{label:"course.Independent",value:!1},{label:"course.InDiploma",value:!0}],(0,Uo.D)([this.authserv.chechAuthorization("categories"),this.authserv.chechAuthorization("diploma")]).subscribe(function(Be){1==Be[0].returnValue&&(ie.showAddCategoryButton=Be[0].returnString),1==Be[1].returnValue&&(ie.showAddDiplomaButton=Be[1].returnString)}),r.queryParamMap.subscribe(function(Be){ie.functionId=Number(Be.get("functionId"))}),r.paramMap.subscribe(function(Be){ie.isFromRequestPage=Number(Be.get("isFromRequestPage")),ie.backBtnUrl=1==ie.isFromRequestPage?"/dashboard/setup/course/teaching-request":"/dashboard/setup/course/index";var We=Number(Be.get("courseId"));We&&(ie.courseId=We,w.show(),ie.courseServ.getCourseById(ie.courseId).subscribe(function(lt){var gt,et,tt,nt,st,D,y;if(lt){ie.course=lt,ie.myForm.patchValue(ie.course),null===(gt=ie.FormCtrls.subCourse_attach)||void 0===gt||gt.setValue(ie.course.attach_path),lt.attach_path&&(ie.savedFile={name:ie.course.attach_name,size:ie.course.attach_size,date:ie.course.attach_date,type:"image/"});var P=null===(et=ie.course.course_categories[0])||void 0===et?void 0:et.main_catId;null===(tt=ie.FormCtrls.mainCategoryId)||void 0===tt||tt.setValue(P),ie.onChaneMainCategory(P,!0),null===(nt=ie.FormCtrls.courseDuration)||void 0===nt||nt.setValue("".concat(Math.floor(ie.course.subCourseMinutes/60),":").concat(ie.course.subCourseMinutes%60));var G=[];null===(st=ie.course.department)||void 0===st||st.forEach(function(Ue){var oe=G.findIndex(function(Ce){return Ce.id==Ue.id});-1==oe?G.push(Ue):G[oe].jobTitle.push(Ue.jobTitle[0])}),ie.course.department=G,ie.whatWillLearn=null!==(D=ie.course.learning_outcomes)&&void 0!==D?D:[];var z=[],X=[],_e=[],De=[];null===(y=ie.course.department)||void 0===y||y.forEach(function(Ue){var oe;null===(oe=Ue.jobTitle)||void 0===oe||oe.forEach(function(Ce){Ce.is_mandatory?(z.push(Ue.id),_e.push(Ce.depJobId),ie.mandatoryDeptCtrl.setValue(z),ie.onSelectDepartment(Ce.is_mandatory,!0),ie.mandatoryJobCtrl.setValue(_e)):(X.push(Ue.id),De.push(Ce.depJobId),ie.recommendedDeptCtrl.setValue(X),ie.onSelectDepartment(Ce.is_mandatory,!0),ie.recommendedJobCtrl.setValue(De))})}),1==ie.isFromRequestPage&&(ie.FormCtrls.isArabic.setValue(!1),ie.FormCtrls.isEnglish.setValue(!1)),w.hide()}}))}),this.eduCompId=Number(q.getEduCompId())}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){var n=this;this.myForm=this.fb.group({subCourse_ar_name:["",[T.kI.required,Z.D.whiteSpace]],subCourse_en_name:["",[T.kI.required,Z.D.whiteSpace]],Diploma_id:[null],mainCategoryId:[null,[T.kI.required]],subCategoryIds:[{value:[],disabled:!0},[T.kI.required]],subjectPromoVideoPath:[""],subCourse_attach:[null],mandatoryFor:this.fb.group({department:["",[T.kI.required]],jobTitle:[[],[T.kI.required]]}),recommendedFor:this.fb.group({department:["",[T.kI.required]],jobTitle:[[],[T.kI.required]]}),subjectDescription:[""],from_date:[null],to_date:[null],isArabic:[!1,[T.kI.required]],isEnglish:[!1,[T.kI.required]],isFollow:[!1,[T.kI.required]],courseDuration:["",[T.kI.required,T.kI.pattern(this.appConstants.hourMinutesPattern)]],CourseCertificate:[!1,[T.kI.required]],learningOutcomes:[""]},{validator:Z.D.dateBefore("from_date","to_date")}),this.FormCtrls.subCourse_attach.valueChanges.subscribe(function(o){o&&(n.removeImage=0,n.imageChange=!0)}),this.mandatoryDeptCtrl.valueChanges.subscribe(function(o){n.onSelectDepartment(!0)}),this.recommendedDeptCtrl.valueChanges.subscribe(function(o){n.onSelectDepartment(!1)}),this.getAllCategories()}},{key:"ngAfterViewInit",value:function(){var n=this;this.authserv.EduCompId.subscribe(function(o){n.eduCompId=o.EduCompId,n.getAllCategories()})}},{key:"getAllCategories",value:function(){var n=this;this.categoriesService.getCategories().subscribe(function(o){o&&(n.mainCategories=o.MainCategories),n.isLoadedMainCategories=!0})}},{key:"getAllSubCategories",value:function(n){var o=this;this.spinner.show(),this.categoriesService.getAllSubCategoriesByMainId(n).subscribe(function(r){r&&(o.subCategories=r.SubCategories),o.spinner.hide()})}},{key:"onChaneMainCategory",value:function(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(!this.isCategorySelected(n)||o)&&(this.FormCtrls.mainCategoryId.setValue(n),this.FormCtrls.subCategoryIds.setValue(null),n>0?(this.getAllSubCategories(n),this.FormCtrls.subCategoryIds.enable(),o&&this.FormCtrls.subCategoryIds.setValue(this.course.course_categories.map(function(r){return r.id}))):this.FormCtrls.subCategoryIds.disable())}},{key:"isCategorySelected",value:function(n){return this.FormCtrls.mainCategoryId.value==n}},{key:"onChangeIsFollow",value:function(n){var o,r,g,v,x,w,q,N;n?(null===(r=null===(o=this.FormCtrls)||void 0===o?void 0:o.Diploma_id)||void 0===r||r.setValidators([T.kI.required]),null===(v=null===(g=this.FormCtrls)||void 0===g?void 0:g.Diploma_id)||void 0===v||v.updateValueAndValidity()):(null===(w=null===(x=this.FormCtrls)||void 0===x?void 0:x.Diploma_id)||void 0===w||w.clearValidators(),null===(N=null===(q=this.FormCtrls)||void 0===q?void 0:q.Diploma_id)||void 0===N||N.updateValueAndValidity())}},{key:"onChangeLanguage",value:function(n,o){1==o?this.FormCtrls.isArabic.setValue(n.checked):2==o&&this.FormCtrls.isEnglish.setValue(n.checked)}},{key:"onSelectDepartment",value:function(n){var g,v,x,w,q,N,o=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n?(this.isLoadedBasic=!1,null===(g=this.mandatoryJobCtrl)||void 0===g||g.setValue(""),(null===(v=this.mandatoryDeptCtrl)||void 0===v?void 0:v.value.length)>0?this.jobServ.getSpecificJobTitlesByDepartmentIds({ids:null===(x=this.mandatoryDeptCtrl)||void 0===x?void 0:x.value}).subscribe(function(L){L&&(o.mandatoryJobTitles=L,L.map(function(R){return R.checked=!1}),o.dataSourceBasic=new M.by(L),o.isAllCheckboxSelectedBasic=!1,o.isLoadedBasic=!0,r&&o.dataSourceBasic.data.forEach(function(R){return R.checked=o.mandatoryJobCtrl.value.includes(R.id)}),o.updateContentOfTables(!0,!0))}):(this.mandatoryJobTitles=[],this.dataSourceBasic=new M.by([]),this.isLoadedBasic=!0)):(this.isLoadedRecommended=!1,null===(w=this.recommendedJobCtrl)||void 0===w||w.setValue(""),(null===(q=this.recommendedDeptCtrl)||void 0===q?void 0:q.value.length)>0?this.jobServ.getSpecificJobTitlesByDepartmentIds({ids:null===(N=this.recommendedDeptCtrl)||void 0===N?void 0:N.value}).subscribe(function(L){L&&(o.recommendedJobTitles=L,L.map(function(R){return R.checked=!1}),o.dataSourceRecommended=new M.by(L),o.isAllCheckboxSelectedRecommended=!1,o.isLoadedRecommended=!0,r&&o.dataSourceRecommended.data.forEach(function(R){return R.checked=o.recommendedJobCtrl.value.includes(R.id)}),o.updateContentOfTables(!0,!0))}):(this.recommendedJobTitles=[],this.dataSourceRecommended=new M.by([]),this.isLoadedRecommended=!0))}},{key:"changeCheckbox",value:function(n,o,r){r?this.dataSourceBasic.data[o].checked=n:this.dataSourceRecommended.data[o].checked=n,this.updateSelectAllChackBox(r),this.updateJobFormValue(r),this.updateContentOfTables(r)}},{key:"updateSelectAllChackBox",value:function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!n;n&&(this.isAllCheckboxSelectedBasic=this.dataSourceBasic.data.every(function(r){return r.checked})),o&&(this.isAllCheckboxSelectedRecommended=this.dataSourceRecommended.data.every(function(r){return r.checked}))}},{key:"selectAll",value:function(n,o){o?(this.isAllCheckboxSelectedBasic=n,this.dataSourceBasic.data.forEach(function(r){r.checked=n})):(this.isAllCheckboxSelectedRecommended=n,this.dataSourceRecommended.data.forEach(function(r){r.checked=n})),this.updateJobFormValue(o),this.updateContentOfTables(o)}},{key:"updateJobFormValue",value:function(n){var o,r;if(n){var g=null===(o=this.dataSourceBasic)||void 0===o?void 0:o.data.filter(function(x){return x.checked}).map(function(x){return x.id});this.mandatoryJobCtrl.setValue(null!=g?g:[])}else{var v=null===(r=this.dataSourceRecommended)||void 0===r?void 0:r.data.filter(function(x){return x.checked}).map(function(x){return x.id});this.recommendedJobCtrl.setValue(null!=v?v:[])}}},{key:"updateContentOfTables",value:function(n){var g,v,x,w,o=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!n;n&&(this.dataSourceRecommended=new M.by(null!==(v=null===(g=this.recommendedJobTitles)||void 0===g?void 0:g.filter(function(q){return!o.mandatoryJobCtrl.value.includes(q.id)}))&&void 0!==v?v:[])),r&&(this.dataSourceBasic=new M.by(null!==(w=null===(x=this.mandatoryJobTitles)||void 0===x?void 0:x.filter(function(q){return!o.recommendedJobCtrl.value.includes(q.id)}))&&void 0!==w?w:[])),this.updateSelectAllChackBox(!0,!0)}},{key:"saveNewLearn",value:function(){this.myForm.value.learningOutcomes&&(this.whatWillLearn.push(this.myForm.value.learningOutcomes),this.addWhatWillLearn=!1,this.FormCtrls.learningOutcomes.setValue(null))}},{key:"addCourse",value:function(n){var o=this;this.spinner.show(),this.courseServ.addCourse(n).subscribe(function(r){1==(null==r?void 0:r.returnValue)?(o.msg.success("General.AddSuccessfully"),o.router.navigate(["dashboard/setup/course/course-structure/".concat(r.courseId)],{queryParams:{functionId:o.functionId}})):o.msg.error(null==r?void 0:r.returnString),o.spinner.hide()})}},{key:"updateCourse",value:function(n){var o=this;this.imageChange||(n.subCourse_attach=null),this.spinner.show(),this.courseServ.updateCourse(this.courseId,n).subscribe(function(r){1==(null==r?void 0:r.returnValue)?(o.msg.success("General.UpdateSuccessfully"),o.router.navigate([o.backBtnUrl],{queryParams:{functionId:o.functionId}})):o.msg.error(null==r?void 0:r.returnString),o.spinner.hide()})}},{key:"onSubmit",value:function(){var n,o,r,g,v,x;if(this.submitted=!0,(null===(n=this.FormCtrls)||void 0===n?void 0:n.isArabic.value)||this.FormCtrls.isEnglish.value)if(this.myForm.valid&&0!=this.whatWillLearn.length){var w={subCourse_ar_name:this.FormCtrls.subCourse_ar_name.value,subCourse_en_name:this.FormCtrls.subCourse_en_name.value,Diploma_id:this.FormCtrls.Diploma_id.value,from_date:this.datePipe.transform(null!==(r=null===(o=this.FormCtrls.from_date)||void 0===o?void 0:o.value)&&void 0!==r?r:this.currentDate),to_date:this.datePipe.transform(null===(g=this.FormCtrls.to_date)||void 0===g?void 0:g.value),subCourseDepJobTitle:[],subCourse_attach:this.FormCtrls.subCourse_attach.value,promoLink:this.FormCtrls.subjectPromoVideoPath.value,subjectDescription:this.FormCtrls.subjectDescription.value,eduCompId:this.eduCompId,isArabic:this.FormCtrls.isArabic.value,isEnglish:this.FormCtrls.isEnglish.value,isFollow:this.FormCtrls.isFollow.value,courseHours:Number(this.FormCtrls.courseDuration.value.split(":")[0]),courseMinutes:Number(this.FormCtrls.courseDuration.value.split(":")[1]),courseCertificate:this.FormCtrls.CourseCertificate.value,remove_image:this.removeImage,learningOutComes:this.whatWillLearn,subCategoryIds:this.FormCtrls.subCategoryIds.value},q=[];null===(v=this.mandatoryJobCtrl)||void 0===v||v.value.forEach(function(N){q.push({is_mandatory:1,depJobId:N})}),null===(x=this.recommendedJobCtrl)||void 0===x||x.value.forEach(function(N){q.push({is_mandatory:0,depJobId:N})}),w.subCourseDepJobTitle=q,0==this.courseId?this.addCourse(w):this.updateCourse(w)}else this.msg.error("General.FormNotValid");else this.msg.warning("General.MustChooseLanguage")}},{key:"openAddCategoryDialog",value:function(){var n=this;this.dialog.open(On,{data:{showAddOnly:!0},minWidth:"60vw",disableClose:!0}).afterClosed().subscribe(function(){n.getAllCategories()})}},{key:"openAddDeplomaDialog",value:function(){var n=this;this.dialog.open(Hn,{data:{showAddOnly:!0},disableClose:!0}).afterClosed().subscribe(function(){n.reloadDiploma=!n.reloadDiploma})}},{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"mandatoryDeptCtrl",get:function(){return this.myForm.get("mandatoryFor.department")}},{key:"mandatoryJobCtrl",get:function(){return this.myForm.get("mandatoryFor.jobTitle")}},{key:"recommendedDeptCtrl",get:function(){return this.myForm.get("recommendedFor.department")}},{key:"recommendedJobCtrl",get:function(){return this.myForm.get("recommendedFor.jobTitle")}},{key:"RemoveFile",value:function(){this.removeImage=1,this.course&&(this.course.attach_path=null),this.FormCtrls.subCourse_attach.setValue(null)}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(ze.N),e.Y36(At._),e.Y36(cn.G),e.Y36(ne.gz),e.Y36(T.qu),e.Y36(F.K),e.Y36(ae.f),e.Y36(Q.t2),e.Y36(Te.e),e.Y36(ne.F0),e.Y36(f.uU),e.Y36(W.T),e.Y36(S.uw),e.Y36(Ne.U),e.Y36(Mo.$))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-course"]],decls:123,vars:116,consts:[[1,"row"],[1,"col-12"],[1,"admin-index-card","add-course-card"],["parentTitle","course.courses","addTitle","addNew","editTitle","Edit",3,"id","subTitle","parentTitleLink","parentLinkParams"],[1,"dark-blue",3,"percentage"],[1,"row","step-one"],[1,"col-12","p-0"],[1,"overflow-hidden",3,"formGroup"],[1,"input-label","d-inline-block","mbottom-6"],["class","categories-cards","appScrollableHorizontal","",4,"ngIf","ngIfElse"],[1,"hint-error"],[3,"control","submitted","isSelect"],["loadingCategories",""],[1,"col-lg-11","col-12"],[1,"col-lg-4","col-md-6","col-12"],["label","labels.enName",3,"control","submitted"],["label","labels.arName",3,"control","submitted"],[1,"col-lg-4","col-md-6","col-12",3,"dir"],[1,"input-label"],[3,"appearance"],["formControlName","subCategoryIds","multiple",""],[4,"ngFor","ngForOf"],["label","course.promo",3,"control","submitted"],["accept","image/*","htmlId","cover-photo","upperLabel","course.coverPhoto","icon","fas fa-cloud-upload-alt",3,"control","removeFile","fileObject","onDelete","onChange"],[1,"col-lg-4","col-md-6","col-12","ptop-20"],["label","course.existence",3,"control","radioList","submitted","onChange"],[3,"disable","control","submitted","reload"],[1,"col-lg-4","col-md-6","col-12","time-input"],["label","course.courseDuration","placeholder","hh:mm",3,"control","submitted","svgIcon"],[1,"row","m-0",2,"gap","5px 10px"],[1,"radio-label","roboto-bold","label-check","d-flex","align-items-center","text-capitalize"],[1,"flex-grow-1","radio-group"],[1,"row","justify-content-around"],[3,"checked","change"],[1,"col-lg-8","col-md-6","col-12"],["label","course.courseDetails",3,"control","submitted"],["label","labels.FromDate",3,"control","submitted"],["label","labels.ToDate",3,"control","submitted"],[1,"col-lg-4","col-md-6","col-12","certificate"],["label","course.HasCertificate",3,"control","submitted"],[1,"row","second-step"],[3,"formGroup"],[1,"list-group","customeLG"],["class","list-group-item",4,"ngFor","ngForOf"],["class","list-group-item hasInput",4,"ngIf"],["class","list-group-item hasBtn",4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"row","third-step"],[1,"row","overflow-hidden","pbottom-2"],[1,"col-md","col-12","basic-jobs"],["formGroupName","mandatoryFor",1,"row"],[1,"col-sm-7","col-12"],[3,"control","submitted","multiple"],[1,"input-label","job-title-label"],["class","mat-elevation-z8 f-w","appScrollableHorizontal","",4,"ngIf","ngIfElse"],["loadingBasic",""],[1,"col-md","col-12","recommended-jobs"],["formGroupName","recommendedFor",1,"row"],["loadingRecommended",""],["align","end",1,"pt-0",3,"ngStyle"],["class","dark-blue-btn radius-btn cancel-btn",3,"routerLink","queryParams",4,"ngIf"],["class","dark-blue-btn radius-btn cancel-btn",3,"click",4,"ngIf"],["class","orange-btn radius-btn next-btn",3,"click",4,"ngIf"],[1,"clearfix"],["appScrollableHorizontal","",1,"categories-cards"],["class","item",3,"selected","click",4,"ngFor","ngForOf"],[1,"item",3,"click"],["width","64","height","64",3,"src","error"],[1,"text","roboto-bold","d-block"],[1,"row","overflow-hidden","flex-nowrap",2,"gap","16px"],["style","min-width: 130px",4,"ngFor","ngForOf"],[2,"min-width","130px"],[3,"height"],[3,"value"],[1,"list-group-item"],[1,"list-group-item","hasInput"],[3,"control","submitted"],[1,"list-group-item","hasBtn"],[1,"btn","btn-transparent",3,"click"],[1,"icon-plus"],[1,"text-danger"],["appScrollableHorizontal","",1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","course.department"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","course.jobTitle"],["matColumnDef","all"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["class","mright-8 mleft-8","labelPosition","before",3,"checked","change",4,"ngIf","ngIfElse"],["noData",""],["labelPosition","before",1,"mright-8","mleft-8",3,"checked","change"],[1,"td-checkbox",3,"checked","change"],["mat-header-row",""],["mat-row",""],[3,"displayedColumns"],[1,"dark-blue-btn","radius-btn","cancel-btn",3,"routerLink","queryParams"],[1,"text-btn"],[1,"dark-blue-btn","radius-btn","cancel-btn",3,"click"],[1,"orange-btn","radius-btn","next-btn",3,"click"]],template:function(a,n){if(1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card",2),e.TgZ(3,"mat-card-title"),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"div"),e._UZ(6,"progress-bar",4),e.qZA(),e.TgZ(7,"mat-card-content"),e.TgZ(8,"div",5),e.TgZ(9,"div",6),e.TgZ(10,"form",7),e.TgZ(11,"div",0),e.TgZ(12,"div",1),e.TgZ(13,"mat-label",8),e._uU(14),e.ALo(15,"titlecase"),e.ALo(16,"translate"),e.qZA(),e.YNc(17,Bo,2,1,"div",9),e.TgZ(18,"mat-hint",10),e._UZ(19,"input-validation-msg",11),e.qZA(),e.YNc(20,Vo,2,2,"ng-template",null,12,e.W1O),e.qZA(),e.TgZ(22,"div",13),e.TgZ(23,"div",0),e.TgZ(24,"div",14),e._UZ(25,"app-input",15),e.qZA(),e.TgZ(26,"div",14),e._UZ(27,"app-input",16),e.qZA(),e.TgZ(28,"div",17),e.TgZ(29,"mat-label",18),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"mat-form-field",19),e.TgZ(33,"mat-select",20),e.YNc(34,Ho,3,2,"ng-container",21),e.qZA(),e.TgZ(35,"mat-hint"),e._UZ(36,"input-validation-msg",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"div",14),e._UZ(38,"app-input",22),e.qZA(),e.TgZ(39,"div",14),e.TgZ(40,"app-button-file-input-new",23),e.NdJ("onDelete",function(){return n.RemoveFile()})("onChange",function(){return n.savedFile=null}),e.qZA(),e.qZA(),e.TgZ(41,"div",24),e.TgZ(42,"app-radio-button",25),e.NdJ("onChange",function(x){return n.onChangeIsFollow(x)}),e.qZA(),e.qZA(),e.TgZ(43,"div",14),e._UZ(44,"diploma-dropdown",26),e.qZA(),e.TgZ(45,"div",27),e._UZ(46,"app-input",28),e.qZA(),e.TgZ(47,"div",24),e.TgZ(48,"div",29),e.TgZ(49,"label",30),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.TgZ(52,"div",31),e.TgZ(53,"section",32),e.TgZ(54,"mat-checkbox",33),e.NdJ("change",function(x){return n.onChangeLanguage(x,1)}),e._uU(55),e.ALo(56,"titlecase"),e.ALo(57,"translate"),e.qZA(),e.TgZ(58,"mat-checkbox",33),e.NdJ("change",function(x){return n.onChangeLanguage(x,2)}),e._uU(59),e.ALo(60,"titlecase"),e.ALo(61,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(62,"div",34),e._UZ(63,"app-text-editor",35),e.qZA(),e.TgZ(64,"div",14),e.TgZ(65,"div",0),e.TgZ(66,"div",1),e._UZ(67,"app-datepicker",36),e.qZA(),e.TgZ(68,"div",1),e._UZ(69,"app-datepicker",37),e.qZA(),e.qZA(),e.qZA(),e.TgZ(70,"div",38),e._UZ(71,"slide-toggle",39),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(72,"div",40),e.TgZ(73,"div",6),e.TgZ(74,"form",41),e.TgZ(75,"mat-label",18),e._uU(76),e.ALo(77,"translate"),e.qZA(),e.TgZ(78,"ul",42),e.YNc(79,Wo,2,1,"li",43),e.YNc(80,zo,2,2,"li",44),e.YNc(81,$o,5,3,"li",45),e.YNc(82,Ko,5,3,"li",45),e.qZA(),e.TgZ(83,"mat-hint",10),e.YNc(84,Xo,3,3,"span",46),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(85,"div",47),e.TgZ(86,"div",1),e.TgZ(87,"form",41),e.TgZ(88,"div",48),e.TgZ(89,"div",49),e.TgZ(90,"h5"),e._uU(91),e.ALo(92,"translate"),e.qZA(),e.TgZ(93,"div",50),e.TgZ(94,"div",51),e._UZ(95,"department-dropdown",52),e.qZA(),e.TgZ(96,"div",1),e.TgZ(97,"mat-label",53),e._uU(98),e.ALo(99,"translate"),e.qZA(),e.YNc(100,ur,15,6,"div",54),e.YNc(101,dr,1,1,"ng-template",null,55,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.TgZ(103,"div",56),e.TgZ(104,"h5"),e._uU(105),e.ALo(106,"translate"),e.qZA(),e.TgZ(107,"div",57),e.TgZ(108,"div",51),e._UZ(109,"department-dropdown",52),e.qZA(),e.TgZ(110,"div",1),e.TgZ(111,"mat-label",53),e._uU(112),e.ALo(113,"translate"),e.qZA(),e.YNc(114,br,15,6,"div",54),e.YNc(115,Ar,1,1,"ng-template",null,58,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(117,"mat-card-actions",59),e.YNc(118,Tr,4,7,"button",60),e.YNc(119,xr,4,3,"button",61),e.YNc(120,Ir,4,3,"button",62),e.YNc(121,yr,4,3,"button",62),e.qZA(),e._UZ(122,"div",63),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a){var o=e.MAs(21),r=e.MAs(102),g=e.MAs(116);e.xp6(4),e.Q6J("id",n.courseId)("subTitle",0==n.stepIndex?"course.fillTheGeneralInformationAboutNewCouse":1==n.stepIndex?"course.addLearningOutcomes":"course.selectTargetDepartmentsJobTitles")("parentTitleLink",n.backBtnUrl)("parentLinkParams",e.VKq(112,Kn,n.functionId)),e.xp6(1),e.Udp("margin-bottom",0==n.stepIndex?"10px":"20px"),e.xp6(1),e.Q6J("percentage",0==n.stepIndex?33.3:1==n.stepIndex?66.6:100),e.xp6(2),e.ekj("hidden",0!=n.stepIndex),e.xp6(2),e.Q6J("formGroup",n.myForm),e.xp6(4),e.hij(" ",e.lcZ(15,86,e.lcZ(16,88,"course.selectCourseCategory"))," "),e.xp6(3),e.Q6J("ngIf",n.isLoadedMainCategories)("ngIfElse",o),e.xp6(2),e.Q6J("control",n.FormCtrls.mainCategoryId)("submitted",n.submitted)("isSelect",!0),e.xp6(6),e.Q6J("control",n.FormCtrls.subCourse_en_name)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.FormCtrls.subCourse_ar_name)("submitted",n.submitted),e.xp6(1),e.Q6J("dir",n.languageService.isArabic?"rtl":"ltr"),e.xp6(2),e.hij(" ",e.lcZ(31,90,"categories.subCategory")," "),e.xp6(2),e.Q6J("appearance",n.appearance),e.xp6(2),e.Q6J("ngForOf",n.subCategories),e.xp6(2),e.Q6J("control",n.FormCtrls.subCategoryIds)("submitted",n.submitted)("isSelect",!0),e.xp6(2),e.Q6J("control",n.FormCtrls.subjectPromoVideoPath)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.FormCtrls.subCourse_attach)("removeFile",n.removeImage)("fileObject",n.savedFile),e.xp6(2),e.Q6J("control",n.FormCtrls.isFollow)("radioList",n.followDiplomaRadioList)("submitted",n.submitted),e.xp6(2),e.Q6J("disable",!(null!=n.FormCtrls&&n.FormCtrls.isFollow.value))("control",n.FormCtrls.Diploma_id)("submitted",n.submitted)("reload",n.reloadDiploma),e.xp6(2),e.Q6J("control",n.FormCtrls.courseDuration)("submitted",n.submitted)("svgIcon",n.svgManager.time_input),e.xp6(4),e.hij(" ",e.lcZ(51,92,"course.Languages")," "),e.xp6(4),e.Q6J("checked",n.FormCtrls.isArabic.value),e.xp6(1),e.hij(" ",e.lcZ(56,94,e.lcZ(57,96,"course.Arabic"))," "),e.xp6(3),e.Q6J("checked",n.FormCtrls.isEnglish.value),e.xp6(1),e.hij(" ",e.lcZ(60,98,e.lcZ(61,100,"course.English"))," "),e.xp6(4),e.Q6J("control",n.FormCtrls.subjectDescription)("submitted",n.submitted),e.xp6(4),e.Q6J("control",null==n.FormCtrls?null:n.FormCtrls.from_date)("submitted",n.submitted),e.xp6(2),e.Q6J("control",null==n.FormCtrls?null:n.FormCtrls.to_date)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.FormCtrls.CourseCertificate)("submitted",n.submitted),e.xp6(1),e.ekj("hidden",1!=n.stepIndex),e.xp6(2),e.Q6J("formGroup",n.myForm),e.xp6(2),e.hij(" ",e.lcZ(77,102,"course.employeeWillLearn")," "),e.xp6(3),e.Q6J("ngForOf",n.whatWillLearn),e.xp6(1),e.Q6J("ngIf",n.addWhatWillLearn),e.xp6(1),e.Q6J("ngIf",!n.addWhatWillLearn),e.xp6(1),e.Q6J("ngIf",n.addWhatWillLearn),e.xp6(2),e.Q6J("ngIf",n.submitted&&0==n.whatWillLearn.length),e.xp6(1),e.ekj("hidden",2!=n.stepIndex),e.xp6(2),e.Q6J("formGroup",n.myForm),e.xp6(4),e.Oqu(e.lcZ(92,104,"course.basicFor")),e.xp6(4),e.Q6J("control",n.mandatoryDeptCtrl)("submitted",n.submitted)("multiple",!0),e.xp6(3),e.hij(" ",e.lcZ(99,106,"JobTitle.alljob")," "),e.xp6(2),e.Q6J("ngIf",n.isLoadedBasic)("ngIfElse",r),e.xp6(5),e.Oqu(e.lcZ(106,108,"course.recommendedFor")),e.xp6(4),e.Q6J("control",n.recommendedDeptCtrl)("submitted",n.submitted)("multiple",!0),e.xp6(3),e.hij(" ",e.lcZ(113,110,"JobTitle.alljob")," "),e.xp6(2),e.Q6J("ngIf",n.isLoadedRecommended)("ngIfElse",g),e.xp6(3),e.Q6J("ngStyle",e.VKq(114,qr,0==n.stepIndex?"-34px":"0")),e.xp6(1),e.Q6J("ngIf",0==n.stepIndex),e.xp6(1),e.Q6J("ngIf",n.stepIndex>0),e.xp6(1),e.Q6J("ngIf",n.stepIndex<2),e.xp6(1),e.Q6J("ngIf",2==n.stepIndex)}},directives:[k.a8,k.n5,u.T,ue.R,k.dn,T._Y,T.JL,T.sg,H.hX,f.O5,H.bx,fe.p,E.a,hn.Lv,H.KE,xt.gD,T.JJ,T.u,f.sg,Qt,Qo._,Lo,jn.oG,bn.d,vt.Q,Yo,T.x0,Wn.C,k.hq,f.PC,zn,Kt.Y,pt.ey,M.BZ,qe.YE,M.w1,M.fO,M.Dz,M.as,M.nj,M.ge,M.ev,M.XQ,M.Gk,Zt.I,ne.rH],pipes:[f.rS,K.X$],styles:[".coverPhoto[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:10px;overflow:hidden}.evenly[_ngcontent-%COMP%]{justify-content:space-around}.hideImg[_ngcontent-%COMP%]{visibility:hidden}.radio-group[_ngcontent-%COMP%], .label-check[_ngcontent-%COMP%]{padding-bottom:1.25em!important}section.row[_ngcontent-%COMP%], .label-check[_ngcontent-%COMP%]{margin:10px 0}  .add-course-card.mat-card{padding:32px 48px 27px 32px!important}  .add-course-card.mat-card .mat-card-title{margin-bottom:8px!important}  .add-course-card.mat-card .categories-cards{display:flex;gap:16px;overflow-x:auto;padding-bottom:10px}  .add-course-card.mat-card .categories-cards .item{min-width:130px;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1px;padding:5px 16px;border-radius:7px;box-shadow:0 1.3px 8.4px #305d7c33;background-color:#e2eaf033;cursor:pointer;border:2px solid rgba(226,234,240,.2)}  .add-course-card.mat-card .categories-cards .item .text{font-size:11px;letter-spacing:.24px;text-align:center;color:#193141}  .add-course-card.mat-card .categories-cards .item img{border-radius:10px}  .add-course-card.mat-card .categories-cards .item.selected{border:2px solid #437a9f;background-color:#437a9f1a}  .add-course-card.mat-card app-datepicker .mat-form-field{margin-bottom:16px}  .add-course-card.mat-card app-datepicker .mat-form-field-wrapper{padding:0}  .add-course-card.mat-card .mat-card-content{min-height:81%;max-height:84%;overflow-x:hidden;padding:0 35px;min-height:calc(100vh - 220px)!important}  .add-course-card.mat-card .mat-card-actions{gap:5px 20px;flex-wrap:wrap;z-index:2;position:relative;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin-bottom:20px;float:right;padding:0 8px}  .add-course-card.mat-card .mat-card-actions .radius-btn{border-radius:15px;height:50px}  .add-course-card.mat-card .mat-card-actions .radius-btn .text-btn{font-size:14.5px;line-height:normal;letter-spacing:2px}  .add-course-card.mat-card .mat-card-actions .cancel-btn{padding:0 60px}  .add-course-card.mat-card .mat-card-actions .next-btn{padding:0 90px}  .add-course-card.mat-card .second-step h5,   .add-course-card.mat-card .third-step h5{font-size:20px;line-height:normal;letter-spacing:normal;color:#e86820;margin-bottom:20px}  .add-course-card.mat-card .second-step .basic-jobs,   .add-course-card.mat-card .third-step .basic-jobs{padding:0 40px 0 0;border-right:1px solid #dbdbdb}  .add-course-card.mat-card .second-step .recommended-jobs,   .add-course-card.mat-card .third-step .recommended-jobs{padding:0 0 0 40px}  .add-course-card.mat-card .second-step .job-title-label,   .add-course-card.mat-card .third-step .job-title-label{margin-bottom:6.5px;display:inline-block}  .add-course-card.mat-card .second-step table,   .add-course-card.mat-card .third-step table{border:1px solid #cfdce5;border-radius:8px;border-collapse:separate;overflow:hidden}  .add-course-card.mat-card .second-step table th.mat-header-cell,   .add-course-card.mat-card .third-step table th.mat-header-cell{padding:15px 24px 17px!important;border-bottom:2px solid #cfdce5;font-size:14px;line-height:normal;background-color:#fff;color:#7b809a}  .add-course-card.mat-card .second-step table td.mat-cell,   .add-course-card.mat-card .third-step table td.mat-cell{padding:15px 24px!important;border:none;font-size:15px;line-height:1.2;letter-spacing:.3px;color:#2c323f}  .add-course-card.mat-card .second-step table tbody,   .add-course-card.mat-card .third-step table tbody{display:block;max-height:22vh;overflow:auto}  .add-course-card.mat-card .second-step table thead,   .add-course-card.mat-card .second-step table tbody tr,   .add-course-card.mat-card .third-step table thead,   .add-course-card.mat-card .third-step table tbody tr{display:table;width:100%;table-layout:fixed}  .add-course-card.mat-card .step-one .mat-form-field-wrapper{padding-bottom:17px;margin:.25em 0 -5px}  .add-course-card.mat-card .step-one,   .add-course-card.mat-card .second-step,   .add-course-card.mat-card .third-step{min-height:calc(100vh - 310px)}"]}),i}();function Fr(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"div",10),e.NdJ("click",function(){return e.CHM(a),e.oxw(3).navigate(!0)}),e._UZ(1,"img",11),e.TgZ(2,"div"),e.TgZ(3,"div",12),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",13),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.qZA()}if(2&i){var n=e.oxw(3);e.xp6(1),e.Q6J("src",n.svgManager.edit_general,e.LSH),e.xp6(3),e.hij(" ",e.lcZ(5,3,"editGeneralInformation")," "),e.xp6(3),e.hij(" ",e.lcZ(8,5,"mainDataAndTargetEmployees")," ")}}function wr(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"div",14),e.NdJ("click",function(){return e.CHM(a),e.oxw(3).navigate(!1)}),e._UZ(1,"img",11),e.TgZ(2,"div"),e.TgZ(3,"div",12),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",13),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.qZA()}if(2&i){var n=e.oxw(3);e.xp6(1),e.Q6J("src",n.svgManager.edit_structure,e.LSH),e.xp6(3),e.hij(" ",e.lcZ(5,3,"editCourseContent")," "),e.xp6(3),e.Oqu(e.lcZ(8,5,"videosExamsAndFiles"))}}function Sr(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Fr,9,7,"div",8),e.YNc(2,wr,9,7,"div",9),e.BQk()),2&i){var a=s.$implicit;e.xp6(1),e.Q6J("ngIf","Edit"===a.functionName),e.xp6(1),e.Q6J("ngIf","CourseStructure"===a.functionName)}}function Ur(i,s){if(1&i&&(e.TgZ(0,"div",6),e.YNc(1,Sr,3,2,"ng-container",7),e.qZA()),2&i){var a=e.oxw();e.xp6(1),e.Q6J("ngForOf",a.rowFunctions)}}function kr(i,s){1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-card-skeleton",15),e.qZA()),2&i&&(e.xp6(1),e.Q6J("height",64))}var Er=function(){return[1,2]};function Dr(i,s){1&i&&e.YNc(0,kr,2,1,"div",7),2&i&&e.Q6J("ngForOf",e.DdM(1,Er))}var Nr=function(){var i=function(){function s(a,n,o,r,g){var v=this;(0,j.Z)(this,s),this.router=a,this.ar=n,this.authserv=o,this.dialogRef=r,this.data=g,this.svgManager=new Jt.E,this.isLoaded=!1,n.queryParamMap.subscribe(function(x){v.functionId=Number(x.get("functionId")),v.functionId&&v.authserv.getUserRowFunctions(v.functionId).subscribe(function(w){w.length>0&&(v.rowFunctions=w),v.isLoaded=!0})})}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){}},{key:"navigate",value:function(n){this.dialogRef.close(),this.router.navigate(n?["dashboard/setup/course/edit-course/".concat(this.data.courseId,"/0")]:["dashboard/setup/course/course-structure/".concat(this.data.courseId)],{queryParams:{functionId:this.functionId}})}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(ne.F0),e.Y36(ne.gz),e.Y36(Te.e),e.Y36(S.so),e.Y36(S.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-options-dialog"]],decls:9,vars:5,consts:[["mat-dialog-content","",1,"edit-course-dialog"],[1,"header"],[1,"roboto-bold"],["mat-dialog-close","",1,"fas","fa-times-circle"],["class","w-100",4,"ngIf","ngIfElse"],["loading",""],[1,"w-100"],[4,"ngFor","ngForOf"],["class","card-option mbottom-20",3,"click",4,"ngIf"],["class","card-option",3,"click",4,"ngIf"],[1,"card-option","mbottom-20",3,"click"],[3,"src"],[1,"title","roboto-bold"],[1,"sub-title"],[1,"card-option",3,"click"],[3,"height"]],template:function(a,n){if(1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h1",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"i",3),e.qZA(),e.YNc(6,Ur,2,1,"div",4),e.YNc(7,Dr,1,2,"ng-template",null,5,e.W1O),e.qZA()),2&a){var o=e.MAs(8);e.xp6(3),e.hij(" ",e.lcZ(4,3,"course.editCourse")," "),e.xp6(3),e.Q6J("ngIf",n.isLoaded)("ngIfElse",o)}},directives:[S.xY,S.ZT,f.O5,f.sg,Kt.Y],pipes:[K.X$],styles:[".edit-course-dialog[_ngcontent-%COMP%]{padding-bottom:5px}.edit-course-dialog[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:30px}.edit-course-dialog[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px;line-height:normal;letter-spacing:normal;color:#193141;margin:0}.edit-course-dialog[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#d1031b;font-size:20px}.edit-course-dialog[_ngcontent-%COMP%]   .card-option[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-start;align-items:center;gap:12px;padding:16px 16px 12px;border-radius:9px;box-shadow:0 1.2px 7.5px #305d7c33;background-color:#e2eaf033;cursor:pointer}.edit-course-dialog[_ngcontent-%COMP%]   .card-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px;height:100%}.edit-course-dialog[_ngcontent-%COMP%]   .card-option[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:15px;line-height:normal;letter-spacing:.36px;color:#437a9f}.edit-course-dialog[_ngcontent-%COMP%]   .card-option[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]{font-size:13px;line-height:normal;letter-spacing:.3px;color:#7b809a}  .dialog-radius:has(.edit-course-dialog) .mat-dialog-container{border-radius:10px}"]}),i}();function Mr(i,s){1&i&&(e.TgZ(0,"th",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"course.cover")," "))}function Qr(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"td",29),e.TgZ(1,"img",30),e.NdJ("error",function(g){e.CHM(a);var v=e.oxw(2);return v.fileService.onError(g,v.appAssets.homeCourseNoImg)}),e.qZA(),e.qZA()}if(2&i){var n=s.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("src",o.fileService.previewPicture(n.attach_path),e.LSH)}}function Jr(i,s){1&i&&(e.TgZ(0,"th",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.CourseName")," "))}function Or(i,s){if(1&i&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&i){var o,a=s.$implicit,n=e.oxw(2);e.xp6(1),e.hij(" ",n.languageService.isArabic?null!==(o=a.subCourse_ar_name)&&void 0!==o?o:a.subCourse_en_name:null!==(o=a.subCourse_en_name)&&void 0!==o?o:a.subCourse_ar_name," ")}}function Lr(i,s){1&i&&(e.TgZ(0,"th",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"categories.category")," "))}function Pr(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1,","),e.qZA())}function Yr(i,s){if(1&i){var a=e.EpF();e.ynx(0),e.TgZ(1,"div",34),e.TgZ(2,"img",35),e.NdJ("error",function(v){e.CHM(a);var x=e.oxw(3);return x.fileService.onError(v,x.appAssets.categoryNoImg)}),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.YNc(5,Pr,2,0,"span",36),e.qZA(),e.BQk()}if(2&i){var n=s.$implicit,o=s.last,r=e.oxw(3);e.xp6(2),e.Q6J("src",r.fileService.previewPicture(n.attach),e.LSH),e.xp6(2),e.hij(" ",n.cat_name," "),e.xp6(1),e.Q6J("ngIf",!o)}}function jr(i,s){if(1&i&&(e.TgZ(0,"td",32),e.YNc(1,Yr,6,3,"ng-container",33),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.Q6J("ngForOf",a.category)}}function Br(i,s){1&i&&(e.TgZ(0,"th",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"categories.subCategory")," "))}function Rr(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1,","),e.qZA())}function Gr(i,s){if(1&i&&(e.ynx(0),e._uU(1),e.YNc(2,Rr,2,0,"span",36),e.BQk()),2&i){var a=s.$implicit,n=s.last;e.xp6(1),e.hij(" ",a.sub_cat_name," "),e.xp6(1),e.Q6J("ngIf",!n)}}function Vr(i,s){if(1&i&&(e.TgZ(0,"td",32),e.YNc(1,Gr,3,2,"ng-container",33),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.Q6J("ngForOf",a.subCategory)}}function Hr(i,s){1&i&&(e.TgZ(0,"th",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"instructor")," "))}function Wr(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1,","),e.qZA())}function zr(i,s){if(1&i&&(e.ynx(0),e._uU(1),e.YNc(2,Wr,2,0,"span",36),e.BQk()),2&i){var a=s.$implicit,n=s.last;e.xp6(1),e.hij(" ",a.first_name+" "+a.last_name," "),e.xp6(1),e.Q6J("ngIf",!n)}}function $r(i,s){if(1&i&&(e.TgZ(0,"td",32),e.YNc(1,zr,3,2,"ng-container",33),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.Q6J("ngForOf",a.instructors)}}function Kr(i,s){1&i&&(e.TgZ(0,"th",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"joinedEmployees")," "))}function Xr(i,s){if(1&i&&(e.TgZ(0,"td",37),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.hij(" ",a.numberOfEmployees," ")}}function el(i,s){1&i&&(e.TgZ(0,"th",38),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"actions")))}function tl(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"a",41),e.NdJ("click",function(){e.CHM(a);var o=e.oxw(2).$implicit;return e.oxw(2).openEditOptionsDialog(o.id)}),e.ALo(1,"translate"),e._UZ(2,"i",42),e.qZA()}2&i&&e.s9C("matTooltip",e.lcZ(1,1,"General.Edit"))}function nl(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"a",43),e.NdJ("click",function(){e.CHM(a);var o=e.oxw(2).$implicit;return e.oxw(2).openDeleteDialog(o)}),e.ALo(1,"translate"),e._UZ(2,"i",44),e.qZA()}2&i&&e.s9C("matTooltip",e.lcZ(1,1,"General.Delete"))}function il(i,s){if(1&i&&(e.ynx(0),e.YNc(1,tl,3,3,"a",39),e.YNc(2,nl,3,3,"a",40),e.BQk()),2&i){var a=s.$implicit;e.xp6(1),e.Q6J("ngIf","Edit"===a.functionName),e.xp6(1),e.Q6J("ngIf","Delete"===a.functionName)}}function al(i,s){if(1&i&&(e.TgZ(0,"td",32),e.YNc(1,il,3,2,"ng-container",33),e.qZA()),2&i){var a=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",a.rowFunctions)}}function ol(i,s){1&i&&e._UZ(0,"tr",45)}function rl(i,s){1&i&&e._UZ(0,"tr",46)}function ll(i,s){1&i&&e._UZ(0,"tr",47)}function sl(i,s){if(1&i&&(e.TgZ(0,"table",11),e.ynx(1,12),e.YNc(2,Mr,3,3,"th",13),e.YNc(3,Qr,2,1,"td",14),e.BQk(),e.ynx(4,15),e.YNc(5,Jr,3,3,"th",16),e.YNc(6,Or,2,1,"td",17),e.BQk(),e.ynx(7,18),e.YNc(8,Lr,3,3,"th",16),e.YNc(9,jr,2,1,"td",17),e.BQk(),e.ynx(10,19),e.YNc(11,Br,3,3,"th",16),e.YNc(12,Vr,2,1,"td",17),e.BQk(),e.ynx(13,20),e.YNc(14,Hr,3,3,"th",16),e.YNc(15,$r,2,1,"td",17),e.BQk(),e.ynx(16,21),e.YNc(17,Kr,3,3,"th",16),e.YNc(18,Xr,2,1,"td",22),e.BQk(),e.ynx(19,23),e.YNc(20,el,3,3,"th",24),e.YNc(21,al,2,1,"td",17),e.BQk(),e.YNc(22,ol,1,0,"tr",25),e.YNc(23,rl,1,0,"tr",26),e.YNc(24,ll,1,0,"tr",27),e.qZA()),2&i){var a=e.oxw();e.Q6J("dataSource",a.dataSource),e.xp6(22),e.Q6J("matHeaderRowDef",a.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns)}}function ul(i,s){if(1&i&&e._UZ(0,"app-table-skeleton",48),2&i){var a=e.oxw();e.Q6J("displayedColumns",a.displayedColumnsSkeleton)}}var ei=function(s){return{functionId:s}},dl=function(){return[10]},cl=function(){var i=function(){function s(a,n,o,r,g,v,x,w,q,N,L){var R=this;(0,j.Z)(this,s),this.courseServ=a,this.fb=n,this.ar=o,this.authserv=r,this.spinner=g,this.msg=v,this.dialog=x,this.fileService=w,this.languageService=q,this.appAssets=N,this.messagesService=L,this.displayedColumns=["attach_path","CourseName","category","subCategory","instructor","numberOfEmployees","actions"],this.displayedColumnsSkeleton=["course.cover","labels.CourseName","categories.category","categories.subCategory","instructor","joinedEmployees","actions"],this.isLoaded=!1,o.queryParamMap.subscribe(function(le){R.functionId=Number(le.get("functionId")),R.functionId&&R.authserv.getUserRowFunctions(R.functionId).subscribe(function(ke){ke.length>0&&(R.rowFunctions=ke)})}),this.EduCompId=Number(r.getEduCompId())}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){this.myForm=this.fb.group({departmentId:[null],jobId:[{value:null,disabled:!0}],diplomaId:[null],courseName:[null],page:[1]}),this.getAllCourses(this.page.value)}},{key:"ngAfterViewInit",value:function(){var n=this;this.dataSource&&(this.dataSource.paginator=this.paginator,this.startSortingTable()),this.authserv.EduCompId.subscribe(function(o){n.EduCompId=o.EduCompId,n.getAllCourses(1),n.dataSource.paginator=n.paginator})}},{key:"startSortingTable",value:function(){this.dataSource.sortingDataAccessor=function(n,o){switch(o){case"category":return n.category[0].cat_name;case"subCategory":return n.subCategory[0].sub_cat_name;case"instructor":return n.instructors[0].first_name;default:return n[o]}},this.dataSource.sort=this.sort}},{key:"getAllCourses",value:function(n){var r,g,o=this;this.isLoaded=!1,null===(r=this.page)||void 0===r||r.setValue(n);var v={depId:this.FormCtrls.departmentId.value||0,jobId:this.FormCtrls.jobId.value||0,subCourseName:(null===(g=this.FormCtrls.courseName.value)||void 0===g?void 0:g.trim().toLowerCase())||null,diploma_id:this.FormCtrls.diplomaId.value||0,page:this.page.value,eduCompId:this.EduCompId||0};this.courseServ.getAllCoursesBySearch(v).subscribe(function(x){if(x){var w=x.subCourseList;w=null==w?void 0:w.map(function(q){var N,L=[];return q.subCategory=[],null===(N=q.category)||void 0===N||N.forEach(function(R){R.Sub_Category.forEach(function(le){L.includes(le.id)||(q.subCategory.push(le),L.push(le.id))})}),q}),o.dataSource=new M.by(w),o.totalItems=x.countItems,o.startSortingTable()}o.isLoaded=!0})}},{key:"openDeleteDialog",value:function(n){var r,g,o=this,v=this.languageService.isArabic?null!==(r=n.subCourse_ar_name)&&void 0!==r?r:n.subCourse_en_name:null!==(g=n.subCourse_en_name)&&void 0!==g?g:n.subCourse_ar_name;this.dialog.open(pe.F,{data:{msg:v,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(x){x&&o.removeCourse(n.id)})}},{key:"removeCourse",value:function(n){var o=this;this.spinner.show(),this.courseServ.removeCourse(n).subscribe(function(r){r?(o.msg.success("General.DeleteSuccessfully"),1==o.dataSource.data.length&&o.page.value>1?(o.getAllCourses(o.page.value-1),o.paginator.pageIndex=o.page.value-1):o.getAllCourses(o.page.value)):o.msg.error(r.returnString),o.spinner.hide()})}},{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"page",get:function(){return this.myForm.get("page")}},{key:"resetSearch",value:function(){var n;this.myForm.reset(),null===(n=this.FormCtrls)||void 0===n||n.jobId.disable(),this.getAllCourses(1),this.dataSource.paginator=this.paginator}},{key:"openEditOptionsDialog",value:function(n){this.dialog.open(Nr,{data:{courseId:n},width:"35vh",minWidth:"380px",panelClass:"dialog-radius"}).afterClosed().subscribe(function(){})}},{key:"getDataFromHR",value:function(){var n=this;this.spinner.show(),this.courseServ.getDataFromHR(this.EduCompId).subscribe(function(o){n.spinner.hide(),o.returnValue==dn.N.success&&(n.getAllCourses(n.page.value),n.messagesService.success("copyHrSuccess"))})}},{key:"sendDataToHR",value:function(){var n=this;this.spinner.show(),this.courseServ.sendDataToHR(this.EduCompId).subscribe(function(o){n.spinner.hide(),o.returnValue==dn.N.success&&n.messagesService.success("sendHrSuccess")})}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(ze.N),e.Y36(T.qu),e.Y36(ne.gz),e.Y36(Te.e),e.Y36(Q.t2),e.Y36(F.K),e.Y36(S.uw),e.Y36(ae.f),e.Y36(W.T),e.Y36(Ne.U),e.Y36(F.K))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-course-index"]],viewQuery:function(a,n){var o;1&a&&(e.Gf(Oe.NW,5),e.Gf(qe.YE,5)),2&a&&(e.iGM(o=e.CRH())&&(n.paginator=o.first),e.iGM(o=e.CRH())&&(n.sort=o.first))},decls:18,vars:16,consts:[[1,"row"],[1,"col-12"],[1,"admin-index-card"],["title","course.courses"],["label","course.course","url","/dashboard/setup/course/add-course",1,"float-right","d-inline-block","mb-2","mx-1","mt--5",3,"params"],[1,"orange-btn","radius-btn","send-to-hr","integration-btn","float-right","d-inline-block","mx-1","mb-2",3,"click"],[1,"orange-btn","radius-btn","get-from-hr","integration-btn","float-right","d-inline-block","mx-1","mb-2",3,"click"],["appScrollableHorizontal","",1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource",4,"ngIf","ngIfElse"],["showFirstLastButtons","","aria-label","Select page of courses",3,"pageSizeOptions","pageSize","length","disabled","page"],["loading",""],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","attach_path"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","CourseName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","category"],["matColumnDef","subCategory"],["matColumnDef","instructor"],["matColumnDef","numberOfEmployees"],["mat-cell","","style","padding: 6.5%",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-header-cell","",1,"text-center"],["mat-cell","",1,"text-center"],[1,"cover",3,"src","error"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngFor","ngForOf"],[1,"d-inline-block"],["width","18","height","18",1,"category-icon",3,"src","error"],[4,"ngIf"],["mat-cell","",2,"padding","6.5%"],["mat-header-cell",""],["class","dark-blue",3,"matTooltip","click",4,"ngIf"],["class","danger",3,"matTooltip","click",4,"ngIf"],[1,"dark-blue",3,"matTooltip","click"],[1,"fas","fa-pen","font-medium-3","mr-2"],[1,"danger",3,"matTooltip","click"],[1,"fa","fa-trash","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[3,"displayedColumns"]],template:function(a,n){if(1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card",2),e.TgZ(3,"mat-card-title"),e._UZ(4,"page-title",3),e._UZ(5,"create-new-btn",4),e.TgZ(6,"button",5),e.NdJ("click",function(){return n.sendDataToHR()}),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"button",6),e.NdJ("click",function(){return n.getDataFromHR()}),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.qZA(),e.TgZ(12,"mat-card-content"),e.TgZ(13,"div",7),e.YNc(14,sl,25,3,"table",8),e.TgZ(15,"mat-paginator",9),e.NdJ("page",function(g){return n.getAllCourses(g.pageIndex+1)}),e.qZA(),e.qZA(),e.YNc(16,ul,1,1,"ng-template",null,10,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a){var o=e.MAs(17);e.xp6(5),e.Q6J("params",e.VKq(13,ei,n.functionId)),e.xp6(2),e.hij(" ",e.lcZ(8,9,"sendToHr")," "),e.xp6(3),e.hij(" ",e.lcZ(11,11,"getFromHr")," "),e.xp6(4),e.Q6J("ngIf",n.isLoaded)("ngIfElse",o),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(15,dl))("pageSize",10)("length",n.totalItems)("disabled",!n.isLoaded)}},directives:[k.a8,k.n5,u.T,ln,k.dn,zn,f.O5,Oe.NW,M.BZ,qe.YE,M.w1,M.fO,M.Dz,M.as,M.nj,M.Ee,M.ge,M.ev,qe.nU,f.sg,A.gM,M.XQ,M.Gk,Zt.I],pipes:[K.X$],styles:[".mat-column-courseName[_ngcontent-%COMP%]{max-width:200px!important;word-wrap:break-word!important;white-space:unset!important;-webkit-padding-end:15px;padding-inline-end:15px}.mat-column-attach_path[_ngcontent-%COMP%]{text-align:center}"]}),i}(),l=function(){var i=function(){function s(a,n,o,r,g){(0,j.Z)(this,s),this.languageService=a,this.fb=n,this.datePipe=o,this.dialogRef=r,this.data=g,this.submitted=!1,this.jobTitle=g.jobTitle}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){this.myForm=this.fb.group({from_date:[null,[T.kI.required]],to_date:[null]},{validator:Z.D.dateBefore("from_date","to_date")}),this.myForm.patchValue(this.jobTitle)}},{key:"editJobTitleDates",value:function(){var n,o,r;if(this.submitted=!0,this.myForm.valid){var g={from_date:this.datePipe.transform(null===(n=this.formCtrl)||void 0===n?void 0:n.from_date.value),to_date:this.datePipe.transform(null===(r=null===(o=this.formCtrl)||void 0===o?void 0:o.to_date)||void 0===r?void 0:r.value)};this.dialogRef.close({jobTitle:g})}}},{key:"formCtrl",get:function(){return this.myForm.controls}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(W.T),e.Y36(T.qu),e.Y36(f.uU),e.Y36(S.so),e.Y36(S.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-job-title-dates"]],decls:16,vars:16,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"row",3,"formGroup"],[1,"col-12"],["label","labels.FromDate",3,"control","submitted"],["label","labels.ToDate",3,"control","submitted"],["mat-dialog-actions","","align","end"],["mat-raised-button","",1,"btn","btn-danger",3,"mat-dialog-close"],["mat-raised-button","","cdkFocusInitial","",1,"btn","btn-info",3,"click"]],template:function(a,n){var o;1&a&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"form",2),e.TgZ(5,"div",3),e._UZ(6,"app-datepicker",4),e.qZA(),e.TgZ(7,"div",3),e._UZ(8,"app-datepicker",5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",6),e.TgZ(10,"button",7),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"button",8),e.NdJ("click",function(){return n.editJobTitleDates()}),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA()),2&a&&(e.xp6(1),e.AsE(" ",e.lcZ(2,10,"JobTitle.updateJobTitle")," - ",n.languageService.isArabic?null!==(o=n.jobTitle.ar_name)&&void 0!==o?o:n.jobTitle.en_name:null!==(o=n.jobTitle.en_name)&&void 0!==o?o:n.jobTitle.ar_name,"\n"),e.xp6(3),e.Q6J("formGroup",n.myForm),e.xp6(2),e.Q6J("control",n.formCtrl.from_date)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.formCtrl.to_date)("submitted",n.submitted),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(1),e.hij(" ",e.lcZ(12,12,"General.Close")," "),e.xp6(3),e.hij(" ",e.lcZ(15,14,"General.Save")," "))},directives:[S.uh,S.xY,T._Y,T.JL,T.sg,vt.Q,S.H8,Le.lW,S.ZT],pipes:[K.X$],styles:[""]}),i}(),p=function(){var i=function(s){(0,mn.Z)(n,s);var a=(0,pn.Z)(n);function n(o){var r;return(0,j.Z)(this,n),(r=a.call(this,o)).http=o,r}return(0,Y.Z)(n,[{key:"getAllArticles",value:function(r,g){return this.get("Article/geAllArticles/".concat(g,"/").concat(r))}},{key:"addArticle",value:function(r){return this.post("Article/PostArticles",r)}},{key:"editArticle",value:function(r,g){return this.put("Article/PutArticles/".concat(g),r)}},{key:"editJobTitleArticle",value:function(r,g){return this.put("Article/EditArticleDepJob/".concat(r),g)}},{key:"deleteArticle",value:function(r){return this.delete("Article/DeleteArticles/".concat(r))}},{key:"deleteJobTitleArticle",value:function(r){return this.delete("Article/DeleteJobTitleOfArticles/".concat(r))}}]),n}(Ht.K);return i.\u0275fac=function(a){return new(a||i)(e.LFG(gn.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i}(),d=h(1123);function c(i,s){1&i&&(e.TgZ(0,"mat-card-title"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"articles.addArticle")," "))}function m(i,s){1&i&&(e.TgZ(0,"mat-card-title"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"articles.updateArticle")," "))}function _(i,s){1&i&&e._UZ(0,"i",34)}function U(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){return e.CHM(a),e.oxw().clearForm()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"General.Reset")," "))}function V(i,s){1&i&&(e.TgZ(0,"th",36),e._uU(1,"#"),e.qZA())}function ee(i,s){if(1&i&&(e.TgZ(0,"td",37),e._uU(1),e.qZA()),2&i){var a=s.index;e.xp6(1),e.hij(" ",a+1," ")}}function me(i,s){1&i&&(e.TgZ(0,"th",38),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"articles.title")," "))}function xe(i,s){if(1&i&&(e.TgZ(0,"td",37),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.Oqu(a.title)}}function Ae(i,s){1&i&&(e.TgZ(0,"th",38),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"articles.department")," "))}function Me(i,s){if(1&i&&(e.TgZ(0,"td",37),e._uU(1),e.qZA()),2&i){var o,a=s.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",n.languageService.isArabic?null!==(o=null==a.department?null:a.department.ar_name)&&void 0!==o?o:null==a.department?null:a.department.en_name:null!==(o=null==a.department?null:a.department.en_name)&&void 0!==o?o:null==a.department?null:a.department.ar_name," ")}}function Ct(i,s){1&i&&(e.TgZ(0,"th",38),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"articles.jobtitle")," "))}function ti(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"a",46),e.NdJ("click",function(){e.CHM(a);var o=e.oxw(2).$implicit;return e.oxw(3).openUpdateJobTitleDialog(o)}),e._UZ(1,"i",47),e.qZA()}}function Tl(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"a",48),e.NdJ("click",function(){e.CHM(a);var o=e.oxw(2).$implicit;return e.oxw(3).openDeleteJobtitleDialog(o)}),e._UZ(1,"i",49),e.qZA()}}function xl(i,s){if(1&i&&(e.ynx(0),e.YNc(1,ti,2,0,"a",44),e.YNc(2,Tl,2,0,"a",45),e.BQk()),2&i){var a=s.$implicit;e.xp6(1),e.Q6J("ngIf","UpdateArticalJob"===a.functionName),e.xp6(1),e.Q6J("ngIf","DeleteArticalJob"===a.functionName)}}function Il(i,s){if(1&i&&(e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"td"),e.YNc(10,xl,3,2,"ng-container",43),e.qZA(),e.qZA()),2&i){var o,a=s.$implicit,n=e.oxw(3);e.xp6(2),e.hij(" ",n.languageService.isArabic?null!==(o=a.ar_name)&&void 0!==o?o:a.en_name:null!==(o=a.en_name)&&void 0!==o?o:a.ar_name," "),e.xp6(2),e.Oqu(e.xi3(5,4,a.from_date,"dd-MM-yyyy")),e.xp6(3),e.Oqu(e.xi3(8,7,a.to_date,"dd-MM-yyyy")),e.xp6(3),e.Q6J("ngForOf",n.rowFunctions)}}function yl(i,s){if(1&i&&(e.TgZ(0,"table",40),e.TgZ(1,"thead",41),e.TgZ(2,"tr"),e.TgZ(3,"th",42),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"th",42),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",42),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"th",42),e.qZA(),e.qZA(),e.TgZ(13,"tbody"),e.YNc(14,Il,11,10,"tr",43),e.qZA(),e.qZA()),2&i){var a=e.oxw().$implicit;e.xp6(4),e.hij(" ",e.lcZ(5,4,"labels.Name")," "),e.xp6(3),e.hij(" ",e.lcZ(8,6,"labels.FromDate")," "),e.xp6(3),e.hij(" ",e.lcZ(11,8,"labels.ToDate")," "),e.xp6(4),e.Q6J("ngForOf",a.jobTitle)}}function ql(i,s){if(1&i&&(e.TgZ(0,"td",37),e.YNc(1,yl,15,10,"table",39),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.Q6J("ngIf",(null==a.jobTitle?null:a.jobTitle.length)>0)}}function Fl(i,s){1&i&&e._UZ(0,"th",36)}function wl(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"a",53),e.NdJ("click",function(){e.CHM(a);var o=e.oxw(2).$implicit;return e.oxw().editArticle(o)}),e.ALo(1,"translate"),e._UZ(2,"i",54),e.qZA()}2&i&&e.s9C("matTooltip",e.lcZ(1,1,"General.Edit"))}function Sl(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"a",55),e.NdJ("click",function(){e.CHM(a);var o=e.oxw(2).$implicit;return e.oxw().openDeleateDialog(o)}),e.ALo(1,"translate"),e._UZ(2,"i",56),e.qZA()}2&i&&e.s9C("matTooltip",e.lcZ(1,1,"General.Delete"))}function Ul(i,s){if(1&i&&(e.ynx(0),e.YNc(1,wl,3,3,"a",51),e.YNc(2,Sl,3,3,"a",52),e.BQk()),2&i){var a=s.$implicit;e.xp6(1),e.Q6J("ngIf","Edit"===a.functionName),e.xp6(1),e.Q6J("ngIf","Delete"===a.functionName)}}function kl(i,s){if(1&i&&(e.TgZ(0,"td",50),e.YNc(1,Ul,3,2,"ng-container",43),e.qZA()),2&i){var a=e.oxw();e.xp6(1),e.Q6J("ngForOf",a.rowFunctions)}}function El(i,s){1&i&&e._UZ(0,"tr",57)}function Dl(i,s){1&i&&e._UZ(0,"tr",58)}function Nl(i,s){if(1&i&&(e.TgZ(0,"tr",59),e.TgZ(1,"td",60),e._uU(2),e.qZA(),e.qZA()),2&i){e.oxw();var a=e.MAs(40);e.xp6(2),e.hij(' No data matching the filter "',a.value,'" ')}}var Ml=function(){return[10]},Ql=function(){var i=function(){function s(a,n,o,r,g,v,x,w,q){var N=this;(0,j.Z)(this,s),this.fb=a,this.toastr=n,this.articleService=o,this.authserv=r,this.spinner=g,this.dialog=v,this.route=x,this.languageService=w,this.datePipe=q,this.submitted=!1,this.itemsCounts=0,this.curPage=1,this.currentDate=new Date,this.displayedColumns=["#","title","department","jobTitle","option"],this.initTable=!0,x.queryParamMap.subscribe(function(L){N.functionId=Number(L.get("functionId")),N.functionId&&N.authserv.getUserRowFunctions(N.functionId).subscribe(function(R){R.length>0&&(N.rowFunctions=R)})}),this.EduCompId=Number(r.getEduCompId())}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){this.myForm=this.fb.group({id:[0],title:["",[T.kI.required,Z.D.whiteSpace]],ArticleContent:["",[T.kI.required]],depJobIds:[{value:"",disabled:!0},[T.kI.required]],departmentId:["",[T.kI.required]],from_date:[null],to_date:[null]},{validator:Z.D.dateBefore("from_date","to_date")}),this.getAllArticles(this.curPage)}},{key:"ngAfterViewInit",value:function(){var n=this;this.dataSource&&(this.dataSource.paginator=this.paginator,this.startSortingTable()),this.authserv.EduCompId.subscribe(function(o){n.EduCompId=o.EduCompId,n.getAllArticles(1),n.dataSource.paginator=n.paginator})}},{key:"startSortingTable",value:function(){var n=this;this.dataSource.sortingDataAccessor=function(o,r){var g,v,x,w,q,N,L,R,le,ke,Ee;switch(r){case"department":return n.languageService.isArabic?null!==(g=o.department.ar_name)&&void 0!==g?g:null===(v=o.department)||void 0===v?void 0:v.en_name:null!==(w=null===(x=o.department)||void 0===x?void 0:x.en_name)&&void 0!==w?w:null===(q=o.department)||void 0===q?void 0:q.ar_name;case"jobTitle":return n.languageService.isArabic?null!==(L=null===(N=o.jobTitle[0])||void 0===N?void 0:N.ar_name)&&void 0!==L?L:null===(R=o.jobTitle[0])||void 0===R?void 0:R.en_name:null!==(ke=null===(le=o.jobTitle[0])||void 0===le?void 0:le.en_name)&&void 0!==ke?ke:null===(Ee=o.jobTitle[0])||void 0===Ee?void 0:Ee.ar_name;default:return o[r]}},this.dataSource.sort=this.sort}},{key:"getAllArticles",value:function(n){var o=this;this.curPage=n,this.spinner.show(),this.articleService.getAllArticles(n,this.EduCompId).subscribe(function(r){r&&(o.dataSource=new M.by(r.ArticleList),o.itemsCounts=r.countItems,o.startSortingTable()),o.spinner.hide()})}},{key:"onSubmit",value:function(){var n,o,r,g,v,x,w;if(this.submitted=!0,this.myForm.valid){var q={};q.EduCompId=this.EduCompId,q.title=null===(n=this.FormCtrls.title)||void 0===n?void 0:n.value,q.ArticleContent=null===(o=this.FormCtrls.ArticleContent)||void 0===o?void 0:o.value,q.depJobIds=null===(r=this.FormCtrls.depJobIds)||void 0===r?void 0:r.value,q.from_date=this.datePipe.transform(null!==(v=null===(g=this.FormCtrls.from_date)||void 0===g?void 0:g.value)&&void 0!==v?v:this.currentDate),q.to_date=this.datePipe.transform(null===(x=this.FormCtrls.to_date)||void 0===x?void 0:x.value),this.spinner.show(),0==(null===(w=this.FormCtrls.id)||void 0===w?void 0:w.value)?this.addArticle(q):this.updateArticle(q)}else this.toastr.error("General.FormNotValid")}},{key:"addArticle",value:function(n){var o=this;this.articleService.addArticle(n).subscribe(function(r){r&&null!==r&&(0==r.returnValue?o.toastr.error(r.returnString):(o.getAllArticles(1),o.dataSource.paginator=o.paginator,o.toastr.success("General.AddSuccessfully"),o.clearForm())),o.spinner.hide()})}},{key:"updateArticle",value:function(n){var r,o=this;this.articleService.editArticle(n,null===(r=this.FormCtrls.id)||void 0===r?void 0:r.value).subscribe(function(g){g&&null!==g&&(0==g.returnValue?o.toastr.error(g.returnString):(o.getAllArticles(o.curPage),o.toastr.success("General.UpdateSuccessfully"),o.clearForm())),o.spinner.hide()})}},{key:"editArticle",value:function(n){var o,r;this.myForm.patchValue(n),null===(o=this.FormCtrls.departmentId)||void 0===o||o.setValue(n.department.id),null===(r=this.FormCtrls.depJobIds)||void 0===r||r.setValue(n.jobTitle.map(function(g){return g.depJobId}))}},{key:"openDeleateDialog",value:function(n){var o=this;this.dialog.open(pe.F,{data:{msg:n.title,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(r){r&&o.removeArticle(n)})}},{key:"removeArticle",value:function(n){var o=this;this.articleService.deleteArticle(n.id).subscribe(function(r){1==r.returnValue?(o.toastr.success("General.DeleteSuccessfully"),1==o.dataSource.data.length&&o.curPage>1?(o.getAllArticles(o.curPage-1),o.paginator.pageIndex=o.curPage-1):o.getAllArticles(o.curPage),n.id==o.FormCtrls.id.value&&o.clearForm()):o.toastr.error(r.returnString),o.spinner.hide()})}},{key:"editJobTitleDates",value:function(n,o){var r=this;this.articleService.editJobTitleArticle(n,o).subscribe(function(g){1==g.returnValue?(r.getAllArticles(r.curPage),r.toastr.success("General.UpdateSuccessfully")):r.toastr.error(g.returnString)})}},{key:"openUpdateJobTitleDialog",value:function(n){var o=this;this.dialog.open(l,{data:{jobTitle:n}}).afterClosed().subscribe(function(r){r&&o.editJobTitleDates(n.jobTitle_article,r.jobTitle)})}},{key:"openDeleteJobtitleDialog",value:function(n){var r,g,o=this;this.dialog.open(pe.F,{data:{msg:this.languageService.isArabic?null!==(r=n.ar_name)&&void 0!==r?r:n.en_name:null!==(g=n.en_name)&&void 0!==g?g:n.ar_name,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(v){v&&o.removeJobtitleArticle(n.jobTitle_article)})}},{key:"removeJobtitleArticle",value:function(n){var o=this;this.articleService.deleteJobTitleArticle(n).subscribe(function(r){1==r.returnValue?(o.getAllArticles(o.curPage),o.toastr.success("General.DeleteSuccessfully")):o.toastr.error(r.returnString)})}},{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"applyFilter",value:function(n){this.dataSource.filter=n.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}},{key:"clearForm",value:function(){this.myForm.reset(),this.FormCtrls.id.setValue(0),this.submitted=!1}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(T.qu),e.Y36(F.K),e.Y36(p),e.Y36(Te.e),e.Y36(Q.t2),e.Y36(S.uw),e.Y36(ne.gz),e.Y36(W.T),e.Y36(f.uU))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-articles"]],viewQuery:function(a,n){var o;1&a&&(e.Gf(Oe.NW,5),e.Gf(qe.YE,5)),2&a&&(e.iGM(o=e.CRH())&&(n.paginator=o.first),e.iGM(o=e.CRH())&&(n.sort=o.first))},decls:62,vars:34,consts:[[1,"row"],[1,"col-12"],[4,"ngIf"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-4","col-12"],["label","articles.title",3,"control","submitted"],[3,"control","submitted"],[3,"control","departmentControl","submitted","multiple"],["label","labels.FromDate",3,"control","submitted"],["label","labels.ToDate",3,"control","submitted"],["label","articles.content","rows","2",3,"control","submitted"],["align","end"],["mat-raised-button","",1,"btn","btn-info","bg-light-info",3,"click"],["class","fa fa-plus mr-1",4,"ngIf"],["mat-raised-button","","class","btn btn-warning",3,"click",4,"ngIf"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","department"],["matColumnDef","jobTitle"],["matColumnDef","option"],["mat-cell","","class","text-center",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of articles",3,"pageSizeOptions","length","page"],[1,"fa","fa-plus","mr-1"],["mat-raised-button","",1,"btn","btn-warning",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["class","table table-sm mb-1",4,"ngIf"],[1,"table","table-sm","mb-1"],[1,"thead-dark"],["scope","col",1,"border-0"],[4,"ngFor","ngForOf"],["class","success p-0",3,"click",4,"ngIf"],["class","danger p-0",3,"click",4,"ngIf"],[1,"success","p-0",3,"click"],[1,"ft-edit-2","mr-2"],[1,"danger","p-0",3,"click"],["aria-hidden","true",1,"fa","fa-times","fa","fa-white"],["mat-cell","",1,"text-center"],["class","success p-0",3,"matTooltip","click",4,"ngIf"],["class","danger p-0",3,"matTooltip","click",4,"ngIf"],[1,"success","p-0",3,"matTooltip","click"],[1,"ft-edit-2","font-medium-3","mr-2"],[1,"danger","p-0",3,"matTooltip","click"],[1,"ft-trash","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","5",1,"mat-cell"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.YNc(3,c,3,3,"mat-card-title",2),e.YNc(4,m,3,3,"mat-card-title",2),e.TgZ(5,"mat-card-content",3),e.TgZ(6,"div",0),e.TgZ(7,"div",1),e.TgZ(8,"form",4),e.TgZ(9,"div",0),e.TgZ(10,"div",5),e._UZ(11,"app-input",6),e.qZA(),e.TgZ(12,"div",5),e._UZ(13,"department-dropdown",7),e.qZA(),e.TgZ(14,"div",5),e._UZ(15,"job-title-by-department-dropdown",8),e.qZA(),e.TgZ(16,"div",5),e._UZ(17,"app-datepicker",9),e.qZA(),e.TgZ(18,"div",5),e._UZ(19,"app-datepicker",10),e.qZA(),e.TgZ(20,"div",1),e._UZ(21,"app-textarea",11),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"mat-card-actions",12),e.TgZ(23,"button",13),e.NdJ("click",function(){return n.onSubmit()}),e.YNc(24,_,1,0,"i",14),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.YNc(27,U,3,3,"button",15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",0),e.TgZ(29,"div",1),e.TgZ(30,"mat-card"),e.TgZ(31,"mat-card-title"),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"mat-card-content"),e.TgZ(35,"mat-form-field",16),e.TgZ(36,"mat-label"),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"input",17,18),e.NdJ("keyup",function(r){return n.applyFilter(r)}),e.qZA(),e.qZA(),e.TgZ(41,"div",19),e.TgZ(42,"table",20),e.ynx(43,21),e.YNc(44,V,2,0,"th",22),e.YNc(45,ee,2,1,"td",23),e.BQk(),e.ynx(46,24),e.YNc(47,me,3,3,"th",25),e.YNc(48,xe,2,1,"td",23),e.BQk(),e.ynx(49,26),e.YNc(50,Ae,3,3,"th",25),e.YNc(51,Me,2,1,"td",23),e.BQk(),e.ynx(52,27),e.YNc(53,Ct,3,3,"th",25),e.YNc(54,ql,2,1,"td",23),e.BQk(),e.ynx(55,28),e.YNc(56,Fl,1,0,"th",22),e.YNc(57,kl,2,1,"td",29),e.BQk(),e.YNc(58,El,1,0,"tr",30),e.YNc(59,Dl,1,0,"tr",31),e.YNc(60,Nl,3,1,"tr",32),e.qZA(),e.TgZ(61,"mat-paginator",33),e.NdJ("page",function(r){return n.getAllArticles(r.pageIndex+1)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(3),e.Q6J("ngIf",0==n.FormCtrls.id.value),e.xp6(1),e.Q6J("ngIf",n.FormCtrls.id.value>0),e.xp6(4),e.Q6J("formGroup",n.myForm),e.xp6(3),e.Q6J("control",n.FormCtrls.title)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.FormCtrls.departmentId)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.FormCtrls.depJobIds)("departmentControl",n.FormCtrls.departmentId)("submitted",n.submitted)("multiple",!0),e.xp6(2),e.Q6J("control",n.FormCtrls.from_date)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.FormCtrls.to_date)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.FormCtrls.ArticleContent)("submitted",n.submitted),e.xp6(3),e.Q6J("ngIf",0==n.FormCtrls.id.value),e.xp6(1),e.hij(" ",e.lcZ(26,27,0==n.FormCtrls.id.value?"General.Add":"General.Update")," "),e.xp6(2),e.Q6J("ngIf",n.FormCtrls.id.value>0),e.xp6(5),e.hij(" ",e.lcZ(33,29,"articles.articles"),""),e.xp6(5),e.Oqu(e.lcZ(38,31,"General.Search")),e.xp6(5),e.Q6J("dataSource",n.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(33,Ml))("length",n.itemsCounts))},directives:[k.a8,f.O5,k.dn,T._Y,T.JL,T.sg,E.a,Wn.C,d.a,vt.Q,ce.R,k.hq,Le.lW,k.n5,H.KE,H.hX,Tt.Nt,M.BZ,qe.YE,M.w1,M.fO,M.Dz,M.as,M.nj,M.Ee,Oe.NW,M.ge,M.ev,qe.nU,f.sg,A.gM,M.XQ,M.Gk],pipes:[K.X$,f.uU],styles:[".firstCol[_ngcontent-%COMP%]{width:50px;padding:0 10px!important;text-align:start}"]}),i}();function Jl(i,s){if(1&i&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.Q6J("value",a.teacherUserId),e.xp6(1),e.hij(" ",a.teacher_ar_name," ")}}function Ol(i,s){1&i&&(e.TgZ(0,"th",30),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.FromDate")," "))}function Ll(i,s){if(1&i&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.Oqu(a.From_Date)}}function Pl(i,s){1&i&&(e.TgZ(0,"th",30),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.ToDate")," "))}function Yl(i,s){if(1&i&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.Oqu(a.To_Date)}}function jl(i,s){1&i&&(e.TgZ(0,"th",30),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Announcement")," "))}function Bl(i,s){if(1&i&&(e.TgZ(0,"td",31),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.Oqu(a.Announcement_Text)}}function Rl(i,s){1&i&&(e.TgZ(0,"th",30),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.AnnouncePicture")," "))}function Gl(i,s){if(1&i&&(e.TgZ(0,"td",31),e.TgZ(1,"a",32),e._UZ(2,"img",33),e.qZA(),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.MGl("href","mozakretyapi/",a.attach_path,"",e.LSH),e.xp6(1),e.MGl("src","mozakretyapi/",a.attach_path,"",e.LSH)}}function Vl(i,s){1&i&&e._UZ(0,"th",30)}var Hl=function(s,a){return{announceId:s,functionId:a}};function Wl(i,s){if(1&i&&(e.TgZ(0,"td",31),e.TgZ(1,"button",34),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA(),e.qZA(),e.qZA()),2&i){var a=s.$implicit,n=e.oxw();e.xp6(1),e.Q6J("queryParams",e.WLB(1,Hl,a.Id,n.functionId))}}function zl(i,s){1&i&&e._UZ(0,"tr",35)}function $l(i,s){1&i&&e._UZ(0,"tr",36)}function Kl(i,s){if(1&i&&(e.TgZ(0,"tr",37),e.TgZ(1,"td",38),e._uU(2),e.qZA(),e.qZA()),2&i){e.oxw();var a=e.MAs(40);e.xp6(2),e.hij(' No data matching the filter "',a.value,'" ')}}var Xl=function(s){return{functionId:s}},es=function(){return[10]},ts=function(){var i=function(){function s(a,n,o,r,g,v,x,w){var q=this;(0,j.Z)(this,s),this.route=a,this.fb=n,this.toastr=o,this.authserv=r,this.dialog=g,this.GeneralService=v,this.announcementService=x,this.spinner=w,this.p=1,this.maxSize=9,this.Teachers=[],this.displayedColumns=["announcementText","fromDate","toDate","img","actions"],a.queryParamMap.subscribe(function(N){q.functionId=Number(N.get("functionId")),q.functionId&&q.authserv.getUserRowFunctions(q.functionId).subscribe(function(L){L&&(q.rowFunctions=L)})})}return(0,Y.Z)(s,[{key:"applyFilter",value:function(n){this.dataSource.filter=n.target.value.trim().toLowerCase()}},{key:"ngOnInit",value:function(){console.log("helo"),this.EduCompId=this.authserv.getEduCompId(),this.myForm=this.fb.group({teacherUserId:[""],EduCompId:[this.EduCompId],page:[""]}),this.getTeachersByEducompId()}},{key:"EduCompIdCtrl",get:function(){return this.myForm.get("EduCompId")}},{key:"ngAfterViewInit",value:function(){var n=this;this.authserv.EduCompId.subscribe(function(o){n.EduCompId=o.EduCompId,n.EduCompIdCtrl.setValue(o.EduCompId),n.getTeacherAnnouncement(1),n.getTeachersByEducompId()}),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"getTeacherAnnouncement",value:function(n){var r,o=this;console.log(this.myForm.controls.teacherUserId.value),null===(r=this.myForm.controls.page)||void 0===r||r.setValue(n),this.p=n,this.spinner.show(),""!=this.myForm.controls.teacherUserId.value&&this.announcementService.getAllAnnouncements(this.myForm.controls.teacherUserId.value).subscribe(function(g){o.dataSource=new M.by(g),o.itemsCount=g.length,o.spinner.hide()})}},{key:"getTeachersByEducompId",value:function(){var n=this;this.GeneralService.getTeachersByEducompId(this.EduCompId).subscribe(function(o){n.Teachers=o.lstTeachers})}},{key:"openDeleateDialog",value:function(n){}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(ne.gz),e.Y36(T.qu),e.Y36(Et._W),e.Y36(Te.e),e.Y36(S.uw),e.Y36(Wt.m),e.Y36(Bn),e.Y36(Q.t2))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-announcement-index"]],viewQuery:function(a,n){var o;1&a&&(e.Gf(Oe.NW,5),e.Gf(qe.YE,5)),2&a&&(e.iGM(o=e.CRH())&&(n.paginator=o.first),e.iGM(o=e.CRH())&&(n.sort=o.first))},decls:62,vars:30,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","","routerLink","../announcement-setup",1,"btn","btn-info","bg-light-info","float-right",3,"queryParams"],[1,"fa","fa-plus"],["mat-raised-button","",1,"btn","btn-info","float-right",3,"click"],[1,"fa","fa-search","mr-1"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["appearance","legacy"],["formControlName","teacherUserId"],["value",""],[3,"value",4,"ngFor","ngForOf"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","fromDate"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","toDate"],["matColumnDef","announcementText"],["matColumnDef","img"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","page"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["target","_blank",3,"href"],[1,"card-img-top","img-fluid","imgtablesize",3,"src","alt"],["mat-mini-fab","","matTooltip","Edit","routerLink","../announcement-setup",3,"queryParams"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"a",2),e._UZ(7,"i",3),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"a",4),e.NdJ("click",function(){return n.getTeacherAnnouncement(1)}),e._UZ(11,"i",5),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.qZA(),e.TgZ(14,"mat-card-content",6),e.TgZ(15,"div",0),e.TgZ(16,"div",1),e.TgZ(17,"form",7),e.TgZ(18,"div",0),e.TgZ(19,"div",8),e.TgZ(20,"mat-form-field",9),e.TgZ(21,"mat-label"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"mat-select",10),e.TgZ(25,"mat-option",11),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.YNc(28,Jl,2,2,"mat-option",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",0),e.TgZ(30,"div",1),e.TgZ(31,"mat-card"),e.TgZ(32,"mat-card-title"),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"mat-card-content"),e.TgZ(36,"mat-form-field",13),e.TgZ(37,"mat-label"),e._uU(38,"Filter"),e.qZA(),e.TgZ(39,"input",14,15),e.NdJ("keyup",function(r){return n.applyFilter(r)}),e.qZA(),e.qZA(),e.TgZ(41,"div",16),e.TgZ(42,"table",17),e.ynx(43,18),e.YNc(44,Ol,3,3,"th",19),e.YNc(45,Ll,2,1,"td",20),e.BQk(),e.ynx(46,21),e.YNc(47,Pl,3,3,"th",19),e.YNc(48,Yl,2,1,"td",20),e.BQk(),e.ynx(49,22),e.YNc(50,jl,3,3,"th",19),e.YNc(51,Bl,2,1,"td",20),e.BQk(),e.ynx(52,23),e.YNc(53,Rl,3,3,"th",19),e.YNc(54,Gl,3,2,"td",20),e.BQk(),e.ynx(55,24),e.YNc(56,Vl,1,0,"th",19),e.YNc(57,Wl,4,4,"td",20),e.BQk(),e.YNc(58,zl,1,0,"tr",25),e.YNc(59,$l,1,0,"tr",26),e.YNc(60,Kl,3,1,"tr",27),e.qZA(),e.TgZ(61,"mat-paginator",28),e.NdJ("page",function(r){return n.getTeacherAnnouncement(r.pageIndex+1)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(4),e.hij(" ",e.lcZ(5,15,"General.Search")," "),e.xp6(2),e.Q6J("queryParams",e.VKq(27,Xl,n.functionId)),e.xp6(2),e.hij(" ",e.lcZ(9,17,"labels.AddAnnounce")," "),e.xp6(4),e.hij(" ",e.lcZ(13,19,"General.Search")," "),e.xp6(5),e.Q6J("formGroup",n.myForm),e.xp6(5),e.hij(" ",e.lcZ(23,21,"Material.Teacher")," "),e.xp6(4),e.hij(" ",e.lcZ(27,23,"Material.Teacher"),""),e.xp6(2),e.Q6J("ngForOf",n.Teachers),e.xp6(5),e.hij(" ",e.lcZ(34,25,"labels.Announcement")," "),e.xp6(9),e.Q6J("dataSource",n.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(29,es))("length",n.itemsCount)("pageSize",10))},directives:[k.a8,k.n5,Le.zs,ne.yS,k.dn,T._Y,T.JL,T.sg,H.KE,H.hX,xt.gD,T.JJ,T.u,pt.ey,f.sg,Tt.Nt,M.BZ,qe.YE,M.w1,M.fO,M.Dz,M.as,M.nj,M.Ee,Oe.NW,M.ge,qe.nU,M.ev,Le.lW,A.gM,ne.rH,Dn.Hw,M.XQ,M.Gk],pipes:[K.X$],styles:["th.mat-header-cell[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-of-type, td.mat-cell[_ngcontent-%COMP%]:first-of-type, td.mat-footer-cell[_ngcontent-%COMP%]:first-of-type{width:650px;max-width:650px;overflow:hidden;height:50px;text-overflow:ellipsis;white-space:nowrap}"]}),i}(),ni=h(4105),hl=function(){var i=function(){function s(a,n,o,r,g,v,x,w){var q;(0,j.Z)(this,s),this.fb=a,this.authserv=n,this.giftsService=o,this.translate=r,this.spinner=g,this.msg=v,this.dialogRef=x,this.gift=w,this.giftcategoryId=0,this.submitted=!1,this.giftcategoryId=null!==(q=null==w?void 0:w.id)&&void 0!==q?q:0}return(0,Y.Z)(s,[{key:"engNameCtrl",get:function(){return this.myForm.get("englishName")}},{key:"arbNameCtrl",get:function(){return this.myForm.get("arabicName")}},{key:"IdCtrl",get:function(){return this.myForm.get("id")}},{key:"ngOnInit",value:function(){var n=this;this.EduCompId=this.authserv.getEduCompId(),this.myForm=this.fb.group({id:[null],englishName:[null,T.kI.required],arabicName:[null,T.kI.required],EduCompId:[this.EduCompId]}),this.translate.onLangChange.subscribe(function(o){n.currentLang=o.lang}),this.giftcategoryId>0&&(this.IdCtrl.setValue(this.gift.id),this.arbNameCtrl.setValue(this.gift.arabicName),this.engNameCtrl.setValue(this.gift.englishName))}},{key:"ngAfterViewInit",value:function(){var n=this;this.EduCompId=this.authserv.getEduCompId(),this.translate.onLangChange.subscribe(function(o){n.currentLang=o.lang})}},{key:"submit",value:function(){var n=this;this.submitted=!0,this.myForm.valid&&(this.spinner.show(),this.giftsService.addEditCategory(this.myForm.value).subscribe(function(r){1==r.returnValue?(n.dialogRef.close(!0),n.msg.success(0==n.IdCtrl.value?"ar"==n.currentLang?"\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0641\u0626\u0629":"Gift Category Added ":"ar"==n.currentLang?"\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0641\u0626\u0629":"Gift Category Updated ")):n.msg.success("ar"==n.currentLang?"\u0647\u0630\u0627 \u0627\u0644\u0627\u0633\u0645 \u0645\u0648\u062c\u0648\u062f \u0645\u0633\u0628\u0642\u0627 ":"This name is already exist"),n.spinner.hide()}))}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(T.qu),e.Y36(Te.e),e.Y36(ni.i),e.Y36(K.sK),e.Y36(Q.t2),e.Y36(Et._W),e.Y36(S.so),e.Y36(S.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-gifts-category-add"]],decls:17,vars:9,consts:[[1,"mb-2"],["mat-dialog-title",""],["title","Gifts.AddNewGiftCategory"],[1,"fas","fa-times-circle","closeIcon","float-right",3,"mat-dialog-close"],["mat-dialog-content","",2,"min-height","200px"],[1,"row"],[1,"col-12"],[3,"formGroup"],["label","Gifts.EnglishName",3,"control","submitted"],["label","Gifts.ArabicName",3,"control","submitted"],["mat-dialog-actions",""],[1,"orange-btn","radius-btn","w-100",3,"click"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"p",1),e._UZ(2,"page-title",2),e._UZ(3,"i",3),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"form",7),e.TgZ(8,"div",5),e.TgZ(9,"div",6),e._UZ(10,"app-input",8),e.qZA(),e.TgZ(11,"div",6),e._UZ(12,"app-input",9),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",10),e.TgZ(14,"button",11),e.NdJ("click",function(){return n.submit()}),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(3),e.Q6J("mat-dialog-close",!1),e.xp6(4),e.Q6J("formGroup",n.myForm),e.xp6(3),e.Q6J("control",n.engNameCtrl)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.arbNameCtrl)("submitted",n.submitted),e.xp6(3),e.hij(" ",e.lcZ(16,7,n.giftcategoryId>0?"Gifts.UpdateGiftCategory":"Gifts.SaveGiftCategory")," "))},directives:[S.uh,u.T,S.ZT,S.xY,T._Y,T.JL,T.sg,E.a,S.H8],pipes:[K.X$],styles:[".closeIcon[_ngcontent-%COMP%]{margin:7px}.orange-btn[_ngcontent-%COMP%]{line-height:34px}"]}),i}();function ns(i,s){1&i&&(e.TgZ(0,"th",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"course.englishName")," "))}function is(i,s){if(1&i&&(e.TgZ(0,"td",18),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.hij(" ",a.englishName," ")}}function as(i,s){1&i&&(e.TgZ(0,"th",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"course.arabicName")," "))}function os(i,s){if(1&i&&(e.TgZ(0,"td",18),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.hij(" ",a.arabicName," ")}}function rs(i,s){1&i&&(e.TgZ(0,"th",19),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"actions")," "))}function ls(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"a",23),e.NdJ("click",function(){e.CHM(a);var o=e.oxw(2).$implicit;return e.oxw(2).openAddDialog(o)}),e.ALo(1,"translate"),e._UZ(2,"i",24),e.qZA()}2&i&&e.s9C("matTooltip",e.lcZ(1,1,"General.Edit"))}function ss(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"a",25),e.NdJ("click",function(){e.CHM(a);var o=e.oxw(2).$implicit;return e.oxw(2).openDeleteDialog(o)}),e.ALo(1,"translate"),e._UZ(2,"i",26),e.qZA()}2&i&&e.s9C("matTooltip",e.lcZ(1,1,"General.Delete"))}function us(i,s){if(1&i&&(e.ynx(0),e.YNc(1,ls,3,3,"a",21),e.YNc(2,ss,3,3,"a",22),e.BQk()),2&i){var a=s.$implicit;e.xp6(1),e.Q6J("ngIf","Edit"===a.functionName),e.xp6(1),e.Q6J("ngIf","Delete"===a.functionName)}}function ds(i,s){if(1&i&&(e.TgZ(0,"td",18),e.YNc(1,us,3,2,"ng-container",20),e.qZA()),2&i){var a=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",a.rowFunctions)}}function cs(i,s){1&i&&e._UZ(0,"tr",27)}function ms(i,s){1&i&&e._UZ(0,"tr",28)}function ps(i,s){1&i&&(e.TgZ(0,"tr",29),e._UZ(1,"td",30),e.qZA())}function gs(i,s){if(1&i&&(e.TgZ(0,"table",7),e.ynx(1,8),e.YNc(2,ns,3,3,"th",9),e.YNc(3,is,2,1,"td",10),e.BQk(),e.ynx(4,11),e.YNc(5,as,3,3,"th",9),e.YNc(6,os,2,1,"td",10),e.BQk(),e.ynx(7,12),e.YNc(8,rs,3,3,"th",13),e.YNc(9,ds,2,1,"td",10),e.BQk(),e.YNc(10,cs,1,0,"tr",14),e.YNc(11,ms,1,0,"tr",15),e.YNc(12,ps,2,0,"tr",16),e.qZA()),2&i){var a=e.oxw();e.Q6J("dataSource",a.dataSource),e.xp6(10),e.Q6J("matHeaderRowDef",a.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns)}}function hs(i,s){if(1&i&&e._UZ(0,"app-table-skeleton",31),2&i){var a=e.oxw();e.Q6J("displayedColumns",a.displayedColumnsSkeleton)}}var _s=function(){return[10]},fs=function(){var i=function(){function s(a,n,o,r,g,v,x,w){var q=this;(0,j.Z)(this,s),this.fb=a,this.spinner=n,this.giftsService=o,this.route=r,this.authserv=g,this.dialog=v,this.toastr=x,this.languageService=w,this.curPage=1,this.submitted=!1,this.displayedColumns=["englishName","arabicName","actions"],this.displayedColumnsSkeleton=["course.englishName","course.arabicName","actions"],this.isLoaded=!1,r.queryParamMap.subscribe(function(N){q.functionId=Number(N.get("functionId")),q.functionId&&q.authserv.getUserRowFunctions(q.functionId).subscribe(function(L){L&&(q.rowFunctions=L)})}),this.EduCompId=this.authserv.getEduCompId()}return(0,Y.Z)(s,[{key:"FormCtrls",get:function(){return this.form.controls}},{key:"ngOnInit",value:function(){this.form=this.fb.group({id:[0],englishName:[null,[T.kI.required,Z.D.whiteSpace]],arabicName:[null,[T.kI.required,Z.D.whiteSpace]]}),this.getGiftsCategoryAll(this.curPage)}},{key:"ngAfterViewInit",value:function(){var n=this;this.dataSource&&(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort),this.authserv.EduCompId.subscribe(function(o){n.EduCompId=o.EduCompId,n.getGiftsCategoryAll(1),n.dataSource.paginator=n.paginator})}},{key:"applyFilter",value:function(n){this.dataSource.filter=n.target.value.trim().toLowerCase()}},{key:"getGiftsCategoryButton",value:function(n){this.FormCtrls.arabicName.value||this.FormCtrls.englishName.value?this.dataSource.paginator=this.paginator:this.toastr.warning("Gifts.enterOneField")}},{key:"getGiftsCategoryAll",value:function(n){var o=this;this.isLoaded=!1,this.curPage=n,this.giftsService.getCategoriesAll(this.EduCompId,n).subscribe(function(r){r&&(o.dataSource=new M.by(r.giftcategoryList),o.itemsCount=r.countItems,o.dataSource.sort=o.sort),o.isLoaded=!0})}},{key:"toEditGiftCategory",value:function(n){this.form.patchValue(n)}},{key:"onSubmit",value:function(){var n=this;if(this.submitted=!0,this.form.valid){var o={id:this.FormCtrls.id.value,eduCompId:this.EduCompId,arabicName:this.FormCtrls.arabicName.value,englishName:this.FormCtrls.englishName.value};this.spinner.show(),this.giftsService.addEditCategory(o).subscribe(function(r){1==r.returnValue?(0==o.id?(n.getGiftsCategoryAll(1),n.dataSource.paginator=n.paginator):n.getGiftsCategoryAll(n.curPage),n.toastr.success(0==o.id?"General.AddSuccessfully":"General.UpdateSuccessfully"),n.clearForm()):n.toastr.error(null==r?void 0:r.returnString),n.spinner.hide()})}else this.toastr.error("General.FormNotValid")}},{key:"openDeleteDialog",value:function(n){var r,g,o=this;this.dialog.open(pe.F,{data:{msg:this.languageService.isArabic?null!==(r=n.arabicName)&&void 0!==r?r:n.englishName:null!==(g=n.englishName)&&void 0!==g?g:n.arabicName,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(v){v&&o.removeGiftCategory(n)})}},{key:"removeGiftCategory",value:function(n){var o=this;this.spinner.show(),this.giftsService.RemoveGiftCategory(n.id).subscribe(function(r){2==r.returnValue?o.toastr.error("Gifts.giftCategoryDeleteError"):(o.toastr.success("General.DeleteSuccessfully"),1==o.dataSource.data.length&&o.curPage>1?(o.getGiftsCategoryAll(o.curPage-1),o.paginator.pageIndex=o.curPage-1):o.getGiftsCategoryAll(o.curPage),n.id==o.FormCtrls.id.value&&o.clearForm()),o.spinner.hide()})}},{key:"resetSearch",value:function(){this.clearForm(),this.getGiftsCategoryAll(1),this.dataSource.paginator=this.paginator}},{key:"clearForm",value:function(){this.form.reset(),this.FormCtrls.id.setValue(0),this.submitted=!1}},{key:"openAddDialog",value:function(n){var o=this;this.dialog.open(hl,{data:n,panelClass:"dialog-radius",minHeight:"30%"}).afterClosed().subscribe(function(r){console.log(r),r&&o.getGiftsCategoryAll(o.curPage)})}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(T.qu),e.Y36(Q.t2),e.Y36(ni.i),e.Y36(ne.gz),e.Y36(Te.e),e.Y36(S.uw),e.Y36(F.K),e.Y36(W.T))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-gifts-category-index"]],viewQuery:function(a,n){var o;1&a&&(e.Gf(Oe.NW,5),e.Gf(qe.YE,5)),2&a&&(e.iGM(o=e.CRH())&&(n.paginator=o.first),e.iGM(o=e.CRH())&&(n.sort=o.first))},decls:10,vars:8,consts:[[1,"admin-index-card","gift-categories-index"],["title","Gifts.GiftsCategories"],["label","Gifts.addNewGiftCategory",1,"float-right","d-inline-block","mx-1","mt--5","mb-2",3,"hideDefaultTitle","onClick"],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource",4,"ngIf","ngIfElse"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","disabled","page"],["loading",""],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","englishName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","arabicName"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[4,"ngFor","ngForOf"],["class","dark-blue",3,"matTooltip","click",4,"ngIf"],["class","danger",3,"matTooltip","click",4,"ngIf"],[1,"dark-blue",3,"matTooltip","click"],[1,"fas","fa-pen","font-medium-3","mr-2"],[1,"danger",3,"matTooltip","click"],[1,"fa","fa-trash","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"],[3,"displayedColumns"]],template:function(a,n){if(1&a&&(e.TgZ(0,"mat-card",0),e.TgZ(1,"mat-card-title"),e._UZ(2,"page-title",1),e.TgZ(3,"create-new-btn",2),e.NdJ("onClick",function(){return n.openAddDialog(null)}),e.qZA(),e.qZA(),e.TgZ(4,"mat-card-content"),e.TgZ(5,"div",3),e.YNc(6,gs,13,3,"table",4),e.TgZ(7,"mat-paginator",5),e.NdJ("page",function(g){return n.getGiftsCategoryAll(g.pageIndex+1)}),e.qZA(),e.qZA(),e.YNc(8,hs,1,1,"ng-template",null,6,e.W1O),e.qZA(),e.qZA()),2&a){var o=e.MAs(9);e.xp6(3),e.Q6J("hideDefaultTitle",!0),e.xp6(3),e.Q6J("ngIf",n.isLoaded)("ngIfElse",o),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(7,_s))("length",n.itemsCount)("pageSize",10)("disabled",!n.isLoaded)}},directives:[k.a8,k.n5,u.T,ln,k.dn,f.O5,Oe.NW,M.BZ,qe.YE,M.w1,M.fO,M.Dz,M.as,M.nj,M.Ee,M.ge,qe.nU,M.ev,f.sg,A.gM,M.XQ,M.Gk,Zt.I],pipes:[K.X$],styles:[".mat-column-englishName[_ngcontent-%COMP%], .mat-column-arabicName[_ngcontent-%COMP%]{max-width:200px!important;word-wrap:break-word!important;white-space:unset!important;-webkit-padding-end:15px;padding-inline-end:15px}.mat-column-actions[_ngcontent-%COMP%]{max-width:50px}"]}),i}();function vs(i,s){if(1&i&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&i){var o,a=s.$implicit,n=e.oxw();e.Q6J("value",a.Id),e.xp6(1),e.hij(" ",n.languageService.isArabic?null!==(o=a.ArbName)&&void 0!==o?o:a.EngName:null!==(o=a.EngName)&&void 0!==o?o:a.ArbName," ")}}var ml=function(){var i=function(){function s(a,n,o,r,g,v,x,w,q,N){(0,j.Z)(this,s),this.fb=a,this.authserv=n,this.giftsService=o,this.spinner=r,this.msg=g,this.fileService=v,this.languageService=x,this.appAssets=w,this.dialogRef=q,this.gift=N,this.submitted=!1,this.giftId=0,this.appearance=en.cm,this.giftId=null==N?void 0:N.id,this.giftId>0&&this.getGiftById(this.giftId),this.EduCompId=this.authserv.getEduCompId()}return(0,Y.Z)(s,[{key:"getAllGiftCategory",value:function(){var n=this;this.giftsService.getGiftCategoryDropDown(this.EduCompId).subscribe(function(o){o&&(n.giftCategory=o)})}},{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"engNameCtrl",get:function(){return this.myForm.get("englishName")}},{key:"arbNameCtrl",get:function(){return this.myForm.get("arabicName")}},{key:"categoryCtrl",get:function(){return this.myForm.get("giftsCategoryId")}},{key:"pointsCtrl",get:function(){return this.myForm.get("points")}},{key:"qtyCtrl",get:function(){return this.myForm.get("qty")}},{key:"descriptionCtrl",get:function(){return this.myForm.get("description")}},{key:"IdCtrl",get:function(){return this.myForm.get("id")}},{key:"ngOnInit",value:function(){this.myForm=this.fb.group({id:[""],giftPicture:[null],englishName:["",[T.kI.required,Z.D.whiteSpace]],arabicName:["",[T.kI.required,Z.D.whiteSpace]],giftsCategoryId:["",T.kI.required],points:["",T.kI.required],qty:["",T.kI.required],description:[""]}),this.getAllGiftCategory()}},{key:"ngAfterViewInit",value:function(){var n=this;this.authserv.EduCompId.subscribe(function(o){n.EduCompId=o.EduCompId,n.getAllGiftCategory()})}},{key:"OnSubmit",value:function(){var n=this;if(this.submitted=!0,this.myForm.valid){var o={id:this.FormCtrls.id.value,arabicName:this.FormCtrls.arabicName.value,englishName:this.FormCtrls.englishName.value,giftsCategoryId:this.FormCtrls.giftsCategoryId.value,points:this.FormCtrls.points.value,qty:this.FormCtrls.qty.value,description:this.FormCtrls.description.value,giftPicture:this.FormCtrls.giftPicture.value,eduCompId:this.EduCompId};this.spinner.show(),this.giftsService.addGift(o).subscribe(function(r){n.spinner.hide(),1==r.returnValue?(n.msg.success(0==n.IdCtrl.value?"General.AddSuccessfully":"General.UpdateSuccessfully"),n.dialogRef.close(!0)):n.msg.error(null==r?void 0:r.returnString)})}else this.msg.error("General.FormNotValid")}},{key:"getGiftById",value:function(n){var o=this;this.giftsService.getGiftById(n).subscribe(function(r){var g;o.giftArName=r.arabicName,o.giftEnName=r.englishName,null===(g=o.IdCtrl)||void 0===g||g.setValue(o.giftId),o.engNameCtrl.setValue(null==r?void 0:r.englishName),o.arbNameCtrl.setValue(null==r?void 0:r.arabicName),o.categoryCtrl.setValue(null==r?void 0:r.GiftCategoryId),o.pointsCtrl.setValue(null==r?void 0:r.points),o.qtyCtrl.setValue(null==r?void 0:r.qty),o.descriptionCtrl.setValue(null==r?void 0:r.description),o.FormCtrls.giftPicture.setValue(r.attach_path)})}},{key:"DeletePic",value:function(){var n=this;if(this.FormCtrls.giftPicture.value.FileAsBase64)return this.removeImage();this.spinner.show(),this.giftsService.deleteAttach(this.IdCtrl.value).subscribe(function(o){1==o.returnValue?(n.msg.success("General.DeleteSuccessfully"),n.removeImage()):n.msg.error(o),n.spinner.hide()})}},{key:"removeImage",value:function(){this.FormCtrls.giftPicture.setValue(null),this.fileService.resetFileById("gift-photo")}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(T.qu),e.Y36(Te.e),e.Y36(ni.i),e.Y36(Q.t2),e.Y36(F.K),e.Y36(ae.f),e.Y36(W.T),e.Y36(Ne.U),e.Y36(S.so),e.Y36(S.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-gifts-add"]],decls:41,vars:30,consts:[[1,"mb-2"],["mat-dialog-title",""],["title","Gifts.AddGift"],[1,"fas","fa-times-circle","closeIcon","float-right",3,"mat-dialog-close"],["mat-dialog-content","",2,"min-height","200px"],[1,"row"],[1,"col-12"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","labels.enName",3,"control","submitted"],["label","labels.arName",3,"control","submitted"],[1,"input-label"],[3,"appearance"],["formControlName","giftsCategoryId"],[3,"value",4,"ngFor","ngForOf"],[3,"control","submitted","isSelect"],["label","Gifts.points","type","number",3,"control","submitted"],["label","Gifts.qty","type","number",3,"control","submitted"],["accept","image/*",3,"control"],["label","Gifts.description","rows","1",3,"control","submitted"],["mat-dialog-actions","","align","end",1,"row"],[1,"orange-btn","radius-btn","big-padding","w-100",3,"click"],[3,"value"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"p",1),e._UZ(2,"page-title",2),e._UZ(3,"i",3),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"form",7),e.TgZ(8,"div",5),e.TgZ(9,"div",8),e._UZ(10,"app-input",9),e.qZA(),e.TgZ(11,"div",8),e._UZ(12,"app-input",10),e.qZA(),e.TgZ(13,"div",8),e.TgZ(14,"mat-label",11),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"mat-form-field",12),e.TgZ(18,"mat-select",13),e.TgZ(19,"mat-option"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.YNc(22,vs,2,2,"mat-option",14),e.qZA(),e.TgZ(23,"mat-hint"),e._UZ(24,"input-validation-msg",15),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",8),e._UZ(26,"app-input",16),e.qZA(),e.TgZ(27,"div",8),e._UZ(28,"app-input",17),e.qZA(),e.TgZ(29,"div",8),e.TgZ(30,"mat-label",11),e._uU(31),e.ALo(32,"translate"),e.qZA(),e._UZ(33,"app-button-file-input-new",18),e.qZA(),e.TgZ(34,"div",6),e._UZ(35,"app-textarea",19),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",20),e.TgZ(37,"div",8),e.TgZ(38,"button",21),e.NdJ("click",function(){return n.OnSubmit()}),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(3),e.Q6J("mat-dialog-close",!1),e.xp6(4),e.Q6J("formGroup",n.myForm),e.xp6(3),e.Q6J("control",n.FormCtrls.englishName)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.FormCtrls.arabicName)("submitted",n.submitted),e.xp6(3),e.hij(" ",e.lcZ(16,22,"Gifts.GiftsCategory")," "),e.xp6(2),e.Q6J("appearance",n.appearance),e.xp6(3),e.hij(" ",e.lcZ(21,24,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",n.giftCategory),e.xp6(2),e.Q6J("control",null==n.FormCtrls?null:n.FormCtrls.giftsCategoryId)("submitted",n.submitted)("isSelect",!0),e.xp6(2),e.Q6J("control",n.FormCtrls.points)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.FormCtrls.qty)("submitted",n.submitted),e.xp6(3),e.hij(" ",e.lcZ(32,26,"Gifts.GiftPic"),""),e.xp6(2),e.Q6J("control",n.FormCtrls.giftPicture),e.xp6(2),e.Q6J("control",n.FormCtrls.description)("submitted",n.submitted),e.xp6(4),e.hij(" ",e.lcZ(40,28,n.giftId>0?"General.Update":"General.Add")," "))},directives:[S.uh,u.T,S.ZT,S.xY,T._Y,T.JL,T.sg,E.a,H.hX,H.KE,xt.gD,T.JJ,T.u,pt.ey,f.sg,H.bx,fe.p,Qt,ce.R,S.H8],pipes:[K.X$],styles:[""]}),i}(),Zs=h(2326),Cs=h(3556);function bs(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"app-gift-card",12),e.NdJ("onEdit",function(r){return e.CHM(a),e.oxw(2).openEditDialog(r)}),e.qZA(),e.qZA()}if(2&i){var n=s.$implicit;e.xp6(1),e.Q6J("gift",n)("isAdmin",!0)}}function As(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"div",0),e.YNc(1,bs,2,2,"div",8),e.TgZ(2,"div",9),e.TgZ(3,"button",10),e.NdJ("click",function(){return e.CHM(a),e.oxw().openAddDialog(null)}),e._UZ(4,"i",11),e.TgZ(5,"p"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){var n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.gifts),e.xp6(5),e.Oqu(e.lcZ(7,2,"addNew"))}}function Ts(i,s){1&i&&(e.TgZ(0,"div",14),e._UZ(1,"app-card-skeleton",15),e.qZA()),2&i&&(e.xp6(1),e.Q6J("height",320))}var xs=function(){return[]};function Is(i,s){1&i&&(e.TgZ(0,"div",0),e.YNc(1,Ts,2,1,"div",13),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngForOf",e.DdM(1,xs).constructor(5)))}var ys=function(){var i=function(){function s(a,n,o,r,g,v,x,w){var q=this;(0,j.Z)(this,s),this.fb=a,this.giftsService=n,this.dialog=o,this.toastr=r,this.authserv=g,this.languageService=v,this.deviceService=x,this.route=w,this.isLoaded=!1,this.displayedColumns=["#","englishName","arabicName","qty","giftCategory","points","description","actions"],w.queryParamMap.subscribe(function(N){q.functionId=Number(N.get("functionId")),q.functionId&&q.authserv.getUserRowFunctions(q.functionId).subscribe(function(L){L&&(q.rowFunctions=L)})}),this.EduCompId=this.authserv.getEduCompId()}return(0,Y.Z)(s,[{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"ngOnInit",value:function(){this.myForm=this.fb.group({englishName:[null],arabicName:[null],giftsCategoryId:[null],points:[null]}),this.getGiftsAll()}},{key:"ngAfterViewInit",value:function(){var n=this;this.dataSource&&(this.dataSource.paginator=this.paginator,this.startSortingTable()),this.authserv.EduCompId.subscribe(function(o){n.EduCompId=o.EduCompId,n.getGiftsAll(),n.dataSource.paginator=n.paginator})}},{key:"startSortingTable",value:function(){var n=this;this.dataSource.sortingDataAccessor=function(o,r){var g,v;return"giftCategory"===r?n.languageService.isArabic?null!==(g=o.arbGiftCategory)&&void 0!==g?g:o.engGiftCategory:null!==(v=o.engGiftCategory)&&void 0!==v?v:o.arbGiftCategory:o[r]},this.dataSource.sort=this.sort}},{key:"applyFilter",value:function(n){this.dataSource.filter=n.target.value.trim().toLowerCase()}},{key:"getGiftsButton",value:function(n){this.FormCtrls.arabicName.value||this.FormCtrls.englishName.value||this.FormCtrls.giftsCategoryId.value||this.FormCtrls.points.value?this.dataSource.paginator=this.paginator:this.toastr.warning("Gifts.enterOneField")}},{key:"getGiftsAll",value:function(){var n=this;this.giftsService.getAllGifts(this.EduCompId).subscribe(function(o){o&&(n.gifts=o.giftList),n.isLoaded=!0})}},{key:"openAddDialog",value:function(n){var o=this;this.dialog.open(ml,{data:n,panelClass:"dialog-radius",minHeight:"30%",width:"50%"}).afterClosed().subscribe(function(r){console.log(r),r&&o.getGiftsAll()})}},{key:"resetSearch",value:function(){this.myForm.reset(),this.getGiftsAll(),this.dataSource.paginator=this.paginator}},{key:"openEditDialog",value:function(n){var o=this;this.dialog.open(ml,{data:n,panelClass:"dialog-radius",minHeight:"30%",width:"50%"}).afterClosed().subscribe(function(r){r&&o.getGiftsAll()})}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(T.qu),e.Y36(ni.i),e.Y36(S.uw),e.Y36(F.K),e.Y36(Te.e),e.Y36(W.T),e.Y36(Zs.x0),e.Y36(ne.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-gifts-index"]],viewQuery:function(a,n){var o;1&a&&(e.Gf(Oe.NW,5),e.Gf(qe.YE,5)),2&a&&(e.iGM(o=e.CRH())&&(n.paginator=o.first),e.iGM(o=e.CRH())&&(n.sort=o.first))},decls:10,vars:3,consts:[[1,"row"],[1,"col-12"],[1,"admin-index-card","gifts-index"],["title","Gifts.GiftsGallery"],["label","Gifts.AddGift",1,"float-right","float-right","d-inline-block","mx-1","mb-2","mt--5",3,"hideDefaultTitle","click"],[2,"max-height","95%"],["class","row",4,"ngIf","ngIfElse"],["loading",""],["class","col-xl-5 col-lg-3 col-md-4 col-sm-6 col-12 mb-3",4,"ngFor","ngForOf"],[1,"col-xl-5","col-lg-3","col-md-4","col-sm-6","col-12","mb-3"],[1,"dashed-btn","h-100",2,"min-height","285px",3,"click"],[1,"ft-plus-circle"],[3,"gift","isAdmin","onEdit"],["class","col-xl-5 col-lg-3 col-md-4 col-sm-6 col-12",4,"ngFor","ngForOf"],[1,"col-xl-5","col-lg-3","col-md-4","col-sm-6","col-12"],[3,"height"]],template:function(a,n){if(1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card",2),e.TgZ(3,"mat-card-title"),e._UZ(4,"page-title",3),e.TgZ(5,"create-new-btn",4),e.NdJ("click",function(){return n.openAddDialog(null)}),e.qZA(),e.qZA(),e.TgZ(6,"mat-card-content",5),e.YNc(7,As,8,4,"div",6),e.YNc(8,Is,2,2,"ng-template",null,7,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a){var o=e.MAs(9);e.xp6(5),e.Q6J("hideDefaultTitle",!0),e.xp6(2),e.Q6J("ngIf",n.isLoaded)("ngIfElse",o)}},directives:[k.a8,k.n5,u.T,ln,k.dn,f.O5,f.sg,Cs.d,Kt.Y],pipes:[K.X$],styles:[".px-25[_ngcontent-%COMP%]{padding-left:25px;padding-right:25px}  .admin-index-card.gifts-index .gift-card-actions .no-left{width:48%}  .admin-index-card.gifts-index .gift-card-actions .radius-btn{width:48%;min-height:auto;padding:7px 10px!important}"]}),i}();function qs(i,s){1&i&&(e.TgZ(0,"th",36),e._uU(1,"#"),e.qZA())}function Fs(i,s){if(1&i&&(e.TgZ(0,"td",37),e._uU(1),e.qZA()),2&i){var a=s.index;e.xp6(1),e.hij(" ",a+1," ")}}function ws(i,s){1&i&&(e.TgZ(0,"th",38),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Name")," "))}function Ss(i,s){if(1&i&&(e.TgZ(0,"td",37),e._uU(1),e.qZA()),2&i){var o,a=s.$implicit,n=e.oxw();e.xp6(1),e.hij(" ",n.languageService.isArabic?null!==(o=a.ar_name)&&void 0!==o?o:a.en_name:null!==(o=a.en_name)&&void 0!==o?o:a.ar_name," ")}}function Us(i,s){1&i&&(e.TgZ(0,"th",38),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Email")," "))}function ks(i,s){if(1&i&&(e.TgZ(0,"td",37),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.Oqu(a.account_email)}}function Es(i,s){1&i&&(e.TgZ(0,"th",38),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MobileNo")," "))}function Ds(i,s){if(1&i&&(e.TgZ(0,"td",37),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.Oqu(a.mobile)}}function Ns(i,s){1&i&&e._UZ(0,"th",36)}function Ms(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"a",42),e.NdJ("click",function(){e.CHM(a);var o=e.oxw(2).$implicit;return e.oxw().openDeleateDialog(o)}),e.ALo(1,"translate"),e._UZ(2,"i",43),e.qZA()}2&i&&e.s9C("matTooltip",e.lcZ(1,1,"General.Delete"))}function Qs(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Ms,3,3,"a",41),e.BQk()),2&i){var a=s.$implicit;e.xp6(1),e.Q6J("ngIf","Delete"===a.functionName)}}function Js(i,s){if(1&i&&(e.TgZ(0,"td",39),e.YNc(1,Qs,2,1,"ng-container",40),e.qZA()),2&i){var a=e.oxw();e.xp6(1),e.Q6J("ngForOf",a.rowFunctions)}}function Os(i,s){1&i&&e._UZ(0,"tr",44)}function Ls(i,s){1&i&&e._UZ(0,"tr",45)}function Ps(i,s){if(1&i&&(e.TgZ(0,"tr",46),e.TgZ(1,"td",47),e._uU(2),e.qZA(),e.qZA()),2&i){e.oxw();var a=e.MAs(50);e.xp6(2),e.hij(' No data matching the filter "',a.value,'" ')}}var Ys=function(s){return{functionId:s}},js=function(){return[10]},Bs=function(){var i=function(){function s(a,n,o,r,g,v,x,w,q){var N=this;(0,j.Z)(this,s),this.authserv=a,this.route=n,this.fb=o,this.courseService=r,this.toastr=g,this.dialog=v,this.spinner=x,this.languageService=w,this.fileService=q,this.curPage=1,this.itemCount=0,this.courseId=0,this.displayedColumns=["#","name","account_email","mobile","actions"],n.paramMap.subscribe(function(L){N.courseId=Number(L.get("courseId")),N.courseService.getCourseById(N.courseId).subscribe(function(R){R&&(N.courseArName=R.subCourse_ar_name,N.courseEnName=R.subCourse_en_name)})}),n.queryParamMap.subscribe(function(L){N.functionId=Number(L.get("functionId")),N.functionId&&N.authserv.getUserRowFunctions(N.functionId).subscribe(function(R){R&&(N.rowFunctions=R)})}),this.EduCompId=Number(this.authserv.getEduCompId())}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){this.myForm=this.fb.group({account_email:[null],mobile:[null],code:[null],excelFile:[null]}),this.getAllUsers(this.curPage)}},{key:"ngAfterViewInit",value:function(){var n=this;this.dataSource&&(this.dataSource.paginator=this.paginator,this.startSortingTable()),this.authserv.EduCompId.subscribe(function(o){n.EduCompId=o.EduCompId,n.getAllUsers(1),n.dataSource.paginator=n.paginator})}},{key:"startSortingTable",value:function(){var n=this;this.dataSource.sortingDataAccessor=function(o,r){var g,v;return"name"===r?n.languageService.isArabic?null!==(g=o.ar_name)&&void 0!==g?g:o.en_name:null!==(v=o.en_name)&&void 0!==v?v:o.ar_name:o[r]},this.dataSource.sort=this.sort}},{key:"applyFilter",value:function(n){this.dataSource.filter=n.target.value.trim().toLowerCase()}},{key:"getAllUsers",value:function(n){var o=this;this.curPage=n,this.spinner.show(),this.courseService.getAllUsers(n,this.courseId).subscribe(function(r){r&&(o.dataSource=new M.by(r.userList),o.itemCount=r.countItems,o.startSortingTable()),o.spinner.hide()})}},{key:"checkIfUserExist",value:function(){var o,r,n=this;if(this.formCtls.account_email.value||this.formCtls.mobile.value||this.formCtls.code.value){var g={account_email:(null===(o=this.formCtls.account_email.value)||void 0===o?void 0:o.trim())||null,mobile:(null===(r=this.formCtls.mobile.value)||void 0===r?void 0:r.trim())||null,code:this.formCtls.code.value||null};this.spinner.show(),this.courseService.checkUser(g,this.EduCompId).subscribe(function(v){n.toastr.info(v?"course.existUser":"course.notExistUser"),n.spinner.hide()})}else this.toastr.warning("course.enterOneField")}},{key:"addUser",value:function(){var o,r,n=this;if(this.formCtls.account_email.value||this.formCtls.mobile.value||this.formCtls.code.value){var g={account_email:(null===(o=this.formCtls.account_email.value)||void 0===o?void 0:o.trim())||null,mobile:(null===(r=this.formCtls.mobile.value)||void 0===r?void 0:r.trim())||null,code:this.formCtls.code.value||null};this.spinner.show(),this.courseService.checkUser(g,this.EduCompId).subscribe(function(v){if(!v)return n.toastr.warning("course.notExistUser"),void n.spinner.hide();n.courseService.addUser({userId:v.userId,subject_id:n.courseId}).subscribe(function(w){0==w.returnValue?n.toastr.error(w.returnString):(n.myForm.reset(),n.getAllUsers(1),n.dataSource.paginator=n.paginator,n.toastr.success("General.AddSuccessfully")),n.spinner.hide()})})}else this.toastr.warning("course.enterOneField")}},{key:"openDeleateDialog",value:function(n){var r,g,o=this;this.dialog.open(pe.F,{data:{msg:this.languageService.isArabic?null!==(r=n.ar_name)&&void 0!==r?r:n.en_name:null!==(g=n.en_name)&&void 0!==g?g:n.ar_name,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(v){v&&o.deleteUser(n)})}},{key:"deleteUser",value:function(n){var o=this;this.spinner.show(),this.courseService.deleteUser(n.id).subscribe(function(r){1==r.returnValue?(o.toastr.success("General.DeleteSuccessfully"),1==o.dataSource.data.length&&o.curPage>1?(o.getAllUsers(o.curPage-1),o.paginator.pageIndex=o.curPage-1):o.getAllUsers(o.curPage)):o.toastr.error(r.returnString),o.spinner.hide()})}},{key:"uploadUsersByExcel",value:function(){var n=this;null!=this.formCtls.excelFile.value?(this.spinner.show(),this.courseService.uploadUsersByExcel({uploadedFile:this.formCtls.excelFile.value,subject_id:this.courseId}).subscribe(function(o){1==(null==o?void 0:o.returnValue)||0==(null==o?void 0:o.isSendAllSuccess)&&0==(null==o?void 0:o.errors.length)?(n.toastr.success("General.UploadSuccessfully"),n.getAllUsers(1),n.dataSource.paginator=n.paginator):0==(null==o?void 0:o.returnValue)?n.toastr.error(null==o?void 0:o.returnString):0==(null==o?void 0:o.isSendAllSuccess)?(n.toastr.error(null==o?void 0:o.errors[0]),n.getAllUsers(1),n.dataSource.paginator=n.paginator):0==(null==o?void 0:o.isUploaded)&&n.toastr.error(null==o?void 0:o.errors[0]),n.spinner.hide(),n.formCtls.excelFile.setValue(null),n.fileService.resetFileById("excel-file")})):this.toastr.warning("course.excelSheet")}},{key:"formCtls",get:function(){return this.myForm.controls}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(Te.e),e.Y36(ne.gz),e.Y36(T.qu),e.Y36(ze.N),e.Y36(F.K),e.Y36(S.uw),e.Y36(Q.t2),e.Y36(W.T),e.Y36(ae.f))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-users-to-course"]],viewQuery:function(a,n){var o;1&a&&(e.Gf(Oe.NW,5),e.Gf(qe.YE,5)),2&a&&(e.iGM(o=e.CRH())&&(n.paginator=o.first),e.iGM(o=e.CRH())&&(n.sort=o.first))},decls:72,vars:37,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","","routerLink","/dashboard/setup/course/index",1,"btn","btn-warning","bg-light-warning","float-right",3,"queryParams"],["mat-raised-button","",1,"btn","btn-info","float-right",3,"click"],[1,"fa","fa-search","mr-1"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-6","col-12"],["label","labels.Email",3,"control"],["label","labels.MobileNo",3,"control"],["label","labels.Code",3,"control"],["accept",".xls, .xlsx","htmlId","excel-file","label","labels.ExcelSheet",3,"control"],[1,"info"],["align","end"],["mat-raised-button","",1,"btn","btn-info","bg-light-info",3,"click"],[1,"fa","fa-plus","mr-1"],["mat-raised-button","","type","button",1,"btn","btn-info","bg-light-info",3,"click"],[1,"fa","fa-upload","mr-1"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","account_email"],["matColumnDef","mobile"],["matColumnDef","actions"],["mat-cell","","class","text-center",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","page"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"text-center"],[4,"ngFor","ngForOf"],["class","danger p-0",3,"matTooltip","click",4,"ngIf"],[1,"danger","p-0",3,"matTooltip","click"],[1,"ft-trash","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","5",1,"mat-cell"]],template:function(a,n){var o;1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"a",2),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"a",3),e.NdJ("click",function(){return n.checkIfUserExist()}),e._UZ(10,"i",4),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.TgZ(13,"mat-card-content",5),e.TgZ(14,"div",0),e.TgZ(15,"div",1),e.TgZ(16,"form",6),e.TgZ(17,"div",0),e.TgZ(18,"div",7),e._UZ(19,"app-input",8),e.qZA(),e.TgZ(20,"div",7),e._UZ(21,"app-input",9),e.qZA(),e.TgZ(22,"div",7),e._UZ(23,"app-input",10),e.qZA(),e.TgZ(24,"div",7),e._UZ(25,"app-file-input",11),e.TgZ(26,"p",12),e._uU(27),e.ALo(28,"translate"),e.TgZ(29,"strong"),e._uU(30,"code"),e.qZA(),e._uU(31,"' "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"mat-card-actions",13),e.TgZ(33,"a",14),e.NdJ("click",function(){return n.addUser()}),e._UZ(34,"i",15),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"button",16),e.NdJ("click",function(){return n.uploadUsersByExcel()}),e._UZ(38,"i",17),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"div",0),e.TgZ(42,"div",1),e.TgZ(43,"mat-card"),e.TgZ(44,"mat-card-content"),e.TgZ(45,"mat-form-field",18),e.TgZ(46,"mat-label"),e._uU(47),e.ALo(48,"translate"),e.qZA(),e.TgZ(49,"input",19,20),e.NdJ("keyup",function(g){return n.applyFilter(g)}),e.qZA(),e.qZA(),e.TgZ(51,"div",21),e.TgZ(52,"table",22),e.ynx(53,23),e.YNc(54,qs,2,0,"th",24),e.YNc(55,Fs,2,1,"td",25),e.BQk(),e.ynx(56,26),e.YNc(57,ws,3,3,"th",27),e.YNc(58,Ss,2,1,"td",25),e.BQk(),e.ynx(59,28),e.YNc(60,Us,3,3,"th",27),e.YNc(61,ks,2,1,"td",25),e.BQk(),e.ynx(62,29),e.YNc(63,Es,3,3,"th",27),e.YNc(64,Ds,2,1,"td",25),e.BQk(),e.ynx(65,30),e.YNc(66,Ns,1,0,"th",24),e.YNc(67,Js,2,1,"td",31),e.BQk(),e.YNc(68,Os,1,0,"tr",32),e.YNc(69,Ls,1,0,"tr",33),e.YNc(70,Ps,3,1,"tr",34),e.qZA(),e.TgZ(71,"mat-paginator",35),e.NdJ("page",function(g){return n.getAllUsers(g.pageIndex+1)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(4),e.AsE(" ",e.lcZ(5,20,"course.AddEmployeeToCourse")," - ",n.languageService.isArabic?null!==(o=n.courseArName)&&void 0!==o?o:n.courseEnName:null!==(o=n.courseEnName)&&void 0!==o?o:n.courseArName," "),e.xp6(2),e.Q6J("queryParams",e.VKq(34,Ys,n.functionId)),e.xp6(1),e.hij(" ",e.lcZ(8,22,"General.Back")," "),e.xp6(4),e.hij(" ",e.lcZ(12,24,"General.Search")," "),e.xp6(5),e.Q6J("formGroup",n.myForm),e.xp6(3),e.Q6J("control",n.formCtls.account_email),e.xp6(2),e.Q6J("control",n.formCtls.mobile),e.xp6(2),e.Q6J("control",n.formCtls.code),e.xp6(2),e.Q6J("control",n.formCtls.excelFile),e.xp6(2),e.hij(" ",e.lcZ(28,26,"labels.MustHasColCodes")," '"),e.xp6(8),e.hij(" ",e.lcZ(36,28,"General.Add")," "),e.xp6(4),e.hij(" ",e.lcZ(40,30,"General.Upload")," "),e.xp6(8),e.Oqu(e.lcZ(48,32,"General.Search")),e.xp6(5),e.Q6J("dataSource",n.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(36,js))("length",n.itemCount)("pageSize",10))},directives:[k.a8,k.n5,Le.zs,ne.yS,k.dn,T._Y,T.JL,T.sg,E.a,Pn,k.hq,Le.lW,H.KE,H.hX,Tt.Nt,M.BZ,qe.YE,M.w1,M.fO,M.Dz,M.as,M.nj,M.Ee,Oe.NW,M.ge,M.ev,qe.nU,f.sg,f.O5,A.gM,M.XQ,M.Gk],pipes:[K.X$],styles:[".firstCol[_ngcontent-%COMP%]{width:50px;padding:0 10px!important;text-align:start}"]}),i}();function Rs(i,s){if(1&i&&(e.TgZ(0,"form",7),e.TgZ(1,"div",8),e.TgZ(2,"div",9),e._UZ(3,"app-button-file-input-new",10),e.qZA(),e.qZA(),e.qZA()),2&i){var a=e.oxw();e.Q6J("formGroup",a.myForm),e.xp6(3),e.Q6J("control",a.formCtrls.attach)("submitted",a.submitted)}}function Gs(i,s){1&i&&(e.TgZ(0,"p",11),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"uploadedBefore")))}function Vs(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"mat-dialog-actions",12),e.TgZ(1,"button",13),e.NdJ("click",function(){return e.CHM(a),e.oxw().onSubmit()}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.Upload")," "))}var Hs=function(){var i=function(){function s(a,n,o,r,g,v){(0,j.Z)(this,s),this.fb=a,this.toastr=n,this.courseService=o,this.spinner=r,this.data=g,this.dialogRef=v}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){var n=this;this.myForm=this.fb.group({attach:[null,[T.kI.required]]}),this.dialogRef.backdropClick().subscribe(function(o){n.onCloseDialog()})}},{key:"onCloseDialog",value:function(){this.dialogRef.close(this.data.uploadedBefore)}},{key:"formCtrls",get:function(){return this.myForm.controls}},{key:"onSubmit",value:function(){var n=this;this.submitted=!0,this.myForm.valid?(this.spinner.show(),this.courseService.uploadCertificate({SubjectRequestId:this.data.SubjectRequestId,SubjectUserId:null,File:this.formCtrls.attach.value}).subscribe(function(r){1==r.returnValue?(n.toastr.success("General.UploadSuccessfully"),n.submitted=!1,n.data.uploadedBefore=!0):n.toastr.error(r.returnString),n.spinner.hide()})):this.toastr.error("General.FormNotValid")}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(T.qu),e.Y36(F.K),e.Y36(ze.N),e.Y36(Q.t2),e.Y36(S.WI),e.Y36(S.so))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-upload-certificate-dialog"]],decls:9,vars:5,consts:[["mat-dialog-title","",1,"mb-2"],["addTitle","uploadCertificate","editTitle","uploaded",3,"id"],[1,"fas","fa-times-circle","closeIcon","float-right",3,"mat-dialog-close"],[1,"mtop-30"],["class","mbottom-20",3,"formGroup",4,"ngIf","ngIfElse"],["uploaded",""],["align","end",4,"ngIf"],[1,"mbottom-20",3,"formGroup"],[1,"row"],[1,"col-12"],["accept","image/*","htmlId","certificate-attach","icon","fas fa-cloud-upload-alt",3,"control","submitted"],[1,"uploaded"],["align","end"],[1,"orange-btn","radius-btn","w-100","mbottom-16",3,"click"]],template:function(a,n){if(1&a&&(e._UZ(0,"ngx-spinner"),e.TgZ(1,"p",0),e._UZ(2,"page-title",1),e._UZ(3,"i",2),e.qZA(),e.TgZ(4,"mat-dialog-content",3),e.YNc(5,Rs,4,3,"form",4),e.YNc(6,Gs,3,3,"ng-template",null,5,e.W1O),e.qZA(),e.YNc(8,Vs,4,3,"mat-dialog-actions",6)),2&a){var o=e.MAs(7);e.xp6(2),e.Q6J("id",n.data.uploadedBefore?1:0),e.xp6(1),e.Q6J("mat-dialog-close",n.data.uploadedBefore),e.xp6(2),e.Q6J("ngIf",!n.data.uploadedBefore)("ngIfElse",o),e.xp6(3),e.Q6J("ngIf",!n.data.uploadedBefore)}},directives:[Q.Ro,S.uh,u.T,S.ZT,S.xY,f.O5,T._Y,T.JL,T.sg,Qt,S.H8],pipes:[K.X$],styles:[".uploaded[_ngcontent-%COMP%]{font-size:18px;color:#e86820}"]}),i}(),_l=h(9475),fl=function(){var i=function(){function s(){(0,j.Z)(this,s),this.label="labels.Approve",this.onClick=new e.vpe}return(0,Y.Z)(s,[{key:"click",value:function(n){this.onClick.emit(n)}}]),s}();return i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-approve-btn"]],inputs:{label:"label",class:"class"},outputs:{onClick:"onClick"},decls:6,vars:7,consts:[["id","approve-btn",3,"click"],[1,"text-btn"],[1,"fas","fa-check"]],template:function(a,n){1&a&&(e.TgZ(0,"button",0),e.NdJ("click",function(r){return n.click(r)}),e.TgZ(1,"span",1),e._uU(2),e.ALo(3,"titlecase"),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"i",2),e.qZA()),2&a&&(e.Tol("approve-btn radius-btn "+n.class),e.xp6(2),e.hij(" ",e.lcZ(3,3,e.lcZ(4,5,n.label))," "))},pipes:[f.rS,K.X$],styles:[""]}),i}(),vl=function(){var i=function(){function s(){(0,j.Z)(this,s),this.label="labels.reject",this.onClick=new e.vpe}return(0,Y.Z)(s,[{key:"click",value:function(n){this.onClick.emit(n)}}]),s}();return i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-reject-btn"]],inputs:{label:"label",class:"class"},outputs:{onClick:"onClick"},decls:6,vars:7,consts:[["id","reject-btn",3,"click"],[1,"text-btn"],[1,"fas","fa-times"]],template:function(a,n){1&a&&(e.TgZ(0,"button",0),e.NdJ("click",function(r){return n.click(r)}),e.TgZ(1,"span",1),e._uU(2),e.ALo(3,"titlecase"),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"i",2),e.qZA()),2&a&&(e.Tol("reject-btn radius-btn "+n.class),e.xp6(2),e.hij(" ",e.lcZ(3,3,e.lcZ(4,5,n.label))," "))},pipes:[f.rS,K.X$],styles:[""]}),i}();function Ws(i,s){1&i&&(e.TgZ(0,"th",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Employee")," "))}function zs(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"td",22),e.TgZ(1,"img",23),e.NdJ("error",function(g){e.CHM(a);var v=e.oxw(2);return v.fileService.onError(g,v.appAssets.no_user_profile)}),e.qZA(),e._uU(2),e.qZA()}if(2&i){var n=s.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("src",o.fileService.previewPicture(n.employee_photo),e.LSH),e.xp6(1),e.hij(" ",n.employee_first_name+" "+n.employee_last_name," ")}}function $s(i,s){1&i&&(e.TgZ(0,"th",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"course.course")," "))}function Ks(i,s){if(1&i&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&i){var o,a=s.$implicit,n=e.oxw(2);e.xp6(1),e.hij(" ",n.languageService.isArabic?null!==(o=a.course_ar_name)&&void 0!==o?o:a.course_en_name:null!==(o=a.course_en_name)&&void 0!==o?o:a.course_ar_name," ")}}function Xs(i,s){1&i&&(e.TgZ(0,"th",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Reason")," "))}function eu(i,s){if(1&i&&(e.TgZ(0,"td",22),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&i){var a=s.$implicit;e.xp6(2),e.hij(" ",a.reasonOfRequest," ")}}function tu(i,s){1&i&&(e.TgZ(0,"th",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.period")," "))}function nu(i,s){if(1&i&&(e.TgZ(0,"td",22),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.qZA()),2&i){var a=s.$implicit;e.xp6(2),e.hij(" ",a.numberOfDays," ")}}function iu(i,s){1&i&&(e.TgZ(0,"th",24),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"actions")," "))}function au(i,s){if(1&i){var a=e.EpF();e.ynx(0),e.TgZ(1,"div",26),e.TgZ(2,"app-approve-btn",27),e.NdJ("onClick",function(){e.CHM(a);var o=e.oxw().$implicit;return e.oxw(2).approveCourseRequest(o,!0)}),e.qZA(),e.TgZ(3,"app-reject-btn",27),e.NdJ("onClick",function(){e.CHM(a);var o=e.oxw().$implicit;return e.oxw(2).approveCourseRequest(o,!1)}),e.qZA(),e.qZA(),e.BQk()}}function ou(i,s){1&i&&(e.TgZ(0,"span",31),e._uU(1),e.ALo(2,"translate"),e._UZ(3,"i",32),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Approved")," "))}function ru(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(a);var r=e.oxw(2).$implicit;return e.oxw(2).openUploadCertificationDialog(r)}),e.TgZ(1,"span",34),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"img",35),e.qZA()}if(2&i){var n=e.oxw(4);e.xp6(2),e.hij(" ",e.lcZ(3,2,"uploadCertificate")," "),e.xp6(2),e.Q6J("src",n.svgManager.upload,e.LSH)}}function lu(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"div",28),e.YNc(2,ou,4,3,"span",29),e.YNc(3,ru,5,4,"button",30),e.qZA(),e.BQk()),2&i){var a=e.oxw().$implicit;e.xp6(2),e.Q6J("ngIf",!a.isCrertified),e.xp6(1),e.Q6J("ngIf",a.isCrertified)}}function su(i,s){1&i&&(e.ynx(0),e.TgZ(1,"span",36),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"i",37),e.qZA(),e.BQk()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"labels.rejected")," "))}function uu(i,s){if(1&i&&(e.TgZ(0,"td",22),e.YNc(1,au,4,0,"ng-container",25),e.YNc(2,lu,4,2,"ng-container",25),e.YNc(3,su,5,3,"ng-container",25),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.Q6J("ngIf",null==a.status),e.xp6(1),e.Q6J("ngIf",1==a.status),e.xp6(1),e.Q6J("ngIf",0==a.status)}}function du(i,s){1&i&&e._UZ(0,"tr",38)}function cu(i,s){1&i&&e._UZ(0,"tr",39)}function mu(i,s){if(1&i&&(e.TgZ(0,"tr",40),e.TgZ(1,"td",41),e._uU(2),e.qZA(),e.qZA()),2&i){var a=e.oxw(2);e.xp6(2),e.hij(' No data matching the filter "',a.input.value,'" ')}}function pu(i,s){if(1&i&&(e.TgZ(0,"table",9),e.ynx(1,10),e.YNc(2,Ws,3,3,"th",11),e.YNc(3,zs,3,2,"td",12),e.BQk(),e.ynx(4,13),e.YNc(5,$s,3,3,"th",11),e.YNc(6,Ks,2,1,"td",12),e.BQk(),e.ynx(7,14),e.YNc(8,Xs,3,3,"th",11),e.YNc(9,eu,3,1,"td",12),e.BQk(),e.ynx(10,15),e.YNc(11,tu,3,3,"th",11),e.YNc(12,nu,3,1,"td",12),e.BQk(),e.ynx(13,16),e.YNc(14,iu,3,3,"th",17),e.YNc(15,uu,4,3,"td",12),e.BQk(),e.YNc(16,du,1,0,"tr",18),e.YNc(17,cu,1,0,"tr",19),e.YNc(18,mu,3,1,"tr",20),e.qZA()),2&i){var a=e.oxw();e.Q6J("dataSource",a.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",a.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns)}}function gu(i,s){if(1&i&&e._UZ(0,"app-table-skeleton",42),2&i){var a=e.oxw();e.Q6J("displayedColumns",a.displayedColumnsSkeleton)}}var hu=function(){return[10]},_u=function(){var i=function(){function s(a,n,o,r,g,v,x,w,q){var N=this;(0,j.Z)(this,s),this.courseAndTeachingRequestService=a,this.authserv=n,this.tostar=o,this.spinner=r,this.languageService=g,this.ar=v,this.fileService=x,this.appAssets=w,this.dialog=q,this.totalItems=0,this.displayedColumns=["employee_name","courseName","reasonOfRequest","numberOfDays","status"],this.displayedColumnsSkeleton=["labels.Employee","course.course","labels.Reason","labels.period","actions"],this.isLoaded=!1,this.svgManager=new Jt.E,v.queryParamMap.subscribe(function(L){N.functionId=Number(L.get("functionId"))}),this.EduCompId=this.authserv.getEduCompId()}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){this.getAllRequests(1)}},{key:"ngAfterViewInit",value:function(){var n=this;this.dataSource&&(this.dataSource.paginator=this.paginator,this.startSortingTable()),this.authserv.EduCompId.subscribe(function(o){n.EduCompId=o.EduCompId,n.getAllRequests(1),n.dataSource.paginator=n.paginator})}},{key:"getAllRequests",value:function(n){var o=this;this.isLoaded=!1,this.courseAndTeachingRequestService.getAllCourseRequests({page:n,EduCompId:this.EduCompId,mobile:null,code:null,account_email:null,approvement:null,courseId:null}).subscribe(function(g){g&&(o.dataSource=new M.by(g.Requests),o.totalItems=g.countItems,o.startSortingTable()),o.isLoaded=!0})}},{key:"approveCourseRequest",value:function(n,o){var r=this;this.spinner.show(),this.courseAndTeachingRequestService.ApproveCourseRequest(n.id,o).subscribe(function(g){if(1==g.returnValue){var v=r.dataSource.data.findIndex(function(x){return x==n});r.dataSource.data[v].status=o,r.tostar.success("General.UpdateSuccessfully")}else r.tostar.error(null==g?void 0:g.returnString);r.spinner.hide()})}},{key:"startSortingTable",value:function(){var n=this;this.dataSource.sortingDataAccessor=function(o,r){var g,v;switch(r){case"courseName":return n.languageService.isArabic?null!==(g=o.course_ar_name)&&void 0!==g?g:o.course_en_name:null!==(v=o.course_en_name)&&void 0!==v?v:o.course_ar_name;case"employee_name":return o.employee_first_name;default:return o[r]}},this.dataSource.sort=this.sort}},{key:"openUploadCertificationDialog",value:function(n){var o=this;this.dialog.open(Hs,{data:{SubjectRequestId:n.id,uploadedBefore:n.isCertificateUpload},maxHeight:"99vh",width:"500px",autoFocus:!1,disableClose:!0}).afterClosed().subscribe(function(r){var g=o.dataSource.data.findIndex(function(v){return v.id==n.id});o.dataSource.data[g].isCertificateUpload=r})}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(_l.o),e.Y36(Te.e),e.Y36(F.K),e.Y36(Q.t2),e.Y36(W.T),e.Y36(ne.gz),e.Y36(ae.f),e.Y36(Ne.U),e.Y36(S.uw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-employee-requestes"]],viewQuery:function(a,n){var o;1&a&&(e.Gf(Oe.NW,5),e.Gf(qe.YE,5)),2&a&&(e.iGM(o=e.CRH())&&(n.paginator=o.first),e.iGM(o=e.CRH())&&(n.sort=o.first))},decls:11,vars:7,consts:[[1,"row"],[1,"col-12"],[1,"admin-index-card","Learning-requests-index"],["title","Navbar.LearningRequests"],[2,"max-height","93%"],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource",4,"ngIf","ngIfElse"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","disabled","page"],["loading",""],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","employee_name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","courseName"],["matColumnDef","reasonOfRequest"],["matColumnDef","numberOfDays"],["matColumnDef","status"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-header-cell",""],["mat-cell",""],["width","40","height","40",1,"learning-request-index-img",3,"src","error"],["mat-header-cell","",1,"text-center"],[4,"ngIf"],[2,"display","flex","gap","5px 16px"],[1,"flex-grow-1",3,"onClick"],[2,"display","flex","gap","5px 16px","justify-content","center"],["class","success-color done-btn",4,"ngIf"],["class","dark-blue-btn radius-btn upload",3,"click",4,"ngIf"],[1,"success-color","done-btn"],[1,"fas","fa-check"],[1,"dark-blue-btn","radius-btn","upload",3,"click"],[1,"text-btn"],["width","15",3,"src"],[1,"danger-color","done-btn"],[1,"fas","fa-times"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","6",1,"mat-cell"],[3,"displayedColumns"]],template:function(a,n){if(1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card",2),e.TgZ(3,"mat-card-title"),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"mat-card-content",4),e.TgZ(6,"div",5),e.YNc(7,pu,19,3,"table",6),e.TgZ(8,"mat-paginator",7),e.NdJ("page",function(g){return n.getAllRequests(g.pageIndex+1)}),e.qZA(),e.qZA(),e.YNc(9,gu,1,1,"ng-template",null,8,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a){var o=e.MAs(10);e.xp6(7),e.Q6J("ngIf",n.isLoaded)("ngIfElse",o),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(6,hu))("length",n.totalItems)("pageSize",10)("disabled",!n.isLoaded)}},directives:[k.a8,k.n5,u.T,k.dn,f.O5,Oe.NW,M.BZ,qe.YE,M.w1,M.fO,M.Dz,M.as,M.nj,M.Ee,M.ge,M.ev,fl,vl,M.XQ,M.Gk,Zt.I],pipes:[K.X$],styles:[".mat-column-reasonOfRequest[_ngcontent-%COMP%], .mat-column-courseName[_ngcontent-%COMP%]{max-width:200px!important;word-wrap:break-word!important;white-space:unset!important;-webkit-padding-end:15px;padding-inline-end:15px}  .admin-index-card.Learning-requests-index #approve-btn,   .admin-index-card.Learning-requests-index #reject-btn{border-radius:16px;min-height:40px}  .admin-index-card.Learning-requests-index #approve-btn .text-btn,   .admin-index-card.Learning-requests-index #reject-btn .text-btn{font-size:12.5px;line-height:.69}  .admin-index-card.Learning-requests-index #approve-btn{padding:8px 15px 9px}  .admin-index-card.Learning-requests-index #reject-btn{padding:8px 23px 9px}  .admin-index-card.Learning-requests-index .done-btn{display:flex;align-items:center;justify-content:center;gap:12px;padding:12px 15px;flex-grow:1;font-size:12.5px;line-height:.66;min-height:40px}  .admin-index-card.Learning-requests-index .upload{padding:5px 20px;border-radius:16px;min-height:40px;display:flex;align-items:center;justify-content:center;gap:8px}  .admin-index-card.Learning-requests-index .upload span{white-space:nowrap}  .admin-index-card.Learning-requests-index .learning-request-index-img{margin:0 12px 0 0;border-radius:6.3px;background-color:#e7e7e9cc}  .admin-index-card.Learning-requests-index .diploma-text{color:#e86820}  .admin-index-card.Learning-requests-index .mat-column-status{max-width:200px}  .admin-index-card.Learning-requests-index .mat-column-status .mat-sort-header-container{justify-content:center}  .admin-index-card.Learning-requests-index td.mat-column-numberOfDays span{margin:0 10px}"]}),i}();function fu(i,s){1&i&&e._UZ(0,"i",26)}function vu(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){return e.CHM(a),e.oxw().clearForm()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"General.Reset")," "))}function Zu(i,s){1&i&&(e.TgZ(0,"th",28),e._uU(1,"#"),e.qZA())}function Cu(i,s){if(1&i&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&i){var a=s.index;e.xp6(1),e.Oqu(a+1)}}function bu(i,s){1&i&&(e.TgZ(0,"th",30),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"course.whatYouWillLearn")," "))}function Au(i,s){if(1&i&&(e.TgZ(0,"td",29),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.Oqu(a.whatYouLearn)}}function Tu(i,s){1&i&&e._UZ(0,"th",28)}function xu(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"a",35),e.NdJ("click",function(){e.CHM(a);var o=e.oxw(2).$implicit;return e.oxw().editCourseObjective(o)}),e.ALo(1,"translate"),e._UZ(2,"i",36),e.qZA()}2&i&&e.s9C("matTooltip",e.lcZ(1,1,"General.Edit"))}function Iu(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"a",37),e.NdJ("click",function(){e.CHM(a);var o=e.oxw(2).$implicit;return e.oxw().openDeleteDialog(o)}),e.ALo(1,"translate"),e._UZ(2,"i",38),e.qZA()}2&i&&e.s9C("matTooltip",e.lcZ(1,1,"General.Delete"))}function yu(i,s){if(1&i&&(e.ynx(0),e.YNc(1,xu,3,3,"a",33),e.YNc(2,Iu,3,3,"a",34),e.BQk()),2&i){var a=s.$implicit;e.xp6(1),e.Q6J("ngIf","Edit"===a.functionName),e.xp6(1),e.Q6J("ngIf","Delete"===a.functionName)}}function qu(i,s){if(1&i&&(e.TgZ(0,"td",31),e.YNc(1,yu,3,2,"ng-container",32),e.qZA()),2&i){var a=e.oxw();e.xp6(1),e.Q6J("ngForOf",a.rowFunctions)}}function Fu(i,s){1&i&&e._UZ(0,"tr",39)}function wu(i,s){1&i&&e._UZ(0,"tr",40)}function Su(i,s){if(1&i&&(e.TgZ(0,"tr",41),e.TgZ(1,"td",42),e._uU(2),e.qZA(),e.qZA()),2&i){e.oxw();var a=e.MAs(34);e.xp6(2),e.hij(' No data matching the filter "',a.value,'" ')}}var Uu=function(s){return{functionId:s}},ku=function(){return[10]},Eu=function(){var i=function(){function s(a,n,o,r,g,v,x,w){var q=this;(0,j.Z)(this,s),this.spinner=a,this.toastr=n,this.dialog=o,this.languageService=r,this.fb=g,this.route=v,this.authService=x,this.courseService=w,this.submitted=!1,this.itemsCounts=0,this.curPage=1,this.courseId=0,this.displayColumns=["#","whatYouLearn","actions"],this.route.paramMap.subscribe(function(N){return q.courseId=Number(N.get("courseId"))}),v.queryParamMap.subscribe(function(N){q.functionId=Number(N.get("functionId")),q.functionId&&q.authService.getUserRowFunctions(q.functionId).subscribe(function(L){L.length>0&&(q.rowFunctions=L)})}),this.EduCompId=Number(x.getEduCompId())}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){this.myForm=this.fb.group({subjectObjectiveId:[0],whatYouLearn:["",[T.kI.required,Z.D.whiteSpace]]}),this.getAllCourseObjectives(this.curPage)}},{key:"ngAfterViewInit",value:function(){var n=this;this.dataSource&&(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort),this.authService.EduCompId.subscribe(function(o){n.EduCompId=o.EduCompId})}},{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"applyFilter",value:function(n){this.dataSource.filter=n.target.value.trim().toLowerCase()}},{key:"editCourseObjective",value:function(n){this.myForm.patchValue(n)}},{key:"getAllCourseObjectives",value:function(n){var o=this;this.spinner.show(),this.courseService.getAllCourseObjectives(this.courseId,n).subscribe(function(r){r&&(o.dataSource=new M.by(r.courseList),o.itemsCounts=r.countItems,o.dataSource.sort=o.sort),o.spinner.hide()})}},{key:"onSubmit",value:function(){var n=this;if(this.submitted=!0,this.myForm.valid){var o={subject_id:this.courseId,id:this.FormCtrls.subjectObjectiveId.value,what_learn:this.FormCtrls.whatYouLearn.value};this.spinner.show(),this.courseService.addEditCourseObjective(o).subscribe(function(r){1==r.returnValue?(0==o.id?(n.getAllCourseObjectives(1),n.dataSource.paginator=n.paginator):n.getAllCourseObjectives(n.curPage),n.toastr.success(0==o.id?"General.AddSuccessfully":"General.UpdateSuccessfully"),n.clearForm()):n.toastr.error(null==r?void 0:r.returnString),n.spinner.hide()})}else this.toastr.error("General.FormNotValid")}},{key:"openDeleteDialog",value:function(n){var o=this;this.dialog.open(pe.F,{data:{msg:n.subjectObjectiveId,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(r){r&&o.deleteCourseObjective(n)})}},{key:"deleteCourseObjective",value:function(n){var o=this;this.spinner.show(),this.courseService.deleteCourseObjective(n.subjectObjectiveId).subscribe(function(r){1==r.returnValue?(o.toastr.success("General.DeleteSuccessfully"),1==o.dataSource.data.length&&o.curPage>1?(o.getAllCourseObjectives(o.curPage-1),o.paginator.pageIndex=o.curPage-1):o.getAllCourseObjectives(o.curPage),n.subjectObjectiveId==o.FormCtrls.subjectObjectiveId.value&&o.clearForm()):o.toastr.error(null==r?void 0:r.returnString),o.spinner.hide()})}},{key:"clearForm",value:function(){this.myForm.reset(),this.FormCtrls.subjectObjectiveId.setValue(0),this.submitted=!1}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(Q.t2),e.Y36(F.K),e.Y36(S.uw),e.Y36(W.T),e.Y36(T.qu),e.Y36(ne.gz),e.Y36(Te.e),e.Y36(ze.N))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-course-objectives"]],viewQuery:function(a,n){var o;1&a&&(e.Gf(Oe.NW,5),e.Gf(qe.YE,5)),2&a&&(e.iGM(o=e.CRH())&&(n.paginator=o.first),e.iGM(o=e.CRH())&&(n.sort=o.first))},decls:50,vars:30,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","","routerLink","/dashboard/setup/course/index",1,"btn","btn-warning","bg-light-warning","float-right",3,"queryParams"],[1,"container-fluid"],[3,"formGroup"],["label","course.whatYouWillLearn",3,"control","submitted"],["align","end"],["mat-raised-button","",1,"btn","btn-info","bg-light-info",3,"click"],["class","fa fa-plus mr-1",4,"ngIf"],["mat-raised-button","","class","btn btn-warning",3,"click",4,"ngIf"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","whatYouLearn"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-cell","","class","text-center",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","page"],[1,"fa","fa-plus","mr-1"],["mat-raised-button","",1,"btn","btn-warning",3,"click"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],["mat-cell","",1,"text-center"],[4,"ngFor","ngForOf"],["class","success p-0",3,"matTooltip","click",4,"ngIf"],["class","danger p-0",3,"matTooltip","click",4,"ngIf"],[1,"success","p-0",3,"matTooltip","click"],[1,"ft-edit-2","font-medium-3","mr-2"],[1,"danger","p-0",3,"matTooltip","click"],[1,"ft-trash","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","3",1,"mat-cell"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"a",2),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.TgZ(9,"mat-card-content",3),e.TgZ(10,"div",0),e.TgZ(11,"div",1),e.TgZ(12,"form",4),e.TgZ(13,"div",0),e.TgZ(14,"div",1),e._UZ(15,"app-input",5),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"mat-card-actions",6),e.TgZ(17,"button",7),e.NdJ("click",function(){return n.onSubmit()}),e.YNc(18,fu,1,0,"i",8),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.YNc(21,vu,3,3,"button",9),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",0),e.TgZ(23,"div",1),e.TgZ(24,"mat-card"),e.TgZ(25,"mat-card-title"),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"mat-card-content"),e.TgZ(29,"mat-form-field",10),e.TgZ(30,"mat-label"),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"input",11,12),e.NdJ("keyup",function(r){return n.applyFilter(r)}),e.qZA(),e.qZA(),e.TgZ(35,"div",13),e.TgZ(36,"table",14),e.ynx(37,15),e.YNc(38,Zu,2,0,"th",16),e.YNc(39,Cu,2,1,"td",17),e.BQk(),e.ynx(40,18),e.YNc(41,bu,3,3,"th",19),e.YNc(42,Au,2,1,"td",17),e.BQk(),e.ynx(43,20),e.YNc(44,Tu,1,0,"th",16),e.YNc(45,qu,2,1,"td",21),e.BQk(),e.YNc(46,Fu,1,0,"tr",22),e.YNc(47,wu,1,0,"tr",23),e.YNc(48,Su,3,1,"tr",24),e.qZA(),e.TgZ(49,"mat-paginator",25),e.NdJ("page",function(r){return n.getAllCourseObjectives(r.pageIndex+1)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(4),e.hij(" ",e.lcZ(5,17,0==n.FormCtrls.subjectObjectiveId.value?"course.AddCourseObjective":"course.UpdateCourseObjective")," "),e.xp6(2),e.Q6J("queryParams",e.VKq(27,Uu,n.functionId)),e.xp6(1),e.hij(" ",e.lcZ(8,19,"General.Back")," "),e.xp6(5),e.Q6J("formGroup",n.myForm),e.xp6(3),e.Q6J("control",n.FormCtrls.whatYouLearn)("submitted",n.submitted),e.xp6(3),e.Q6J("ngIf",0==(null==n.FormCtrls||null==n.FormCtrls.subjectObjectiveId?null:n.FormCtrls.subjectObjectiveId.value)),e.xp6(1),e.hij(" ",e.lcZ(20,21,0==(null==n.FormCtrls||null==n.FormCtrls.subjectObjectiveId?null:n.FormCtrls.subjectObjectiveId.value)?"General.Add":"General.Update")," "),e.xp6(2),e.Q6J("ngIf",n.FormCtrls.subjectObjectiveId.value>0),e.xp6(5),e.hij(" ",e.lcZ(27,23,"course.CourseObjectives")," "),e.xp6(5),e.Oqu(e.lcZ(32,25,"General.Search")),e.xp6(5),e.Q6J("dataSource",n.dataSource),e.xp6(10),e.Q6J("matHeaderRowDef",n.displayColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(29,ku))("length",n.itemsCounts)("pageSize",10))},directives:[k.a8,k.n5,Le.zs,ne.yS,k.dn,T._Y,T.JL,T.sg,E.a,k.hq,Le.lW,f.O5,H.KE,H.hX,Tt.Nt,M.BZ,qe.YE,M.w1,M.fO,M.Dz,M.as,M.nj,M.Ee,Oe.NW,M.ge,M.ev,qe.nU,f.sg,A.gM,M.XQ,M.Gk],pipes:[K.X$],styles:[".actions[_ngcontent-%COMP%]{max-width:80px}"]}),i}();function Du(i,s){1&i&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"today")," "))}function Nu(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ago")," "))}function Mu(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ago")," "))}function Qu(i,s){if(1&i&&(e.YNc(0,Nu,3,3,"span",27),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.YNc(6,Mu,3,3,"span",27)),2&i){var a=e.oxw().$implicit,n=e.oxw(2);e.Q6J("ngIf",n.languageService.isArabic),e.xp6(2),e.hij(" ",a.dayCounts," "),e.xp6(2),e.hij(" ",e.lcZ(5,4,1==a.dayCounts?"day":"days")," "),e.xp6(2),e.Q6J("ngIf",!n.languageService.isArabic)}}function Ju(i,s){if(1&i){var a=e.EpF();e.ynx(0),e.TgZ(1,"app-reject-btn",28),e.NdJ("onClick",function(){e.CHM(a);var o=e.oxw().$implicit;return e.oxw(2).approveTeachigRequest(o,!1)}),e.qZA(),e.TgZ(2,"app-approve-btn",28),e.NdJ("onClick",function(){e.CHM(a);var o=e.oxw().$implicit;return e.oxw(2).approveTeachigRequest(o,!0)}),e.qZA(),e.BQk()}}function Ou(i,s){1&i&&(e.ynx(0),e.TgZ(1,"span",29),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"i",30),e.qZA(),e.BQk()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"labels.Approved")," "))}function Lu(i,s){1&i&&(e.ynx(0),e.TgZ(1,"span",31),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"i",32),e.qZA(),e.BQk()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"labels.rejected")," "))}function Pu(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"mat-card",10),e.TgZ(2,"div",11),e.TgZ(3,"div",12),e.TgZ(4,"img",13),e.NdJ("error",function(x){e.CHM(a);var w=e.oxw(2);return w.fileService.onError(x,w.appAssets.no_user_profile)}),e.qZA(),e.qZA(),e.TgZ(5,"div",14),e.TgZ(6,"div",15),e.TgZ(7,"div",16),e._uU(8),e.qZA(),e.TgZ(9,"div",17),e._uU(10),e.qZA(),e.qZA(),e.TgZ(11,"div",18),e._UZ(12,"i",19),e.YNc(13,Du,4,3,"ng-container",20),e.YNc(14,Qu,7,6,"ng-template",null,21,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",22),e.TgZ(17,"div",23),e.TgZ(18,"span",24),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"span",25),e._uU(22),e.qZA(),e.qZA(),e.TgZ(23,"div",23),e.TgZ(24,"span",24),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"span",25),e._uU(28),e.qZA(),e.qZA(),e.TgZ(29,"div",23),e.TgZ(30,"span",24),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"span",25),e._uU(34),e.qZA(),e.qZA(),e.qZA(),e.TgZ(35,"div",26),e.YNc(36,Ju,3,0,"ng-container",27),e.YNc(37,Ou,5,3,"ng-container",27),e.YNc(38,Lu,5,3,"ng-container",27),e.qZA(),e.qZA(),e.qZA()}if(2&i){var g,n=s.$implicit,o=e.MAs(15),r=e.oxw(2);e.xp6(4),e.Q6J("src",r.fileService.previewPicture(n.employee_photo),e.LSH),e.xp6(4),e.hij(" ",n.employee_first_name+" "+n.employee_last_name," "),e.xp6(2),e.Oqu(n.jobTitle),e.xp6(3),e.Q6J("ngIf",0==n.dayCounts)("ngIfElse",o),e.xp6(6),e.hij(" ",e.lcZ(20,14,"labels.CourseName"),"\xa0: "),e.xp6(3),e.hij(" ",r.languageService.isArabic?null!==(g=n.course_ar_name)&&void 0!==g?g:n.course_en_name:null!==(g=n.course_en_name)&&void 0!==g?g:n.course_ar_name," "),e.xp6(3),e.hij("",e.lcZ(26,16,"labels.period"),"\xa0:"),e.xp6(3),e.hij(" ",n.numberOfDays," "),e.xp6(3),e.hij("",e.lcZ(32,18,"course.details"),"\xa0:"),e.xp6(3),e.hij(" ",n.details," "),e.xp6(2),e.Q6J("ngIf",null==n.status),e.xp6(1),e.Q6J("ngIf",1==n.status),e.xp6(1),e.Q6J("ngIf",0==n.status)}}function Yu(i,s){if(1&i&&(e.TgZ(0,"div",7),e.YNc(1,Pu,39,20,"div",8),e.qZA()),2&i){var a=e.oxw();e.xp6(1),e.Q6J("ngForOf",a.teachingRequests)}}function ju(i,s){1&i&&(e.TgZ(0,"div",9),e._UZ(1,"app-card-skeleton",33),e.qZA()),2&i&&(e.xp6(1),e.Q6J("height",260))}var Bu=function(){return[]};function Ru(i,s){1&i&&(e.TgZ(0,"div",0),e.YNc(1,ju,2,1,"div",8),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngForOf",e.DdM(1,Bu).constructor(2)))}var Gu=function(){var i=function(){function s(a,n,o,r,g,v,x,w,q){var N=this;(0,j.Z)(this,s),this.courseAndTeachingRequestService=a,this.authserv=n,this.tostar=o,this.spinner=r,this.languageService=g,this.router=v,this.ar=x,this.fileService=w,this.appAssets=q,this.isLoaded=!1,x.queryParamMap.subscribe(function(L){N.functionId=Number(L.get("functionId"))}),this.EduCompId=this.authserv.getEduCompId()}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){this.getAllRequests()}},{key:"ngAfterViewInit",value:function(){var n=this;this.authserv.EduCompId.subscribe(function(o){n.EduCompId=o.EduCompId,n.getAllRequests()})}},{key:"getAllRequests",value:function(){var n=this;this.courseAndTeachingRequestService.getAllTeachingRequests({EduCompId:this.EduCompId,mobile:null,code:null,account_email:null,approvement:null,courseId:null}).subscribe(function(r){r&&(n.teachingRequests=r.Requests),n.isLoaded=!0})}},{key:"approveTeachigRequest",value:function(n,o){var r=this;this.spinner.show(),this.courseAndTeachingRequestService.ApproveTeachingRequest(n.id,o).subscribe(function(g){if(1==g.returnValue){var v=r.teachingRequests.findIndex(function(x){return x==n});r.teachingRequests[v].status=o,r.tostar.success("General.UpdateSuccessfully")}else r.tostar.error(null==g?void 0:g.returnString);g.courseId&&1==o&&r.router.navigate(["dashboard/setup/course/edit-course/".concat(g.courseId,"/1")],{queryParams:{functionId:r.functionId}}),r.spinner.hide()})}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(_l.o),e.Y36(Te.e),e.Y36(F.K),e.Y36(Q.t2),e.Y36(W.T),e.Y36(ne.F0),e.Y36(ne.gz),e.Y36(ae.f),e.Y36(Ne.U))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-teaching-requests"]],decls:9,vars:2,consts:[[1,"row"],[1,"col-12"],[1,"admin-index-card"],["title","Navbar.TeachRequests"],[2,"max-height","97%"],["class","row pbottom-10","style","gap: 20px 0",4,"ngIf","ngIfElse"],["loading",""],[1,"row","pbottom-10",2,"gap","20px 0"],["class","col-md-6 col-12",4,"ngFor","ngForOf"],[1,"col-md-6","col-12"],[1,"request-card"],[1,"header"],[1,"img"],["width","60","height","60",3,"src","error"],[1,"header-details"],[1,"name-job"],[1,"name"],[1,"job"],[1,"days"],[1,"far","fa-clock"],[4,"ngIf","ngIfElse"],["notToday",""],[1,"content"],[1,"content-row"],[1,"title"],[1,"value"],[1,"card-btns"],[4,"ngIf"],[3,"onClick"],[1,"badge","badge-success"],[1,"fas","fa-check"],[1,"badge","badge-danger"],[1,"fas","fa-times"],[3,"height"]],template:function(a,n){if(1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card",2),e.TgZ(3,"mat-card-title"),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"mat-card-content",4),e.YNc(6,Yu,2,1,"div",5),e.YNc(7,Ru,2,2,"ng-template",null,6,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a){var o=e.MAs(8);e.xp6(6),e.Q6J("ngIf",n.isLoaded)("ngIfElse",o)}},directives:[k.a8,k.n5,u.T,k.dn,f.O5,f.sg,vl,fl,Kt.Y],pipes:[K.X$],styles:[".request-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding:16px;border-radius:10px;box-shadow:0 2px 12px #305d7c33;border:1px solid #e9e9e9;background-color:#e2eaf033;height:100%;margin:0}.request-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;justify-content:space-between}.request-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px}.request-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-details[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-grow:1}.request-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-details[_ngcontent-%COMP%]   .name-job[_ngcontent-%COMP%]{flex-grow:1}.request-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-details[_ngcontent-%COMP%]   .name-job[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:17.5px;font-weight:500;line-height:1.02;color:#437a9f;margin-bottom:5px}.request-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-details[_ngcontent-%COMP%]   .name-job[_ngcontent-%COMP%]   .job[_ngcontent-%COMP%]{font-size:14.5px;font-weight:500;line-height:1.25;color:#e86820}.request-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-details[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]{font-size:14.5px;line-height:1.4;color:#7b809a;display:flex;align-items:center;gap:3px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}.request-card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-details[_ngcontent-%COMP%]   .days[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.request-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex-grow:1}.request-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]{font-weight:600;line-height:1.4;margin-bottom:7px}.request-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.75px;color:#7b809a}.request-card[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:15px;letter-spacing:1px;color:#193141}.request-card[_ngcontent-%COMP%]   .card-btns[_ngcontent-%COMP%]{justify-content:flex-end}.request-card[_ngcontent-%COMP%]   .card-btns[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px;padding:5px 35px 6px;border-radius:20px;font-size:16px;font-weight:500;line-height:.66;height:50px}.request-card[_ngcontent-%COMP%]   .card-btns[_ngcontent-%COMP%]   .badge-danger[_ngcontent-%COMP%]{background-color:#d1031b2e;color:#d1031b}.request-card[_ngcontent-%COMP%]   .card-btns[_ngcontent-%COMP%]   .badge-success[_ngcontent-%COMP%]{background-color:#258f6e33;color:#258f6e}  .card-btns{display:flex;gap:20px 40px}  .card-btns #approve-btn,   .card-btns #reject-btn{padding:5px 35px 6px}"]}),i}();function Vu(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"img",25),e.NdJ("click",function(g){var x=e.CHM(a).$implicit,w=e.oxw();return w.selectedIcon=x.id,w.onSelectIcon(g)}),e.qZA()}if(2&i){var n=s.$implicit,o=e.oxw();e.ekj("selected",o.selectedIcon==n.id),e.s9C("src",n.path,e.LSH)}}function Hu(i,s){if(1&i&&(e.TgZ(0,"li",27),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.hij(" ",a," ")}}function Wu(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Hu,2,1,"li",26),e.BQk()),2&i){var a=e.oxw();e.xp6(1),e.Q6J("ngForOf",a.SubCat_Names)}}function zu(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"li",28),e.NdJ("click",function(){return e.CHM(a),e.oxw().addSubCategory()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"General.emptysubcategories")," "))}function $u(i,s){if(1&i&&(e.TgZ(0,"li",29),e._UZ(1,"app-input",30),e.qZA()),2&i){var a=e.oxw();e.xp6(1),e.Q6J("control",a.FormCtrls.SubCat_Name)("submitted",a.submitted)}}function Ku(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"li",31),e.TgZ(1,"button",32),e.NdJ("click",function(){return e.CHM(a),e.oxw().addSubCategory()}),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"i",33),e.qZA(),e.qZA()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"labels.addSubCategory")," \xa0 "))}function Xu(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"li",31),e.TgZ(1,"button",32),e.NdJ("click",function(){return e.CHM(a),e.oxw().saveNewSubCategory()}),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"i",33),e.qZA(),e.qZA()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.Save")," \xa0 "))}var ed=function(s){return{functionId:s}},td=function(s,a){return{"ml--5":s,"mr-5":a}},nd=function(){var i=function(){function s(a,n,o,r,g,v,x,w,q){var N=this;(0,j.Z)(this,s),this.fb=a,this._serviceCategories=n,this.toastr=o,this.spinner=r,this.fileService=g,this.route=v,this.authService=x,this.languageService=w,this.router=q,this.submitted=!1,this.showAddOnly=!1,this.addSubCat=!1,this.SubCat_Names=[],this.removeImage=0,this.functionId=0,this.iconsList=[{id:0,path:"assets/gif/category-1.gif"},{id:1,path:"assets/gif/category-2.gif"},{id:2,path:"assets/gif/category-3.gif"},{id:3,path:"assets/gif/category-4.gif"},{id:4,path:"assets/gif/category-5.gif"},{id:5,path:"assets/gif/category-6.gif"}],this.EduCompId=Number(x.getEduCompId()),v.queryParamMap.subscribe(function(L){N.functionId=Number(L.get("functionId"))})}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){this.form=this.fb.group({id:[0],Cat_Name:[null,[T.kI.required,Z.D.whiteSpace]],SubCat_Name:[null],File:[null]})}},{key:"FormCtrls",get:function(){return this.form.controls}},{key:"addSubCategory",value:function(){this.addSubCat=!0}},{key:"saveNewSubCategory",value:function(){this.form.value.SubCat_Name&&(this.SubCat_Names.push(this.form.value.SubCat_Name),this.addSubCat=!1,this.FormCtrls.SubCat_Name.setValue(null))}},{key:"RemoveFile",value:function(){this.removeImage=1,this.FormCtrls.File&&this.FormCtrls.File.setValue(null)}},{key:"Create",value:function(){var n=this;if(this.submitted=!0,this.form.valid){var o={Cat_Name:this.form.value.Cat_Name,File:this.form.value.File,Sub_Names:this.SubCat_Names};this.spinner.show(),this._serviceCategories.addCategories(o).subscribe(function(r){1==r.returnValue?(n.clearForm(),n.toastr.success("General.AddSuccessfully"),n.router.navigate(["dashboard/setup/categories/"],{queryParams:{functionId:n.functionId}})):n.toastr.error(r.returnString),n.spinner.hide()})}else this.toastr.error("General.FormNotValid")}},{key:"clearForm",value:function(){this.form.reset(),this.SubCat_Names=[],this.submitted=!1,this.addSubCat=!1}},{key:"onSelectIcon",value:function(n){var o=this;this.fileService.convertImgToBase64(n.target.src).then(function(g){o.FormCtrls.File.setValue(g)}).catch(function(g){console.error("error on select icon:",g)})}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(T.qu),e.Y36(cn.G),e.Y36(F.K),e.Y36(Q.t2),e.Y36(ae.f),e.Y36(ne.gz),e.Y36(Te.e),e.Y36(W.T),e.Y36(ne.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-category"]],inputs:{showAddOnly:"showAddOnly"},decls:38,vars:29,consts:[[1,"admin-index-card"],["parentTitle","categories.categories","title","addNew","parentTitleLink","/dashboard/setup/categories",3,"parentLinkParams"],[1,"mt-4"],[3,"formGroup"],[1,"row","g-2"],[1,"col-md-6","col-lg-4","col-12","mb-3",3,"ngClass"],[1,"row"],[1,"col-12","mb-2"],["label","labels.CatName",3,"control","submitted"],[1,"col-12"],[1,"input-label"],[1,"iconsContainer"],[1,"iconsScrolledWrapper"],["alt","icon","class","iconImg",3,"src","selected","click",4,"ngFor","ngForOf"],["accept","image/*","htmlId","cover-photo",3,"control","removeFile","onDelete"],[1,"col-md-6","col-lg-4","col-12","col-md-push-1"],[1,"subcatscontainer"],[1,"list-group","customeLG"],[4,"ngIf","ngIfElse"],["empty",""],["class","list-group-item hasInput",4,"ngIf"],["class","list-group-item hasBtn",4,"ngIf"],["align","end"],[1,"orange-btn","radius-btn","big-padding",3,"click"],[1,"text-btn"],["alt","icon",1,"iconImg",3,"src","click"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"list-group-item","customebg","pointer",3,"click"],[1,"list-group-item","hasInput"],[3,"control","submitted"],[1,"list-group-item","hasBtn"],[1,"btn","btn-transparent",3,"click"],[1,"icon-plus"]],template:function(a,n){if(1&a&&(e.TgZ(0,"mat-card",0),e.TgZ(1,"mat-card-title"),e._UZ(2,"page-title",1),e.qZA(),e.TgZ(3,"mat-card-content",2),e.TgZ(4,"form",3),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e._UZ(9,"app-input",8),e.qZA(),e.TgZ(10,"div",9),e.TgZ(11,"mat-label",10),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"div",11),e.TgZ(15,"div",12),e.YNc(16,Vu,1,3,"img",13),e.qZA(),e.TgZ(17,"app-button-file-input-new",14),e.NdJ("onDelete",function(){return n.selectedIcon=null}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"div",15),e.TgZ(19,"div",6),e.TgZ(20,"div",9),e.TgZ(21,"div",16),e.TgZ(22,"mat-label",10),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"ul",17),e.YNc(26,Wu,2,1,"ng-container",18),e.YNc(27,zu,3,3,"ng-template",null,19,e.W1O),e.YNc(29,$u,2,2,"li",20),e.YNc(30,Ku,5,3,"li",21),e.YNc(31,Xu,5,3,"li",21),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(32,"mat-card-actions",22),e.TgZ(33,"button",23),e.NdJ("click",function(){return n.Create()}),e.TgZ(34,"span",24),e._uU(35),e.ALo(36,"titlecase"),e.ALo(37,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a){var o=e.MAs(28);e.xp6(2),e.Q6J("parentLinkParams",e.VKq(24,ed,n.functionId)),e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(2),e.Q6J("ngClass",e.WLB(26,td,n.languageService.isArabic,n.languageService.isEnglish)),e.xp6(3),e.Q6J("control",n.FormCtrls.Cat_Name)("submitted",n.submitted),e.xp6(3),e.hij(" ",e.lcZ(13,16,"labels.CatIcon")," "),e.xp6(4),e.Q6J("ngForOf",n.iconsList),e.xp6(1),e.Q6J("control",n.FormCtrls.File)("removeFile",n.removeImage),e.xp6(6),e.hij(" ",e.lcZ(24,18,"labels.subCategories"),""),e.xp6(3),e.Q6J("ngIf",(null==n.SubCat_Names?null:n.SubCat_Names.length)>0)("ngIfElse",o),e.xp6(3),e.Q6J("ngIf",n.addSubCat),e.xp6(1),e.Q6J("ngIf",!n.addSubCat),e.xp6(1),e.Q6J("ngIf",n.addSubCat),e.xp6(4),e.hij(" ",e.lcZ(36,20,e.lcZ(37,22,"labels.saveCat"))," ")}},directives:[k.a8,k.n5,u.T,k.dn,T._Y,T.JL,T.sg,f.mk,E.a,H.hX,f.sg,Qt,f.O5,k.hq],pipes:[K.X$,f.rS],styles:[".iconsContainer[_ngcontent-%COMP%]{padding:10px;margin-top:5px;border-radius:15px;border:solid 1px #dbdbdb}.iconsContainer[_ngcontent-%COMP%]   .iconsScrolledWrapper[_ngcontent-%COMP%]{height:500px;overflow-y:scroll;display:flex;flex-direction:row;flex-wrap:wrap;align-content:flex-start;justify-content:flex-start;align-items:center}.iconsContainer[_ngcontent-%COMP%]   .iconsScrolledWrapper[_ngcontent-%COMP%]   .iconImg[_ngcontent-%COMP%]{width:74px;height:74px;margin:5px;cursor:pointer}.iconsContainer[_ngcontent-%COMP%]   .iconsScrolledWrapper[_ngcontent-%COMP%]   .iconImg.selected[_ngcontent-%COMP%]{box-shadow:0 4px 4px #19314129;border:solid 2px #437a9f;border-radius:11.6px}.customeLG[_ngcontent-%COMP%]{margin-top:5px;border:1px solid #dbdbdb;border-radius:15px;height:685px}.customeLG[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{padding:15px 13px;border-color:#e8e8e8;font-size:15px;font-family:Roboto-Regular,serif!important;border-radius:0}.customeLG[_ngcontent-%COMP%]   .list-group-item.customebg[_ngcontent-%COMP%]{background-color:#f4f4f4;color:#7b809a;font-size:14px}.customeLG[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:nth-of-type(1){border-radius:15px 15px 0 0}.customeLG[_ngcontent-%COMP%]   .list-group-item.hasBtn[_ngcontent-%COMP%]{padding:0;border-color:#e8e8e8}.customeLG[_ngcontent-%COMP%]   .list-group-item.hasBtn[_ngcontent-%COMP%]   .btn-transparent[_ngcontent-%COMP%]{width:100%;height:100%;margin:0!important;padding:15px;color:#7b809a;border-radius:0;font-size:12px;font-family:agrandirRegular,serif!important}.customeLG[_ngcontent-%COMP%]   .list-group-item.hasBtn[_ngcontent-%COMP%]   .btn-transparent[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#7b809a}.customeLG[_ngcontent-%COMP%]   .list-group-item.hasBtn[_ngcontent-%COMP%]   .btn-transparent[_ngcontent-%COMP%]:hover{box-shadow:0 1.9px 11.9px #305d7c33}.customeLG[_ngcontent-%COMP%]   .list-group-item.hasInput[_ngcontent-%COMP%]{padding:5px}.customeLG[_ngcontent-%COMP%]   .list-group-item.hasInput[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:0!important}.big-padding[_ngcontent-%COMP%]{padding:17px 150px!important}"]}),i}();function id(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",33),e._uU(2),e.qZA(),e.BQk()),2&i){var a=s.$implicit;e.xp6(1),e.Q6J("value",a.id),e.xp6(1),e.hij(" ",a.name," ")}}function ad(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",33),e._uU(2),e.qZA(),e.BQk()),2&i){var a=s.$implicit;e.xp6(1),e.Q6J("value",a.id),e.xp6(1),e.hij(" ",a.name," ")}}function od(i,s){if(1&i&&(e.TgZ(0,"li",35),e._uU(1),e.qZA()),2&i){var a=s.$implicit;e.xp6(1),e.hij(" ",a," ")}}function rd(i,s){if(1&i&&(e.ynx(0),e.YNc(1,od,2,1,"li",34),e.BQk()),2&i){var a=e.oxw();e.xp6(1),e.Q6J("ngForOf",a.dipOutcomes)}}function ld(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"li",36),e.NdJ("click",function(){return e.CHM(a),e.oxw().addoutcomes()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.emptyLearningOutcomes")," "))}function sd(i,s){if(1&i&&(e.TgZ(0,"li",37),e._UZ(1,"app-input",38),e.qZA()),2&i){var a=e.oxw();e.xp6(1),e.Q6J("control",a.FormCtrls.learningOutcomeName)("submitted",a.submitted)}}function ud(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"li",39),e.TgZ(1,"button",40),e.NdJ("click",function(){return e.CHM(a),e.oxw().addoutcomes()}),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"i",41),e.qZA(),e.qZA()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"labels.addNewOutcome")," \xa0 "))}function dd(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"li",39),e.TgZ(1,"button",40),e.NdJ("click",function(){return e.CHM(a),e.oxw().saveNewOutcomes()}),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"i",41),e.qZA(),e.qZA()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.Save")," \xa0 "))}var Zl=function(s){return{functionId:s}};function cd(i,s){if(1&i&&(e.TgZ(0,"button",42),e.TgZ(1,"span",43),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA()),2&i){var a=e.oxw();e.Q6J("queryParams",e.VKq(4,Zl,a.functionId)),e.xp6(2),e.hij(" ",e.lcZ(3,2,"General.cancel")," ")}}function md(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(a);var o=e.oxw();return o.stepIndex=o.stepIndex-1}),e.TgZ(1,"span",43),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.Back")," "))}function pd(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){e.CHM(a);var o=e.oxw();return o.stepIndex=o.stepIndex+1}),e.TgZ(1,"span",43),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.Next")," "))}function gd(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){return e.CHM(a),e.oxw().onSubmit()}),e.TgZ(1,"span",43),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA()}if(2&i){var n=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,1,0==n.DiplomaId?"General.saveDiploma":"General.Update")," ")}}var Cl=function(){var i=function(){function s(a,n,o,r,g,v,x,w){var q=this;(0,j.Z)(this,s),this.authService=a,this.courseServ=n,this.categoriesService=o,this.fb=r,this.spinner=g,this.msg=v,this.route=x,this.router=w,this.DiplomaId=0,this.submitted=!1,this.addOutcome=!1,this.dipOutcomes=[],this.appearance=en.cm,this.stepIndex=0,x.queryParamMap.subscribe(function(N){q.functionId=Number(N.get("functionId"))}),x.paramMap.subscribe(function(N){q.DiplomaId=Number(N.get("id")),q.DiplomaId>0&&q.getDiplomaById()})}return(0,Y.Z)(s,[{key:"onDeleteImg",value:function(){var n;null===(n=this.FormCtrls.diploma_attach)||void 0===n||n.setValue(null)}},{key:"ngOnInit",value:function(){this.EduCompId=Number(this.authService.getEduCompId()),this.myForm=this.fb.group({ar_name:[null,[T.kI.required]],en_name:[null,[T.kI.required]],eduCompId:[null],promoLink:[null,[T.kI.required]],diplomaDescreption:[null,[T.kI.required]],diploma_attach:[null,[T.kI.required]],subCategoryIds:[null,[T.kI.required]],category_ids:[null],learningOutcomeName:[null]}),this.getAllCategories()}},{key:"addoutcomes",value:function(){this.addOutcome=!0}},{key:"saveNewOutcomes",value:function(){this.FormCtrls.learningOutcomeName.value&&(this.dipOutcomes.push(this.FormCtrls.learningOutcomeName.value),this.addOutcome=!1,this.FormCtrls.learningOutcomeName.setValue(null))}},{key:"getAllCategories",value:function(){var n=this;this.categoriesService.getCategories().subscribe(function(o){o&&(n.mainCategories=o.MainCategories)})}},{key:"getDiplomaById",value:function(){var n=this;this.spinner.show(),this.courseServ.getDiplomaById(this.DiplomaId).subscribe(function(o){var r,g,v,x,w,q;if(n.spinner.hide(),o){n.Diploma=o,n.myForm.patchValue(n.Diploma),null===(r=n.FormCtrls.ar_name)||void 0===r||r.setValue(n.Diploma.diploma_ar_name),null===(g=n.FormCtrls.en_name)||void 0===g||g.setValue(n.Diploma.diploma_en_name),null===(v=n.FormCtrls.diploma_attach)||void 0===v||v.setValue(n.Diploma.attach_path),null===(x=n.FormCtrls.promoLink)||void 0===x||x.setValue(n.Diploma.promo_link),null===(w=n.FormCtrls.diplomaDescreption)||void 0===w||w.setValue(n.Diploma.description),n.dipOutcomes=n.Diploma.learning_outcomes;var N=n.Diploma.diploma_category[0].mainCatId;null===(q=n.FormCtrls.category_ids)||void 0===q||q.setValue(N),n.getAllSubCategories(N);var L=[];o.diploma_category.forEach(function(R){L.push(R.id)}),n.FormCtrls.subCategoryIds.setValue(L),o.attach_path&&(n.savedFile={name:n.Diploma.attach_path.replace("/dbFiles/diplomaThumbnails/",""),size:0,date:"",type:"image/"})}})}},{key:"onChangeMainCategory",value:function(){var n=this.FormCtrls.category_ids.value;this.FormCtrls.subCategoryIds.setValue(null),n>0?(this.getAllSubCategories(n),this.FormCtrls.subCategoryIds.enable()):this.FormCtrls.subCategoryIds.disable()}},{key:"getAllSubCategories",value:function(n){var o=this;this.categoriesService.getSubCategoriesByMainId(n).subscribe(function(r){r&&(o.subCategories=r.SubCategories)})}},{key:"onSubmit",value:function(){if(this.submitted=!0,this.FormCtrls.diploma_attach.value)if(this.myForm.valid){this.spinner.show();var n={ar_name:this.FormCtrls.ar_name.value,en_name:this.FormCtrls.en_name.value,diploma_attach:this.FormCtrls.diploma_attach.value,promoLink:this.FormCtrls.promoLink.value,LearningOutComes:this.dipOutcomes,subCategoryIds:this.FormCtrls.subCategoryIds.value,diplomaDescreption:this.FormCtrls.diplomaDescreption.value,eduCompId:this.EduCompId};0==this.DiplomaId?this.addDiploma(n):this.updateDiploma(n)}else this.msg.error("General.FormNotValid");else this.msg.warning("mustSelectCoverPhoto")}},{key:"addDiploma",value:function(n){var o=this;this.courseServ.addDiploma(n).subscribe(function(r){1==(null==r?void 0:r.returnValue)?(o.msg.success("General.AddSuccessfully"),o.DiplomaId=r.diplomaId,o.router.navigate(["dashboard/setup/diploma/index/"],{queryParams:{functionId:o.functionId}})):o.msg.error(null==r?void 0:r.returnString),o.spinner.hide()})}},{key:"updateDiploma",value:function(n){var o=this;this.courseServ.updateDiploma(this.DiplomaId,n).subscribe(function(r){1==(null==r?void 0:r.returnValue)?o.msg.success("General.UpdateSuccessfully"):o.msg.error(null==r?void 0:r.returnString),o.spinner.hide()})}},{key:"toEditDiploma",value:function(n){this.DiplomaId=n.id,this.myForm.patchValue(n)}},{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"clearForm",value:function(){this.myForm.reset(),this.submitted=!1,this.DiplomaId=0,this.dipOutcomes=null}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(Te.e),e.Y36(ze.N),e.Y36(cn.G),e.Y36(T.qu),e.Y36(Q.t2),e.Y36(F.K),e.Y36(ne.gz),e.Y36(ne.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-diploma-index"]],decls:73,vars:63,consts:[[1,"row"],[1,"col-12"],[1,"admin-index-card","add-diploma"],["addTitle","course.AddDiploma","editTitle","course.EditDiploma","parentTitle","course.Diplomas","parentTitleLink","/dashboard/setup/diploma/index",3,"parentLinkParams","id","subTitle"],[2,"margin-bottom","20px"],[1,"dark-blue",3,"percentage"],[1,"row","first-step"],[3,"formGroup"],[1,"col-md-4","col-12"],["label","labels.arName","type","text",3,"control","submitted"],["label","labels.enName","type","text",3,"control","submitted"],[1,"input-label"],["accept","image/*",3,"control","fileObject","onDelete"],["label","labels.promoLink","type","text",3,"control","submitted"],[3,"appearance"],["formControlName","category_ids",3,"selectionChange"],[3,"value","disabled"],[4,"ngFor","ngForOf"],[3,"control","submitted","isSelect"],["formControlName","subCategoryIds","multiple",""],["label","labels.diplomaDescreption",3,"control","submitted"],[1,"row","second-step"],[1,"subcatscontainer"],[1,"list-group","customeLG"],[4,"ngIf","ngIfElse"],["empty",""],["class","list-group-item hasInput",4,"ngIf"],["class","list-group-item hasBtn",4,"ngIf"],["align","end",1,"pt-0"],["class","dark-blue-btn radius-btn cancel-btn","routerLink","/dashboard/setup/diploma/index",3,"queryParams",4,"ngIf"],["class","dark-blue-btn radius-btn cancel-btn",3,"click",4,"ngIf"],["class","orange-btn radius-btn next-btn",3,"click",4,"ngIf"],[1,"clearfix"],[3,"value"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"list-group-item"],[1,"list-group-item","customebg","pointer",3,"click"],[1,"list-group-item","hasInput"],[3,"control","submitted"],[1,"list-group-item","hasBtn"],[1,"btn","btn-transparent",3,"click"],[1,"icon-plus"],["routerLink","/dashboard/setup/diploma/index",1,"dark-blue-btn","radius-btn","cancel-btn",3,"queryParams"],[1,"text-btn"],[1,"dark-blue-btn","radius-btn","cancel-btn",3,"click"],[1,"orange-btn","radius-btn","next-btn",3,"click"]],template:function(a,n){if(1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card",2),e.TgZ(3,"mat-card-title"),e._UZ(4,"page-title",3),e.qZA(),e.TgZ(5,"div",4),e._UZ(6,"progress-bar",5),e.qZA(),e.TgZ(7,"mat-card-content"),e.TgZ(8,"div",6),e.TgZ(9,"div",1),e.TgZ(10,"form",7),e.TgZ(11,"div",0),e.TgZ(12,"div",8),e._UZ(13,"app-input",9),e.qZA(),e.TgZ(14,"div",8),e._UZ(15,"app-input",10),e.qZA(),e.TgZ(16,"div",8),e.TgZ(17,"mat-label",11),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"app-button-file-input-new",12),e.NdJ("onDelete",function(){return n.onDeleteImg()}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",0),e.TgZ(22,"div",8),e._UZ(23,"app-input",13),e.qZA(),e.TgZ(24,"div",8),e.TgZ(25,"mat-label",11),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"mat-form-field",14),e.TgZ(29,"mat-select",15),e.NdJ("selectionChange",function(){return n.onChangeMainCategory()}),e.TgZ(30,"mat-option",16),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.YNc(33,id,3,2,"ng-container",17),e.qZA(),e.TgZ(34,"mat-hint"),e._UZ(35,"input-validation-msg",18),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",8),e.TgZ(37,"mat-label",11),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"mat-form-field",14),e.TgZ(41,"mat-select",19),e.TgZ(42,"mat-option",16),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.YNc(45,ad,3,2,"ng-container",17),e.qZA(),e.TgZ(46,"mat-hint"),e._UZ(47,"input-validation-msg",18),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(48,"div",0),e.TgZ(49,"div",8),e._UZ(50,"app-text-editor",20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(51,"div",21),e.TgZ(52,"div",1),e.TgZ(53,"form",7),e.TgZ(54,"div",0),e.TgZ(55,"div",1),e.TgZ(56,"div",22),e.TgZ(57,"mat-label",11),e._uU(58),e.ALo(59,"translate"),e.qZA(),e.TgZ(60,"ul",23),e.YNc(61,rd,2,1,"ng-container",24),e.YNc(62,ld,3,3,"ng-template",null,25,e.W1O),e.YNc(64,sd,2,2,"li",26),e.YNc(65,ud,5,3,"li",27),e.YNc(66,dd,5,3,"li",27),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(67,"mat-card-actions",28),e.YNc(68,cd,4,6,"button",29),e.YNc(69,md,4,3,"button",30),e.YNc(70,pd,4,3,"button",31),e.YNc(71,gd,4,3,"button",31),e.qZA(),e._UZ(72,"div",32),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a){var o=e.MAs(63);e.xp6(4),e.Q6J("parentLinkParams",e.VKq(61,Zl,n.functionId))("id",n.DiplomaId)("subTitle",0==n.stepIndex?"labels.fillTheGeneralInformationAboutNewDiploma":1==n.stepIndex?"course.addLearningOutcomes":""),e.xp6(2),e.Q6J("percentage",0==n.stepIndex?50:100),e.xp6(2),e.ekj("hidden",0!=n.stepIndex),e.xp6(2),e.Q6J("formGroup",n.myForm),e.xp6(3),e.Q6J("control",n.FormCtrls.ar_name)("submitted",n.submitted),e.xp6(2),e.Q6J("control",n.FormCtrls.en_name)("submitted",n.submitted),e.xp6(3),e.hij(" ",e.lcZ(19,49,"labels.cover-photo"),""),e.xp6(2),e.Q6J("control",n.FormCtrls.diploma_attach)("fileObject",n.savedFile),e.xp6(3),e.Q6J("control",n.FormCtrls.promoLink)("submitted",n.submitted),e.xp6(3),e.hij(" ",e.lcZ(27,51,"categories.category")," "),e.xp6(2),e.Q6J("appearance",n.appearance),e.xp6(2),e.Q6J("value",null)("disabled",!0),e.xp6(1),e.hij(" ",e.lcZ(32,53,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",n.mainCategories),e.xp6(2),e.Q6J("control",n.FormCtrls.category_ids)("submitted",n.submitted)("isSelect",!0),e.xp6(3),e.hij(" ",e.lcZ(39,55,"categories.subCategory")," "),e.xp6(2),e.Q6J("appearance",n.appearance),e.xp6(2),e.Q6J("value",null)("disabled",!0),e.xp6(1),e.hij(" ",e.lcZ(44,57,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",n.subCategories),e.xp6(2),e.Q6J("control",n.FormCtrls.subCategoryIds)("submitted",n.submitted)("isSelect",!0),e.xp6(3),e.Q6J("control",n.FormCtrls.diplomaDescreption)("submitted",n.submitted),e.xp6(1),e.ekj("hidden",1!=n.stepIndex),e.xp6(2),e.Q6J("formGroup",n.myForm),e.xp6(5),e.hij(" ",e.lcZ(59,59,"course.employeeWillLearn"),""),e.xp6(3),e.Q6J("ngIf",(null==n.dipOutcomes?null:n.dipOutcomes.length)>0)("ngIfElse",o),e.xp6(3),e.Q6J("ngIf",n.addOutcome),e.xp6(1),e.Q6J("ngIf",!n.addOutcome),e.xp6(1),e.Q6J("ngIf",n.addOutcome),e.xp6(2),e.Q6J("ngIf",0==n.stepIndex),e.xp6(1),e.Q6J("ngIf",n.stepIndex>0),e.xp6(1),e.Q6J("ngIf",n.stepIndex<1),e.xp6(1),e.Q6J("ngIf",1==n.stepIndex)}},directives:[k.a8,k.n5,u.T,ue.R,k.dn,T._Y,T.JL,T.sg,E.a,H.hX,Qt,H.KE,xt.gD,T.JJ,T.u,pt.ey,f.sg,H.bx,fe.p,bn.d,f.O5,k.hq,ne.rH],pipes:[K.X$],styles:["mat-card-subtitle[_ngcontent-%COMP%]{color:#7b809a;font-family:Roboto-Regular,sans-serif;font-size:15px;margin-top:-10px!important}.customeLG[_ngcontent-%COMP%]{margin-top:5px;border:1px solid #dbdbdb;border-radius:15px;width:100%;height:51vh}.customeLG[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{padding:15px 13px;border-color:#e8e8e8;font-size:14px;border-radius:0}.customeLG[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]:nth-of-type(1){border-radius:15px 15px 0 0}.customeLG[_ngcontent-%COMP%]   .list-group-item.customebg[_ngcontent-%COMP%]{background-color:#f4f4f4;color:#7b809a;font-size:14px}.customeLG[_ngcontent-%COMP%]   .list-group-item.hasBtn[_ngcontent-%COMP%]{padding:0;border-color:#e8e8e8;border-radius:0}.customeLG[_ngcontent-%COMP%]   .list-group-item.hasBtn[_ngcontent-%COMP%]   .btn-transparent[_ngcontent-%COMP%]{width:100%;height:100%;margin:0!important;padding:15px;color:#7b809a;border-radius:0 0 10px 10px;font-size:14px;font-family:agrandirRegular,serif!important}.customeLG[_ngcontent-%COMP%]   .list-group-item.hasBtn[_ngcontent-%COMP%]   .btn-transparent[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#7b809a}.customeLG[_ngcontent-%COMP%]   .list-group-item.hasBtn[_ngcontent-%COMP%]   .btn-transparent[_ngcontent-%COMP%]:hover{box-shadow:0 1.9px 11.9px #305d7c33}.customeLG[_ngcontent-%COMP%]   .list-group-item.hasInput[_ngcontent-%COMP%]{padding:5px}.customeLG[_ngcontent-%COMP%]   .list-group-item.hasInput[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:0!important}.big-padding[_ngcontent-%COMP%]{padding:17px 150px!important}  .add-diploma .mat-card-content{min-height:calc(100vh - 242px)!important}  .add-diploma .first-step,   .add-diploma .second-step{min-height:calc(100vh - 310px)}"]}),i}();function hd(i,s){if(1&i&&(e.TgZ(0,"div",5),e._UZ(1,"app-input",12),e.qZA()),2&i){var a=e.oxw();e.Q6J("ngClass",a.displayAllInputs?"col-md-6 col-12":"col-12"),e.xp6(1),e.Q6J("control",a.FormCtrl.SecondaryPath)("submitted",a.submitted)}}function _d(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"div",19),e.TgZ(1,"span",20),e.NdJ("click",function(){return e.CHM(a),e.oxw().displayAllInputs=!0}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA()}2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"advancedOptions")," "))}function fd(i,s){if(1&i&&(e.TgZ(0,"div",21),e._UZ(1,"app-input",22),e.qZA()),2&i){var a=e.oxw();e.xp6(1),e.Q6J("control",a.FormCtrl.view_percentage)("submitted",a.submitted)}}function vd(i,s){if(1&i&&(e.TgZ(0,"div",23),e._UZ(1,"app-text-editor",24),e.qZA()),2&i){var a=e.oxw();e.xp6(1),e.Q6J("control",a.FormCtrl.description)("submitted",a.submitted)}}var Zd=function(){var i=function(){function s(a,n,o,r,g,v,x){(0,j.Z)(this,s),this.fb=a,this.toastr=n,this.SubjectMaterialsService=o,this.spinner=r,this.dialog=g,this.dialogRef=v,this.data=x,this.submitted=!1,this.appearance=en.cm,this.displayAllInputs=!1,this.materialId=x.materialId}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){var n;this.myForm=this.fb.group({materialId:[this.materialId,T.kI.required],Id:[0],videoTypeId:["",T.kI.required],Name:["",[T.kI.required,Z.D.whiteSpace]],Path:["",[T.kI.required,Z.D.whiteSpace]],SecondaryPath:[""],view_percentage:[90,[T.kI.required,Z.D.minusNum,T.kI.max(100)]],description:[null]}),(null!=this.materialId||null!=this.materialId)&&(null===(n=this.FormCtrl.materialId)||void 0===n||n.setValue(this.materialId),this.data.Id&&this.myForm.patchValue(this.data))}},{key:"ngOnChanges",value:function(){var n,o;(null!=this.materialId||null!=this.materialId)&&(null===(o=null===(n=this.FormCtrl)||void 0===n?void 0:n.materialId)||void 0===o||o.setValue(this.materialId))}},{key:"FormCtrl",get:function(){var n;return null===(n=this.myForm)||void 0===n?void 0:n.controls}},{key:"getPartById",value:function(n){var o=this;this.spinner.show(),this.SubjectMaterialsService.getPartById(n).subscribe(function(r){o.myForm.patchValue(r.MaterialPart),o.spinner.hide()})}},{key:"addPart",value:function(){var n=this;this.submitted=!0,this.myForm.valid&&(this.spinner.show(),this.SubjectMaterialsService.addPart(this.myForm.value).subscribe(function(o){var r,g,v,x;1==o.returnValue&&(n.dialogRef.close(!0),n.toastr.success(0==n.FormCtrl.Id.value?"General.AddSuccessfully":"General.UpdateSuccessfully"),n.myForm.reset(),null===(r=n.FormCtrl.Id)||void 0===r||r.setValue(0),null===(g=n.FormCtrl.videoTypeId)||void 0===g||g.setValue(""),null===(v=n.FormCtrl.materialId)||void 0===v||v.setValue(n.materialId),null===(x=n.FormCtrl.view_percentage)||void 0===x||x.setValue(90),n.submitted=!1),n.spinner.hide()}))}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(T.qu),e.Y36(F.K),e.Y36(Je.r),e.Y36(Q.t2),e.Y36(S.uw),e.Y36(S.so),e.Y36(S.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-material-parts"]],features:[e.TTD],decls:35,vars:32,consts:[["mat-dialog-title","",1,"mb-0"],["addTitle","addVideo","editTitle","editVideo",3,"id"],[1,"fas","fa-times-circle","closeIcon","float-right",3,"mat-dialog-close"],[1,"mbottom-20",3,"formGroup"],[1,"row"],[3,"ngClass"],["label","Material.videoName","type","text",3,"control","submitted"],[1,"input-label"],[3,"appearance"],["formControlName","videoTypeId"],[3,"value"],[3,"control","submitted","isSelect"],["label","labels.Link","type","text",3,"control","submitted"],[3,"ngClass",4,"ngIf"],["class","advanced-options col-12",4,"ngIf"],["class","col-md-6 col-12",4,"ngIf"],["class","col-12",4,"ngIf"],["align","center"],[1,"orange-btn","radius-btn",3,"ngClass","disabled","click"],[1,"advanced-options","col-12"],[3,"click"],[1,"col-md-6","col-12"],["label","labels.ConfirmViewPercentage","type","number",3,"control","submitted"],[1,"col-12"],["label","VideoDescription",3,"control","submitted"]],template:function(a,n){var o;1&a&&(e.TgZ(0,"p",0),e._UZ(1,"page-title",1),e._UZ(2,"i",2),e.qZA(),e.TgZ(3,"mat-dialog-content"),e.TgZ(4,"form",3),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e._UZ(7,"app-input",6),e.qZA(),e.TgZ(8,"div",5),e.TgZ(9,"mat-label",7),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"mat-form-field",8),e.TgZ(13,"mat-select",9),e.TgZ(14,"mat-option"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"mat-option",10),e._uU(18,"VideoCipher"),e.qZA(),e.TgZ(19,"mat-option",10),e._uU(20,"Vimeo"),e.qZA(),e.TgZ(21,"mat-option",10),e._uU(22,"SproutVideo"),e.qZA(),e.qZA(),e.TgZ(23,"mat-hint"),e._UZ(24,"input-validation-msg",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",5),e._UZ(26,"app-input",12),e.qZA(),e.YNc(27,hd,2,3,"div",13),e.YNc(28,_d,4,3,"div",14),e.YNc(29,fd,2,2,"div",15),e.YNc(30,vd,2,2,"div",16),e.qZA(),e.qZA(),e.TgZ(31,"mat-dialog-actions",17),e.TgZ(32,"button",18),e.NdJ("click",function(){return n.addPart()}),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(1),e.Q6J("id",null!==(o=n.FormCtrl.Id.value)&&void 0!==o?o:0),e.xp6(1),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("formGroup",n.myForm),e.xp6(2),e.Q6J("ngClass",n.displayAllInputs?"col-md-6 col-12":"col-12"),e.xp6(1),e.Q6J("control",n.FormCtrl.Name)("submitted",n.submitted),e.xp6(1),e.Q6J("ngClass",n.displayAllInputs?"col-md-6 col-12":"col-12"),e.xp6(2),e.hij("",e.lcZ(11,26,"labels.Type")," "),e.xp6(2),e.Q6J("appearance",n.appearance),e.xp6(3),e.hij(" ",e.lcZ(16,28,"General.Choose"),""),e.xp6(2),e.Q6J("value",1),e.xp6(2),e.Q6J("value",2),e.xp6(2),e.Q6J("value",3),e.xp6(3),e.Q6J("control",n.FormCtrl.videoTypeId)("submitted",n.submitted)("isSelect",!0),e.xp6(1),e.Q6J("ngClass",n.displayAllInputs?"col-md-6 col-12":"col-12"),e.xp6(1),e.Q6J("control",n.FormCtrl.Path)("submitted",n.submitted),e.xp6(1),e.Q6J("ngIf",3==n.FormCtrl.videoTypeId.value),e.xp6(1),e.Q6J("ngIf",!n.displayAllInputs),e.xp6(1),e.Q6J("ngIf",n.displayAllInputs),e.xp6(1),e.Q6J("ngIf",n.displayAllInputs),e.xp6(2),e.Q6J("ngClass",n.displayAllInputs?"w-50":"w-100")("disabled",null==n.FormCtrl.materialId.value||null==n.FormCtrl.materialId.value),e.xp6(1),e.hij(" ",e.lcZ(34,30,0==n.FormCtrl.Id.value?"General.Add":"General.Update")," "))},directives:[S.uh,u.T,S.ZT,S.xY,T._Y,T.JL,T.sg,f.mk,E.a,H.hX,H.KE,xt.gD,T.JJ,T.u,pt.ey,H.bx,fe.p,f.O5,S.H8,bn.d],pipes:[K.X$],styles:[".mat-card-actions[_ngcontent-%COMP%]{margin-bottom:0!important}.advanced-options[_ngcontent-%COMP%]{color:#437a9f;text-decoration:underline;text-align:center;font-size:16px}.advanced-options[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.mat-dialog-content[_ngcontent-%COMP%]{display:inline;display:initial}  .add-video-dialog:not(:has(.advanced-options)){width:700px!important}"]}),i}(),Cd=["discardTemplete"];function bd(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"div",19),e.TgZ(1,"div",20),e.TgZ(2,"span",21),e._UZ(3,"img",22),e.qZA(),e.TgZ(4,"div",23),e._uU(5),e.qZA(),e.TgZ(6,"div",24),e.TgZ(7,"a",25),e.NdJ("click",function(){var v=e.CHM(a).$implicit;return e.oxw(2).openCreationDialog(v)}),e.ALo(8,"translate"),e._UZ(9,"i",26),e.qZA(),e.TgZ(10,"a",27),e.NdJ("click",function(){var v=e.CHM(a).$implicit;return e.oxw(2).openDeleateDialog(v)}),e.ALo(11,"translate"),e._UZ(12,"i",28),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){var n=s.$implicit,o=e.oxw(2);e.xp6(3),e.Q6J("src",o.svgManager.video_content,e.LSH),e.xp6(2),e.hij(" ",n.Name," "),e.xp6(2),e.s9C("matTooltip",e.lcZ(8,4,"General.Edit")),e.xp6(3),e.s9C("matTooltip",e.lcZ(11,6,"General.Delete"))}}function Ad(i,s){if(1&i){var a=e.EpF();e.ynx(0),e.TgZ(1,"div",14),e.YNc(2,bd,13,8,"div",15),e.TgZ(3,"div",16),e.TgZ(4,"button",17),e.NdJ("click",function(){return e.CHM(a),e.oxw().openCreationDialog(null)}),e._UZ(5,"i",18),e.TgZ(6,"p"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&i){var n=e.oxw();e.xp6(2),e.Q6J("ngForOf",n.parts),e.xp6(5),e.Oqu(e.lcZ(8,2,"addVideo"))}}var Td=function(){return{height:"50px",margin:"0px",borderRadius:"10px"}};function xd(i,s){1&i&&(e.TgZ(0,"div",31),e._UZ(1,"ngx-skeleton-loader",32),e.qZA()),2&i&&(e.xp6(1),e.Q6J("theme",e.DdM(1,Td)))}var Id=function(){return[1,2,3,4]};function yd(i,s){1&i&&(e.TgZ(0,"div",29),e.YNc(1,xd,2,2,"div",30),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngForOf",e.DdM(1,Id)))}function qd(i,s){1&i&&(e.TgZ(0,"p",33),e._UZ(1,"page-title",34),e._UZ(2,"i",35),e.qZA(),e.TgZ(3,"mat-dialog-content"),e.TgZ(4,"div",36),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"mat-dialog-actions"),e.TgZ(9,"button",37),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"button",38),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.qZA()),2&i&&(e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(4),e.hij(" ",e.lcZ(7,6,"backToCourseWithoutSavingChanges")," "),e.xp6(3),e.Q6J("mat-dialog-close",!1),e.xp6(1),e.hij(" ",e.lcZ(11,8,"stay")," "),e.xp6(2),e.Q6J("mat-dialog-close",!0),e.xp6(1),e.hij(" ",e.lcZ(14,10,"backToCourse")," "))}var Fd=function(){var i=function(){function s(a,n,o,r,g,v){var x=this;(0,j.Z)(this,s),this.toastr=a,this.SubjectMaterialsService=n,this.spinner=o,this.route=r,this.dialog=g,this.router=v,this.parts=[],this.svgManager=new Jt.E,this.isLoaded=!1,this.isAddFirstTime=!0,this.oldPartsIds=[],this.newAddedPartsIds=[],this.newDeletedPartsIds=[],r.queryParamMap.subscribe(function(w){x.functionId=Number(w.get("functionId")),x.materialId=Number(w.get("materialId")),x.subjectId=Number(w.get("subjectId"))}),this.materialId>0&&this.getMaterialParts(!0)}return(0,Y.Z)(s,[{key:"ngOnInit",value:function(){}},{key:"getMaterialParts",value:function(n){var o=this;this.isLoaded=!1,this.SubjectMaterialsService.getMaterialParts(this.materialId).subscribe(function(r){if(1==r.returnValue)if(o.parts=r.MaterialParts.filter(function(v){return!o.newDeletedPartsIds.includes(v.Id)}),o.isLoaded=!0,n)o.oldPartsIds=o.parts.map(function(v){return v.Id});else{var g=o.parts.map(function(v){return v.Id});o.newAddedPartsIds=g.filter(function(v){return!o.oldPartsIds.includes(v)})}})}},{key:"deletePart",value:function(n){var o=this;this.spinner.show(),this.SubjectMaterialsService.deletePart(n.Id).subscribe(function(r){if(1==r.returnValue){var g=o.parts.indexOf(n);o.parts.splice(g,1),o.toastr.success("General.DeleteSuccessfully"),o.spinner.hide()}})}},{key:"openDeleateDialog",value:function(n){var o=this;this.dialog.open(pe.F,{data:{msg:n.Name,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(r){if(r){o.newDeletedPartsIds.push(n.Id);var g=o.parts.findIndex(function(v){return v.Id==n.Id});o.parts.splice(g,1)}})}},{key:"openCreationDialog",value:function(n){var o=this;this.dialog.open(Zd,{data:null!=n?n:{materialId:this.materialId},width:"500px",maxHeight:"92vh",disableClose:!0,panelClass:"add-video-dialog"}).afterClosed().subscribe(function(r){r&&o.getMaterialParts(!1)})}},{key:"openDiscardDialog",value:function(){var n=this;this.dialog.open(this.discardTemplete,{panelClass:"discard-dialog",width:"470px"}).afterClosed().subscribe(function(o){o&&(n.newAddedPartsIds.length>0&&n.deleteParts(n.newAddedPartsIds),n.router.navigate(["/dashboard/setup/course/course-structure/".concat(n.subjectId)],{queryParams:{functionId:n.functionId}}))})}},{key:"deleteParts",value:function(n){var o=this;this.spinner.show(),this.SubjectMaterialsService.deleteParts(n).subscribe(function(r){1==r.returnValue&&o.spinner.hide()})}},{key:"saveLecture",value:function(){this.newDeletedPartsIds.length>0&&this.deleteParts(this.newDeletedPartsIds),this.router.navigate(["/dashboard/setup/course/course-structure/".concat(this.subjectId)],{queryParams:{functionId:this.functionId}})}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(F.K),e.Y36(Je.r),e.Y36(Q.t2),e.Y36(ne.gz),e.Y36(S.uw),e.Y36(ne.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-mat-parts-index"]],viewQuery:function(a,n){var o;1&a&&e.Gf(Cd,5),2&a&&e.iGM(o=e.CRH())&&(n.discardTemplete=o.first)},decls:23,vars:8,consts:[[1,"admin-index-card","add-lecture"],[1,"px-2"],["title","course.AddLecture"],[1,"px-2","mt-1"],[2,"max-height","87%"],[1,"row"],[1,"col-12","mt-3","stage-content"],[4,"ngIf","ngIfElse"],["align","end",1,"pr-3","pt-0"],[1,"dark-blue-btn","radius-btn","cancel-btn",3,"click"],[1,"text-btn"],[1,"orange-btn","radius-btn","next-btn",3,"click"],["loader",""],["discardTemplete",""],[1,"row","px-1","justify-content-between"],["class","col-12 col-lg-6",4,"ngFor","ngForOf"],[1,"col-12","col-lg-6","mb-2"],[1,"dashed-btn",3,"click"],[1,"ft-plus-circle"],[1,"col-12","col-lg-6"],[1,"stage-content-row"],[1,"icon","col-1","p-0","m-0"],["height","35","width","35","alt","icon",1,"mr-2","avatar",3,"src"],[1,"name","col-9","p-0","m-0"],[1,"action","text-center","col-2","p-0","m-0"],[1,"dark-blue","mr-2",3,"matTooltip","click"],[1,"fas","fa-pen","font-medium-3","mr-2"],[1,"danger",3,"matTooltip","click"],[1,"fa","fa-trash","font-medium-3","mr-2"],[1,"px-1","justify-content-between",2,"display","flex","flex-wrap","wrap"],["class","col-12 col-lg-6 px-0 mb-2",4,"ngFor","ngForOf"],[1,"col-12","col-lg-6","px-0","mb-2"],[3,"theme"],["mat-dialog-title",""],["title","discardChanges"],[1,"fas","fa-times-circle","closeIcon","float-right",3,"mat-dialog-close"],[1,"mb-3"],[1,"dark-blue-btn","radius-btn",3,"mat-dialog-close"],[1,"orange-btn","radius-btn",3,"mat-dialog-close"]],template:function(a,n){if(1&a&&(e.TgZ(0,"mat-card",0),e.TgZ(1,"mat-card-title",1),e._UZ(2,"page-title",2),e.qZA(),e.TgZ(3,"mat-card-subtitle",3),e._uU(4," Add general information about the course: "),e.qZA(),e._UZ(5,"hr"),e.TgZ(6,"mat-card-content",4),e.TgZ(7,"div",5),e.TgZ(8,"div",6),e.YNc(9,Ad,9,4,"ng-container",7),e.qZA(),e.qZA(),e.TgZ(10,"mat-card-actions",8),e.TgZ(11,"button",9),e.NdJ("click",function(){return n.openDiscardDialog()}),e.TgZ(12,"span",10),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.qZA(),e.TgZ(15,"button",11),e.NdJ("click",function(){return n.saveLecture()}),e.TgZ(16,"span",10),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(19,yd,2,2,"ng-template",null,12,e.W1O),e.YNc(21,qd,15,12,"ng-template",null,13,e.W1O)),2&a){var o=e.MAs(20);e.xp6(9),e.Q6J("ngIf",n.isLoaded)("ngIfElse",o),e.xp6(4),e.hij(" ",e.lcZ(14,4,"General.discard")," "),e.xp6(4),e.hij(" ",e.lcZ(18,6,"course.saveLecture")," ")}},directives:[k.a8,k.n5,u.T,k.$j,k.dn,f.O5,k.hq,f.sg,A.gM,B.xr,S.uh,S.ZT,S.xY,S.H8],pipes:[K.X$],styles:["mat-card-content[_ngcontent-%COMP%]{min-height:calc(100vh - 230px)!important}.stage-content[_ngcontent-%COMP%]{min-height:calc(100vh - 320px)!important}@media (max-width: 585px){  .discard-dialog .mat-dialog-container .mat-dialog-actions{flex-direction:column;gap:10px!important}  .discard-dialog .mat-dialog-container .mat-dialog-actions button{width:100%!important}}"]}),i}(),wd=h(5478),Sd=h(8452),Ud=["editor"];function kd(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"img",17),e.NdJ("click",function(){return e.CHM(a),e.oxw(),e.MAs(6).click()}),e.qZA()}if(2&i){var n=e.oxw(2);e.Q6J("src",n.svgManager.img_icon,e.LSH)}}function Ed(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"img",60),e.NdJ("click",function(){return e.CHM(a),e.oxw(),e.MAs(6).click()}),e.qZA()}if(2&i){var n=e.oxw(2);e.Q6J("src",null==n.FormCtrl.answerOneImage?null:n.FormCtrl.answerOneImage.value,e.LSH)}}function Dd(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"mat-radio-group",61),e.TgZ(1,"mat-radio-button",62),e.NdJ("click",function(){return e.CHM(a),e.oxw(2).onSelectCorrect(0)}),e.qZA(),e.qZA()}if(2&i){var n=e.oxw(2);e.xp6(1),e.Q6J("value",0)("checked",n.FormCtrl.answerOneIsCorrect.value)}}function Nd(i,s){1&i&&e._UZ(0,"i",63)}function Md(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"img",17),e.NdJ("click",function(){return e.CHM(a),e.oxw(),e.MAs(16).click()}),e.qZA()}if(2&i){var n=e.oxw(2);e.Q6J("src",n.svgManager.img_icon,e.LSH)}}function Qd(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"img",60),e.NdJ("click",function(){return e.CHM(a),e.oxw(),e.MAs(16).click()}),e.qZA()}if(2&i){var n=e.oxw(2);e.Q6J("src",null==n.FormCtrl.answerTwoImage?null:n.FormCtrl.answerTwoImage.value,e.LSH)}}function Jd(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"mat-radio-group",64),e.TgZ(1,"mat-radio-button",62),e.NdJ("click",function(){return e.CHM(a),e.oxw(2).onSelectCorrect(1)}),e.qZA(),e.qZA()}if(2&i){var n=e.oxw(2);e.xp6(1),e.Q6J("value",1)("checked",n.FormCtrl.answerTwoIsCorrect.value)}}function Od(i,s){1&i&&e._UZ(0,"i",63)}function Ld(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"img",17),e.NdJ("click",function(){return e.CHM(a),e.oxw(),e.MAs(26).click()}),e.qZA()}if(2&i){var n=e.oxw(2);e.Q6J("src",n.svgManager.img_icon,e.LSH)}}function Pd(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"img",60),e.NdJ("click",function(){return e.CHM(a),e.oxw(),e.MAs(26).click()}),e.qZA()}if(2&i){var n=e.oxw(2);e.Q6J("src",null==n.FormCtrl.answerThreeImage?null:n.FormCtrl.answerThreeImage.value,e.LSH)}}function Yd(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"mat-radio-group",65),e.TgZ(1,"mat-radio-button",62),e.NdJ("click",function(){return e.CHM(a),e.oxw(2).onSelectCorrect(2)}),e.qZA(),e.qZA()}if(2&i){var n=e.oxw(2);e.xp6(1),e.Q6J("value",2)("checked",n.FormCtrl.answerThreeIsCorrect.value)}}function jd(i,s){1&i&&e._UZ(0,"i",63)}function Bd(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"img",17),e.NdJ("click",function(){return e.CHM(a),e.oxw(),e.MAs(36).click()}),e.qZA()}if(2&i){var n=e.oxw(2);e.Q6J("src",n.svgManager.img_icon,e.LSH)}}function Rd(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"img",60),e.NdJ("click",function(){return e.CHM(a),e.oxw(),e.MAs(36).click()}),e.qZA()}if(2&i){var n=e.oxw(2);e.Q6J("src",null==n.FormCtrl.answerFourImage?null:n.FormCtrl.answerFourImage.value,e.LSH)}}function Gd(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"mat-radio-group",66),e.TgZ(1,"mat-radio-button",62),e.NdJ("click",function(){return e.CHM(a),e.oxw(2).onSelectCorrect(3)}),e.qZA(),e.qZA()}if(2&i){var n=e.oxw(2);e.xp6(1),e.Q6J("value",3)("checked",n.FormCtrl.answerFourIsCorrect.value)}}function Vd(i,s){1&i&&e._UZ(0,"i",63)}function Hd(i,s){if(1&i){var a=e.EpF();e.ynx(0),e.TgZ(1,"div",38),e.TgZ(2,"div",39),e.TgZ(3,"div",40),e.YNc(4,kd,1,1,"img",41),e.TgZ(5,"input",42,43),e.NdJ("change",function(r){return e.CHM(a),e.oxw().importOneFile(r)}),e.qZA(),e.YNc(7,Ed,1,1,"img",44),e.qZA(),e._UZ(8,"app-input",45),e.YNc(9,Dd,2,2,"mat-radio-group",46),e.YNc(10,Nd,1,0,"i",47),e.qZA(),e.qZA(),e.TgZ(11,"div",38),e.TgZ(12,"div",39),e.TgZ(13,"div",40),e.YNc(14,Md,1,1,"img",41),e.TgZ(15,"input",48,49),e.NdJ("change",function(r){return e.CHM(a),e.oxw().importTwoFile(r)}),e.qZA(),e.YNc(17,Qd,1,1,"img",44),e.qZA(),e._UZ(18,"app-input",50),e.YNc(19,Jd,2,2,"mat-radio-group",51),e.YNc(20,Od,1,0,"i",47),e.qZA(),e.qZA(),e.TgZ(21,"div",38),e.TgZ(22,"div",39),e.TgZ(23,"div",40),e.YNc(24,Ld,1,1,"img",41),e.TgZ(25,"input",52,53),e.NdJ("change",function(r){return e.CHM(a),e.oxw().importThreeFile(r)}),e.qZA(),e.YNc(27,Pd,1,1,"img",44),e.qZA(),e._UZ(28,"app-input",54),e.YNc(29,Yd,2,2,"mat-radio-group",55),e.YNc(30,jd,1,0,"i",47),e.qZA(),e.qZA(),e.TgZ(31,"div",38),e.TgZ(32,"div",39),e.TgZ(33,"div",40),e.YNc(34,Bd,1,1,"img",41),e.TgZ(35,"input",56,57),e.NdJ("change",function(r){return e.CHM(a),e.oxw().importFourFile(r)}),e.qZA(),e.YNc(37,Rd,1,1,"img",44),e.qZA(),e._UZ(38,"app-input",58),e.YNc(39,Gd,2,2,"mat-radio-group",59),e.YNc(40,Vd,1,0,"i",47),e.qZA(),e.qZA(),e.BQk()}if(2&i){var n=e.oxw();e.xp6(4),e.Q6J("ngIf",!(null!=n.FormCtrl.answerOneImage&&n.FormCtrl.answerOneImage.value)),e.xp6(3),e.Q6J("ngIf",null==n.FormCtrl.answerOneImage?null:n.FormCtrl.answerOneImage.value),e.xp6(1),e.Q6J("control",n.FormCtrl.answerOne)("submitted",n.submitted),e.xp6(1),e.Q6J("ngIf",!n.FormCtrl.answerOneIsCorrect.value),e.xp6(1),e.Q6J("ngIf",n.FormCtrl.answerOneIsCorrect.value),e.xp6(4),e.Q6J("ngIf",!(null!=n.FormCtrl.answerTwoImage&&n.FormCtrl.answerTwoImage.value)),e.xp6(3),e.Q6J("ngIf",null==n.FormCtrl.answerTwoImage?null:n.FormCtrl.answerTwoImage.value),e.xp6(1),e.Q6J("control",n.FormCtrl.answerTwo)("submitted",n.submitted),e.xp6(1),e.Q6J("ngIf",!n.FormCtrl.answerTwoIsCorrect.value),e.xp6(1),e.Q6J("ngIf",n.FormCtrl.answerTwoIsCorrect.value),e.xp6(4),e.Q6J("ngIf",!(null!=n.FormCtrl.answerThreeImage&&n.FormCtrl.answerThreeImage.value)),e.xp6(3),e.Q6J("ngIf",null==n.FormCtrl.answerThreeImage?null:n.FormCtrl.answerThreeImage.value),e.xp6(1),e.Q6J("control",n.FormCtrl.answerThree)("submitted",n.submitted),e.xp6(1),e.Q6J("ngIf",!n.FormCtrl.answerThreeIsCorrect.value),e.xp6(1),e.Q6J("ngIf",n.FormCtrl.answerThreeIsCorrect.value),e.xp6(4),e.Q6J("ngIf",!(null!=n.FormCtrl.answerFourImage&&n.FormCtrl.answerFourImage.value)),e.xp6(3),e.Q6J("ngIf",null==n.FormCtrl.answerFourImage?null:n.FormCtrl.answerFourImage.value),e.xp6(1),e.Q6J("control",n.FormCtrl.answerFour)("submitted",n.submitted),e.xp6(1),e.Q6J("ngIf",!n.FormCtrl.answerFourIsCorrect.value),e.xp6(1),e.Q6J("ngIf",n.FormCtrl.answerFourIsCorrect.value)}}function Wd(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"button",67),e.NdJ("click",function(){return e.CHM(a),e.oxw().handelPrevAndNext(!0)}),e._UZ(1,"i",68),e.TgZ(2,"span",37),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()}if(2&i){var n=e.oxw();e.xp6(1),e.Q6J("ngClass",n.languageService.isArabic?"fa-chevron-right":"fa-chevron-left"),e.xp6(2),e.hij(" ",e.lcZ(4,2,"Exam.prevQuestion")," ")}}function zd(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"button",69),e.NdJ("click",function(){return e.CHM(a),e.oxw().handelPrevAndNext(!1)}),e.TgZ(1,"span",37),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"i",68),e.qZA()}if(2&i){var n=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,2,"Exam.nextQuestion")," "),e.xp6(2),e.Q6J("ngClass",n.languageService.isArabic?"fa-chevron-left":"fa-chevron-right")}}function $d(i,s){if(1&i&&(e.TgZ(0,"span",78),e._UZ(1,"img",79),e.qZA()),2&i){var a=e.oxw(2).$implicit,n=e.oxw();e.xp6(1),e.Q6J("src",n.ifImageNeedFileService(a.Image)?n.uploadFileService.previewPicture(a.Image):a.Image,e.LSH)}}function Kd(i,s){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){var a=s.index,n=e.oxw(2).$implicit;e.ekj("onlyOne",1==n.ChoiceCounts)("correct",n.correctIndex==a),e.xp6(1),e.hij(" ",a+1," ")}}function Xd(i,s){if(1&i&&(e.TgZ(0,"span"),e._UZ(1,"img",80),e.qZA()),2&i){var a=e.oxw(3);e.xp6(1),e.Q6J("src",a.svgManager.exclamation,e.LSH)}}var bl=function(){return[]};function ec(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"td"),e.TgZ(2,"span",71),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"td"),e.YNc(5,$d,2,1,"span",72),e._UZ(6,"span",73),e.qZA(),e.TgZ(7,"td"),e.TgZ(8,"span",74),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.TgZ(11,"td"),e.TgZ(12,"span",75),e.YNc(13,Kd,2,5,"span",76),e.qZA(),e.YNc(14,Xd,2,1,"span",26),e.qZA(),e.TgZ(15,"td",77),e._UZ(16,"i",63),e.qZA(),e.BQk()),2&i){var a=e.oxw(),n=a.index,o=a.$implicit;e.xp6(3),e.Oqu(n+1),e.xp6(2),e.Q6J("ngIf",o.Image&&!o.Text),e.xp6(1),e.Q6J("innerHTML",o.Text,e.oJD),e.xp6(3),e.AsE(" ",o.mark," ",e.lcZ(10,7,"Exam.points")," "),e.xp6(4),e.Q6J("ngForOf",e.DdM(9,bl).constructor(o.ChoiceCounts)),e.xp6(1),e.Q6J("ngIf",0==o.ChoiceCounts)}}function tc(i,s){if(1&i&&(e.TgZ(0,"span",78),e._UZ(1,"img",79),e.qZA()),2&i){var a=e.oxw(3);e.xp6(1),e.Q6J("src",null==a.FormCtrl.questionImage?null:a.FormCtrl.questionImage.value,e.LSH)}}function nc(i,s){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){var a=s.index,n=e.oxw(3);e.ekj("onlyOne",1==n.noOfInsertedAnswers())("correct",n.getCorrectAnswerIndexFromForm()==a),e.xp6(1),e.hij(" ",a+1," ")}}function ic(i,s){if(1&i&&(e.TgZ(0,"span"),e._UZ(1,"img",80),e.qZA()),2&i){var a=e.oxw(3);e.xp6(1),e.Q6J("src",a.svgManager.exclamation,e.LSH)}}function ac(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"td"),e.TgZ(2,"span",71),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"td"),e.YNc(5,tc,2,1,"span",72),e._UZ(6,"span",73),e.qZA(),e.TgZ(7,"td"),e.TgZ(8,"span",74),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.TgZ(11,"td"),e.TgZ(12,"span",75),e.YNc(13,nc,2,5,"span",76),e.qZA(),e.YNc(14,ic,2,1,"span",26),e.qZA(),e._UZ(15,"td",77),e.BQk()),2&i){var o,a=e.oxw().index,n=e.oxw();e.xp6(3),e.Oqu(a+1),e.xp6(2),e.Q6J("ngIf",(null==n.FormCtrl.questionImage?null:n.FormCtrl.questionImage.value)&&!(null!=n.FormCtrl.exam_question_text&&n.FormCtrl.exam_question_text.value)),e.xp6(1),e.Q6J("innerHTML",null==n.FormCtrl.exam_question_text?null:n.FormCtrl.exam_question_text.value,e.oJD),e.xp6(3),e.AsE(" ",null!==(o=null==n.FormCtrl.questionMark?null:n.FormCtrl.questionMark.value)&&void 0!==o?o:0," ",e.lcZ(10,7,"Exam.points")," "),e.xp6(4),e.Q6J("ngForOf",e.DdM(9,bl).constructor(n.noOfInsertedAnswers())),e.xp6(1),e.Q6J("ngIf",0==n.noOfInsertedAnswers())}}function oc(i,s){if(1&i){var a=e.EpF();e.TgZ(0,"tr",70),e.NdJ("click",function(){var g=e.CHM(a),v=g.index,x=g.$implicit;return e.oxw().onSelectQuestion(v,x.ExamQuestId)}),e.YNc(1,ec,17,10,"ng-container",26),e.YNc(2,ac,16,10,"ng-container",26),e.qZA()}if(2&i){var n=s.index,o=e.oxw();e.ekj("active",n==o.selectedQuesIndex),e.xp6(1),e.Q6J("ngIf",n!=o.selectedQuesIndex),e.xp6(1),e.Q6J("ngIf",n==o.selectedQuesIndex)}}var rc=function(){var i=function(){function s(a,n,o,r,g,v,x,w,q,N,L){var R=this;(0,j.Z)(this,s),this.ar=a,this.fb=n,this.examService=o,this.authserv=r,this.toastr=g,this.spinner=v,this.uploadFileService=x,this.languageService=w,this.router=q,this.dialog=N,this.translate=L,this.examGroupHeaderId=0,this.subjectId=0,this.unitId=0,this.lessonId=0,this.units=[],this.lessions=[],this.questionsInGrid=[],this.questionId=0,this.submitted=!1,this.oneIsCorrect=!1,this.twoIsCorrect=!1,this.threeIsCorrect=!1,this.fourIsCorrect=!1,this.questionFile=null,this.answerOneFile=null,this.answerTwoFile=null,this.answerThreeFile=null,this.answerFourFile=null,this.perfectAnswerAttach_preview=null,this.selectedQuesIndex=0,this.svgManager=new Jt.E,this.editorWidth=0,this.editorFooterWidth=0,a.paramMap.subscribe(function(le){R.examId=Number(le.get("examId")),R.examGroupHeaderId=Number(le.get("examGroupHeaderId")),R.subjectId=Number(le.get("subjectId")),0!=R.examGroupHeaderId&&R.getAllQuestionsByHeadId()}),this.ar.queryParamMap.subscribe(function(le){R.functionId=Number(le.get("functionId"))})}return(0,Y.Z)(s,[{key:"ngAfterViewInit",value:function(){var n=this;setTimeout(function(){n.getEditorWidth()},3e3)}},{key:"ngOnInit",value:function(){this.myForm=this.fb.group({mainQuestion:[null],questionTypeId:[2,T.kI.required],questionImage:[null],remove_image:[!1],exam_question_text:[null],questionPerfectAnswer:[null],perfect_answer_attach:[null],questionMark:[1,[T.kI.required,Z.D.bigZero]],answerOneId:[null],answerOne:[null],answerOneIsCorrect:[null],answerOneImage:[null],answerTwoId:[null],answerTwo:[null],answerTwoIsCorrect:[null],answerTwoImage:[null],answerThreeId:[null],answerThree:[null],answerThreeIsCorrect:[null],answerThreeImage:[null],answerFourId:[null],answerFour:[null],answerFourIsCorrect:[null],answerFourImage:[null],answerOneRemove_image:[!1],answerTwoRemove_image:[!1],answerThreeRemove_image:[!1],answerFourRemove_image:[!1]}),this.educationCompanyId=this.authserv.getEduCompId(),this.questionTypeValidation()}},{key:"FormCtrl",get:function(){return this.myForm.controls}},{key:"getAllQuestionsByHeadId",value:function(){var n=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.spinner.show(),this.examService.getAllQuestionsByHeadId(this.examGroupHeaderId).subscribe(function(r){r&&(n.questionsInGrid=[],r.map(function(g){return g.correctIndex=g.AnswersIds.findIndex(function(v){return v==g.CorrectAnswerId})}),n.questionsInGrid=r,0==n.questionsInGrid.length?n.pushNewQuestion():n.questionsInGrid.length>0&&0==o&&(n.questionId=n.questionsInGrid[0].ExamQuestId,n.getQuestionForEditByID(n.questionId)),n.handleStatusAfterSubmit(o),n.spinner.hide())})}},{key:"questionTypeValidation",value:function(){var n,o,r,g;1===(null===(n=this.FormCtrl.questionTypeId)||void 0===n?void 0:n.value)||(null===(o=this.FormCtrl.questionPerfectAnswer)||void 0===o||o.clearAsyncValidators(),null===(r=this.FormCtrl.questionPerfectAnswer)||void 0===r||r.reset()),null===(g=this.FormCtrl.questionPerfectAnswer)||void 0===g||g.updateValueAndValidity()}},{key:"onSubmit",value:function(){var r,g,v,x,w,q,N,L,R,le,ke,Ee,ie,Be,We,lt,gt,et,tt,nt,st,D,y,P,G,z,X,_e,De,Ue,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.submitted=!0,2==(null===(r=this.FormCtrl.questionTypeId)||void 0===r?void 0:r.value)){var oe=this.questionFile||null,Ce=this.FormCtrl.questionImage.value,Re=this.answerOneFile||null,ut={choice_id:null!==(v=null===(g=this.FormCtrl.answerOneId)||void 0===g?void 0:g.value)&&void 0!==v?v:0,choice_text:null===(x=this.FormCtrl.answerOne)||void 0===x?void 0:x.value,is_correct:!(0!==this.FormCtrl.answerOneIsCorrect.value&&!this.FormCtrl.answerOneIsCorrect.value),choice_image:Re,remove_image:null===(w=this.FormCtrl.answerOneRemove_image)||void 0===w?void 0:w.value,path:null===(q=this.FormCtrl.answerOneImage)||void 0===q?void 0:q.value},Dt=this.answerTwoFile||null,it={choice_id:null!==(L=null===(N=this.FormCtrl.answerTwoId)||void 0===N?void 0:N.value)&&void 0!==L?L:0,choice_text:null===(R=this.FormCtrl.answerTwo)||void 0===R?void 0:R.value,is_correct:!!(null===(le=this.FormCtrl.answerTwoIsCorrect)||void 0===le?void 0:le.value),choice_image:Dt,remove_image:null===(ke=this.FormCtrl.answerTwoRemove_image)||void 0===ke?void 0:ke.value,path:null===(Ee=this.FormCtrl.answerTwoImage)||void 0===Ee?void 0:Ee.value},dt=this.answerThreeFile||null,An={choice_id:null!==(Be=null===(ie=this.FormCtrl.answerThreeId)||void 0===ie?void 0:ie.value)&&void 0!==Be?Be:0,choice_text:null===(We=this.FormCtrl.answerThree)||void 0===We?void 0:We.value,is_correct:!!(null===(lt=this.FormCtrl.answerThreeIsCorrect)||void 0===lt?void 0:lt.value),choice_image:dt,remove_image:null===(gt=this.FormCtrl.answerThreeRemove_image)||void 0===gt?void 0:gt.value,path:null===(et=this.FormCtrl.answerThreeImage)||void 0===et?void 0:et.value},Mn=this.answerFourFile||null,Tn={choice_id:null!==(nt=null===(tt=this.FormCtrl.answerFourId)||void 0===tt?void 0:tt.value)&&void 0!==nt?nt:0,choice_text:null===(st=this.FormCtrl.answerFour)||void 0===st?void 0:st.value,is_correct:!!(null===(D=this.FormCtrl.answerFourIsCorrect)||void 0===D?void 0:D.value),choice_image:Mn,remove_image:null===(y=this.FormCtrl.answerFourRemove_image)||void 0===y?void 0:y.value,path:null===(P=this.FormCtrl.answerFourImage)||void 0===P?void 0:P.value},Bt={exam_question_main_question:null===(G=this.FormCtrl.mainQuestion)||void 0===G?void 0:G.value,exam_question_mark:null===(z=this.FormCtrl.questionMark)||void 0===z?void 0:z.value,exam_question_perfect_answer:null===(X=this.FormCtrl.questionPerfectAnswer)||void 0===X?void 0:X.value,exam_question_text:null===(_e=this.FormCtrl.exam_question_text)||void 0===_e?void 0:_e.value,exam_question_type_id:null===(De=this.FormCtrl.questionTypeId)||void 0===De?void 0:De.value,exam_selected_question_head_id:this.examGroupHeaderId,exam_selected_subject_id:this.subjectId,exam_question_image:oe,remove_image:null===(Ue=this.FormCtrl.remove_image)||void 0===Ue?void 0:Ue.value,exam_question_id:this.questionId,mcq_choices:[ut,it,An,Tn]};if((null===Bt.exam_question_text||""==Bt.exam_question_text||null==Bt.exam_question_text)&&null===Bt.exam_question_image&&null===Ce)return void this.toastr.warning("Exam.QuestionMsgError");var Qn=[ut,it,An,Tn],xn=!1;if(Qn.forEach(function(nn){nn.is_correct&&(nn.choice_text||nn.choice_image||nn.path)&&(xn=!0)}),!xn)return void this.toastr.warning("Exam.MustChooseCorrectAnswer");if((null===ut.choice_text||""==ut.choice_text||null==ut.choice_text)&&null===ut.choice_image&&null==ut.path)return void this.toastr.warning("Exam.QuestionOneMsgError");if((null===it.choice_text||""==it.choice_text||null==it.choice_text)&&null===it.choice_image&&null==it.path)return void this.toastr.warning("Exam.QuestionTwoMsgError");this.questionId>0?this.editMcqQuestion(Bt,n,o):this.addMcqQuestion(Bt,n)}}},{key:"addMcqQuestion",value:function(n,o){var r=this;this.myForm.valid&&(this.spinner.show(),this.examService.addQuestion(n).subscribe(function(g){var v,x,w,q,N,L,R;200==g.returnValue?(r.getAllQuestionsByHeadId(o),null===(v=r.FormCtrl.mainQuestion)||void 0===v||v.setValue(null),null===(x=r.FormCtrl.questionMark)||void 0===x||x.setValue(null),null===(w=r.FormCtrl.questionTypeId)||void 0===w||w.setValue(null),null===(q=r.FormCtrl.questionImage)||void 0===q||q.setValue(null),null===(N=r.FormCtrl.exam_question_text)||void 0===N||N.setValue(null),null===(L=r.FormCtrl.questionPerfectAnswer)||void 0===L||L.setValue(null),null===(R=r.FormCtrl.perfect_answer_attach)||void 0===R||R.setValue(null),r.clearForm(),r.toastr.success("General.AddSuccessfully")):r.toastr.error(g.returnString),r.spinner.hide()}))}},{key:"editMcqQuestion",value:function(n,o,r){var g=this;this.myForm.valid&&(this.spinner.show(),this.examService.editQuestion(n).subscribe(function(v){var x,w,q,N,L,R,le;v&&(g.questionId=r,g.getAllQuestionsByHeadId(o),null===(x=g.FormCtrl.mainQuestion)||void 0===x||x.setValue(null),null===(w=g.FormCtrl.questionMark)||void 0===w||w.setValue(null),null===(q=g.FormCtrl.questionTypeId)||void 0===q||q.setValue(null),null===(N=g.FormCtrl.questionImage)||void 0===N||N.setValue(null),null===(L=g.FormCtrl.exam_question_text)||void 0===L||L.setValue(null),null===(R=g.FormCtrl.questionPerfectAnswer)||void 0===R||R.setValue(null),null===(le=g.FormCtrl.perfect_answer_attach)||void 0===le||le.setValue(null),g.oneIsCorrect=!1,g.twoIsCorrect=!1,g.threeIsCorrect=!1,g.fourIsCorrect=!1,g.clearForm(),g.toastr.success("General.UpdateSuccessfully")),g.spinner.hide()}))}},{key:"handleStatusAfterSubmit",value:function(n){if(this.notSavedQuestionData&&[1,2,6,7].includes(n)){var o={ExamQuestId:0,mark:this.notSavedQuestionData.questionMark,Text:this.notSavedQuestionData.exam_question_text,ChoiceCounts:this.noOfInsertedAnswers(!1),Image:this.notSavedQuestionData.questionImage,correctIndex:this.getCorrectAnswerIndexFromForm(!1)};this.questionsInGrid.push(o)}1==n?this.goToPrevQuestion():2==n?this.goToNextQuestion():3==n?(this.pushNewQuestion(),this.goToNotSavedQuestion(!0)):4==n?(this.pushNewQuestion(),this.currentQuestionToEdit=null,this.questionId=0,this.clearForm(),this.FormCtrl.questionMark.setValue(1)):5==n?this.router.navigate(["/dashboard/setup/course/course-structure/".concat(this.subjectId)],{queryParams:{functionId:this.functionId}}):6==n?(this.myForm.patchValue(this.notSavedQuestionData),this.displayQuestionImageInEditor(),this.currentQuestionToEdit=null):7==n&&this.getQuestionForEditByID(this.questionId)}},{key:"getQuestionForEditByID",value:function(n){var o=this;this.spinner.show(),this.examService.getQuestionForEditByID(n).subscribe(function(r){var g,v,x,w,q,N,L,R,le,ke,Ee,ie,Be,We,lt,gt,et,tt,nt,st,D,y,P,G,z,X,_e,De,Ue,oe,Ce,Re,ut,Dt,it,dt,An,Mn,Tn,Bt,Qn,xn,nn,pl,gl;r&&(o.currentQuestionToEdit=r,o.changeCurrentCorrectAnswer=!1,null===(g=o.FormCtrl.mainQuestion)||void 0===g||g.setValue(r.main_question),null===(v=o.FormCtrl.questionMark)||void 0===v||v.setValue(r.mark),null===(x=o.FormCtrl.exam_question_text)||void 0===x||x.setValue(r.question_text),null===(w=o.FormCtrl.questionImage)||void 0===w||w.setValue(null!=(null==r?void 0:r.attach_path)?o.uploadFileService.previewPicture(null==r?void 0:r.attach_path):null),o.displayQuestionImageInEditor(),null===(q=o.FormCtrl.questionTypeId)||void 0===q||q.setValue(r.question_type_id),o.questionId=n,2==r.question_type_id&&(null===(N=o.FormCtrl.answerOneId)||void 0===N||N.setValue(null===(L=r.MCQ_Choices[0])||void 0===L?void 0:L.Id),null===(R=o.FormCtrl.answerOne)||void 0===R||R.setValue(null===(le=r.MCQ_Choices[0])||void 0===le?void 0:le.Text),null===(ke=o.FormCtrl.answerOneImage)||void 0===ke||ke.setValue(null!=(null===(Ee=null==r?void 0:r.MCQ_Choices[0])||void 0===Ee?void 0:Ee.Image)?o.uploadFileService.previewPicture(null===(ie=null==r?void 0:r.MCQ_Choices[0])||void 0===ie?void 0:ie.Image):null),null===(Be=o.FormCtrl.answerOneIsCorrect)||void 0===Be||Be.setValue(null===(We=r.MCQ_Choices[0])||void 0===We?void 0:We.Is_Correct),o.oneIsCorrect=null===(lt=r.MCQ_Choices[0])||void 0===lt?void 0:lt.Is_Correct,null===(gt=o.FormCtrl.answerTwoId)||void 0===gt||gt.setValue(null===(et=r.MCQ_Choices[1])||void 0===et?void 0:et.Id),null===(tt=o.FormCtrl.answerTwo)||void 0===tt||tt.setValue(null===(nt=r.MCQ_Choices[1])||void 0===nt?void 0:nt.Text),null===(st=o.FormCtrl.answerTwoImage)||void 0===st||st.setValue(null!=(null===(D=null==r?void 0:r.MCQ_Choices[1])||void 0===D?void 0:D.Image)?o.uploadFileService.previewPicture(null===(y=null==r?void 0:r.MCQ_Choices[1])||void 0===y?void 0:y.Image):null),null===(P=o.FormCtrl.answerTwoIsCorrect)||void 0===P||P.setValue(null===(G=r.MCQ_Choices[1])||void 0===G?void 0:G.Is_Correct),o.twoIsCorrect=null===(z=r.MCQ_Choices[1])||void 0===z?void 0:z.Is_Correct,null===(X=o.FormCtrl.answerThreeId)||void 0===X||X.setValue(null===(_e=r.MCQ_Choices[2])||void 0===_e?void 0:_e.Id),null===(De=o.FormCtrl.answerThree)||void 0===De||De.setValue(null===(Ue=r.MCQ_Choices[2])||void 0===Ue?void 0:Ue.Text),null===(oe=o.FormCtrl.answerThreeImage)||void 0===oe||oe.setValue(null!=(null===(Ce=null==r?void 0:r.MCQ_Choices[2])||void 0===Ce?void 0:Ce.Image)?o.uploadFileService.previewPicture(null===(Re=null==r?void 0:r.MCQ_Choices[2])||void 0===Re?void 0:Re.Image):null),null===(ut=o.FormCtrl.answerThreeIsCorrect)||void 0===ut||ut.setValue(null===(Dt=r.MCQ_Choices[2])||void 0===Dt?void 0:Dt.Is_Correct),o.threeIsCorrect=null===(it=r.MCQ_Choices[2])||void 0===it?void 0:it.Is_Correct,null===(dt=o.FormCtrl.answerFourId)||void 0===dt||dt.setValue(null===(An=r.MCQ_Choices[3])||void 0===An?void 0:An.Id),null===(Mn=o.FormCtrl.answerFour)||void 0===Mn||Mn.setValue(null===(Tn=r.MCQ_Choices[3])||void 0===Tn?void 0:Tn.Text),null===(Bt=o.FormCtrl.answerFourImage)||void 0===Bt||Bt.setValue(null!=(null===(Qn=null==r?void 0:r.MCQ_Choices[3])||void 0===Qn?void 0:Qn.Image)?o.uploadFileService.previewPicture(null===(xn=null==r?void 0:r.MCQ_Choices[3])||void 0===xn?void 0:xn.Image):null),null===(nn=o.FormCtrl.answerFourIsCorrect)||void 0===nn||nn.setValue(null===(pl=r.MCQ_Choices[3])||void 0===pl?void 0:pl.Is_Correct),o.fourIsCorrect=null===(gl=r.MCQ_Choices[3])||void 0===gl?void 0:gl.Is_Correct)),o.spinner.hide()})}},{key:"onDeleteQuestion",value:function(){var n=this;this.questionsInGrid.length>1?this.questionsInGrid.findIndex(function(r){return r.ExamQuestId==n.questionId})<this.questionsInGrid.length-1?this.openDeleteDialog():(this.questionsInGrid.pop(),this.notSavedQuestionData=null,this.selectedQuesIndex>0?this.goToPrevQuestion():this.goToNextQuestion()):0==this.questionId?this.toastr.warning("Exam.canNotdeleteThisQuestion"):this.openDeleteDialog()}},{key:"openDeleteDialog",value:function(){var o,n=this,r=null!==(o=wd.M.convertEditorValueIntoTextOnly(this.FormCtrl.exam_question_text.value))&&void 0!==o?o:this.translate.instant("Exam.selectedQuestion");this.dialog.open(pe.F,{data:{msg:r,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(g){g&&n.removeExamQuestion(n.questionId)})}},{key:"removeExamQuestion",value:function(n){var o=this;this.spinner.show(),this.examService.deleteExamQuestion(n).subscribe(function(r){"Done"===r.returnString?(o.questionsInGrid.splice(o.selectedQuesIndex,1),0==o.questionsInGrid.length?o.pushNewQuestion():o.selectedQuesIndex>0?o.goToPrevQuestion():(--o.selectedQuesIndex,o.goToNextQuestion())):o.toastr.error(r.returnString),o.spinner.hide()})}},{key:"importFile",value:function(n){var o=this;this.uploadFileService.uploadFile(n).then(function(r){setTimeout(function(){o.FormCtrl.questionImage.setValue(r.FileAsBase64),o.questionFile=r,o.displayQuestionImageInEditor()},100)})}},{key:"displayQuestionImageInEditor",value:function(){if(this.removeEditorImg(),this.FormCtrl.questionImage.value){var n=document.createElement("img");n.src=this.FormCtrl.questionImage.value,n.alt="img",n.style.maxWidth="220px",n.style.height="160px",n.style.borderRadius="10px",n.style.margin="16px",n.id="question-editor-img";var o=document.querySelector(".ql-toolbar");o&&o.parentNode.insertBefore(n,o)}}},{key:"removeEditorImg",value:function(){var n=document.getElementById("question-editor-img");n&&n.remove()}},{key:"importOneFile",value:function(n){var o=this;this.uploadFileService.uploadFile(n).then(function(r){setTimeout(function(){o.answerOneFile=r,o.FormCtrl.answerOneImage.setValue(r.FileAsBase64)},100)})}},{key:"importTwoFile",value:function(n){var o=this;this.uploadFileService.uploadFile(n).then(function(r){setTimeout(function(){o.answerTwoFile=r,o.FormCtrl.answerTwoImage.setValue(r.FileAsBase64)},100)})}},{key:"importThreeFile",value:function(n){var o=this;this.uploadFileService.uploadFile(n).then(function(r){setTimeout(function(){o.answerThreeFile=r,o.FormCtrl.answerThreeImage.setValue(r.FileAsBase64)},100)})}},{key:"importFourFile",value:function(n){var o=this;this.uploadFileService.uploadFile(n).then(function(r){setTimeout(function(){o.answerFourFile=r,o.FormCtrl.answerFourImage.setValue(r.FileAsBase64)},100)})}},{key:"onSelectCorrect",value:function(n){var o,r,g,v,x,w,q,N,L,R,le,ke,Ee,ie,Be,We;this.changeCurrentCorrectAnswer=!0,0===n&&(null===(o=this.FormCtrl.answerOneIsCorrect)||void 0===o||o.setValue(!0),null===(r=this.FormCtrl.answerTwoIsCorrect)||void 0===r||r.setValue(null),null===(g=this.FormCtrl.answerThreeIsCorrect)||void 0===g||g.setValue(null),null===(v=this.FormCtrl.answerFourIsCorrect)||void 0===v||v.setValue(null)),1===n&&(null===(x=this.FormCtrl.answerOneIsCorrect)||void 0===x||x.setValue(null),null===(w=this.FormCtrl.answerTwoIsCorrect)||void 0===w||w.setValue(!0),null===(q=this.FormCtrl.answerThreeIsCorrect)||void 0===q||q.setValue(null),null===(N=this.FormCtrl.answerFourIsCorrect)||void 0===N||N.setValue(null)),2===n&&(null===(L=this.FormCtrl.answerOneIsCorrect)||void 0===L||L.setValue(null),null===(R=this.FormCtrl.answerTwoIsCorrect)||void 0===R||R.setValue(null),null===(le=this.FormCtrl.answerThreeIsCorrect)||void 0===le||le.setValue(!0),null===(ke=this.FormCtrl.answerFourIsCorrect)||void 0===ke||ke.setValue(null)),3===n&&(null===(Ee=this.FormCtrl.answerOneIsCorrect)||void 0===Ee||Ee.setValue(null),null===(ie=this.FormCtrl.answerTwoIsCorrect)||void 0===ie||ie.setValue(null),null===(Be=this.FormCtrl.answerThreeIsCorrect)||void 0===Be||Be.setValue(null),null===(We=this.FormCtrl.answerFourIsCorrect)||void 0===We||We.setValue(!0))}},{key:"resetFileInputs",value:function(){document.querySelectorAll('input[type="file"]').forEach(function(o){o.value=null}),this.questionFile=null,this.answerOneFile=null,this.answerTwoFile=null,this.answerThreeFile=null,this.answerFourFile=null}},{key:"removeQuestionImg",value:function(){this.FormCtrl.remove_image.setValue(!0),this.FormCtrl.questionImage.setValue(null),this.questionFile=null}},{key:"answerOneRemove_image",value:function(){this.FormCtrl.answerOneRemove_image.setValue(!0),this.FormCtrl.answerOneImage.setValue(null),this.answerOneFile=null}},{key:"answerTwoRemove_image",value:function(){this.FormCtrl.answerTwoRemove_image.setValue(!0),this.FormCtrl.answerTwoImage.setValue(null),this.answerTwoFile=null}},{key:"answerThreeRemove_image",value:function(){this.FormCtrl.answerThreeRemove_image.setValue(!0),this.FormCtrl.answerThreeImage.setValue(null),this.FormCtrl.answerThreeFile=null}},{key:"answerFourRemove_image",value:function(){this.FormCtrl.answerFourRemove_image.setValue(!0),this.FormCtrl.answerFourImage.setValue(null),this.answerFourFile=null}},{key:"incrementMark",value:function(){var n=Number(this.FormCtrl.questionMark.value)+1;this.FormCtrl.questionMark.setValue(n||1)}},{key:"decrementMark",value:function(){var n=Number(this.FormCtrl.questionMark.value)-1;this.FormCtrl.questionMark.setValue(n<=0?1:n)}},{key:"noOfInsertedAnswers",value:function(){var o,r,g,v,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],x=0;return n?(((null===(o=this.FormCtrl.answerOne)||void 0===o?void 0:o.value)||this.FormCtrl.answerOneImage.value)&&x++,((null===(r=this.FormCtrl.answerTwo)||void 0===r?void 0:r.value)||this.FormCtrl.answerTwoImage.value)&&x++,((null===(g=this.FormCtrl.answerThree)||void 0===g?void 0:g.value)||this.FormCtrl.answerThreeImage.value)&&x++,((null===(v=this.FormCtrl.answerFour)||void 0===v?void 0:v.value)||this.FormCtrl.answerFourImage.value)&&x++):((this.notSavedQuestionData.answerOne||this.notSavedQuestionData.answerOneImage)&&x++,(this.notSavedQuestionData.answerTwo||this.notSavedQuestionData.answerTwoImage)&&x++,(this.notSavedQuestionData.answerThree||this.notSavedQuestionData.answerThreeImage)&&x++,(this.notSavedQuestionData.answerFour||this.notSavedQuestionData.answerFourImage)&&x++),x}},{key:"onSelectQuestion",value:function(n,o){o!=this.questionId&&(0==this.questionId?(this.saveLastQuestion(),this.getQuestionForEditByID(o)):0==o&&this.questionId>0?this.isCurrentQuesHasNoUpdates()?(this.myForm.patchValue(this.notSavedQuestionData),this.displayQuestionImageInEditor(),this.currentQuestionToEdit=null):this.onSubmit(6):o>0&&this.questionId>0&&(this.isCurrentQuesHasNoUpdates()?this.getQuestionForEditByID(o):this.onSubmit(7,o)),this.questionId=o,this.selectedQuesIndex=n)}},{key:"handelPrevAndNext",value:function(n){this.isCurrentQuesHasNoUpdates()||!this.currentQuestionToEdit?n?(0==this.questionId&&this.saveLastQuestion(),this.goToPrevQuestion()):this.goToNextQuestion():this.onSubmit(n?1:2)}},{key:"saveLastQuestion",value:function(){var n,o,r;this.notSavedQuestionData=this.myForm.value;var g={ExamQuestId:0,mark:null===(n=this.FormCtrl.questionMark)||void 0===n?void 0:n.value,Text:null===(o=this.FormCtrl.exam_question_text)||void 0===o?void 0:o.value,ChoiceCounts:this.noOfInsertedAnswers(),Image:null===(r=this.FormCtrl.questionImage)||void 0===r?void 0:r.value,correctIndex:this.getCorrectAnswerIndexFromForm()};this.questionsInGrid[this.questionsInGrid.length-1]=g}},{key:"goToPrevQuestion",value:function(){var n=this.questionsInGrid[--this.selectedQuesIndex].ExamQuestId;this.getQuestionForEditByID(n)}},{key:"goToNextQuestion",value:function(){this.removeEditorImg();var n=this.questionsInGrid[++this.selectedQuesIndex].ExamQuestId;n>0?this.getQuestionForEditByID(n):this.goToNotSavedQuestion(!1)}},{key:"isCurrentQuesHasNoUpdates",value:function(){var n,o,r,g,v,x,w,q,N,L,R,le,ke,Ee,ie;return!!this.currentQuestionToEdit&&!(this.currentQuestionToEdit.mark!=(null===(n=this.FormCtrl.questionMark)||void 0===n?void 0:n.value)||this.currentQuestionToEdit.question_text!=(null===(o=this.FormCtrl.exam_question_text)||void 0===o?void 0:o.value)||(null===(r=this.currentQuestionToEdit.MCQ_Choices[0])||void 0===r?void 0:r.Text)!=(null===(g=this.FormCtrl.answerOne)||void 0===g?void 0:g.value)||(null===(v=this.currentQuestionToEdit.MCQ_Choices[1])||void 0===v?void 0:v.Text)!=(null===(x=this.FormCtrl.answerTwo)||void 0===x?void 0:x.value)||(null===(w=this.currentQuestionToEdit.MCQ_Choices[2])||void 0===w?void 0:w.Text)!=(null===(q=this.FormCtrl.answerThree)||void 0===q?void 0:q.value)||(null===(N=this.currentQuestionToEdit.MCQ_Choices[3])||void 0===N?void 0:N.Text)!=(null===(L=this.FormCtrl.answerFour)||void 0===L?void 0:L.value)||this.changeCurrentCorrectAnswer||(null===(R=this.FormCtrl.questionImage.value)||void 0===R?void 0:R.includes("data:image"))||(null===(le=this.FormCtrl.answerOneImage.value)||void 0===le?void 0:le.includes("data:"))||(null===(ke=this.FormCtrl.answerTwoImage.value)||void 0===ke?void 0:ke.includes("data:"))||(null===(Ee=this.FormCtrl.answerThreeImage.value)||void 0===Ee?void 0:Ee.includes("data:"))||(null===(ie=this.FormCtrl.answerFourImage.value)||void 0===ie?void 0:ie.includes("data:")))}},{key:"addNewQuestion",value:function(){this.notSavedQuestionData?0==this.questionId?this.onSubmit(4):this.questionId>0&&(this.isCurrentQuesHasNoUpdates()?this.goToNotSavedQuestion(!0):this.onSubmit(3)):this.isCurrentQuesHasNoUpdates()?(this.pushNewQuestion(),this.currentQuestionToEdit=null,this.questionId=0,this.clearForm(),this.FormCtrl.questionMark.setValue(1)):this.onSubmit(4)}},{key:"saveExam",value:function(){this.notSavedQuestionData?0==this.questionId?this.onSubmit(5):this.questionId>0&&(this.isCurrentQuesHasNoUpdates()?this.goToNotSavedQuestion(!0):this.onSubmit(3)):this.isCurrentQuesHasNoUpdates()?this.router.navigate(["/dashboard/setup/course/course-structure/".concat(this.subjectId)],{queryParams:{functionId:this.functionId}}):this.onSubmit(5)}},{key:"openSubmitDialog",value:function(){var n=this;this.dialog.open(Sd.H,{minWidth:"30vw"}).afterClosed().subscribe(function(o){o&&n.saveExam()})}},{key:"pushNewQuestion",value:function(){this.removeEditorImg(),this.questionsInGrid.push({ExamQuestId:0,Image:null,Text:null,correctIndex:null,mark:1,ChoiceCounts:null}),this.selectedQuesIndex=this.questionsInGrid.length-1}},{key:"getCorrectAnswerIndexFromForm",value:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(n){if(this.FormCtrl.answerOneIsCorrect.value)return 0;if(this.FormCtrl.answerTwoIsCorrect.value)return 1;if(this.FormCtrl.answerThreeIsCorrect.value)return 2;if(this.FormCtrl.answerFourIsCorrect.value)return 3}else{if(this.notSavedQuestionData.answerOneIsCorrect)return 0;if(this.notSavedQuestionData.answerTwoIsCorrect)return 1;if(this.notSavedQuestionData.answerThreeIsCorrect)return 2;if(this.notSavedQuestionData.answerFourIsCorrect)return 3}}},{key:"goToNotSavedQuestion",value:function(n){this.selectedQuesIndex=this.questionsInGrid.length-1,this.myForm.patchValue(this.notSavedQuestionData),this.displayQuestionImageInEditor(),this.currentQuestionToEdit=null,this.questionId=0,n&&this.onSubmit()}},{key:"clearForm",value:function(){this.myForm.reset(),this.FormCtrl.questionTypeId.setValue(2),this.resetFileInputs(),this.submitted=!1}},{key:"getEditorWidth",value:function(){var n,o;this.editorWidth=(null===(n=this.editor)||void 0===n?void 0:n.nativeElement)?this.editor.nativeElement.offsetWidth:0,this.editorFooterWidth=null===(o=this.editor.nativeElement.querySelector(".ql-toolbar"))||void 0===o?void 0:o.offsetWidth}},{key:"onWindowResize",value:function(n){this.getEditorWidth()}},{key:"ifImageNeedFileService",value:function(n){return!n.startsWith("data:")}}]),s}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(ne.gz),e.Y36(T.qu),e.Y36(ve.R),e.Y36(Te.e),e.Y36(F.K),e.Y36(Q.t2),e.Y36(ae.f),e.Y36(W.T),e.Y36(ne.F0),e.Y36(S.uw),e.Y36(K.sK))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-questions-index"]],viewQuery:function(a,n){var o;1&a&&e.Gf(Ud,5),2&a&&e.iGM(o=e.CRH())&&(n.editor=o.first)},hostBindings:function(a,n){1&a&&e.NdJ("resize",function(r){return n.onWindowResize(r)},!1,e.Jf7)},decls:53,vars:24,consts:[[1,"row","add-questions",2,"max-height","87.5vh"],[1,"col-md-7","col-12"],[1,"admin-index-card","add-question"],[1,"px-2"],["title","labels.CreateExam","subTitle","Exam.writeQuestionsTextAndMarkCorrectAnswer"],[1,"card-container"],[2,"padding","0 0.75rem"],[3,"formGroup"],[1,"row"],[1,"col-12","mbottom-24"],[1,"editor-container"],["editor",""],[1,"editor-delete"],[1,"fa","fa-trash","font-size-15",3,"click"],["label","labels.Question","placeholder","Exam.writeTheQuestion",3,"control","submitted","numberWithLabel"],[1,"editor-footer"],[1,"question-img"],["width","20","height","16",1,"input-img-icon",3,"src","click"],["hidden","","type","file","accept","image/*","name","questionImage",1,"form-control",3,"change"],["questionImage",""],[1,"number-btns",3,"dir"],["appearance","outline"],["matPrefix","",3,"click"],["matInput","","type","number",3,"formControl"],["matSuffix","",3,"click"],[3,"control","submitted"],[4,"ngIf"],[1,"pt-0"],["class","dark-blue-outline-btn radius-btn float-left mbottom-2",3,"click",4,"ngIf"],["class","dark-blue-btn radius-btn float-right mbottom-2",3,"click",4,"ngIf"],[1,"col-md-5","col-12"],[1,"admin-index-card","questions"],["title","labels.Questions","subTitle","Exam.haveCompleteOverview"],["class","ques-view",3,"active","click",4,"ngFor","ngForOf"],[1,"mtop-13","mbottom-13"],[1,"dashed-btn",3,"click"],[1,"orange-btn","radius-btn",3,"click"],[1,"text-btn"],[1,"col-12"],[1,"input-with-radio"],[1,"answer-img"],["width","20","height","16","class","input-img-icon",3,"src","click",4,"ngIf"],["hidden","","type","file","accept","image/*","name","answerOneImage",1,"form-control",3,"change"],["fileInput1",""],["class","card-img","width","72","height","55",3,"src","click",4,"ngIf"],["placeholder","labels.Answer1",3,"control","submitted"],["formControlName","answerOneIsCorrect",4,"ngIf"],["class","fas fa-check",4,"ngIf"],["hidden","","type","file","accept","image/*","name","answerTwoImage",1,"form-control",3,"change"],["fileInput2",""],["placeholder","labels.Answer2",3,"control","submitted"],["formControlName","answerTwoIsCorrect",4,"ngIf"],["hidden","","type","file","accept","image/*","name","answerThreeImage",1,"form-control",3,"change"],["fileInput3",""],["placeholder","labels.Answer3",3,"control","submitted"],["formControlName","answerThreeIsCorrect",4,"ngIf"],["hidden","","type","file","accept","image/*","name","answerFourImage",1,"form-control",3,"change"],["fileInput4",""],["placeholder","labels.Answer4",3,"control","submitted"],["formControlName","answerFourIsCorrect",4,"ngIf"],["width","72","height","55",1,"card-img",3,"src","click"],["formControlName","answerOneIsCorrect"],[3,"value","checked","click"],[1,"fas","fa-check"],["formControlName","answerTwoIsCorrect"],["formControlName","answerThreeIsCorrect"],["formControlName","answerFourIsCorrect"],[1,"dark-blue-outline-btn","radius-btn","float-left","mbottom-2",3,"click"],[1,"fas",3,"ngClass"],[1,"dark-blue-btn","radius-btn","float-right","mbottom-2",3,"click"],[1,"ques-view",3,"click"],[1,"no-ques"],["class","ques-img",4,"ngIf"],[1,"ques-text",3,"innerHTML"],[1,"ques-degree"],[1,"ques-answers"],[3,"onlyOne","correct",4,"ngFor","ngForOf"],[1,"icon"],[1,"ques-img"],["height","38","width","50",3,"src"],["height","18","width","18",3,"src"]],template:function(a,n){if(1&a){var o=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card",2),e.TgZ(3,"mat-card-title",3),e._UZ(4,"page-title",4),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"form",7),e.TgZ(8,"div",8),e.TgZ(9,"div",9),e.TgZ(10,"div",10,11),e.TgZ(12,"div",12),e.TgZ(13,"i",13),e.NdJ("click",function(){return n.onDeleteQuestion()}),e.qZA(),e.qZA(),e._UZ(14,"app-text-editor",14),e.TgZ(15,"div",15),e.TgZ(16,"div",16),e.TgZ(17,"img",17),e.NdJ("click",function(){return e.CHM(o),e.MAs(19).click()}),e.qZA(),e.TgZ(18,"input",18,19),e.NdJ("change",function(g){return n.importFile(g)}),e.qZA(),e.qZA(),e.TgZ(20,"div",20),e.TgZ(21,"mat-label"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"mat-form-field",21),e.TgZ(25,"mat-icon",22),e.NdJ("click",function(){return n.decrementMark()}),e._uU(26," remove_circle "),e.qZA(),e._UZ(27,"input",23),e.TgZ(28,"mat-icon",24),e.NdJ("click",function(){return n.incrementMark()}),e._uU(29," add_circle "),e.qZA(),e.TgZ(30,"mat-hint"),e._UZ(31,"input-validation-msg",25),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(32,Hd,41,24,"ng-container",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"mat-card-actions",27),e.YNc(34,Wd,5,4,"button",28),e.YNc(35,zd,5,4,"button",29),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",30),e.TgZ(37,"mat-card",31),e.TgZ(38,"mat-card-title",3),e._UZ(39,"page-title",32),e.qZA(),e.TgZ(40,"div",5),e.TgZ(41,"div",6),e.TgZ(42,"table"),e.YNc(43,oc,3,4,"tr",33),e.qZA(),e.TgZ(44,"div",34),e.TgZ(45,"button",35),e.NdJ("click",function(){return n.addNewQuestion()}),e._uU(46),e.ALo(47,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(48,"mat-card-actions",27),e.TgZ(49,"button",36),e.NdJ("click",function(){return n.openSubmitDialog()}),e.TgZ(50,"span",37),e._uU(51),e.ALo(52,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&a&&(e.xp6(7),e.Q6J("formGroup",n.myForm),e.xp6(7),e.Q6J("control",n.FormCtrl.exam_question_text)("submitted",n.submitted)("numberWithLabel",n.selectedQuesIndex+1),e.xp6(1),e.Udp("width",n.editorWidth-n.editorFooterWidth-60,"px"),e.xp6(2),e.Q6J("src",n.svgManager.img_icon,e.LSH),e.xp6(3),e.Q6J("dir",n.languageService.isArabic?"rtl":"ltr"),e.xp6(2),e.Oqu(e.lcZ(23,18,"labels.Degree")),e.xp6(5),e.Q6J("formControl",n.FormCtrl.questionMark),e.xp6(4),e.Q6J("control",n.FormCtrl.questionMark)("submitted",n.submitted),e.xp6(1),e.Q6J("ngIf",2==(null==n.FormCtrl.questionTypeId?null:n.FormCtrl.questionTypeId.value)),e.xp6(2),e.Q6J("ngIf",n.selectedQuesIndex>0),e.xp6(1),e.Q6J("ngIf",n.selectedQuesIndex<n.questionsInGrid.length-1),e.xp6(8),e.Q6J("ngForOf",n.questionsInGrid),e.xp6(3),e.hij(" ",e.lcZ(47,20,"addNewQuestion")," "),e.xp6(5),e.hij(" ",e.lcZ(52,22,"Exam.saveExam")," "))},directives:[k.a8,k.n5,u.T,T._Y,T.JL,T.sg,bn.d,hn.Lv,H.hX,H.KE,Dn.Hw,H.qo,Tt.Nt,T.wV,T.Fj,T.JJ,T.oH,H.R9,H.bx,fe.p,f.O5,k.hq,f.sg,E.a,Yt.VQ,T.u,Yt.U0,f.mk],pipes:[K.X$],styles:['.admin-index-card.add-question{padding:21px 36px 12px 20px!important}  .admin-index-card.add-question .editor-container{padding:10px;border-radius:10px;background-color:#437a9f0d;position:relative}  .admin-index-card.add-question .editor-container .editor-delete{position:absolute;top:10px;right:10px;cursor:pointer}  .admin-index-card.add-question .editor-container .editor-delete i{color:#d1031b}  .admin-index-card.add-question .editor-container .text-editor .input-label{margin:0 16px;font-family:Roboto-Bold,sans-serif!important;font-size:13.5px}  .admin-index-card.add-question .editor-container .text-editor:before{content:"";position:absolute;height:calc(100% - 20px);width:3px;flex-grow:0;border-radius:2px;background-color:#e86820}  .admin-index-card.add-question .editor-container .text-editor .ql-container.ql-snow{border:none;margin:-21px 16px 0}  .admin-index-card.add-question .editor-container .text-editor .ql-container.ql-snow .ql-editor{padding:3px 0;font-family:Roboto-Bold,sans-serif!important;font-size:13.5px;color:#555}  .admin-index-card.add-question .editor-container .text-editor .ql-container.ql-snow .ql-editor p:first-of-type{text-indent:80px}  .admin-index-card.add-question .editor-container .text-editor .ql-toolbar.ql-snow{border:none;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;background-color:#fff;border-radius:0;margin:0 16px;padding:3px 0}  .admin-index-card.add-question .input-with-radio{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:0 10px;border-radius:10px;box-shadow:0 3px 4px #0000000d;border:2px solid #ddd;background-color:#fafafa;margin-bottom:16px}  .admin-index-card.add-question .input-with-radio app-input{flex-grow:1}  .admin-index-card.add-question .input-with-radio app-input .mat-form-field{margin:0;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}  .admin-index-card.add-question .input-with-radio app-input .mat-form-field .mat-form-field-outline-start,   .admin-index-card.add-question .input-with-radio app-input .mat-form-field .mat-form-field-outline-end{border:none!important}  .admin-index-card.add-question .input-with-radio app-input .mat-form-field .mat-form-field-wrapper{margin:0;padding:0}  .admin-index-card.add-question .input-with-radio app-input .mat-form-field .mat-form-field-infix{padding:13px 0 8px!important}  .admin-index-card.add-question .input-with-radio app-input .mat-input-element::-moz-placeholder{font-size:15px;line-height:1.66;letter-spacing:normal;color:#999}  .admin-index-card.add-question .input-with-radio app-input .mat-input-element::placeholder{font-size:15px;line-height:1.66;letter-spacing:normal;color:#999}  .admin-index-card.add-question .input-with-radio app-input .mat-input-element{font-size:15px;line-height:1.66;letter-spacing:normal;color:#555}  .admin-index-card.add-question .input-with-radio .mat-radio-container,   .admin-index-card.add-question .input-with-radio .mat-radio-outer-circle{width:14px;height:14px}  .admin-index-card.add-question .input-with-radio:has(.fa-check){border-color:#258f6e}  .admin-index-card.add-question .input-with-radio .fa-check{color:#258f6e;font-size:15px;position:relative;right:8px}  .admin-index-card.add-question .input-with-radio .answer-img{margin:12px 2px 11px 6px}  .admin-index-card.add-question .answer-img .input-img-icon,   .admin-index-card.add-question .question-img .input-img-icon{cursor:pointer}  .admin-index-card.add-question .answer-img .card-img,   .admin-index-card.add-question .question-img .card-img{border-radius:5px;cursor:pointer;max-width:72px}  .admin-index-card.add-question .editor-footer{position:absolute;right:10px;bottom:10px;display:flex;align-items:center;justify-content:space-between;gap:15px}  .admin-index-card.add-question .editor-footer .question-img{margin-top:-4px}  .admin-index-card.add-question .number-btns{color:#437a9f;display:flex;align-items:center;gap:10px}  .admin-index-card.add-question .number-btns .mat-form-field{margin:0;height:auto;display:inline-block!important}  .admin-index-card.add-question .number-btns .mat-form-field .mat-form-field-infix{padding:6px 0!important}  .admin-index-card.add-question .number-btns .mat-form-field .mat-form-field-flex{padding:0 0 0 3px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;min-width:30px;max-width:75px;height:auto}  .admin-index-card.add-question .number-btns .mat-form-field .mat-form-field-prefix,   .admin-index-card.add-question .number-btns .mat-form-field .mat-form-field-suffix{top:5px!important;cursor:pointer}  .admin-index-card.add-question .number-btns .mat-form-field .mat-form-field-outline-start,   .admin-index-card.add-question .number-btns .mat-form-field .mat-form-field-outline-end{border:none!important;background-color:#fff}  .admin-index-card.add-question .number-btns .mat-form-field .mat-form-field-wrapper{margin:0;padding:0}  .admin-index-card.add-question .number-btns mat-icon.mat-icon{font-size:125%}  .admin-index-card.add-question .number-btns .mat-form-field-subscript-wrapper{position:absolute;left:-55px;width:128px;top:21px;padding:0}  .admin-index-card.add-question .number-btns input::-webkit-outer-spin-button,   .admin-index-card.add-question .number-btns input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}  .admin-index-card.add-question .number-btns input[type=number]{-moz-appearance:textfield;text-align:center;color:#193141}  .admin-index-card.add-question .mat-card-actions .radius-btn{display:flex;align-items:center;gap:10px}  .admin-index-card.questions{padding:21px 8px!important}  .admin-index-card.questions .dashed-btn{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;min-height:48px;padding:12.5px 30px;box-shadow:0 1.9px 11.9px #305d7c33}  .admin-index-card.questions table{border-collapse:separate;border-spacing:0 3px}  .admin-index-card.questions tr.ques-view{min-height:46px;cursor:pointer;border-radius:5px}  .admin-index-card.questions tr.ques-view td{padding:7px 15px 7px 0;border:1px solid #eee;border-left:none;border-right:none}  .admin-index-card.questions tr.ques-view td:has(.ques-answers){min-width:127px}  .admin-index-card.questions tr.ques-view td:has(.ques-degree){min-width:68px}  .admin-index-card.questions tr.ques-view td.icon{min-width:28px}  .admin-index-card.questions tr.ques-view td:first-child{padding-right:0!important;width:1%;border-radius:5px 0 0 5px}  .admin-index-card.questions tr.ques-view td:last-child{border-radius:0 5px 5px 0}  .admin-index-card.questions tr.ques-view .no-ques{width:28px;height:32px;font-size:16px;line-height:1.4;letter-spacing:.4px;display:flex;align-items:center;justify-content:center;border:1px solid #437a9f;border-radius:50%;color:#437a9f;font-family:agrandirBold,serif!important;background-color:#fff;margin:0 15px 0 3px;padding-top:3px}  .admin-index-card.questions tr.ques-view .ques-text{color:#437a9f;font-size:12px;line-height:1.4;letter-spacing:.3px}  .admin-index-card.questions tr.ques-view .ques-text p{margin:0}  .admin-index-card.questions tr.ques-view .ques-img{max-width:50px}  .admin-index-card.questions tr.ques-view .ques-degree{color:#193141;font-size:12px;line-height:1.4;letter-spacing:.3px}  .admin-index-card.questions tr.ques-view .ques-answers{color:#fff;display:flex;align-items:center;gap:5px}  .admin-index-card.questions tr.ques-view .ques-answers span{background-color:#437a9f;padding:3px 8px;border-radius:2px}  .admin-index-card.questions tr.ques-view .ques-answers span:first-child{border-radius:5px 1px 1px 5px}  .admin-index-card.questions tr.ques-view .ques-answers span:last-child{border-radius:1px 5px 5px 1px}  .admin-index-card.questions tr.ques-view .ques-answers span.onlyOne{border-radius:5px}  .admin-index-card.questions tr.ques-view .ques-answers span.correct{background-color:#258f6e}  .admin-index-card.questions tr.ques-view .icon{color:#437a9f;font-size:13px}  .admin-index-card.questions tr.ques-view.active td{background-color:#437a9f}  .admin-index-card.questions tr.ques-view.active .ques-degree,   .admin-index-card.questions tr.ques-view.active .ques-text{color:#fff}  .admin-index-card.questions tr.ques-view.active .ques-answers span:not(.correct){background-color:#fff;color:#437a9f}  .admin-index-card.questions .mat-card-actions{display:flex;align-items:center;justify-content:center}  .admin-index-card.questions .mat-card-actions .radius-btn{min-width:270px}  .admin-index-card.questions,   .admin-index-card.add-question{min-height:84.5vh;display:flex;flex-direction:column}  .admin-index-card.questions .mat-card-title,   .admin-index-card.add-question .mat-card-title{margin-bottom:13.5px!important}  .admin-index-card.questions .card-container,   .admin-index-card.add-question .card-container{display:flex;flex-direction:column;justify-content:space-between;flex-grow:1;overflow:auto;overflow-x:hidden;padding-right:36px;margin-right:-36px}  .admin-index-card.questions .subTitle,   .admin-index-card.add-question .subTitle{font-size:12.5px;font-weight:500;line-height:1.66;letter-spacing:normal;color:#555}  .admin-index-card.questions .mat-card-actions,   .admin-index-card.add-question .mat-card-actions{padding:0 15px;margin:0}@media (max-width: 455px){.admin-index-card.add-question[_ngcontent-%COMP%]   .editor-container[_ngcontent-%COMP%]{padding-bottom:37px}.admin-index-card.add-question[_ngcontent-%COMP%]   .editor-footer[_ngcontent-%COMP%]{right:0px;left:30px;bottom:5px;width:calc(100% - 40px)!important}}']}),i}(),lc=[{path:"",redirectTo:"categories",pathMatch:"full"},{path:"manual-cash-payment",component:ji},{path:"generate-balance-codes",component:Ki},{path:"manage-views",component:_a},{path:"send-whatsapp-msg",component:Aa,data:{breadcrubm:"Navbar.SendWhatsappMsg",view:"send-whatsapp-msg"}},{path:"send-singular-whatsapp-msg",component:La},{path:"exceptional-views",component:Da},{path:"announcement-index",component:ts},{path:"announcement-setup",component:eo},{path:"points/:courseId",component:po,data:{breadcrumb:"Navbar.Points",view:"points"}},{path:"categories",component:On,data:{breadcrumb:"categories.categories",view:"categories"}},{path:"add-category",component:nd,data:{breadcrumb:"categories.categories",view:"categories"}},{path:"department",component:Gn,data:{breadcrumb:"Departments.allDept",view:"department"}},{path:"articles",component:Ql,data:{breadcrumb:"articles.articles",view:"articles"}},{path:"course",data:{breadcrumb:{label:"course.courses",disable:!0},view:"course-index"},children:[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:cl,data:{breadcrumb:"course.courseIndex",view:"course-index"}},{path:"edit-course/:courseId/:isFromRequestPage",component:Xn,data:{breadcrumb:"course.addCourse",view:"edit-course"}},{path:"add-course",component:Xn,data:{breadcrumb:"course.addCourse",view:"add-course"}},{path:"add-employee-to-course/:courseId",component:Bs,data:{breadcrumb:"course.AddEmployeeToCourse",view:"add-employee-to-course"}},{path:"learning-request",component:_u,data:{breadcrumb:"Navbar.LeRequest",view:"learning-request"}},{path:"teaching-request",component:Gu,data:{breadcrumb:"Navbar.TeachRequests",view:"teaching-request"}},{path:"structure-exam/:examId/:examGroupHeaderId/:subjectId",component:rc,data:{view:"structure-exam"}},{path:"course-structure/:courseId",component:St,data:{breadcrumb:"labels.SubjectStructure",view:"course-structure"}},{path:"structure-lectures",component:Fd,data:{view:"structure-lectures"}},{path:"course-objectives/:courseId",component:Eu,data:{breadcrumb:"course.Objectives",view:"course-objectives"}}]},{path:"job-title",component:di,data:{breadcrumb:"JobTitle.alljob",view:"job-title"}},{path:"gift-category",component:fs,data:{breadcrumb:"Gifts.GiftsCategory",view:"gift-category"}},{path:"add-gift-category",component:hl,data:{breadcrumb:"Gifts.addGiftsCategory",view:"add-gift-category"}},{path:"gift-index",component:ys,data:{breadcrumb:"Gifts.Gifts",view:"gift-index"}},{path:"gift-add",component:ml,data:{breadcrumb:"Gifts.AddGift",view:"gift-add"}},{path:"diploma",data:{breadcrumb:"course.Diplomas",view:"diploma"},children:[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:Hn,data:{breadcrumb:"course.Diplomas",view:"course-index"}},{path:"add",component:Cl,data:{breadcrumb:"course.createDiploma",view:"diploma-index"}},{path:"edit/:id",component:Cl,data:{breadcrumb:"course.createDiploma",view:"add-diploma"}}]}],sc=function(){var i=(0,Y.Z)(function s(){(0,j.Z)(this,s)});return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[ne.Bz.forChild(lc)],ne.Bz]}),i}(),uc=h(8198),dc=h(5568),cc=h(8109),Al=h(9778),mc=function(){var i=(0,Y.Z)(function s(){(0,j.Z)(this,s)});return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[{provide:pt._A,useClass:Al.B},{provide:pt.sG,useValue:Al.F}],imports:[[f.ez,sc,T.UX,cc.m,dc.q,uc.IJ,Q.ef,sn.JX]]}),i}()},3938:function(rt,Fe,h){h.d(Fe,{R:function(){return F}});var Y=h(5671),j=h(3144),f=h(136),Z=h(7777),T=h(8521),S=h(1891),e=h(520),F=function(){var Q=function(t){(0,f.Z)(W,t);var ae=(0,Z.Z)(W);function W(u){var C;return(0,Y.Z)(this,W),(C=ae.call(this,u)).http=u,C}return(0,j.Z)(W,[{key:"getTeachersByEducompId",value:function(C){return this.get("Admin/QuestionsBank/".concat(C))}},{key:"getQuestions",value:function(C,E,ce){return this.post("Admin/QuestionsBankTable/".concat(C,"/").concat(E),ce)}},{key:"getQuestionByID",value:function(C){return this.get("Admin/get-question-bank/".concat(C))}},{key:"addEditQuestion",value:function(C,E){return this.post("Admin/question-bank-add-edit/".concat(C),E)}},{key:"updateQuestion",value:function(C,E){return this.put("Admin/QuestionsBank/".concat(C),E)}},{key:"deleteQuestion",value:function(C,E){return this.post("Admin/removeQuestionBank/".concat(C,"/").concat(E),null)}},{key:"getSubjectsByTeacherId",value:function(C){return this.post("Admin/get-lectures-by-teacher-query",C)}},{key:"getAllNormalExams",value:function(C){return this.post("exam/returnRecentlyAddedExams",C)}},{key:"publishExam",value:function(C){return this.get("exam/publish-depublish-exam/".concat(C))}},{key:"deleteExam",value:function(C){return this.delete("Admin/RemoveExam/".concat(C))}},{key:"getAllCountries",value:function(){return this.get("country/return-countries")}},{key:"getAllStages",value:function(C){return this.get("stage/return-stages/".concat(C))}},{key:"getAllEducationYears",value:function(C){return this.get("year/return-years/".concat(C))}},{key:"getAllSubjects",value:function(C){return this.get("subject/return-subjects/".concat(C))}},{key:"getAllTeachersBySublectId",value:function(C){return this.get("teacher/return-teachers/".concat(C))}},{key:"getAllUnitsBySublectId",value:function(C){return this.get("unit/return-units/".concat(C))}},{key:"getAllLessonsByUnitId",value:function(C){return this.get("lesson/return-lesson/".concat(C))}},{key:"getAllExamType",value:function(){return this.get("exam/return-exam-types")}},{key:"getExamById",value:function(C){return this.get("exam/get-exam-by-id/".concat(C))}},{key:"getExamDetailsById",value:function(C){return this.get("Exam/Details/".concat(C))}},{key:"addExam",value:function(C){return this.post("exam/add-exam",C)}},{key:"getAllQuestionGroups",value:function(){return this.get("exam/return-question-groups")}},{key:"getAllQuestionHeaders",value:function(){return this.get("exam/return-question-heads")}},{key:"addExamGroupHeader",value:function(C){return this.post("exam/add-question-group-head",C)}},{key:"editExamGroupHeader",value:function(C){return this.post("exam/EditQuestionHead",C)}},{key:"deleteExamGroupHeader",value:function(C){return this.delete("exam/deleteExamHeadGroupById/".concat(C))}},{key:"getAllGroupHeaderByExamId",value:function(C){return this.get("exam/GetQuestionHeadGroupByExamId/".concat(C))}},{key:"getAllQuestionsByHeadId",value:function(C){return this.get("exam/GetExamQuestionsByQuestionHead/".concat(C))}},{key:"addQuestion",value:function(C){return this.post("exam/add-exam-questions",C)}},{key:"addSurveyQuestion",value:function(C){return this.post("exam/add-survey-questions",C)}},{key:"getQuestionForEditByID",value:function(C){return this.get("exam/return-question-details/".concat(C))}},{key:"editQuestion",value:function(C){return this.post("exam/edit-exam-questions",C)}},{key:"editSurveyQuestion",value:function(C){return this.post("exam/edit-survey-questions",C)}},{key:"deleteExamQuestion",value:function(C){return this.delete("exam/RemoveExamQuestion/".concat(C))}},{key:"getExamPoints",value:function(C,E){return this.get("exam/returnCustomPointExamByExamId/".concat(C,"/").concat(E))}},{key:"addExamPoint",value:function(C){return this.post("exam/CustomExamPoint",C)}},{key:"deleteExamPoint",value:function(C){return this.delete("exam/DeleteCustomExamPoint/".concat(C))}},{key:"UploadExamStudentGrades",value:function(C){return this.post("Exam/postStudentsGrades",C)}},{key:"getQuestionByCorrectionType",value:function(C,E){return this.get("Exam/CorrectionIndexPaging/".concat(C,"/").concat(E))}},{key:"submitCorrection",value:function(C){return this.post("/Exam/submitQuestionCorrection",C)}},{key:"copyExamsToHR",value:function(C){return this.post("HRexam/CopyExamsFromEgyToHR",C)}},{key:"copySurveyToHR",value:function(C){return this.post("/HRSurvey/CopySurveyFromEgyToHR",C)}},{key:"getExamByCourseId",value:function(C){return this.get("HRexam/GetExamsEgyByCourseID/".concat(C))}},{key:"getImplemenationsByCourseID",value:function(C,E){return this.get("HRexam/GetImplemenationsByCourseID/".concat(C,"/").concat(E))}}]),W}(T.K);return Q.\u0275fac=function(ae){return new(ae||Q)(S.LFG(e.eN))},Q.\u0275prov=S.Yz7({token:Q,factory:Q.\u0275fac,providedIn:"root"}),Q}()},6489:function(rt,Fe,h){h.d(Fe,{N:function(){return F}});var Y=h(5671),j=h(3144),f=h(136),Z=h(7777),T=h(8521),S=h(1891),e=h(520),F=function(){var Q=function(t){(0,f.Z)(W,t);var ae=(0,Z.Z)(W);function W(u){var C;return(0,Y.Z)(this,W),(C=ae.call(this,u)).http=u,C}return(0,j.Z)(W,[{key:"searchStudent",value:function(C,E){return this.post("Admin/searchUSer/".concat(C),E)}},{key:"resetViews",value:function(C,E){return this.post("Admin/resetViewsCount/".concat(C),E)}},{key:"addExceptionalViews",value:function(C,E){return this.post("Admin/ExceptionalViewsResetCount/".concat(C),E)}}]),W}(T.K);return Q.\u0275fac=function(ae){return new(ae||Q)(S.LFG(e.eN))},Q.\u0275prov=S.Yz7({token:Q,factory:Q.\u0275fac,providedIn:"root"}),Q}()},2397:function(rt,Fe,h){h.d(Fe,{q:function(){return F}});var Y=h(5671),j=h(3144),f=h(136),Z=h(7777),T=h(8521),S=h(1891),e=h(520),F=function(){var Q=function(t){(0,f.Z)(W,t);var ae=(0,Z.Z)(W);function W(u){var C;return(0,Y.Z)(this,W),(C=ae.call(this,u)).http=u,C}return(0,j.Z)(W,[{key:"addPoints",value:function(C,E){return this.post("SetupPoints/SetupPoints/".concat(C),E)}},{key:"getPoints",value:function(C,E,ce){return this.get("SetupPoints/returnPointSystemByResourceId/".concat(C,"/").concat(E,"/").concat(ce))}},{key:"deletePoint",value:function(C){return this.post("SetupPoints/DeletePointSystemDetails/".concat(C),null)}},{key:"addLectureCustomPoint",value:function(C){return this.post("SetupPoints/CustomMaterialPoint",C)}},{key:"getLectureCustomPoints",value:function(C,E){return this.get("SetupPoints/returnCustomPointMaterialByMaterialId/".concat(E,"/").concat(C))}},{key:"deleteLectureCustomPoint",value:function(C){return this.post("SetupPoints/DeleteCustomMaterialPoint/".concat(C),null)}},{key:"addExamCustomPoint",value:function(C){return this.post("SetupPoints/CustomExamPoint",C)}},{key:"getExamCustomPoints",value:function(C,E){return this.get("SetupPoints/returnCustomPointExamByExamId/".concat(E,"/").concat(C))}},{key:"deleteExamCustomPoint",value:function(C){return this.post("SetupPoints/DeleteCustomExamPoint/".concat(C),null)}},{key:"addTemplateCustomPoint",value:function(C){return this.post("SetupPoints/CustomTemplatePoint",C)}},{key:"getTemplateCustomPoints",value:function(C,E){return this.get("SetupPoints/returnCustomPointTemplateByTemplateId/".concat(E,"/").concat(C))}}]),W}(T.K);return Q.\u0275fac=function(ae){return new(ae||Q)(S.LFG(e.eN))},Q.\u0275prov=S.Yz7({token:Q,factory:Q.\u0275fac,providedIn:"root"}),Q}()},4159:function(rt,Fe,h){h.d(Fe,{r:function(){return F}});var Y=h(5671),j=h(3144),f=h(136),Z=h(7777),T=h(8521),S=h(1891),e=h(520),F=function(){var Q=function(t){(0,f.Z)(W,t);var ae=(0,Z.Z)(W);function W(u){var C;return(0,Y.Z)(this,W),(C=ae.call(this,u)).http=u,C.getParts2URL="Admin/returnMaterialPartsByMaterialId/",C.AttendanceURL="Admin/postOfflineLectureView/",C.materialsattacAttendeesURL="MaterialsAttach/offline-lecture-attendees/",C}return(0,j.Z)(W,[{key:"addEditMaterial",value:function(C){return this.post("Admin/AddSubjectMaterialForm",C)}},{key:"getMaterialById",value:function(C,E){return this.get("Admin/showSubjectMaterialView/".concat(C,"/").concat(E))}},{key:"updateMaterialForm",value:function(C,E){return this.post("Admin/AddSubjectMaterialForm/".concat(C),E)}},{key:"deleteMaterial",value:function(C){return this.delete("Admin/RemoveMaterial/".concat(C))}},{key:"publishMaterial",value:function(C){return this.get("Admin/PublishDepublishhMaterial/".concat(C))}},{key:"getGroupsByEduCompId",value:function(C){return this.get("Admin/returnListEduCompIdGroupByEduCompID/".concat(C))}},{key:"returnSearchedUnitsBySubjectId",value:function(C){return this.get("Admin/returnSearchedUnitsBySubjectId/".concat(C))}},{key:"returnSearchedLessonsByUnitId",value:function(C){return this.get("Admin/returnSearchedLessonsByUnitId/".concat(C))}},{key:"searcheMaterial",value:function(C){return this.post("Admin/returnSearchedMaterialViewResult",C)}},{key:"showVideoByMaterialId",value:function(C){return this.get("Admin/showVideoByMaterialId/".concat(C))}},{key:"dawnloadLectureAttendees",value:function(C){return this.get("Admin/offlineLectureAttendees/".concat(C))}},{key:"getMaterialParts",value:function(C){return this.get("Admin/materialPartsTable/".concat(C))}},{key:"getPartById",value:function(C){return this.get("Admin/getMaterialPartByID/".concat(C))}},{key:"addPart",value:function(C){return this.post("Admin/AddMaterialPart",C)}},{key:"deletePart",value:function(C){return this.post("Admin/RemoveMaterialPart/".concat(C),null)}},{key:"deleteParts",value:function(C){return this.delete("Admin/RemoveMultiMaterialPart",{Ids:C})}},{key:"getMaterialAttaches",value:function(C){return this.get("Admin/materialAttachsTable/".concat(C))}},{key:"addAttach",value:function(C){return this.post("Admin/AddMaterialAttach",C)}},{key:"deleteAttach",value:function(C){return this.post("Admin/RemoveMaterialAttach/".concat(C),null)}},{key:"getExamsAndTemplates",value:function(C){return this.get("Admin/showMaterialQuiz/".concat(C))}},{key:"getMaterialQuizes",value:function(C){return this.get("Admin/returnExamsByMaterialId/".concat(C))}},{key:"addMaterialQuiz",value:function(C,E){return this.post("Admin/AddQuizForm/".concat(C),E)}},{key:"deleteMaterialQuiz",value:function(C){return this.delete("Admin/RemoveMaterialQuiz/".concat(C))}},{key:"AddPopQuestion",value:function(C,E){return this.post("Admin/AddPopQuestion/".concat(C),E)}},{key:"getPopQuestions",value:function(C){return this.get("Admin/returnMaterialPopQuestionsByMaterialId/".concat(C))}},{key:"deletePopQuestion",value:function(C){return this.post("Admin/DeleteMaterialPopQuestion/".concat(C),null)}},{key:"UploadStudentAttendance",value:function(C,E,ce){return this.post("Admin/postOfflineLectureAttendees/".concat(E,"/").concat(C),ce)}},{key:"offlineLectureAttendeesTable",value:function(C,E){return this.get("Admin/offlineLectureAttendeesTable/".concat(C,"/").concat(E))}},{key:"searchAttendanceManual",value:function(C){return this.post("Admin/offlineLectureAttendees",C)}},{key:"updateAttendanceManual",value:function(C){return this.post("Admin/editOfflineLectureAttendeeState",C)}}]),W}(T.K);return Q.\u0275fac=function(ae){return new(ae||Q)(S.LFG(e.eN))},Q.\u0275prov=S.Yz7({token:Q,factory:Q.\u0275fac,providedIn:"root"}),Q}()},6666:function(rt,Fe,h){h.d(Fe,{f:function(){return F}});var Y=h(5671),j=h(3144),f=h(136),Z=h(7777),T=h(8521),S=h(1891),e=h(520),F=function(){var Q=function(t){(0,f.Z)(W,t);var ae=(0,Z.Z)(W);function W(u){var C;return(0,Y.Z)(this,W),(C=ae.call(this,u)).http=u,C}return(0,j.Z)(W,[{key:"getAllRoles",value:function(C){return this.get("usermanagement/returnRoles/"+C)}},{key:"addEditRole",value:function(C){return this.post("usermanagement/create-role",C)}},{key:"deleteRole",value:function(C){return this.delete("usermanagement/deleteRole/"+C)}},{key:"getAllFunctions",value:function(C,E){return this.get("usermanagement/getAllFunctions/".concat(C,"/").concat(E))}},{key:"getAllRoleFunctions",value:function(C){return this.get("usermanagement/returnRoleFunctionsByRoleID/".concat(C))}},{key:"addEditRoleFunctions",value:function(C){return this.post("usermanagement/add-function-to-role",C)}},{key:"getAllFunctionsByRoleId",value:function(C){return this.get("usermanagement/returnRoleFunctionsByRoleID/".concat(C))}},{key:"getAllUserBranchesWithFunctions",value:function(C){return this.get("usermanagement/returnAllBranchUserAllRoleFunction/".concat(C))}},{key:"addUserBranchesAndRoleFunctions",value:function(C){return this.post("usermanagement/addUserBranchesAndRoleFunctions",C)}},{key:"deleteUserRoleFunctions",value:function(C){return this.delete("usermanagement/deleteBranchUserRoleFunction/".concat(C))}},{key:"deleteUserBranchRoleFunction",value:function(C,E){return this.delete("usermanagement/deleteBranchUserAllRoleFunction/".concat(C,"/").concat(E))}}]),W}(T.K);return Q.\u0275fac=function(ae){return new(ae||Q)(S.LFG(e.eN))},Q.\u0275prov=S.Yz7({token:Q,factory:Q.\u0275fac,providedIn:"root"}),Q}()},3973:function(rt,Fe,h){h.d(Fe,{n:function(){return F}});var Y=h(5671),j=h(3144),f=h(136),Z=h(7777),T=h(8521),S=h(1891),e=h(520),F=function(){var Q=function(t){(0,f.Z)(W,t);var ae=(0,Z.Z)(W);function W(u){var C;return(0,Y.Z)(this,W),(C=ae.call(this,u)).http=u,C}return(0,j.Z)(W,[{key:"getAllDepartments",value:function(C,E){return this.get("Department/getDepartments/".concat(E,"/").concat(C))}},{key:"getDepartmentsDropDown",value:function(C){return this.get("Department/getAllDepartments/".concat(C))}},{key:"getDepartmentById",value:function(C){return this.get("Department/".concat(C))}},{key:"addDepartment",value:function(C){return this.post("Department/PostDepartments",C)}},{key:"editDepartment",value:function(C,E){return this.put("Department/PutOneDepartments/".concat(E),C)}},{key:"deleteDepartment",value:function(C){return this.delete("Department/DeleteOneDepartments/".concat(C))}},{key:"getDataFromHR",value:function(C){return this.get("HRJobTitle/getHRJobTitle/".concat(C))}}]),W}(T.K);return Q.\u0275fac=function(ae){return new(ae||Q)(S.LFG(e.eN))},Q.\u0275prov=S.Yz7({token:Q,factory:Q.\u0275fac,providedIn:"root"}),Q}()},1222:function(rt,Fe,h){h.d(Fe,{_:function(){return F}});var Y=h(5671),j=h(3144),f=h(136),Z=h(7777),T=h(8521),S=h(1891),e=h(520),F=function(){var Q=function(t){(0,f.Z)(W,t);var ae=(0,Z.Z)(W);function W(u){var C;return(0,Y.Z)(this,W),(C=ae.call(this,u)).http=u,C}return(0,j.Z)(W,[{key:"getAllJobTitles",value:function(C,E,ce){return this.post("jobTitle/getAllJobTitle/".concat(E,"/").concat(ce),C)}},{key:"addJobTitle",value:function(C){return this.post("jobTitle/PostJobTitle",C)}},{key:"updateJobTitles",value:function(C,E){return this.put("jobTitle/PutJobTitle/".concat(E),C)}},{key:"deleteJobTitles",value:function(C){return this.delete("jobTitle/DeleteJobTitle/".concat(C))}},{key:"getJobTitleByDepartment",value:function(C){return this.get("jobTitle/getJobTitlesByDepartmentId/".concat(C))}},{key:"getSpecificJobTitlesByDepartmentIds",value:function(C){return this.post("jobTitle/getSpecificJobTitlesByDepartmentIds",C)}},{key:"deleteJobTitleDepartment",value:function(C){return this.delete("jobTitle/DeleteDepartmentOfJobTitle/".concat(C))}},{key:"update_JobTitle_Department",value:function(C,E){return this.put("jobTitle/EditDepartmentOfJobTitle/".concat(E),C)}}]),W}(T.K);return Q.\u0275fac=function(ae){return new(ae||Q)(S.LFG(e.eN))},Q.\u0275prov=S.Yz7({token:Q,factory:Q.\u0275fac,providedIn:"root"}),Q}()},3217:function(rt,Fe,h){h.d(Fe,{C:function(){return K}});var Y=h(5671),j=h(3144),f=h(2772),Z=h(1891),T=h(3973),S=h(8657),e=h(7011),F=h(226),Q=h(7322),t=h(4107),ae=h(3075),W=h(9808),u=h(530),C=h(508),E=h(2925);function ce(Ie,pe){1&Ie&&(Z.TgZ(0,"mat-option",7),Z._uU(1),Z.ALo(2,"translate"),Z.qZA()),2&Ie&&(Z.Q6J("value",null),Z.xp6(1),Z.hij(" ",Z.lcZ(2,2,"General.Choose")," "))}function k(Ie,pe){if(1&Ie&&(Z.TgZ(0,"mat-option",7),Z._uU(1),Z.qZA()),2&Ie){var ne,se=pe.$implicit,ye=Z.oxw();Z.Q6J("value",se.id),Z.xp6(1),Z.hij(" ",ye.languageService.isArabic?null!==(ne=se.ar_name)&&void 0!==ne?ne:se.en_name:null!==(ne=se.en_name)&&void 0!==ne?ne:se.ar_name," ")}}var K=function(){var Ie=function(){function pe(se,ye,ne){(0,Y.Z)(this,pe),this.departmentService=se,this.languageService=ye,this.authService=ne,this.multiple=!1,this.appearance=f.cm,this.EduCompId=Number(ne.getEduCompId())}return(0,j.Z)(pe,[{key:"ngOnInit",value:function(){this.getAllDepartments()}},{key:"ngAfterViewInit",value:function(){var ye=this;this.authService.EduCompId.subscribe(function(ne){ye.EduCompId=ne.EduCompId,ye.control.setValue(null),ye.getAllDepartments()})}},{key:"getAllDepartments",value:function(){var ye=this;this.departmentService.getDepartmentsDropDown(this.EduCompId).subscribe(function(ne){ne&&(ye.departmentList=ne)})}}]),pe}();return Ie.\u0275fac=function(se){return new(se||Ie)(Z.Y36(T.n),Z.Y36(S.T),Z.Y36(e.e))},Ie.\u0275cmp=Z.Xpm({type:Ie,selectors:[["department-dropdown"]],inputs:{control:"control",submitted:"submitted",multiple:"multiple",appearance:"appearance"},decls:10,vars:12,consts:[[3,"dir"],[1,"input-label"],[3,"appearance"],[3,"formControl","multiple"],[3,"value",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"control","submitted","isSelect"],[3,"value"]],template:function(se,ye){1&se&&(Z.TgZ(0,"div",0),Z.TgZ(1,"mat-label",1),Z._uU(2),Z.ALo(3,"translate"),Z.qZA(),Z.TgZ(4,"mat-form-field",2),Z.TgZ(5,"mat-select",3),Z.YNc(6,ce,3,4,"mat-option",4),Z.YNc(7,k,2,2,"mat-option",5),Z.qZA(),Z.TgZ(8,"mat-hint"),Z._UZ(9,"input-validation-msg",6),Z.qZA(),Z.qZA(),Z.qZA()),2&se&&(Z.Q6J("dir",ye.languageService.isArabic?"rtl":"ltr"),Z.xp6(2),Z.Oqu(Z.lcZ(3,10,"course.department")),Z.xp6(2),Z.Q6J("appearance",ye.appearance),Z.xp6(1),Z.Q6J("formControl",ye.control)("multiple",ye.multiple),Z.xp6(1),Z.Q6J("ngIf",!ye.multiple),Z.xp6(1),Z.Q6J("ngForOf",ye.departmentList),Z.xp6(2),Z.Q6J("control",ye.control)("submitted",ye.submitted)("isSelect",!0))},directives:[F.Lv,Q.hX,Q.KE,t.gD,ae.JJ,ae.oH,W.O5,W.sg,Q.bx,u.p,C.ey],pipes:[E.X$],styles:[""]}),Ie}()},1123:function(rt,Fe,h){h.d(Fe,{a:function(){return k}});var Y=h(5671),j=h(3144),f=h(2772),Z=h(1891),T=h(1222),S=h(8657),e=h(226),F=h(7322),Q=h(4107),t=h(3075),ae=h(9808),W=h(530),u=h(508),C=h(2925);function E(K,Ie){1&K&&(Z.TgZ(0,"mat-option",7),Z._uU(1),Z.ALo(2,"translate"),Z.qZA()),2&K&&(Z.Q6J("value",null),Z.xp6(1),Z.hij(" ",Z.lcZ(2,2,"General.Choose")," "))}function ce(K,Ie){if(1&K&&(Z.TgZ(0,"mat-option",7),Z._uU(1),Z.qZA()),2&K){var ye,pe=Ie.$implicit,se=Z.oxw();Z.Q6J("value",se.depJobId?pe.id:pe.jobTitle_id),Z.xp6(1),Z.hij(" ",se.languageService.isArabic?null!==(ye=pe.jobTitleArName)&&void 0!==ye?ye:pe.jobTitleEnName:null!==(ye=pe.jobTitleEnName)&&void 0!==ye?ye:pe.jobTitleArName," ")}}var k=function(){var K=function(){function Ie(pe,se){(0,Y.Z)(this,Ie),this.jobTitleService=pe,this.languageService=se,this.multiple=!1,this.depJobId=!0,this.appearance=f.cm}return(0,j.Z)(Ie,[{key:"ngOnInit",value:function(){var ye,se=this;null===(ye=this.control)||void 0===ye||ye.disable(),this.departmentControl.valueChanges.subscribe(function(ne){se.control.setValue(null),ne>0?(se.getAllJobTitles(ne),se.control.enable()):se.control.disable()})}},{key:"getAllJobTitles",value:function(se){var ye=this;this.jobTitleService.getJobTitleByDepartment(se).subscribe(function(ne){ne&&(ye.jobTitleList=ne)})}}]),Ie}();return K.\u0275fac=function(pe){return new(pe||K)(Z.Y36(T._),Z.Y36(S.T))},K.\u0275cmp=Z.Xpm({type:K,selectors:[["job-title-by-department-dropdown"]],inputs:{control:"control",departmentControl:"departmentControl",submitted:"submitted",multiple:"multiple",depJobId:"depJobId",appearance:"appearance"},decls:10,vars:12,consts:[[3,"dir"],[1,"input-label"],[3,"appearance"],[3,"formControl","multiple"],[3,"value",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[3,"control","submitted","isSelect"],[3,"value"]],template:function(pe,se){1&pe&&(Z.TgZ(0,"div",0),Z.TgZ(1,"mat-label",1),Z._uU(2),Z.ALo(3,"translate"),Z.qZA(),Z.TgZ(4,"mat-form-field",2),Z.TgZ(5,"mat-select",3),Z.YNc(6,E,3,4,"mat-option",4),Z.YNc(7,ce,2,2,"mat-option",5),Z.qZA(),Z.TgZ(8,"mat-hint"),Z._UZ(9,"input-validation-msg",6),Z.qZA(),Z.qZA(),Z.qZA()),2&pe&&(Z.Q6J("dir",se.languageService.isArabic?"rtl":"ltr"),Z.xp6(2),Z.Oqu(Z.lcZ(3,10,"course.jobTitle")),Z.xp6(2),Z.Q6J("appearance",se.appearance),Z.xp6(1),Z.Q6J("formControl",se.control)("multiple",se.multiple),Z.xp6(1),Z.Q6J("ngIf",!se.multiple),Z.xp6(1),Z.Q6J("ngForOf",se.jobTitleList),Z.xp6(2),Z.Q6J("control",se.control)("submitted",se.submitted)("isSelect",!0))},directives:[e.Lv,F.hX,F.KE,Q.gD,t.JJ,t.oH,ae.O5,ae.sg,F.bx,W.p,u.ey],pipes:[C.X$],styles:[""]}),K}()},4724:function(rt,Fe,h){h.d(Fe,{_:function(){return W}});var Y=h(5671),j=h(3144),f=h(1891),Z=h(9808),T=h(9814),S=h(3075),e=h(7322),F=h(530),Q=h(2925);function t(u,C){if(1&u&&(f.TgZ(0,"mat-label",7),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&u){var E=f.oxw();f.xp6(1),f.hij(" ",f.lcZ(2,1,E.label)," ")}}function ae(u,C){if(1&u){var E=f.EpF();f.TgZ(0,"div"),f.TgZ(1,"mat-radio-button",8),f.NdJ("change",function(Ie){return f.CHM(E),f.oxw().change(Ie)}),f._uU(2),f.ALo(3,"translate"),f.qZA(),f.qZA()}if(2&u){var k,ce=C.$implicit;f.Tol(null!==(k=ce.cssClass)&&void 0!==k?k:""),f.xp6(1),f.Q6J("value",ce.value),f.xp6(1),f.hij(" ",f.lcZ(3,4,ce.label)," ")}}var W=function(){var u=function(){function C(){(0,Y.Z)(this,C),this.submitted=!1,this.onChange=new f.vpe}return(0,j.Z)(C,[{key:"change",value:function(ce){this.onChange.emit(ce.value)}}]),C}();return u.\u0275fac=function(E){return new(E||u)},u.\u0275cmp=f.Xpm({type:u,selectors:[["app-radio-button"]],inputs:{control:"control",label:"label",radioList:"radioList",submitted:"submitted"},outputs:{onChange:"onChange"},decls:7,vars:6,consts:[[1,"row","m-0",2,"gap","5px 10px"],["class","radio-group-label d-flex align-items-center radio-label roboto-bold",4,"ngIf"],[1,"radio-group-div"],[1,"row",3,"formControl"],[3,"class",4,"ngFor","ngForOf"],[1,"error","mb-2"],[3,"control","submitted","isSelect"],[1,"radio-group-label","d-flex","align-items-center","radio-label","roboto-bold"],[3,"value","change"]],template:function(E,ce){1&E&&(f.TgZ(0,"div",0),f.YNc(1,t,3,3,"mat-label",1),f.TgZ(2,"div",2),f.TgZ(3,"mat-radio-group",3),f.YNc(4,ae,4,6,"div",4),f.qZA(),f.qZA(),f.qZA(),f.TgZ(5,"mat-hint",5),f._UZ(6,"input-validation-msg",6),f.qZA()),2&E&&(f.xp6(1),f.Q6J("ngIf",ce.label),f.xp6(2),f.Q6J("formControl",ce.control),f.xp6(1),f.Q6J("ngForOf",ce.radioList),f.xp6(2),f.Q6J("control",ce.control)("submitted",ce.submitted)("isSelect",!0))},directives:[Z.O5,T.VQ,S.JJ,S.oH,Z.sg,e.bx,F.p,e.hX,T.U0],pipes:[Q.X$],styles:[".radio-group-label[_ngcontent-%COMP%]{margin:10px 0;padding:0}.radio-group-div[_ngcontent-%COMP%]{flex-grow:1}.radio-group-div[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:.5rem}.radio-group-div[_ngcontent-%COMP%]   .mat-radio-label-content[_ngcontent-%COMP%]{font-size:13.5px;color:#193141}.error[_ngcontent-%COMP%]{font-size:75%;padding:0 15px;display:block}.mat-radio-group[_ngcontent-%COMP%]{margin-bottom:0!important;justify-content:space-around}"]}),u}()},7861:function(rt,Fe,h){h.d(Fe,{d:function(){return u}});var Y=h(3144),j=h(5671),f=h(1891),Z=h(7322),T=h(9808),S=h(7238),e=h(3075),F=h(530),Q=h(2925);function t(C,E){if(1&C&&(f.ynx(0),f._uU(1),f.BQk()),2&C){var ce=f.oxw();f.xp6(1),f.hij(" ",ce.numberWithLabel," : ")}}function ae(C,E){if(1&C&&(f.TgZ(0,"span",21),f._uU(1),f.ALo(2,"translate"),f.qZA()),2&C){var ce=f.oxw();f.xp6(1),f.hij(" ",f.lcZ(2,1,ce.placeholder)," ")}}function W(C,E){1&C&&f._UZ(0,"button",22)}var u=function(){var C=(0,Y.Z)(function E(){(0,j.Z)(this,E),this.submitted=!1,this.showList=!1});return C.\u0275fac=function(ce){return new(ce||C)},C.\u0275cmp=f.Xpm({type:C,selectors:[["app-text-editor"]],inputs:{control:"control",label:"label",placeholder:"placeholder",submitted:"submitted",class:"class",showList:"showList",numberWithLabel:"numberWithLabel"},decls:27,vars:19,consts:[[1,"text-editor"],[1,"input-label"],[4,"ngIf"],["class","placeholder",4,"ngIf"],["customToolbarPosition","bottom",3,"formControl","placeholder"],["editor",""],["above-quill-editor-toolbar",""],["quill-editor-toolbar",""],[1,"ql-formats"],[1,"ql-italic"],[1,"ql-bold"],[1,"ql-underline"],[1,"ql-strike"],[1,"ql-color",3,"title"],[1,"ql-align",3,"title"],["selected",""],["value","center"],["value","right"],["value","justify"],["class","ql-list","value","bullet",4,"ngIf"],[3,"control","submitted"],[1,"placeholder"],["value","bullet",1,"ql-list"]],template:function(ce,k){1&ce&&(f.TgZ(0,"div",0),f.TgZ(1,"mat-label",1),f._uU(2),f.ALo(3,"translate"),f.YNc(4,t,2,1,"ng-container",2),f.YNc(5,ae,3,3,"span",3),f.qZA(),f.TgZ(6,"quill-editor",4,5),f.ALo(8,"translate"),f.TgZ(9,"div",6),f._uU(10),f.ALo(11,"translate"),f.qZA(),f.TgZ(12,"div",7),f.TgZ(13,"span",8),f._UZ(14,"button",9),f._UZ(15,"button",10),f._UZ(16,"button",11),f._UZ(17,"button",12),f._UZ(18,"select",13),f.TgZ(19,"select",14),f._UZ(20,"option",15),f._UZ(21,"option",16),f._UZ(22,"option",17),f._UZ(23,"option",18),f.qZA(),f.YNc(24,W,1,0,"button",19),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(25,"mat-hint"),f._UZ(26,"input-validation-msg",20),f.qZA()),2&ce&&(f.Tol(k.class),f.xp6(2),f.hij(" ",f.lcZ(3,13,k.label)," "),f.xp6(2),f.Q6J("ngIf",k.numberWithLabel),f.xp6(1),f.Q6J("ngIf",k.placeholder&&(!k.control.value||""==k.control.value)),f.xp6(1),f.Q6J("formControl",k.control)("placeholder",f.lcZ(8,15,k.placeholder)),f.xp6(4),f.Oqu(f.lcZ(11,17,k.placeholder)),f.xp6(8),f.Q6J("title","Color"),f.xp6(1),f.Q6J("title","Aligment"),f.xp6(5),f.Q6J("ngIf",k.showList),f.xp6(2),f.Q6J("control",k.control)("submitted",k.submitted))},directives:[Z.hX,T.O5,S.g6,e.JJ,e.oH,e.YN,e.Kr,Z.bx,F.p],pipes:[Q.X$],styles:[".ql-container.ql-snow{border-bottom:none;height:102px;border-radius:20px 20px 0 0;border-color:#0000001f}  .ql-container.ql-snow .ql-editor:before{display:none}  .ql-toolbar.ql-snow{border-top:none;border-radius:0 0 20px 20px;border-color:#0000001f}  .ql-toolbar.ql-snow button{width:20px;height:20px}  .ql-toolbar.ql-snow .ql-picker-label{width:25px;height:25px}  .ql-toolbar.ql-snow .ql-color-picker{margin-top:-4px}  .ql-toolbar.ql-snow .ql-align{margin-top:-5px}  .ql-toolbar.ql-snow svg{color:#666}  .ql-picker.ql-expanded .ql-picker-options{z-index:5!important}.text-editor[_ngcontent-%COMP%]   .input-label[_ngcontent-%COMP%]{display:inline-block;margin-bottom:5px}.text-editor[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{color:#999;margin:0 3px}"]}),C}()},4920:function(rt,Fe,h){h.d(Fe,{N:function(){return Y}});var Y=function(){return(j=Y||(Y={}))[j.success=1]="success",j[j.faild=0]="faild",Y;var j}()}}]);