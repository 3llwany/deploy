"use strict";(self.webpackChunkegyTrainingNew=self.webpackChunkegyTrainingNew||[]).push([[440],{6440:function(Kr,Ue,f){f.r(Ue),f.d(Ue,{ExamsModule:function(){return Xr}});var S=f(3144),U=f(5671),T=f(9808),u=f(3075),q=f(4330),R=f(1069),e=f(1891),$=f(2290),Y=f(7011),I=f(8555),ke=f(2397),k=f(8966),E=f(6405),Z=f(9224),w=f(7423),C=f(7322),L=f(7531),_e=f(5245),ie=f(9966),Ie=f(226),D=f(2925);function We(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1," You must enter a value. "),e.qZA())}function Xe(n,l){if(1&n&&(e.TgZ(0,"mat-hint",18),e.YNc(1,We,2,0,"span",5),e.qZA()),2&n){var i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==i.FormCtrls.from.errors?null:i.FormCtrls.from.errors.required)||(null==i.FormCtrls.from.errors?null:i.FormCtrls.from.errors.minusNum))}}function Ke(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1," You must enter a value. "),e.qZA())}function et(n,l){if(1&n&&(e.TgZ(0,"mat-hint",18),e.YNc(1,Ke,2,0,"span",5),e.qZA()),2&n){var i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==i.FormCtrls.to.errors?null:i.FormCtrls.to.errors.required)||(null==i.FormCtrls.to.errors?null:i.FormCtrls.to.errors.minusNum))}}function tt(n,l){if(1&n&&(e.ynx(0),e.TgZ(1,"div",6),e.TgZ(2,"mat-form-field",7),e.TgZ(3,"mat-label"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"input",16),e.YNc(7,Xe,2,1,"mat-hint",9),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"mat-form-field",7),e.TgZ(10,"mat-label"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"input",17),e.YNc(14,et,2,1,"mat-hint",9),e.qZA(),e.qZA(),e.BQk()),2&n){var i=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,4,"labels.From")," "),e.xp6(3),e.Q6J("ngIf",i.FormCtrls.from.invalid&&(i.FormCtrls.from.touched||i.Submitted)),e.xp6(4),e.hij(" ",e.lcZ(12,6,"labels.To")," "),e.xp6(3),e.Q6J("ngIf",i.FormCtrls.to.invalid&&(i.FormCtrls.to.touched||i.Submitted))}}function nt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1," You must enter a value. "),e.qZA())}function it(n,l){if(1&n&&(e.TgZ(0,"mat-hint",18),e.YNc(1,nt,2,0,"span",5),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==i.FormCtrls.value.errors?null:i.FormCtrls.value.errors.required)||(null==i.FormCtrls.value.errors?null:i.FormCtrls.value.errors.minusNum))}}function at(n,l){1&n&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.ByQuestion")," "))}function ot(n,l){1&n&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.ByExam")," "))}function lt(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"tr"),e.YNc(1,at,3,3,"td",5),e.YNc(2,ot,3,3,"td",5),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e.TgZ(10,"button",19),e.NdJ("click",function(){var r=e.CHM(i).$implicit;return e.oxw().openDeleateExamPointDialog(r)}),e.TgZ(11,"mat-icon"),e._uU(12,"delete"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){var t=l.$implicit;e.xp6(1),e.Q6J("ngIf",t.ByQuestion),e.xp6(1),e.Q6J("ngIf",!t.ByQuestion),e.xp6(2),e.Oqu(t.FromValue),e.xp6(2),e.Oqu(t.ToValue),e.xp6(2),e.Oqu(t.Value)}}function rt(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"pagination-controls",20),e.NdJ("pageChange",function(o){e.CHM(i);var r=e.oxw();return r.p=o,r.getExamCustomPoints(o)}),e.qZA()}if(2&n){var t=e.oxw();e.Q6J("maxSize",t.maxSize)}}var st=function(l){return{functionId:l}},ut=function(l,i){return{itemsPerPage:5,currentPage:l,totalItems:i}},mt=function(){var n=function(){function l(i,t,a,o,r,s,m){var d=this;(0,U.Z)(this,l),this.fb=i,this.toastr=t,this.authserv=a,this.route=o,this.PointsService=r,this.dialog=s,this.spinner=m,this.Submitted=!1,this.p=1,this.maxSize=9,o.paramMap.subscribe(function(c){d.templateId=Number(c.get("templateId"))}),this.route.queryParamMap.subscribe(function(c){d.functionId=Number(c.get("functionId"))})}return(0,S.Z)(l,[{key:"ngOnInit",value:function(){this.getTemplateCustomPoints(1),this.myForm=this.fb.group({ByQuestion:[!1,[u.kI.required]],from:[""],to:[""],value:["",[u.kI.required,q.D.minusNum]]}),this.ByQuestionValidators(!1)}},{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"addTemplateCustomPoint",value:function(){var a,o,r,s,t=this;this.Submitted=!0;var m={itemId:this.templateId,ByQuestion:null===(a=this.FormCtrls)||void 0===a?void 0:a.ByQuestion.value,from:null===(o=this.FormCtrls)||void 0===o?void 0:o.from.value,to:null===(r=this.FormCtrls)||void 0===r?void 0:r.to.value,value:null===(s=this.FormCtrls)||void 0===s?void 0:s.value.value};this.myForm.valid&&(this.spinner.show(),this.PointsService.addTemplateCustomPoint(m).subscribe(function(d){var c;1==d.returnValue&&(t.getTemplateCustomPoints(1),t.toastr.success("\u062a\u0645 \u0625\u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u0646\u0642\u0627\u0637"),t.Submitted=!1,t.myForm.reset(),null===(c=t.FormCtrls)||void 0===c||c.ByQuestion.setValue(!0)),t.spinner.hide()}))}},{key:"getTemplateCustomPoints",value:function(t){var a=this;this.spinner.show(),this.PointsService.getTemplateCustomPoints(t,this.templateId).subscribe(function(o){1==o.returnValue&&(a.ItemsCount=o.itemsCount,a.Points=o.points),a.spinner.hide()})}},{key:"deleteExamCustomPoint",value:function(t){var a=this;this.spinner.show(),this.PointsService.deleteExamCustomPoint(t.Id).subscribe(function(o){if(1==o.returnValue){var r=a.Points.findIndex(function(s){return s==t});a.Points.splice(r,1),a.toastr.success("\u062a\u0645 \u0627\u0644\u062d\u0630\u0641")}a.spinner.hide()})}},{key:"openDeleateExamPointDialog",value:function(t){var a=this;this.dialog.open(R.F,{data:{msg:"".concat(t.Value,": points"),panelClass:"dialog-radius"}}).afterClosed().subscribe(function(o){o&&a.deleteExamCustomPoint(t)})}},{key:"track",value:function(t,a){return a.Id}},{key:"ByQuestionValidators",value:function(t){1==t?(this.FormCtrls.from.reset(),this.FormCtrls.from.clearValidators(),this.FormCtrls.to.reset(),this.FormCtrls.to.clearValidators()):(this.FormCtrls.from.setValidators([u.kI.required,q.D.minusNum]),this.FormCtrls.to.setValidators([u.kI.required,q.D.bigZero])),this.FormCtrls.from.updateValueAndValidity(),this.FormCtrls.to.updateValueAndValidity()}}]),l}();return n.\u0275fac=function(i){return new(i||n)(e.Y36(u.qu),e.Y36($._W),e.Y36(Y.e),e.Y36(I.gz),e.Y36(ke.q),e.Y36(k.uw),e.Y36(E.t2))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-templates-custome-points"]],decls:47,vars:39,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","","routerLink","/dashboard/exams-setup/templates/index",1,"btn","btn-warning","bg-light-warning","float-right",3,"queryParams"],[1,"container-fluid"],[3,"formGroup"],[4,"ngIf"],[1,"col-lg-4","col-12"],["appearance","legacy"],["matInput","","type","number","formControlName","value"],["class","text-danger",4,"ngIf"],["align","end"],["mat-raised-button","","type","button",1,"btn","btn-primary","bg-light-info",3,"click"],[1,"fa","fa-plus"],[1,"table"],[4,"ngFor","ngForOf","ngForTrackBy"],["dir","ltr","previousLabel","","nextLabel","",3,"maxSize","pageChange",4,"ngIf"],["matInput","","type","number","formControlName","from"],["matInput","","type","number","formControlName","to"],[1,"text-danger"],["mat-mini-fab","","color","warn",3,"click"],["dir","ltr","previousLabel","","nextLabel","",3,"maxSize","pageChange"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"a",2),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.TgZ(9,"mat-card-content",3),e.TgZ(10,"form",4),e.TgZ(11,"div",0),e.YNc(12,tt,15,8,"ng-container",5),e.TgZ(13,"div",6),e.TgZ(14,"mat-form-field",7),e.TgZ(15,"mat-label"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e._UZ(18,"input",8),e.YNc(19,it,2,1,"mat-hint",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"mat-card-actions",10),e.TgZ(21,"button",11),e.NdJ("click",function(){return t.addTemplateCustomPoint()}),e._UZ(22,"i",12),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.qZA(),e.qZA(),e.ynx(25),e.TgZ(26,"table",13),e.TgZ(27,"thead"),e.TgZ(28,"tr"),e.TgZ(29,"th"),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"th"),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"th"),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"th"),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"th"),e._uU(42,"actions"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(43,"tbody"),e.YNc(44,lt,13,5,"tr",14),e.ALo(45,"paginate"),e.qZA(),e.YNc(46,rt,1,1,"pagination-controls",15),e.qZA(),e.BQk(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(4),e.hij(" ",e.lcZ(5,15,"labels.TemplatePoints")," "),e.xp6(2),e.Q6J("queryParams",e.VKq(34,st,t.functionId)),e.xp6(1),e.hij(" ",e.lcZ(8,17,"General.Back")," "),e.xp6(3),e.Q6J("formGroup",t.myForm),e.xp6(2),e.Q6J("ngIf",!1===t.FormCtrls.ByQuestion.value),e.xp6(4),e.hij(" ",e.lcZ(17,19,"labels.pointsNumber")," "),e.xp6(3),e.Q6J("ngIf",t.FormCtrls.value.invalid&&(t.FormCtrls.value.touched||t.Submitted)),e.xp6(4),e.hij(" ",e.lcZ(24,21,"General.Add")," "),e.xp6(7),e.hij(" ",e.lcZ(31,23,"labels.ByQuestion")," "),e.xp6(3),e.hij(" ",e.lcZ(34,25,"labels.From")," "),e.xp6(3),e.hij(" ",e.lcZ(37,27,"labels.To")," "),e.xp6(3),e.hij(" ",e.lcZ(40,29,"labels.pointsNumber")," "),e.xp6(5),e.Q6J("ngForOf",e.xi3(45,31,t.Points,e.WLB(36,ut,t.p,t.ItemsCount)))("ngForTrackBy",t.track),e.xp6(2),e.Q6J("ngIf",(null==t.Points?null:t.Points.length)>5))},directives:[Z.a8,Z.n5,w.zs,I.yS,Z.dn,u._Y,u.JL,u.sg,T.O5,C.KE,C.hX,L.Nt,u.wV,u.Fj,u.JJ,u.u,Z.hq,w.lW,T.sg,C.bx,_e.Hw,ie.LS,Ie.Lv],pipes:[D.X$,ie._s],styles:[""]}),n}(),dt=f(136),ct=f(7777),pt=f(8521),_t=f(520),De=function(){var n=function(l){(0,dt.Z)(t,l);var i=(0,ct.Z)(t);function t(a){var o;return(0,U.Z)(this,t),(o=i.call(this,a)).http=a,o}return(0,S.Z)(t,[{key:"getTemplates",value:function(o,r,s){return this.post("Admin/getTemplates/".concat(o,"/").concat(r),s)}},{key:"getTemplateById",value:function(o){return this.get("template/returnTemplateById/".concat(o))}},{key:"deleteTemplate",value:function(o){return this.get("template/deleteTemplateById/".concat(o))}},{key:"PublishDepublishTemplate",value:function(o){return this.post("template/PublishDepublishTemplate/".concat(o),null)}},{key:"getPresets",value:function(o){return this.get("template/returnPresetsByEduCompId/".concat(o))}},{key:"addUpdateTemplate",value:function(o){return this.post("template/addtemplate",o)}},{key:"addTemplateDetails",value:function(o){return this.post("AJAX/addTemplateDetail",o)}},{key:"getQuestionDetails",value:function(o){return this.get("AJAX/returnTemplateDetails/".concat(o))}},{key:"DeleteDetails",value:function(o){return this.get("template/deleteTemplateDetailById/".concat(o))}},{key:"getTemplatePoints",value:function(o,r){return this.get("template/returnCustomPointTemplateByTemplateId/".concat(o,"/").concat(r))}},{key:"addTemplatePoint",value:function(o){return this.post("template/CustomTemplatePoint",o)}},{key:"deleteTemplatePoint",value:function(o){return this.delete("template/DeleteCustomTemplatePoint/".concat(o))}}]),t}(pt.K);return n.\u0275fac=function(i){return new(i||n)(e.LFG(_t.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),de=f(5086),be=f(6471),Ae=f(4107),ae=f(508),ye=f(6856),K=f(9814),qe=f(9772);function ht(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.AddTemplate")," "))}function gt(n,l){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.AsE(" ",e.lcZ(2,2,"labels.UpdateTemplate")," - ",i.templateName," ")}}function ft(n,l){if(1&n&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Id),e.xp6(1),e.hij(" ",i.Name," ")}}function vt(n,l){if(1&n&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.teacherUserId),e.xp6(1),e.hij(" ",i.teacher_ar_name," ")}}function Zt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function Ct(n,l){if(1&n&&(e.TgZ(0,"mat-hint",47),e.YNc(1,Zt,3,3,"span",2),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.FormCtrl.teacherUserIdCtrl||null==i.FormCtrl.teacherUserIdCtrl.errors?null:i.FormCtrl.teacherUserIdCtrl.errors.required)}}function Tt(n,l){if(1&n&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Value),e.xp6(1),e.hij(" ",i.Text," ")}}function xt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function It(n,l){if(1&n&&(e.TgZ(0,"mat-hint",47),e.YNc(1,xt,3,3,"span",2),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.FormCtrl.stageId||null==i.FormCtrl.stageId.errors?null:i.FormCtrl.stageId.errors.required)}}function bt(n,l){if(1&n&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Value),e.xp6(1),e.hij(" ",i.Text_Ar," ")}}function At(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function qt(n,l){if(1&n&&(e.TgZ(0,"mat-hint",47),e.YNc(1,At,3,3,"span",2),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.FormCtrl.yearId.errors?null:i.FormCtrl.yearId.errors.required)}}function yt(n,l){if(1&n&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Value),e.xp6(1),e.hij(" ",i.Text," ")}}function Ft(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function Qt(n,l){if(1&n&&(e.TgZ(0,"mat-hint",47),e.YNc(1,Ft,3,3,"span",2),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.FormCtrl.subjectId||null==i.FormCtrl.subjectId.errors?null:i.FormCtrl.subjectId.errors.required)}}function wt(n,l){if(1&n&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Value),e.xp6(1),e.hij(" ",i.Text," ")}}function Nt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function St(n,l){if(1&n&&(e.TgZ(0,"mat-hint",47),e.YNc(1,Nt,3,3,"span",2),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.FormCtrl.UnitRevisionID||null==i.FormCtrl.UnitRevisionID.errors?null:i.FormCtrl.UnitRevisionID.errors.required)}}function Ut(n,l){if(1&n&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Value),e.xp6(1),e.hij(" ",i.Text," ")}}function kt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Dt(n,l){if(1&n&&(e.TgZ(0,"mat-hint",47),e.YNc(1,kt,3,3,"span",2),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.FormCtrl.LessonID||null==i.FormCtrl.LessonID.errors?null:i.FormCtrl.LessonID.errors.required)}}function Et(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Jt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function Yt(n,l){if(1&n&&(e.TgZ(0,"mat-hint",47),e.YNc(1,Et,3,3,"span",2),e.YNc(2,Jt,3,3,"span",2),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.FormCtrl.Name||null==i.FormCtrl.Name.errors?null:i.FormCtrl.Name.errors.required),e.xp6(1),e.Q6J("ngIf",null==i.FormCtrl.Name||null==i.FormCtrl.Name.errors?null:i.FormCtrl.Name.errors.whiteSpace)}}function Lt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function jt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function Vt(n,l){if(1&n&&(e.TgZ(0,"mat-hint",47),e.YNc(1,Lt,3,3,"span",2),e.YNc(2,jt,3,3,"span",2),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.FormCtrl.exam_hour||null==i.FormCtrl.exam_hour.errors?null:i.FormCtrl.exam_hour.errors.required),e.xp6(1),e.Q6J("ngIf",null==i.FormCtrl.exam_hour||null==i.FormCtrl.exam_hour.errors?null:i.FormCtrl.exam_hour.errors.minusNum)}}function Pt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Gt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function Ot(n,l){if(1&n&&(e.TgZ(0,"mat-hint",47),e.YNc(1,Pt,3,3,"span",2),e.YNc(2,Gt,3,3,"span",2),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.FormCtrl.exam_minute||null==i.FormCtrl.exam_minute.errors?null:i.FormCtrl.exam_minute.errors.required),e.xp6(1),e.Q6J("ngIf",null==i.FormCtrl.exam_minute||null==i.FormCtrl.exam_minute.errors?null:i.FormCtrl.exam_minute.errors.minusNum)}}function Mt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Bt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function Ht(n,l){if(1&n&&(e.TgZ(0,"mat-hint",47),e.YNc(1,Mt,3,3,"span",2),e.YNc(2,Bt,3,3,"span",2),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.FormCtrl.price||null==i.FormCtrl.price.errors?null:i.FormCtrl.price.errors.required),e.xp6(1),e.Q6J("ngIf",null==i.price||null==i.price.errors?null:i.price.errors.minusNum)}}function Rt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function $t(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function zt(n,l){if(1&n&&(e.TgZ(0,"mat-hint",51),e.YNc(1,Rt,3,3,"span",2),e.YNc(2,$t,3,3,"span",2),e.qZA()),2&n){var i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==i.FormCtrl.repeatableExam_Count||null==i.FormCtrl.repeatableExam_Count.errors?null:i.FormCtrl.repeatableExam_Count.errors.required),e.xp6(1),e.Q6J("ngIf",null==i.FormCtrl.repeatableExam_Count||null==i.FormCtrl.repeatableExam_Count.errors?null:i.FormCtrl.repeatableExam_Count.errors.bigZero)}}function Wt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Xt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function Kt(n,l){if(1&n&&(e.TgZ(0,"mat-hint",51),e.YNc(1,Wt,3,3,"span",2),e.YNc(2,Xt,3,3,"span",2),e.qZA()),2&n){var i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==i.FormCtrl.StudentRepeatExamCost||null==i.FormCtrl.StudentRepeatExamCost.errors?null:i.FormCtrl.StudentRepeatExamCost.errors.required),e.xp6(1),e.Q6J("ngIf",null==i.FormCtrl.StudentRepeatExamCost||null==i.FormCtrl.StudentRepeatExamCost.errors?null:i.FormCtrl.StudentRepeatExamCost.errors.minusNum)}}function en(n,l){if(1&n&&(e.ynx(0),e.TgZ(1,"div",6),e.TgZ(2,"mat-form-field",7),e.TgZ(3,"mat-label"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"input",48),e.YNc(7,zt,3,2,"mat-hint",49),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"mat-form-field",7),e.TgZ(10,"mat-label"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"input",50),e.YNc(14,Kt,3,2,"mat-hint",49),e.qZA(),e.qZA(),e.BQk()),2&n){var i=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,4,"labels.repeatNumbers")),e.xp6(3),e.Q6J("ngIf",(null==i.FormCtrl.repeatableExam_Count?null:i.FormCtrl.repeatableExam_Count.invalid)&&((null==i.FormCtrl.repeatableExam_Count?null:i.FormCtrl.repeatableExam_Count.touched)||i.submitted)),e.xp6(4),e.Oqu(e.lcZ(12,6,"labels.repeatingPrice")),e.xp6(3),e.Q6J("ngIf",(null==i.FormCtrl.StudentRepeatExamCost?null:i.FormCtrl.StudentRepeatExamCost.invalid)&&((null==i.FormCtrl.StudentRepeatExamCost?null:i.FormCtrl.StudentRepeatExamCost.touched)||i.submitted))}}function tn(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){return e.CHM(i),e.oxw().addUpdateTemplate()}),e._UZ(1,"i",53),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.Add")," "))}function nn(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"button",54),e.NdJ("click",function(){return e.CHM(i),e.oxw().addUpdateTemplate()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"General.Update")," "))}function an(n,l){1&n&&(e.TgZ(0,"span",51),e._uU(1," You must enter a value. "),e.qZA())}function on(n,l){1&n&&(e.TgZ(0,"span",51),e._uU(1," You must enter a correct value. "),e.qZA())}function ln(n,l){if(1&n&&(e.TgZ(0,"mat-hint",63),e.YNc(1,an,2,0,"span",49),e.YNc(2,on,2,0,"span",49),e.qZA()),2&n){var i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==i.DetailsCtrl.questionsCount.errors?null:i.DetailsCtrl.questionsCount.errors.required),e.xp6(1),e.Q6J("ngIf",null==i.DetailsCtrl.questionsCount.errors?null:i.DetailsCtrl.questionsCount.errors.bigZero)}}function rn(n,l){1&n&&(e.TgZ(0,"span",51),e._uU(1," You must enter a value. "),e.qZA())}function sn(n,l){1&n&&(e.TgZ(0,"span",51),e._uU(1," You must enter a correct value. "),e.qZA())}function un(n,l){if(1&n&&(e.TgZ(0,"mat-hint",63),e.YNc(1,rn,2,0,"span",49),e.YNc(2,sn,2,0,"span",49),e.qZA()),2&n){var i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==i.DetailsCtrl.mark.errors?null:i.DetailsCtrl.mark.errors.required),e.xp6(1),e.Q6J("ngIf",null==i.DetailsCtrl.mark.errors?null:i.DetailsCtrl.mark.errors.minusNum)}}function mn(n,l){if(1&n&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Value),e.xp6(1),e.hij(" ",i.Text," ")}}function dn(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function cn(n,l){if(1&n&&(e.TgZ(0,"mat-hint",47),e.YNc(1,dn,3,3,"span",2),e.qZA()),2&n){var i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==i.DetailsCtrl.unitRevisionID||null==i.DetailsCtrl.unitRevisionID.errors?null:i.DetailsCtrl.unitRevisionID.errors.required)}}function pn(n,l){if(1&n&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Value),e.xp6(1),e.hij(" ",i.Text," ")}}function _n(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function hn(n,l){if(1&n&&(e.TgZ(0,"mat-hint",47),e.YNc(1,_n,3,3,"span",2),e.qZA()),2&n){var i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==i.DetailsCtrl.LessonID||null==i.DetailsCtrl.LessonID.errors?null:i.DetailsCtrl.LessonID.errors.required)}}function gn(n,l){if(1&n&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Value),e.xp6(1),e.hij(" ",i.Text," ")}}function fn(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){return e.CHM(i),e.oxw(2).addTemplateDetails()}),e._UZ(1,"i",53),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.Add")," "))}function vn(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.TgZ(7,"mat-card-content",4),e.TgZ(8,"div",0),e.TgZ(9,"div",1),e.TgZ(10,"form",5),e.TgZ(11,"div",0),e.TgZ(12,"div",55),e.TgZ(13,"mat-form-field",7),e.TgZ(14,"mat-label"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e._UZ(17,"input",56),e.YNc(18,ln,3,2,"mat-hint",57),e.qZA(),e.qZA(),e.TgZ(19,"div",55),e.TgZ(20,"mat-form-field",7),e.TgZ(21,"mat-label"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"mat-select",58),e.TgZ(25,"mat-option"),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"mat-option",38),e._uU(29,"\u0633\u0647\u0644"),e.qZA(),e.TgZ(30,"mat-option",38),e._uU(31,"\u0645\u062a\u0648\u0633\u0637"),e.qZA(),e.TgZ(32,"mat-option",38),e._uU(33,"\u0635\u0639\u0628"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"div",6),e.TgZ(35,"mat-form-field",7),e.TgZ(36,"mat-label"),e._uU(37),e.ALo(38,"translate"),e.qZA(),e._UZ(39,"input",59),e.YNc(40,un,3,2,"mat-hint",57),e.qZA(),e.qZA(),e.TgZ(41,"div",55),e.TgZ(42,"mat-form-field",7),e.TgZ(43,"mat-label"),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.TgZ(46,"mat-select",60),e.NdJ("selectionChange",function(){e.CHM(i);var o=e.oxw();return o.GetLessonsForDetails(null==o.DetailsCtrl.unitRevisionID?null:o.DetailsCtrl.unitRevisionID.value)}),e.TgZ(47,"mat-option",9),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.YNc(50,mn,2,2,"mat-option",10),e.qZA(),e.YNc(51,cn,2,1,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(52,"div",55),e.TgZ(53,"mat-form-field",7),e.TgZ(54,"mat-label"),e._uU(55),e.ALo(56,"translate"),e.qZA(),e.TgZ(57,"mat-select",61),e.NdJ("selectionChange",function(){e.CHM(i);var o=e.oxw();return o.GetTopicsForDetails(null==o.DetailsCtrl.lessonID?null:o.DetailsCtrl.lessonID.value)}),e.TgZ(58,"mat-option",9),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.YNc(61,pn,2,2,"mat-option",10),e.qZA(),e.YNc(62,hn,2,1,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(63,"div",55),e.TgZ(64,"mat-form-field",7),e.TgZ(65,"mat-label"),e._uU(66),e.ALo(67,"translate"),e.qZA(),e.TgZ(68,"mat-select",62),e.TgZ(69,"mat-option",9),e._uU(70),e.ALo(71,"translate"),e.qZA(),e.YNc(72,gn,2,2,"mat-option",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(73,"mat-card-actions",43),e.YNc(74,fn,4,3,"button",44),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){var t=e.oxw();e.xp6(5),e.hij(" ",e.lcZ(6,23,"labels.QuestionData")," "),e.xp6(5),e.Q6J("formGroup",t.DetailForm),e.xp6(5),e.hij(" ",e.lcZ(16,25,"labels.questionsCount")," "),e.xp6(3),e.Q6J("ngIf",t.DetailsCtrl.questionsCount.invalid&&(t.DetailsCtrl.questionsCount.touched||t.DetailSubmitted)),e.xp6(4),e.Oqu(e.lcZ(23,27,"labels.Level")),e.xp6(4),e.hij(" ",e.lcZ(27,29,"General.Choose")," "),e.xp6(2),e.Q6J("value",1),e.xp6(2),e.Q6J("value",5),e.xp6(2),e.Q6J("value",10),e.xp6(5),e.hij(" ",e.lcZ(38,31,"labels.QuestionMark")," "),e.xp6(3),e.Q6J("ngIf",t.DetailsCtrl.mark.invalid&&(t.DetailsCtrl.mark.touched||t.DetailSubmitted)),e.xp6(4),e.Oqu(e.lcZ(45,33,"labels.Unit")),e.xp6(4),e.hij(" ",e.lcZ(49,35,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.unitsForDetails),e.xp6(1),e.Q6J("ngIf",(null==t.DetailsCtrl.unitRevisionID?null:t.DetailsCtrl.unitRevisionID.invalid)&&((null==t.DetailsCtrl.unitRevisionID?null:t.DetailsCtrl.unitRevisionID.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(56,37,"labels.Lesson")),e.xp6(4),e.hij(" ",e.lcZ(60,39,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.lessonsForDetails),e.xp6(1),e.Q6J("ngIf",(null==t.DetailsCtrl.LessonID?null:t.DetailsCtrl.LessonID.invalid)&&((null==t.DetailsCtrl.LessonID?null:t.DetailsCtrl.LessonID.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(67,41,"labels.Topic")),e.xp6(4),e.hij(" ",e.lcZ(71,43,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.topicsForDetails),e.xp6(2),e.Q6J("ngIf",null!=t.FormCtrl.Id.value)}}function Zn(n,l){1&n&&(e.TgZ(0,"td"),e._uU(1,"\u0633\u0647\u0644"),e.qZA())}function Cn(n,l){1&n&&(e.TgZ(0,"td"),e._uU(1,"\u0645\u062a\u0648\u0633\u0637"),e.qZA())}function Tn(n,l){1&n&&(e.TgZ(0,"td"),e._uU(1,"\u0635\u0639\u0628"),e.qZA())}function xn(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.YNc(7,Zn,2,0,"td",2),e.YNc(8,Cn,2,0,"td",2),e.YNc(9,Tn,2,0,"td",2),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td",67),e.TgZ(19,"button",68),e.NdJ("click",function(){var s=e.CHM(i).$implicit;return e.oxw(2).openDeleateDialog(s)}),e.TgZ(20,"mat-icon"),e._uU(21,"delete"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){var t=l.$implicit,a=l.index;e.xp6(2),e.Oqu(a+1),e.xp6(2),e.Oqu(null==t?null:t.questionsCount),e.xp6(2),e.Oqu(null==t?null:t.mark),e.xp6(1),e.Q6J("ngIf",1==(null==t?null:t.questionsLevel)),e.xp6(1),e.Q6J("ngIf",5==(null==t?null:t.questionsLevel)),e.xp6(1),e.Q6J("ngIf",10==(null==t?null:t.questionsLevel)),e.xp6(2),e.Oqu(null==t?null:t.SubjectName),e.xp6(2),e.Oqu(null==t?null:t.UnitName),e.xp6(2),e.Oqu(null==t?null:t.LessonName),e.xp6(2),e.Oqu(null==t?null:t.TopicName)}}function In(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"div",69),e.TgZ(1,"pagination-controls",70),e.NdJ("pageChange",function(o){return e.CHM(i),e.oxw(2).p=o}),e.qZA(),e.qZA()}if(2&n){var t=e.oxw(2);e.xp6(1),e.Q6J("maxSize",t.maxSize)}}var bn=function(l,i){return{itemsPerPage:5,currentPage:l,totalItems:i}};function An(n,l){if(1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.TgZ(7,"mat-card-content",4),e.TgZ(8,"div",0),e.TgZ(9,"div",1),e.TgZ(10,"table",64),e.TgZ(11,"thead"),e.TgZ(12,"tr"),e.TgZ(13,"th"),e._uU(14,"#"),e.qZA(),e.TgZ(15,"th"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"th"),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"th"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"th"),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"th"),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"th"),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"th"),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"th"),e._uU(37,"\xad"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"tbody"),e.YNc(39,xn,22,10,"tr",65),e.ALo(40,"paginate"),e.qZA(),e.qZA(),e.YNc(41,In,2,1,"div",66),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){var i=e.oxw();e.xp6(5),e.hij(" ",e.lcZ(6,11,"labels.Questions")," "),e.xp6(11),e.Oqu(e.lcZ(17,13,"labels.questionsCount")),e.xp6(3),e.Oqu(e.lcZ(20,15,"labels.QuestionMark")),e.xp6(3),e.Oqu(e.lcZ(23,17,"labels.Level")),e.xp6(3),e.Oqu(e.lcZ(26,19,"labels.Subject")),e.xp6(3),e.Oqu(e.lcZ(29,21,"labels.Unit")),e.xp6(3),e.Oqu(e.lcZ(32,23,"labels.Lesson")),e.xp6(3),e.Oqu(e.lcZ(35,25,"labels.Topic")),e.xp6(5),e.Q6J("ngForOf",e.xi3(40,27,i.QuestionDetails,e.WLB(30,bn,i.p,i.QuestionDetails.length)))("ngForTrackBy",i.track),e.xp6(2),e.Q6J("ngIf",i.QuestionDetails.length>5)}}var qn=function(l){return{functionId:l}},yn=function(){var n=function(){function l(i,t,a,o,r,s,m,d,c,g){var p=this;(0,U.Z)(this,l),this.fb=i,this.route=t,this.toastr=a,this.spinner=o,this.authserv=r,this.TemplatesService=s,this.dialog=m,this.GeneralService=d,this.datePipe=c,this.EducationalService=g,this.p=1,this.maxSize=9,this.Teachers=[],this.QuestionDetails=[],this.Presets=[],this.stages=[],this.years=[],this.subjects=[],this.units=[],this.lessons=[],this.topics=[],this.submitted=!1,this.DetailSubmitted=!1,this.templateId=null,t.queryParamMap.subscribe(function(_){p.templateId=_.get("templateId"),p.functionId=Number(_.get("functionId")),p.templateId&&(p.getTemplateById(),p.getQuestionDetails(p.templateId)),p.functionId&&p.authserv.getUserRowFunctions(p.functionId).subscribe(function(v){v&&(p.rowFunctions=v)})})}return(0,S.Z)(l,[{key:"ngOnInit",value:function(){this.myForm=this.fb.group({EduCompId:[this.EduCompId],Id:[this.templateId],presetTemplateId:[""],teacherUserId:["",u.kI.required],yearId:["",u.kI.required],stageId:["",u.kI.required],subjectId:["",u.kI.required],UnitRevisionID:[""],LessonID:[""],topicId:[""],Name:["",[u.kI.required,q.D.whiteSpace]],price:["",[u.kI.required,q.D.minusNum]],exam_minute:["",[u.kI.required,q.D.minusNum]],exam_hour:["",[u.kI.required,q.D.minusNum]],priceDiscount:[""],Avilable_Date_From:[""],priceDiscountType:[0],Avilable_Date_To:[""],fromHour:[""],toHour:[""],ResultDate:[""],ResultTime:[""],Individually_Purchased:[!1],repeatableExam:[!1],repeatableExam_Count:[!1],SendWhatsApp:[!1],CustomDiscountApplied:[!1],StudentRepeatExamCost:[""],Publish:[!1]}),this.DetailForm=this.fb.group({templateId:[this.templateId,u.kI.required],questionsLevel:["",u.kI.required],mark:["",[u.kI.required,q.D.minusNum]],questionsCount:["",[u.kI.required,q.D.bigZero]],unitRevisionID:["",u.kI.required],lessonID:["",u.kI.required],TopicID:[""]}),null!=this.templateId||(this.FormCtrl.stageId.disable(),this.FormCtrl.yearId.disable(),this.FormCtrl.subjectId.disable(),this.FormCtrl.UnitRevisionID.disable(),this.FormCtrl.LessonID.disable(),this.FormCtrl.topicId.disable(),this.DetailsCtrl.questionsCount.disable(),this.DetailsCtrl.unitRevisionID.disable(),this.DetailsCtrl.lessonID.disable(),this.DetailsCtrl.TopicID.disable(),this.DetailsCtrl.mark.disable()),this.EduCompId=this.authserv.getEduCompId(),this.branchId=this.authserv.getBranchId(),this.getTeachersByEducompId(this.EduCompId),this.getPresets(),this.FormCtrl.EduCompId.setValue(this.EduCompId),this.repeatableExamValidators()}},{key:"FormCtrl",get:function(){return this.myForm.controls}},{key:"DetailsCtrl",get:function(){return this.DetailForm.controls}},{key:"ngAfterViewInit",value:function(){var t=this;this.authserv.EduCompId.subscribe(function(a){t.EduCompId=a.EduCompId}),this.authserv.branchId.subscribe(function(a){t.branchId=a.branchId})}},{key:"addUpdateTemplate",value:function(){var t=this;this.submitted=!0;var a=this.myForm.value;a.Avilable_Date_From=this.datePipe.transform(this.FormCtrl.Avilable_Date_From.value),a.Avilable_Date_To=this.datePipe.transform(this.FormCtrl.Avilable_Date_To.value),a.ResultDate=this.datePipe.transform(this.FormCtrl.ResultDate.value),this.myForm.valid&&(this.spinner.show(),this.TemplatesService.addUpdateTemplate({presetTemplateId:a.presetTemplateId,template:a}).subscribe(function(o){console.log("createTemplate",o),o.returnValue&&(t.DetailsCtrl.templateId.setValue(o.returnValue),t.FormCtrl.Id.setValue(o.returnValue),t.getQuestionDetails(o.returnValue),t.submitted=!1,t.DetailsCtrl.questionsCount.enable(),t.DetailsCtrl.unitRevisionID.enable(),t.DetailsCtrl.lessonID.enable(),t.DetailsCtrl.TopicID.enable(),t.DetailsCtrl.mark.enable(),t.toastr.success("Done")),t.spinner.hide()}))}},{key:"getTemplateById",value:function(){var t=this;this.spinner.show(),this.TemplatesService.getTemplateById(this.templateId).subscribe(function(a){t.getStageByTeacherId(a.teacherUserId),t.FormCtrl.teacherUserId.setValue(a.teacherUserId),t.returnYears(a.stage_id),t.returnTeacherSubjects(a.educational_year_id),t.GetUnits(a.subjectId),t.GetLessons(a.UnitRevisionID),t.GetTopics(a.LessonID),t.myForm.patchValue(a),t.myForm.patchValue(a),t.FormCtrl.stageId.setValue(String(a.stage_id)),t.FormCtrl.yearId.setValue(String(a.educational_year_id)),t.FormCtrl.subjectId.setValue(String(a.subjectId)),t.FormCtrl.UnitRevisionID.setValue(String(a.UnitRevisionID)),t.FormCtrl.LessonID.setValue(String(a.LessonID)),t.templateName=a.Name;var o=a.exam_period_minute%60,r=(a.exam_period_minute-o)/60;t.FormCtrl.exam_minute.setValue(o),t.FormCtrl.exam_hour.setValue(r),t.FormCtrl.fromHour.setValue(a.fromHour),t.FormCtrl.toHour.setValue(a.toHour),t.GetUnitsForDetails(),t.spinner.hide()})}},{key:"addTemplateDetails",value:function(){var t=this;this.DetailSubmitted=!0,this.DetailForm.valid&&(this.spinner.show(),this.TemplatesService.addTemplateDetails(this.DetailForm.value).subscribe(function(o){1==o.returnValue?(t.DetailSubmitted=!1,t.getQuestionDetails(t.DetailsCtrl.templateId.value),t.DetailsCtrl.questionsCount.reset(),t.DetailsCtrl.unitRevisionID.setValue(""),t.DetailsCtrl.lessonID.setValue(""),t.DetailsCtrl.TopicID.setValue(""),t.DetailsCtrl.mark.reset(),t.toastr.success("Questiopn added")):t.toastr.error(o.returnString),t.spinner.hide()}))}},{key:"getQuestionDetails",value:function(t){var a=this;this.spinner.show(),this.TemplatesService.getQuestionDetails(t).subscribe(function(o){a.QuestionDetails=o,a.spinner.hide()})}},{key:"getPresets",value:function(){var t=this;this.spinner.show(),this.TemplatesService.getPresets(this.EduCompId).subscribe(function(a){t.Presets=a,t.spinner.hide()})}},{key:"DeleteDetails",value:function(t){var a=this;this.spinner.show(),this.TemplatesService.DeleteDetails(t.Id).subscribe(function(o){if(o.Id==t.Id){var r=a.QuestionDetails.findIndex(function(s){return s==t});a.QuestionDetails.splice(r,1),a.toastr.success(" Deleted")}a.spinner.hide()})}},{key:"openDeleateDialog",value:function(t){var a=this;this.dialog.open(R.F,{data:{msg:"",panelClass:"dialog-radius"}}).afterClosed().subscribe(function(o){o&&a.DeleteDetails(t)})}},{key:"getTeachersByEducompId",value:function(t){var a=this;this.GeneralService.getTeachersByEducompId(t).subscribe(function(o){a.Teachers=o.lstTeachers})}},{key:"getStageByTeacherId",value:function(t){var a=this;this.FormCtrl.stageId.setValue(""),this.FormCtrl.yearId.setValue(""),this.FormCtrl.subjectId.setValue(""),this.FormCtrl.UnitRevisionID.setValue(""),this.FormCtrl.LessonID.setValue(""),this.FormCtrl.topicId.setValue(""),""!=t?this.EducationalService.getStageByTeacherId(t).subscribe(function(o){a.stages=o,a.FormCtrl.stageId.enable()}):(this.FormCtrl.stageId.setValue(""),this.FormCtrl.stageId.disable(),this.FormCtrl.yearId.disable(),this.FormCtrl.subjectId.disable(),this.FormCtrl.UnitRevisionID.disable(),this.FormCtrl.LessonID.disable(),this.FormCtrl.topicId.disable())}},{key:"returnYears",value:function(t){var a=this;this.FormCtrl.yearId.setValue(""),this.FormCtrl.subjectId.setValue(""),this.FormCtrl.UnitRevisionID.setValue(""),this.FormCtrl.LessonID.setValue(""),this.FormCtrl.topicId.setValue(""),""!=t?this.EducationalService.returnYears(t).subscribe(function(o){a.years=o,a.FormCtrl.yearId.enable()}):(this.FormCtrl.yearId.setValue(""),this.FormCtrl.yearId.disable(),this.FormCtrl.subjectId.disable(),this.FormCtrl.UnitRevisionID.disable(),this.FormCtrl.LessonID.disable(),this.FormCtrl.topicId.disable())}},{key:"returnTeacherSubjects",value:function(t){var a=this;this.FormCtrl.subjectId.setValue(""),this.FormCtrl.UnitRevisionID.setValue(""),this.FormCtrl.LessonID.setValue(""),this.FormCtrl.topicId.setValue(""),""!=t?this.EducationalService.returnTeacherSubjects({yearId:t,teacherUserId:this.FormCtrl.teacherUserId.value}).subscribe(function(r){a.subjects=r,a.FormCtrl.subjectId.enable()}):(this.FormCtrl.subjectId.setValue(""),this.FormCtrl.subjectId.disable(),this.FormCtrl.UnitRevisionID.disable(),this.FormCtrl.LessonID.disable(),this.FormCtrl.topicId.disable())}},{key:"GetUnits",value:function(t){var a=this;this.FormCtrl.UnitRevisionID.setValue(""),this.FormCtrl.LessonID.setValue(""),this.FormCtrl.topicId.setValue(""),""!=t?this.EducationalService.GetUnits(t).subscribe(function(o){a.units=o,a.FormCtrl.UnitRevisionID.enable()}):(this.FormCtrl.UnitRevisionID.setValue(""),this.FormCtrl.UnitRevisionID.disable(),this.FormCtrl.LessonID.disable(),this.FormCtrl.topicId.disable())}},{key:"GetLessons",value:function(t){var a=this;this.FormCtrl.LessonID.setValue(""),this.FormCtrl.topicId.setValue(""),""!=t?this.EducationalService.GetLessons(t).subscribe(function(o){a.lessons=o,a.FormCtrl.LessonID.enable()}):(this.FormCtrl.LessonID.setValue(""),this.FormCtrl.LessonID.disable(),this.FormCtrl.topicId.disable())}},{key:"GetTopics",value:function(t){var a=this;this.FormCtrl.topicId.setValue(""),""!=t?this.EducationalService.GetTopics(t).subscribe(function(o){a.topics=o,a.FormCtrl.topicId.enable()}):(this.FormCtrl.topicId.setValue(""),this.FormCtrl.topicId.disable())}},{key:"GetUnitsForDetails",value:function(){var a,o,t=this;this.DetailsCtrl.unitRevisionID.setValue(""),this.DetailsCtrl.lessonID.setValue(""),this.DetailsCtrl.TopicID.setValue(""),(null===(a=this.FormCtrl.subjectId)||void 0===a?void 0:a.value)?this.EducationalService.GetUnits(null===(o=this.FormCtrl.subjectId)||void 0===o?void 0:o.value).subscribe(function(r){t.unitsForDetails=r,t.DetailsCtrl.unitRevisionID.enable()}):(this.DetailsCtrl.unitRevisionID.setValue(""),this.DetailsCtrl.UnitRevisionID.disable(),this.DetailsCtrl.lessonID.disable(),this.DetailsCtrl.TopicID.disable())}},{key:"GetLessonsForDetails",value:function(t){var a=this;this.DetailsCtrl.lessonID.setValue(""),this.DetailsCtrl.TopicID.setValue(""),""!=t?this.EducationalService.GetLessons(t).subscribe(function(o){a.lessonsForDetails=o,a.DetailsCtrl.lessonID.enable()}):(this.DetailsCtrl.lessonID.setValue(""),this.DetailsCtrl.lessonID.disable(),this.DetailsCtrl.TopicID.disable())}},{key:"GetTopicsForDetails",value:function(t){var a=this;this.DetailsCtrl.TopicID.setValue(""),""!=t?this.EducationalService.GetTopics(t).subscribe(function(o){a.topicsForDetails=o,a.DetailsCtrl.TopicID.enable()}):(this.DetailsCtrl.TopicID.setValue(""),this.DetailsCtrl.TopicID.disable())}},{key:"resetManual",value:function(){this.myForm.controls.teacherUserId.setValue(""),this.myForm.controls.yearId.setValue(""),this.myForm.controls.stageId.setValue(""),this.myForm.controls.subjectId.setValue(""),this.myForm.controls.UnitRevisionID.setValue(""),this.myForm.controls.lessonId.setValue(""),this.myForm.controls.topicId.setValue("")}},{key:"track",value:function(t,a){return a.Id}},{key:"repeatableExamValidators",value:function(){1==this.FormCtrl.repeatableExam.value?(this.FormCtrl.repeatableExam_Count.setValidators([u.kI.required,q.D.minusNum]),this.FormCtrl.StudentRepeatExamCost.setValidators([u.kI.required,q.D.minusNum])):(this.FormCtrl.repeatableExam_Count.clearValidators(),this.FormCtrl.repeatableExam_Count.reset(),this.FormCtrl.StudentRepeatExamCost.clearValidators(),this.FormCtrl.StudentRepeatExamCost.reset()),this.FormCtrl.repeatableExam_Count.updateValueAndValidity(),this.FormCtrl.StudentRepeatExamCost.updateValueAndValidity()}}]),l}();return n.\u0275fac=function(i){return new(i||n)(e.Y36(u.qu),e.Y36(I.gz),e.Y36($._W),e.Y36(E.t2),e.Y36(Y.e),e.Y36(De),e.Y36(k.uw),e.Y36(de.m),e.Y36(T.uU),e.Y36(be.i))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-template"]],decls:239,vars:159,consts:[[1,"row"],[1,"col-12"],[4,"ngIf"],["mat-raised-button","","routerLink","../",1,"btn","bbtn-warning","bg-light-warning","float-right",3,"queryParams"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-3","col-12"],["appearance","legacy"],["formControlName","presetTemplateId"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","teacherUserId",3,"selectionChange"],["class","danger",4,"ngIf"],["formControlName","stageId",3,"selectionChange"],["formControlName","yearId",3,"selectionChange"],["formControlName","subjectId",3,"selectionChange"],["formControlName","UnitRevisionID",3,"selectionChange"],["formControlName","LessonID"],["matInput","","formControlName","Name"],[1,"col-md-2","col-12"],["matInput","","type","number","formControlName","exam_hour"],["matInput","","type","number","formControlName","exam_minute"],["matInput","","type","number","formControlName","price"],["matInput","","type","number","formControlName","priceDiscount"],["formControlName","priceDiscountType"],["value","1"],["value","2"],["matInput","","formControlName","Avilable_Date_From",3,"matDatepicker"],["matSuffix","",3,"for"],["fromDate",""],["matInput","","formControlName","Avilable_Date_To",3,"matDatepicker"],["toDate",""],["matInput","","type","time","formControlName","fromHour"],["matInput","","type","time","formControlName","toHour"],["matInput","","formControlName","ResultDate",3,"matDatepicker"],["resualtDate",""],["matInput","","type","time","formControlName","ResultTime"],["formControlName","Individually_Purchased",1,"row"],[3,"value"],["formControlName","repeatableExam",1,"row"],[3,"value","change"],["formControlName","SendWhatsApp",1,"row"],["formControlName","CustomDiscountApplied",1,"row"],["align","end"],["mat-raised-button","","class","btn btn-primary bg-light-info",3,"click",4,"ngIf"],["mat-raised-button","","class","btn btn-primary",3,"click",4,"ngIf"],["class","row",4,"ngIf"],[1,"danger"],["matInput","","type","number","formControlName","repeatableExam_Count"],["class","text-danger",4,"ngIf"],["matInput","","type","number","formControlName","StudentRepeatExamCost"],[1,"text-danger"],["mat-raised-button","",1,"btn","btn-primary","bg-light-info",3,"click"],[1,"fa","fa-plus"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],[1,"col-md-4","col-12"],["matInput","","type","number","formControlName","questionsCount"],["class","rtl has-error pull-right",4,"ngIf"],["formControlName","questionsLevel"],["matInput","","type","number","formControlName","mark"],["formControlName","unitRevisionID",3,"selectionChange"],["formControlName","lessonID",3,"selectionChange"],["formControlName","TopicID"],[1,"rtl","has-error","pull-right"],[1,"table","table-striped","table-hover","table-full-width","rtl"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","paginator-box",4,"ngIf"],[1,"text-center"],["mat-mini-fab","","color","warn","matTooltip","delete questions",3,"click"],[1,"paginator-box"],["dir","ltr","previousLabel","","nextLabel","",3,"maxSize","pageChange"]],template:function(i,t){if(1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e.YNc(4,ht,3,3,"span",2),e.YNc(5,gt,3,4,"span",2),e.TgZ(6,"a",3),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.TgZ(9,"mat-card-content",4),e.TgZ(10,"div",0),e.TgZ(11,"div",1),e.TgZ(12,"form",5),e.TgZ(13,"div",0),e.TgZ(14,"div",6),e.TgZ(15,"mat-form-field",7),e.TgZ(16,"mat-label"),e._uU(17,"Preset"),e.qZA(),e.TgZ(18,"mat-select",8),e.TgZ(19,"mat-option",9),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.YNc(22,ft,2,2,"mat-option",10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",6),e.TgZ(24,"mat-form-field",7),e.TgZ(25,"mat-label"),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"mat-select",11),e.NdJ("selectionChange",function(){return t.getStageByTeacherId(t.FormCtrl.teacherUserId.value)}),e.TgZ(29,"mat-option"),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.YNc(32,vt,2,2,"mat-option",10),e.qZA(),e.YNc(33,Ct,2,1,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(34,"div",6),e.TgZ(35,"mat-form-field",7),e.TgZ(36,"mat-label"),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"mat-select",13),e.NdJ("selectionChange",function(){return t.returnYears(null==t.FormCtrl.stageId?null:t.FormCtrl.stageId.value)}),e.TgZ(40,"mat-option",9),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.YNc(43,Tt,2,2,"mat-option",10),e.qZA(),e.YNc(44,It,2,1,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(45,"div",6),e.TgZ(46,"mat-form-field",7),e.TgZ(47,"mat-label"),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"mat-select",14),e.NdJ("selectionChange",function(){return t.returnTeacherSubjects(null==t.FormCtrl.yearId?null:t.FormCtrl.yearId.value)}),e.TgZ(51,"mat-option",9),e._uU(52),e.ALo(53,"translate"),e.qZA(),e.YNc(54,bt,2,2,"mat-option",10),e.qZA(),e.YNc(55,qt,2,1,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(56,"div",6),e.TgZ(57,"mat-form-field",7),e.TgZ(58,"mat-label"),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.TgZ(61,"mat-select",15),e.NdJ("selectionChange",function(){return t.GetUnits(null==t.FormCtrl.subjectId?null:t.FormCtrl.subjectId.value),t.GetUnitsForDetails()}),e.TgZ(62,"mat-option",9),e._uU(63),e.ALo(64,"translate"),e.qZA(),e.YNc(65,yt,2,2,"mat-option",10),e.qZA(),e.YNc(66,Qt,2,1,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(67,"div",6),e.TgZ(68,"mat-form-field",7),e.TgZ(69,"mat-label"),e._uU(70),e.ALo(71,"translate"),e.qZA(),e.TgZ(72,"mat-select",16),e.NdJ("selectionChange",function(){return t.GetLessons(null==t.FormCtrl.UnitRevisionID?null:t.FormCtrl.UnitRevisionID.value)}),e.TgZ(73,"mat-option",9),e._uU(74),e.ALo(75,"translate"),e.qZA(),e.YNc(76,wt,2,2,"mat-option",10),e.qZA(),e.YNc(77,St,2,1,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(78,"div",6),e.TgZ(79,"mat-form-field",7),e.TgZ(80,"mat-label"),e._uU(81),e.ALo(82,"translate"),e.qZA(),e.TgZ(83,"mat-select",17),e.TgZ(84,"mat-option",9),e._uU(85),e.ALo(86,"translate"),e.qZA(),e.YNc(87,Ut,2,2,"mat-option",10),e.qZA(),e.YNc(88,Dt,2,1,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(89,"div",6),e.TgZ(90,"mat-form-field",7),e.TgZ(91,"mat-label"),e._uU(92),e.ALo(93,"translate"),e.qZA(),e._UZ(94,"input",18),e.YNc(95,Yt,3,2,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(96,"div",19),e.TgZ(97,"mat-form-field",7),e.TgZ(98,"mat-label"),e._uU(99),e.ALo(100,"translate"),e.qZA(),e._UZ(101,"input",20),e.YNc(102,Vt,3,2,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(103,"div",19),e.TgZ(104,"mat-form-field",7),e.TgZ(105,"mat-label"),e._uU(106),e.ALo(107,"translate"),e.qZA(),e._UZ(108,"input",21),e.YNc(109,Ot,3,2,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(110,"div",19),e.TgZ(111,"mat-form-field",7),e.TgZ(112,"mat-label"),e._uU(113),e.ALo(114,"translate"),e.qZA(),e._UZ(115,"input",22),e.YNc(116,Ht,3,2,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(117,"div",6),e.TgZ(118,"mat-form-field",7),e.TgZ(119,"mat-label"),e._uU(120),e.ALo(121,"translate"),e.qZA(),e._UZ(122,"input",23),e.qZA(),e.qZA(),e.TgZ(123,"div",6),e.TgZ(124,"mat-form-field",7),e.TgZ(125,"mat-label"),e._uU(126),e.ALo(127,"translate"),e.qZA(),e.TgZ(128,"mat-select",24),e.TgZ(129,"mat-option",9),e._uU(130),e.ALo(131,"translate"),e.qZA(),e.TgZ(132,"mat-option",25),e._uU(133,"\u0639\u0627\u0645"),e.qZA(),e.TgZ(134,"mat-option",26),e._uU(135,"\u062e\u0627\u0635"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(136,"div",6),e.TgZ(137,"mat-form-field",7),e.TgZ(138,"mat-label"),e._uU(139),e.ALo(140,"translate"),e.qZA(),e._UZ(141,"input",27),e._UZ(142,"mat-datepicker-toggle",28),e._UZ(143,"mat-datepicker",null,29),e.qZA(),e.qZA(),e.TgZ(145,"div",6),e.TgZ(146,"mat-form-field",7),e.TgZ(147,"mat-label"),e._uU(148),e.ALo(149,"translate"),e.qZA(),e._UZ(150,"input",30),e._UZ(151,"mat-datepicker-toggle",28),e._UZ(152,"mat-datepicker",null,31),e.qZA(),e.qZA(),e.TgZ(154,"div",6),e.TgZ(155,"mat-form-field",7),e.TgZ(156,"mat-label"),e._uU(157),e.ALo(158,"translate"),e.qZA(),e._UZ(159,"input",32),e.qZA(),e.qZA(),e.TgZ(160,"div",6),e.TgZ(161,"mat-form-field",7),e.TgZ(162,"mat-label"),e._uU(163),e.ALo(164,"translate"),e.qZA(),e._UZ(165,"input",33),e.qZA(),e.qZA(),e.TgZ(166,"div",6),e.TgZ(167,"mat-form-field",7),e.TgZ(168,"mat-label"),e._uU(169),e.ALo(170,"translate"),e.qZA(),e._UZ(171,"input",34),e._UZ(172,"mat-datepicker-toggle",28),e._UZ(173,"mat-datepicker",null,35),e.qZA(),e.qZA(),e.TgZ(175,"div",6),e.TgZ(176,"mat-form-field",7),e.TgZ(177,"mat-label"),e._uU(178),e.ALo(179,"translate"),e.qZA(),e._UZ(180,"input",36),e.qZA(),e.qZA(),e.TgZ(181,"div",6),e.TgZ(182,"mat-label"),e._uU(183),e.ALo(184,"translate"),e.qZA(),e.TgZ(185,"mat-radio-group",37),e.TgZ(186,"div",6),e.TgZ(187,"mat-radio-button",38),e._uU(188),e.ALo(189,"translate"),e.qZA(),e.qZA(),e.TgZ(190,"div",6),e.TgZ(191,"mat-radio-button",38),e._uU(192),e.ALo(193,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(194,"div",6),e.TgZ(195,"mat-label"),e._uU(196),e.ALo(197,"translate"),e.qZA(),e.TgZ(198,"mat-radio-group",39),e.TgZ(199,"div",6),e.TgZ(200,"mat-radio-button",40),e.NdJ("change",function(){return t.repeatableExamValidators()}),e._uU(201),e.ALo(202,"translate"),e.qZA(),e.qZA(),e.TgZ(203,"div",6),e.TgZ(204,"mat-radio-button",40),e.NdJ("change",function(){return t.repeatableExamValidators()}),e._uU(205),e.ALo(206,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(207,"div",6),e.TgZ(208,"mat-label"),e._uU(209),e.ALo(210,"translate"),e.qZA(),e.TgZ(211,"mat-radio-group",41),e.TgZ(212,"div",6),e.TgZ(213,"mat-radio-button",38),e._uU(214),e.ALo(215,"translate"),e.qZA(),e.qZA(),e.TgZ(216,"div",6),e.TgZ(217,"mat-radio-button",38),e._uU(218),e.ALo(219,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(220,"div",6),e.TgZ(221,"mat-label"),e._uU(222),e.ALo(223,"translate"),e.qZA(),e.TgZ(224,"mat-radio-group",42),e.TgZ(225,"div",6),e.TgZ(226,"mat-radio-button",38),e._uU(227),e.ALo(228,"translate"),e.qZA(),e.qZA(),e.TgZ(229,"div",6),e.TgZ(230,"mat-radio-button",38),e._uU(231),e.ALo(232,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(233,en,15,8,"ng-container",2),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(234,"mat-card-actions",43),e.YNc(235,tn,4,3,"button",44),e.YNc(236,nn,3,3,"button",45),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(237,vn,75,45,"div",46),e.YNc(238,An,42,33,"div",46)),2&i){var a=e.MAs(144),o=e.MAs(153),r=e.MAs(174);e.xp6(4),e.Q6J("ngIf",null==t.FormCtrl.Id.value),e.xp6(1),e.Q6J("ngIf",null!=t.FormCtrl.Id.value),e.xp6(1),e.Q6J("queryParams",e.VKq(157,qn,t.functionId)),e.xp6(1),e.hij(" ",e.lcZ(8,79,"General.Back")," "),e.xp6(5),e.Q6J("formGroup",t.myForm),e.xp6(8),e.hij(" ",e.lcZ(21,81,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.Presets),e.xp6(4),e.Oqu(e.lcZ(27,83,"Material.Teacher")),e.xp6(4),e.hij(" ",e.lcZ(31,85,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.Teachers),e.xp6(1),e.Q6J("ngIf",(null==t.FormCtrl.teacherUserIdCtrl?null:t.FormCtrl.teacherUserIdCtrl.invalid)&&((null==t.FormCtrl.teacherUserIdCtrl?null:t.FormCtrl.teacherUserIdCtrl.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(38,87,"Navbar.EducationalStage")),e.xp6(4),e.hij(" ",e.lcZ(42,89,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.stages),e.xp6(1),e.Q6J("ngIf",(null==t.FormCtrl.stageId?null:t.FormCtrl.stageId.invalid)&&((null==t.FormCtrl.stageId?null:t.FormCtrl.stageId.touched)||t.submitted)),e.xp6(4),e.hij(" ",e.lcZ(49,91,"labels.EducationalYear")," "),e.xp6(4),e.hij(" ",e.lcZ(53,93,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.years),e.xp6(1),e.Q6J("ngIf",(null==t.FormCtrl.yearId?null:t.FormCtrl.yearId.invalid)&&((null==t.FormCtrl.yearId?null:t.FormCtrl.yearId.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(60,95,"Material.Subjects")),e.xp6(4),e.hij(" ",e.lcZ(64,97,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.subjects),e.xp6(1),e.Q6J("ngIf",(null==t.FormCtrl.subjectId?null:t.FormCtrl.subjectId.invalid)&&((null==t.FormCtrl.subjectId?null:t.FormCtrl.subjectId.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(71,99,"labels.Unit")),e.xp6(4),e.hij(" ",e.lcZ(75,101,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.units),e.xp6(1),e.Q6J("ngIf",(null==t.FormCtrl.UnitRevisionID?null:t.FormCtrl.UnitRevisionID.invalid)&&((null==t.FormCtrl.UnitRevisionID?null:t.FormCtrl.UnitRevisionID.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(82,103,"labels.Lesson")),e.xp6(4),e.hij(" ",e.lcZ(86,105,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.lessons),e.xp6(1),e.Q6J("ngIf",(null==t.FormCtrl.LessonID?null:t.FormCtrl.LessonID.invalid)&&((null==t.FormCtrl.LessonID?null:t.FormCtrl.LessonID.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(93,107,"labels.TemplateName")),e.xp6(3),e.Q6J("ngIf",(null==t.FormCtrl.Name?null:t.FormCtrl.Name.invalid)&&((null==t.FormCtrl.Name?null:t.FormCtrl.Name.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(100,109,"labels.ExamHours")),e.xp6(3),e.Q6J("ngIf",(null==t.FormCtrl.exam_hour?null:t.FormCtrl.exam_hour.invalid)&&((null==t.FormCtrl.exam_hour?null:t.FormCtrl.exam_hour.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(107,111,"labels.ExamMinute")),e.xp6(3),e.Q6J("ngIf",(null==t.FormCtrl.exam_minute?null:t.FormCtrl.exam_minute.invalid)&&((null==t.FormCtrl.exam_minute?null:t.FormCtrl.exam_minute.touched)||t.submitted)),e.xp6(4),e.hij("",e.lcZ(114,113,"labels.ExamPrice")," "),e.xp6(3),e.Q6J("ngIf",(null==t.FormCtrl.price?null:t.FormCtrl.price.invalid)&&((null==t.FormCtrl.price?null:t.FormCtrl.price.touched)||t.submitted)),e.xp6(4),e.hij(" ",e.lcZ(121,115,"labels.Discount")," "),e.xp6(6),e.hij(" ",e.lcZ(127,117,"labels.DiscountType")," "),e.xp6(4),e.hij("",e.lcZ(131,119,"General.Choose")," "),e.xp6(9),e.hij(" ",e.lcZ(140,121,"labels.FromDate"),""),e.xp6(2),e.Q6J("matDatepicker",a),e.xp6(1),e.Q6J("for",a),e.xp6(6),e.hij(" ",e.lcZ(149,123,"labels.ToDate"),""),e.xp6(2),e.Q6J("matDatepicker",o),e.xp6(1),e.Q6J("for",o),e.xp6(6),e.Oqu(e.lcZ(158,125,"labels.FromTime")),e.xp6(6),e.Oqu(e.lcZ(164,127,"labels.ToTime")),e.xp6(6),e.hij(" ",e.lcZ(170,129,"labels.ExamResultDate"),""),e.xp6(2),e.Q6J("matDatepicker",r),e.xp6(1),e.Q6J("for",r),e.xp6(6),e.hij(" ",e.lcZ(179,131,"labels.examResultTime")," "),e.xp6(5),e.hij(" ",e.lcZ(184,133,"labels.SellExamOnly")," "),e.xp6(4),e.Q6J("value",!1),e.xp6(1),e.hij(" ",e.lcZ(189,135,"labels.No")," "),e.xp6(3),e.Q6J("value",!0),e.xp6(1),e.hij(" ",e.lcZ(193,137,"labels.Yes")," "),e.xp6(4),e.hij(" ",e.lcZ(197,139,"labels.RepeatedExam")," "),e.xp6(4),e.Q6J("value",!1),e.xp6(1),e.hij(" ",e.lcZ(202,141,"labels.No")," "),e.xp6(3),e.Q6J("value",!0),e.xp6(1),e.hij(" ",e.lcZ(206,143,"labels.Yes")," "),e.xp6(4),e.hij(" ",e.lcZ(210,145,"Navbar.SendWhatsappMsg")," "),e.xp6(4),e.Q6J("value",!1),e.xp6(1),e.hij(" ",e.lcZ(215,147,"labels.No")," "),e.xp6(3),e.Q6J("value",!0),e.xp6(1),e.hij(" ",e.lcZ(219,149,"labels.Yes")," "),e.xp6(4),e.hij(" ",e.lcZ(223,151,"labels.CustomDiscount")," "),e.xp6(4),e.Q6J("value",!1),e.xp6(1),e.hij(" ",e.lcZ(228,153,"labels.No")," "),e.xp6(3),e.Q6J("value",!0),e.xp6(1),e.hij(" ",e.lcZ(232,155,"labels.Yes")," "),e.xp6(2),e.Q6J("ngIf",1==(null==t.FormCtrl.repeatableExam?null:t.FormCtrl.repeatableExam.value)),e.xp6(2),e.Q6J("ngIf",null==t.FormCtrl.Id.value),e.xp6(1),e.Q6J("ngIf",null!=t.FormCtrl.Id.value),e.xp6(1),e.Q6J("ngIf",null!=t.FormCtrl.Id.value),e.xp6(1),e.Q6J("ngIf",null!=t.FormCtrl.Id.value)}},directives:[Z.a8,Z.n5,T.O5,w.zs,I.yS,Z.dn,u._Y,u.JL,u.sg,C.KE,C.hX,Ae.gD,u.JJ,u.u,ae.ey,T.sg,L.Nt,u.Fj,u.wV,ye.hl,ye.nW,C.R9,ye.Mq,K.VQ,K.U0,Z.hq,C.bx,w.lW,qe.gM,_e.Hw,ie.LS,Ie.Lv],pipes:[D.X$,ie._s],styles:[""]}),n}(),Fe=f(7762),ee=f(3938),Fn=f(7446);function Qn(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function wn(n,l){if(1&n&&(e.TgZ(0,"mat-hint",33),e.YNc(1,Qn,3,3,"span",29),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.question_type_id||null==i.question_type_id.errors?null:i.question_type_id.errors.required)}}function Nn(n,l){if(1&n&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.teacherUserId),e.xp6(1),e.hij(" ",i.teacher_ar_name," ")}}function Sn(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function Un(n,l){if(1&n&&(e.TgZ(0,"mat-hint",33),e.YNc(1,Sn,3,3,"span",29),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.teacherUserId||null==i.teacherUserId.errors?null:i.teacherUserId.errors.required)}}function kn(n,l){if(1&n&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Value),e.xp6(1),e.hij(" ",i.Text," ")}}function Dn(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function En(n,l){if(1&n&&(e.TgZ(0,"mat-hint",33),e.YNc(1,Dn,3,3,"span",29),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.main_subject_id||null==i.main_subject_id.errors?null:i.main_subject_id.errors.required)}}function Jn(n,l){if(1&n&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Value),e.xp6(1),e.hij(" ",i.Text," ")}}function Yn(n,l){if(1&n&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Value),e.xp6(1),e.hij(" ",i.Text," ")}}function Ln(n,l){if(1&n&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Value),e.xp6(1),e.hij(" ",i.Text," ")}}function jn(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Vn(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function Pn(n,l){if(1&n&&(e.TgZ(0,"mat-hint",33),e.YNc(1,jn,3,3,"span",29),e.YNc(2,Vn,3,3,"span",29),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.mark||null==i.mark.errors?null:i.mark.errors.required),e.xp6(1),e.Q6J("ngIf",null==i.mark||null==i.mark.errors?null:i.mark.errors.minusNum)}}function Gn(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function On(n,l){if(1&n&&(e.TgZ(0,"mat-hint",33),e.YNc(1,Gn,3,3,"span",29),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==i.question_ar_text||null==i.question_ar_text.errors?null:i.question_ar_text.errors.required)||(null==i.question_ar_text||null==i.question_ar_text.errors?null:i.question_ar_text.errors.whiteSpace))}}function Mn(n,l){1&n&&(e.TgZ(0,"mat-checkbox",34),e._uU(1," Remove Image "),e.qZA()),2&n&&e.Q6J("value",!0)}function Bn(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Hn(n,l){if(1&n&&(e.TgZ(0,"mat-hint",33),e.YNc(1,Bn,3,3,"span",29),e.qZA()),2&n){var i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==i.perfect_answer||null==i.perfect_answer.errors?null:i.perfect_answer.errors.required)||(null==i.perfect_answer||null==i.perfect_answer.errors?null:i.perfect_answer.errors.whiteSpace))}}function Rn(n,l){if(1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"mat-form-field",9),e.TgZ(2,"mat-label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"input",35),e.YNc(6,Hn,2,1,"mat-hint",12),e.qZA(),e.qZA()),2&n){var i=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,2,"labels.perfect_answer")," "),e.xp6(3),e.Q6J("ngIf",i.perfect_answer.invalid&&(i.perfect_answer.touched||i.submitted))}}function $n(n,l){1&n&&(e.TgZ(0,"mat-checkbox",34),e._uU(1," Remove Image "),e.qZA()),2&n&&e.Q6J("value",!0)}function zn(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"mat-card",40),e.TgZ(1,"mat-card-subtitle"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-card-content",41),e.TgZ(5,"div",2),e.TgZ(6,"div",0),e.TgZ(7,"mat-form-field",9),e.TgZ(8,"mat-label"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e._UZ(11,"input",42),e.qZA(),e.qZA(),e.TgZ(12,"div",0),e.TgZ(13,"div",2),e.TgZ(14,"div",22),e.TgZ(15,"mat-label"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"input",23),e.NdJ("change",function(r){var m=e.CHM(i).index;return e.oxw(2).onChange(r,m)}),e.qZA(),e.qZA(),e.TgZ(19,"div",24),e.TgZ(20,"div",25),e.YNc(21,$n,2,1,"mat-checkbox",26),e._UZ(22,"img",27),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){var t=l.$implicit,a=l.index;e.xp6(2),e.AsE(" ",e.lcZ(3,9,"labels.AnswerNumber"),"(",a+1,") "),e.xp6(2),e.Q6J("formGroupName",a),e.xp6(5),e.AsE(" ",e.lcZ(10,11,"labels.AnswerText"),"(",a+1,") "),e.xp6(7),e.AsE(" ",e.lcZ(17,13,"labels.AnswerPic")," (",a+1,") "),e.xp6(5),e.Q6J("ngIf",null!==(null==t.value?null:t.value.ChoiceAttachPath)),e.xp6(1),e.Q6J("src",null==t.value?null:t.value.ChoiceAttachPath,e.LSH)}}function Wn(n,l){if(1&n&&(e.ynx(0),e.YNc(1,zn,23,15,"mat-card",36),e.TgZ(2,"mat-card",37),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-card-content"),e.TgZ(7,"mat-radio-group",38),e.TgZ(8,"div",39),e.TgZ(9,"mat-radio-button",11),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.qZA(),e.TgZ(12,"div",39),e.TgZ(13,"mat-radio-button",11),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.TgZ(16,"div",39),e.TgZ(17,"mat-radio-button",11),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.qZA(),e.TgZ(20,"div",39),e.TgZ(21,"mat-radio-button",11),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngForOf",i.choices.controls),e.xp6(3),e.hij(" ",e.lcZ(5,10,"labels.ChooseCorrectAnswer")," "),e.xp6(5),e.Q6J("value",0),e.xp6(1),e.hij(" ",e.lcZ(11,12,"labels.AnswerOne")," "),e.xp6(3),e.Q6J("value",1),e.xp6(1),e.hij(" ",e.lcZ(15,14,"labels.AnswerTwo")," "),e.xp6(3),e.Q6J("value",2),e.xp6(1),e.hij(" ",e.lcZ(19,16,"labels.AnswerThree")," "),e.xp6(3),e.Q6J("value",3),e.xp6(1),e.hij(" ",e.lcZ(23,18,"labels.AnswerFour")," ")}}function Xn(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){return e.CHM(i),e.oxw().addUpdateQuestion()}),e._UZ(1,"i",44),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.Add")," "))}function Kn(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){return e.CHM(i),e.oxw().addUpdateQuestion()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"General.Update")," "))}var ei=function(l){return{functionId:l}},ti=function(){var n=function(){function l(i,t,a,o,r,s,m,d,c,g){var p=this;(0,U.Z)(this,l),this.router=i,this.route=t,this.fb=a,this.toastr=o,this.spinner=r,this.authService=s,this.examsService=m,this.GeneralService=d,this.datePipe=c,this.EducationalService=g,this.questionID=null,this.submitted=!1,this.QuestionAttachPath=null,this.questionsInputs=[{choice_id:0,choice_text:"",thumbnailPic:"",ChoiceAttachPath:"",remove_image:!1},{choice_id:1,choice_text:"",thumbnailPic:"",ChoiceAttachPath:"",remove_image:!1},{choice_id:2,choice_text:"",thumbnailPic:"",ChoiceAttachPath:"",remove_image:!1},{choice_id:3,choice_text:"",thumbnailPic:"",ChoiceAttachPath:"",remove_image:!1}],this.route.queryParamMap.subscribe(function(_){p.questionID=_.get("questionId"),p.functionId=Number(_.get("functionId")),p.functionId&&p.authService.getUserRowFunctions(p.functionId).subscribe(function(v){v&&(p.rowFunctions=v)}),p.questionID&&p.getQuestionByID(p.questionID)})}return(0,S.Z)(l,[{key:"choices",get:function(){return this.myForm.get("choices")}},{key:"QuestionId",get:function(){return this.myForm.get("questionBank.question.id")}},{key:"question_type_id",get:function(){return this.myForm.get("questionBank.question.question_type_id")}},{key:"teacherUserId",get:function(){return this.myForm.get("questionBank.question.teacherUserId")}},{key:"picked_choice_index",get:function(){return this.myForm.get("picked_choice_index")}},{key:"QuestionBankId",get:function(){return this.myForm.get("questionBank.Id")}},{key:"main_subject_id",get:function(){return this.myForm.get("questionBank.main_subject_id")}},{key:"question_id",get:function(){return this.myForm.get("questionBank.question_id")}},{key:"unitId",get:function(){return this.myForm.get("questionBank.unitId")}},{key:"lessonId",get:function(){return this.myForm.get("questionBank.lessonId")}},{key:"topicId",get:function(){return this.myForm.get("questionBank.topicId")}},{key:"difficulty_level",get:function(){return this.myForm.get("questionBank.difficulty_level")}},{key:"question_ar_text",get:function(){return this.myForm.get("questionBank.question.question_ar_text")}},{key:"perfect_answer",get:function(){return this.myForm.get("questionBank.question.perfect_answer")}},{key:"mark",get:function(){return this.myForm.get("questionBank.mark")}},{key:"remove_image",get:function(){return this.myForm.get("questionBank.question.remove_image")}},{key:"thumbnailPic",get:function(){return this.myForm.get("questionBank.question.thumbnailPic")}},{key:"FormCtrl",get:function(){return this.myForm.controls}},{key:"ngOnInit",value:function(){this.EduCompId=this.authService.getEduCompId(),this.branchId=this.authService.getBranchId(),this.getTeachersByEducompId(this.EduCompId),this.myForm=this.fb.group({questionBank:this.fb.group({Id:[0],main_subject_id:["",u.kI.required],unitId:[""],lessonId:[""],topicId:[""],mark:[,[u.kI.required,q.D.minusNum]],difficulty_level:["1",[u.kI.required]],question_id:[0],question:this.fb.group({id:[0,[u.kI.required]],question_type_id:["",u.kI.required],teacherUserId:[""],question_ar_text:[""],perfect_answer:[],remove_image:[!1],thumbnailPic:[null]})}),picked_choice_index:[null],choices:this.fb.array([])}),this.changeQuestionType(),this.setDefaultChoises()}},{key:"ngAfterViewInit",value:function(){var t=this;this.authService.EduCompId.subscribe(function(a){t.EduCompId=a.EduCompId,t.getTeachersByEducompId(a.EduCompId)}),this.authService.branchId.subscribe(function(a){t.branchId=a.branchId})}},{key:"setDefaultChoises",value:function(){var t=this;this.questionsInputs.map(function(a){return t.choices.push(t.fb.group({choice_id:a.choice_id,choice_text:a.choice_text,thumbnailPic:a.thumbnailPic,remove_image:a.remove_image}))})}},{key:"getQuestionByID",value:function(t){var a=this;this.spinner.show(),this.examsService.getQuestionByID(t).subscribe(function(o){var r,s,m,d,c,g,p,_,v,b,A,x,y,N,J,P,G;if(null!=o.QuestionId)if(null===(r=a.teacherUserId)||void 0===r||r.enable(),null===(s=a.main_subject_id)||void 0===s||s.enable(),a.getSubjectByTeacherId(o.TeacherUserId),a.GetUnits(o.SubjectId),a.GetLessons(o.UnitId),a.GetTopics(o.LessonId),null===(m=a.QuestionBankId)||void 0===m||m.setValue(o.QuestionBankId),null===(d=a.QuestionId)||void 0===d||d.setValue(o.QuestionId),null===(c=a.question_id)||void 0===c||c.setValue(o.QuestionId),null===(g=a.main_subject_id)||void 0===g||g.setValue(String(o.SubjectId)),null===(p=a.question_type_id)||void 0===p||p.setValue(o.QuestionTypeId),null===(_=a.teacherUserId)||void 0===_||_.setValue(o.TeacherUserId),null===(v=a.unitId)||void 0===v||v.setValue(String(o.UnitId)),null===(b=a.lessonId)||void 0===b||b.setValue(String(o.LessonId)),null===(A=a.topicId)||void 0===A||A.setValue(String(o.TopicId)),null===(x=a.difficulty_level)||void 0===x||x.setValue(o.DifficultyLevel),null===(y=a.question_ar_text)||void 0===y||y.setValue(o.QuestionTextAr),null===(N=a.perfect_answer)||void 0===N||N.setValue(o.PerfectAnswer),null===(J=a.mark)||void 0===J||J.setValue(o.Mark),null===(P=a.thumbnailPic)||void 0===P||P.setValue(o.QuestionAttachId),a.QuestionAttachPath=null!=o.QuestionAttachPath?"mozakretyapi"+o.QuestionAttachPath:null,0!=o.Choices.length){a.choices.clear(),a.questionsInputs=o.Choices,a.questionsInputs.map(function(Q){return a.choices.push(a.fb.group({choice_id:Q.ChoiceId,choice_text:Q.ChoiceText,thumbnailPic:Q.thumbnailPic,ChoiceAttachPath:null!=Q.ChoiceAttachPath?"mozakretyapi"+Q.ChoiceAttachPath:null,remove_image:Q.remove_image||!1}))});var B,V=(0,Fe.Z)(o.Choices);try{for(V.s();!(B=V.n()).done;)if(1==B.value.IsCorrect){var X=o.Choices.findIndex(function(Q){return!0===Q.IsCorrect});null===(G=a.picked_choice_index)||void 0===G||G.setValue(X)}}catch(Q){V.e(Q)}finally{V.f()}}else a.setDefaultChoises();a.spinner.hide()})}},{key:"addUpdateQuestion",value:function(){var a,o,t=this;if(this.submitted=!0,2==(null===(a=this.question_type_id)||void 0===a?void 0:a.value)||3==(null===(o=this.question_type_id)||void 0===o?void 0:o.value)){if(!this.choices.value[0].thumbnailPic&&!this.choices.value[0].choice_text)return void this.toastr.warning("Must Enter answer 1 text or picture");if(!this.choices.value[1].thumbnailPic&&!this.choices.value[1].choice_text)return void this.toastr.warning("Must Enter answer 2 text or picture");if(!this.choices.value[2].thumbnailPic&&!this.choices.value[2].choice_text)return void this.toastr.warning("Must Enter answer 3 text or picture");if(!this.choices.value[3].thumbnailPic&&!this.choices.value[3].choice_text)return void this.toastr.warning("Must Enter answer 4 text or picture");if(this.FormCtrl.picked_choice_index.value<0)return void this.toastr.warning("Must Choose Correct answer ")}console.log("myFormValue ",this.myForm.value),this.myForm.valid&&(this.spinner.show(),this.examsService.addEditQuestion(this.EduCompId,this.myForm.value).subscribe(function(r){null!=r.questionId&&(t.question_id.setValue(r.questionId),t.questionID=r.questionId,t.toastr.success("Question Added Successful")),t.spinner.hide()}))}},{key:"getTeachersByEducompId",value:function(t){var o,r,s,m,d,c,a=this;null!=t?this.GeneralService.getTeachersByEducompId(t).subscribe(function(g){var p;a.Teachers=g.lstTeachers,null===(p=a.teacherUserId)||void 0===p||p.enable()}):(null===(o=this.teacherUserId)||void 0===o||o.setValue(""),null===(r=this.teacherUserId)||void 0===r||r.disable(),null===(s=this.main_subject_id)||void 0===s||s.disable(),null===(m=this.unitId)||void 0===m||m.disable(),null===(d=this.lessonId)||void 0===d||d.disable(),null===(c=this.topicId)||void 0===c||c.disable())}},{key:"getSubjectByTeacherId",value:function(t){var a=this;null!=t&&this.GeneralService.getSubjectByTeacherId(t).subscribe(function(o){a.subjects=o.lsts})}},{key:"GetUnits",value:function(t){var o,r,s,m,a=this;""!=t?this.EducationalService.GetUnits(t).subscribe(function(d){var c;a.units=d,null===(c=a.unitId)||void 0===c||c.enable()}):(null===(o=this.unitId)||void 0===o||o.setValue(""),null===(r=this.unitId)||void 0===r||r.disable(),null===(s=this.lessonId)||void 0===s||s.disable(),null===(m=this.topicId)||void 0===m||m.disable())}},{key:"GetLessons",value:function(t){var o,r,s,a=this;""!=t?this.EducationalService.GetLessons(t).subscribe(function(m){var d;a.lessons=m,null===(d=a.lessonId)||void 0===d||d.enable()}):(null===(o=this.lessonId)||void 0===o||o.setValue(""),null===(r=this.lessonId)||void 0===r||r.disable(),null===(s=this.topicId)||void 0===s||s.disable())}},{key:"GetTopics",value:function(t){var o,r,a=this;""!=t?this.EducationalService.GetTopics(t).subscribe(function(s){var m;a.topics=s,null===(m=a.topicId)||void 0===m||m.enable()}):(null===(o=this.topicId)||void 0===o||o.setValue(""),null===(r=this.topicId)||void 0===r||r.disable())}},{key:"setMainSubjectToForm",value:function(t){var a;null===(a=this.main_subject_id)||void 0===a||a.setValue(t)}},{key:"changeQuestionType",value:function(){var a,t=this;null===(a=this.question_type_id)||void 0===a||a.valueChanges.subscribe(function(o){t.changeValidators()})}},{key:"changeValidators",value:function(){var t,a=null===(t=this.question_type_id)||void 0===t?void 0:t.value;1==a&&this.perfect_answer.setValidators([u.kI.required,q.D.whiteSpace]),(2==a||3==a)&&(this.perfect_answer.clearValidators(),this.perfect_answer.reset()),this.perfect_answer.updateValueAndValidity()}},{key:"resetManual",value:function(){this.myForm.reset(),this.submitted=!1}},{key:"onChange",value:function(t,a){var o=this,r=t.target.files[0].name,s=t.target.files[0].size,m=t.target.files[0].type,d=t.target.files[0].lastModified,c=t.target.files[0].lastModifiedDate;if(t.target.files){var g=new FileReader;g.readAsDataURL(t.target.files[0]),g.onload=function(p){var _,v=p.target.result,b={FileAsBase64:v,name:r,size:s,type:m,LastModified:d,LastModifiedDate:c};if(-1==a)null===(_=o.thumbnailPic)||void 0===_||_.setValue(b),o.QuestionAttachPath=v;else{var x,A=(0,Fe.Z)(o.choices.value);try{for(A.s();!(x=A.n()).done;){var y=x.value;if(o.choices.value.indexOf(y)===a){y.thumbnailPic=b,y.ChoiceAttachPath=v;break}}}catch(J){A.e(J)}finally{A.f()}}}}}}]),l}();return n.\u0275fac=function(i){return new(i||n)(e.Y36(I.F0),e.Y36(I.gz),e.Y36(u.qu),e.Y36($._W),e.Y36(E.t2),e.Y36(Y.e),e.Y36(ee.R),e.Y36(de.m),e.Y36(T.uU),e.Y36(be.i))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-question"]],decls:134,vars:91,consts:[[1,"col-12"],[1,"content-header"],[1,"row"],["mat-raised-button","","routerLink","../index",1,"btn","btn-warning","bg-light-warning","float-right",3,"queryParams"],[1,"container-fluid"],[3,"formGroup"],["formGroupName","questionBank"],["formGroupName","question"],[1,"col-md-3","col-12"],["appearance","legacy"],["formControlName","question_type_id",3,"selectionChange"],[3,"value"],["class","text-danger",4,"ngIf"],["formControlName","teacherUserId",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","main_subject_id",3,"selectionChange"],["formControlName","unitId",3,"selectionChange"],["formControlName","lessonId",3,"selectionChange"],["formControlName","topicId"],["formControlName","difficulty_level"],["matInput","","type","number","formControlName","mark"],["matInput","","type","text","formControlName","question_ar_text"],[1,"col-md-4","col-12"],["type","file","accept","image/*",1,"form-control","font-dro","clearInputs",3,"change"],[1,"col-md-8","col-12"],[1,"question-img"],["formControlName","remove_image","class","remove_image",3,"value",4,"ngIf"],[1,"img-fluid",3,"src"],["class","col-12",4,"ngIf"],[4,"ngIf"],["align","end"],["mat-raised-button","","class","btn btn-primary bg-light-info",3,"click",4,"ngIf"],["mat-raised-button","","class","btn btn-primary",3,"click",4,"ngIf"],[1,"text-danger"],["formControlName","remove_image",1,"remove_image",3,"value"],["matInput","","type","text","formControlName","perfect_answer"],["formArrayName","choices","class","card bg-light",4,"ngFor","ngForOf"],[1,"bg-light-info"],["formControlName","picked_choice_index",1,"row"],[1,"col-3"],["formArrayName","choices",1,"card","bg-light"],[3,"formGroupName"],["matInput","","type","text","formControlName","choice_text"],["mat-raised-button","",1,"btn","btn-primary","bg-light-info",3,"click"],[1,"fa","fa-plus"],["mat-raised-button","",1,"btn","btn-primary",3,"click"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA(),e.TgZ(4,"div",2),e.TgZ(5,"div",0),e.TgZ(6,"mat-card"),e.TgZ(7,"mat-card-title"),e._uU(8),e.ALo(9,"translate"),e.TgZ(10,"a",3),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.TgZ(13,"mat-card-content",4),e.TgZ(14,"div",2),e.TgZ(15,"div",0),e.TgZ(16,"form",5),e.ynx(17,6),e.TgZ(18,"div",2),e.ynx(19,7),e.TgZ(20,"div",8),e.TgZ(21,"mat-form-field",9),e.TgZ(22,"mat-label"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"mat-select",10),e.NdJ("selectionChange",function(){return t.changeQuestionType()}),e.TgZ(26,"mat-option"),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"mat-option",11),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"mat-option",11),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.qZA(),e.YNc(35,wn,2,1,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(36,"div",8),e.TgZ(37,"mat-form-field",9),e.TgZ(38,"mat-label"),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"mat-select",13),e.NdJ("selectionChange",function(){return t.getSubjectByTeacherId(null==t.teacherUserId?null:t.teacherUserId.value)}),e.TgZ(42,"mat-option"),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.YNc(45,Nn,2,2,"mat-option",14),e.qZA(),e.YNc(46,Un,2,1,"mat-hint",12),e.qZA(),e.qZA(),e.BQk(),e.TgZ(47,"div",8),e.TgZ(48,"mat-form-field",9),e.TgZ(49,"mat-label"),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.TgZ(52,"mat-select",15),e.NdJ("selectionChange",function(){return t.GetUnits(null==t.main_subject_id?null:t.main_subject_id.value)}),e.TgZ(53,"mat-option"),e._uU(54),e.ALo(55,"translate"),e.qZA(),e.YNc(56,kn,2,2,"mat-option",14),e.qZA(),e.YNc(57,En,2,1,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(58,"div",8),e.TgZ(59,"mat-form-field",9),e.TgZ(60,"mat-label"),e._uU(61),e.ALo(62,"translate"),e.qZA(),e.TgZ(63,"mat-select",16),e.NdJ("selectionChange",function(){return t.GetLessons(null==t.unitId?null:t.unitId.value)}),e.TgZ(64,"mat-option"),e._uU(65),e.ALo(66,"translate"),e.qZA(),e.YNc(67,Jn,2,2,"mat-option",14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(68,"div",8),e.TgZ(69,"mat-form-field",9),e.TgZ(70,"mat-label"),e._uU(71),e.ALo(72,"translate"),e.qZA(),e.TgZ(73,"mat-select",17),e.NdJ("selectionChange",function(){return t.GetTopics(null==t.lessonId?null:t.lessonId.value)}),e.TgZ(74,"mat-option"),e._uU(75),e.ALo(76,"translate"),e.qZA(),e.YNc(77,Yn,2,2,"mat-option",14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(78,"div",8),e.TgZ(79,"mat-form-field",9),e.TgZ(80,"mat-label"),e._uU(81),e.ALo(82,"translate"),e.qZA(),e.TgZ(83,"mat-select",18),e.TgZ(84,"mat-option"),e._uU(85),e.ALo(86,"translate"),e.qZA(),e.YNc(87,Ln,2,2,"mat-option",14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(88,"div",8),e.TgZ(89,"mat-form-field",9),e.TgZ(90,"mat-label"),e._uU(91),e.ALo(92,"translate"),e.qZA(),e.TgZ(93,"mat-select",19),e.TgZ(94,"mat-option"),e._uU(95),e.ALo(96,"translate"),e.qZA(),e.TgZ(97,"mat-option",11),e._uU(98,"\u0633\u0647\u0644"),e.qZA(),e.TgZ(99,"mat-option",11),e._uU(100,"\u0645\u062a\u0648\u0633\u0637"),e.qZA(),e.TgZ(101,"mat-option",11),e._uU(102,"\u0635\u0639\u0628"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(103,"div",8),e.TgZ(104,"mat-form-field",9),e.TgZ(105,"mat-label"),e._uU(106),e.ALo(107,"translate"),e.qZA(),e._UZ(108,"input",20),e.YNc(109,Pn,3,2,"mat-hint",12),e.qZA(),e.qZA(),e.ynx(110,7),e.TgZ(111,"div",0),e.TgZ(112,"mat-form-field",9),e.TgZ(113,"mat-label"),e._uU(114),e.ALo(115,"translate"),e.qZA(),e._UZ(116,"input",21),e.YNc(117,On,2,1,"mat-hint",12),e.qZA(),e.qZA(),e.ynx(118),e.TgZ(119,"div",22),e.TgZ(120,"mat-label"),e._uU(121),e.ALo(122,"translate"),e.qZA(),e.TgZ(123,"input",23),e.NdJ("change",function(o){return t.onChange(o,-1)}),e.qZA(),e.qZA(),e.TgZ(124,"div",24),e.TgZ(125,"div",25),e.YNc(126,Mn,2,1,"mat-checkbox",26),e._UZ(127,"img",27),e.qZA(),e.qZA(),e.BQk(),e.YNc(128,Rn,7,4,"div",28),e.BQk(),e.qZA(),e.BQk(),e._UZ(129,"hr"),e.YNc(130,Wn,24,20,"ng-container",29),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(131,"mat-card-actions",30),e.YNc(132,Xn,4,3,"button",31),e.YNc(133,Kn,3,3,"button",32),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,45,"Navbar.QuestionsBank")," "),e.xp6(6),e.hij(" ",e.lcZ(9,47,"labels.AddQuestion")," "),e.xp6(2),e.Q6J("queryParams",e.VKq(89,ei,t.functionId)),e.xp6(1),e.hij(" ",e.lcZ(12,49,"General.Back")," "),e.xp6(5),e.Q6J("formGroup",t.myForm),e.xp6(7),e.hij(" ",e.lcZ(24,51,"labels.QuestionType")," "),e.xp6(4),e.hij(" ",e.lcZ(28,53,"General.Choose")," "),e.xp6(2),e.Q6J("value",1),e.xp6(1),e.hij(" ",e.lcZ(31,55,"labels.Article")," "),e.xp6(2),e.Q6J("value",2),e.xp6(1),e.hij(" ",e.lcZ(34,57,"labels.Mcq")," "),e.xp6(2),e.Q6J("ngIf",(null==t.question_type_id?null:t.question_type_id.invalid)&&((null==t.question_type_id?null:t.question_type_id.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(40,59,"labels.Teacher")),e.xp6(4),e.Oqu(e.lcZ(44,61,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",t.Teachers),e.xp6(1),e.Q6J("ngIf",(null==t.teacherUserId?null:t.teacherUserId.invalid)&&((null==t.teacherUserId?null:t.teacherUserId.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(51,63,"labels.Subject")),e.xp6(4),e.Oqu(e.lcZ(55,65,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",t.subjects),e.xp6(1),e.Q6J("ngIf",(null==t.main_subject_id?null:t.main_subject_id.invalid)&&((null==t.main_subject_id?null:t.main_subject_id.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(62,67,"labels.Unit")),e.xp6(4),e.Oqu(e.lcZ(66,69,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",t.units),e.xp6(4),e.Oqu(e.lcZ(72,71,"labels.Lesson")),e.xp6(4),e.hij(" ",e.lcZ(76,73,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.lessons),e.xp6(4),e.Oqu(e.lcZ(82,75,"labels.Topic")),e.xp6(4),e.hij(" ",e.lcZ(86,77,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.topics),e.xp6(4),e.Oqu(e.lcZ(92,79,"labels.Level")),e.xp6(4),e.hij(" ",e.lcZ(96,81,"General.Choose")," "),e.xp6(2),e.Q6J("value",1),e.xp6(2),e.Q6J("value",5),e.xp6(2),e.Q6J("value",10),e.xp6(5),e.hij(" ",e.lcZ(107,83,"labels.QuestionMark")," "),e.xp6(3),e.Q6J("ngIf",t.mark.invalid&&(t.mark.touched||t.submitted)),e.xp6(5),e.hij(" ",e.lcZ(115,85,"labels.question_ar_text")," "),e.xp6(3),e.Q6J("ngIf",t.question_ar_text.invalid&&(t.question_ar_text.touched||t.submitted)),e.xp6(4),e.hij(" ",e.lcZ(122,87,"labels.QuestionImage")," "),e.xp6(5),e.Q6J("ngIf",t.QuestionAttachPath),e.xp6(1),e.Q6J("src",t.QuestionAttachPath,e.LSH),e.xp6(1),e.Q6J("ngIf",1==t.question_type_id.value),e.xp6(2),e.Q6J("ngIf",2==t.question_type_id.value||3==t.question_type_id.value),e.xp6(2),e.Q6J("ngIf",0==t.QuestionId.value),e.xp6(1),e.Q6J("ngIf",t.QuestionId.value>0))},directives:[Z.a8,Z.n5,w.zs,I.yS,Z.dn,u._Y,u.JL,u.sg,u.x0,C.KE,C.hX,Ae.gD,u.JJ,u.u,ae.ey,T.O5,T.sg,L.Nt,u.wV,u.Fj,Z.hq,C.bx,Fn.oG,K.VQ,K.U0,u.CE,Z.$j,w.lW],pipes:[D.X$],styles:[".question-img[_ngcontent-%COMP%]{overflow:hidden!important;max-width:100%!important;max-height:156px!important}.mat-card-subtitle[_ngcontent-%COMP%]{font-size:15px;color:#33a7d5}.remove_image[_ngcontent-%COMP%]{display:block}"]}),n}(),j=f(6087),F=f(4847),h=f(2075);function ni(n,l){if(1&n&&(e.TgZ(0,"mat-option",40),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.teacherUserId),e.xp6(1),e.hij(" ",i.teacher_ar_name," ")}}function ii(n,l){if(1&n&&(e.TgZ(0,"mat-option",40),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Value),e.xp6(1),e.hij(" ",i.Text," ")}}function ai(n,l){if(1&n&&(e.TgZ(0,"mat-option",40),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Value),e.xp6(1),e.hij(" ",i.Text_Ar," ")}}function oi(n,l){if(1&n&&(e.TgZ(0,"mat-option",40),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Value),e.xp6(1),e.hij(" ",i.Text," ")}}function li(n,l){if(1&n&&(e.TgZ(0,"mat-option",40),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Value),e.xp6(1),e.hij(" ",i.Text," ")}}function ri(n,l){if(1&n&&(e.TgZ(0,"mat-option",40),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Value),e.xp6(1),e.hij(" ",i.Text," ")}}function si(n,l){if(1&n&&(e.TgZ(0,"mat-option",40),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Value),e.xp6(1),e.hij(" ",i.Text," ")}}function ui(n,l){1&n&&(e.TgZ(0,"th",41),e._uU(1,"#"),e.qZA())}function mi(n,l){if(1&n&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&n){var i=l.index;e.xp6(1),e.Oqu(i+1)}}function di(n,l){1&n&&(e.TgZ(0,"th",41),e._uU(1,"ID"),e.qZA())}function ci(n,l){if(1&n&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.xp6(1),e.Oqu(i.questionID)}}function pi(n,l){1&n&&(e.TgZ(0,"th",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.question_ar_text")," "))}function _i(n,l){if(1&n&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.xp6(1),e.Oqu(i.questionName)}}function hi(n,l){1&n&&(e.TgZ(0,"th",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.QuestionType")," "))}function gi(n,l){if(1&n&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.xp6(1),e.hij(" ",i.questionTypeArabicName," ")}}function fi(n,l){1&n&&(e.TgZ(0,"th",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Subject")," "))}function vi(n,l){if(1&n&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.xp6(1),e.Oqu(i.subjectName)}}function Zi(n,l){1&n&&(e.TgZ(0,"th",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Unit")," "))}function Ci(n,l){if(1&n&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.xp6(1),e.Oqu(i.unitName)}}function Ti(n,l){1&n&&(e.TgZ(0,"th",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Lesson")," "))}function xi(n,l){if(1&n&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.xp6(1),e.Oqu(i.lessonName)}}function Ii(n,l){1&n&&(e.TgZ(0,"th",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Topic")," "))}function bi(n,l){if(1&n&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.xp6(1),e.Oqu(i.topicName)}}function Ai(n,l){1&n&&(e.TgZ(0,"th",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.QuestionMark")," "))}function qi(n,l){if(1&n&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.xp6(1),e.Oqu(i.mark)}}function yi(n,l){1&n&&(e.TgZ(0,"th",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Level")," "))}function Fi(n,l){if(1&n&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.xp6(1),e.Oqu(i.levelName)}}function Qi(n,l){1&n&&e._UZ(0,"th",41)}var wi=function(l,i){return{questionId:l,functionId:i}};function Ni(n,l){if(1&n&&(e.TgZ(0,"a",46),e._UZ(1,"i",47),e.qZA()),2&n){var i=e.oxw(2).$implicit,t=e.oxw();e.Q6J("queryParams",e.WLB(1,wi,i.questionID,t.functionId))}}function Si(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"a",48),e.NdJ("click",function(){e.CHM(i);var a=e.oxw(2).$implicit;return e.oxw().openDeleateDialog(a)}),e._UZ(1,"i",49),e.qZA()}}function Ui(n,l){if(1&n&&(e.ynx(0),e.YNc(1,Ni,2,4,"a",44),e.YNc(2,Si,2,0,"a",45),e.BQk()),2&n){var i=l.$implicit;e.xp6(1),e.Q6J("ngIf","Edit"===i.functionName),e.xp6(1),e.Q6J("ngIf","Delete"===i.functionName)}}function ki(n,l){if(1&n&&(e.TgZ(0,"td",42),e.YNc(1,Ui,3,2,"ng-container",43),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngForOf",i.rowFunctions)}}function Di(n,l){1&n&&e._UZ(0,"tr",50)}function Ei(n,l){1&n&&e._UZ(0,"tr",51)}function Ji(n,l){if(1&n&&(e.TgZ(0,"tr",52),e.TgZ(1,"td",53),e._uU(2),e.qZA(),e.qZA()),2&n){e.oxw();var i=e.MAs(103);e.xp6(2),e.hij(' No data matching the filter "',i.value,'" ')}}var Yi=function(l){return{functionId:l}},Li=function(){return[10]},ji=function(){var n=function(){function l(i,t,a,o,r,s,m,d,c){var g=this;(0,U.Z)(this,l),this.fb=i,this.toastr=t,this.authService=a,this.examServ=o,this.GeneralService=r,this.EducationalService=s,this.spinner=m,this.dialog=d,this.route=c,this.displayedColumns=["#","questionID","questionText","questionType","subjectName","unitName","lessonName","topicName","mark","levelName","actions"],c.queryParamMap.subscribe(function(p){g.functionId=Number(p.get("functionId")),g.functionId&&g.authService.getUserRowFunctions(g.functionId).subscribe(function(_){_&&(g.rowFunctions=_)})})}return(0,S.Z)(l,[{key:"ngOnInit",value:function(){this.myForm=this.fb.group({teacherUserId:[""],stageId:[""],yearId:[""],subjectId:[""],unitId:[""],lessonId:[""],topicId:[""]}),this.EduCompId=this.authService.getEduCompId(),this.branchId=this.authService.getBranchId(),this.getTeachersByEducompId(this.EduCompId),this.getQuestions(1),this.FormCtrl.stageId.disable(),this.FormCtrl.yearId.disable(),this.FormCtrl.subjectId.disable(),this.FormCtrl.unitId.disable(),this.FormCtrl.lessonId.disable(),this.FormCtrl.topicId.disable()}},{key:"FormCtrl",get:function(){return this.myForm.controls}},{key:"ngAfterViewInit",value:function(){var t=this;this.authService.EduCompId.subscribe(function(a){t.EduCompId=a.EduCompId,t.getTeachersByEducompId(a.EduCompId),t.getQuestions(1)}),this.authService.branchId.subscribe(function(a){t.branchId=a.branchId}),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}},{key:"getQuestions",value:function(t){var a=this;this.spinner.show(),this.examServ.getQuestions(t,this.EduCompId,this.myForm.value).subscribe(function(o){a.dataSource=new h.by(o.returnModel),a.itemsCount=o.itemsCount,a.spinner.hide()})}},{key:"deleteQuestion",value:function(t){var a=this;this.spinner.show(),this.examServ.deleteQuestion(this.EduCompId,t.questionID).subscribe(function(o){if(1==o.returnValue){var r=a.dataSource.data.findIndex(function(s){return s===t});a.dataSource.data.splice(r,1),a.dataSource.paginator=a.paginator,a.toastr.success("Done")}a.spinner.hide()})}},{key:"openDeleateDialog",value:function(t){var a=this;this.dialog.open(R.F,{data:{msg:"".concat(t.questionID," - ").concat(t.questionTypeEnglishName),panelClass:"dialog-radius"}}).afterClosed().subscribe(function(o){o&&a.deleteQuestion(t)})}},{key:"getTeachersByEducompId",value:function(t){var a=this;this.GeneralService.getTeachersByEducompId(t).subscribe(function(o){a.Teachers=o.lstTeachers})}},{key:"getStageByTeacherId",value:function(t){var a=this;this.FormCtrl.stageId.setValue(""),this.FormCtrl.yearId.setValue(""),this.FormCtrl.subjectId.setValue(""),this.FormCtrl.unitId.setValue(""),this.FormCtrl.lessonId.setValue(""),this.FormCtrl.topicId.setValue(""),""!=t?this.EducationalService.getStageByTeacherId(t).subscribe(function(o){a.stages=o,a.FormCtrl.stageId.enable()}):(this.FormCtrl.stageId.setValue(""),this.FormCtrl.stageId.disable(),this.FormCtrl.yearId.disable(),this.FormCtrl.subjectId.disable(),this.FormCtrl.unitId.disable(),this.FormCtrl.lessonId.disable(),this.FormCtrl.topicId.disable())}},{key:"getYearsByStageId",value:function(t){var a=this;this.FormCtrl.yearId.setValue(""),this.FormCtrl.subjectId.setValue(""),this.FormCtrl.unitId.setValue(""),this.FormCtrl.lessonId.setValue(""),this.FormCtrl.topicId.setValue(""),""!=t?this.EducationalService.returnYears(t).subscribe(function(o){a.years=o,a.FormCtrl.yearId.enable()}):(this.FormCtrl.yearId.setValue(""),this.FormCtrl.yearId.disable(),this.FormCtrl.subjectId.disable(),this.FormCtrl.unitId.disable(),this.FormCtrl.lessonId.disable(),this.FormCtrl.topicId.disable())}},{key:"getSubjectsByYearId",value:function(t){var o,a=this;if(this.FormCtrl.subjectId.setValue(""),this.FormCtrl.unitId.setValue(""),this.FormCtrl.lessonId.setValue(""),this.FormCtrl.topicId.setValue(""),""!=t){var r={yearId:t,teacherUserId:null===(o=this.FormCtrl.teacherUserId)||void 0===o?void 0:o.value};this.EducationalService.returnTeacherSubjects(r).subscribe(function(s){a.subjects=s,a.FormCtrl.subjectId.enable()})}else this.FormCtrl.subjectId.setValue(""),this.FormCtrl.subjectId.disable(),this.FormCtrl.unitId.disable(),this.FormCtrl.lessonId.disable(),this.FormCtrl.topicId.disable()}},{key:"getUnitsBySubjectId",value:function(t){var a=this;this.FormCtrl.unitId.setValue(""),this.FormCtrl.lessonId.setValue(""),this.FormCtrl.topicId.setValue(""),""!=t?this.EducationalService.GetUnits(t).subscribe(function(o){a.units=o,a.FormCtrl.unitId.enable()}):(this.FormCtrl.unitId.setValue(""),this.FormCtrl.unitId.disable(),this.FormCtrl.lessonId.disable(),this.FormCtrl.topicId.disable())}},{key:"getLessonsByUnitId",value:function(t){var a=this;this.FormCtrl.lessonId.setValue(""),this.FormCtrl.topicId.setValue(""),""!=t?this.EducationalService.GetLessons(t).subscribe(function(o){a.lessons=o,a.FormCtrl.lessonId.enable()}):(this.FormCtrl.lessonId.setValue(""),this.FormCtrl.lessonId.disable(),this.FormCtrl.topicId.disable())}},{key:"GetTopicsByLessonId",value:function(t){var a=this;this.FormCtrl.topicId.setValue(""),this.FormCtrl.lessonId.value?this.EducationalService.GetTopics(t).subscribe(function(o){a.topics=o,a.FormCtrl.topicId.enable()}):(this.FormCtrl.topicId.setValue(""),this.FormCtrl.topicId.disable())}},{key:"resetManual",value:function(){this.myForm.controls.teacherUserId.setValue(""),this.myForm.controls.yearId.setValue(""),this.myForm.controls.stageId.setValue(""),this.myForm.controls.subjectId.setValue(""),this.myForm.controls.unitId.setValue(""),this.myForm.controls.lessonId.setValue(""),this.myForm.controls.topicId.setValue("")}}]),l}();return n.\u0275fac=function(i){return new(i||n)(e.Y36(u.qu),e.Y36($._W),e.Y36(Y.e),e.Y36(ee.R),e.Y36(de.m),e.Y36(be.i),e.Y36(E.t2),e.Y36(k.uw),e.Y36(I.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-questions-index"]],viewQuery:function(i,t){var a;1&i&&(e.Gf(j.NW,5),e.Gf(F.YE,5)),2&i&&(e.iGM(a=e.CRH())&&(t.paginator=a.first),e.iGM(a=e.CRH())&&(t.sort=a.first))},decls:143,vars:75,consts:[[1,"col-12"],[1,"content-header"],[1,"row"],["mat-raised-button","","routerLink","../add-question",1,"btn","btn-info","bg-light-info","float-right",3,"queryParams"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-3","col-12"],["appearance","legacy"],["formControlName","teacherUserId",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","stageId",3,"selectionChange"],["formControlName","yearId",3,"selectionChange"],["formControlName","subjectId",3,"selectionChange"],["formControlName","unitId",3,"selectionChange"],["formControlName","lessonId",3,"selectionChange"],["formControlName","topicId"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","questionID"],["matColumnDef","questionText"],["matColumnDef","questionType"],["matColumnDef","subjectName"],["matColumnDef","unitName"],["matColumnDef","lessonName"],["matColumnDef","topicName"],["matColumnDef","mark"],["matColumnDef","levelName"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","page"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngFor","ngForOf"],["class","success p-0","matTooltip","Edit","routerLink","../add-question",3,"queryParams",4,"ngIf"],["class","danger p-0","matTooltip","Delete",3,"click",4,"ngIf"],["matTooltip","Edit","routerLink","../add-question",1,"success","p-0",3,"queryParams"],[1,"ft-edit-2","font-medium-3","mr-2"],["matTooltip","Delete",1,"danger","p-0",3,"click"],[1,"ft-trash","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA(),e.TgZ(4,"div",2),e.TgZ(5,"div",0),e.TgZ(6,"mat-card"),e.TgZ(7,"mat-card-title"),e._uU(8),e.ALo(9,"translate"),e.TgZ(10,"a",3),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.TgZ(13,"mat-card-content",4),e.TgZ(14,"div",2),e.TgZ(15,"div",0),e.TgZ(16,"form",5),e.TgZ(17,"div",2),e.TgZ(18,"div",6),e.TgZ(19,"mat-form-field",7),e.TgZ(20,"mat-label"),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"mat-select",8),e.NdJ("selectionChange",function(){return t.getStageByTeacherId(t.FormCtrl.teacherUserId.value)}),e.TgZ(24,"mat-option"),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.YNc(27,ni,2,2,"mat-option",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",6),e.TgZ(29,"mat-form-field",7),e.TgZ(30,"mat-label"),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"mat-select",10),e.NdJ("selectionChange",function(){return t.getYearsByStageId(t.FormCtrl.stageId.value)}),e.TgZ(34,"mat-option"),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.YNc(37,ii,2,2,"mat-option",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",6),e.TgZ(39,"mat-form-field",7),e.TgZ(40,"mat-label"),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.TgZ(43,"mat-select",11),e.NdJ("selectionChange",function(){return t.getSubjectsByYearId(t.FormCtrl.yearId.value)}),e.TgZ(44,"mat-option"),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.YNc(47,ai,2,2,"mat-option",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(48,"div",6),e.TgZ(49,"mat-form-field",7),e.TgZ(50,"mat-label"),e._uU(51),e.ALo(52,"translate"),e.qZA(),e.TgZ(53,"mat-select",12),e.NdJ("selectionChange",function(){return t.getUnitsBySubjectId(t.FormCtrl.subjectId.value)}),e.TgZ(54,"mat-option"),e._uU(55),e.ALo(56,"translate"),e.qZA(),e.YNc(57,oi,2,2,"mat-option",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(58,"div",6),e.TgZ(59,"mat-form-field",7),e.TgZ(60,"mat-label"),e._uU(61),e.ALo(62,"translate"),e.qZA(),e.TgZ(63,"mat-select",13),e.NdJ("selectionChange",function(){return t.getLessonsByUnitId(t.FormCtrl.unitId.value)}),e.TgZ(64,"mat-option"),e._uU(65),e.ALo(66,"translate"),e.qZA(),e.YNc(67,li,2,2,"mat-option",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(68,"div",6),e.TgZ(69,"mat-form-field",7),e.TgZ(70,"mat-label"),e._uU(71),e.ALo(72,"translate"),e.qZA(),e.TgZ(73,"mat-select",14),e.NdJ("selectionChange",function(){return t.GetTopicsByLessonId(t.FormCtrl.lessonId.value)}),e.TgZ(74,"mat-option"),e._uU(75),e.ALo(76,"translate"),e.qZA(),e.YNc(77,ri,2,2,"mat-option",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(78,"div",6),e.TgZ(79,"mat-form-field",7),e.TgZ(80,"mat-label"),e._uU(81),e.ALo(82,"translate"),e.qZA(),e.TgZ(83,"mat-select",15),e.TgZ(84,"mat-option"),e._uU(85),e.ALo(86,"translate"),e.qZA(),e.YNc(87,si,2,2,"mat-option",9),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(88,"mat-card-actions",16),e.TgZ(89,"button",17),e.NdJ("click",function(){return t.getQuestions(1)}),e._uU(90),e.ALo(91,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(92,"div",2),e.TgZ(93,"div",0),e.TgZ(94,"mat-card"),e.TgZ(95,"mat-card-title"),e._uU(96),e.ALo(97,"translate"),e.qZA(),e.TgZ(98,"mat-card-content"),e.TgZ(99,"mat-form-field",18),e.TgZ(100,"mat-label"),e._uU(101,"Filter"),e.qZA(),e.TgZ(102,"input",19,20),e.NdJ("keyup",function(o){return t.applyFilter(o)}),e.qZA(),e.qZA(),e.TgZ(104,"div",21),e.TgZ(105,"table",22),e.ynx(106,23),e.YNc(107,ui,2,0,"th",24),e.YNc(108,mi,2,1,"td",25),e.BQk(),e.ynx(109,26),e.YNc(110,di,2,0,"th",24),e.YNc(111,ci,2,1,"td",25),e.BQk(),e.ynx(112,27),e.YNc(113,pi,3,3,"th",24),e.YNc(114,_i,2,1,"td",25),e.BQk(),e.ynx(115,28),e.YNc(116,hi,3,3,"th",24),e.YNc(117,gi,2,1,"td",25),e.BQk(),e.ynx(118,29),e.YNc(119,fi,3,3,"th",24),e.YNc(120,vi,2,1,"td",25),e.BQk(),e.ynx(121,30),e.YNc(122,Zi,3,3,"th",24),e.YNc(123,Ci,2,1,"td",25),e.BQk(),e.ynx(124,31),e.YNc(125,Ti,3,3,"th",24),e.YNc(126,xi,2,1,"td",25),e.BQk(),e.ynx(127,32),e.YNc(128,Ii,3,3,"th",24),e.YNc(129,bi,2,1,"td",25),e.BQk(),e.ynx(130,33),e.YNc(131,Ai,3,3,"th",24),e.YNc(132,qi,2,1,"td",25),e.BQk(),e.ynx(133,34),e.YNc(134,yi,3,3,"th",24),e.YNc(135,Fi,2,1,"td",25),e.BQk(),e.ynx(136,35),e.YNc(137,Qi,1,0,"th",24),e.YNc(138,ki,2,1,"td",25),e.BQk(),e.YNc(139,Di,1,0,"tr",36),e.YNc(140,Ei,1,0,"tr",37),e.YNc(141,Ji,3,1,"tr",38),e.qZA(),e.TgZ(142,"mat-paginator",39),e.NdJ("page",function(o){return t.getQuestions(o.pageIndex+1)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,34,"Navbar.QuestionsBank")," "),e.xp6(6),e.hij(" ",e.lcZ(9,36,"labels.QuestionsSearch")," "),e.xp6(2),e.Q6J("queryParams",e.VKq(72,Yi,t.functionId)),e.xp6(1),e.hij(" ",e.lcZ(12,38,"labels.AddQuestion")," "),e.xp6(5),e.Q6J("formGroup",t.myForm),e.xp6(5),e.Oqu(e.lcZ(22,40,"labels.Teacher")),e.xp6(4),e.Oqu(e.lcZ(26,42,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",t.Teachers),e.xp6(4),e.Oqu(e.lcZ(32,44,"labels.Stage")),e.xp6(4),e.Oqu(e.lcZ(36,46,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",t.stages),e.xp6(4),e.Oqu(e.lcZ(42,48,"labels.Year")),e.xp6(4),e.Oqu(e.lcZ(46,50,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",t.years),e.xp6(4),e.Oqu(e.lcZ(52,52,"labels.Subject")),e.xp6(4),e.Oqu(e.lcZ(56,54,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",t.subjects),e.xp6(4),e.Oqu(e.lcZ(62,56,"labels.Unit")),e.xp6(4),e.Oqu(e.lcZ(66,58,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",t.units),e.xp6(4),e.Oqu(e.lcZ(72,60,"labels.Lesson")),e.xp6(4),e.hij(" ",e.lcZ(76,62,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.lessons),e.xp6(4),e.Oqu(e.lcZ(82,64,"labels.Topic")),e.xp6(4),e.hij(" ",e.lcZ(86,66,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.topics),e.xp6(3),e.hij(" ",e.lcZ(91,68,"General.Search")," "),e.xp6(6),e.hij(" ",e.lcZ(97,70,"labels.Questions"),""),e.xp6(9),e.Q6J("dataSource",t.dataSource),e.xp6(34),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(74,Li))("length",t.itemsCount)("pageSize",10))},directives:[Z.a8,Z.n5,w.zs,I.yS,Z.dn,u._Y,u.JL,u.sg,C.KE,C.hX,Ae.gD,u.JJ,u.u,ae.ey,T.sg,Z.hq,w.lW,L.Nt,h.BZ,F.YE,h.w1,h.fO,h.Dz,h.as,h.nj,h.Ee,j.NW,h.ge,F.nU,h.ev,T.O5,qe.gM,h.XQ,h.Gk],pipes:[D.X$],styles:[""]}),n}(),Vi=f(6160),Pi=f(6002),z=f(8198);function Gi(n,l){1&n&&(e.TgZ(0,"mat-label"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"labels.ExamName")))}function Oi(n,l){1&n&&(e.TgZ(0,"mat-label"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"labels.SurveyName")))}function Mi(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function Bi(n,l){if(1&n&&(e.TgZ(0,"mat-hint",33),e.YNc(1,Mi,3,3,"span",11),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.myForm.examNameCtrl||null==i.myForm.examNameCtrl.errors?null:i.myForm.examNameCtrl.errors.required)}}function Hi(n,l){1&n&&(e.TgZ(0,"mat-card-title"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Navbar.Exams"),""))}function Ri(n,l){1&n&&(e.TgZ(0,"mat-card-title"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Navbar.Surveys"),""))}function $i(n,l){1&n&&(e.TgZ(0,"th",34),e._uU(1,"#"),e.qZA())}function zi(n,l){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){var i=l.index;e.xp6(1),e.Oqu(i+1)}}function Wi(n,l){1&n&&(e.TgZ(0,"th",34),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Name")," "))}function Xi(n,l){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.xp6(1),e.Oqu(i.exam_ar_name)}}function Ki(n,l){1&n&&(e.TgZ(0,"th",34),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.CourseName")," "))}function ea(n,l){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){var i=l.$implicit,t=e.oxw();e.xp6(1),e.hij(" ","ar"==t.curLang?i.course_ar_name:i.course_en_name," ")}}function ta(n,l){1&n&&(e.TgZ(0,"th",34),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.ThePublish")," "))}function na(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e._UZ(3,"i",36),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Published")," "))}function ia(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.UnPublished")," "))}function aa(n,l){if(1&n&&(e.TgZ(0,"td",35),e.YNc(1,na,4,3,"span",11),e.YNc(2,ia,3,3,"span",11),e.qZA()),2&n){var i=l.$implicit;e.xp6(1),e.Q6J("ngIf",null==i?null:i.isPublish),e.xp6(1),e.Q6J("ngIf",!(null!=i&&i.isPublish))}}function oa(n,l){1&n&&e._UZ(0,"th",34)}function la(n,l){1&n&&(e.TgZ(0,"span"),e._UZ(1,"i",45),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"labels.Publish")," "))}function ra(n,l){1&n&&(e.TgZ(0,"span"),e._UZ(1,"i",46),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"labels.Unpublish")," "))}function sa(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"a",44),e.NdJ("click",function(){e.CHM(i);var o=e.oxw(2).$implicit;return e.oxw().onPublishExam(o)}),e.YNc(1,la,4,3,"span",11),e.YNc(2,ra,4,3,"span",11),e.qZA()}if(2&n){var t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",!t.isPublish),e.xp6(1),e.Q6J("ngIf",t.isPublish)}}var ua=function(l,i,t){return{examId:l,functionId:i,parentId:t}};function ma(n,l){if(1&n&&(e.TgZ(0,"a",47),e._UZ(1,"i",48),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n){var i=e.oxw(2).$implicit,t=e.oxw();e.Q6J("queryParams",e.kEZ(4,ua,i.id,t.functionId,t.parentId)),e.xp6(2),e.hij(" ",e.lcZ(3,2,"General.Edit")," ")}}function da(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"a",44),e.NdJ("click",function(){e.CHM(i);var a=e.oxw(2).$implicit;return e.oxw().openDeleateDialog(a)}),e._UZ(1,"i",49),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.Delete")," "))}var Ee=function(l){return{functionId:l}};function ca(n,l){if(1&n&&(e.TgZ(0,"a",50),e._UZ(1,"i",51),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n){var i=e.oxw(2).$implicit,t=e.oxw();e.hYB("routerLink","/dashboard/exams-setup/exam-preview/",i.id,"/",t.type,""),e.Q6J("queryParams",e.VKq(6,Ee,t.functionId)),e.xp6(2),e.hij(" ",e.lcZ(3,4,"General.ExamPreview")," ")}}function pa(n,l){if(1&n&&(e.ynx(0),e.YNc(1,sa,3,2,"a",41),e.YNc(2,ma,4,8,"a",42),e.YNc(3,da,4,3,"a",41),e.YNc(4,ca,4,8,"a",43),e.BQk()),2&n){var i=l.$implicit;e.xp6(1),e.Q6J("ngIf","publish"===i.functionName),e.xp6(1),e.Q6J("ngIf","Edit"===i.functionName),e.xp6(1),e.Q6J("ngIf","Delete"===i.functionName),e.xp6(1),e.Q6J("ngIf","Show"===i.functionName)}}function _a(n,l){if(1&n&&(e.TgZ(0,"td",35),e.TgZ(1,"div",37),e.TgZ(2,"button",38),e._uU(3," actions "),e.qZA(),e.TgZ(4,"div",39),e.YNc(5,pa,5,4,"ng-container",40),e.qZA(),e.qZA(),e.qZA()),2&n){var i=e.oxw();e.xp6(5),e.Q6J("ngForOf",i.rowFunctions)}}function ha(n,l){1&n&&e._UZ(0,"tr",52)}function ga(n,l){if(1&n&&e._UZ(0,"tr",53),2&n){var i=l.$implicit;e.ekj("bg-light-info",!(null!=i&&i.isPublish))}}function fa(n,l){if(1&n&&(e.TgZ(0,"tr",54),e.TgZ(1,"td",55),e._uU(2),e.qZA(),e.qZA()),2&n){e.oxw();var i=e.MAs(39);e.xp6(2),e.hij(' No data matching the filter "',i.value,'" ')}}var va=function(l,i){return{functionId:l,parentId:i}},Za=function(){return[10]},Ca=function(){var n=function(){function l(i,t,a,o,r,s,m,d,c,g){var p=this;(0,U.Z)(this,l),this.route=i,this.fb=t,this.authserv=a,this.examService=o,this.msg=r,this.spinner=s,this.generalService=m,this.dialog=d,this.courseser=c,this.translate=g,this.exams=[],this.countries=[],this.stages=[],this.educationYears=[],this.subjects=[],this.exms=[],this.exam=[],this.displayedColumns=["#","name","course","publish","actions"],i.paramMap.subscribe(function(_){p.type=Number(_.get("typeId"))}),i.paramMap.subscribe(function(_){p.subId=Number(_.get("courseId"))}),this.translate.onLangChange.subscribe(function(_){p.curLang=_.lang}),i.queryParamMap.subscribe(function(_){p.functionId=Number(_.get("functionId")),p.parentId=Number(_.get("parentId")),p.functionId&&p.authserv.getUserRowFunctions(p.functionId).subscribe(function(v){v&&(p.rowFunctions=v)})})}return(0,S.Z)(l,[{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.branchId=this.authserv.getBranchId(),this.myForm=this.fb.group({examName:["",u.kI.required]}),this.getAllExams(1)}},{key:"examNameCtrl",get:function(){return this.myForm.get("examName")}},{key:"ngAfterViewInit",value:function(){var t=this;this.authserv.EduCompId.subscribe(function(a){t.EduCompId=a.EduCompId,t.getAllExams(1)}),this.authserv.branchId.subscribe(function(a){t.branchId=a.branchId}),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}},{key:"getAllExams",value:function(t){var o,a=this,r={typeId:this.type,page:t,EduCompId:this.EduCompId,subjectId:this.subId,examName:null===(o=this.examNameCtrl)||void 0===o?void 0:o.value};this.spinner.show(),this.examService.getAllNormalExams(r).subscribe(function(s){s&&(a.dataSource=new h.by(s.examList),a.exams=s.examList,a.totalItems=s.totalCount),a.spinner.hide()})}},{key:"removeExam",value:function(t){var a=this;this.examService.deleteExam(t.id).subscribe(function(o){if(o){var r=a.dataSource.data.findIndex(function(s){return s==t});a.dataSource.data.splice(r,1),a.exams.splice(r,1),a.msg.success("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0625\u0645\u062a\u062d\u0627\u0646")}})}},{key:"openDeleateDialog",value:function(t){var a=this;this.dialog.open(R.F,{data:{msg:t.exam_ar_name,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(o){o&&a.removeExam(t)})}},{key:"onPublishExam",value:function(t){var a=this;this.examService.publishExam(t.id).subscribe(function(o){if(o){var r=a.exams.findIndex(function(s){return s===t});a.exams[r].isPublish=!a.exams[r].isPublish,a.msg.success("Done")}})}},{key:"track",value:function(t,a){return a.Id}}]),l}();return n.\u0275fac=function(i){return new(i||n)(e.Y36(I.gz),e.Y36(u.qu),e.Y36(Y.e),e.Y36(ee.R),e.Y36($._W),e.Y36(E.t2),e.Y36(de.m),e.Y36(k.uw),e.Y36(Pi.N),e.Y36(D.sK))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-exams-index"]],viewQuery:function(i,t){var a;1&i&&(e.Gf(j.NW,5),e.Gf(F.YE,5)),2&i&&(e.iGM(a=e.CRH())&&(t.paginator=a.first),e.iGM(a=e.CRH())&&(t.sort=a.first))},decls:61,vars:32,consts:[[1,"row"],[1,"col-12","mb-3"],[1,""],["mat-raised-button","","routerLink","/dashboard/setup/course/sub-course",1,"btn","btn-warning","bg-light-warning","float-right",3,"queryParams"],["mat-raised-button","","routerLink","../add-exam",1,"btn","btn-info","bg-light-info","float-right","mb-2",3,"queryParams"],[1,"fa","fa-plus"],[1,"container-fluid"],[1,"col-12"],[3,"formGroup"],[1,"col-md-12","col-12"],["appearance","legacy"],[4,"ngIf"],["type","text","matInput","","formControlName","examName"],["class","danger",4,"ngIf"],["align","end"],["mat-raised-button","",1,"btn","btn-info","float-right",3,"click"],[1,"fa","fa-search","mr-1"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","course"],["matColumnDef","publish"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"bg-light-info",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","page"],[1,"danger"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["aria-hidden","true",1,"fa","fa-check-circle","success","ml-1"],["ngbDropdown","",1,"d-inline-block"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-outline-primary"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],[4,"ngFor","ngForOf"],["ngbDropdownItem","",3,"click",4,"ngIf"],["ngbDropdownItem","","routerLink","../add-exam",3,"queryParams",4,"ngIf"],["ngbDropdownItem","","target","_blank",3,"routerLink","queryParams",4,"ngIf"],["ngbDropdownItem","",3,"click"],[1,"ft-upload","font-medium-3","mr-2"],[1,"ft-download","font-medium-3","mr-2"],["ngbDropdownItem","","routerLink","../add-exam",3,"queryParams"],[1,"fa","fa-edit","font-medium-3","mr-2"],[1,"fa","fa-times","font-medium-3","mr-2"],["ngbDropdownItem","","target","_blank",3,"routerLink","queryParams"],[1,"fa","fa-video-camera","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card",2),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"a",3),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"a",4),e._UZ(10,"i",5),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.TgZ(13,"mat-card-content",6),e.TgZ(14,"div",0),e.TgZ(15,"div",7),e.TgZ(16,"form",8),e.TgZ(17,"div",0),e.TgZ(18,"div",9),e.TgZ(19,"mat-form-field",10),e.YNc(20,Gi,3,3,"mat-label",11),e.YNc(21,Oi,3,3,"mat-label",11),e._UZ(22,"input",12),e.YNc(23,Bi,2,1,"mat-hint",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"mat-card-actions",14),e.TgZ(25,"a",15),e.NdJ("click",function(){return t.getAllExams(1)}),e._UZ(26,"i",16),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",0),e.TgZ(30,"div",7),e.TgZ(31,"mat-card"),e.YNc(32,Hi,3,3,"mat-card-title",11),e.YNc(33,Ri,3,3,"mat-card-title",11),e.TgZ(34,"mat-card-content"),e.TgZ(35,"mat-form-field",17),e.TgZ(36,"mat-label"),e._uU(37,"Filter"),e.qZA(),e.TgZ(38,"input",18,19),e.NdJ("keyup",function(o){return t.applyFilter(o)}),e.qZA(),e.qZA(),e.TgZ(40,"div",20),e.TgZ(41,"table",21),e.ynx(42,22),e.YNc(43,$i,2,0,"th",23),e.YNc(44,zi,2,1,"td",24),e.BQk(),e.ynx(45,25),e.YNc(46,Wi,3,3,"th",23),e.YNc(47,Xi,2,1,"td",24),e.BQk(),e.ynx(48,26),e.YNc(49,Ki,3,3,"th",23),e.YNc(50,ea,2,1,"td",24),e.BQk(),e.ynx(51,27),e.YNc(52,ta,3,3,"th",23),e.YNc(53,aa,3,2,"td",24),e.BQk(),e.ynx(54,28),e.YNc(55,oa,1,0,"th",23),e.YNc(56,_a,6,1,"td",24),e.BQk(),e.YNc(57,ha,1,0,"tr",29),e.YNc(58,ga,1,2,"tr",30),e.YNc(59,fa,3,1,"tr",31),e.qZA(),e.TgZ(60,"mat-paginator",32),e.NdJ("page",function(o){return t.getAllExams(o.pageIndex+1)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(4),e.hij(" ",e.lcZ(5,18,"General.Search")," "),e.xp6(2),e.Q6J("queryParams",e.VKq(26,Ee,t.parentId)),e.xp6(1),e.hij(" ",e.lcZ(8,20,"General.Back")," "),e.xp6(2),e.Q6J("queryParams",e.WLB(28,va,t.functionId,t.parentId)),e.xp6(2),e.hij(" ",e.lcZ(12,22,"General.Add")," "),e.xp6(5),e.Q6J("formGroup",t.myForm),e.xp6(4),e.Q6J("ngIf",3==t.type),e.xp6(1),e.Q6J("ngIf",5==t.type),e.xp6(2),e.Q6J("ngIf",(null==t.examNameCtrl?null:t.examNameCtrl.invalid)&&(null==t.examNameCtrl?null:t.examNameCtrl.touched)),e.xp6(4),e.hij(" ",e.lcZ(28,24,"General.Search")," "),e.xp6(5),e.Q6J("ngIf",3==t.type),e.xp6(1),e.Q6J("ngIf",5==t.type),e.xp6(8),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(31,Za))("length",t.totalItems)("pageSize",10))},directives:[Z.a8,Z.n5,w.zs,I.yS,Z.dn,u._Y,u.JL,u.sg,C.KE,T.O5,L.Nt,u.Fj,u.JJ,u.u,Z.hq,C.hX,h.BZ,F.YE,h.w1,h.fO,h.Dz,h.as,h.nj,h.Ee,j.NW,C.bx,h.ge,F.nU,h.ev,z.jt,z.iD,z.Vi,T.sg,z.TH,h.XQ,h.Gk],pipes:[D.X$],styles:[""]}),n}(),Je=f(5130);function Ta(n,l){if(1&n&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.teacherUserId),e.xp6(1),e.hij(" ",i.teacher_ar_name," ")}}function xa(n,l){if(1&n&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Value),e.xp6(1),e.hij(" ",i.Text," ")}}function Ia(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function ba(n,l){if(1&n&&(e.TgZ(0,"mat-hint",38),e.YNc(1,Ia,3,3,"span",39),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.myForm.stageIdCtrl||null==i.myForm.stageIdCtrl.errors?null:i.myForm.stageIdCtrl.errors.required)}}function Aa(n,l){if(1&n&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Value),e.xp6(1),e.hij(" ",i.Text_Ar," ")}}function qa(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function ya(n,l){if(1&n&&(e.TgZ(0,"mat-hint",38),e.YNc(1,qa,3,3,"span",39),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.educationYearIdCtrl||null==i.educationYearIdCtrl.errors?null:i.educationYearIdCtrl.errors.required)}}function Fa(n,l){if(1&n&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Value),e.xp6(1),e.hij(" ",i.Text," ")}}function Qa(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function wa(n,l){if(1&n&&(e.TgZ(0,"mat-hint",38),e.YNc(1,Qa,3,3,"span",39),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.subjectIdCtrl||null==i.subjectIdCtrl.errors?null:i.subjectIdCtrl.errors.required)}}function Na(n,l){if(1&n&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Value),e.xp6(1),e.hij(" ",i.Text," ")}}function Sa(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Ua(n,l){if(1&n&&(e.TgZ(0,"mat-hint",38),e.YNc(1,Sa,3,3,"span",39),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.unitIdCtrl||null==i.unitIdCtrl.errors?null:i.unitIdCtrl.errors.required)}}function ka(n,l){if(1&n&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Value),e.xp6(1),e.hij(" ",i.Text," ")}}function Da(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Ea(n,l){if(1&n&&(e.TgZ(0,"mat-hint",38),e.YNc(1,Da,3,3,"span",39),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.lessionIdCtrl||null==i.lessionIdCtrl.errors?null:i.lessionIdCtrl.errors.required)}}function Ja(n,l){if(1&n&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.Value),e.xp6(1),e.hij(" ",i.Text," ")}}function Ya(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function La(n,l){if(1&n&&(e.TgZ(0,"mat-hint",38),e.YNc(1,Ya,3,3,"span",39),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.lessionIdCtrl||null==i.lessionIdCtrl.errors?null:i.lessionIdCtrl.errors.required)}}function ja(n,l){1&n&&(e.TgZ(0,"th",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Name")," "))}function Va(n,l){if(1&n&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.xp6(1),e.Oqu(i.Name)}}function Pa(n,l){1&n&&(e.TgZ(0,"th",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Materials")," "))}function Ga(n,l){if(1&n&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.xp6(1),e.Oqu(i.Subject)}}function Oa(n,l){1&n&&(e.TgZ(0,"th",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.EducationalYear")," "))}function Ma(n,l){if(1&n&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.xp6(1),e.Oqu(i.Year)}}function Ba(n,l){1&n&&(e.TgZ(0,"th",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Teacher")," "))}function Ha(n,l){if(1&n&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.xp6(1),e.Oqu(i.Teacher)}}function Ra(n,l){1&n&&(e.TgZ(0,"th",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.ThePublish")," "))}function $a(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e._UZ(3,"i",42),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Published")," "))}function za(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.UnPublished")," "))}function Wa(n,l){if(1&n&&(e.TgZ(0,"td",41),e.YNc(1,$a,4,3,"span",39),e.YNc(2,za,3,3,"span",39),e.qZA()),2&n){var i=l.$implicit;e.xp6(1),e.Q6J("ngIf",null==i?null:i.isPublish),e.xp6(1),e.Q6J("ngIf",!(null!=i&&i.isPublish))}}function Xa(n,l){1&n&&e._UZ(0,"th",40)}function Ka(n,l){1&n&&(e.TgZ(0,"span"),e._UZ(1,"i",51),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"labels.Publish")," "))}function eo(n,l){1&n&&(e.TgZ(0,"span"),e._UZ(1,"i",52),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"labels.Unpublish")," "))}function to(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"a",50),e.NdJ("click",function(){e.CHM(i);var o=e.oxw(2).$implicit;return e.oxw().PublishDepublishTemplate(o.Id)}),e.YNc(1,Ka,4,3,"span",39),e.YNc(2,eo,4,3,"span",39),e.qZA()}if(2&n){var t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",!t.isPublish),e.xp6(1),e.Q6J("ngIf",t.isPublish)}}var no=function(l,i){return{templateId:l,functionId:i}};function io(n,l){if(1&n&&(e.TgZ(0,"a",53),e._UZ(1,"i",54),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n){var i=e.oxw(2).$implicit,t=e.oxw();e.Q6J("queryParams",e.WLB(4,no,i.Id,t.functionId)),e.xp6(2),e.hij(" ",e.lcZ(3,2,"General.Edit")," ")}}function ao(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"a",50),e.NdJ("click",function(){e.CHM(i);var a=e.oxw(2).$implicit;return e.oxw().GenerateExamFromTemplate(a.Id)}),e._UZ(1,"i",55),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.ExamPreview")," "))}var Ye=function(l){return{functionId:l}};function oo(n,l){if(1&n&&(e.TgZ(0,"a",56),e._UZ(1,"i",57),e._uU(2,"\u0627\u0644\u0646\u0642\u0627\u0637"),e.qZA()),2&n){var i=e.oxw(2).$implicit,t=e.oxw();e.MGl("routerLink","../template-points/",i.Id,""),e.Q6J("queryParams",e.VKq(2,Ye,t.functionId))}}function lo(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"a",50),e.NdJ("click",function(){e.CHM(i);var a=e.oxw(2).$implicit;return e.oxw().openDeleateDialog(a)}),e._UZ(1,"i",58),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.Delete")," "))}function ro(n,l){if(1&n&&(e.ynx(0),e.YNc(1,to,3,2,"a",47),e.YNc(2,io,4,7,"a",48),e.YNc(3,ao,4,3,"a",47),e.YNc(4,oo,3,4,"a",49),e.YNc(5,lo,4,3,"a",47),e.BQk()),2&n){var i=l.$implicit;e.xp6(1),e.Q6J("ngIf","Publish"===i.functionName),e.xp6(1),e.Q6J("ngIf","Edit"===i.functionName),e.xp6(1),e.Q6J("ngIf","previewTemplate"===i.functionName),e.xp6(1),e.Q6J("ngIf","Points"===i.functionName),e.xp6(1),e.Q6J("ngIf","Delete"===i.functionName)}}function so(n,l){if(1&n&&(e.TgZ(0,"td",41),e.TgZ(1,"div",43),e.TgZ(2,"button",44),e._uU(3," actions "),e.qZA(),e.TgZ(4,"div",45),e.YNc(5,ro,6,5,"ng-container",46),e.qZA(),e.qZA(),e.qZA()),2&n){var i=e.oxw();e.xp6(5),e.Q6J("ngForOf",i.rowFunctions)}}function uo(n,l){1&n&&e._UZ(0,"tr",59)}function mo(n,l){if(1&n&&e._UZ(0,"tr",60),2&n){var i=l.$implicit;e.ekj("bg-light-info",!(null!=i&&i.isPublish))}}function co(n,l){if(1&n&&(e.TgZ(0,"tr",61),e.TgZ(1,"td",62),e._uU(2),e.qZA(),e.qZA()),2&n){e.oxw();var i=e.MAs(106);e.xp6(2),e.hij(' No data matching the filter "',i.value,'" ')}}var po=function(){return[10]},_o=function(){var n=function(){function l(i,t,a,o,r,s,m,d,c,g,p){var _=this;(0,U.Z)(this,l),this.toastr=i,this.dialog=t,this.route=a,this.router=o,this.GeneralService=r,this.authserv=s,this.fb=m,this.EducationalService=d,this.StudentService=c,this.TemplatesService=g,this.spinner=p,this.Templates=[],this.Teachers=[],this.stages=[],this.years=[],this.educationYears=[],this.subjects=[],this.units=[],this.lessons=[],this.topics=[],this.submitted=!1,this.displayedColumns=["Name","Teacher","Subject","Year","publish","actions"],a.queryParamMap.subscribe(function(v){_.functionId=Number(v.get("functionId")),_.functionId&&_.authserv.getUserRowFunctions(_.functionId).subscribe(function(b){b&&(_.rowFunctions=b)})})}return(0,S.Z)(l,[{key:"stageIdCtrl",get:function(){return this.myForm.get("stageId")}},{key:"teacherUserIdCtrl",get:function(){return this.myForm.get("teacherUserId")}},{key:"educationYearIdCtrl",get:function(){return this.myForm.get("yearId")}},{key:"subjectIdCtrl",get:function(){return this.myForm.get("subjectId")}},{key:"unitIdCtrl",get:function(){return this.myForm.get("unitId")}},{key:"lessonIdCtrl",get:function(){return this.myForm.get("lessonId")}},{key:"topicIdCtrl",get:function(){return this.myForm.get("topicId")}},{key:"page",get:function(){return this.myForm.get("page")}},{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.myForm=this.fb.group({teacherUserId:[""],yearId:[""],stageId:[""],subjectId:[""],unitId:[""],lessonId:[""],topicId:[""],page:[""]}),this.getTeachersByEducompId(),this.getTemplates(1),this.getTeachersByEducompId(),this.stageIdCtrl.disable(),this.educationYearIdCtrl.disable(),this.subjectIdCtrl.disable(),this.unitIdCtrl.disable(),this.lessonIdCtrl.disable(),this.topicIdCtrl.disable()}},{key:"ngAfterViewInit",value:function(){var t=this;this.authserv.EduCompId.subscribe(function(a){t.EduCompId=a.EduCompId,t.getTemplates(1)}),this.authserv.branchId.subscribe(function(a){}),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}},{key:"getTemplates",value:function(t){var o,a=this;this.spinner.show(),null===(o=this.page)||void 0===o||o.setValue(t),this.TemplatesService.getTemplates(this.EduCompId,t,this.myForm.value).subscribe(function(r){a.Templates=r.result,a.dataSource=new h.by(r.result),a.itemsCount=r.TotalItemCount,a.spinner.hide(),a.spinner.hide()})}},{key:"PublishDepublishTemplate",value:function(t){var a=this;this.spinner.show(),this.TemplatesService.PublishDepublishTemplate(t).subscribe(function(o){if("Done"==o.returnString){var s,r=(0,Fe.Z)(a.Templates);try{for(r.s();!(s=r.n()).done;){var m=s.value;if(m.Id===t){m.isPublish=!m.isPublish;break}}}catch(d){r.e(d)}finally{r.f()}}else a.toastr.error(o.returnString);a.spinner.hide()})}},{key:"openDeleateDialog",value:function(t){var a=this;this.dialog.open(R.F,{data:{msg:t.Name,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(o){o&&a.deleteTemplate(t)})}},{key:"deleteTemplate",value:function(t){var a=this;this.TemplatesService.deleteTemplate(t.Id).subscribe(function(o){var r=a.Templates.findIndex(function(s){return s.Id==t.Id});a.Templates.splice(r,1),a.toastr.success(" Deleted"),a.getTemplates(1)})}},{key:"getTeachersByEducompId",value:function(){var t=this;this.GeneralService.getTeachersByEducompId(this.EduCompId).subscribe(function(a){t.Teachers=a.lstTeachers}),this.getStageByTeacherId()}},{key:"getStageByTeacherId",value:function(){var t=this;this.stageIdCtrl.setValue(""),this.educationYearIdCtrl.setValue(""),this.subjectIdCtrl.setValue(""),this.unitIdCtrl.setValue(""),this.lessonIdCtrl.setValue(""),this.topicIdCtrl.setValue(""),""!=this.teacherUserIdCtrl.value?(console.log("teacher",this.teacherUserIdCtrl.value),this.EducationalService.getStageByTeacherId(this.teacherUserIdCtrl.value).subscribe(function(a){console.log(a),t.stages=a,t.stageIdCtrl.enable()})):(this.stageIdCtrl.setValue(""),this.stageIdCtrl.disable(),this.educationYearIdCtrl.disable(),this.subjectIdCtrl.disable(),this.unitIdCtrl.disable(),this.lessonIdCtrl.disable(),this.topicIdCtrl.disable())}},{key:"returnYears",value:function(){var t=this;this.educationYearIdCtrl.setValue(""),this.subjectIdCtrl.setValue(""),this.unitIdCtrl.setValue(""),this.lessonIdCtrl.setValue(""),this.topicIdCtrl.setValue(""),""!=this.stageIdCtrl.value?this.EducationalService.returnYears(this.stageIdCtrl.value).subscribe(function(a){console.log(a),t.years=a,t.educationYearIdCtrl.enable()}):(this.educationYearIdCtrl.setValue(""),this.educationYearIdCtrl.disable(),this.subjectIdCtrl.disable(),this.unitIdCtrl.disable(),this.lessonIdCtrl.disable(),this.topicIdCtrl.disable())}},{key:"returnTeacherSubjects",value:function(){var t=this;if(this.subjectIdCtrl.setValue(""),this.unitIdCtrl.setValue(""),this.lessonIdCtrl.setValue(""),this.topicIdCtrl.setValue(""),""!=this.educationYearIdCtrl.value){var a={yearId:this.educationYearIdCtrl.value,teacherUserId:this.myForm.controls.teacherUserId.value};console.log(a),this.EducationalService.returnTeacherSubjects(a).subscribe(function(o){console.log("subjects",o),t.subjects=o,t.subjectIdCtrl.enable()})}else this.subjectIdCtrl.setValue(""),this.subjectIdCtrl.disable(),this.unitIdCtrl.disable(),this.lessonIdCtrl.disable(),this.topicIdCtrl.disable()}},{key:"GetUnits",value:function(){var t=this;this.unitIdCtrl.setValue(""),this.lessonIdCtrl.setValue(""),this.topicIdCtrl.setValue(""),""!=this.subjectIdCtrl.value?this.EducationalService.GetUnits(this.subjectIdCtrl.value).subscribe(function(a){console.log("unit",a),t.units=a,t.unitIdCtrl.enable()}):(this.unitIdCtrl.setValue(""),this.unitIdCtrl.disable(),this.lessonIdCtrl.disable(),this.topicIdCtrl.disable())}},{key:"GetLessons",value:function(){var t=this;this.lessonIdCtrl.setValue(""),this.topicIdCtrl.setValue(""),""!=this.unitIdCtrl.value?this.EducationalService.GetLessons(this.unitIdCtrl.value).subscribe(function(a){console.log("lesson",a),t.lessons=a,t.lessonIdCtrl.enable()}):(this.lessonIdCtrl.setValue(""),this.lessonIdCtrl.disable(),this.topicIdCtrl.disable())}},{key:"GetTopics",value:function(){var t=this;this.topicIdCtrl.setValue(""),""!=this.lessonIdCtrl.value?this.EducationalService.GetTopics(this.lessonIdCtrl.value).subscribe(function(a){console.log(a),t.topics=a,t.topicIdCtrl.enable()}):(this.topicIdCtrl.setValue(""),this.topicIdCtrl.disable())}},{key:"GenerateExamFromTemplate",value:function(t){var a=this;this.spinner.show(),this.StudentService.GenerateExamFromTemplate(t).subscribe(function(o){if(o.returnValue=o.examId){var r="/dashboard/exams-setup/exam-preview/".concat(o.examId,"?templateId=").concat(t);window.open(r,"_blank")}else a.toastr.error(o.returnString);a.spinner.hide()})}}]),l}();return n.\u0275fac=function(i){return new(i||n)(e.Y36($._W),e.Y36(k.uw),e.Y36(I.gz),e.Y36(I.F0),e.Y36(de.m),e.Y36(Y.e),e.Y36(u.qu),e.Y36(be.i),e.Y36(Je.V),e.Y36(De),e.Y36(E.t2))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-templates-index"]],viewQuery:function(i,t){var a;1&i&&(e.Gf(j.NW,5),e.Gf(F.YE,5)),2&i&&(e.iGM(a=e.CRH())&&(t.paginator=a.first),e.iGM(a=e.CRH())&&(t.sort=a.first))},decls:131,vars:78,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","","routerLink","../add-template",1,"btn","btn-info","bg-light-info","float-right",3,"queryParams"],[1,"fa","fa-plus"],["mat-raised-button","",1,"btn","btn-info","float-right",3,"click"],[1,"fa","fa-search","mr-1"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-4","col-12"],["appearance","legacy"],["formControlName","teacherUserId",3,"selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","stageId",3,"selectionChange"],["class","danger",4,"ngIf"],["formControlName","yearId",3,"selectionChange"],["formControlName","subjectId",3,"selectionChange"],["formControlName","unitId",3,"selectionChange"],["formControlName","lessonId",3,"selectionChange"],["formControlName","topicId"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","Name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Subject"],["matColumnDef","Year"],["matColumnDef","Teacher"],["matColumnDef","publish"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"bg-light-info",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","page"],[3,"value"],[1,"danger"],[4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["aria-hidden","true",1,"fa","fa-check-circle","success","ml-1"],["ngbDropdown","",1,"d-inline-block"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-outline-primary"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],[4,"ngFor","ngForOf"],["ngbDropdownItem","",3,"click",4,"ngIf"],["ngbDropdownItem","","routerLink","../add-template",3,"queryParams",4,"ngIf"],["ngbDropdownItem","",3,"routerLink","queryParams",4,"ngIf"],["ngbDropdownItem","",3,"click"],[1,"ft-upload","font-medium-3","mr-2"],[1,"ft-download","font-medium-3","mr-2"],["ngbDropdownItem","","routerLink","../add-template",3,"queryParams"],[1,"fa","fa-edit","mr-2"],[1,"fa","fa-video-camera","mr-2"],["ngbDropdownItem","",3,"routerLink","queryParams"],[1,"fa","fa-gift","font-medium-3","mr-2"],[1,"fa","fa-times","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"a",2),e._UZ(7,"i",3),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"a",4),e.NdJ("click",function(){return t.getTemplates(1)}),e._UZ(11,"i",5),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.qZA(),e.TgZ(14,"mat-card-content",6),e.TgZ(15,"div",0),e.TgZ(16,"div",1),e.TgZ(17,"form",7),e.TgZ(18,"div",0),e.TgZ(19,"div",8),e.TgZ(20,"mat-form-field",9),e.TgZ(21,"mat-label"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"mat-select",10),e.NdJ("selectionChange",function(){return t.getStageByTeacherId()}),e.TgZ(25,"mat-option",11),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.YNc(28,Ta,2,2,"mat-option",12),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",8),e.TgZ(30,"mat-form-field",9),e.TgZ(31,"mat-label"),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"mat-select",13),e.NdJ("selectionChange",function(){return t.returnYears()}),e.TgZ(35,"mat-option",11),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.YNc(38,xa,2,2,"mat-option",12),e.qZA(),e.YNc(39,ba,2,1,"mat-hint",14),e.qZA(),e.qZA(),e.TgZ(40,"div",8),e.TgZ(41,"mat-form-field",9),e.TgZ(42,"mat-label"),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.TgZ(45,"mat-select",15),e.NdJ("selectionChange",function(){return t.returnTeacherSubjects()}),e.TgZ(46,"mat-option",11),e._uU(47),e.ALo(48,"translate"),e.qZA(),e.YNc(49,Aa,2,2,"mat-option",12),e.qZA(),e.YNc(50,ya,2,1,"mat-hint",14),e.qZA(),e.qZA(),e.TgZ(51,"div",8),e.TgZ(52,"mat-form-field",9),e.TgZ(53,"mat-label"),e._uU(54),e.ALo(55,"translate"),e.qZA(),e.TgZ(56,"mat-select",16),e.NdJ("selectionChange",function(){return t.GetUnits()}),e.TgZ(57,"mat-option",11),e._uU(58),e.ALo(59,"translate"),e.qZA(),e.YNc(60,Fa,2,2,"mat-option",12),e.qZA(),e.YNc(61,wa,2,1,"mat-hint",14),e.qZA(),e.qZA(),e.TgZ(62,"div",8),e.TgZ(63,"mat-form-field",9),e.TgZ(64,"mat-label"),e._uU(65),e.ALo(66,"translate"),e.qZA(),e.TgZ(67,"mat-select",17),e.NdJ("selectionChange",function(){return t.GetLessons()}),e.TgZ(68,"mat-option",11),e._uU(69),e.ALo(70,"translate"),e.qZA(),e.YNc(71,Na,2,2,"mat-option",12),e.qZA(),e.YNc(72,Ua,2,1,"mat-hint",14),e.qZA(),e.qZA(),e.TgZ(73,"div",8),e.TgZ(74,"mat-form-field",9),e.TgZ(75,"mat-label"),e._uU(76),e.ALo(77,"translate"),e.qZA(),e.TgZ(78,"mat-select",18),e.NdJ("selectionChange",function(){return t.GetTopics()}),e.TgZ(79,"mat-option",11),e._uU(80),e.ALo(81,"translate"),e.qZA(),e.YNc(82,ka,2,2,"mat-option",12),e.qZA(),e.YNc(83,Ea,2,1,"mat-hint",14),e.qZA(),e.qZA(),e.TgZ(84,"div",8),e.TgZ(85,"mat-form-field",9),e.TgZ(86,"mat-label"),e._uU(87),e.ALo(88,"translate"),e.qZA(),e.TgZ(89,"mat-select",19),e.TgZ(90,"mat-option",11),e._uU(91),e.ALo(92,"translate"),e.qZA(),e.YNc(93,Ja,2,2,"mat-option",12),e.qZA(),e.YNc(94,La,2,1,"mat-hint",14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(95,"div",0),e.TgZ(96,"div",1),e.TgZ(97,"mat-card"),e.TgZ(98,"mat-card-title"),e._uU(99),e.ALo(100,"translate"),e.qZA(),e.TgZ(101,"mat-card-content"),e.TgZ(102,"mat-form-field",20),e.TgZ(103,"mat-label"),e._uU(104,"Filter"),e.qZA(),e.TgZ(105,"input",21,22),e.NdJ("keyup",function(o){return t.applyFilter(o)}),e.qZA(),e.qZA(),e.TgZ(107,"div",23),e.TgZ(108,"table",24),e.ynx(109,25),e.YNc(110,ja,3,3,"th",26),e.YNc(111,Va,2,1,"td",27),e.BQk(),e.ynx(112,28),e.YNc(113,Pa,3,3,"th",26),e.YNc(114,Ga,2,1,"td",27),e.BQk(),e.ynx(115,29),e.YNc(116,Oa,3,3,"th",26),e.YNc(117,Ma,2,1,"td",27),e.BQk(),e.ynx(118,30),e.YNc(119,Ba,3,3,"th",26),e.YNc(120,Ha,2,1,"td",27),e.BQk(),e.ynx(121,31),e.YNc(122,Ra,3,3,"th",26),e.YNc(123,Wa,3,2,"td",27),e.BQk(),e.ynx(124,32),e.YNc(125,Xa,1,0,"th",26),e.YNc(126,so,6,1,"td",27),e.BQk(),e.YNc(127,uo,1,0,"tr",33),e.YNc(128,mo,1,2,"tr",34),e.YNc(129,co,3,1,"tr",35),e.qZA(),e.TgZ(130,"mat-paginator",36),e.NdJ("page",function(o){return t.getTemplates(o.pageIndex+1)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(4),e.hij(" ",e.lcZ(5,39,"General.Search")," "),e.xp6(2),e.Q6J("queryParams",e.VKq(75,Ye,t.functionId)),e.xp6(2),e.hij(" ",e.lcZ(9,41,"General.Add")," "),e.xp6(4),e.hij(" ",e.lcZ(13,43,"General.Search")," "),e.xp6(5),e.Q6J("formGroup",t.myForm),e.xp6(5),e.hij(" ",e.lcZ(23,45,"Material.Teacher")," "),e.xp6(4),e.hij(" ",e.lcZ(27,47,"Material.Teacher"),""),e.xp6(2),e.Q6J("ngForOf",t.Teachers),e.xp6(4),e.Oqu(e.lcZ(33,49,"Navbar.EducationalStage")),e.xp6(4),e.Oqu(e.lcZ(37,51,"Navbar.EducationalStage")),e.xp6(2),e.Q6J("ngForOf",t.stages),e.xp6(1),e.Q6J("ngIf",(null==t.stageIdCtrl?null:t.stageIdCtrl.invalid)&&((null==t.stageIdCtrl?null:t.stageIdCtrl.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(44,53,"labels.EducationalYear")),e.xp6(4),e.Oqu(e.lcZ(48,55,"labels.EducationalYear")),e.xp6(2),e.Q6J("ngForOf",t.years),e.xp6(1),e.Q6J("ngIf",(null==t.educationYearIdCtrl?null:t.educationYearIdCtrl.invalid)&&((null==t.educationYearIdCtrl?null:t.educationYearIdCtrl.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(55,57,"Material.Subjects")),e.xp6(4),e.Oqu(e.lcZ(59,59,"Material.Subjects")),e.xp6(2),e.Q6J("ngForOf",t.subjects),e.xp6(1),e.Q6J("ngIf",(null==t.subjectIdCtrl?null:t.subjectIdCtrl.invalid)&&((null==t.subjectIdCtrl?null:t.subjectIdCtrl.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(66,61,"labels.Unit")),e.xp6(4),e.Oqu(e.lcZ(70,63,"labels.Unit")),e.xp6(2),e.Q6J("ngForOf",t.units),e.xp6(1),e.Q6J("ngIf",(null==t.unitIdCtrl?null:t.unitIdCtrl.invalid)&&((null==t.unitIdCtrl?null:t.unitIdCtrl.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(77,65,"labels.Lesson")),e.xp6(4),e.Oqu(e.lcZ(81,67,"labels.Lesson")),e.xp6(2),e.Q6J("ngForOf",t.lessons),e.xp6(1),e.Q6J("ngIf",(null==t.lessonIdCtrl?null:t.lessonIdCtrl.invalid)&&((null==t.lessonIdCtrl?null:t.lessonIdCtrl.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(88,69,"labels.Topic")),e.xp6(4),e.Oqu(e.lcZ(92,71,"labels.Topic")),e.xp6(2),e.Q6J("ngForOf",t.topics),e.xp6(1),e.Q6J("ngIf",(null==t.lessonIdCtrl?null:t.lessonIdCtrl.invalid)&&((null==t.lessonIdCtrl?null:t.lessonIdCtrl.touched)||t.submitted)),e.xp6(5),e.hij(" ",e.lcZ(100,73,"Navbar.Templates")," "),e.xp6(9),e.Q6J("dataSource",t.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(77,po))("length",t.itemsCount)("pageSize",10))},directives:[Z.a8,Z.n5,w.zs,I.yS,Z.dn,u._Y,u.JL,u.sg,C.KE,C.hX,Ae.gD,u.JJ,u.u,ae.ey,T.sg,T.O5,L.Nt,h.BZ,F.YE,h.w1,h.fO,h.Dz,h.as,h.nj,h.Ee,j.NW,C.bx,h.ge,F.nU,h.ev,z.jt,z.iD,z.Vi,z.TH,h.XQ,h.Gk],pipes:[D.X$],styles:[""]}),n}();function ho(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function go(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function fo(n,l){if(1&n&&(e.TgZ(0,"mat-hint",18),e.YNc(1,ho,3,3,"span",19),e.YNc(2,go,3,3,"span",19),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.teacherCommentCtrl||null==i.teacherCommentCtrl.errors?null:i.teacherCommentCtrl.errors.required),e.xp6(1),e.Q6J("ngIf",null==i.teacherCommentCtrl||null==i.teacherCommentCtrl.errors?null:i.teacherCommentCtrl.errors.whiteSpace)}}function vo(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Zo(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function Co(n,l){if(1&n&&(e.TgZ(0,"mat-hint",18),e.YNc(1,vo,3,3,"span",19),e.YNc(2,Zo,3,3,"span",19),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.markCtrl||null==i.markCtrl.errors?null:i.markCtrl.errors.required),e.xp6(1),e.Q6J("ngIf",null==i.markCtrl||null==i.markCtrl.errors?null:i.markCtrl.errors.whiteSpace)}}var To=function(){var n=function(){function l(i,t,a,o,r,s,m,d,c,g){(0,U.Z)(this,l),this.data=i,this.fb=t,this.route=a,this.authserv=o,this.router=r,this.msg=s,this.GeneralService=m,this.examService=d,this.spinner=c,this.dialog=g}return(0,S.Z)(l,[{key:"questionNameCtrl",get:function(){return this.myForm.get("questionName")}},{key:"questionAnswerCtrl",get:function(){return this.myForm.get("studentAnswer")}},{key:"markCtrl",get:function(){return this.myForm.get("mark")}},{key:"teacherCommentCtrl",get:function(){return this.myForm.get("teacherComment")}},{key:"questionIdCtrl",get:function(){return this.myForm.get("questionId")}},{key:"examStudentIdCtrl",get:function(){return this.myForm.get("examStudentId")}},{key:"teacherUserIdCtrl",get:function(){return this.myForm.get("teacherUserId")}},{key:"questionMarkCtrl",get:function(){return this.myForm.get("questionMark")}},{key:"FormCtrl",get:function(){return this.myForm.controls}},{key:"ngOnInit",value:function(){console.log("data",this.data),this.EduCompId=this.authserv.getEduCompId(),this.myForm=this.fb.group({questionName:[""],studentAnswer:[""],questionId:[],examStudentId:[],teacherComment:["",u.kI.required],teacherUserId:[],questionMark:[],mark:[,u.kI.required]}),this.questionNameCtrl.setValue(this.data.msg.questionName),this.questionNameCtrl.disable(),this.questionIdCtrl.setValue(this.data.msg.questionId),this.examStudentIdCtrl.setValue(this.data.msg.examStudentId),this.teacherUserIdCtrl.setValue(this.data.msg.teacherUserId),this.questionMarkCtrl.setValue(this.data.msg.questionMark),this.FormCtrl.studentAnswer.setValue(this.data.msg.studentAnswer)}},{key:"CorrectQuestion",value:function(){var t=this;if(this.myForm.valid){if(console.log("my form",this.myForm.value),this.markCtrl.value>this.questionMarkCtrl.value)return void this.msg.error("\u064a\u062c\u0628 \u0627\u062f\u062e\u0627\u0644 \u0642\u064a\u0645\u0629 \u0627\u0644\u0646\u062a\u064a\u062c\u0629 \u0623\u0642\u0644 \u0645\u0646 \u0627\u0644\u0642\u064a\u0629 \u0627\u0644\u0646\u0647\u0627\u0626\u064a\u0629");this.spinner.show(),this.examService.submitCorrection(this.myForm.value).subscribe(function(o){1==o.returnValue?(t.msg.success("\u062a\u0645 \u062a\u0635\u062d\u064a\u062d \u0627\u0644\u0633\u0624\u0627\u0644"),t.dialog.closeAll()):t.msg.error(o.returnString),t.spinner.hide()})}}}]),l}();return n.\u0275fac=function(i){return new(i||n)(e.Y36(k.WI),e.Y36(u.qu),e.Y36(I.gz),e.Y36(Y.e),e.Y36(I.F0),e.Y36($._W),e.Y36(de.m),e.Y36(ee.R),e.Y36(E.t2),e.Y36(k.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-correction-dialog"]],decls:49,vars:26,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","",1,"btn","btn-danger","float-right",3,"mat-dialog-close"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-12","col-12"],["appearance","legacy"],["matInput","","cols","20","formControlName","questionName","readonly",""],["matInput","","cols","20","formControlName","studentAnswer","readonly",""],[1,"question-img"],["alt","Question Image",1,"img-fluid",3,"src"],[1,"col-md-6","col-12"],["matInput","","formControlName","teacherComment"],["class","danger",4,"ngIf"],["matInput","","type","number","formControlName","mark"],["align","end"],["mat-raised-button","",1,"btn","btn-primary","bg-light-info",3,"click"],[1,"fa","fa-plus"],[1,"danger"],[4,"ngIf"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"a",2),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.qZA(),e.TgZ(10,"mat-card-content",3),e.TgZ(11,"div",0),e.TgZ(12,"div",1),e.TgZ(13,"form",4),e.TgZ(14,"div",0),e.TgZ(15,"div",5),e.TgZ(16,"mat-form-field",6),e.TgZ(17,"mat-label"),e._uU(18),e.ALo(19,"translate"),e.qZA(),e._UZ(20,"textarea",7),e.qZA(),e.qZA(),e.TgZ(21,"div",5),e.TgZ(22,"mat-form-field",6),e.TgZ(23,"mat-label"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e._UZ(26,"textarea",8),e.qZA(),e.qZA(),e.TgZ(27,"div",5),e.TgZ(28,"div",9),e._UZ(29,"img",10),e.qZA(),e.qZA(),e.TgZ(30,"div",11),e.TgZ(31,"mat-form-field",6),e.TgZ(32,"mat-label"),e._uU(33),e.ALo(34,"translate"),e.qZA(),e._UZ(35,"input",12),e.YNc(36,fo,3,2,"mat-hint",13),e.qZA(),e.qZA(),e.TgZ(37,"div",11),e.TgZ(38,"mat-form-field",6),e.TgZ(39,"mat-label"),e._uU(40),e.ALo(41,"translate"),e.qZA(),e._UZ(42,"input",14),e.YNc(43,Co,3,2,"mat-hint",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(44,"mat-card-actions",15),e.TgZ(45,"button",16),e.NdJ("click",function(){return t.CorrectQuestion()}),e._UZ(46,"i",17),e._uU(47),e.ALo(48,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(5),e.hij(" ",e.lcZ(6,12,"labels.Correct")," "),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(1),e.hij(" ",e.lcZ(9,14,"General.Close")," "),e.xp6(5),e.Q6J("formGroup",t.myForm),e.xp6(5),e.Oqu(e.lcZ(19,16,"labels.\u064eQuestionContent")),e.xp6(6),e.Oqu(e.lcZ(25,18,"labels.\u064eQuestionContent")),e.xp6(5),e.Q6J("src",t.data.imageAttatch,e.LSH),e.xp6(4),e.Oqu(e.lcZ(34,20,"labels.TeacherComment")),e.xp6(3),e.Q6J("ngIf",(null==t.teacherCommentCtrl?null:t.teacherCommentCtrl.invalid)&&((null==t.teacherCommentCtrl?null:t.teacherCommentCtrl.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(41,22,"labels.Mark")),e.xp6(3),e.Q6J("ngIf",(null==t.markCtrl?null:t.markCtrl.invalid)&&((null==t.markCtrl?null:t.markCtrl.touched)||t.submitted)),e.xp6(4),e.hij(" ",e.lcZ(48,24,"General.Add")," "))},directives:[Z.a8,Z.n5,w.zs,k.ZT,Z.dn,u._Y,u.JL,u.sg,C.KE,C.hX,L.Nt,u.Fj,u.JJ,u.u,T.O5,u.wV,Z.hq,w.lW,C.bx],pipes:[D.X$],styles:[".question-img[_ngcontent-%COMP%]{overflow:hidden!important;max-width:100%!important;max-height:156px!important}"]}),n}();function xo(n,l){1&n&&(e.TgZ(0,"th",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.ExamNm")," "))}function Io(n,l){if(1&n&&(e.TgZ(0,"td",26),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.xp6(1),e.Oqu(i.examName)}}function bo(n,l){1&n&&(e.TgZ(0,"th",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.\u064eQuestionContent")," "))}function Ao(n,l){if(1&n&&(e.TgZ(0,"td",26),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.xp6(1),e.Oqu(i.questionName)}}function qo(n,l){1&n&&(e.TgZ(0,"th",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Teacher")," "))}function yo(n,l){if(1&n&&(e.TgZ(0,"td",26),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.xp6(1),e.Oqu(i.teacherName)}}function Fo(n,l){1&n&&(e.TgZ(0,"th",25),e._uU(1,"actions"),e.qZA())}function Qo(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"td",26),e.TgZ(1,"button",27),e.NdJ("click",function(){var o=e.CHM(i).$implicit;return e.oxw().openCorrectDialog(o)}),e.TgZ(2,"mat-icon"),e._uU(3,"done"),e.qZA(),e.qZA(),e.qZA()}}function wo(n,l){1&n&&e._UZ(0,"tr",28)}function No(n,l){1&n&&e._UZ(0,"tr",29)}function So(n,l){if(1&n&&(e.TgZ(0,"tr",30),e.TgZ(1,"td",31),e._uU(2),e.qZA(),e.qZA()),2&n){e.oxw();var i=e.MAs(36);e.xp6(2),e.hij(' No data matching the filter "',i.value,'" ')}}var Uo=function(){return[10]},ko=function(){var n=function(){function l(i,t,a,o,r,s){var m=this;(0,U.Z)(this,l),this.examService=i,this.route=t,this.authserv=a,this.fb=o,this.spinner=r,this.dialog=s,this.correction=[],this.displayedColumns=["examName","questionName","teacherName","actions"],t.queryParamMap.subscribe(function(d){m.functionId=Number(d.get("functionId")),m.functionId&&m.authserv.getUserRowFunctions(m.functionId).subscribe(function(c){c&&(m.rowFunctions=c)})})}return(0,S.Z)(l,[{key:"page",get:function(){return this.myForm.get("page")}},{key:"CorrectedQuestionsIdCtrl",get:function(){return this.myForm.get("CorrectedQuestions")}},{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.myForm=this.fb.group({page:[""],EduCompId:[this.EduCompId],CorrectedQuestions:[1]}),this.getAllQuestions(1,1)}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}},{key:"getAllQuestions",value:function(t,a){var r,o=this;null===(r=this.myForm.controls.page)||void 0===r||r.setValue(t),this.spinner.show(),this.examService.getQuestionByCorrectionType(t,a).subscribe(function(s){s&&(console.log("quesions not corrected: ",s.examsList),o.correction=s.examsList.examQuestions,console.log("correct list",o.correction),o.dataSource=new h.by(s.examsList),o.itemsCount=s.itemsCount,o.spinner.hide())})}},{key:"openCorrectDialog",value:function(t){this.dialog.open(To,{data:{msg:t}}).afterClosed().subscribe(function(a){a&&console.log("dialog")})}}]),l}();return n.\u0275fac=function(i){return new(i||n)(e.Y36(ee.R),e.Y36(I.gz),e.Y36(Y.e),e.Y36(u.qu),e.Y36(E.t2),e.Y36(k.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-correction-index"]],viewQuery:function(i,t){var a;1&i&&(e.Gf(j.NW,5),e.Gf(F.YE,5)),2&i&&(e.iGM(a=e.CRH())&&(t.paginator=a.first),e.iGM(a=e.CRH())&&(t.sort=a.first))},decls:55,vars:25,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","",1,"btn","btn-info","float-right"],[1,"fa","fa-search","mr-1"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-12","col-12"],["formControlName","CorrectedQuestions",1,"row"],[1,"col-md-4","col-12"],[3,"value","change"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","examName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","questionName"],["matColumnDef","teacherName"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-mini-fab","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"a",2),e._UZ(7,"i",3),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.qZA(),e.TgZ(10,"mat-card-content",4),e.TgZ(11,"div",0),e.TgZ(12,"div",1),e.TgZ(13,"form",5),e.TgZ(14,"div",0),e.TgZ(15,"div",6),e.TgZ(16,"mat-radio-group",7),e.TgZ(17,"div",8),e.TgZ(18,"mat-radio-button",9),e.NdJ("change",function(){return t.getAllQuestions(1,0)}),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.TgZ(21,"div",8),e.TgZ(22,"mat-radio-button",9),e.NdJ("change",function(){return t.getAllQuestions(1,1)}),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",0),e.TgZ(26,"div",1),e.TgZ(27,"mat-card"),e.TgZ(28,"mat-card-title"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"mat-card-content"),e.TgZ(32,"mat-form-field",10),e.TgZ(33,"mat-label"),e._uU(34,"Filter"),e.qZA(),e.TgZ(35,"input",11,12),e.NdJ("keyup",function(o){return t.applyFilter(o)}),e.qZA(),e.qZA(),e.TgZ(37,"div",13),e.TgZ(38,"table",14),e.ynx(39,15),e.YNc(40,xo,3,3,"th",16),e.YNc(41,Io,2,1,"td",17),e.BQk(),e.ynx(42,18),e.YNc(43,bo,3,3,"th",16),e.YNc(44,Ao,2,1,"td",17),e.BQk(),e.ynx(45,19),e.YNc(46,qo,3,3,"th",16),e.YNc(47,yo,2,1,"td",17),e.BQk(),e.ynx(48,20),e.YNc(49,Fo,2,0,"th",16),e.YNc(50,Qo,4,0,"td",17),e.BQk(),e.YNc(51,wo,1,0,"tr",21),e.YNc(52,No,1,0,"tr",22),e.YNc(53,So,3,1,"tr",23),e.qZA(),e.TgZ(54,"mat-paginator",24),e.NdJ("page",function(o){return t.getAllQuestions(o.pageIndex+1,t.CorrectedQuestionsIdCtrl.value)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(4),e.hij(" ",e.lcZ(5,14,"labels.ExamsCorrection")," "),e.xp6(4),e.hij(" ",e.lcZ(9,16,"General.Search")," "),e.xp6(5),e.Q6J("formGroup",t.myForm),e.xp6(5),e.Q6J("value",0),e.xp6(1),e.hij(" ",e.lcZ(20,18,"labels.CorrectedQuestions")," "),e.xp6(3),e.Q6J("value",1),e.xp6(1),e.hij(" ",e.lcZ(24,20,"labels.UnCorrectedQuestions")," "),e.xp6(6),e.hij(" ",e.lcZ(30,22,"labels.ExamsCorrection")," "),e.xp6(9),e.Q6J("dataSource",t.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(24,Uo))("length",0)("pageSize",10))},directives:[Z.a8,Z.n5,w.zs,Z.dn,u._Y,u.JL,u.sg,K.VQ,u.JJ,u.u,K.U0,C.KE,C.hX,L.Nt,h.BZ,F.YE,h.w1,h.fO,h.Dz,h.as,h.nj,h.Ee,j.NW,h.ge,F.nU,h.ev,w.lW,_e.Hw,h.XQ,h.Gk],pipes:[D.X$],styles:[""]}),n}(),Do=f(3483),Eo=f(8723),Le=f(3251),Jo=f(1033);function Yo(n,l){if(1&n&&(e.TgZ(0,"mat-card",11),e.TgZ(1,"mat-card-content"),e.TgZ(2,"div",12),e.TgZ(3,"div",13),e.TgZ(4,"h4",14),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"h5"),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){var i=e.oxw(3);e.xp6(5),e.hij(" ",e.lcZ(6,2,"labels.TotalMark")," "),e.xp6(3),e.Oqu(i.examTotalMark)}}function Lo(n,l){if(1&n&&(e.ynx(0),e.TgZ(1,"div",4),e.YNc(2,Yo,9,4,"mat-card",10),e.qZA(),e.BQk()),2&n){var i=e.oxw(2);e.xp6(2),e.Q6J("ngIf",3==i.type)}}function jo(n,l){if(1&n&&(e._UZ(0,"img",21),e.ALo(1,"sliceExamPic")),2&n){var i=e.oxw().$implicit;e.MGl("src","https://schoolsystem.cloudiax.com",e.lcZ(1,1,null==i.QuestionDetails?null:i.QuestionDetails.questionAttach),"",e.LSH)}}function Vo(n,l){if(1&n&&(e._UZ(0,"img",21),e.ALo(1,"sliceExamPic")),2&n){var i=e.oxw().$implicit;e.MGl("src","https://schoolsystem.cloudiax.com",e.lcZ(1,1,i.MCQAttach),"",e.LSH)}}function Po(n,l){if(1&n&&(e.TgZ(0,"div",4),e.TgZ(1,"mat-radio-button",22),e.TgZ(2,"span"),e._uU(3),e.YNc(4,Vo,2,3,"img",17),e.qZA(),e.qZA(),e.qZA()),2&n){var i=l.$implicit;e.xp6(1),e.Q6J("value",i.Id)("disabled",!0),e.xp6(2),e.hij(" ",i.MCQText," "),e.xp6(1),e.Q6J("ngIf",i.MCQAttach)}}function Go(n,l){if(1&n&&(e.TgZ(0,"form"),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.YNc(3,jo,2,3,"img",17),e.TgZ(4,"div",3),e.TgZ(5,"mat-radio-group",18,19),e.YNc(7,Po,5,4,"div",20),e.qZA(),e.qZA(),e._UZ(8,"mat-card-actions"),e._UZ(9,"hr"),e.qZA()),2&n){var i=l.$implicit,t=l.index;e.xp6(2),e.AsE(" ",t+1,") ",null==i.QuestionDetails?null:i.QuestionDetails.questionText," "),e.xp6(1),e.Q6J("ngIf",null==i.QuestionDetails?null:i.QuestionDetails.questionAttach),e.xp6(2),e.MGl("id","question-",null==i.QuestionDetails?null:i.QuestionDetails.questionId,""),e.xp6(2),e.Q6J("ngForOf",i.MCQ)}}function Oo(n,l){if(1&n&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-title"),e._uU(2),e.qZA(),e.TgZ(3,"mat-card-content"),e.YNc(4,Go,10,5,"form",16),e.qZA(),e.qZA()),2&n){var i=l.$implicit;e.xp6(2),e.hij(" ",i.HeadName,""),e.xp6(2),e.Q6J("ngForOf",null==i?null:i.Questions)}}function Mo(n,l){if(1&n&&(e.TgZ(0,"mat-tab",15),e.YNc(1,Oo,5,2,"mat-card",16),e.qZA()),2&n){var i=l.$implicit;e.Gre("group-",i.GroupId,""),e.s9C("label",i.GroupName),e.xp6(1),e.Q6J("ngForOf",i.Heads)}}function Bo(n,l){if(1&n&&(e.ynx(0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"span",6),e._uU(7),e.qZA(),e.TgZ(8,"span",6),e._uU(9),e.qZA(),e.TgZ(10,"span",6),e._uU(11),e.qZA(),e.qZA(),e.qZA(),e.YNc(12,Lo,3,1,"ng-container",0),e.qZA(),e.qZA(),e.TgZ(13,"div",7),e.TgZ(14,"mat-card"),e._UZ(15,"mat-card-title"),e.TgZ(16,"mat-card-content"),e.TgZ(17,"mat-tab-group"),e.YNc(18,Mo,2,5,"mat-tab",8),e.qZA(),e.qZA(),e._UZ(19,"mat-card-actions",9),e.qZA(),e.qZA(),e.qZA(),e.BQk()),2&n){var i=e.oxw();e.xp6(7),e.hij(" ",i.ExamName," "),e.xp6(2),e.hij(" ",i.TeacherName," "),e.xp6(2),e.hij(" ",i.SubjectName," "),e.xp6(1),e.Q6J("ngIf",!i.isSolved),e.xp6(6),e.Q6J("ngForOf",i.ExamGroups)}}var Ho=function(){var n=function(){function l(i,t,a,o,r,s){var m=this;(0,U.Z)(this,l),this.studentServ=i,this.toastr=t,this.route=a,this.router=o,this.spinner=r,this.dialog=s,this.ExamDetails=[],this.ExamGroups=null,this.solvedQuestionNumberArr=[],this.AnswerdQuestionsNumber=[],this.IsAvaliable=!0,this.exam_period_minute=0,this.isSolved=!1,this.PickedChoiceId=[],this.route.paramMap.subscribe(function(d){m.examId=d.get("examId"),m.type=Number(d.get("type")),console.log("this.examId",m.examId)})}return(0,S.Z)(l,[{key:"ngOnInit",value:function(){this.returnStudentExam(this.examId)}},{key:"returnStudentExam",value:function(t){var a=this;this.spinner.show(),this.studentServ.returnStudentExam(t).subscribe(function(o){if(console.log("exam: ",o),-5===o.returnValue)return a.spinner.hide(),void a.returnExamResults(o.examId);if(505===o.returnValue)return a.toastr.warning("\u064a\u062c\u0628 \u0634\u0631\u0627\u0621 \u0627\u0644\u0645\u062d\u0627\u0636\u0631\u0629 \u0627\u0648\u0644\u0627"),a.router.navigateByUrl("/home"),void a.spinner.hide();if(200===o.returnValue){a.isSolved=!1,a.ExamGroups=o.exam.groups,a.ExamName=o.exam.details.exam_ar_name,a.IsAvaliable=o.mv.IsAvailable,a.TeacherName=o.teacherName,a.SubjectName=o.mv.subject.subject_ar_name,a.studentUserId=o.mv.exam_student.studentUserId,a.examTotalMark=o.mv.examTotalMark,a.exam_period_minute=o.exam.details.exam_period_minute,a.solvedExamStudent_ID=o.mv.solvedExamStudent_ID,a.student_grade=o.mv.exam_student.student_grade;for(var r=o.exam.groups.length,s=0,m=0;m<r;m++){var d=o.exam.groups[m].Heads.length;if(0!=d)for(var c=0;c<d;c++)s+=o.exam.groups[m].Heads[c].Questions.length;a.questionNumber=s}0!=o.exam.details.exam_period_minute&&null!=o.exam.details.exam_period_minute&&a.timer(o.exam.details.exam_period_minute);var p=new Date,_=p.getHours(),v=p.getMinutes(),b=p.getSeconds();a.ExamStarTime=_+":"+v+":"+b;var x,A=o.exam.groups[0].Heads[0].Questions.length;for(x=0;x<=A;x++)o.exam.groups[0].Heads[0].Questions[x]&&o.exam.groups[0].Heads[0].Questions[x].QuestionDetails&&o.exam.groups[0].Heads[0].Questions[x].QuestionDetails.StudentChoice&&"T"==o.exam.groups[0].Heads[0].Questions[x].QuestionDetails.StudentChoice.RESULT&&a.solvedQuestionNumberArr.push({id:x}),a.spinner.hide();a.spinner.hide()}})}},{key:"returnExamResults",value:function(t){var a=this;this.spinner.show(),this.studentServ.returnStudentExamResults(t).subscribe(function(o){var r;a.isSolved=!0,a.ExamGroups=o.item.groups,a.ExamName=o.item.details.exam_ar_name,a.TeacherName=o.teacherName,a.SubjectName=o.SubjectName,a.examTotalMark=o.ex.total_mark,a.student_grade=null===(r=o.ex.exam_student)||void 0===r?void 0:r.student_grade,a.studentMark=o.ex.exam_result,a.examDuration=o.ex.examDuration,a.examResultDate=o.ex.examResultDate,a.examResultTime=o.ex.examResultTime,a.IsResultAvalable=o.ex.IsResultAvalable,a.isSolviedResultsOff=!o.ex.IsResultAvalable,a.showResult=o.ex.showResult,a.PointsGained=o.ex.PointsGained,a.repeatable=o.ex.repeatable,a.repeatableExam_Count=o.ex.repeatableExam_Count,a.solvidResults=[],a.spinner.hide()})}},{key:"onRadioChange",value:function(t,a){var o={questionId:a,choiceId:t.value},r=this.PickedChoiceId.findIndex(function(s){return s.questionId===a});console.log(r),r>=0?this.PickedChoiceId[r]=o:this.PickedChoiceId.push(o)}},{key:"SingleQuestionForm",value:function(t){var a=this,o=this.PickedChoiceId.find(function(s){return s.questionId===t});null!=(null==o?void 0:o.choiceId)&&null!=(null==o?void 0:o.choiceId)?this.studentServ.SubmitSingleQuestion({examId:this.examId,studentUserId:this.studentUserId,PickedChoiceId:o.choiceId,questionId:t}).subscribe(function(s){if(200==s.returnValue){document.getElementById("alert-".concat(t)).style.display="none";var m=document.querySelector("#btn-"+t);m.classList.remove("btn-primary"),m.classList.add("btn-success"),m.innerHTML="\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0625\u062c\u0627\u0628\u0629";var d=document.getElementById("stu-cho-".concat(t));d.style.display="block",d.innerHTML='\u062a\u0645 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0625\u062c\u0627\u0628\u0629 : ("'.concat(s.returnedChoice,'")'),a.AnswerdQuestionsNumber.find(function(g){return g.questionId===t})||a.AnswerdQuestionsNumber.push({questionId:t})}505==s.returnValue&&(document.querySelector("#alert-"+t).innerHTML="\u0645\u0646 \u0641\u0636\u0644\u0643 \u062a\u0623\u0643\u062f \u0645\u0646 \u0625\u062e\u062a\u064a\u0627\u0631 \u0625\u062c\u0627\u0628\u0647",a.toastr.error("\u0645\u0646 \u0641\u0636\u0644\u0643 \u062a\u0623\u0643\u062f \u0645\u0646 \u0625\u062e\u062a\u064a\u0627\u0631 \u0625\u062c\u0627\u0628\u0647","\u062e\u0637\u0623"))}):this.toastr.warning("\u0645\u0646 \u0641\u0636\u0644\u0643 \u0627\u062e\u062a\u0631 \u0625\u062c\u0627\u0628\u0629")}},{key:"SubmitExam",value:function(){var t=this;this.questionNumber-this.solvedQuestionNumberArr.length>this.AnswerdQuestionsNumber.length?this.toastr.error(' \u0644\u0645 \u064a\u062a\u0645 \u0625\u062c\u0627\u0628\u0629 \u062c\u0645\u064a\u0639 \u0627\u0644\u0627\u0633\u0626\u0644\u0647\u060c \u0639\u062f\u062f \u0627\u0644\u0627\u0633\u0626\u0644\u0647 \u0627\u0644\u062a\u064a \u0644\u0645 \u064a\u062a\u0645 \u0625\u062c\u0627\u0628\u062a\u0647\u0627 "'+(this.questionNumber-this.solvedQuestionNumberArr.length-this.AnswerdQuestionsNumber.length)+'" \u0633\u0624\u0627\u0644'):(this.spinner.show(),this.studentServ.SubmitExam({examId:this.examId,studentUserId:this.studentUserId,solvedExamStudent_ID:this.solvedExamStudent_ID,ExamStarTime:this.ExamStarTime}).subscribe(function(r){0==r.returnValue?(t.toastr.warning(" \u062a\u0645 \u062d\u0644 \u0627\u0644\u0625\u0645\u062a\u062d\u0627\u0646 \u0645\u0646 \u0642\u0628\u0644","\u062e\u0637\u0623"),t.spinner.hide()):(t.solvidResults=r,t.openDialog(r),t.spinner.hide())}))}},{key:"timer",value:function(t){var a=this,o=60*t,r=o;(0,Eo.H)(0,1e3).subscribe(function(){r>0?(r==o/2&&a.toastr.warning('\u0628\u0627\u0642\u064a \u0645\u0646 \u0648\u0642\u062a \u0627\u0644\u0625\u0645\u062a\u062d\u0627\u0646  " '+t/2+'" \u062f\u0642\u064a\u0642\u0647'),r==o/4&&a.toastr.warning('\u0628\u0627\u0642\u064a \u0645\u0646 \u0648\u0642\u062a \u0627\u0644\u0625\u0645\u062a\u062d\u0627\u0646  " '+t/4+'" \u062f\u0642\u064a\u0642\u0647'),--r,a.counter=r):0==r&&(a.toastr.error("\u062a\u0645 \u0625\u0646\u062a\u0647\u0627\u0621 \u0627\u0644\u0648\u0642\u062a "),r=null,a.spinner.show(),a.studentServ.SubmitExam({examId:a.examId,studentUserId:a.studentUserId,solvedExamStudent_ID:a.solvedExamStudent_ID,ExamStarTime:a.ExamStarTime}).subscribe(function(p){0==p.returnValue?(a.toastr.error(" \u062a\u0645 \u062d\u0644 \u0627\u0644\u0625\u0645\u062a\u062d\u0627\u0646 \u0645\u0646 \u0642\u0628\u0644","\u062e\u0637\u0623"),a.spinner.hide()):(a.solvidResults=p,a.openDialog(p),a.spinner.hide())}))})}},{key:"openDialog",value:function(t){var a=this;this.dialog.open(Do.H,{data:{solvidResults:t}}).afterClosed().subscribe(function(r){r?a.refresh():a.router.navigateByUrl("/home")})}},{key:"refresh",value:function(){window.location.reload()}}]),l}();return n.\u0275fac=function(i){return new(i||n)(e.Y36(Je.V),e.Y36($._W),e.Y36(I.gz),e.Y36(I.F0),e.Y36(E.t2),e.Y36(k.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-exam-preview"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"row","exam-container"],[1,"col-md-3","col-12"],[1,"row"],[1,"col-12"],["role","alert",1,"alert","bg-light-primary","mb-2"],[1,"badge","bg-primary","mb-1","mr-2"],[1,"col-md-9","col-12"],[3,"label","class",4,"ngFor","ngForOf"],["align","end"],["class","card card-inverse bg-info",4,"ngIf"],[1,"card","card-inverse","bg-info"],[1,"media"],[1,"media-body","text-left"],[1,"card-text"],[3,"label"],[4,"ngFor","ngForOf"],["class","examimage",3,"src",4,"ngIf"],[1,"exam-radio-group",3,"id"],["choice",""],["class","col-12",4,"ngFor","ngForOf"],[1,"examimage",3,"src"],[3,"value","disabled"]],template:function(i,t){1&i&&e.YNc(0,Bo,20,5,"ng-container",0),2&i&&e.Q6J("ngIf",t.ExamGroups)},directives:[T.O5,Z.a8,Z.n5,Z.dn,Le.SP,T.sg,Z.hq,Le.uX,u._Y,u.JL,K.VQ,K.U0],pipes:[D.X$,Jo.H],styles:[".alert.bg-light-primary[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{color:#fff!important}"]}),n}();function Ro(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1," You must enter a value. "),e.qZA())}function $o(n,l){if(1&n&&(e.TgZ(0,"mat-hint",18),e.YNc(1,Ro,2,0,"span",5),e.qZA()),2&n){var i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==i.FormCtrls.from.errors?null:i.FormCtrls.from.errors.required)||(null==i.FormCtrls.from.errors?null:i.FormCtrls.from.errors.minusNum))}}function zo(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1," You must enter a value. "),e.qZA())}function Wo(n,l){if(1&n&&(e.TgZ(0,"mat-hint",18),e.YNc(1,zo,2,0,"span",5),e.qZA()),2&n){var i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==i.FormCtrls.to.errors?null:i.FormCtrls.to.errors.required)||(null==i.FormCtrls.to.errors?null:i.FormCtrls.to.errors.minusNum))}}function Xo(n,l){if(1&n&&(e.ynx(0),e.TgZ(1,"div",6),e.TgZ(2,"mat-form-field",7),e.TgZ(3,"mat-label"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"input",16),e.YNc(7,$o,2,1,"mat-hint",9),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"mat-form-field",7),e.TgZ(10,"mat-label"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"input",17),e.YNc(14,Wo,2,1,"mat-hint",9),e.qZA(),e.qZA(),e.BQk()),2&n){var i=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,4,"labels.From")," "),e.xp6(3),e.Q6J("ngIf",i.FormCtrls.from.invalid&&(i.FormCtrls.from.touched||i.Submitted)),e.xp6(4),e.hij(" ",e.lcZ(12,6,"labels.To")," "),e.xp6(3),e.Q6J("ngIf",i.FormCtrls.to.invalid&&(i.FormCtrls.to.touched||i.Submitted))}}function Ko(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1," You must enter a value. "),e.qZA())}function el(n,l){if(1&n&&(e.TgZ(0,"mat-hint",18),e.YNc(1,Ko,2,0,"span",5),e.qZA()),2&n){var i=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==i.FormCtrls.value.errors?null:i.FormCtrls.value.errors.required)||(null==i.FormCtrls.value.errors?null:i.FormCtrls.value.errors.minusNum))}}function tl(n,l){1&n&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.ByQuestion")," "))}function nl(n,l){1&n&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.ByExam")," "))}function il(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"tr"),e.YNc(1,tl,3,3,"td",5),e.YNc(2,nl,3,3,"td",5),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e.TgZ(10,"button",19),e.NdJ("click",function(){var r=e.CHM(i).$implicit;return e.oxw().openDeleateExamPointDialog(r)}),e.TgZ(11,"mat-icon"),e._uU(12,"delete"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){var t=l.$implicit;e.xp6(1),e.Q6J("ngIf",t.ByQuestion),e.xp6(1),e.Q6J("ngIf",!t.ByQuestion),e.xp6(2),e.Oqu(t.FromValue),e.xp6(2),e.Oqu(t.ToValue),e.xp6(2),e.Oqu(t.Value)}}function al(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"pagination-controls",20),e.NdJ("pageChange",function(o){e.CHM(i);var r=e.oxw();return r.p=o,r.getExamCustomPoints(o)}),e.qZA()}if(2&n){var t=e.oxw();e.Q6J("maxSize",t.maxSize)}}var ol=function(l){return{functionId:l}},ll=function(l,i){return{itemsPerPage:5,currentPage:l,totalItems:i}},rl=function(){var n=function(){function l(i,t,a,o,r,s,m){var d=this;(0,U.Z)(this,l),this.fb=i,this.toastr=t,this.authserv=a,this.route=o,this.PointsService=r,this.dialog=s,this.spinner=m,this.Submitted=!1,this.p=1,this.maxSize=9,o.paramMap.subscribe(function(c){d.examId=Number(c.get("examId"))}),this.route.queryParamMap.subscribe(function(c){d.functionId=Number(c.get("functionId"))})}return(0,S.Z)(l,[{key:"ngOnInit",value:function(){this.getExamCustomPoints(1),this.myForm=this.fb.group({ByQuestion:[!1,[u.kI.required]],from:["",[u.kI.required,q.D.minusNum]],to:["",[u.kI.required,q.D.minusNum]],value:["",[u.kI.required,q.D.minusNum]]}),this.ByQuestionValidators(!1)}},{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"addExamCustomPoint",value:function(){var a,o,r,s,t=this;this.Submitted=!0;var m={itemId:this.examId,ByQuestion:null===(a=this.FormCtrls)||void 0===a?void 0:a.ByQuestion.value,from:null===(o=this.FormCtrls)||void 0===o?void 0:o.from.value,to:null===(r=this.FormCtrls)||void 0===r?void 0:r.to.value,value:null===(s=this.FormCtrls)||void 0===s?void 0:s.value.value};this.myForm.valid&&(this.spinner.show(),this.PointsService.addExamCustomPoint(m).subscribe(function(d){var c;1==d.returnValue&&(t.getExamCustomPoints(1),t.toastr.success("\u062a\u0645 \u0625\u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u0646\u0642\u0627\u0637"),t.Submitted=!1,t.myForm.reset(),null===(c=t.FormCtrls)||void 0===c||c.ByQuestion.setValue(!1)),t.spinner.hide()}))}},{key:"getExamCustomPoints",value:function(t){var a=this;this.spinner.show(),this.PointsService.getExamCustomPoints(t,this.examId).subscribe(function(o){1==o.returnValue&&(a.ItemsCount=o.itemsCount,a.Points=o.points),a.spinner.hide()})}},{key:"deleteExamCustomPoint",value:function(t){var a=this;this.spinner.show(),this.PointsService.deleteExamCustomPoint(t.Id).subscribe(function(o){if(1==o.returnValue){var r=a.Points.findIndex(function(s){return s==t});a.Points.splice(r,1),a.toastr.success("\u062a\u0645 \u0627\u0644\u062d\u0630\u0641")}a.spinner.hide()})}},{key:"openDeleateExamPointDialog",value:function(t){var a=this;this.dialog.open(R.F,{data:{msg:"".concat(t.Value,": points"),panelClass:"dialog-radius"}}).afterClosed().subscribe(function(o){o&&a.deleteExamCustomPoint(t)})}},{key:"track",value:function(t,a){return a.Id}},{key:"ByQuestionValidators",value:function(t){1==t?(this.FormCtrls.from.reset(),this.FormCtrls.from.clearValidators(),this.FormCtrls.to.reset(),this.FormCtrls.to.clearValidators()):(this.FormCtrls.from.setValidators([u.kI.required,q.D.minusNum]),this.FormCtrls.to.setValidators([u.kI.required,q.D.bigZero])),this.FormCtrls.from.updateValueAndValidity(),this.FormCtrls.to.updateValueAndValidity()}}]),l}();return n.\u0275fac=function(i){return new(i||n)(e.Y36(u.qu),e.Y36($._W),e.Y36(Y.e),e.Y36(I.gz),e.Y36(ke.q),e.Y36(k.uw),e.Y36(E.t2))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-exams-custome-points"]],decls:47,vars:39,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","","routerLink","/dashboard/exams-setup/exam/index",1,"btn","btn-warning","bg-light-warning","float-right",3,"queryParams"],[1,"container-fluid"],[3,"formGroup"],[4,"ngIf"],[1,"col-lg-4","col-12"],["appearance","legacy"],["matInput","","type","number","formControlName","value"],["class","text-danger",4,"ngIf"],["align","end"],["mat-raised-button","","type","button",1,"btn","btn-primary","bg-light-info",3,"click"],[1,"fa","fa-plus"],[1,"table"],[4,"ngFor","ngForOf","ngForTrackBy"],["dir","ltr","previousLabel","","nextLabel","",3,"maxSize","pageChange",4,"ngIf"],["matInput","","type","number","formControlName","from"],["matInput","","type","number","formControlName","to"],[1,"text-danger"],["mat-mini-fab","","color","warn",3,"click"],["dir","ltr","previousLabel","","nextLabel","",3,"maxSize","pageChange"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"a",2),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.TgZ(9,"mat-card-content",3),e.TgZ(10,"form",4),e.TgZ(11,"div",0),e.YNc(12,Xo,15,8,"ng-container",5),e.TgZ(13,"div",6),e.TgZ(14,"mat-form-field",7),e.TgZ(15,"mat-label"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e._UZ(18,"input",8),e.YNc(19,el,2,1,"mat-hint",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"mat-card-actions",10),e.TgZ(21,"button",11),e.NdJ("click",function(){return t.addExamCustomPoint()}),e._UZ(22,"i",12),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.qZA(),e.qZA(),e.ynx(25),e.TgZ(26,"table",13),e.TgZ(27,"thead"),e.TgZ(28,"tr"),e.TgZ(29,"th"),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"th"),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"th"),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"th"),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"th"),e._uU(42,"actions"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(43,"tbody"),e.YNc(44,il,13,5,"tr",14),e.ALo(45,"paginate"),e.qZA(),e.YNc(46,al,1,1,"pagination-controls",15),e.qZA(),e.BQk(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(4),e.hij(" ",e.lcZ(5,15,"labels.ExamPoints")," "),e.xp6(2),e.Q6J("queryParams",e.VKq(34,ol,t.functionId)),e.xp6(1),e.hij(" ",e.lcZ(8,17,"General.Back")," "),e.xp6(3),e.Q6J("formGroup",t.myForm),e.xp6(2),e.Q6J("ngIf",!1===t.FormCtrls.ByQuestion.value),e.xp6(4),e.hij(" ",e.lcZ(17,19,"labels.pointsNumber")," "),e.xp6(3),e.Q6J("ngIf",t.FormCtrls.value.invalid&&(t.FormCtrls.value.touched||t.Submitted)),e.xp6(4),e.hij(" ",e.lcZ(24,21,"General.Add")," "),e.xp6(7),e.hij(" ",e.lcZ(31,23,"labels.ByQuestion")," "),e.xp6(3),e.hij(" ",e.lcZ(34,25,"labels.From")," "),e.xp6(3),e.hij(" ",e.lcZ(37,27,"labels.To")," "),e.xp6(3),e.hij(" ",e.lcZ(40,29,"labels.pointsNumber")," "),e.xp6(5),e.Q6J("ngForOf",e.xi3(45,31,t.Points,e.WLB(36,ll,t.p,t.ItemsCount)))("ngForTrackBy",t.track),e.xp6(2),e.Q6J("ngIf",(null==t.Points?null:t.Points.length)>5))},directives:[Z.a8,Z.n5,w.zs,I.yS,Z.dn,u._Y,u.JL,u.sg,T.O5,C.KE,C.hX,L.Nt,u.wV,u.Fj,u.JJ,u.u,Z.hq,w.lW,T.sg,C.bx,_e.Hw,ie.LS,Ie.Lv],pipes:[D.X$,ie._s],styles:[""]}),n}(),je=f(1059),Ve=f(4850),Pe=f(7162),sl=f(5478),ul=f(8452),Qe=f(9430),ml=f(5013),Ge=f(8657),Oe=f(6896),dl=f(7861),cl=f(530),Me=f(5471),pl=["editor"];function _l(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"img",17),e.NdJ("click",function(){return e.CHM(i),e.oxw(),e.MAs(6).click()}),e.qZA()}if(2&n){var t=e.oxw(2);e.Q6J("src",t.svgManager.img_icon,e.LSH)}}function hl(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"img",56),e.NdJ("click",function(){return e.CHM(i),e.oxw(),e.MAs(6).click()}),e.qZA()}if(2&n){var t=e.oxw(2);e.Q6J("src",null==t.FormCtrl.answerOneImage?null:t.FormCtrl.answerOneImage.value,e.LSH)}}function gl(n,l){1&n&&e._UZ(0,"i",57)}function fl(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"img",17),e.NdJ("click",function(){return e.CHM(i),e.oxw(),e.MAs(15).click()}),e.qZA()}if(2&n){var t=e.oxw(2);e.Q6J("src",t.svgManager.img_icon,e.LSH)}}function vl(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"img",56),e.NdJ("click",function(){return e.CHM(i),e.oxw(),e.MAs(15).click()}),e.qZA()}if(2&n){var t=e.oxw(2);e.Q6J("src",null==t.FormCtrl.answerTwoImage?null:t.FormCtrl.answerTwoImage.value,e.LSH)}}function Zl(n,l){1&n&&e._UZ(0,"i",57)}function Cl(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"img",17),e.NdJ("click",function(){return e.CHM(i),e.oxw(),e.MAs(24).click()}),e.qZA()}if(2&n){var t=e.oxw(2);e.Q6J("src",t.svgManager.img_icon,e.LSH)}}function Tl(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"img",56),e.NdJ("click",function(){return e.CHM(i),e.oxw(),e.MAs(24).click()}),e.qZA()}if(2&n){var t=e.oxw(2);e.Q6J("src",null==t.FormCtrl.answerThreeImage?null:t.FormCtrl.answerThreeImage.value,e.LSH)}}function xl(n,l){1&n&&e._UZ(0,"i",57)}function Il(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"img",17),e.NdJ("click",function(){return e.CHM(i),e.oxw(),e.MAs(33).click()}),e.qZA()}if(2&n){var t=e.oxw(2);e.Q6J("src",t.svgManager.img_icon,e.LSH)}}function bl(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"img",56),e.NdJ("click",function(){return e.CHM(i),e.oxw(),e.MAs(33).click()}),e.qZA()}if(2&n){var t=e.oxw(2);e.Q6J("src",null==t.FormCtrl.answerFourImage?null:t.FormCtrl.answerFourImage.value,e.LSH)}}function Al(n,l){1&n&&e._UZ(0,"i",57)}function ql(n,l){if(1&n){var i=e.EpF();e.ynx(0),e.TgZ(1,"div",38),e.TgZ(2,"div",39),e.TgZ(3,"div",40),e.YNc(4,_l,1,1,"img",41),e.TgZ(5,"input",42,43),e.NdJ("change",function(o){return e.CHM(i),e.oxw().importOneFile(o)}),e.qZA(),e.YNc(7,hl,1,1,"img",44),e.qZA(),e._UZ(8,"app-input",45),e.YNc(9,gl,1,0,"i",46),e.qZA(),e.qZA(),e.TgZ(10,"div",38),e.TgZ(11,"div",39),e.TgZ(12,"div",40),e.YNc(13,fl,1,1,"img",41),e.TgZ(14,"input",47,48),e.NdJ("change",function(o){return e.CHM(i),e.oxw().importTwoFile(o)}),e.qZA(),e.YNc(16,vl,1,1,"img",44),e.qZA(),e._UZ(17,"app-input",49),e.YNc(18,Zl,1,0,"i",46),e.qZA(),e.qZA(),e.TgZ(19,"div",38),e.TgZ(20,"div",39),e.TgZ(21,"div",40),e.YNc(22,Cl,1,1,"img",41),e.TgZ(23,"input",50,51),e.NdJ("change",function(o){return e.CHM(i),e.oxw().importThreeFile(o)}),e.qZA(),e.YNc(25,Tl,1,1,"img",44),e.qZA(),e._UZ(26,"app-input",52),e.YNc(27,xl,1,0,"i",46),e.qZA(),e.qZA(),e.TgZ(28,"div",38),e.TgZ(29,"div",39),e.TgZ(30,"div",40),e.YNc(31,Il,1,1,"img",41),e.TgZ(32,"input",53,54),e.NdJ("change",function(o){return e.CHM(i),e.oxw().importFourFile(o)}),e.qZA(),e.YNc(34,bl,1,1,"img",44),e.qZA(),e._UZ(35,"app-input",55),e.YNc(36,Al,1,0,"i",46),e.qZA(),e.qZA(),e.BQk()}if(2&n){var t=e.oxw();e.xp6(4),e.Q6J("ngIf",!(null!=t.FormCtrl.answerOneImage&&t.FormCtrl.answerOneImage.value)),e.xp6(3),e.Q6J("ngIf",null==t.FormCtrl.answerOneImage?null:t.FormCtrl.answerOneImage.value),e.xp6(1),e.Q6J("control",t.FormCtrl.answerOne)("submitted",t.submitted),e.xp6(1),e.Q6J("ngIf",t.FormCtrl.answerOneIsCorrect.value),e.xp6(4),e.Q6J("ngIf",!(null!=t.FormCtrl.answerTwoImage&&t.FormCtrl.answerTwoImage.value)),e.xp6(3),e.Q6J("ngIf",null==t.FormCtrl.answerTwoImage?null:t.FormCtrl.answerTwoImage.value),e.xp6(1),e.Q6J("control",t.FormCtrl.answerTwo)("submitted",t.submitted),e.xp6(1),e.Q6J("ngIf",t.FormCtrl.answerTwoIsCorrect.value),e.xp6(4),e.Q6J("ngIf",!(null!=t.FormCtrl.answerThreeImage&&t.FormCtrl.answerThreeImage.value)),e.xp6(3),e.Q6J("ngIf",null==t.FormCtrl.answerThreeImage?null:t.FormCtrl.answerThreeImage.value),e.xp6(1),e.Q6J("control",t.FormCtrl.answerThree)("submitted",t.submitted),e.xp6(1),e.Q6J("ngIf",t.FormCtrl.answerThreeIsCorrect.value),e.xp6(4),e.Q6J("ngIf",!(null!=t.FormCtrl.answerFourImage&&t.FormCtrl.answerFourImage.value)),e.xp6(3),e.Q6J("ngIf",null==t.FormCtrl.answerFourImage?null:t.FormCtrl.answerFourImage.value),e.xp6(1),e.Q6J("control",t.FormCtrl.answerFour)("submitted",t.submitted),e.xp6(1),e.Q6J("ngIf",t.FormCtrl.answerFourIsCorrect.value)}}function yl(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"button",58),e.NdJ("click",function(){return e.CHM(i),e.oxw().handelPrevAndNext(!0)}),e._UZ(1,"i",59),e.TgZ(2,"span",37),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.qZA()}if(2&n){var t=e.oxw();e.xp6(1),e.Q6J("ngClass",t.languageService.isArabic?"fa-chevron-right":"fa-chevron-left"),e.xp6(2),e.hij(" ",e.lcZ(4,2,"Exam.prevQuestion")," ")}}function Fl(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"button",60),e.NdJ("click",function(){return e.CHM(i),e.oxw().handelPrevAndNext(!1)}),e.TgZ(1,"span",37),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"i",59),e.qZA()}if(2&n){var t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,2,"Exam.nextQuestion")," "),e.xp6(2),e.Q6J("ngClass",t.languageService.isArabic?"fa-chevron-left":"fa-chevron-right")}}function Ql(n,l){if(1&n&&(e.TgZ(0,"span",70),e._UZ(1,"img",71),e.qZA()),2&n){var i=e.oxw(2).$implicit,t=e.oxw();e.xp6(1),e.Q6J("src",t.ifImageNeedFileService(i.Image)?t.uploadFileService.previewPicture(i.Image):i.Image,e.LSH)}}function wl(n,l){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){var i=l.index,t=e.oxw(2).$implicit;e.ekj("onlyOne",1==t.ChoiceCounts)("correct",t.correctIndex==i),e.xp6(1),e.hij(" ",i+1," ")}}function Nl(n,l){if(1&n&&(e.TgZ(0,"span"),e._UZ(1,"img",72),e.qZA()),2&n){var i=e.oxw(3);e.xp6(1),e.Q6J("src",i.svgManager.exclamation,e.LSH)}}var Be=function(){return[]};function Sl(n,l){if(1&n&&(e.ynx(0),e.TgZ(1,"td"),e.TgZ(2,"span",62),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"td"),e.TgZ(5,"span",63),e.YNc(6,Ql,2,1,"span",64),e._UZ(7,"span",65),e.TgZ(8,"span",66),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"td"),e.TgZ(12,"span",67),e.YNc(13,wl,2,5,"span",68),e.qZA(),e.YNc(14,Nl,2,1,"span",26),e.qZA(),e.TgZ(15,"td",69),e._UZ(16,"i",57),e.qZA(),e.BQk()),2&n){var i=e.oxw(),t=i.index,a=i.$implicit;e.xp6(3),e.Oqu(t+1),e.xp6(3),e.Q6J("ngIf",a.Image&&!a.Text),e.xp6(1),e.Q6J("innerHTML",a.Text,e.oJD),e.xp6(2),e.AsE(" ",a.mark," ",e.lcZ(10,7,"Exam.points")," "),e.xp6(4),e.Q6J("ngForOf",e.DdM(9,Be).constructor(a.ChoiceCounts)),e.xp6(1),e.Q6J("ngIf",0==a.ChoiceCounts)}}function Ul(n,l){if(1&n&&(e.TgZ(0,"span",70),e._UZ(1,"img",71),e.qZA()),2&n){var i=e.oxw(3);e.xp6(1),e.Q6J("src",null==i.FormCtrl.questionImage?null:i.FormCtrl.questionImage.value,e.LSH)}}function kl(n,l){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){var i=l.index,t=e.oxw(3);e.ekj("onlyOne",1==t.noOfInsertedAnswers())("correct",t.getCorrectAnswerIndexFromForm()==i),e.xp6(1),e.hij(" ",i+1," ")}}function Dl(n,l){if(1&n&&(e.TgZ(0,"span"),e._UZ(1,"img",72),e.qZA()),2&n){var i=e.oxw(3);e.xp6(1),e.Q6J("src",i.svgManager.exclamation,e.LSH)}}function El(n,l){if(1&n&&(e.ynx(0),e.TgZ(1,"td"),e.TgZ(2,"span",62),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"td"),e.TgZ(5,"span",63),e.YNc(6,Ul,2,1,"span",64),e._UZ(7,"span",65),e.TgZ(8,"span",66),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"td"),e.TgZ(12,"span",67),e.YNc(13,kl,2,5,"span",68),e.qZA(),e.YNc(14,Dl,2,1,"span",26),e.qZA(),e._UZ(15,"td",69),e.BQk()),2&n){var a,i=e.oxw().index,t=e.oxw();e.xp6(3),e.Oqu(i+1),e.xp6(3),e.Q6J("ngIf",(null==t.FormCtrl.questionImage?null:t.FormCtrl.questionImage.value)&&!(null!=t.FormCtrl.exam_question_text&&t.FormCtrl.exam_question_text.value)),e.xp6(1),e.Q6J("innerHTML",null==t.FormCtrl.exam_question_text?null:t.FormCtrl.exam_question_text.value,e.oJD),e.xp6(2),e.AsE(" ",null!==(a=null==t.FormCtrl.questionMark?null:t.FormCtrl.questionMark.value)&&void 0!==a?a:0," ",e.lcZ(10,7,"Exam.points")," "),e.xp6(4),e.Q6J("ngForOf",e.DdM(9,Be).constructor(t.noOfInsertedAnswers())),e.xp6(1),e.Q6J("ngIf",0==t.noOfInsertedAnswers())}}function Jl(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"tr",61),e.NdJ("click",function(){var r=e.CHM(i),s=r.index,m=r.$implicit;return e.oxw().onSelectQuestion(s,m.ExamQuestId)}),e.YNc(1,Sl,17,10,"ng-container",26),e.YNc(2,El,16,10,"ng-container",26),e.qZA()}if(2&n){var t=l.index,a=e.oxw();e.ekj("active",t==a.selectedQuesIndex),e.xp6(1),e.Q6J("ngIf",t!=a.selectedQuesIndex),e.xp6(1),e.Q6J("ngIf",t==a.selectedQuesIndex)}}var He=function(){var n=function(){function l(i,t,a,o,r,s,m,d,c,g,p){var _=this;(0,U.Z)(this,l),this.route=i,this.fb=t,this.examService=a,this.authserv=o,this.toastr=r,this.spinner=s,this.uploadFileService=m,this.languageService=d,this.router=c,this.dialog=g,this.translate=p,this.examGroupHeaderId=0,this.subjectId=0,this.questionsInGrid=[],this.questionId=0,this.submitted=!1,this.oneIsCorrect=!1,this.twoIsCorrect=!1,this.threeIsCorrect=!1,this.fourIsCorrect=!1,this.questionFile=null,this.answerOneFile=null,this.answerTwoFile=null,this.answerThreeFile=null,this.answerFourFile=null,this.selectedQuesIndex=0,this.svgManager=new Pe.E,this.editorWidth=0,this.editorFooterWidth=0,i.params.subscribe(function(v){_.examId=Number(v.examId),_.examGroupHeaderId=Number(v.examGroupHeaderId),_.subjectId=Number(v.courseId),0!=_.examGroupHeaderId&&_.getAllQuestionsByHeadId()}),this.route.queryParamMap.subscribe(function(v){_.functionId=Number(v.get("functionId")),_.parentId=Number(v.get("parentId"))})}return(0,S.Z)(l,[{key:"ngAfterViewInit",value:function(){var t=this;setTimeout(function(){t.getEditorWidth()},3e3)}},{key:"ngOnInit",value:function(){this.myForm=this.fb.group({mainQuestion:[null],questionTypeId:[2,u.kI.required],questionImage:[null],remove_image:[!1],exam_question_text:[null],questionPerfectAnswer:[null],perfect_answer_attach:[null],questionMark:[1,[u.kI.required,q.D.bigZero]],answerOneId:[null],answerOne:[null],answerOneIsCorrect:[null],answerOneImage:[null],answerTwoId:[null],answerTwo:[null],answerTwoIsCorrect:[null],answerTwoImage:[null],answerThreeId:[null],answerThree:[null],answerThreeIsCorrect:[null],answerThreeImage:[null],answerFourId:[null],answerFour:[null],answerFourIsCorrect:[null],answerFourImage:[null],answerOneRemove_image:[!1],answerTwoRemove_image:[!1],answerThreeRemove_image:[!1],answerFourRemove_image:[!1]}),this.educationCompanyId=this.authserv.getEduCompId(),this.questionTypeValidation()}},{key:"FormCtrl",get:function(){return this.myForm.controls}},{key:"getAllQuestionsByHeadId",value:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.spinner.show(),this.examService.getAllQuestionsByHeadId(this.examGroupHeaderId).subscribe(function(o){o&&(t.questionsInGrid=[],o.map(function(r){return r.correctIndex=r.AnswersIds.findIndex(function(s){return s==r.CorrectAnswerId})}),t.questionsInGrid=o,0==t.questionsInGrid.length?t.pushNewQuestion():t.questionsInGrid.length>0&&0==a&&(t.questionId=t.questionsInGrid[0].ExamQuestId,t.getQuestionForEditByID(t.questionId)),t.handleStatusAfterSubmit(a),t.spinner.hide())})}},{key:"questionTypeValidation",value:function(){var t,a,o,r;1===(null===(t=this.FormCtrl.questionTypeId)||void 0===t?void 0:t.value)||(null===(a=this.FormCtrl.questionPerfectAnswer)||void 0===a||a.clearAsyncValidators(),null===(o=this.FormCtrl.questionPerfectAnswer)||void 0===o||o.reset()),null===(r=this.FormCtrl.questionPerfectAnswer)||void 0===r||r.updateValueAndValidity()}},{key:"onSubmit",value:function(){var o,r,s,m,d,c,g,p,_,v,b,A,x,y,N,J,P,G,te,V,B,W,X,Q,oe,le,re,se,ue,me,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.submitted=!0,2==(null===(o=this.FormCtrl.questionTypeId)||void 0===o?void 0:o.value)){var he=this.questionFile||null,ge=this.FormCtrl.questionImage.value,fe=this.answerOneFile||null,O={choice_id:null!==(s=null===(r=this.FormCtrl.answerOneId)||void 0===r?void 0:r.value)&&void 0!==s?s:0,choice_text:null===(m=this.FormCtrl.answerOne)||void 0===m?void 0:m.value,is_correct:this.FormCtrl.answerOneIsCorrect.value,choice_image:fe,remove_image:null===(d=this.FormCtrl.answerOneRemove_image)||void 0===d?void 0:d.value,path:null===(c=this.FormCtrl.answerOneImage)||void 0===c?void 0:c.value},ve=this.answerTwoFile||null,M={choice_id:null!==(p=null===(g=this.FormCtrl.answerTwoId)||void 0===g?void 0:g.value)&&void 0!==p?p:0,choice_text:null===(_=this.FormCtrl.answerTwo)||void 0===_?void 0:_.value,is_correct:null===(v=this.FormCtrl.answerTwoIsCorrect)||void 0===v?void 0:v.value,choice_image:ve,remove_image:null===(b=this.FormCtrl.answerTwoRemove_image)||void 0===b?void 0:b.value,path:null===(A=this.FormCtrl.answerTwoImage)||void 0===A?void 0:A.value},Ze=this.answerThreeFile||null,ce={choice_id:null!==(y=null===(x=this.FormCtrl.answerThreeId)||void 0===x?void 0:x.value)&&void 0!==y?y:0,choice_text:null===(N=this.FormCtrl.answerThree)||void 0===N?void 0:N.value,is_correct:null===(J=this.FormCtrl.answerThreeIsCorrect)||void 0===J?void 0:J.value,choice_image:Ze,remove_image:null===(P=this.FormCtrl.answerThreeRemove_image)||void 0===P?void 0:P.value,path:null===(G=this.FormCtrl.answerThreeImage)||void 0===G?void 0:G.value},Ce=this.answerFourFile||null,pe={choice_id:null!==(V=null===(te=this.FormCtrl.answerFourId)||void 0===te?void 0:te.value)&&void 0!==V?V:0,choice_text:null===(B=this.FormCtrl.answerFour)||void 0===B?void 0:B.value,is_correct:null===(W=this.FormCtrl.answerFourIsCorrect)||void 0===W?void 0:W.value,choice_image:Ce,remove_image:null===(X=this.FormCtrl.answerFourRemove_image)||void 0===X?void 0:X.value,path:null===(Q=this.FormCtrl.answerFourImage)||void 0===Q?void 0:Q.value},H={exam_question_main_question:null===(oe=this.FormCtrl.mainQuestion)||void 0===oe?void 0:oe.value,exam_question_mark:null===(le=this.FormCtrl.questionMark)||void 0===le?void 0:le.value,exam_question_perfect_answer:null===(re=this.FormCtrl.questionPerfectAnswer)||void 0===re?void 0:re.value,exam_question_text:null===(se=this.FormCtrl.exam_question_text)||void 0===se?void 0:se.value,exam_question_type_id:null===(ue=this.FormCtrl.questionTypeId)||void 0===ue?void 0:ue.value,exam_selected_question_head_id:this.examGroupHeaderId,exam_selected_subject_id:this.subjectId,exam_question_image:he,remove_image:null===(me=this.FormCtrl.remove_image)||void 0===me?void 0:me.value,exam_question_id:this.questionId,mcq_choices:[O,M,ce,pe]};if((null===H.exam_question_text||""==H.exam_question_text||null==H.exam_question_text)&&null===H.exam_question_image&&null===ge)return void this.toastr.warning("Exam.QuestionMsgError");var Te=[O,M,ce,pe];if(Te.forEach(function(ne){}),(null===O.choice_text||""==O.choice_text||null==O.choice_text)&&null===O.choice_image&&null==O.path)return void this.toastr.warning("Exam.QuestionOneMsgError");if((null===M.choice_text||""==M.choice_text||null==M.choice_text)&&null===M.choice_image&&null==M.path)return void this.toastr.warning("Exam.QuestionTwoMsgError");this.questionId>0?this.editMcqQuestion(H,t,a):this.addMcqQuestion(H,t)}}},{key:"addMcqQuestion",value:function(t,a){var o=this;this.myForm.valid&&(this.spinner.show(),this.examService.addQuestion(t).subscribe(function(r){var s,m,d,c,g,p,_;200==r.returnValue?(o.getAllQuestionsByHeadId(a),null===(s=o.FormCtrl.mainQuestion)||void 0===s||s.setValue(null),null===(m=o.FormCtrl.questionMark)||void 0===m||m.setValue(null),null===(d=o.FormCtrl.questionTypeId)||void 0===d||d.setValue(null),null===(c=o.FormCtrl.questionImage)||void 0===c||c.setValue(null),null===(g=o.FormCtrl.exam_question_text)||void 0===g||g.setValue(null),null===(p=o.FormCtrl.questionPerfectAnswer)||void 0===p||p.setValue(null),null===(_=o.FormCtrl.perfect_answer_attach)||void 0===_||_.setValue(null),o.clearForm(),o.toastr.success("General.AddSuccessfully")):o.toastr.error(r.returnString),o.spinner.hide()}))}},{key:"editMcqQuestion",value:function(t,a,o){var r=this;this.myForm.valid&&(this.spinner.show(),this.examService.editQuestion(t).subscribe(function(s){var m,d,c,g,p,_,v;s&&(r.questionId=o,r.getAllQuestionsByHeadId(a),null===(m=r.FormCtrl.mainQuestion)||void 0===m||m.setValue(null),null===(d=r.FormCtrl.questionMark)||void 0===d||d.setValue(null),null===(c=r.FormCtrl.questionTypeId)||void 0===c||c.setValue(null),null===(g=r.FormCtrl.questionImage)||void 0===g||g.setValue(null),null===(p=r.FormCtrl.exam_question_text)||void 0===p||p.setValue(null),null===(_=r.FormCtrl.questionPerfectAnswer)||void 0===_||_.setValue(null),null===(v=r.FormCtrl.perfect_answer_attach)||void 0===v||v.setValue(null),r.oneIsCorrect=!1,r.twoIsCorrect=!1,r.threeIsCorrect=!1,r.fourIsCorrect=!1,r.clearForm(),r.toastr.success("General.UpdateSuccessfully")),r.spinner.hide()}))}},{key:"handleStatusAfterSubmit",value:function(t){if(this.notSavedQuestionData&&[1,2,6,7].includes(t)){var a={ExamQuestId:0,mark:this.notSavedQuestionData.questionMark,Text:this.notSavedQuestionData.exam_question_text,ChoiceCounts:this.noOfInsertedAnswers(!1),Image:this.notSavedQuestionData.questionImage,correctIndex:this.getCorrectAnswerIndexFromForm(!1)};this.questionsInGrid.push(a)}1==t?this.goToPrevQuestion():2==t?this.goToNextQuestion():3==t?(this.pushNewQuestion(),this.goToNotSavedQuestion(!0)):4==t?(this.pushNewQuestion(),this.currentQuestionToEdit=null,this.questionId=0,this.clearForm(),this.FormCtrl.questionMark.setValue(1)):5==t?this.router.navigate(["/dashboard/exams-setup/survey/".concat(this.subjectId,"/index")],{queryParams:{functionId:this.functionId,parentId:this.parentId}}):6==t?(this.myForm.patchValue(this.notSavedQuestionData),this.displayQuestionImageInEditor(),this.currentQuestionToEdit=null):7==t&&this.getQuestionForEditByID(this.questionId)}},{key:"getQuestionForEditByID",value:function(t){var a=this;this.spinner.show(),this.examService.getQuestionForEditByID(t).subscribe(function(o){var r,s,m,d,c,g,p,_,v,b,A,x,y,N,J,P,G,te,V,B,W,X,Q,oe,le,re,se,ue,me,he,ge,fe,O,ve,M,Ze,ce,Ce,pe,H,Te,xe,ne,Ne,Se;o&&(a.currentQuestionToEdit=o,a.changeCurrentCorrectAnswer=!1,null===(r=a.FormCtrl.mainQuestion)||void 0===r||r.setValue(o.main_question),null===(s=a.FormCtrl.questionMark)||void 0===s||s.setValue(o.mark),null===(m=a.FormCtrl.exam_question_text)||void 0===m||m.setValue(o.question_text),null===(d=a.FormCtrl.questionImage)||void 0===d||d.setValue(null!=(null==o?void 0:o.attach_path)?a.uploadFileService.previewPicture(null==o?void 0:o.attach_path):null),a.displayQuestionImageInEditor(),null===(c=a.FormCtrl.questionTypeId)||void 0===c||c.setValue(o.question_type_id),a.questionId=t,2==o.question_type_id&&(null===(g=a.FormCtrl.answerOneId)||void 0===g||g.setValue(null===(p=o.MCQ_Choices[0])||void 0===p?void 0:p.Id),null===(_=a.FormCtrl.answerOne)||void 0===_||_.setValue(null===(v=o.MCQ_Choices[0])||void 0===v?void 0:v.Text),null===(b=a.FormCtrl.answerOneImage)||void 0===b||b.setValue(null!=(null===(A=null==o?void 0:o.MCQ_Choices[0])||void 0===A?void 0:A.Image)?a.uploadFileService.previewPicture(null===(x=null==o?void 0:o.MCQ_Choices[0])||void 0===x?void 0:x.Image):null),null===(y=a.FormCtrl.answerOneIsCorrect)||void 0===y||y.setValue(null===(N=o.MCQ_Choices[0])||void 0===N?void 0:N.Is_Correct),a.oneIsCorrect=null===(J=o.MCQ_Choices[0])||void 0===J?void 0:J.Is_Correct,null===(P=a.FormCtrl.answerTwoId)||void 0===P||P.setValue(null===(G=o.MCQ_Choices[1])||void 0===G?void 0:G.Id),null===(te=a.FormCtrl.answerTwo)||void 0===te||te.setValue(null===(V=o.MCQ_Choices[1])||void 0===V?void 0:V.Text),null===(B=a.FormCtrl.answerTwoImage)||void 0===B||B.setValue(null!=(null===(W=null==o?void 0:o.MCQ_Choices[1])||void 0===W?void 0:W.Image)?a.uploadFileService.previewPicture(null===(X=null==o?void 0:o.MCQ_Choices[1])||void 0===X?void 0:X.Image):null),null===(Q=a.FormCtrl.answerTwoIsCorrect)||void 0===Q||Q.setValue(null===(oe=o.MCQ_Choices[1])||void 0===oe?void 0:oe.Is_Correct),a.twoIsCorrect=null===(le=o.MCQ_Choices[1])||void 0===le?void 0:le.Is_Correct,null===(re=a.FormCtrl.answerThreeId)||void 0===re||re.setValue(null===(se=o.MCQ_Choices[2])||void 0===se?void 0:se.Id),null===(ue=a.FormCtrl.answerThree)||void 0===ue||ue.setValue(null===(me=o.MCQ_Choices[2])||void 0===me?void 0:me.Text),null===(he=a.FormCtrl.answerThreeImage)||void 0===he||he.setValue(null!=(null===(ge=null==o?void 0:o.MCQ_Choices[2])||void 0===ge?void 0:ge.Image)?a.uploadFileService.previewPicture(null===(fe=null==o?void 0:o.MCQ_Choices[2])||void 0===fe?void 0:fe.Image):null),null===(O=a.FormCtrl.answerThreeIsCorrect)||void 0===O||O.setValue(null===(ve=o.MCQ_Choices[2])||void 0===ve?void 0:ve.Is_Correct),a.threeIsCorrect=null===(M=o.MCQ_Choices[2])||void 0===M?void 0:M.Is_Correct,null===(Ze=a.FormCtrl.answerFourId)||void 0===Ze||Ze.setValue(null===(ce=o.MCQ_Choices[3])||void 0===ce?void 0:ce.Id),null===(Ce=a.FormCtrl.answerFour)||void 0===Ce||Ce.setValue(null===(pe=o.MCQ_Choices[3])||void 0===pe?void 0:pe.Text),null===(H=a.FormCtrl.answerFourImage)||void 0===H||H.setValue(null!=(null===(Te=null==o?void 0:o.MCQ_Choices[3])||void 0===Te?void 0:Te.Image)?a.uploadFileService.previewPicture(null===(xe=null==o?void 0:o.MCQ_Choices[3])||void 0===xe?void 0:xe.Image):null),null===(ne=a.FormCtrl.answerFourIsCorrect)||void 0===ne||ne.setValue(null===(Ne=o.MCQ_Choices[3])||void 0===Ne?void 0:Ne.Is_Correct),a.fourIsCorrect=null===(Se=o.MCQ_Choices[3])||void 0===Se?void 0:Se.Is_Correct)),a.spinner.hide()})}},{key:"onDeleteQuestion",value:function(){var t=this;this.questionsInGrid.length>1?this.questionsInGrid.findIndex(function(o){return o.ExamQuestId==t.questionId})<this.questionsInGrid.length-1?this.openDeleteDialog():(this.questionsInGrid.pop(),this.notSavedQuestionData=null,this.selectedQuesIndex>0?this.goToPrevQuestion():this.goToNextQuestion()):0==this.questionId?this.toastr.warning("Exam.canNotdeleteThisQuestion"):this.openDeleteDialog()}},{key:"openDeleteDialog",value:function(){var a,t=this,o=null!==(a=sl.M.convertEditorValueIntoTextOnly(this.FormCtrl.exam_question_text.value))&&void 0!==a?a:this.translate.instant("Exam.selectedQuestion");this.dialog.open(R.F,{data:{msg:o,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(r){r&&t.removeExamQuestion(t.questionId)})}},{key:"removeExamQuestion",value:function(t){var a=this;this.spinner.show(),this.examService.deleteExamQuestion(t).subscribe(function(o){"Done"===o.returnString?(a.questionsInGrid.splice(a.selectedQuesIndex,1),0==a.questionsInGrid.length?a.pushNewQuestion():a.selectedQuesIndex>0?a.goToPrevQuestion():(--a.selectedQuesIndex,a.goToNextQuestion())):a.toastr.error(o.returnString),a.spinner.hide()})}},{key:"importFile",value:function(t){var a=this;this.uploadFileService.uploadFile(t).then(function(o){setTimeout(function(){a.FormCtrl.questionImage.setValue(o.FileAsBase64),a.questionFile=o,a.displayQuestionImageInEditor()},100)})}},{key:"displayQuestionImageInEditor",value:function(){if(this.removeEditorImg(),this.FormCtrl.questionImage.value){var t=document.createElement("img");t.src=this.FormCtrl.questionImage.value,t.alt="img",t.style.maxWidth="220px",t.style.height="160px",t.style.borderRadius="10px",t.style.margin="16px",t.id="question-editor-img";var a=document.querySelector(".ql-toolbar");a&&a.parentNode.insertBefore(t,a)}}},{key:"removeEditorImg",value:function(){var t=document.getElementById("question-editor-img");t&&t.remove()}},{key:"importOneFile",value:function(t){var a=this;this.uploadFileService.uploadFile(t).then(function(o){setTimeout(function(){a.answerOneFile=o,a.FormCtrl.answerOneImage.setValue(o.FileAsBase64)},100)})}},{key:"importTwoFile",value:function(t){var a=this;this.uploadFileService.uploadFile(t).then(function(o){setTimeout(function(){a.answerTwoFile=o,a.FormCtrl.answerTwoImage.setValue(o.FileAsBase64)},100)})}},{key:"importThreeFile",value:function(t){var a=this;this.uploadFileService.uploadFile(t).then(function(o){setTimeout(function(){a.answerThreeFile=o,a.FormCtrl.answerThreeImage.setValue(o.FileAsBase64)},100)})}},{key:"importFourFile",value:function(t){var a=this;this.uploadFileService.uploadFile(t).then(function(o){setTimeout(function(){a.answerFourFile=o,a.FormCtrl.answerFourImage.setValue(o.FileAsBase64)},100)})}},{key:"onSelectCorrect",value:function(t){var a,o,r,s,m,d,c,g,p,_,v,b,A,x,y,N;this.changeCurrentCorrectAnswer=!0,0===t&&(null===(a=this.FormCtrl.answerOneIsCorrect)||void 0===a||a.setValue(!0),null===(o=this.FormCtrl.answerTwoIsCorrect)||void 0===o||o.setValue(null),null===(r=this.FormCtrl.answerThreeIsCorrect)||void 0===r||r.setValue(null),null===(s=this.FormCtrl.answerFourIsCorrect)||void 0===s||s.setValue(null)),1===t&&(null===(m=this.FormCtrl.answerOneIsCorrect)||void 0===m||m.setValue(null),null===(d=this.FormCtrl.answerTwoIsCorrect)||void 0===d||d.setValue(!0),null===(c=this.FormCtrl.answerThreeIsCorrect)||void 0===c||c.setValue(null),null===(g=this.FormCtrl.answerFourIsCorrect)||void 0===g||g.setValue(null)),2===t&&(null===(p=this.FormCtrl.answerOneIsCorrect)||void 0===p||p.setValue(null),null===(_=this.FormCtrl.answerTwoIsCorrect)||void 0===_||_.setValue(null),null===(v=this.FormCtrl.answerThreeIsCorrect)||void 0===v||v.setValue(!0),null===(b=this.FormCtrl.answerFourIsCorrect)||void 0===b||b.setValue(null)),3===t&&(null===(A=this.FormCtrl.answerOneIsCorrect)||void 0===A||A.setValue(null),null===(x=this.FormCtrl.answerTwoIsCorrect)||void 0===x||x.setValue(null),null===(y=this.FormCtrl.answerThreeIsCorrect)||void 0===y||y.setValue(null),null===(N=this.FormCtrl.answerFourIsCorrect)||void 0===N||N.setValue(!0))}},{key:"resetFileInputs",value:function(){document.querySelectorAll('input[type="file"]').forEach(function(a){a.value=null}),this.questionFile=null,this.answerOneFile=null,this.answerTwoFile=null,this.answerThreeFile=null,this.answerFourFile=null}},{key:"removeQuestionImg",value:function(){this.FormCtrl.remove_image.setValue(!0),this.FormCtrl.questionImage.setValue(null),this.questionFile=null}},{key:"answerOneRemove_image",value:function(){this.FormCtrl.answerOneRemove_image.setValue(!0),this.FormCtrl.answerOneImage.setValue(null),this.answerOneFile=null}},{key:"answerTwoRemove_image",value:function(){this.FormCtrl.answerTwoRemove_image.setValue(!0),this.FormCtrl.answerTwoImage.setValue(null),this.answerTwoFile=null}},{key:"answerThreeRemove_image",value:function(){this.FormCtrl.answerThreeRemove_image.setValue(!0),this.FormCtrl.answerThreeImage.setValue(null),this.FormCtrl.answerThreeFile=null}},{key:"answerFourRemove_image",value:function(){this.FormCtrl.answerFourRemove_image.setValue(!0),this.FormCtrl.answerFourImage.setValue(null),this.answerFourFile=null}},{key:"incrementMark",value:function(){var t=Number(this.FormCtrl.questionMark.value)+1;this.FormCtrl.questionMark.setValue(t||1)}},{key:"decrementMark",value:function(){var t=Number(this.FormCtrl.questionMark.value)-1;this.FormCtrl.questionMark.setValue(t<=0?1:t)}},{key:"noOfInsertedAnswers",value:function(){var a,o,r,s,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],m=0;return t?(((null===(a=this.FormCtrl.answerOne)||void 0===a?void 0:a.value)||this.FormCtrl.answerOneImage.value)&&m++,((null===(o=this.FormCtrl.answerTwo)||void 0===o?void 0:o.value)||this.FormCtrl.answerTwoImage.value)&&m++,((null===(r=this.FormCtrl.answerThree)||void 0===r?void 0:r.value)||this.FormCtrl.answerThreeImage.value)&&m++,((null===(s=this.FormCtrl.answerFour)||void 0===s?void 0:s.value)||this.FormCtrl.answerFourImage.value)&&m++):((this.notSavedQuestionData.answerOne||this.notSavedQuestionData.answerOneImage)&&m++,(this.notSavedQuestionData.answerTwo||this.notSavedQuestionData.answerTwoImage)&&m++,(this.notSavedQuestionData.answerThree||this.notSavedQuestionData.answerThreeImage)&&m++,(this.notSavedQuestionData.answerFour||this.notSavedQuestionData.answerFourImage)&&m++),m}},{key:"onSelectQuestion",value:function(t,a){a!=this.questionId&&(0==this.questionId?(this.saveLastQuestion(),this.getQuestionForEditByID(a)):0==a&&this.questionId>0?this.isCurrentQuesHasNoUpdates()?(this.myForm.patchValue(this.notSavedQuestionData),this.displayQuestionImageInEditor(),this.currentQuestionToEdit=null):this.onSubmit(6):a>0&&this.questionId>0&&(this.isCurrentQuesHasNoUpdates()?this.getQuestionForEditByID(a):this.onSubmit(7,a)),this.questionId=a,this.selectedQuesIndex=t)}},{key:"handelPrevAndNext",value:function(t){this.isCurrentQuesHasNoUpdates()||!this.currentQuestionToEdit?t?(0==this.questionId&&this.saveLastQuestion(),this.goToPrevQuestion()):this.goToNextQuestion():this.onSubmit(t?1:2)}},{key:"saveLastQuestion",value:function(){var t,a,o;this.notSavedQuestionData=this.myForm.value;var r={ExamQuestId:0,mark:null===(t=this.FormCtrl.questionMark)||void 0===t?void 0:t.value,Text:null===(a=this.FormCtrl.exam_question_text)||void 0===a?void 0:a.value,ChoiceCounts:this.noOfInsertedAnswers(),Image:null===(o=this.FormCtrl.questionImage)||void 0===o?void 0:o.value,correctIndex:this.getCorrectAnswerIndexFromForm()};this.questionsInGrid[this.questionsInGrid.length-1]=r}},{key:"goToPrevQuestion",value:function(){var t=this.questionsInGrid[--this.selectedQuesIndex].ExamQuestId;this.getQuestionForEditByID(t)}},{key:"goToNextQuestion",value:function(){this.removeEditorImg();var t=this.questionsInGrid[++this.selectedQuesIndex].ExamQuestId;t>0?this.getQuestionForEditByID(t):this.goToNotSavedQuestion(!1)}},{key:"isCurrentQuesHasNoUpdates",value:function(){var t,a,o,r,s,m,d,c,g,p,_,v,b,A,x;return!!this.currentQuestionToEdit&&!(this.currentQuestionToEdit.mark!=(null===(t=this.FormCtrl.questionMark)||void 0===t?void 0:t.value)||this.currentQuestionToEdit.question_text!=(null===(a=this.FormCtrl.exam_question_text)||void 0===a?void 0:a.value)||(null===(o=this.currentQuestionToEdit.MCQ_Choices[0])||void 0===o?void 0:o.Text)!=(null===(r=this.FormCtrl.answerOne)||void 0===r?void 0:r.value)||(null===(s=this.currentQuestionToEdit.MCQ_Choices[1])||void 0===s?void 0:s.Text)!=(null===(m=this.FormCtrl.answerTwo)||void 0===m?void 0:m.value)||(null===(d=this.currentQuestionToEdit.MCQ_Choices[2])||void 0===d?void 0:d.Text)!=(null===(c=this.FormCtrl.answerThree)||void 0===c?void 0:c.value)||(null===(g=this.currentQuestionToEdit.MCQ_Choices[3])||void 0===g?void 0:g.Text)!=(null===(p=this.FormCtrl.answerFour)||void 0===p?void 0:p.value)||this.changeCurrentCorrectAnswer||(null===(_=this.FormCtrl.questionImage.value)||void 0===_?void 0:_.includes("data:image"))||(null===(v=this.FormCtrl.answerOneImage.value)||void 0===v?void 0:v.includes("data:"))||(null===(b=this.FormCtrl.answerTwoImage.value)||void 0===b?void 0:b.includes("data:"))||(null===(A=this.FormCtrl.answerThreeImage.value)||void 0===A?void 0:A.includes("data:"))||(null===(x=this.FormCtrl.answerFourImage.value)||void 0===x?void 0:x.includes("data:")))}},{key:"addNewQuestion",value:function(){this.notSavedQuestionData?0==this.questionId?this.onSubmit(4):this.questionId>0&&(this.isCurrentQuesHasNoUpdates()?this.goToNotSavedQuestion(!0):this.onSubmit(3)):this.isCurrentQuesHasNoUpdates()?(this.pushNewQuestion(),this.currentQuestionToEdit=null,this.questionId=0,this.clearForm(),this.FormCtrl.questionMark.setValue(1)):this.onSubmit(4)}},{key:"saveExam",value:function(){this.notSavedQuestionData?0==this.questionId?this.onSubmit(5):this.questionId>0&&(this.isCurrentQuesHasNoUpdates()?this.goToNotSavedQuestion(!0):this.onSubmit(3)):this.isCurrentQuesHasNoUpdates()?this.router.navigate(["/dashboard/exams-setup/survey/".concat(this.subjectId,"/index")],{queryParams:{functionId:this.functionId,parentId:this.parentId}}):this.onSubmit(5)}},{key:"openSubmitDialog",value:function(){var t=this;this.dialog.open(ul.H,{minWidth:"30vw"}).afterClosed().subscribe(function(a){a&&t.saveExam()})}},{key:"pushNewQuestion",value:function(){this.removeEditorImg(),this.questionsInGrid.push({ExamQuestId:0,Image:null,Text:null,correctIndex:null,mark:1,ChoiceCounts:null}),this.selectedQuesIndex=this.questionsInGrid.length-1}},{key:"getCorrectAnswerIndexFromForm",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(t){if(this.FormCtrl.answerOneIsCorrect.value)return 0;if(this.FormCtrl.answerTwoIsCorrect.value)return 1;if(this.FormCtrl.answerThreeIsCorrect.value)return 2;if(this.FormCtrl.answerFourIsCorrect.value)return 3}else{if(this.notSavedQuestionData.answerOneIsCorrect)return 0;if(this.notSavedQuestionData.answerTwoIsCorrect)return 1;if(this.notSavedQuestionData.answerThreeIsCorrect)return 2;if(this.notSavedQuestionData.answerFourIsCorrect)return 3}}},{key:"goToNotSavedQuestion",value:function(t){this.selectedQuesIndex=this.questionsInGrid.length-1,this.myForm.patchValue(this.notSavedQuestionData),this.displayQuestionImageInEditor(),this.currentQuestionToEdit=null,this.questionId=0,t&&this.onSubmit()}},{key:"clearForm",value:function(){this.myForm.reset(),this.FormCtrl.questionTypeId.setValue(2),this.resetFileInputs(),this.submitted=!1}},{key:"getEditorWidth",value:function(){var t,a;this.editorWidth=(null===(t=this.editor)||void 0===t?void 0:t.nativeElement)?this.editor.nativeElement.offsetWidth:0,this.editorFooterWidth=null===(a=this.editor.nativeElement.querySelector(".ql-toolbar"))||void 0===a?void 0:a.offsetWidth}},{key:"onWindowResize",value:function(t){this.getEditorWidth()}},{key:"ifImageNeedFileService",value:function(t){return!t.startsWith("data:")}}]),l}();return n.\u0275fac=function(i){return new(i||n)(e.Y36(I.gz),e.Y36(u.qu),e.Y36(ee.R),e.Y36(Y.e),e.Y36(Qe.K),e.Y36(E.t2),e.Y36(ml.f),e.Y36(Ge.T),e.Y36(I.F0),e.Y36(k.uw),e.Y36(D.sK))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-sub-question"]],viewQuery:function(i,t){var a;1&i&&e.Gf(pl,5),2&i&&e.iGM(a=e.CRH())&&(t.editor=a.first)},hostBindings:function(i,t){1&i&&e.NdJ("resize",function(o){return t.onWindowResize(o)},!1,e.Jf7)},decls:53,vars:24,consts:[[1,"row","add-questions",2,"max-height","87.5vh"],[1,"col-md-7","col-12"],[1,"admin-index-card","add-question"],[1,"px-2"],["title","labels.CreateExam","subTitle","Exam.writeQuestionsTextAndMarkCorrectAnswer"],[1,"card-container"],[2,"padding","0 0.75rem"],[3,"formGroup"],[1,"row"],[1,"col-12","mbottom-24"],[1,"editor-container"],["editor",""],[1,"editor-delete"],[1,"fa","fa-trash","font-size-15",3,"click"],["label","labels.Question","placeholder","Exam.writeTheQuestion",3,"control","submitted","numberWithLabel"],[1,"editor-footer"],[1,"question-img"],["width","20","height","16",1,"input-img-icon",3,"src","click"],["hidden","","type","file","accept","image/*","name","questionImage",1,"form-control",3,"change"],["questionImage",""],[1,"number-btns",3,"dir"],["appearance","outline"],["matPrefix","",3,"click"],["matInput","","type","number",3,"formControl"],["matSuffix","",3,"click"],[3,"control","submitted"],[4,"ngIf"],[1,"pt-0"],["class","dark-blue-outline-btn radius-btn float-left mbottom-2",3,"click",4,"ngIf"],["class","dark-blue-btn radius-btn float-right mbottom-2",3,"click",4,"ngIf"],[1,"col-md-5","col-12"],[1,"admin-index-card","questions"],["title","labels.Questions","subTitle","Exam.haveCompleteOverview"],["class","ques-view",3,"active","click",4,"ngFor","ngForOf"],[1,"mtop-13","mbottom-13"],[1,"dashed-btn",3,"click"],[1,"orange-btn","radius-btn",3,"click"],[1,"text-btn"],[1,"col-12"],[1,"input-with-radio"],[1,"answer-img"],["width","20","height","16","class","input-img-icon",3,"src","click",4,"ngIf"],["hidden","","type","file","accept","image/*","name","answerOneImage",1,"form-control",3,"change"],["fileInput1",""],["class","card-img","width","72","height","55",3,"src","click",4,"ngIf"],["placeholder","labels.Answer1",3,"control","submitted"],["class","fas fa-check",4,"ngIf"],["hidden","","type","file","accept","image/*","name","answerTwoImage",1,"form-control",3,"change"],["fileInput2",""],["placeholder","labels.Answer2",3,"control","submitted"],["hidden","","type","file","accept","image/*","name","answerThreeImage",1,"form-control",3,"change"],["fileInput3",""],["placeholder","labels.Answer3",3,"control","submitted"],["hidden","","type","file","accept","image/*","name","answerFourImage",1,"form-control",3,"change"],["fileInput4",""],["placeholder","labels.Answer4",3,"control","submitted"],["width","72","height","55",1,"card-img",3,"src","click"],[1,"fas","fa-check"],[1,"dark-blue-outline-btn","radius-btn","float-left","mbottom-2",3,"click"],[1,"fas",3,"ngClass"],[1,"dark-blue-btn","radius-btn","float-right","mbottom-2",3,"click"],[1,"ques-view",3,"click"],[1,"no-ques"],[1,"text-degree"],["class","ques-img",4,"ngIf"],[1,"ques-text",3,"innerHTML"],[1,"ques-degree"],[1,"ques-answers"],[3,"onlyOne","correct",4,"ngFor","ngForOf"],[1,"icon"],[1,"ques-img"],["height","38","width","50",3,"src"],["height","18","width","18",3,"src"]],template:function(i,t){if(1&i){var a=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card",2),e.TgZ(3,"mat-card-title",3),e._UZ(4,"page-title",4),e.qZA(),e.TgZ(5,"div",5),e.TgZ(6,"div",6),e.TgZ(7,"form",7),e.TgZ(8,"div",8),e.TgZ(9,"div",9),e.TgZ(10,"div",10,11),e.TgZ(12,"div",12),e.TgZ(13,"i",13),e.NdJ("click",function(){return t.onDeleteQuestion()}),e.qZA(),e.qZA(),e._UZ(14,"app-text-editor",14),e.TgZ(15,"div",15),e.TgZ(16,"div",16),e.TgZ(17,"img",17),e.NdJ("click",function(){return e.CHM(a),e.MAs(19).click()}),e.qZA(),e.TgZ(18,"input",18,19),e.NdJ("change",function(r){return t.importFile(r)}),e.qZA(),e.qZA(),e.TgZ(20,"div",20),e.TgZ(21,"mat-label"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"mat-form-field",21),e.TgZ(25,"mat-icon",22),e.NdJ("click",function(){return t.decrementMark()}),e._uU(26," remove_circle "),e.qZA(),e._UZ(27,"input",23),e.TgZ(28,"mat-icon",24),e.NdJ("click",function(){return t.incrementMark()}),e._uU(29," add_circle "),e.qZA(),e.TgZ(30,"mat-hint"),e._UZ(31,"input-validation-msg",25),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(32,ql,37,20,"ng-container",26),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"mat-card-actions",27),e.YNc(34,yl,5,4,"button",28),e.YNc(35,Fl,5,4,"button",29),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",30),e.TgZ(37,"mat-card",31),e.TgZ(38,"mat-card-title",3),e._UZ(39,"page-title",32),e.qZA(),e.TgZ(40,"div",5),e.TgZ(41,"div",6),e.TgZ(42,"table"),e.YNc(43,Jl,3,4,"tr",33),e.qZA(),e.TgZ(44,"div",34),e.TgZ(45,"button",35),e.NdJ("click",function(){return t.addNewQuestion()}),e._uU(46),e.ALo(47,"translate"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(48,"mat-card-actions",27),e.TgZ(49,"button",36),e.NdJ("click",function(){return t.openSubmitDialog()}),e.TgZ(50,"span",37),e._uU(51),e.ALo(52,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}2&i&&(e.xp6(7),e.Q6J("formGroup",t.myForm),e.xp6(7),e.Q6J("control",t.FormCtrl.exam_question_text)("submitted",t.submitted)("numberWithLabel",t.selectedQuesIndex+1),e.xp6(1),e.Udp("width",t.editorWidth-t.editorFooterWidth-60,"px"),e.xp6(2),e.Q6J("src",t.svgManager.img_icon,e.LSH),e.xp6(3),e.Q6J("dir",t.languageService.isArabic?"rtl":"ltr"),e.xp6(2),e.Oqu(e.lcZ(23,18,"labels.Degree")),e.xp6(5),e.Q6J("formControl",t.FormCtrl.questionMark),e.xp6(4),e.Q6J("control",t.FormCtrl.questionMark)("submitted",t.submitted),e.xp6(1),e.Q6J("ngIf",2==(null==t.FormCtrl.questionTypeId?null:t.FormCtrl.questionTypeId.value)),e.xp6(2),e.Q6J("ngIf",t.selectedQuesIndex>0),e.xp6(1),e.Q6J("ngIf",t.selectedQuesIndex<t.questionsInGrid.length-1),e.xp6(8),e.Q6J("ngForOf",t.questionsInGrid),e.xp6(3),e.hij(" ",e.lcZ(47,20,"addNewQuestion")," "),e.xp6(5),e.hij(" ",e.lcZ(52,22,"Exam.saveExam")," "))},directives:[Z.a8,Z.n5,Oe.T,u._Y,u.JL,u.sg,dl.d,Ie.Lv,C.hX,C.KE,_e.Hw,C.qo,L.Nt,u.wV,u.Fj,u.JJ,u.oH,C.R9,C.bx,cl.p,T.O5,Z.hq,T.sg,Me.a,T.mk],pipes:[D.X$],styles:['.admin-index-card.add-question{padding:21px 36px 12px 20px!important}  .admin-index-card.add-question .editor-container{padding:10px;border-radius:10px;background-color:#437a9f0d;position:relative}  .admin-index-card.add-question .editor-container .editor-delete{position:absolute;top:10px;right:10px;cursor:pointer}  .admin-index-card.add-question .editor-container .editor-delete i{color:#d1031b}  .admin-index-card.add-question .editor-container .text-editor .input-label{margin:0 16px;font-family:Roboto-Bold,sans-serif!important;font-size:13.5px}  .admin-index-card.add-question .editor-container .text-editor:before{content:"";position:absolute;height:calc(100% - 20px);width:3px;flex-grow:0;border-radius:2px;background-color:#e86820}  .admin-index-card.add-question .editor-container .text-editor .ql-container.ql-snow{border:none;margin:-21px 16px 0}  .admin-index-card.add-question .editor-container .text-editor .ql-container.ql-snow .ql-editor{padding:3px 0;font-family:Roboto-Bold,sans-serif!important;font-size:13.5px;color:#555}  .admin-index-card.add-question .editor-container .text-editor .ql-container.ql-snow .ql-editor p:first-of-type{text-indent:80px}  .admin-index-card.add-question .editor-container .text-editor .ql-toolbar.ql-snow{border:none;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;background-color:#fff;border-radius:0;margin:0 16px;padding:3px 0}  .admin-index-card.add-question .input-with-radio{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:0 10px;border-radius:10px;box-shadow:0 3px 4px #0000000d;border:2px solid #ddd;background-color:#fafafa;margin-bottom:16px}  .admin-index-card.add-question .input-with-radio app-input{flex-grow:1}  .admin-index-card.add-question .input-with-radio app-input .mat-form-field{margin:0;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}  .admin-index-card.add-question .input-with-radio app-input .mat-form-field .mat-form-field-outline-start,   .admin-index-card.add-question .input-with-radio app-input .mat-form-field .mat-form-field-outline-end{border:none!important}  .admin-index-card.add-question .input-with-radio app-input .mat-form-field .mat-form-field-wrapper{margin:0;padding:0}  .admin-index-card.add-question .input-with-radio app-input .mat-form-field .mat-form-field-infix{padding:13px 0 8px!important}  .admin-index-card.add-question .input-with-radio app-input .mat-input-element::-moz-placeholder{font-size:15px;line-height:1.66;letter-spacing:normal;color:#999}  .admin-index-card.add-question .input-with-radio app-input .mat-input-element::placeholder{font-size:15px;line-height:1.66;letter-spacing:normal;color:#999}  .admin-index-card.add-question .input-with-radio app-input .mat-input-element{font-size:15px;line-height:1.66;letter-spacing:normal;color:#555}  .admin-index-card.add-question .input-with-radio .mat-radio-container,   .admin-index-card.add-question .input-with-radio .mat-radio-outer-circle{width:14px;height:14px}  .admin-index-card.add-question .input-with-radio:has(.fa-check){border-color:#258f6e}  .admin-index-card.add-question .input-with-radio .fa-check{color:#258f6e;font-size:15px;position:relative;right:8px}  .admin-index-card.add-question .input-with-radio .answer-img{margin:12px 2px 11px 6px}  .admin-index-card.add-question .answer-img .input-img-icon,   .admin-index-card.add-question .question-img .input-img-icon{cursor:pointer}  .admin-index-card.add-question .answer-img .card-img,   .admin-index-card.add-question .question-img .card-img{border-radius:5px;cursor:pointer;max-width:72px}  .admin-index-card.add-question .editor-footer{position:absolute;right:10px;bottom:10px;display:flex;align-items:center;justify-content:space-between;gap:15px}  .admin-index-card.add-question .editor-footer .question-img{margin-top:-4px}  .admin-index-card.add-question .number-btns{color:#437a9f;display:flex;align-items:center;gap:10px}  .admin-index-card.add-question .number-btns .mat-form-field{margin:0;height:auto;display:inline-block!important}  .admin-index-card.add-question .number-btns .mat-form-field .mat-form-field-infix{padding:6px 0!important}  .admin-index-card.add-question .number-btns .mat-form-field .mat-form-field-flex{padding:0 0 0 3px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;min-width:30px;max-width:75px;height:auto}  .admin-index-card.add-question .number-btns .mat-form-field .mat-form-field-prefix,   .admin-index-card.add-question .number-btns .mat-form-field .mat-form-field-suffix{top:5px!important;cursor:pointer}  .admin-index-card.add-question .number-btns .mat-form-field .mat-form-field-outline-start,   .admin-index-card.add-question .number-btns .mat-form-field .mat-form-field-outline-end{border:none!important;background-color:#fff}  .admin-index-card.add-question .number-btns .mat-form-field .mat-form-field-wrapper{margin:0;padding:0}  .admin-index-card.add-question .number-btns mat-icon.mat-icon{font-size:125%}  .admin-index-card.add-question .number-btns .mat-form-field-subscript-wrapper{position:absolute;left:-55px;width:128px;top:21px;padding:0}  .admin-index-card.add-question .number-btns input::-webkit-outer-spin-button,   .admin-index-card.add-question .number-btns input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}  .admin-index-card.add-question .number-btns input[type=number]{-moz-appearance:textfield;text-align:center;color:#193141}  .admin-index-card.add-question .mat-card-actions .radius-btn{display:flex;align-items:center;gap:10px}  .admin-index-card.questions{padding:21px 8px!important}  .admin-index-card.questions .dashed-btn{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;min-height:48px;padding:12.5px 30px;box-shadow:0 1.9px 11.9px #305d7c33}  .admin-index-card.questions table{border-collapse:separate;border-spacing:0 3px}  .admin-index-card.questions tr.ques-view{min-height:46px;cursor:pointer;border-radius:5px}  .admin-index-card.questions tr.ques-view td{padding:7px 15px 7px 0;border:1px solid #eee;border-left:none;border-right:none}  .admin-index-card.questions tr.ques-view td:first-child{padding-right:0!important;width:1%;border-radius:5px 0 0 5px}  .admin-index-card.questions tr.ques-view td:last-child{border-radius:0 5px 5px 0}  .admin-index-card.questions tr.ques-view .no-ques{width:28px;height:32px;font-size:16px;line-height:1.4;letter-spacing:.4px;display:flex;align-items:center;justify-content:center;border:1px solid #437a9f;border-radius:50%;color:#437a9f;font-family:agrandirBold,serif!important;background-color:#fff;margin:0 15px 0 3px;padding-top:3px}  .admin-index-card.questions tr.ques-view .text-degree{display:flex;align-items:center;justify-content:space-between;gap:15px;font-family:Roboto-Bold,sans-serif!important;font-size:12px;line-height:1.4;letter-spacing:.3px}  .admin-index-card.questions tr.ques-view .text-degree .ques-text{color:#437a9f;flex-grow:1}  .admin-index-card.questions tr.ques-view .text-degree .ques-text p{margin:0}  .admin-index-card.questions tr.ques-view .text-degree .ques-img{max-width:50px}  .admin-index-card.questions tr.ques-view .text-degree .ques-degree{color:#193141}  .admin-index-card.questions tr.ques-view .ques-answers{color:#fff;display:flex;align-items:center;gap:5px}  .admin-index-card.questions tr.ques-view .ques-answers span{background-color:#437a9f;padding:3px 8px;border-radius:2px}  .admin-index-card.questions tr.ques-view .ques-answers span:first-child{border-radius:5px 1px 1px 5px}  .admin-index-card.questions tr.ques-view .ques-answers span:last-child{border-radius:1px 5px 5px 1px}  .admin-index-card.questions tr.ques-view .ques-answers span.onlyOne{border-radius:5px}  .admin-index-card.questions tr.ques-view .ques-answers span.correct{background-color:#258f6e}  .admin-index-card.questions tr.ques-view .icon{color:#437a9f;font-size:13px}  .admin-index-card.questions tr.ques-view.active td{background-color:#437a9f}  .admin-index-card.questions tr.ques-view.active .text-degree .ques-degree,   .admin-index-card.questions tr.ques-view.active .text-degree .ques-text{color:#fff}  .admin-index-card.questions tr.ques-view.active .ques-answers span:not(.correct){background-color:#fff;color:#437a9f}  .admin-index-card.questions .mat-card-actions{display:flex;align-items:center;justify-content:center}  .admin-index-card.questions .mat-card-actions .radius-btn{min-width:270px}  .admin-index-card.questions,   .admin-index-card.add-question{min-height:84.5vh;display:flex;flex-direction:column}  .admin-index-card.questions .mat-card-title,   .admin-index-card.add-question .mat-card-title{margin-bottom:13.5px!important}  .admin-index-card.questions .card-container,   .admin-index-card.add-question .card-container{display:flex;flex-direction:column;justify-content:space-between;flex-grow:1;overflow:auto;overflow-x:hidden;padding-right:36px;margin-right:-36px}  .admin-index-card.questions .subTitle,   .admin-index-card.add-question .subTitle{font-size:12.5px;font-weight:500;line-height:1.66;letter-spacing:normal;color:#555}  .admin-index-card.questions .mat-card-actions,   .admin-index-card.add-question .mat-card-actions{padding:0 15px;margin:0}@media (max-width: 455px){.admin-index-card.add-question[_ngcontent-%COMP%]   .editor-container[_ngcontent-%COMP%]{padding-bottom:37px}.admin-index-card.add-question[_ngcontent-%COMP%]   .editor-footer[_ngcontent-%COMP%]{right:0px;left:30px;bottom:5px;width:calc(100% - 40px)!important}}']}),n}(),Yl=f(2222),Re=f(1079);function Ll(n,l){if(1&n&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.question_group_ar_name),e.xp6(1),e.hij(" ",i.question_group_ar_name," ")}}function jl(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Vl(n,l){if(1&n&&(e.TgZ(0,"mat-hint",29),e.YNc(1,jl,3,3,"span",30),e.qZA()),2&n){var i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==i.examGroupCtrl||null==i.examGroupCtrl.errors?null:i.examGroupCtrl.errors.required)}}function Pl(n,l){if(1&n&&(e.TgZ(0,"mat-option",28),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.Q6J("value",i.question_head_ar_name),e.xp6(1),e.hij(" ",i.question_head_ar_name," ")}}function Gl(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Ol(n,l){if(1&n&&(e.TgZ(0,"mat-hint",29),e.YNc(1,Gl,3,3,"span",30),e.qZA()),2&n){var i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==i.examHeaderCtrl||null==i.examHeaderCtrl.errors?null:i.examHeaderCtrl.errors.required)}}function Ml(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){return e.CHM(i),e.oxw(2).onSubmit()}),e._UZ(1,"i",32),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.Add")," "))}function Bl(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){return e.CHM(i),e.oxw(2).onAddExamGroupHeader()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.AddQuestion")," "))}function Hl(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){return e.CHM(i),e.oxw(2).editExamGroupHead()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.UpdateQuestion")," "))}function Rl(n,l){if(1&n&&(e.TgZ(0,"div",2),e.TgZ(1,"div",14),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.TgZ(7,"mat-card-content",15),e.TgZ(8,"form",16),e.TgZ(9,"div",2),e.TgZ(10,"div",3),e.TgZ(11,"mat-form-field",17),e.TgZ(12,"mat-label"),e._uU(13),e.ALo(14,"translate"),e.qZA(),e._UZ(15,"input",18),e.TgZ(16,"mat-autocomplete",null,19),e.YNc(18,Ll,2,2,"mat-option",20),e.ALo(19,"async"),e.qZA(),e.YNc(20,Vl,2,1,"mat-hint",21),e.qZA(),e.qZA(),e.TgZ(21,"div",3),e.TgZ(22,"mat-form-field",17),e.TgZ(23,"mat-label"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e._UZ(26,"input",22),e.TgZ(27,"mat-autocomplete",null,23),e.YNc(29,Pl,2,2,"mat-option",20),e.ALo(30,"async"),e.qZA(),e.YNc(31,Ol,2,1,"mat-hint",21),e.qZA(),e.qZA(),e.TgZ(32,"div",14),e.TgZ(33,"mat-form-field",17),e.TgZ(34,"mat-label"),e._uU(35),e.ALo(36,"translate"),e.qZA(),e._UZ(37,"textarea",24),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"mat-card-actions",25),e.YNc(39,Ml,4,3,"button",26),e.YNc(40,Bl,3,3,"button",27),e.YNc(41,Hl,3,3,"button",27),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){var i=e.MAs(17),t=e.MAs(28),a=e.oxw();e.xp6(5),e.Oqu(e.lcZ(6,14,"labels.addSurveyGroups")),e.xp6(3),e.Q6J("formGroup",a.GroupHeadersForm),e.xp6(5),e.hij(" ",e.lcZ(14,16,"labels.\u064eQuestionNumber")," "),e.xp6(2),e.Q6J("matAutocomplete",i),e.xp6(3),e.Q6J("ngForOf",e.lcZ(19,18,a.filteredExamGroups)),e.xp6(2),e.Q6J("ngIf",(null==a.examGroupCtrl?null:a.examGroupCtrl.invalid)&&((null==a.examGroupCtrl?null:a.examGroupCtrl.touched)||a.submitted)),e.xp6(4),e.Oqu(e.lcZ(25,20,"labels.QuestionHeader")),e.xp6(2),e.Q6J("matAutocomplete",t),e.xp6(3),e.Q6J("ngForOf",e.lcZ(30,22,a.filteredExamHeaders)),e.xp6(2),e.Q6J("ngIf",(null==a.examHeaderCtrl?null:a.examHeaderCtrl.invalid)&&((null==a.examHeaderCtrl?null:a.examHeaderCtrl.touched)||a.submitted)),e.xp6(4),e.Oqu(e.lcZ(36,24,"labels.\u064eQuestionContent")),e.xp6(4),e.Q6J("ngIf",0==a.examId),e.xp6(1),e.Q6J("ngIf",a.GroupsHeadersList.length>0&&!a.editGroupHeaderMode&&a.examId>0),e.xp6(1),e.Q6J("ngIf",a.editGroupHeaderMode)}}function $l(n,l){1&n&&(e.TgZ(0,"th",47),e._uU(1,"#"),e.qZA())}function zl(n,l){if(1&n&&(e.TgZ(0,"td",48),e._uU(1),e.qZA()),2&n){var i=l.index;e.xp6(1),e.hij(" ",i+1," ")}}function Wl(n,l){1&n&&(e.TgZ(0,"th",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.\u064eQuestionNumber")," "))}function Xl(n,l){if(1&n&&(e.TgZ(0,"td",48),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.xp6(1),e.hij(" ",i.questionNumber," ")}}function Kl(n,l){1&n&&(e.TgZ(0,"th",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.QuestionHeader")," "))}function er(n,l){if(1&n&&(e.TgZ(0,"td",48),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.xp6(1),e.hij(" ",i.questionType," ")}}function tr(n,l){1&n&&(e.TgZ(0,"th",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.\u064eQuestionContent")," "))}function nr(n,l){if(1&n&&(e.TgZ(0,"td",48),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.xp6(1),e.hij(" ",i.question_title," ")}}function ir(n,l){1&n&&(e.TgZ(0,"th",47),e._uU(1," actions "),e.qZA())}function ar(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"a",53),e.NdJ("click",function(){e.CHM(i);var a=e.oxw(2).$implicit;return e.oxw(2).getExamHeadById(a)}),e.ALo(1,"translate"),e._UZ(2,"i",54),e.qZA()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"General.Edit"))}function or(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"a",55),e.NdJ("click",function(){e.CHM(i);var a=e.oxw(2).$implicit;return e.oxw(2).openDeleateDialog(a)}),e.ALo(1,"translate"),e._UZ(2,"i",56),e.qZA()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"General.Delete"))}function lr(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"a",57),e.NdJ("click",function(){e.CHM(i);var a=e.oxw(2).$implicit;return e.oxw(2).addSubQuestionDialog(a)}),e._UZ(1,"i",58),e.qZA()}}function rr(n,l){if(1&n&&(e.ynx(0),e.YNc(1,ar,3,3,"a",50),e.YNc(2,or,3,3,"a",51),e.YNc(3,lr,2,0,"a",52),e.BQk()),2&n){var i=l.$implicit;e.xp6(1),e.Q6J("ngIf","EditGroup"===i.functionName),e.xp6(1),e.Q6J("ngIf","DeleteGroup"===i.functionName),e.xp6(1),e.Q6J("ngIf","addSubQuestion"===i.functionName)}}function sr(n,l){if(1&n&&(e.TgZ(0,"td",48),e.YNc(1,rr,4,3,"ng-container",49),e.qZA()),2&n){var i=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",i.rowFunctions)}}function ur(n,l){1&n&&e._UZ(0,"tr",59)}function mr(n,l){1&n&&e._UZ(0,"tr",60)}function dr(n,l){if(1&n&&(e.TgZ(0,"tr",61),e.TgZ(1,"td",62),e._uU(2),e.qZA(),e.qZA()),2&n){var i=e.oxw(2);e.xp6(2),e.hij(' No data matching the filter "',i.input.value,'" ')}}var cr=function(){return[10]};function pr(n,l){if(1&n&&(e.TgZ(0,"div",2),e.TgZ(1,"div",14),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-card-content",15),e.TgZ(7,"div",2),e.TgZ(8,"div",14),e.TgZ(9,"div",34),e.TgZ(10,"table",35),e.ynx(11,36),e.YNc(12,$l,2,0,"th",37),e.YNc(13,zl,2,1,"td",38),e.BQk(),e.ynx(14,39),e.YNc(15,Wl,3,3,"th",37),e.YNc(16,Xl,2,1,"td",38),e.BQk(),e.ynx(17,40),e.YNc(18,Kl,3,3,"th",37),e.YNc(19,er,2,1,"td",38),e.BQk(),e.ynx(20,41),e.YNc(21,tr,3,3,"th",37),e.YNc(22,nr,2,1,"td",38),e.BQk(),e.ynx(23,42),e.YNc(24,ir,2,0,"th",37),e.YNc(25,sr,2,1,"td",38),e.BQk(),e.YNc(26,ur,1,0,"tr",43),e.YNc(27,mr,1,0,"tr",44),e.YNc(28,dr,3,1,"tr",45),e.qZA(),e._UZ(29,"mat-paginator",46),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){var i=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,5,"labels.QuestionsGroup"),""),e.xp6(6),e.Q6J("dataSource",i.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",i.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(7,cr))}}var we=function(){var n=function(){function l(i,t,a,o,r,s,m,d,c,g){var p=this;(0,U.Z)(this,l),this.location=i,this.fb=t,this.authserv=a,this.examService=o,this.route=r,this.router=s,this.msg=m,this.dialog=d,this.datePipe=c,this.spinner=g,this.examId=0,this.isHasUpdate=new e.vpe,this.examGroups=[],this.examHeaders=[],this.GroupsHeadersList=[],this.type=5,this.examGroupHeaderIdToEdit=0,this.displayedColumns=["#","questionNumber","questionType","question_title","actions"],this.submitted=!1,this.GroupHeadsubmitted=!1,this.editGroupHeaderMode=!1,this.examGroupHeaderId=0,this.svgManager=new Pe.E,this.hasUpdate=!1,this.examId>0&&this.getExamById(),this.route.queryParamMap.subscribe(function(_){p.functionId=Number(_.get("functionId")),p.parentId=Number(_.get("parentId")),p.functionId&&p.authserv.getUserRowFunctions(p.functionId).subscribe(function(v){v&&(p.rowFunctions=v)})})}return(0,S.Z)(l,[{key:"subjectIdCtrl",get:function(){return this.myForm.get("subjectId")}},{key:"teacherUserIdCtrl",get:function(){return this.myForm.get("teacherUserId")}},{key:"examTypeIdCtrl",get:function(){return this.myForm.get("examTypeId")}},{key:"examNameCtrl",get:function(){return this.myForm.get("examName")}},{key:"examHoursCtrl",get:function(){return this.myForm.get("examHours")}},{key:"examMinutesCtrl",get:function(){return this.myForm.get("examMinutes")}},{key:"fromDateCtrl",get:function(){return this.myForm.get("fromDate")}},{key:"toDateCtrl",get:function(){return this.myForm.get("toDate")}},{key:"formHourCtrl",get:function(){return this.myForm.get("formHour")}},{key:"toHoursCtrl",get:function(){return this.myForm.get("toHours")}},{key:"examGroupCtrl",get:function(){return this.GroupHeadersForm.get("examGroup")}},{key:"examHeaderCtrl",get:function(){return this.GroupHeadersForm.get("examHeader")}},{key:"examContentCtrl",get:function(){return this.GroupHeadersForm.get("examContent")}},{key:"ngOnChanges",value:function(t){this.examId>0&&this.getExamById()}},{key:"ngOnInit",value:function(){var t,a;this.myForm=this.fb.group({examName:["",[u.kI.required,q.D.whiteSpace]],examHours:["",[u.kI.required,q.D.minusNum]],examMinutes:["",[u.kI.required,q.D.minusNum]],fromDate:[""],toDate:[""],formHour:[""],toHours:[""]}),this.GroupHeadersForm=this.fb.group({examGroup:["\u0627\u0644\u0633\u0624\u0627\u0644 \u0627\u0644\u0627\u0648\u0644",u.kI.required],examHeader:["\u0627\u062e\u062a\u0631  \u0627\u0644\u0625\u062c\u0627\u0628\u0629 \u0627\u0644\u0635\u062d\u064a\u062d\u0629",u.kI.required],examContent:[null]}),this.EduCompId=this.authserv.getEduCompId(),this.branchId=this.authserv.getBranchId(),null===(t=this.subjectIdCtrl)||void 0===t||t.disable(),null===(a=this.teacherUserIdCtrl)||void 0===a||a.disable(),this.getAllQuestionGroups(),this.getAllQuestionHeaders()}},{key:"FormCtrl",get:function(){return this.myForm.controls}},{key:"ngAfterViewInit",value:function(){var t=this;this.authserv.EduCompId.subscribe(function(a){t.EduCompId=a.EduCompId}),this.authserv.branchId.subscribe(function(a){t.branchId=a.branchId}),this.examId>0&&this.getExamById(),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"filter_question_group",value:function(t){var a=t.toLowerCase();return this.examGroups.filter(function(o){return o.question_group_ar_name.toLowerCase().includes(a)})}},{key:"filter_question_header",value:function(t){var a=t.toLowerCase();return this.examHeaders.filter(function(o){return o.question_head_ar_name.toLowerCase().includes(a)})}},{key:"getExamById",value:function(){var t=this;this.spinner.show(),this.examService.getExamById(this.examId).subscribe(function(a){var o,r,s,m,d,c,g,p;if(a){null===(o=t.toHoursCtrl)||void 0===o||o.setValue(null==a?void 0:a.toHour),null===(r=t.examNameCtrl)||void 0===r||r.setValue(null==a?void 0:a.exam_ar_name),t.exam_ar_name=null==a?void 0:a.exam_ar_name,null===(s=t.formHourCtrl)||void 0===s||s.setValue(null==a?void 0:a.fromHour);var _=a.exam_period_minute%60,v=(a.exam_period_minute-_)/60;null===(m=t.examMinutesCtrl)||void 0===m||m.setValue(_),null===(d=t.examHoursCtrl)||void 0===d||d.setValue(v),null!=(null==a?void 0:a.Subject_ID)&&null==(null==a?void 0:a.Subject_ID)&&1==a.quiz&&(null===(c=t.examTypeIdCtrl)||void 0===c||c.setValue(4)),null===(g=t.fromDateCtrl)||void 0===g||g.setValue(a.Avilable_Date_From),null===(p=t.toDateCtrl)||void 0===p||p.setValue(a.Avilable_Date_To)}t.spinner.hide()})}},{key:"getAllGroupHeaderByExamId",value:function(){var t=this;this.examService.getAllGroupHeaderByExamId(this.examId).subscribe(function(a){a&&(t.GroupsHeadersList=a,t.dataSource=new h.by(a),t.itemsCount=a.length)})}},{key:"getAllQuestionGroups",value:function(){var t=this;this.examService.getAllQuestionGroups().subscribe(function(a){a&&(t.examGroups=a,t.filteredExamGroups=t.examGroupCtrl.valueChanges.pipe((0,je.O)(""),(0,Ve.U)(function(o){return t.filter_question_group(o||"")})))})}},{key:"getAllQuestionHeaders",value:function(){var t=this;this.examService.getAllQuestionHeaders().subscribe(function(a){a&&(t.examHeaders=a,t.filteredExamHeaders=t.examHeaderCtrl.valueChanges.pipe((0,je.O)(""),(0,Ve.U)(function(o){return t.filter_question_header(o||"")})))})}},{key:"onSubmit",value:function(){var t,a,o,r,s,m,d={id:this.examId,Avilable_Date_From:this.datePipe.transform(null===(t=this.fromDateCtrl)||void 0===t?void 0:t.value),Avilable_Date_To:this.datePipe.transform(this.toDateCtrl.value),EduCompId:this.EduCompId,exam_ar_name:null===(a=this.examNameCtrl)||void 0===a?void 0:a.value,fromHour:null===(o=this.formHourCtrl)||void 0===o?void 0:o.value,Subject_ID:this.subjectId,toHour:null===(r=this.toHoursCtrl)||void 0===r?void 0:r.value,exam_type_id:this.type},c={exam_hour:null===(s=this.examHoursCtrl)||void 0===s?void 0:s.value,exam_minute:null===(m=this.examMinutesCtrl)||void 0===m?void 0:m.value,exam:d};this.addExam(c)}},{key:"addExam",value:function(t){var a=this,o=this.GroupHeadersForm.valid;this.submitted=!0,0!=this.examId||o?this.myForm.valid?(this.spinner.show(),this.examService.addExam(t).subscribe(function(r){if(1==r.returnValue&&r.examId>0){a.hasUpdate=!0;var s=!(a.examId>0);a.msg.success(s?"General.AddSuccessfully":"General.UpdateSuccessfully"),a.exam_ar_name=t.exam.exam_ar_name,a.examId=r.examId,s&&a.onAddExamGroupHeader(),a.submitted=!1}a.spinner.hide()})):this.msg.error("Check your inputs"):this.GroupHeadsubmitted=!0}},{key:"onAddExamGroupHeader",value:function(){var a,o,r,s,m,t=this;if(null===(o=null===(a=this.dataSource)||void 0===a?void 0:a.data)||void 0===o?void 0:o.find(function(p){var _,v;return p.group_name==(null===(_=t.examGroupCtrl)||void 0===_?void 0:_.value)&&p.head_name==(null===(v=t.examHeaderCtrl)||void 0===v?void 0:v.value)}))this.msg.info("Cannot add the same header with same group");else{var g={exam_question_group_text:null===(r=this.examGroupCtrl)||void 0===r?void 0:r.value,exam_question_head_title:null===(s=this.examContentCtrl)||void 0===s?void 0:s.value,exam_question_head_text:null===(m=this.examHeaderCtrl)||void 0===m?void 0:m.value,exam:{id:this.examId}};this.GroupHeadersForm.valid?(this.spinner.show(),this.examService.addExamGroupHeader(g).subscribe(function(p){var _;p&&(console.log("addExamGroupHeader",p),t.router.navigate(["/dashboard/exams-setup/survey/".concat(t.subjectId,"/survey-question/").concat(t.examId,"/").concat(p.exam_question_head_id)],{queryParams:{functionId:t.functionId,parentId:t.parentId}}),null===(_=t.examContentCtrl)||void 0===_||_.setValue(null),t.spinner.hide())})):0==this.examId&&this.msg.error("Check your inputs")}}},{key:"getExamHeadById",value:function(t){var a,o,r;this.editGroupHeaderMode=!0,this.examGroupHeaderIdToEdit=t.id,null===(a=this.examGroupCtrl)||void 0===a||a.setValue(null==t?void 0:t.questionNumber),null===(o=this.examContentCtrl)||void 0===o||o.setValue(null==t?void 0:t.question_title),null===(r=this.examHeaderCtrl)||void 0===r||r.setValue(null==t?void 0:t.questionType)}},{key:"editExamGroupHead",value:function(){var a,o,r,t=this,s={exam_question_head_id:this.examGroupHeaderIdToEdit,group:null===(a=this.examGroupCtrl)||void 0===a?void 0:a.value,head:null===(o=this.examHeaderCtrl)||void 0===o?void 0:o.value,title:null===(r=this.examContentCtrl)||void 0===r?void 0:r.value};this.spinner.show(),this.examService.editExamGroupHeader(s).subscribe(function(m){var d,c;if(m){var g=t.dataSource.data.find(function(p){return p.id==t.examGroupHeaderIdToEdit});g&&(g.questionNumber=s.group,g.questionType=s.head,g.question_title=null===(d=t.examContentCtrl)||void 0===d?void 0:d.value),t.editGroupHeaderMode=!1,null===(c=t.examContentCtrl)||void 0===c||c.setValue(null),t.msg.success("\u062a\u0645 \u0627\u0644\u062a\u0639\u062f\u064a\u0644 \u0628\u0646\u062c\u0627\u062d")}t.spinner.hide()})}},{key:"removeExamGroupHead",value:function(t){var a=this;this.spinner.show(),this.examService.deleteExamGroupHeader(t.id).subscribe(function(o){if(1==o.returnValue){var r=a.dataSource.data.findIndex(function(s){return s==t});a.dataSource.data.splice(r,1),a.dataSource.paginator=a.paginator,a.msg.success("\u062a\u0645 \u0627\u0644\u062d\u0630\u0641")}else a.msg.error(o.returnString);a.spinner.hide()})}},{key:"openDeleateDialog",value:function(t){var a=this;this.dialog.open(R.F,{data:{msg:t.questionNumber,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(o){o&&a.removeExamGroupHead(t)})}},{key:"addSubQuestionDialog",value:function(t){console.log(t),this.dialog.open(He,{data:{examId:this.examId,examGroupHeaderId:t.id,subjectId:this.subjectId}}).afterClosed().subscribe(function(a){})}},{key:"addSubQuestion",value:function(t){this.examGroupHeaderId=t}}]),l}();return n.\u0275fac=function(i){return new(i||n)(e.Y36(T.Ye),e.Y36(u.qu),e.Y36(Y.e),e.Y36(ee.R),e.Y36(I.gz),e.Y36(I.F0),e.Y36(Qe.K),e.Y36(k.uw),e.Y36(T.uU),e.Y36(E.t2))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-survey"]],viewQuery:function(i,t){var a;1&i&&(e.Gf(j.NW,5),e.Gf(F.YE,5)),2&i&&(e.iGM(a=e.CRH())&&(t.paginator=a.first),e.iGM(a=e.CRH())&&(t.sort=a.first))},inputs:{subjectId:"subjectId",examId:"examId"},outputs:{isHasUpdate:"isHasUpdate"},features:[e.TTD],decls:23,vars:20,consts:[[1,"mtop-30"],[3,"formGroup"],[1,"row"],[1,"col-md-6","col-12"],["placeholder","labels.SurveyName","label","labels.SurveyName",3,"control","submitted"],["label","labels.SurveyHours","placeholder","hh","type","number",3,"control","submitted"],["label","labels.SurveyMinute","placeholder","mm","type","number",3,"control","submitted"],["label","labels.FromDate",3,"control","submitted"],["label","labels.ToDate",3,"control","submitted"],["label","labels.FromTime","type","time",3,"control","submitted"],["label","labels.ToTime","type","time",3,"control","submitted"],[1,"col-md-6","col-12","mtop-25"],[1,"orange-btn","radius-btn","w-100",3,"click"],["class","row",4,"ngIf"],[1,"col-12"],[1,"container-fluid"],[1,"form-horizontal",3,"formGroup"],["appearance","legacy"],["type","text","matInput","","formControlName","examGroup",3,"matAutocomplete"],["autoExamGroup","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["class","danger",4,"ngIf"],["type","text","matInput","","formControlName","examHeader",3,"matAutocomplete"],["autoExamHeader","matAutocomplete"],["matInput","","formControlName","examContent","cols","20"],["align","end"],["mat-raised-button","","class","btn btn-primary bg-light-info",3,"click",4,"ngIf"],["mat-raised-button","","class","btn btn-primary",3,"click",4,"ngIf"],[3,"value"],[1,"danger"],[4,"ngIf"],["mat-raised-button","",1,"btn","btn-primary","bg-light-info",3,"click"],[1,"fa","fa-plus"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","questionNumber"],["matColumnDef","questionType"],["matColumnDef","question_title"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngFor","ngForOf"],["class","success p-0",3,"matTooltip","click",4,"ngIf"],["class","danger p-0",3,"matTooltip","click",4,"ngIf"],["class","info p-0","matTooltip","Add sub question",3,"click",4,"ngIf"],[1,"success","p-0",3,"matTooltip","click"],[1,"ft-edit-2","font-medium-3","mr-2"],[1,"danger","p-0",3,"matTooltip","click"],[1,"ft-trash","font-medium-3","mr-2"],["matTooltip","Add sub question",1,"info","p-0",3,"click"],[1,"ft-git-branch","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(i,t){1&i&&(e.TgZ(0,"mat-dialog-content",0),e.TgZ(1,"form",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e._UZ(4,"app-input",4),e.qZA(),e.TgZ(5,"div",3),e._UZ(6,"app-input",5),e.qZA(),e.TgZ(7,"div",3),e._UZ(8,"app-input",6),e.qZA(),e.TgZ(9,"div",3),e._UZ(10,"app-datepicker",7),e.qZA(),e.TgZ(11,"div",3),e._UZ(12,"app-datepicker",8),e.qZA(),e.TgZ(13,"div",3),e._UZ(14,"app-input",9),e.qZA(),e.TgZ(15,"div",3),e._UZ(16,"app-input",10),e.qZA(),e.TgZ(17,"div",11),e.TgZ(18,"button",12),e.NdJ("click",function(){return t.onSubmit()}),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(21,Rl,42,26,"div",13),e.YNc(22,pr,30,8,"div",13)),2&i&&(e.xp6(1),e.Q6J("formGroup",t.myForm),e.xp6(3),e.Q6J("control",t.FormCtrl.examName)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.FormCtrl.examHours)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.FormCtrl.examMinutes)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.FormCtrl.fromDate)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.FormCtrl.toDate)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.FormCtrl.formHour)("submitted",t.submitted),e.xp6(2),e.Q6J("control",t.FormCtrl.toHours)("submitted",t.submitted),e.xp6(3),e.hij(" ",e.lcZ(20,18,t.examId>0?"General.Update":"General.Create")," "),e.xp6(2),e.Q6J("ngIf",!1),e.xp6(1),e.Q6J("ngIf",!1))},directives:[k.xY,u._Y,u.JL,u.sg,Me.a,Yl.Q,T.O5,Z.a8,Z.n5,Z.dn,C.KE,C.hX,L.Nt,u.Fj,Re.ZL,u.JJ,u.u,Re.XC,T.sg,Z.hq,ae.ey,C.bx,w.lW,h.BZ,F.YE,h.w1,h.fO,h.Dz,h.as,h.nj,h.Ee,j.NW,h.ge,F.nU,h.ev,qe.gM,h.XQ,h.Gk],pipes:[D.X$,T.Ov],styles:[""]}),n}(),_r=f(3375),hr=f(6137);function gr(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){return e.CHM(i),e.oxw().surveyIntegrationDialog()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"sendToHr")," "))}function fr(n,l){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e._UZ(3,"i",12),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"unpublishSurvey")," "))}function vr(n,l){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e._UZ(3,"i",13),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"publishSurvey")," "))}function Zr(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(i);var o=e.oxw();return o.onPublishExam(o.currentSurvey)}),e.YNc(1,fr,4,3,"div",9),e.YNc(2,vr,4,3,"div",9),e.qZA()}if(2&n){var t=e.oxw();e.ekj("isPublish",null==t.currentSurvey?null:t.currentSurvey.isPublish),e.xp6(1),e.Q6J("ngIf",null==t.currentSurvey?null:t.currentSurvey.isPublish),e.xp6(1),e.Q6J("ngIf",!(null!=t.currentSurvey&&t.currentSurvey.isPublish))}}var $e=function(l,i){return{functionId:l,parentId:i}};function Cr(n,l){if(1&n&&(e.TgZ(0,"button",14),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n){var i=e.oxw();e.cQ8("routerLink","/dashboard/exams-setup/survey/",i.subjectId,"/survey-question/",null==i.currentSurvey?null:i.currentSurvey.id,"/",null==i.currentSurvey?null:i.currentSurvey.examQuestionHeadId,""),e.Q6J("queryParams",e.WLB(7,$e,i.functionId,i.parentId)),e.xp6(1),e.hij(" ",e.lcZ(2,5,"labels.AddQuestion")," ")}}function Tr(n,l){1&n&&(e.TgZ(0,"th",34),e._uU(1,"#"),e.qZA())}function xr(n,l){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){var i=l.index;e.xp6(1),e.Oqu(i+1)}}function Ir(n,l){1&n&&(e.TgZ(0,"th",36),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Name")," "))}function br(n,l){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){var i=l.$implicit;e.xp6(1),e.Oqu(i.exam_ar_name)}}function Ar(n,l){1&n&&(e.TgZ(0,"th",36),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.CourseName")," "))}function qr(n,l){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){var i=l.$implicit,t=e.oxw(3);e.xp6(1),e.hij(" ",t.languageService.isArabic?i.course_ar_name:i.course_en_name," ")}}function yr(n,l){1&n&&(e.TgZ(0,"th",36),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.questionsCount")," "))}var Fr=function(){return{textDecoration:"underline",color:"#193141"}};function Qr(n,l){if(1&n&&(e.TgZ(0,"td",35),e.TgZ(1,"a",37),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA()),2&n){var i=l.$implicit,t=e.oxw(3);e.xp6(1),e.cQ8("routerLink","/dashboard/exams-setup/survey/",t.subjectId,"/survey-question/",i.id,"/",i.examQuestionHeadId,""),e.Q6J("ngStyle",e.DdM(9,Fr))("queryParams",e.WLB(10,$e,t.functionId,t.parentId)),e.xp6(1),e.AsE(" ",i.surveyQuestionCount," ",e.lcZ(3,7,"labels.Questions")," ")}}function wr(n,l){1&n&&(e.TgZ(0,"th",36),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.ThePublish")," "))}function Nr(n,l){1&n&&(e.TgZ(0,"div",40),e._uU(1),e.ALo(2,"translate"),e._UZ(3,"i",41),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Published")," "))}function Sr(n,l){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e._UZ(3,"i",13),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.UnPublished")," "))}function Ur(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"td",35),e.TgZ(1,"div",38),e.NdJ("click",function(){var r=e.CHM(i).$implicit;return e.oxw(3).onPublishExam(r)}),e.YNc(2,Nr,4,3,"div",39),e.YNc(3,Sr,4,3,"div",9),e.qZA(),e.qZA()}if(2&n){var t=l.$implicit;e.xp6(2),e.Q6J("ngIf",null==t?null:t.isPublish),e.xp6(1),e.Q6J("ngIf",!(null!=t&&t.isPublish))}}function kr(n,l){1&n&&(e.TgZ(0,"th",36),e._uU(1," actions"),e.qZA())}function Dr(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"a",45),e.NdJ("click",function(){e.CHM(i);var a=e.oxw(2).$implicit;return e.oxw(3).AddSurveyDialog(a.id)}),e.ALo(1,"translate"),e._UZ(2,"i",46),e.qZA()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"General.Edit"))}function Er(n,l){if(1&n){var i=e.EpF();e.TgZ(0,"a",47),e.NdJ("click",function(){e.CHM(i);var a=e.oxw(2).$implicit;return e.oxw(3).openDeleateDialog(a)}),e.ALo(1,"translate"),e._UZ(2,"i",48),e.qZA()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"General.Delete"))}function Jr(n,l){if(1&n&&(e.ynx(0),e.YNc(1,Dr,3,3,"a",43),e.YNc(2,Er,3,3,"a",44),e.BQk()),2&n){var i=l.$implicit;e.xp6(1),e.Q6J("ngIf","Edit"===i.functionName),e.xp6(1),e.Q6J("ngIf","Delete"===i.functionName)}}function Yr(n,l){if(1&n&&(e.TgZ(0,"td",35),e.YNc(1,Jr,3,2,"ng-container",42),e.qZA()),2&n){var i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",i.rowFunctions)}}function Lr(n,l){1&n&&e._UZ(0,"tr",49)}function jr(n,l){1&n&&e._UZ(0,"tr",50)}function Vr(n,l){if(1&n&&(e.TgZ(0,"tr",51),e.TgZ(1,"td",52),e._uU(2),e.qZA(),e.qZA()),2&n){var i=e.oxw(3);e.xp6(2),e.hij(' No data matching the filter "',null==i.surveyName?null:i.surveyName.value,'" ')}}function Pr(n,l){if(1&n&&(e.TgZ(0,"table",21),e.ynx(1,22),e.YNc(2,Tr,2,0,"th",23),e.YNc(3,xr,2,1,"td",24),e.BQk(),e.ynx(4,25),e.YNc(5,Ir,3,3,"th",26),e.YNc(6,br,2,1,"td",24),e.BQk(),e.ynx(7,27),e.YNc(8,Ar,3,3,"th",26),e.YNc(9,qr,2,1,"td",24),e.BQk(),e.ynx(10,28),e.YNc(11,yr,3,3,"th",26),e.YNc(12,Qr,4,13,"td",24),e.BQk(),e.ynx(13,29),e.YNc(14,wr,3,3,"th",26),e.YNc(15,Ur,4,2,"td",24),e.BQk(),e.ynx(16,30),e.YNc(17,kr,2,0,"th",26),e.YNc(18,Yr,2,1,"td",24),e.BQk(),e.YNc(19,Lr,1,0,"tr",31),e.YNc(20,jr,1,0,"tr",32),e.YNc(21,Vr,3,1,"tr",33),e.qZA()),2&n){var i=e.oxw(2);e.Q6J("dataSource",i.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",i.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.displayedColumns)}}function Gr(n,l){if(1&n&&e._UZ(0,"app-table-skeleton",53),2&n){var i=e.oxw(2);e.Q6J("displayedColumns",i.displayedColumns)}}var Or=function(){return[10]};function Mr(n,l){if(1&n){var i=e.EpF();e.ynx(0),e.TgZ(1,"mat-form-field",15),e.TgZ(2,"mat-label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",16),e.NdJ("keyup.enter",function(){return e.CHM(i),e.oxw().getAllExams(1)}),e.qZA(),e.qZA(),e.TgZ(6,"div",17),e.YNc(7,Pr,22,3,"table",18),e.TgZ(8,"mat-paginator",19),e.NdJ("page",function(r){return e.CHM(i),e.oxw().getAllExams(r.pageIndex+1)}),e.qZA(),e.YNc(9,Gr,1,1,"ng-template",null,20,e.W1O),e.qZA(),e.BQk()}if(2&n){var t=e.MAs(10),a=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,7,"General.Search")),e.xp6(2),e.Q6J("formControl",a.surveyName),e.xp6(2),e.Q6J("ngIf",a.isLoaded)("ngIfElse",t),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(9,Or))("length",a.totalItems)("pageSize",10)}}var Br=function(l){return{functionId:l}},Rr=[{path:"",redirectTo:"exam",pathMatch:"full"},{path:"exam-preview/:examId/:type",component:Ho},{path:"exam/:courseId/:typeId",children:[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:Ca},{path:"add-exam",component:Vi.M},{path:"exam-points/:examId",component:rl}]},{path:"survey/:courseId",data:{breadcrumb:"Navbar.Surveys",view:"survey"},children:[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:function(){var n=function(){function l(i,t,a,o,r,s,m){var d=this;(0,U.Z)(this,l),this.route=i,this.authserv=t,this.examService=a,this.toastr=o,this.spinner=r,this.dialog=s,this.languageService=m,this.exams=[],this.displayedColumns=["#","exam_ar_name","course","\u064eQuestionsCount","isPublish","actions"],this.curPage=1,this.surveyName=new u.NI,this.isLoaded=!1,i.paramMap.subscribe(function(c){d.subjectId=Number(c.get("courseId"))}),i.queryParamMap.subscribe(function(c){d.functionId=Number(c.get("functionId")),d.parentId=Number(c.get("parentId")),d.functionId&&d.authserv.getUserRowFunctions(d.functionId).subscribe(function(g){g&&(d.rowFunctions=g)})})}return(0,S.Z)(l,[{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.branchId=this.authserv.getBranchId(),this.getAllExams(1)}},{key:"ngAfterViewInit",value:function(){var t=this;this.authserv.EduCompId.subscribe(function(a){t.EduCompId=a.EduCompId,t.getAllExams(1)}),this.authserv.branchId.subscribe(function(a){t.branchId=a.branchId}),this.dataSource.paginator=this.paginator,this.startSortingTable()}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}},{key:"getAllExams",value:function(t){var o,a=this;this.curPage=t,this.spinner.show(),this.isLoaded=!1;var r={typeId:5,page:t,EduCompId:this.EduCompId,subjectId:this.subjectId,examName:null===(o=this.surveyName)||void 0===o?void 0:o.value};this.examService.getAllNormalExams(r).subscribe(function(s){s&&(a.dataSource=new h.by(s.examList),a.exams=s.examList,a.currentSurvey=s.examList[0],a.totalItems=s.totalCount,a.startSortingTable(),a.isLoaded=!0),a.spinner.hide()})}},{key:"removeExam",value:function(t){var a=this;this.spinner.show(),this.examService.deleteExam(t.id).subscribe(function(o){o&&(a.toastr.success("General.DeleteSuccessfully"),1==a.dataSource.data.length&&a.curPage>1?(a.getAllExams(a.curPage-1),a.paginator.pageIndex=a.curPage-1):a.getAllExams(a.curPage)),a.spinner.hide()})}},{key:"openDeleateDialog",value:function(t){var a=this;this.dialog.open(R.F,{data:{msg:t.exam_ar_name,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(o){o&&a.removeExam(t)})}},{key:"onPublishExam",value:function(t){var a=this;this.spinner.show(),this.examService.publishExam(t.id).subscribe(function(o){if(o){var r=a.exams.findIndex(function(s){return s===t});a.exams[r].isPublish=!a.exams[r].isPublish,a.spinner.hide(),a.toastr.success(a.exams[r].isPublish?"surveyPublished":"surveyUnpublished")}})}},{key:"track",value:function(t,a){return a.Id}},{key:"startSortingTable",value:function(){var t=this;this.dataSource.sortingDataAccessor=function(a,o){return"course"===o?t.languageService.isArabic?a.course_ar_name:a.course_en_name:a[o]},this.dataSource.sort=this.sort}},{key:"surveyIntegrationDialog",value:function(){var t,a;this.dialog.open(_r.$,{data:{subjectId:this.subjectId,unitId:null,surveyId:null!==(a=null===(t=this.currentSurvey)||void 0===t?void 0:t.id)&&void 0!==a?a:0},panelClass:"dialog-radius",width:"40%"}).afterClosed().subscribe(function(o){})}},{key:"AddSurveyDialog",value:function(t){var a=this;this.dialog.open(we,{data:{subjectId:this.subjectId,examId:t>0?t:0},maxHeight:"99vh",width:"700px",autoFocus:!1,disableClose:!0}).afterClosed().subscribe(function(o){o&&a.getAllExams(a.curPage)})}}]),l}();return n.\u0275fac=function(i){return new(i||n)(e.Y36(I.gz),e.Y36(Y.e),e.Y36(ee.R),e.Y36(Qe.K),e.Y36(E.t2),e.Y36(k.uw),e.Y36(Ge.T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-surveys-index"]],viewQuery:function(i,t){var a;1&i&&(e.Gf(j.NW,5),e.Gf(F.YE,5)),2&i&&(e.iGM(a=e.CRH())&&(t.paginator=a.first),e.iGM(a=e.CRH())&&(t.sort=a.first))},decls:11,vars:10,consts:[[1,"row"],[1,"col-12","mb-3"],[1,"admin-index-card"],["parentTitle","labels.SubjectStructure","title","surveys",3,"parentTitleLink","parentLinkParams"],["class","orange-btn radius-btn send-to-hr integration-btn float-right d-inline-block mx-1 mb-2",3,"click",4,"ngIf"],["class","orange-btn radius-btn get-from-hr integration-btn float-right d-inline-block mx-1 mb-2",3,"isPublish","click",4,"ngIf"],["class","orange-btn radius-btn send-to-hr integration-btn float-right d-inline-block mx-1 mb-2",3,"routerLink","queryParams",4,"ngIf"],[1,"container-fluid"],[3,"subjectId","examId"],[4,"ngIf"],[1,"orange-btn","radius-btn","send-to-hr","integration-btn","float-right","d-inline-block","mx-1","mb-2",3,"click"],[1,"orange-btn","radius-btn","get-from-hr","integration-btn","float-right","d-inline-block","mx-1","mb-2",3,"click"],["aria-hidden","true",1,"fas","fa-unlock-alt","ml-1"],["aria-hidden","true",1,"fas","fa-lock","font-size-14","ml-1"],[1,"orange-btn","radius-btn","send-to-hr","integration-btn","float-right","d-inline-block","mx-1","mb-2",3,"routerLink","queryParams"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"formControl","keyup.enter"],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource",4,"ngIf","ngIfElse"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","page"],["loading",""],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","exam_ar_name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","course"],["matColumnDef","\u064eQuestionsCount"],["matColumnDef","isPublish"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],[3,"ngStyle","routerLink","queryParams"],[2,"cursor","pointer",3,"click"],["class","success",4,"ngIf"],[1,"success"],["aria-hidden","true",1,"fas","fa-unlock-alt","success","ml-1"],[4,"ngFor","ngForOf"],["class","dark-blue",3,"matTooltip","click",4,"ngIf"],["class","danger",3,"matTooltip","click",4,"ngIf"],[1,"dark-blue",3,"matTooltip","click"],[1,"fas","fa-pen","font-medium-3","mr-2"],[1,"danger",3,"matTooltip","click"],[1,"fa","fa-trash","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"],[3,"displayedColumns"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card",2),e.TgZ(3,"mat-card-title"),e._UZ(4,"page-title",3),e.YNc(5,gr,3,3,"button",4),e.YNc(6,Zr,3,4,"button",5),e.YNc(7,Cr,3,10,"button",6),e.qZA(),e.TgZ(8,"mat-card-content",7),e._UZ(9,"app-add-survey",8),e.YNc(10,Mr,11,10,"ng-container",9),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(4),e.MGl("parentTitleLink","/dashboard/setup/course/course-structure/",t.subjectId,""),e.Q6J("parentLinkParams",e.VKq(8,Br,t.parentId)),e.xp6(1),e.Q6J("ngIf",null==t.currentSurvey?null:t.currentSurvey.id),e.xp6(1),e.Q6J("ngIf",null==t.currentSurvey?null:t.currentSurvey.id),e.xp6(1),e.Q6J("ngIf",null==t.currentSurvey?null:t.currentSurvey.id),e.xp6(2),e.Q6J("subjectId",t.subjectId)("examId",null==t.currentSurvey?null:t.currentSurvey.id),e.xp6(1),e.Q6J("ngIf",!1))},directives:[Z.a8,Z.n5,Oe.T,T.O5,Z.dn,we,I.rH,C.KE,C.hX,L.Nt,u.Fj,u.JJ,u.oH,j.NW,h.BZ,F.YE,h.w1,h.fO,h.Dz,h.as,h.nj,h.Ee,h.ge,h.ev,F.nU,I.yS,T.PC,T.sg,qe.gM,h.XQ,h.Gk,hr.I],pipes:[D.X$],styles:[".get-from-hr.isPublish[_ngcontent-%COMP%]{background:#146f3e!important}"]}),n}(),data:{breadcrumb:"Navbar.SurveyList",view:"survey-index"}},{path:"add-survey",component:we,data:{breadcrumb:"Navbar.newesurvay",view:"add-survey"}},{path:"survey-question/:examId/:examGroupHeaderId",component:He,data:{breadcrumb:"Navbar.newesurvay",view:"survey-question"}}]},{path:"question-bank",children:[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:ji},{path:"add-question",component:ti}]},{path:"templates",children:[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:_o},{path:"add-template",component:yn},{path:"template-points/:templateId",component:mt}]},{path:"exam-correction",children:[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:ko}]}],$r=function(){var n=(0,S.Z)(function l(){(0,U.Z)(this,l)});return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[I.Bz.forChild(Rr)],I.Bz]}),n}(),zr=f(8109),Wr=f(5568),ze=f(9778),Xr=function(){var n=(0,S.Z)(function l(){(0,U.Z)(this,l)});return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[{provide:ae._A,useClass:ze.B},{provide:ae.sG,useValue:ze.F}],imports:[[$r,T.ez,u.UX,zr.m,Wr.q,z.IJ,E.ef,ie.JX]]}),n}()}}]);