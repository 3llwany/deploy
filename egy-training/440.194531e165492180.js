"use strict";(self.webpackChunkegyTrainingNew=self.webpackChunkegyTrainingNew||[]).push([[440],{6440:function(ns,Pe,v){v.r(Pe),v.d(Pe,{ExamsModule:function(){return ts}});var N=v(3144),w=v(5671),I=v(9808),m=v(3075),q=v(4330),W=v(1069),e=v(1891),P=v(2290),J=v(7011),A=v(8555),Ge=v(2397),F=v(8966),S=v(6405),Z=v(9224),y=v(7423),C=v(7322),j=v(7531),be=v(5245),ie=v(9966),Ee=v(226),D=v(2925);function at(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1," You must enter a value. "),e.qZA())}function it(n,l){if(1&n&&(e.TgZ(0,"mat-hint",18),e.YNc(1,at,2,0,"span",5),e.qZA()),2&n){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==a.FormCtrls.from.errors?null:a.FormCtrls.from.errors.required)||(null==a.FormCtrls.from.errors?null:a.FormCtrls.from.errors.minusNum))}}function ot(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1," You must enter a value. "),e.qZA())}function lt(n,l){if(1&n&&(e.TgZ(0,"mat-hint",18),e.YNc(1,ot,2,0,"span",5),e.qZA()),2&n){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==a.FormCtrls.to.errors?null:a.FormCtrls.to.errors.required)||(null==a.FormCtrls.to.errors?null:a.FormCtrls.to.errors.minusNum))}}function rt(n,l){if(1&n&&(e.ynx(0),e.TgZ(1,"div",6),e.TgZ(2,"mat-form-field",7),e.TgZ(3,"mat-label"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"input",16),e.YNc(7,it,2,1,"mat-hint",9),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"mat-form-field",7),e.TgZ(10,"mat-label"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"input",17),e.YNc(14,lt,2,1,"mat-hint",9),e.qZA(),e.qZA(),e.BQk()),2&n){var a=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,4,"labels.From")," "),e.xp6(3),e.Q6J("ngIf",a.FormCtrls.from.invalid&&(a.FormCtrls.from.touched||a.Submitted)),e.xp6(4),e.hij(" ",e.lcZ(12,6,"labels.To")," "),e.xp6(3),e.Q6J("ngIf",a.FormCtrls.to.invalid&&(a.FormCtrls.to.touched||a.Submitted))}}function st(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1," You must enter a value. "),e.qZA())}function ut(n,l){if(1&n&&(e.TgZ(0,"mat-hint",18),e.YNc(1,st,2,0,"span",5),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==a.FormCtrls.value.errors?null:a.FormCtrls.value.errors.required)||(null==a.FormCtrls.value.errors?null:a.FormCtrls.value.errors.minusNum))}}function mt(n,l){1&n&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.ByQuestion")," "))}function dt(n,l){1&n&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.ByExam")," "))}function ct(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"tr"),e.YNc(1,mt,3,3,"td",5),e.YNc(2,dt,3,3,"td",5),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e.TgZ(10,"button",19),e.NdJ("click",function(){var r=e.CHM(a).$implicit;return e.oxw().openDeleateExamPointDialog(r)}),e.TgZ(11,"mat-icon"),e._uU(12,"delete"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){var t=l.$implicit;e.xp6(1),e.Q6J("ngIf",t.ByQuestion),e.xp6(1),e.Q6J("ngIf",!t.ByQuestion),e.xp6(2),e.Oqu(t.FromValue),e.xp6(2),e.Oqu(t.ToValue),e.xp6(2),e.Oqu(t.Value)}}function pt(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"pagination-controls",20),e.NdJ("pageChange",function(o){e.CHM(a);var r=e.oxw();return r.p=o,r.getExamCustomPoints(o)}),e.qZA()}if(2&n){var t=e.oxw();e.Q6J("maxSize",t.maxSize)}}var _t=function(l){return{functionId:l}},ht=function(l,a){return{itemsPerPage:5,currentPage:l,totalItems:a}},gt=function(){var n=function(){function l(a,t,i,o,r,s,u){var d=this;(0,w.Z)(this,l),this.fb=a,this.toastr=t,this.authserv=i,this.route=o,this.PointsService=r,this.dialog=s,this.spinner=u,this.Submitted=!1,this.p=1,this.maxSize=9,o.paramMap.subscribe(function(c){d.templateId=Number(c.get("templateId"))}),this.route.queryParamMap.subscribe(function(c){d.functionId=Number(c.get("functionId"))})}return(0,N.Z)(l,[{key:"ngOnInit",value:function(){this.getTemplateCustomPoints(1),this.myForm=this.fb.group({ByQuestion:[!1,[m.kI.required]],from:[""],to:[""],value:["",[m.kI.required,q.D.minusNum]]}),this.ByQuestionValidators(!1)}},{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"addTemplateCustomPoint",value:function(){var i,o,r,s,t=this;this.Submitted=!0;var u={itemId:this.templateId,ByQuestion:null===(i=this.FormCtrls)||void 0===i?void 0:i.ByQuestion.value,from:null===(o=this.FormCtrls)||void 0===o?void 0:o.from.value,to:null===(r=this.FormCtrls)||void 0===r?void 0:r.to.value,value:null===(s=this.FormCtrls)||void 0===s?void 0:s.value.value};this.myForm.valid&&(this.spinner.show(),this.PointsService.addTemplateCustomPoint(u).subscribe(function(d){var c;1==d.returnValue&&(t.getTemplateCustomPoints(1),t.toastr.success("\u062a\u0645 \u0625\u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u0646\u0642\u0627\u0637"),t.Submitted=!1,t.myForm.reset(),null===(c=t.FormCtrls)||void 0===c||c.ByQuestion.setValue(!0)),t.spinner.hide()}))}},{key:"getTemplateCustomPoints",value:function(t){var i=this;this.spinner.show(),this.PointsService.getTemplateCustomPoints(t,this.templateId).subscribe(function(o){1==o.returnValue&&(i.ItemsCount=o.itemsCount,i.Points=o.points),i.spinner.hide()})}},{key:"deleteExamCustomPoint",value:function(t){var i=this;this.spinner.show(),this.PointsService.deleteExamCustomPoint(t.Id).subscribe(function(o){if(1==o.returnValue){var r=i.Points.findIndex(function(s){return s==t});i.Points.splice(r,1),i.toastr.success("\u062a\u0645 \u0627\u0644\u062d\u0630\u0641")}i.spinner.hide()})}},{key:"openDeleateExamPointDialog",value:function(t){var i=this;this.dialog.open(W.F,{data:{msg:"".concat(t.Value,": points"),panelClass:"dialog-radius"}}).afterClosed().subscribe(function(o){o&&i.deleteExamCustomPoint(t)})}},{key:"track",value:function(t,i){return i.Id}},{key:"ByQuestionValidators",value:function(t){1==t?(this.FormCtrls.from.reset(),this.FormCtrls.from.clearValidators(),this.FormCtrls.to.reset(),this.FormCtrls.to.clearValidators()):(this.FormCtrls.from.setValidators([m.kI.required,q.D.minusNum]),this.FormCtrls.to.setValidators([m.kI.required,q.D.bigZero])),this.FormCtrls.from.updateValueAndValidity(),this.FormCtrls.to.updateValueAndValidity()}}]),l}();return n.\u0275fac=function(a){return new(a||n)(e.Y36(m.qu),e.Y36(P._W),e.Y36(J.e),e.Y36(A.gz),e.Y36(Ge.q),e.Y36(F.uw),e.Y36(S.t2))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-templates-custome-points"]],decls:47,vars:39,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","","routerLink","/dashboard/exams-setup/templates/index",1,"btn","btn-warning","bg-light-warning","float-right",3,"queryParams"],[1,"container-fluid"],[3,"formGroup"],[4,"ngIf"],[1,"col-lg-4","col-12"],["appearance","legacy"],["matInput","","type","number","formControlName","value"],["class","text-danger",4,"ngIf"],["align","end"],["mat-raised-button","","type","button",1,"btn","btn-primary","bg-light-info",3,"click"],[1,"fa","fa-plus"],[1,"table"],[4,"ngFor","ngForOf","ngForTrackBy"],["dir","ltr","previousLabel","","nextLabel","",3,"maxSize","pageChange",4,"ngIf"],["matInput","","type","number","formControlName","from"],["matInput","","type","number","formControlName","to"],[1,"text-danger"],["mat-mini-fab","","color","warn",3,"click"],["dir","ltr","previousLabel","","nextLabel","",3,"maxSize","pageChange"]],template:function(a,t){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"a",2),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.TgZ(9,"mat-card-content",3),e.TgZ(10,"form",4),e.TgZ(11,"div",0),e.YNc(12,rt,15,8,"ng-container",5),e.TgZ(13,"div",6),e.TgZ(14,"mat-form-field",7),e.TgZ(15,"mat-label"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e._UZ(18,"input",8),e.YNc(19,ut,2,1,"mat-hint",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"mat-card-actions",10),e.TgZ(21,"button",11),e.NdJ("click",function(){return t.addTemplateCustomPoint()}),e._UZ(22,"i",12),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.qZA(),e.qZA(),e.ynx(25),e.TgZ(26,"table",13),e.TgZ(27,"thead"),e.TgZ(28,"tr"),e.TgZ(29,"th"),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"th"),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"th"),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"th"),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"th"),e._uU(42,"actions"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(43,"tbody"),e.YNc(44,ct,13,5,"tr",14),e.ALo(45,"paginate"),e.qZA(),e.YNc(46,pt,1,1,"pagination-controls",15),e.qZA(),e.BQk(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(4),e.hij(" ",e.lcZ(5,15,"labels.TemplatePoints")," "),e.xp6(2),e.Q6J("queryParams",e.VKq(34,_t,t.functionId)),e.xp6(1),e.hij(" ",e.lcZ(8,17,"General.Back")," "),e.xp6(3),e.Q6J("formGroup",t.myForm),e.xp6(2),e.Q6J("ngIf",!1===t.FormCtrls.ByQuestion.value),e.xp6(4),e.hij(" ",e.lcZ(17,19,"labels.pointsNumber")," "),e.xp6(3),e.Q6J("ngIf",t.FormCtrls.value.invalid&&(t.FormCtrls.value.touched||t.Submitted)),e.xp6(4),e.hij(" ",e.lcZ(24,21,"General.Add")," "),e.xp6(7),e.hij(" ",e.lcZ(31,23,"labels.ByQuestion")," "),e.xp6(3),e.hij(" ",e.lcZ(34,25,"labels.From")," "),e.xp6(3),e.hij(" ",e.lcZ(37,27,"labels.To")," "),e.xp6(3),e.hij(" ",e.lcZ(40,29,"labels.pointsNumber")," "),e.xp6(5),e.Q6J("ngForOf",e.xi3(45,31,t.Points,e.WLB(36,ht,t.p,t.ItemsCount)))("ngForTrackBy",t.track),e.xp6(2),e.Q6J("ngIf",(null==t.Points?null:t.Points.length)>5))},directives:[Z.a8,Z.n5,y.zs,A.yS,Z.dn,m._Y,m.JL,m.sg,I.O5,C.KE,C.hX,j.Nt,m.wV,m.Fj,m.JJ,m.u,Z.hq,y.lW,I.sg,C.bx,be.Hw,ie.LS,Ee.Lv],pipes:[D.X$,ie._s],styles:[""]}),n}(),ft=v(136),vt=v(7777),Zt=v(8521),Ct=v(520),Oe=function(){var n=function(l){(0,ft.Z)(t,l);var a=(0,vt.Z)(t);function t(i){var o;return(0,w.Z)(this,t),(o=a.call(this,i)).http=i,o}return(0,N.Z)(t,[{key:"getTemplates",value:function(o,r,s){return this.post("Admin/getTemplates/".concat(o,"/").concat(r),s)}},{key:"getTemplateById",value:function(o){return this.get("template/returnTemplateById/".concat(o))}},{key:"deleteTemplate",value:function(o){return this.get("template/deleteTemplateById/".concat(o))}},{key:"PublishDepublishTemplate",value:function(o){return this.post("template/PublishDepublishTemplate/".concat(o),null)}},{key:"getPresets",value:function(o){return this.get("template/returnPresetsByEduCompId/".concat(o))}},{key:"addUpdateTemplate",value:function(o){return this.post("template/addtemplate",o)}},{key:"addTemplateDetails",value:function(o){return this.post("AJAX/addTemplateDetail",o)}},{key:"getQuestionDetails",value:function(o){return this.get("AJAX/returnTemplateDetails/".concat(o))}},{key:"DeleteDetails",value:function(o){return this.get("template/deleteTemplateDetailById/".concat(o))}},{key:"getTemplatePoints",value:function(o,r){return this.get("template/returnCustomPointTemplateByTemplateId/".concat(o,"/").concat(r))}},{key:"addTemplatePoint",value:function(o){return this.post("template/CustomTemplatePoint",o)}},{key:"deleteTemplatePoint",value:function(o){return this.delete("template/DeleteCustomTemplatePoint/".concat(o))}}]),t}(Zt.K);return n.\u0275fac=function(a){return new(a||n)(e.LFG(Ct.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),X=v(5086),ke=v(6471),Se=v(4107),oe=v(508),xe=v(6856),K=v(9814),Le=v(9772);function Tt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.AddTemplate")," "))}function It(n,l){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.AsE(" ",e.lcZ(2,2,"labels.UpdateTemplate")," - ",a.templateName," ")}}function At(n,l){if(1&n&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Id),e.xp6(1),e.hij(" ",a.Name," ")}}function xt(n,l){if(1&n&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.teacherUserId),e.xp6(1),e.hij(" ",a.teacher_ar_name," ")}}function bt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function qt(n,l){if(1&n&&(e.TgZ(0,"mat-hint",47),e.YNc(1,bt,3,3,"span",2),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.FormCtrl.teacherUserIdCtrl||null==a.FormCtrl.teacherUserIdCtrl.errors?null:a.FormCtrl.teacherUserIdCtrl.errors.required)}}function yt(n,l){if(1&n&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function Ft(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function Qt(n,l){if(1&n&&(e.TgZ(0,"mat-hint",47),e.YNc(1,Ft,3,3,"span",2),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.FormCtrl.stageId||null==a.FormCtrl.stageId.errors?null:a.FormCtrl.stageId.errors.required)}}function Ut(n,l){if(1&n&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text_Ar," ")}}function Nt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function wt(n,l){if(1&n&&(e.TgZ(0,"mat-hint",47),e.YNc(1,Nt,3,3,"span",2),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.FormCtrl.yearId.errors?null:a.FormCtrl.yearId.errors.required)}}function kt(n,l){if(1&n&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function St(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function Dt(n,l){if(1&n&&(e.TgZ(0,"mat-hint",47),e.YNc(1,St,3,3,"span",2),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.FormCtrl.subjectId||null==a.FormCtrl.subjectId.errors?null:a.FormCtrl.subjectId.errors.required)}}function Et(n,l){if(1&n&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function Lt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Yt(n,l){if(1&n&&(e.TgZ(0,"mat-hint",47),e.YNc(1,Lt,3,3,"span",2),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.FormCtrl.UnitRevisionID||null==a.FormCtrl.UnitRevisionID.errors?null:a.FormCtrl.UnitRevisionID.errors.required)}}function Jt(n,l){if(1&n&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function jt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Vt(n,l){if(1&n&&(e.TgZ(0,"mat-hint",47),e.YNc(1,jt,3,3,"span",2),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.FormCtrl.LessonID||null==a.FormCtrl.LessonID.errors?null:a.FormCtrl.LessonID.errors.required)}}function Mt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Pt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function Gt(n,l){if(1&n&&(e.TgZ(0,"mat-hint",47),e.YNc(1,Mt,3,3,"span",2),e.YNc(2,Pt,3,3,"span",2),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.FormCtrl.Name||null==a.FormCtrl.Name.errors?null:a.FormCtrl.Name.errors.required),e.xp6(1),e.Q6J("ngIf",null==a.FormCtrl.Name||null==a.FormCtrl.Name.errors?null:a.FormCtrl.Name.errors.whiteSpace)}}function Ot(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Bt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function Ht(n,l){if(1&n&&(e.TgZ(0,"mat-hint",47),e.YNc(1,Ot,3,3,"span",2),e.YNc(2,Bt,3,3,"span",2),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.FormCtrl.exam_hour||null==a.FormCtrl.exam_hour.errors?null:a.FormCtrl.exam_hour.errors.required),e.xp6(1),e.Q6J("ngIf",null==a.FormCtrl.exam_hour||null==a.FormCtrl.exam_hour.errors?null:a.FormCtrl.exam_hour.errors.minusNum)}}function Rt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function $t(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function zt(n,l){if(1&n&&(e.TgZ(0,"mat-hint",47),e.YNc(1,Rt,3,3,"span",2),e.YNc(2,$t,3,3,"span",2),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.FormCtrl.exam_minute||null==a.FormCtrl.exam_minute.errors?null:a.FormCtrl.exam_minute.errors.required),e.xp6(1),e.Q6J("ngIf",null==a.FormCtrl.exam_minute||null==a.FormCtrl.exam_minute.errors?null:a.FormCtrl.exam_minute.errors.minusNum)}}function Wt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Xt(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function Kt(n,l){if(1&n&&(e.TgZ(0,"mat-hint",47),e.YNc(1,Wt,3,3,"span",2),e.YNc(2,Xt,3,3,"span",2),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.FormCtrl.price||null==a.FormCtrl.price.errors?null:a.FormCtrl.price.errors.required),e.xp6(1),e.Q6J("ngIf",null==a.price||null==a.price.errors?null:a.price.errors.minusNum)}}function en(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function tn(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function nn(n,l){if(1&n&&(e.TgZ(0,"mat-hint",51),e.YNc(1,en,3,3,"span",2),e.YNc(2,tn,3,3,"span",2),e.qZA()),2&n){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==a.FormCtrl.repeatableExam_Count||null==a.FormCtrl.repeatableExam_Count.errors?null:a.FormCtrl.repeatableExam_Count.errors.required),e.xp6(1),e.Q6J("ngIf",null==a.FormCtrl.repeatableExam_Count||null==a.FormCtrl.repeatableExam_Count.errors?null:a.FormCtrl.repeatableExam_Count.errors.bigZero)}}function an(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function on(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function ln(n,l){if(1&n&&(e.TgZ(0,"mat-hint",51),e.YNc(1,an,3,3,"span",2),e.YNc(2,on,3,3,"span",2),e.qZA()),2&n){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==a.FormCtrl.StudentRepeatExamCost||null==a.FormCtrl.StudentRepeatExamCost.errors?null:a.FormCtrl.StudentRepeatExamCost.errors.required),e.xp6(1),e.Q6J("ngIf",null==a.FormCtrl.StudentRepeatExamCost||null==a.FormCtrl.StudentRepeatExamCost.errors?null:a.FormCtrl.StudentRepeatExamCost.errors.minusNum)}}function rn(n,l){if(1&n&&(e.ynx(0),e.TgZ(1,"div",6),e.TgZ(2,"mat-form-field",7),e.TgZ(3,"mat-label"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"input",48),e.YNc(7,nn,3,2,"mat-hint",49),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"mat-form-field",7),e.TgZ(10,"mat-label"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"input",50),e.YNc(14,ln,3,2,"mat-hint",49),e.qZA(),e.qZA(),e.BQk()),2&n){var a=e.oxw();e.xp6(4),e.Oqu(e.lcZ(5,4,"labels.repeatNumbers")),e.xp6(3),e.Q6J("ngIf",(null==a.FormCtrl.repeatableExam_Count?null:a.FormCtrl.repeatableExam_Count.invalid)&&((null==a.FormCtrl.repeatableExam_Count?null:a.FormCtrl.repeatableExam_Count.touched)||a.submitted)),e.xp6(4),e.Oqu(e.lcZ(12,6,"labels.repeatingPrice")),e.xp6(3),e.Q6J("ngIf",(null==a.FormCtrl.StudentRepeatExamCost?null:a.FormCtrl.StudentRepeatExamCost.invalid)&&((null==a.FormCtrl.StudentRepeatExamCost?null:a.FormCtrl.StudentRepeatExamCost.touched)||a.submitted))}}function sn(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){return e.CHM(a),e.oxw().addUpdateTemplate()}),e._UZ(1,"i",53),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.Add")," "))}function un(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"button",54),e.NdJ("click",function(){return e.CHM(a),e.oxw().addUpdateTemplate()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"General.Update")," "))}function mn(n,l){1&n&&(e.TgZ(0,"span",51),e._uU(1," You must enter a value. "),e.qZA())}function dn(n,l){1&n&&(e.TgZ(0,"span",51),e._uU(1," You must enter a correct value. "),e.qZA())}function cn(n,l){if(1&n&&(e.TgZ(0,"mat-hint",63),e.YNc(1,mn,2,0,"span",49),e.YNc(2,dn,2,0,"span",49),e.qZA()),2&n){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==a.DetailsCtrl.questionsCount.errors?null:a.DetailsCtrl.questionsCount.errors.required),e.xp6(1),e.Q6J("ngIf",null==a.DetailsCtrl.questionsCount.errors?null:a.DetailsCtrl.questionsCount.errors.bigZero)}}function pn(n,l){1&n&&(e.TgZ(0,"span",51),e._uU(1," You must enter a value. "),e.qZA())}function _n(n,l){1&n&&(e.TgZ(0,"span",51),e._uU(1," You must enter a correct value. "),e.qZA())}function hn(n,l){if(1&n&&(e.TgZ(0,"mat-hint",63),e.YNc(1,pn,2,0,"span",49),e.YNc(2,_n,2,0,"span",49),e.qZA()),2&n){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==a.DetailsCtrl.mark.errors?null:a.DetailsCtrl.mark.errors.required),e.xp6(1),e.Q6J("ngIf",null==a.DetailsCtrl.mark.errors?null:a.DetailsCtrl.mark.errors.minusNum)}}function gn(n,l){if(1&n&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function fn(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function vn(n,l){if(1&n&&(e.TgZ(0,"mat-hint",47),e.YNc(1,fn,3,3,"span",2),e.qZA()),2&n){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==a.DetailsCtrl.unitRevisionID||null==a.DetailsCtrl.unitRevisionID.errors?null:a.DetailsCtrl.unitRevisionID.errors.required)}}function Zn(n,l){if(1&n&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function Cn(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Tn(n,l){if(1&n&&(e.TgZ(0,"mat-hint",47),e.YNc(1,Cn,3,3,"span",2),e.qZA()),2&n){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==a.DetailsCtrl.LessonID||null==a.DetailsCtrl.LessonID.errors?null:a.DetailsCtrl.LessonID.errors.required)}}function In(n,l){if(1&n&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function An(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){return e.CHM(a),e.oxw(2).addTemplateDetails()}),e._UZ(1,"i",53),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.Add")," "))}function xn(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.TgZ(7,"mat-card-content",4),e.TgZ(8,"div",0),e.TgZ(9,"div",1),e.TgZ(10,"form",5),e.TgZ(11,"div",0),e.TgZ(12,"div",55),e.TgZ(13,"mat-form-field",7),e.TgZ(14,"mat-label"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e._UZ(17,"input",56),e.YNc(18,cn,3,2,"mat-hint",57),e.qZA(),e.qZA(),e.TgZ(19,"div",55),e.TgZ(20,"mat-form-field",7),e.TgZ(21,"mat-label"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"mat-select",58),e.TgZ(25,"mat-option"),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"mat-option",38),e._uU(29,"\u0633\u0647\u0644"),e.qZA(),e.TgZ(30,"mat-option",38),e._uU(31,"\u0645\u062a\u0648\u0633\u0637"),e.qZA(),e.TgZ(32,"mat-option",38),e._uU(33,"\u0635\u0639\u0628"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(34,"div",6),e.TgZ(35,"mat-form-field",7),e.TgZ(36,"mat-label"),e._uU(37),e.ALo(38,"translate"),e.qZA(),e._UZ(39,"input",59),e.YNc(40,hn,3,2,"mat-hint",57),e.qZA(),e.qZA(),e.TgZ(41,"div",55),e.TgZ(42,"mat-form-field",7),e.TgZ(43,"mat-label"),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.TgZ(46,"mat-select",60),e.NdJ("selectionChange",function(){e.CHM(a);var o=e.oxw();return o.GetLessonsForDetails(null==o.DetailsCtrl.unitRevisionID?null:o.DetailsCtrl.unitRevisionID.value)}),e.TgZ(47,"mat-option",9),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.YNc(50,gn,2,2,"mat-option",10),e.qZA(),e.YNc(51,vn,2,1,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(52,"div",55),e.TgZ(53,"mat-form-field",7),e.TgZ(54,"mat-label"),e._uU(55),e.ALo(56,"translate"),e.qZA(),e.TgZ(57,"mat-select",61),e.NdJ("selectionChange",function(){e.CHM(a);var o=e.oxw();return o.GetTopicsForDetails(null==o.DetailsCtrl.lessonID?null:o.DetailsCtrl.lessonID.value)}),e.TgZ(58,"mat-option",9),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.YNc(61,Zn,2,2,"mat-option",10),e.qZA(),e.YNc(62,Tn,2,1,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(63,"div",55),e.TgZ(64,"mat-form-field",7),e.TgZ(65,"mat-label"),e._uU(66),e.ALo(67,"translate"),e.qZA(),e.TgZ(68,"mat-select",62),e.TgZ(69,"mat-option",9),e._uU(70),e.ALo(71,"translate"),e.qZA(),e.YNc(72,In,2,2,"mat-option",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(73,"mat-card-actions",43),e.YNc(74,An,4,3,"button",44),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){var t=e.oxw();e.xp6(5),e.hij(" ",e.lcZ(6,23,"labels.QuestionData")," "),e.xp6(5),e.Q6J("formGroup",t.DetailForm),e.xp6(5),e.hij(" ",e.lcZ(16,25,"labels.questionsCount")," "),e.xp6(3),e.Q6J("ngIf",t.DetailsCtrl.questionsCount.invalid&&(t.DetailsCtrl.questionsCount.touched||t.DetailSubmitted)),e.xp6(4),e.Oqu(e.lcZ(23,27,"labels.Level")),e.xp6(4),e.hij(" ",e.lcZ(27,29,"General.Choose")," "),e.xp6(2),e.Q6J("value",1),e.xp6(2),e.Q6J("value",5),e.xp6(2),e.Q6J("value",10),e.xp6(5),e.hij(" ",e.lcZ(38,31,"labels.QuestionMark")," "),e.xp6(3),e.Q6J("ngIf",t.DetailsCtrl.mark.invalid&&(t.DetailsCtrl.mark.touched||t.DetailSubmitted)),e.xp6(4),e.Oqu(e.lcZ(45,33,"labels.Unit")),e.xp6(4),e.hij(" ",e.lcZ(49,35,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.unitsForDetails),e.xp6(1),e.Q6J("ngIf",(null==t.DetailsCtrl.unitRevisionID?null:t.DetailsCtrl.unitRevisionID.invalid)&&((null==t.DetailsCtrl.unitRevisionID?null:t.DetailsCtrl.unitRevisionID.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(56,37,"labels.Lesson")),e.xp6(4),e.hij(" ",e.lcZ(60,39,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.lessonsForDetails),e.xp6(1),e.Q6J("ngIf",(null==t.DetailsCtrl.LessonID?null:t.DetailsCtrl.LessonID.invalid)&&((null==t.DetailsCtrl.LessonID?null:t.DetailsCtrl.LessonID.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(67,41,"labels.Topic")),e.xp6(4),e.hij(" ",e.lcZ(71,43,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.topicsForDetails),e.xp6(2),e.Q6J("ngIf",null!=t.FormCtrl.Id.value)}}function bn(n,l){1&n&&(e.TgZ(0,"td"),e._uU(1,"\u0633\u0647\u0644"),e.qZA())}function qn(n,l){1&n&&(e.TgZ(0,"td"),e._uU(1,"\u0645\u062a\u0648\u0633\u0637"),e.qZA())}function yn(n,l){1&n&&(e.TgZ(0,"td"),e._uU(1,"\u0635\u0639\u0628"),e.qZA())}function Fn(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.YNc(7,bn,2,0,"td",2),e.YNc(8,qn,2,0,"td",2),e.YNc(9,yn,2,0,"td",2),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td",67),e.TgZ(19,"button",68),e.NdJ("click",function(){var s=e.CHM(a).$implicit;return e.oxw(2).openDeleateDialog(s)}),e.TgZ(20,"mat-icon"),e._uU(21,"delete"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){var t=l.$implicit,i=l.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(null==t?null:t.questionsCount),e.xp6(2),e.Oqu(null==t?null:t.mark),e.xp6(1),e.Q6J("ngIf",1==(null==t?null:t.questionsLevel)),e.xp6(1),e.Q6J("ngIf",5==(null==t?null:t.questionsLevel)),e.xp6(1),e.Q6J("ngIf",10==(null==t?null:t.questionsLevel)),e.xp6(2),e.Oqu(null==t?null:t.SubjectName),e.xp6(2),e.Oqu(null==t?null:t.UnitName),e.xp6(2),e.Oqu(null==t?null:t.LessonName),e.xp6(2),e.Oqu(null==t?null:t.TopicName)}}function Qn(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"div",69),e.TgZ(1,"pagination-controls",70),e.NdJ("pageChange",function(o){return e.CHM(a),e.oxw(2).p=o}),e.qZA(),e.qZA()}if(2&n){var t=e.oxw(2);e.xp6(1),e.Q6J("maxSize",t.maxSize)}}var Un=function(l,a){return{itemsPerPage:5,currentPage:l,totalItems:a}};function Nn(n,l){if(1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.qZA(),e.TgZ(7,"mat-card-content",4),e.TgZ(8,"div",0),e.TgZ(9,"div",1),e.TgZ(10,"table",64),e.TgZ(11,"thead"),e.TgZ(12,"tr"),e.TgZ(13,"th"),e._uU(14,"#"),e.qZA(),e.TgZ(15,"th"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"th"),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"th"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"th"),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"th"),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"th"),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"th"),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"th"),e._uU(37,"\xad"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"tbody"),e.YNc(39,Fn,22,10,"tr",65),e.ALo(40,"paginate"),e.qZA(),e.qZA(),e.YNc(41,Qn,2,1,"div",66),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){var a=e.oxw();e.xp6(5),e.hij(" ",e.lcZ(6,11,"labels.Questions")," "),e.xp6(11),e.Oqu(e.lcZ(17,13,"labels.questionsCount")),e.xp6(3),e.Oqu(e.lcZ(20,15,"labels.QuestionMark")),e.xp6(3),e.Oqu(e.lcZ(23,17,"labels.Level")),e.xp6(3),e.Oqu(e.lcZ(26,19,"labels.Subject")),e.xp6(3),e.Oqu(e.lcZ(29,21,"labels.Unit")),e.xp6(3),e.Oqu(e.lcZ(32,23,"labels.Lesson")),e.xp6(3),e.Oqu(e.lcZ(35,25,"labels.Topic")),e.xp6(5),e.Q6J("ngForOf",e.xi3(40,27,a.QuestionDetails,e.WLB(30,Un,a.p,a.QuestionDetails.length)))("ngForTrackBy",a.track),e.xp6(2),e.Q6J("ngIf",a.QuestionDetails.length>5)}}var wn=function(l){return{functionId:l}},kn=function(){var n=function(){function l(a,t,i,o,r,s,u,d,c,h){var p=this;(0,w.Z)(this,l),this.fb=a,this.route=t,this.toastr=i,this.spinner=o,this.authserv=r,this.TemplatesService=s,this.dialog=u,this.GeneralService=d,this.datePipe=c,this.EducationalService=h,this.p=1,this.maxSize=9,this.Teachers=[],this.QuestionDetails=[],this.Presets=[],this.stages=[],this.years=[],this.subjects=[],this.units=[],this.lessons=[],this.topics=[],this.submitted=!1,this.DetailSubmitted=!1,this.templateId=null,t.queryParamMap.subscribe(function(_){p.templateId=_.get("templateId"),p.functionId=Number(_.get("functionId")),p.templateId&&(p.getTemplateById(),p.getQuestionDetails(p.templateId)),p.functionId&&p.authserv.getUserRowFunctions(p.functionId).subscribe(function(f){f&&(p.rowFunctions=f)})})}return(0,N.Z)(l,[{key:"ngOnInit",value:function(){this.myForm=this.fb.group({EduCompId:[this.EduCompId],Id:[this.templateId],presetTemplateId:[""],teacherUserId:["",m.kI.required],yearId:["",m.kI.required],stageId:["",m.kI.required],subjectId:["",m.kI.required],UnitRevisionID:[""],LessonID:[""],topicId:[""],Name:["",[m.kI.required,q.D.whiteSpace]],price:["",[m.kI.required,q.D.minusNum]],exam_minute:["",[m.kI.required,q.D.minusNum]],exam_hour:["",[m.kI.required,q.D.minusNum]],priceDiscount:[""],Avilable_Date_From:[""],priceDiscountType:[0],Avilable_Date_To:[""],fromHour:[""],toHour:[""],ResultDate:[""],ResultTime:[""],Individually_Purchased:[!1],repeatableExam:[!1],repeatableExam_Count:[!1],SendWhatsApp:[!1],CustomDiscountApplied:[!1],StudentRepeatExamCost:[""],Publish:[!1]}),this.DetailForm=this.fb.group({templateId:[this.templateId,m.kI.required],questionsLevel:["",m.kI.required],mark:["",[m.kI.required,q.D.minusNum]],questionsCount:["",[m.kI.required,q.D.bigZero]],unitRevisionID:["",m.kI.required],lessonID:["",m.kI.required],TopicID:[""]}),null!=this.templateId||(this.FormCtrl.stageId.disable(),this.FormCtrl.yearId.disable(),this.FormCtrl.subjectId.disable(),this.FormCtrl.UnitRevisionID.disable(),this.FormCtrl.LessonID.disable(),this.FormCtrl.topicId.disable(),this.DetailsCtrl.questionsCount.disable(),this.DetailsCtrl.unitRevisionID.disable(),this.DetailsCtrl.lessonID.disable(),this.DetailsCtrl.TopicID.disable(),this.DetailsCtrl.mark.disable()),this.EduCompId=this.authserv.getEduCompId(),this.branchId=this.authserv.getBranchId(),this.getTeachersByEducompId(this.EduCompId),this.getPresets(),this.FormCtrl.EduCompId.setValue(this.EduCompId),this.repeatableExamValidators()}},{key:"FormCtrl",get:function(){return this.myForm.controls}},{key:"DetailsCtrl",get:function(){return this.DetailForm.controls}},{key:"ngAfterViewInit",value:function(){var t=this;this.authserv.EduCompId.subscribe(function(i){t.EduCompId=i.EduCompId}),this.authserv.branchId.subscribe(function(i){t.branchId=i.branchId})}},{key:"addUpdateTemplate",value:function(){var t=this;this.submitted=!0;var i=this.myForm.value;i.Avilable_Date_From=this.datePipe.transform(this.FormCtrl.Avilable_Date_From.value),i.Avilable_Date_To=this.datePipe.transform(this.FormCtrl.Avilable_Date_To.value),i.ResultDate=this.datePipe.transform(this.FormCtrl.ResultDate.value),this.myForm.valid&&(this.spinner.show(),this.TemplatesService.addUpdateTemplate({presetTemplateId:i.presetTemplateId,template:i}).subscribe(function(o){console.log("createTemplate",o),o.returnValue&&(t.DetailsCtrl.templateId.setValue(o.returnValue),t.FormCtrl.Id.setValue(o.returnValue),t.getQuestionDetails(o.returnValue),t.submitted=!1,t.DetailsCtrl.questionsCount.enable(),t.DetailsCtrl.unitRevisionID.enable(),t.DetailsCtrl.lessonID.enable(),t.DetailsCtrl.TopicID.enable(),t.DetailsCtrl.mark.enable(),t.toastr.success("Done")),t.spinner.hide()}))}},{key:"getTemplateById",value:function(){var t=this;this.spinner.show(),this.TemplatesService.getTemplateById(this.templateId).subscribe(function(i){t.getStageByTeacherId(i.teacherUserId),t.FormCtrl.teacherUserId.setValue(i.teacherUserId),t.returnYears(i.stage_id),t.returnTeacherSubjects(i.educational_year_id),t.GetUnits(i.subjectId),t.GetLessons(i.UnitRevisionID),t.GetTopics(i.LessonID),t.myForm.patchValue(i),t.myForm.patchValue(i),t.FormCtrl.stageId.setValue(String(i.stage_id)),t.FormCtrl.yearId.setValue(String(i.educational_year_id)),t.FormCtrl.subjectId.setValue(String(i.subjectId)),t.FormCtrl.UnitRevisionID.setValue(String(i.UnitRevisionID)),t.FormCtrl.LessonID.setValue(String(i.LessonID)),t.templateName=i.Name;var o=i.exam_period_minute%60,r=(i.exam_period_minute-o)/60;t.FormCtrl.exam_minute.setValue(o),t.FormCtrl.exam_hour.setValue(r),t.FormCtrl.fromHour.setValue(i.fromHour),t.FormCtrl.toHour.setValue(i.toHour),t.GetUnitsForDetails(),t.spinner.hide()})}},{key:"addTemplateDetails",value:function(){var t=this;this.DetailSubmitted=!0,this.DetailForm.valid&&(this.spinner.show(),this.TemplatesService.addTemplateDetails(this.DetailForm.value).subscribe(function(o){1==o.returnValue?(t.DetailSubmitted=!1,t.getQuestionDetails(t.DetailsCtrl.templateId.value),t.DetailsCtrl.questionsCount.reset(),t.DetailsCtrl.unitRevisionID.setValue(""),t.DetailsCtrl.lessonID.setValue(""),t.DetailsCtrl.TopicID.setValue(""),t.DetailsCtrl.mark.reset(),t.toastr.success("Questiopn added")):t.toastr.error(o.returnString),t.spinner.hide()}))}},{key:"getQuestionDetails",value:function(t){var i=this;this.spinner.show(),this.TemplatesService.getQuestionDetails(t).subscribe(function(o){i.QuestionDetails=o,i.spinner.hide()})}},{key:"getPresets",value:function(){var t=this;this.spinner.show(),this.TemplatesService.getPresets(this.EduCompId).subscribe(function(i){t.Presets=i,t.spinner.hide()})}},{key:"DeleteDetails",value:function(t){var i=this;this.spinner.show(),this.TemplatesService.DeleteDetails(t.Id).subscribe(function(o){if(o.Id==t.Id){var r=i.QuestionDetails.findIndex(function(s){return s==t});i.QuestionDetails.splice(r,1),i.toastr.success(" Deleted")}i.spinner.hide()})}},{key:"openDeleateDialog",value:function(t){var i=this;this.dialog.open(W.F,{data:{msg:"",panelClass:"dialog-radius"}}).afterClosed().subscribe(function(o){o&&i.DeleteDetails(t)})}},{key:"getTeachersByEducompId",value:function(t){var i=this;this.GeneralService.getTeachersByEducompId(t).subscribe(function(o){i.Teachers=o.lstTeachers})}},{key:"getStageByTeacherId",value:function(t){var i=this;this.FormCtrl.stageId.setValue(""),this.FormCtrl.yearId.setValue(""),this.FormCtrl.subjectId.setValue(""),this.FormCtrl.UnitRevisionID.setValue(""),this.FormCtrl.LessonID.setValue(""),this.FormCtrl.topicId.setValue(""),""!=t?this.EducationalService.getStageByTeacherId(t).subscribe(function(o){i.stages=o,i.FormCtrl.stageId.enable()}):(this.FormCtrl.stageId.setValue(""),this.FormCtrl.stageId.disable(),this.FormCtrl.yearId.disable(),this.FormCtrl.subjectId.disable(),this.FormCtrl.UnitRevisionID.disable(),this.FormCtrl.LessonID.disable(),this.FormCtrl.topicId.disable())}},{key:"returnYears",value:function(t){var i=this;this.FormCtrl.yearId.setValue(""),this.FormCtrl.subjectId.setValue(""),this.FormCtrl.UnitRevisionID.setValue(""),this.FormCtrl.LessonID.setValue(""),this.FormCtrl.topicId.setValue(""),""!=t?this.EducationalService.returnYears(t).subscribe(function(o){i.years=o,i.FormCtrl.yearId.enable()}):(this.FormCtrl.yearId.setValue(""),this.FormCtrl.yearId.disable(),this.FormCtrl.subjectId.disable(),this.FormCtrl.UnitRevisionID.disable(),this.FormCtrl.LessonID.disable(),this.FormCtrl.topicId.disable())}},{key:"returnTeacherSubjects",value:function(t){var i=this;this.FormCtrl.subjectId.setValue(""),this.FormCtrl.UnitRevisionID.setValue(""),this.FormCtrl.LessonID.setValue(""),this.FormCtrl.topicId.setValue(""),""!=t?this.EducationalService.returnTeacherSubjects({yearId:t,teacherUserId:this.FormCtrl.teacherUserId.value}).subscribe(function(r){i.subjects=r,i.FormCtrl.subjectId.enable()}):(this.FormCtrl.subjectId.setValue(""),this.FormCtrl.subjectId.disable(),this.FormCtrl.UnitRevisionID.disable(),this.FormCtrl.LessonID.disable(),this.FormCtrl.topicId.disable())}},{key:"GetUnits",value:function(t){var i=this;this.FormCtrl.UnitRevisionID.setValue(""),this.FormCtrl.LessonID.setValue(""),this.FormCtrl.topicId.setValue(""),""!=t?this.EducationalService.GetUnits(t).subscribe(function(o){i.units=o,i.FormCtrl.UnitRevisionID.enable()}):(this.FormCtrl.UnitRevisionID.setValue(""),this.FormCtrl.UnitRevisionID.disable(),this.FormCtrl.LessonID.disable(),this.FormCtrl.topicId.disable())}},{key:"GetLessons",value:function(t){var i=this;this.FormCtrl.LessonID.setValue(""),this.FormCtrl.topicId.setValue(""),""!=t?this.EducationalService.GetLessons(t).subscribe(function(o){i.lessons=o,i.FormCtrl.LessonID.enable()}):(this.FormCtrl.LessonID.setValue(""),this.FormCtrl.LessonID.disable(),this.FormCtrl.topicId.disable())}},{key:"GetTopics",value:function(t){var i=this;this.FormCtrl.topicId.setValue(""),""!=t?this.EducationalService.GetTopics(t).subscribe(function(o){i.topics=o,i.FormCtrl.topicId.enable()}):(this.FormCtrl.topicId.setValue(""),this.FormCtrl.topicId.disable())}},{key:"GetUnitsForDetails",value:function(){var i,o,t=this;this.DetailsCtrl.unitRevisionID.setValue(""),this.DetailsCtrl.lessonID.setValue(""),this.DetailsCtrl.TopicID.setValue(""),(null===(i=this.FormCtrl.subjectId)||void 0===i?void 0:i.value)?this.EducationalService.GetUnits(null===(o=this.FormCtrl.subjectId)||void 0===o?void 0:o.value).subscribe(function(r){t.unitsForDetails=r,t.DetailsCtrl.unitRevisionID.enable()}):(this.DetailsCtrl.unitRevisionID.setValue(""),this.DetailsCtrl.UnitRevisionID.disable(),this.DetailsCtrl.lessonID.disable(),this.DetailsCtrl.TopicID.disable())}},{key:"GetLessonsForDetails",value:function(t){var i=this;this.DetailsCtrl.lessonID.setValue(""),this.DetailsCtrl.TopicID.setValue(""),""!=t?this.EducationalService.GetLessons(t).subscribe(function(o){i.lessonsForDetails=o,i.DetailsCtrl.lessonID.enable()}):(this.DetailsCtrl.lessonID.setValue(""),this.DetailsCtrl.lessonID.disable(),this.DetailsCtrl.TopicID.disable())}},{key:"GetTopicsForDetails",value:function(t){var i=this;this.DetailsCtrl.TopicID.setValue(""),""!=t?this.EducationalService.GetTopics(t).subscribe(function(o){i.topicsForDetails=o,i.DetailsCtrl.TopicID.enable()}):(this.DetailsCtrl.TopicID.setValue(""),this.DetailsCtrl.TopicID.disable())}},{key:"resetManual",value:function(){this.myForm.controls.teacherUserId.setValue(""),this.myForm.controls.yearId.setValue(""),this.myForm.controls.stageId.setValue(""),this.myForm.controls.subjectId.setValue(""),this.myForm.controls.UnitRevisionID.setValue(""),this.myForm.controls.lessonId.setValue(""),this.myForm.controls.topicId.setValue("")}},{key:"track",value:function(t,i){return i.Id}},{key:"repeatableExamValidators",value:function(){1==this.FormCtrl.repeatableExam.value?(this.FormCtrl.repeatableExam_Count.setValidators([m.kI.required,q.D.minusNum]),this.FormCtrl.StudentRepeatExamCost.setValidators([m.kI.required,q.D.minusNum])):(this.FormCtrl.repeatableExam_Count.clearValidators(),this.FormCtrl.repeatableExam_Count.reset(),this.FormCtrl.StudentRepeatExamCost.clearValidators(),this.FormCtrl.StudentRepeatExamCost.reset()),this.FormCtrl.repeatableExam_Count.updateValueAndValidity(),this.FormCtrl.StudentRepeatExamCost.updateValueAndValidity()}}]),l}();return n.\u0275fac=function(a){return new(a||n)(e.Y36(m.qu),e.Y36(A.gz),e.Y36(P._W),e.Y36(S.t2),e.Y36(J.e),e.Y36(Oe),e.Y36(F.uw),e.Y36(X.m),e.Y36(I.uU),e.Y36(ke.i))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-template"]],decls:239,vars:159,consts:[[1,"row"],[1,"col-12"],[4,"ngIf"],["mat-raised-button","","routerLink","../",1,"btn","bbtn-warning","bg-light-warning","float-right",3,"queryParams"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-3","col-12"],["appearance","legacy"],["formControlName","presetTemplateId"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","teacherUserId",3,"selectionChange"],["class","danger",4,"ngIf"],["formControlName","stageId",3,"selectionChange"],["formControlName","yearId",3,"selectionChange"],["formControlName","subjectId",3,"selectionChange"],["formControlName","UnitRevisionID",3,"selectionChange"],["formControlName","LessonID"],["matInput","","formControlName","Name"],[1,"col-md-2","col-12"],["matInput","","type","number","formControlName","exam_hour"],["matInput","","type","number","formControlName","exam_minute"],["matInput","","type","number","formControlName","price"],["matInput","","type","number","formControlName","priceDiscount"],["formControlName","priceDiscountType"],["value","1"],["value","2"],["matInput","","formControlName","Avilable_Date_From",3,"matDatepicker"],["matSuffix","",3,"for"],["fromDate",""],["matInput","","formControlName","Avilable_Date_To",3,"matDatepicker"],["toDate",""],["matInput","","type","time","formControlName","fromHour"],["matInput","","type","time","formControlName","toHour"],["matInput","","formControlName","ResultDate",3,"matDatepicker"],["resualtDate",""],["matInput","","type","time","formControlName","ResultTime"],["formControlName","Individually_Purchased",1,"row"],[3,"value"],["formControlName","repeatableExam",1,"row"],[3,"value","change"],["formControlName","SendWhatsApp",1,"row"],["formControlName","CustomDiscountApplied",1,"row"],["align","end"],["mat-raised-button","","class","btn btn-primary bg-light-info",3,"click",4,"ngIf"],["mat-raised-button","","class","btn btn-primary",3,"click",4,"ngIf"],["class","row",4,"ngIf"],[1,"danger"],["matInput","","type","number","formControlName","repeatableExam_Count"],["class","text-danger",4,"ngIf"],["matInput","","type","number","formControlName","StudentRepeatExamCost"],[1,"text-danger"],["mat-raised-button","",1,"btn","btn-primary","bg-light-info",3,"click"],[1,"fa","fa-plus"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],[1,"col-md-4","col-12"],["matInput","","type","number","formControlName","questionsCount"],["class","rtl has-error pull-right",4,"ngIf"],["formControlName","questionsLevel"],["matInput","","type","number","formControlName","mark"],["formControlName","unitRevisionID",3,"selectionChange"],["formControlName","lessonID",3,"selectionChange"],["formControlName","TopicID"],[1,"rtl","has-error","pull-right"],[1,"table","table-striped","table-hover","table-full-width","rtl"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","paginator-box",4,"ngIf"],[1,"text-center"],["mat-mini-fab","","color","warn","matTooltip","delete questions",3,"click"],[1,"paginator-box"],["dir","ltr","previousLabel","","nextLabel","",3,"maxSize","pageChange"]],template:function(a,t){if(1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e.YNc(4,Tt,3,3,"span",2),e.YNc(5,It,3,4,"span",2),e.TgZ(6,"a",3),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.TgZ(9,"mat-card-content",4),e.TgZ(10,"div",0),e.TgZ(11,"div",1),e.TgZ(12,"form",5),e.TgZ(13,"div",0),e.TgZ(14,"div",6),e.TgZ(15,"mat-form-field",7),e.TgZ(16,"mat-label"),e._uU(17,"Preset"),e.qZA(),e.TgZ(18,"mat-select",8),e.TgZ(19,"mat-option",9),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.YNc(22,At,2,2,"mat-option",10),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",6),e.TgZ(24,"mat-form-field",7),e.TgZ(25,"mat-label"),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"mat-select",11),e.NdJ("selectionChange",function(){return t.getStageByTeacherId(t.FormCtrl.teacherUserId.value)}),e.TgZ(29,"mat-option"),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.YNc(32,xt,2,2,"mat-option",10),e.qZA(),e.YNc(33,qt,2,1,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(34,"div",6),e.TgZ(35,"mat-form-field",7),e.TgZ(36,"mat-label"),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"mat-select",13),e.NdJ("selectionChange",function(){return t.returnYears(null==t.FormCtrl.stageId?null:t.FormCtrl.stageId.value)}),e.TgZ(40,"mat-option",9),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.YNc(43,yt,2,2,"mat-option",10),e.qZA(),e.YNc(44,Qt,2,1,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(45,"div",6),e.TgZ(46,"mat-form-field",7),e.TgZ(47,"mat-label"),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.TgZ(50,"mat-select",14),e.NdJ("selectionChange",function(){return t.returnTeacherSubjects(null==t.FormCtrl.yearId?null:t.FormCtrl.yearId.value)}),e.TgZ(51,"mat-option",9),e._uU(52),e.ALo(53,"translate"),e.qZA(),e.YNc(54,Ut,2,2,"mat-option",10),e.qZA(),e.YNc(55,wt,2,1,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(56,"div",6),e.TgZ(57,"mat-form-field",7),e.TgZ(58,"mat-label"),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.TgZ(61,"mat-select",15),e.NdJ("selectionChange",function(){return t.GetUnits(null==t.FormCtrl.subjectId?null:t.FormCtrl.subjectId.value),t.GetUnitsForDetails()}),e.TgZ(62,"mat-option",9),e._uU(63),e.ALo(64,"translate"),e.qZA(),e.YNc(65,kt,2,2,"mat-option",10),e.qZA(),e.YNc(66,Dt,2,1,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(67,"div",6),e.TgZ(68,"mat-form-field",7),e.TgZ(69,"mat-label"),e._uU(70),e.ALo(71,"translate"),e.qZA(),e.TgZ(72,"mat-select",16),e.NdJ("selectionChange",function(){return t.GetLessons(null==t.FormCtrl.UnitRevisionID?null:t.FormCtrl.UnitRevisionID.value)}),e.TgZ(73,"mat-option",9),e._uU(74),e.ALo(75,"translate"),e.qZA(),e.YNc(76,Et,2,2,"mat-option",10),e.qZA(),e.YNc(77,Yt,2,1,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(78,"div",6),e.TgZ(79,"mat-form-field",7),e.TgZ(80,"mat-label"),e._uU(81),e.ALo(82,"translate"),e.qZA(),e.TgZ(83,"mat-select",17),e.TgZ(84,"mat-option",9),e._uU(85),e.ALo(86,"translate"),e.qZA(),e.YNc(87,Jt,2,2,"mat-option",10),e.qZA(),e.YNc(88,Vt,2,1,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(89,"div",6),e.TgZ(90,"mat-form-field",7),e.TgZ(91,"mat-label"),e._uU(92),e.ALo(93,"translate"),e.qZA(),e._UZ(94,"input",18),e.YNc(95,Gt,3,2,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(96,"div",19),e.TgZ(97,"mat-form-field",7),e.TgZ(98,"mat-label"),e._uU(99),e.ALo(100,"translate"),e.qZA(),e._UZ(101,"input",20),e.YNc(102,Ht,3,2,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(103,"div",19),e.TgZ(104,"mat-form-field",7),e.TgZ(105,"mat-label"),e._uU(106),e.ALo(107,"translate"),e.qZA(),e._UZ(108,"input",21),e.YNc(109,zt,3,2,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(110,"div",19),e.TgZ(111,"mat-form-field",7),e.TgZ(112,"mat-label"),e._uU(113),e.ALo(114,"translate"),e.qZA(),e._UZ(115,"input",22),e.YNc(116,Kt,3,2,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(117,"div",6),e.TgZ(118,"mat-form-field",7),e.TgZ(119,"mat-label"),e._uU(120),e.ALo(121,"translate"),e.qZA(),e._UZ(122,"input",23),e.qZA(),e.qZA(),e.TgZ(123,"div",6),e.TgZ(124,"mat-form-field",7),e.TgZ(125,"mat-label"),e._uU(126),e.ALo(127,"translate"),e.qZA(),e.TgZ(128,"mat-select",24),e.TgZ(129,"mat-option",9),e._uU(130),e.ALo(131,"translate"),e.qZA(),e.TgZ(132,"mat-option",25),e._uU(133,"\u0639\u0627\u0645"),e.qZA(),e.TgZ(134,"mat-option",26),e._uU(135,"\u062e\u0627\u0635"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(136,"div",6),e.TgZ(137,"mat-form-field",7),e.TgZ(138,"mat-label"),e._uU(139),e.ALo(140,"translate"),e.qZA(),e._UZ(141,"input",27),e._UZ(142,"mat-datepicker-toggle",28),e._UZ(143,"mat-datepicker",null,29),e.qZA(),e.qZA(),e.TgZ(145,"div",6),e.TgZ(146,"mat-form-field",7),e.TgZ(147,"mat-label"),e._uU(148),e.ALo(149,"translate"),e.qZA(),e._UZ(150,"input",30),e._UZ(151,"mat-datepicker-toggle",28),e._UZ(152,"mat-datepicker",null,31),e.qZA(),e.qZA(),e.TgZ(154,"div",6),e.TgZ(155,"mat-form-field",7),e.TgZ(156,"mat-label"),e._uU(157),e.ALo(158,"translate"),e.qZA(),e._UZ(159,"input",32),e.qZA(),e.qZA(),e.TgZ(160,"div",6),e.TgZ(161,"mat-form-field",7),e.TgZ(162,"mat-label"),e._uU(163),e.ALo(164,"translate"),e.qZA(),e._UZ(165,"input",33),e.qZA(),e.qZA(),e.TgZ(166,"div",6),e.TgZ(167,"mat-form-field",7),e.TgZ(168,"mat-label"),e._uU(169),e.ALo(170,"translate"),e.qZA(),e._UZ(171,"input",34),e._UZ(172,"mat-datepicker-toggle",28),e._UZ(173,"mat-datepicker",null,35),e.qZA(),e.qZA(),e.TgZ(175,"div",6),e.TgZ(176,"mat-form-field",7),e.TgZ(177,"mat-label"),e._uU(178),e.ALo(179,"translate"),e.qZA(),e._UZ(180,"input",36),e.qZA(),e.qZA(),e.TgZ(181,"div",6),e.TgZ(182,"mat-label"),e._uU(183),e.ALo(184,"translate"),e.qZA(),e.TgZ(185,"mat-radio-group",37),e.TgZ(186,"div",6),e.TgZ(187,"mat-radio-button",38),e._uU(188),e.ALo(189,"translate"),e.qZA(),e.qZA(),e.TgZ(190,"div",6),e.TgZ(191,"mat-radio-button",38),e._uU(192),e.ALo(193,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(194,"div",6),e.TgZ(195,"mat-label"),e._uU(196),e.ALo(197,"translate"),e.qZA(),e.TgZ(198,"mat-radio-group",39),e.TgZ(199,"div",6),e.TgZ(200,"mat-radio-button",40),e.NdJ("change",function(){return t.repeatableExamValidators()}),e._uU(201),e.ALo(202,"translate"),e.qZA(),e.qZA(),e.TgZ(203,"div",6),e.TgZ(204,"mat-radio-button",40),e.NdJ("change",function(){return t.repeatableExamValidators()}),e._uU(205),e.ALo(206,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(207,"div",6),e.TgZ(208,"mat-label"),e._uU(209),e.ALo(210,"translate"),e.qZA(),e.TgZ(211,"mat-radio-group",41),e.TgZ(212,"div",6),e.TgZ(213,"mat-radio-button",38),e._uU(214),e.ALo(215,"translate"),e.qZA(),e.qZA(),e.TgZ(216,"div",6),e.TgZ(217,"mat-radio-button",38),e._uU(218),e.ALo(219,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(220,"div",6),e.TgZ(221,"mat-label"),e._uU(222),e.ALo(223,"translate"),e.qZA(),e.TgZ(224,"mat-radio-group",42),e.TgZ(225,"div",6),e.TgZ(226,"mat-radio-button",38),e._uU(227),e.ALo(228,"translate"),e.qZA(),e.qZA(),e.TgZ(229,"div",6),e.TgZ(230,"mat-radio-button",38),e._uU(231),e.ALo(232,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(233,rn,15,8,"ng-container",2),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(234,"mat-card-actions",43),e.YNc(235,sn,4,3,"button",44),e.YNc(236,un,3,3,"button",45),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(237,xn,75,45,"div",46),e.YNc(238,Nn,42,33,"div",46)),2&a){var i=e.MAs(144),o=e.MAs(153),r=e.MAs(174);e.xp6(4),e.Q6J("ngIf",null==t.FormCtrl.Id.value),e.xp6(1),e.Q6J("ngIf",null!=t.FormCtrl.Id.value),e.xp6(1),e.Q6J("queryParams",e.VKq(157,wn,t.functionId)),e.xp6(1),e.hij(" ",e.lcZ(8,79,"General.Back")," "),e.xp6(5),e.Q6J("formGroup",t.myForm),e.xp6(8),e.hij(" ",e.lcZ(21,81,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.Presets),e.xp6(4),e.Oqu(e.lcZ(27,83,"Material.Teacher")),e.xp6(4),e.hij(" ",e.lcZ(31,85,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.Teachers),e.xp6(1),e.Q6J("ngIf",(null==t.FormCtrl.teacherUserIdCtrl?null:t.FormCtrl.teacherUserIdCtrl.invalid)&&((null==t.FormCtrl.teacherUserIdCtrl?null:t.FormCtrl.teacherUserIdCtrl.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(38,87,"Navbar.EducationalStage")),e.xp6(4),e.hij(" ",e.lcZ(42,89,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.stages),e.xp6(1),e.Q6J("ngIf",(null==t.FormCtrl.stageId?null:t.FormCtrl.stageId.invalid)&&((null==t.FormCtrl.stageId?null:t.FormCtrl.stageId.touched)||t.submitted)),e.xp6(4),e.hij(" ",e.lcZ(49,91,"labels.EducationalYear")," "),e.xp6(4),e.hij(" ",e.lcZ(53,93,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.years),e.xp6(1),e.Q6J("ngIf",(null==t.FormCtrl.yearId?null:t.FormCtrl.yearId.invalid)&&((null==t.FormCtrl.yearId?null:t.FormCtrl.yearId.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(60,95,"Material.Subjects")),e.xp6(4),e.hij(" ",e.lcZ(64,97,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.subjects),e.xp6(1),e.Q6J("ngIf",(null==t.FormCtrl.subjectId?null:t.FormCtrl.subjectId.invalid)&&((null==t.FormCtrl.subjectId?null:t.FormCtrl.subjectId.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(71,99,"labels.Unit")),e.xp6(4),e.hij(" ",e.lcZ(75,101,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.units),e.xp6(1),e.Q6J("ngIf",(null==t.FormCtrl.UnitRevisionID?null:t.FormCtrl.UnitRevisionID.invalid)&&((null==t.FormCtrl.UnitRevisionID?null:t.FormCtrl.UnitRevisionID.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(82,103,"labels.Lesson")),e.xp6(4),e.hij(" ",e.lcZ(86,105,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.lessons),e.xp6(1),e.Q6J("ngIf",(null==t.FormCtrl.LessonID?null:t.FormCtrl.LessonID.invalid)&&((null==t.FormCtrl.LessonID?null:t.FormCtrl.LessonID.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(93,107,"labels.TemplateName")),e.xp6(3),e.Q6J("ngIf",(null==t.FormCtrl.Name?null:t.FormCtrl.Name.invalid)&&((null==t.FormCtrl.Name?null:t.FormCtrl.Name.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(100,109,"labels.ExamHours")),e.xp6(3),e.Q6J("ngIf",(null==t.FormCtrl.exam_hour?null:t.FormCtrl.exam_hour.invalid)&&((null==t.FormCtrl.exam_hour?null:t.FormCtrl.exam_hour.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(107,111,"labels.ExamMinute")),e.xp6(3),e.Q6J("ngIf",(null==t.FormCtrl.exam_minute?null:t.FormCtrl.exam_minute.invalid)&&((null==t.FormCtrl.exam_minute?null:t.FormCtrl.exam_minute.touched)||t.submitted)),e.xp6(4),e.hij("",e.lcZ(114,113,"labels.ExamPrice")," "),e.xp6(3),e.Q6J("ngIf",(null==t.FormCtrl.price?null:t.FormCtrl.price.invalid)&&((null==t.FormCtrl.price?null:t.FormCtrl.price.touched)||t.submitted)),e.xp6(4),e.hij(" ",e.lcZ(121,115,"labels.Discount")," "),e.xp6(6),e.hij(" ",e.lcZ(127,117,"labels.DiscountType")," "),e.xp6(4),e.hij("",e.lcZ(131,119,"General.Choose")," "),e.xp6(9),e.hij(" ",e.lcZ(140,121,"labels.FromDate"),""),e.xp6(2),e.Q6J("matDatepicker",i),e.xp6(1),e.Q6J("for",i),e.xp6(6),e.hij(" ",e.lcZ(149,123,"labels.ToDate"),""),e.xp6(2),e.Q6J("matDatepicker",o),e.xp6(1),e.Q6J("for",o),e.xp6(6),e.Oqu(e.lcZ(158,125,"labels.FromTime")),e.xp6(6),e.Oqu(e.lcZ(164,127,"labels.ToTime")),e.xp6(6),e.hij(" ",e.lcZ(170,129,"labels.ExamResultDate"),""),e.xp6(2),e.Q6J("matDatepicker",r),e.xp6(1),e.Q6J("for",r),e.xp6(6),e.hij(" ",e.lcZ(179,131,"labels.examResultTime")," "),e.xp6(5),e.hij(" ",e.lcZ(184,133,"labels.SellExamOnly")," "),e.xp6(4),e.Q6J("value",!1),e.xp6(1),e.hij(" ",e.lcZ(189,135,"labels.No")," "),e.xp6(3),e.Q6J("value",!0),e.xp6(1),e.hij(" ",e.lcZ(193,137,"labels.Yes")," "),e.xp6(4),e.hij(" ",e.lcZ(197,139,"labels.RepeatedExam")," "),e.xp6(4),e.Q6J("value",!1),e.xp6(1),e.hij(" ",e.lcZ(202,141,"labels.No")," "),e.xp6(3),e.Q6J("value",!0),e.xp6(1),e.hij(" ",e.lcZ(206,143,"labels.Yes")," "),e.xp6(4),e.hij(" ",e.lcZ(210,145,"Navbar.SendWhatsappMsg")," "),e.xp6(4),e.Q6J("value",!1),e.xp6(1),e.hij(" ",e.lcZ(215,147,"labels.No")," "),e.xp6(3),e.Q6J("value",!0),e.xp6(1),e.hij(" ",e.lcZ(219,149,"labels.Yes")," "),e.xp6(4),e.hij(" ",e.lcZ(223,151,"labels.CustomDiscount")," "),e.xp6(4),e.Q6J("value",!1),e.xp6(1),e.hij(" ",e.lcZ(228,153,"labels.No")," "),e.xp6(3),e.Q6J("value",!0),e.xp6(1),e.hij(" ",e.lcZ(232,155,"labels.Yes")," "),e.xp6(2),e.Q6J("ngIf",1==(null==t.FormCtrl.repeatableExam?null:t.FormCtrl.repeatableExam.value)),e.xp6(2),e.Q6J("ngIf",null==t.FormCtrl.Id.value),e.xp6(1),e.Q6J("ngIf",null!=t.FormCtrl.Id.value),e.xp6(1),e.Q6J("ngIf",null!=t.FormCtrl.Id.value),e.xp6(1),e.Q6J("ngIf",null!=t.FormCtrl.Id.value)}},directives:[Z.a8,Z.n5,I.O5,y.zs,A.yS,Z.dn,m._Y,m.JL,m.sg,C.KE,C.hX,Se.gD,m.JJ,m.u,oe.ey,I.sg,j.Nt,m.Fj,m.wV,xe.hl,xe.nW,C.R9,xe.Mq,K.VQ,K.U0,Z.hq,C.bx,y.lW,Le.gM,be.Hw,ie.LS,Ee.Lv],pipes:[D.X$,ie._s],styles:[""]}),n}(),Ye=v(7762),ee=v(3938),Be=v(7446);function Sn(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function Dn(n,l){if(1&n&&(e.TgZ(0,"mat-hint",33),e.YNc(1,Sn,3,3,"span",29),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.question_type_id||null==a.question_type_id.errors?null:a.question_type_id.errors.required)}}function En(n,l){if(1&n&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.teacherUserId),e.xp6(1),e.hij(" ",a.teacher_ar_name," ")}}function Ln(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function Yn(n,l){if(1&n&&(e.TgZ(0,"mat-hint",33),e.YNc(1,Ln,3,3,"span",29),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.teacherUserId||null==a.teacherUserId.errors?null:a.teacherUserId.errors.required)}}function Jn(n,l){if(1&n&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function jn(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function Vn(n,l){if(1&n&&(e.TgZ(0,"mat-hint",33),e.YNc(1,jn,3,3,"span",29),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.main_subject_id||null==a.main_subject_id.errors?null:a.main_subject_id.errors.required)}}function Mn(n,l){if(1&n&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function Pn(n,l){if(1&n&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function Gn(n,l){if(1&n&&(e.TgZ(0,"mat-option",11),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function On(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Bn(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function Hn(n,l){if(1&n&&(e.TgZ(0,"mat-hint",33),e.YNc(1,On,3,3,"span",29),e.YNc(2,Bn,3,3,"span",29),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.mark||null==a.mark.errors?null:a.mark.errors.required),e.xp6(1),e.Q6J("ngIf",null==a.mark||null==a.mark.errors?null:a.mark.errors.minusNum)}}function Rn(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function $n(n,l){if(1&n&&(e.TgZ(0,"mat-hint",33),e.YNc(1,Rn,3,3,"span",29),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==a.question_ar_text||null==a.question_ar_text.errors?null:a.question_ar_text.errors.required)||(null==a.question_ar_text||null==a.question_ar_text.errors?null:a.question_ar_text.errors.whiteSpace))}}function zn(n,l){1&n&&(e.TgZ(0,"mat-checkbox",34),e._uU(1," Remove Image "),e.qZA()),2&n&&e.Q6J("value",!0)}function Wn(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Xn(n,l){if(1&n&&(e.TgZ(0,"mat-hint",33),e.YNc(1,Wn,3,3,"span",29),e.qZA()),2&n){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==a.perfect_answer||null==a.perfect_answer.errors?null:a.perfect_answer.errors.required)||(null==a.perfect_answer||null==a.perfect_answer.errors?null:a.perfect_answer.errors.whiteSpace))}}function Kn(n,l){if(1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"mat-form-field",9),e.TgZ(2,"mat-label"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"input",35),e.YNc(6,Xn,2,1,"mat-hint",12),e.qZA(),e.qZA()),2&n){var a=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,2,"labels.perfect_answer")," "),e.xp6(3),e.Q6J("ngIf",a.perfect_answer.invalid&&(a.perfect_answer.touched||a.submitted))}}function ea(n,l){1&n&&(e.TgZ(0,"mat-checkbox",34),e._uU(1," Remove Image "),e.qZA()),2&n&&e.Q6J("value",!0)}function ta(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"mat-card",40),e.TgZ(1,"mat-card-subtitle"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"mat-card-content",41),e.TgZ(5,"div",2),e.TgZ(6,"div",0),e.TgZ(7,"mat-form-field",9),e.TgZ(8,"mat-label"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e._UZ(11,"input",42),e.qZA(),e.qZA(),e.TgZ(12,"div",0),e.TgZ(13,"div",2),e.TgZ(14,"div",22),e.TgZ(15,"mat-label"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"input",23),e.NdJ("change",function(r){var u=e.CHM(a).index;return e.oxw(2).onChange(r,u)}),e.qZA(),e.qZA(),e.TgZ(19,"div",24),e.TgZ(20,"div",25),e.YNc(21,ea,2,1,"mat-checkbox",26),e._UZ(22,"img",27),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){var t=l.$implicit,i=l.index;e.xp6(2),e.AsE(" ",e.lcZ(3,9,"labels.AnswerNumber"),"(",i+1,") "),e.xp6(2),e.Q6J("formGroupName",i),e.xp6(5),e.AsE(" ",e.lcZ(10,11,"labels.AnswerText"),"(",i+1,") "),e.xp6(7),e.AsE(" ",e.lcZ(17,13,"labels.AnswerPic")," (",i+1,") "),e.xp6(5),e.Q6J("ngIf",null!==(null==t.value?null:t.value.ChoiceAttachPath)),e.xp6(1),e.Q6J("src",null==t.value?null:t.value.ChoiceAttachPath,e.LSH)}}function na(n,l){if(1&n&&(e.ynx(0),e.YNc(1,ta,23,15,"mat-card",36),e.TgZ(2,"mat-card",37),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-card-content"),e.TgZ(7,"mat-radio-group",38),e.TgZ(8,"div",39),e.TgZ(9,"mat-radio-button",11),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.qZA(),e.TgZ(12,"div",39),e.TgZ(13,"mat-radio-button",11),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.qZA(),e.TgZ(16,"div",39),e.TgZ(17,"mat-radio-button",11),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.qZA(),e.TgZ(20,"div",39),e.TgZ(21,"mat-radio-button",11),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngForOf",a.choices.controls),e.xp6(3),e.hij(" ",e.lcZ(5,10,"labels.ChooseCorrectAnswer")," "),e.xp6(5),e.Q6J("value",0),e.xp6(1),e.hij(" ",e.lcZ(11,12,"labels.AnswerOne")," "),e.xp6(3),e.Q6J("value",1),e.xp6(1),e.hij(" ",e.lcZ(15,14,"labels.AnswerTwo")," "),e.xp6(3),e.Q6J("value",2),e.xp6(1),e.hij(" ",e.lcZ(19,16,"labels.AnswerThree")," "),e.xp6(3),e.Q6J("value",3),e.xp6(1),e.hij(" ",e.lcZ(23,18,"labels.AnswerFour")," ")}}function aa(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){return e.CHM(a),e.oxw().addUpdateQuestion()}),e._UZ(1,"i",44),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.Add")," "))}function ia(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"button",45),e.NdJ("click",function(){return e.CHM(a),e.oxw().addUpdateQuestion()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"General.Update")," "))}var oa=function(l){return{functionId:l}},la=function(){var n=function(){function l(a,t,i,o,r,s,u,d,c,h){var p=this;(0,w.Z)(this,l),this.router=a,this.route=t,this.fb=i,this.toastr=o,this.spinner=r,this.authService=s,this.examsService=u,this.GeneralService=d,this.datePipe=c,this.EducationalService=h,this.questionID=null,this.submitted=!1,this.QuestionAttachPath=null,this.questionsInputs=[{choice_id:0,choice_text:"",thumbnailPic:"",ChoiceAttachPath:"",remove_image:!1},{choice_id:1,choice_text:"",thumbnailPic:"",ChoiceAttachPath:"",remove_image:!1},{choice_id:2,choice_text:"",thumbnailPic:"",ChoiceAttachPath:"",remove_image:!1},{choice_id:3,choice_text:"",thumbnailPic:"",ChoiceAttachPath:"",remove_image:!1}],this.route.queryParamMap.subscribe(function(_){p.questionID=_.get("questionId"),p.functionId=Number(_.get("functionId")),p.functionId&&p.authService.getUserRowFunctions(p.functionId).subscribe(function(f){f&&(p.rowFunctions=f)}),p.questionID&&p.getQuestionByID(p.questionID)})}return(0,N.Z)(l,[{key:"choices",get:function(){return this.myForm.get("choices")}},{key:"QuestionId",get:function(){return this.myForm.get("questionBank.question.id")}},{key:"question_type_id",get:function(){return this.myForm.get("questionBank.question.question_type_id")}},{key:"teacherUserId",get:function(){return this.myForm.get("questionBank.question.teacherUserId")}},{key:"picked_choice_index",get:function(){return this.myForm.get("picked_choice_index")}},{key:"QuestionBankId",get:function(){return this.myForm.get("questionBank.Id")}},{key:"main_subject_id",get:function(){return this.myForm.get("questionBank.main_subject_id")}},{key:"question_id",get:function(){return this.myForm.get("questionBank.question_id")}},{key:"unitId",get:function(){return this.myForm.get("questionBank.unitId")}},{key:"lessonId",get:function(){return this.myForm.get("questionBank.lessonId")}},{key:"topicId",get:function(){return this.myForm.get("questionBank.topicId")}},{key:"difficulty_level",get:function(){return this.myForm.get("questionBank.difficulty_level")}},{key:"question_ar_text",get:function(){return this.myForm.get("questionBank.question.question_ar_text")}},{key:"perfect_answer",get:function(){return this.myForm.get("questionBank.question.perfect_answer")}},{key:"mark",get:function(){return this.myForm.get("questionBank.mark")}},{key:"remove_image",get:function(){return this.myForm.get("questionBank.question.remove_image")}},{key:"thumbnailPic",get:function(){return this.myForm.get("questionBank.question.thumbnailPic")}},{key:"FormCtrl",get:function(){return this.myForm.controls}},{key:"ngOnInit",value:function(){this.EduCompId=this.authService.getEduCompId(),this.branchId=this.authService.getBranchId(),this.getTeachersByEducompId(this.EduCompId),this.myForm=this.fb.group({questionBank:this.fb.group({Id:[0],main_subject_id:["",m.kI.required],unitId:[""],lessonId:[""],topicId:[""],mark:[,[m.kI.required,q.D.minusNum]],difficulty_level:["1",[m.kI.required]],question_id:[0],question:this.fb.group({id:[0,[m.kI.required]],question_type_id:["",m.kI.required],teacherUserId:[""],question_ar_text:[""],perfect_answer:[],remove_image:[!1],thumbnailPic:[null]})}),picked_choice_index:[null],choices:this.fb.array([])}),this.changeQuestionType(),this.setDefaultChoises()}},{key:"ngAfterViewInit",value:function(){var t=this;this.authService.EduCompId.subscribe(function(i){t.EduCompId=i.EduCompId,t.getTeachersByEducompId(i.EduCompId)}),this.authService.branchId.subscribe(function(i){t.branchId=i.branchId})}},{key:"setDefaultChoises",value:function(){var t=this;this.questionsInputs.map(function(i){return t.choices.push(t.fb.group({choice_id:i.choice_id,choice_text:i.choice_text,thumbnailPic:i.thumbnailPic,remove_image:i.remove_image}))})}},{key:"getQuestionByID",value:function(t){var i=this;this.spinner.show(),this.examsService.getQuestionByID(t).subscribe(function(o){var r,s,u,d,c,h,p,_,f,T,b,x,k,L,Y,G,O;if(null!=o.QuestionId)if(null===(r=i.teacherUserId)||void 0===r||r.enable(),null===(s=i.main_subject_id)||void 0===s||s.enable(),i.getSubjectByTeacherId(o.TeacherUserId),i.GetUnits(o.SubjectId),i.GetLessons(o.UnitId),i.GetTopics(o.LessonId),null===(u=i.QuestionBankId)||void 0===u||u.setValue(o.QuestionBankId),null===(d=i.QuestionId)||void 0===d||d.setValue(o.QuestionId),null===(c=i.question_id)||void 0===c||c.setValue(o.QuestionId),null===(h=i.main_subject_id)||void 0===h||h.setValue(String(o.SubjectId)),null===(p=i.question_type_id)||void 0===p||p.setValue(o.QuestionTypeId),null===(_=i.teacherUserId)||void 0===_||_.setValue(o.TeacherUserId),null===(f=i.unitId)||void 0===f||f.setValue(String(o.UnitId)),null===(T=i.lessonId)||void 0===T||T.setValue(String(o.LessonId)),null===(b=i.topicId)||void 0===b||b.setValue(String(o.TopicId)),null===(x=i.difficulty_level)||void 0===x||x.setValue(o.DifficultyLevel),null===(k=i.question_ar_text)||void 0===k||k.setValue(o.QuestionTextAr),null===(L=i.perfect_answer)||void 0===L||L.setValue(o.PerfectAnswer),null===(Y=i.mark)||void 0===Y||Y.setValue(o.Mark),null===(G=i.thumbnailPic)||void 0===G||G.setValue(o.QuestionAttachId),i.QuestionAttachPath=null!=o.QuestionAttachPath?"mozakretyapi"+o.QuestionAttachPath:null,0!=o.Choices.length){i.choices.clear(),i.questionsInputs=o.Choices,i.questionsInputs.map(function(U){return i.choices.push(i.fb.group({choice_id:U.ChoiceId,choice_text:U.ChoiceText,thumbnailPic:U.thumbnailPic,ChoiceAttachPath:null!=U.ChoiceAttachPath?"mozakretyapi"+U.ChoiceAttachPath:null,remove_image:U.remove_image||!1}))});var B,M=(0,Ye.Z)(o.Choices);try{for(M.s();!(B=M.n()).done;)if(1==B.value.IsCorrect){var R=o.Choices.findIndex(function(U){return!0===U.IsCorrect});null===(O=i.picked_choice_index)||void 0===O||O.setValue(R)}}catch(U){M.e(U)}finally{M.f()}}else i.setDefaultChoises();i.spinner.hide()})}},{key:"addUpdateQuestion",value:function(){var i,o,t=this;if(this.submitted=!0,2==(null===(i=this.question_type_id)||void 0===i?void 0:i.value)||3==(null===(o=this.question_type_id)||void 0===o?void 0:o.value)){if(!this.choices.value[0].thumbnailPic&&!this.choices.value[0].choice_text)return void this.toastr.warning("Must Enter answer 1 text or picture");if(!this.choices.value[1].thumbnailPic&&!this.choices.value[1].choice_text)return void this.toastr.warning("Must Enter answer 2 text or picture");if(!this.choices.value[2].thumbnailPic&&!this.choices.value[2].choice_text)return void this.toastr.warning("Must Enter answer 3 text or picture");if(!this.choices.value[3].thumbnailPic&&!this.choices.value[3].choice_text)return void this.toastr.warning("Must Enter answer 4 text or picture");if(this.FormCtrl.picked_choice_index.value<0)return void this.toastr.warning("Must Choose Correct answer ")}console.log("myFormValue ",this.myForm.value),this.myForm.valid&&(this.spinner.show(),this.examsService.addEditQuestion(this.EduCompId,this.myForm.value).subscribe(function(r){null!=r.questionId&&(t.question_id.setValue(r.questionId),t.questionID=r.questionId,t.toastr.success("Question Added Successful")),t.spinner.hide()}))}},{key:"getTeachersByEducompId",value:function(t){var o,r,s,u,d,c,i=this;null!=t?this.GeneralService.getTeachersByEducompId(t).subscribe(function(h){var p;i.Teachers=h.lstTeachers,null===(p=i.teacherUserId)||void 0===p||p.enable()}):(null===(o=this.teacherUserId)||void 0===o||o.setValue(""),null===(r=this.teacherUserId)||void 0===r||r.disable(),null===(s=this.main_subject_id)||void 0===s||s.disable(),null===(u=this.unitId)||void 0===u||u.disable(),null===(d=this.lessonId)||void 0===d||d.disable(),null===(c=this.topicId)||void 0===c||c.disable())}},{key:"getSubjectByTeacherId",value:function(t){var i=this;null!=t&&this.GeneralService.getSubjectByTeacherId(t).subscribe(function(o){i.subjects=o.lsts})}},{key:"GetUnits",value:function(t){var o,r,s,u,i=this;""!=t?this.EducationalService.GetUnits(t).subscribe(function(d){var c;i.units=d,null===(c=i.unitId)||void 0===c||c.enable()}):(null===(o=this.unitId)||void 0===o||o.setValue(""),null===(r=this.unitId)||void 0===r||r.disable(),null===(s=this.lessonId)||void 0===s||s.disable(),null===(u=this.topicId)||void 0===u||u.disable())}},{key:"GetLessons",value:function(t){var o,r,s,i=this;""!=t?this.EducationalService.GetLessons(t).subscribe(function(u){var d;i.lessons=u,null===(d=i.lessonId)||void 0===d||d.enable()}):(null===(o=this.lessonId)||void 0===o||o.setValue(""),null===(r=this.lessonId)||void 0===r||r.disable(),null===(s=this.topicId)||void 0===s||s.disable())}},{key:"GetTopics",value:function(t){var o,r,i=this;""!=t?this.EducationalService.GetTopics(t).subscribe(function(s){var u;i.topics=s,null===(u=i.topicId)||void 0===u||u.enable()}):(null===(o=this.topicId)||void 0===o||o.setValue(""),null===(r=this.topicId)||void 0===r||r.disable())}},{key:"setMainSubjectToForm",value:function(t){var i;null===(i=this.main_subject_id)||void 0===i||i.setValue(t)}},{key:"changeQuestionType",value:function(){var i,t=this;null===(i=this.question_type_id)||void 0===i||i.valueChanges.subscribe(function(o){t.changeValidators()})}},{key:"changeValidators",value:function(){var t,i=null===(t=this.question_type_id)||void 0===t?void 0:t.value;1==i&&this.perfect_answer.setValidators([m.kI.required,q.D.whiteSpace]),(2==i||3==i)&&(this.perfect_answer.clearValidators(),this.perfect_answer.reset()),this.perfect_answer.updateValueAndValidity()}},{key:"resetManual",value:function(){this.myForm.reset(),this.submitted=!1}},{key:"onChange",value:function(t,i){var o=this,r=t.target.files[0].name,s=t.target.files[0].size,u=t.target.files[0].type,d=t.target.files[0].lastModified,c=t.target.files[0].lastModifiedDate;if(t.target.files){var h=new FileReader;h.readAsDataURL(t.target.files[0]),h.onload=function(p){var _,f=p.target.result,T={FileAsBase64:f,name:r,size:s,type:u,LastModified:d,LastModifiedDate:c};if(-1==i)null===(_=o.thumbnailPic)||void 0===_||_.setValue(T),o.QuestionAttachPath=f;else{var x,b=(0,Ye.Z)(o.choices.value);try{for(b.s();!(x=b.n()).done;){var k=x.value;if(o.choices.value.indexOf(k)===i){k.thumbnailPic=T,k.ChoiceAttachPath=f;break}}}catch(Y){b.e(Y)}finally{b.f()}}}}}}]),l}();return n.\u0275fac=function(a){return new(a||n)(e.Y36(A.F0),e.Y36(A.gz),e.Y36(m.qu),e.Y36(P._W),e.Y36(S.t2),e.Y36(J.e),e.Y36(ee.R),e.Y36(X.m),e.Y36(I.uU),e.Y36(ke.i))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-question"]],decls:134,vars:91,consts:[[1,"col-12"],[1,"content-header"],[1,"row"],["mat-raised-button","","routerLink","../index",1,"btn","btn-warning","bg-light-warning","float-right",3,"queryParams"],[1,"container-fluid"],[3,"formGroup"],["formGroupName","questionBank"],["formGroupName","question"],[1,"col-md-3","col-12"],["appearance","legacy"],["formControlName","question_type_id",3,"selectionChange"],[3,"value"],["class","text-danger",4,"ngIf"],["formControlName","teacherUserId",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","main_subject_id",3,"selectionChange"],["formControlName","unitId",3,"selectionChange"],["formControlName","lessonId",3,"selectionChange"],["formControlName","topicId"],["formControlName","difficulty_level"],["matInput","","type","number","formControlName","mark"],["matInput","","type","text","formControlName","question_ar_text"],[1,"col-md-4","col-12"],["type","file","accept","image/*",1,"form-control","font-dro","clearInputs",3,"change"],[1,"col-md-8","col-12"],[1,"question-img"],["formControlName","remove_image","class","remove_image",3,"value",4,"ngIf"],[1,"img-fluid",3,"src"],["class","col-12",4,"ngIf"],[4,"ngIf"],["align","end"],["mat-raised-button","","class","btn btn-primary bg-light-info",3,"click",4,"ngIf"],["mat-raised-button","","class","btn btn-primary",3,"click",4,"ngIf"],[1,"text-danger"],["formControlName","remove_image",1,"remove_image",3,"value"],["matInput","","type","text","formControlName","perfect_answer"],["formArrayName","choices","class","card bg-light",4,"ngFor","ngForOf"],[1,"bg-light-info"],["formControlName","picked_choice_index",1,"row"],[1,"col-3"],["formArrayName","choices",1,"card","bg-light"],[3,"formGroupName"],["matInput","","type","text","formControlName","choice_text"],["mat-raised-button","",1,"btn","btn-primary","bg-light-info",3,"click"],[1,"fa","fa-plus"],["mat-raised-button","",1,"btn","btn-primary",3,"click"]],template:function(a,t){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA(),e.TgZ(4,"div",2),e.TgZ(5,"div",0),e.TgZ(6,"mat-card"),e.TgZ(7,"mat-card-title"),e._uU(8),e.ALo(9,"translate"),e.TgZ(10,"a",3),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.TgZ(13,"mat-card-content",4),e.TgZ(14,"div",2),e.TgZ(15,"div",0),e.TgZ(16,"form",5),e.ynx(17,6),e.TgZ(18,"div",2),e.ynx(19,7),e.TgZ(20,"div",8),e.TgZ(21,"mat-form-field",9),e.TgZ(22,"mat-label"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"mat-select",10),e.NdJ("selectionChange",function(){return t.changeQuestionType()}),e.TgZ(26,"mat-option"),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"mat-option",11),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"mat-option",11),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.qZA(),e.YNc(35,Dn,2,1,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(36,"div",8),e.TgZ(37,"mat-form-field",9),e.TgZ(38,"mat-label"),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"mat-select",13),e.NdJ("selectionChange",function(){return t.getSubjectByTeacherId(null==t.teacherUserId?null:t.teacherUserId.value)}),e.TgZ(42,"mat-option"),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.YNc(45,En,2,2,"mat-option",14),e.qZA(),e.YNc(46,Yn,2,1,"mat-hint",12),e.qZA(),e.qZA(),e.BQk(),e.TgZ(47,"div",8),e.TgZ(48,"mat-form-field",9),e.TgZ(49,"mat-label"),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.TgZ(52,"mat-select",15),e.NdJ("selectionChange",function(){return t.GetUnits(null==t.main_subject_id?null:t.main_subject_id.value)}),e.TgZ(53,"mat-option"),e._uU(54),e.ALo(55,"translate"),e.qZA(),e.YNc(56,Jn,2,2,"mat-option",14),e.qZA(),e.YNc(57,Vn,2,1,"mat-hint",12),e.qZA(),e.qZA(),e.TgZ(58,"div",8),e.TgZ(59,"mat-form-field",9),e.TgZ(60,"mat-label"),e._uU(61),e.ALo(62,"translate"),e.qZA(),e.TgZ(63,"mat-select",16),e.NdJ("selectionChange",function(){return t.GetLessons(null==t.unitId?null:t.unitId.value)}),e.TgZ(64,"mat-option"),e._uU(65),e.ALo(66,"translate"),e.qZA(),e.YNc(67,Mn,2,2,"mat-option",14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(68,"div",8),e.TgZ(69,"mat-form-field",9),e.TgZ(70,"mat-label"),e._uU(71),e.ALo(72,"translate"),e.qZA(),e.TgZ(73,"mat-select",17),e.NdJ("selectionChange",function(){return t.GetTopics(null==t.lessonId?null:t.lessonId.value)}),e.TgZ(74,"mat-option"),e._uU(75),e.ALo(76,"translate"),e.qZA(),e.YNc(77,Pn,2,2,"mat-option",14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(78,"div",8),e.TgZ(79,"mat-form-field",9),e.TgZ(80,"mat-label"),e._uU(81),e.ALo(82,"translate"),e.qZA(),e.TgZ(83,"mat-select",18),e.TgZ(84,"mat-option"),e._uU(85),e.ALo(86,"translate"),e.qZA(),e.YNc(87,Gn,2,2,"mat-option",14),e.qZA(),e.qZA(),e.qZA(),e.TgZ(88,"div",8),e.TgZ(89,"mat-form-field",9),e.TgZ(90,"mat-label"),e._uU(91),e.ALo(92,"translate"),e.qZA(),e.TgZ(93,"mat-select",19),e.TgZ(94,"mat-option"),e._uU(95),e.ALo(96,"translate"),e.qZA(),e.TgZ(97,"mat-option",11),e._uU(98,"\u0633\u0647\u0644"),e.qZA(),e.TgZ(99,"mat-option",11),e._uU(100,"\u0645\u062a\u0648\u0633\u0637"),e.qZA(),e.TgZ(101,"mat-option",11),e._uU(102,"\u0635\u0639\u0628"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(103,"div",8),e.TgZ(104,"mat-form-field",9),e.TgZ(105,"mat-label"),e._uU(106),e.ALo(107,"translate"),e.qZA(),e._UZ(108,"input",20),e.YNc(109,Hn,3,2,"mat-hint",12),e.qZA(),e.qZA(),e.ynx(110,7),e.TgZ(111,"div",0),e.TgZ(112,"mat-form-field",9),e.TgZ(113,"mat-label"),e._uU(114),e.ALo(115,"translate"),e.qZA(),e._UZ(116,"input",21),e.YNc(117,$n,2,1,"mat-hint",12),e.qZA(),e.qZA(),e.ynx(118),e.TgZ(119,"div",22),e.TgZ(120,"mat-label"),e._uU(121),e.ALo(122,"translate"),e.qZA(),e.TgZ(123,"input",23),e.NdJ("change",function(o){return t.onChange(o,-1)}),e.qZA(),e.qZA(),e.TgZ(124,"div",24),e.TgZ(125,"div",25),e.YNc(126,zn,2,1,"mat-checkbox",26),e._UZ(127,"img",27),e.qZA(),e.qZA(),e.BQk(),e.YNc(128,Kn,7,4,"div",28),e.BQk(),e.qZA(),e.BQk(),e._UZ(129,"hr"),e.YNc(130,na,24,20,"ng-container",29),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(131,"mat-card-actions",30),e.YNc(132,aa,4,3,"button",31),e.YNc(133,ia,3,3,"button",32),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,45,"Navbar.QuestionsBank")," "),e.xp6(6),e.hij(" ",e.lcZ(9,47,"labels.AddQuestion")," "),e.xp6(2),e.Q6J("queryParams",e.VKq(89,oa,t.functionId)),e.xp6(1),e.hij(" ",e.lcZ(12,49,"General.Back")," "),e.xp6(5),e.Q6J("formGroup",t.myForm),e.xp6(7),e.hij(" ",e.lcZ(24,51,"labels.QuestionType")," "),e.xp6(4),e.hij(" ",e.lcZ(28,53,"General.Choose")," "),e.xp6(2),e.Q6J("value",1),e.xp6(1),e.hij(" ",e.lcZ(31,55,"labels.Article")," "),e.xp6(2),e.Q6J("value",2),e.xp6(1),e.hij(" ",e.lcZ(34,57,"labels.Mcq")," "),e.xp6(2),e.Q6J("ngIf",(null==t.question_type_id?null:t.question_type_id.invalid)&&((null==t.question_type_id?null:t.question_type_id.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(40,59,"labels.Teacher")),e.xp6(4),e.Oqu(e.lcZ(44,61,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",t.Teachers),e.xp6(1),e.Q6J("ngIf",(null==t.teacherUserId?null:t.teacherUserId.invalid)&&((null==t.teacherUserId?null:t.teacherUserId.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(51,63,"labels.Subject")),e.xp6(4),e.Oqu(e.lcZ(55,65,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",t.subjects),e.xp6(1),e.Q6J("ngIf",(null==t.main_subject_id?null:t.main_subject_id.invalid)&&((null==t.main_subject_id?null:t.main_subject_id.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(62,67,"labels.Unit")),e.xp6(4),e.Oqu(e.lcZ(66,69,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",t.units),e.xp6(4),e.Oqu(e.lcZ(72,71,"labels.Lesson")),e.xp6(4),e.hij(" ",e.lcZ(76,73,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.lessons),e.xp6(4),e.Oqu(e.lcZ(82,75,"labels.Topic")),e.xp6(4),e.hij(" ",e.lcZ(86,77,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.topics),e.xp6(4),e.Oqu(e.lcZ(92,79,"labels.Level")),e.xp6(4),e.hij(" ",e.lcZ(96,81,"General.Choose")," "),e.xp6(2),e.Q6J("value",1),e.xp6(2),e.Q6J("value",5),e.xp6(2),e.Q6J("value",10),e.xp6(5),e.hij(" ",e.lcZ(107,83,"labels.QuestionMark")," "),e.xp6(3),e.Q6J("ngIf",t.mark.invalid&&(t.mark.touched||t.submitted)),e.xp6(5),e.hij(" ",e.lcZ(115,85,"labels.question_ar_text")," "),e.xp6(3),e.Q6J("ngIf",t.question_ar_text.invalid&&(t.question_ar_text.touched||t.submitted)),e.xp6(4),e.hij(" ",e.lcZ(122,87,"labels.QuestionImage")," "),e.xp6(5),e.Q6J("ngIf",t.QuestionAttachPath),e.xp6(1),e.Q6J("src",t.QuestionAttachPath,e.LSH),e.xp6(1),e.Q6J("ngIf",1==t.question_type_id.value),e.xp6(2),e.Q6J("ngIf",2==t.question_type_id.value||3==t.question_type_id.value),e.xp6(2),e.Q6J("ngIf",0==t.QuestionId.value),e.xp6(1),e.Q6J("ngIf",t.QuestionId.value>0))},directives:[Z.a8,Z.n5,y.zs,A.yS,Z.dn,m._Y,m.JL,m.sg,m.x0,C.KE,C.hX,Se.gD,m.JJ,m.u,oe.ey,I.O5,I.sg,j.Nt,m.wV,m.Fj,Z.hq,C.bx,Be.oG,K.VQ,K.U0,m.CE,Z.$j,y.lW],pipes:[D.X$],styles:[".question-img[_ngcontent-%COMP%]{overflow:hidden!important;max-width:100%!important;max-height:156px!important}.mat-card-subtitle[_ngcontent-%COMP%]{font-size:15px;color:#33a7d5}.remove_image[_ngcontent-%COMP%]{display:block}"]}),n}(),V=v(6087),Q=v(4847),g=v(2075);function ra(n,l){if(1&n&&(e.TgZ(0,"mat-option",40),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.teacherUserId),e.xp6(1),e.hij(" ",a.teacher_ar_name," ")}}function sa(n,l){if(1&n&&(e.TgZ(0,"mat-option",40),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function ua(n,l){if(1&n&&(e.TgZ(0,"mat-option",40),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text_Ar," ")}}function ma(n,l){if(1&n&&(e.TgZ(0,"mat-option",40),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function da(n,l){if(1&n&&(e.TgZ(0,"mat-option",40),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function ca(n,l){if(1&n&&(e.TgZ(0,"mat-option",40),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function pa(n,l){if(1&n&&(e.TgZ(0,"mat-option",40),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function _a(n,l){1&n&&(e.TgZ(0,"th",41),e._uU(1,"#"),e.qZA())}function ha(n,l){if(1&n&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&n){var a=l.index;e.xp6(1),e.Oqu(a+1)}}function ga(n,l){1&n&&(e.TgZ(0,"th",41),e._uU(1,"ID"),e.qZA())}function fa(n,l){if(1&n&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.Oqu(a.questionID)}}function va(n,l){1&n&&(e.TgZ(0,"th",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.question_ar_text")," "))}function Za(n,l){if(1&n&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.Oqu(a.questionName)}}function Ca(n,l){1&n&&(e.TgZ(0,"th",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.QuestionType")," "))}function Ta(n,l){if(1&n&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.hij(" ",a.questionTypeArabicName," ")}}function Ia(n,l){1&n&&(e.TgZ(0,"th",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Subject")," "))}function Aa(n,l){if(1&n&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.Oqu(a.subjectName)}}function xa(n,l){1&n&&(e.TgZ(0,"th",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Unit")," "))}function ba(n,l){if(1&n&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.Oqu(a.unitName)}}function qa(n,l){1&n&&(e.TgZ(0,"th",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Lesson")," "))}function ya(n,l){if(1&n&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.Oqu(a.lessonName)}}function Fa(n,l){1&n&&(e.TgZ(0,"th",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Topic")," "))}function Qa(n,l){if(1&n&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.Oqu(a.topicName)}}function Ua(n,l){1&n&&(e.TgZ(0,"th",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.QuestionMark")," "))}function Na(n,l){if(1&n&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.Oqu(a.mark)}}function wa(n,l){1&n&&(e.TgZ(0,"th",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Level")," "))}function ka(n,l){if(1&n&&(e.TgZ(0,"td",42),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.Oqu(a.levelName)}}function Sa(n,l){1&n&&e._UZ(0,"th",41)}var Da=function(l,a){return{questionId:l,functionId:a}};function Ea(n,l){if(1&n&&(e.TgZ(0,"a",46),e._UZ(1,"i",47),e.qZA()),2&n){var a=e.oxw(2).$implicit,t=e.oxw();e.Q6J("queryParams",e.WLB(1,Da,a.questionID,t.functionId))}}function La(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"a",48),e.NdJ("click",function(){e.CHM(a);var i=e.oxw(2).$implicit;return e.oxw().openDeleateDialog(i)}),e._UZ(1,"i",49),e.qZA()}}function Ya(n,l){if(1&n&&(e.ynx(0),e.YNc(1,Ea,2,4,"a",44),e.YNc(2,La,2,0,"a",45),e.BQk()),2&n){var a=l.$implicit;e.xp6(1),e.Q6J("ngIf","Edit"===a.functionName),e.xp6(1),e.Q6J("ngIf","Delete"===a.functionName)}}function Ja(n,l){if(1&n&&(e.TgZ(0,"td",42),e.YNc(1,Ya,3,2,"ng-container",43),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngForOf",a.rowFunctions)}}function ja(n,l){1&n&&e._UZ(0,"tr",50)}function Va(n,l){1&n&&e._UZ(0,"tr",51)}function Ma(n,l){if(1&n&&(e.TgZ(0,"tr",52),e.TgZ(1,"td",53),e._uU(2),e.qZA(),e.qZA()),2&n){e.oxw();var a=e.MAs(103);e.xp6(2),e.hij(' No data matching the filter "',a.value,'" ')}}var Pa=function(l){return{functionId:l}},Ga=function(){return[10]},Oa=function(){var n=function(){function l(a,t,i,o,r,s,u,d,c){var h=this;(0,w.Z)(this,l),this.fb=a,this.toastr=t,this.authService=i,this.examServ=o,this.GeneralService=r,this.EducationalService=s,this.spinner=u,this.dialog=d,this.route=c,this.displayedColumns=["#","questionID","questionText","questionType","subjectName","unitName","lessonName","topicName","mark","levelName","actions"],c.queryParamMap.subscribe(function(p){h.functionId=Number(p.get("functionId")),h.functionId&&h.authService.getUserRowFunctions(h.functionId).subscribe(function(_){_&&(h.rowFunctions=_)})})}return(0,N.Z)(l,[{key:"ngOnInit",value:function(){this.myForm=this.fb.group({teacherUserId:[""],stageId:[""],yearId:[""],subjectId:[""],unitId:[""],lessonId:[""],topicId:[""]}),this.EduCompId=this.authService.getEduCompId(),this.branchId=this.authService.getBranchId(),this.getTeachersByEducompId(this.EduCompId),this.getQuestions(1),this.FormCtrl.stageId.disable(),this.FormCtrl.yearId.disable(),this.FormCtrl.subjectId.disable(),this.FormCtrl.unitId.disable(),this.FormCtrl.lessonId.disable(),this.FormCtrl.topicId.disable()}},{key:"FormCtrl",get:function(){return this.myForm.controls}},{key:"ngAfterViewInit",value:function(){var t=this;this.authService.EduCompId.subscribe(function(i){t.EduCompId=i.EduCompId,t.getTeachersByEducompId(i.EduCompId),t.getQuestions(1)}),this.authService.branchId.subscribe(function(i){t.branchId=i.branchId}),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}},{key:"getQuestions",value:function(t){var i=this;this.spinner.show(),this.examServ.getQuestions(t,this.EduCompId,this.myForm.value).subscribe(function(o){i.dataSource=new g.by(o.returnModel),i.itemsCount=o.itemsCount,i.spinner.hide()})}},{key:"deleteQuestion",value:function(t){var i=this;this.spinner.show(),this.examServ.deleteQuestion(this.EduCompId,t.questionID).subscribe(function(o){if(1==o.returnValue){var r=i.dataSource.data.findIndex(function(s){return s===t});i.dataSource.data.splice(r,1),i.dataSource.paginator=i.paginator,i.toastr.success("Done")}i.spinner.hide()})}},{key:"openDeleateDialog",value:function(t){var i=this;this.dialog.open(W.F,{data:{msg:"".concat(t.questionID," - ").concat(t.questionTypeEnglishName),panelClass:"dialog-radius"}}).afterClosed().subscribe(function(o){o&&i.deleteQuestion(t)})}},{key:"getTeachersByEducompId",value:function(t){var i=this;this.GeneralService.getTeachersByEducompId(t).subscribe(function(o){i.Teachers=o.lstTeachers})}},{key:"getStageByTeacherId",value:function(t){var i=this;this.FormCtrl.stageId.setValue(""),this.FormCtrl.yearId.setValue(""),this.FormCtrl.subjectId.setValue(""),this.FormCtrl.unitId.setValue(""),this.FormCtrl.lessonId.setValue(""),this.FormCtrl.topicId.setValue(""),""!=t?this.EducationalService.getStageByTeacherId(t).subscribe(function(o){i.stages=o,i.FormCtrl.stageId.enable()}):(this.FormCtrl.stageId.setValue(""),this.FormCtrl.stageId.disable(),this.FormCtrl.yearId.disable(),this.FormCtrl.subjectId.disable(),this.FormCtrl.unitId.disable(),this.FormCtrl.lessonId.disable(),this.FormCtrl.topicId.disable())}},{key:"getYearsByStageId",value:function(t){var i=this;this.FormCtrl.yearId.setValue(""),this.FormCtrl.subjectId.setValue(""),this.FormCtrl.unitId.setValue(""),this.FormCtrl.lessonId.setValue(""),this.FormCtrl.topicId.setValue(""),""!=t?this.EducationalService.returnYears(t).subscribe(function(o){i.years=o,i.FormCtrl.yearId.enable()}):(this.FormCtrl.yearId.setValue(""),this.FormCtrl.yearId.disable(),this.FormCtrl.subjectId.disable(),this.FormCtrl.unitId.disable(),this.FormCtrl.lessonId.disable(),this.FormCtrl.topicId.disable())}},{key:"getSubjectsByYearId",value:function(t){var o,i=this;if(this.FormCtrl.subjectId.setValue(""),this.FormCtrl.unitId.setValue(""),this.FormCtrl.lessonId.setValue(""),this.FormCtrl.topicId.setValue(""),""!=t){var r={yearId:t,teacherUserId:null===(o=this.FormCtrl.teacherUserId)||void 0===o?void 0:o.value};this.EducationalService.returnTeacherSubjects(r).subscribe(function(s){i.subjects=s,i.FormCtrl.subjectId.enable()})}else this.FormCtrl.subjectId.setValue(""),this.FormCtrl.subjectId.disable(),this.FormCtrl.unitId.disable(),this.FormCtrl.lessonId.disable(),this.FormCtrl.topicId.disable()}},{key:"getUnitsBySubjectId",value:function(t){var i=this;this.FormCtrl.unitId.setValue(""),this.FormCtrl.lessonId.setValue(""),this.FormCtrl.topicId.setValue(""),""!=t?this.EducationalService.GetUnits(t).subscribe(function(o){i.units=o,i.FormCtrl.unitId.enable()}):(this.FormCtrl.unitId.setValue(""),this.FormCtrl.unitId.disable(),this.FormCtrl.lessonId.disable(),this.FormCtrl.topicId.disable())}},{key:"getLessonsByUnitId",value:function(t){var i=this;this.FormCtrl.lessonId.setValue(""),this.FormCtrl.topicId.setValue(""),""!=t?this.EducationalService.GetLessons(t).subscribe(function(o){i.lessons=o,i.FormCtrl.lessonId.enable()}):(this.FormCtrl.lessonId.setValue(""),this.FormCtrl.lessonId.disable(),this.FormCtrl.topicId.disable())}},{key:"GetTopicsByLessonId",value:function(t){var i=this;this.FormCtrl.topicId.setValue(""),this.FormCtrl.lessonId.value?this.EducationalService.GetTopics(t).subscribe(function(o){i.topics=o,i.FormCtrl.topicId.enable()}):(this.FormCtrl.topicId.setValue(""),this.FormCtrl.topicId.disable())}},{key:"resetManual",value:function(){this.myForm.controls.teacherUserId.setValue(""),this.myForm.controls.yearId.setValue(""),this.myForm.controls.stageId.setValue(""),this.myForm.controls.subjectId.setValue(""),this.myForm.controls.unitId.setValue(""),this.myForm.controls.lessonId.setValue(""),this.myForm.controls.topicId.setValue("")}}]),l}();return n.\u0275fac=function(a){return new(a||n)(e.Y36(m.qu),e.Y36(P._W),e.Y36(J.e),e.Y36(ee.R),e.Y36(X.m),e.Y36(ke.i),e.Y36(S.t2),e.Y36(F.uw),e.Y36(A.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-questions-index"]],viewQuery:function(a,t){var i;1&a&&(e.Gf(V.NW,5),e.Gf(Q.YE,5)),2&a&&(e.iGM(i=e.CRH())&&(t.paginator=i.first),e.iGM(i=e.CRH())&&(t.sort=i.first))},decls:143,vars:75,consts:[[1,"col-12"],[1,"content-header"],[1,"row"],["mat-raised-button","","routerLink","../add-question",1,"btn","btn-info","bg-light-info","float-right",3,"queryParams"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-3","col-12"],["appearance","legacy"],["formControlName","teacherUserId",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","stageId",3,"selectionChange"],["formControlName","yearId",3,"selectionChange"],["formControlName","subjectId",3,"selectionChange"],["formControlName","unitId",3,"selectionChange"],["formControlName","lessonId",3,"selectionChange"],["formControlName","topicId"],["align","end"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","questionID"],["matColumnDef","questionText"],["matColumnDef","questionType"],["matColumnDef","subjectName"],["matColumnDef","unitName"],["matColumnDef","lessonName"],["matColumnDef","topicName"],["matColumnDef","mark"],["matColumnDef","levelName"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","page"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngFor","ngForOf"],["class","success p-0","matTooltip","Edit","routerLink","../add-question",3,"queryParams",4,"ngIf"],["class","danger p-0","matTooltip","Delete",3,"click",4,"ngIf"],["matTooltip","Edit","routerLink","../add-question",1,"success","p-0",3,"queryParams"],[1,"ft-edit-2","font-medium-3","mr-2"],["matTooltip","Delete",1,"danger","p-0",3,"click"],[1,"ft-trash","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(a,t){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.qZA(),e.TgZ(4,"div",2),e.TgZ(5,"div",0),e.TgZ(6,"mat-card"),e.TgZ(7,"mat-card-title"),e._uU(8),e.ALo(9,"translate"),e.TgZ(10,"a",3),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.TgZ(13,"mat-card-content",4),e.TgZ(14,"div",2),e.TgZ(15,"div",0),e.TgZ(16,"form",5),e.TgZ(17,"div",2),e.TgZ(18,"div",6),e.TgZ(19,"mat-form-field",7),e.TgZ(20,"mat-label"),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"mat-select",8),e.NdJ("selectionChange",function(){return t.getStageByTeacherId(t.FormCtrl.teacherUserId.value)}),e.TgZ(24,"mat-option"),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.YNc(27,ra,2,2,"mat-option",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",6),e.TgZ(29,"mat-form-field",7),e.TgZ(30,"mat-label"),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"mat-select",10),e.NdJ("selectionChange",function(){return t.getYearsByStageId(t.FormCtrl.stageId.value)}),e.TgZ(34,"mat-option"),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.YNc(37,sa,2,2,"mat-option",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(38,"div",6),e.TgZ(39,"mat-form-field",7),e.TgZ(40,"mat-label"),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.TgZ(43,"mat-select",11),e.NdJ("selectionChange",function(){return t.getSubjectsByYearId(t.FormCtrl.yearId.value)}),e.TgZ(44,"mat-option"),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.YNc(47,ua,2,2,"mat-option",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(48,"div",6),e.TgZ(49,"mat-form-field",7),e.TgZ(50,"mat-label"),e._uU(51),e.ALo(52,"translate"),e.qZA(),e.TgZ(53,"mat-select",12),e.NdJ("selectionChange",function(){return t.getUnitsBySubjectId(t.FormCtrl.subjectId.value)}),e.TgZ(54,"mat-option"),e._uU(55),e.ALo(56,"translate"),e.qZA(),e.YNc(57,ma,2,2,"mat-option",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(58,"div",6),e.TgZ(59,"mat-form-field",7),e.TgZ(60,"mat-label"),e._uU(61),e.ALo(62,"translate"),e.qZA(),e.TgZ(63,"mat-select",13),e.NdJ("selectionChange",function(){return t.getLessonsByUnitId(t.FormCtrl.unitId.value)}),e.TgZ(64,"mat-option"),e._uU(65),e.ALo(66,"translate"),e.qZA(),e.YNc(67,da,2,2,"mat-option",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(68,"div",6),e.TgZ(69,"mat-form-field",7),e.TgZ(70,"mat-label"),e._uU(71),e.ALo(72,"translate"),e.qZA(),e.TgZ(73,"mat-select",14),e.NdJ("selectionChange",function(){return t.GetTopicsByLessonId(t.FormCtrl.lessonId.value)}),e.TgZ(74,"mat-option"),e._uU(75),e.ALo(76,"translate"),e.qZA(),e.YNc(77,ca,2,2,"mat-option",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(78,"div",6),e.TgZ(79,"mat-form-field",7),e.TgZ(80,"mat-label"),e._uU(81),e.ALo(82,"translate"),e.qZA(),e.TgZ(83,"mat-select",15),e.TgZ(84,"mat-option"),e._uU(85),e.ALo(86,"translate"),e.qZA(),e.YNc(87,pa,2,2,"mat-option",9),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(88,"mat-card-actions",16),e.TgZ(89,"button",17),e.NdJ("click",function(){return t.getQuestions(1)}),e._uU(90),e.ALo(91,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(92,"div",2),e.TgZ(93,"div",0),e.TgZ(94,"mat-card"),e.TgZ(95,"mat-card-title"),e._uU(96),e.ALo(97,"translate"),e.qZA(),e.TgZ(98,"mat-card-content"),e.TgZ(99,"mat-form-field",18),e.TgZ(100,"mat-label"),e._uU(101,"Filter"),e.qZA(),e.TgZ(102,"input",19,20),e.NdJ("keyup",function(o){return t.applyFilter(o)}),e.qZA(),e.qZA(),e.TgZ(104,"div",21),e.TgZ(105,"table",22),e.ynx(106,23),e.YNc(107,_a,2,0,"th",24),e.YNc(108,ha,2,1,"td",25),e.BQk(),e.ynx(109,26),e.YNc(110,ga,2,0,"th",24),e.YNc(111,fa,2,1,"td",25),e.BQk(),e.ynx(112,27),e.YNc(113,va,3,3,"th",24),e.YNc(114,Za,2,1,"td",25),e.BQk(),e.ynx(115,28),e.YNc(116,Ca,3,3,"th",24),e.YNc(117,Ta,2,1,"td",25),e.BQk(),e.ynx(118,29),e.YNc(119,Ia,3,3,"th",24),e.YNc(120,Aa,2,1,"td",25),e.BQk(),e.ynx(121,30),e.YNc(122,xa,3,3,"th",24),e.YNc(123,ba,2,1,"td",25),e.BQk(),e.ynx(124,31),e.YNc(125,qa,3,3,"th",24),e.YNc(126,ya,2,1,"td",25),e.BQk(),e.ynx(127,32),e.YNc(128,Fa,3,3,"th",24),e.YNc(129,Qa,2,1,"td",25),e.BQk(),e.ynx(130,33),e.YNc(131,Ua,3,3,"th",24),e.YNc(132,Na,2,1,"td",25),e.BQk(),e.ynx(133,34),e.YNc(134,wa,3,3,"th",24),e.YNc(135,ka,2,1,"td",25),e.BQk(),e.ynx(136,35),e.YNc(137,Sa,1,0,"th",24),e.YNc(138,Ja,2,1,"td",25),e.BQk(),e.YNc(139,ja,1,0,"tr",36),e.YNc(140,Va,1,0,"tr",37),e.YNc(141,Ma,3,1,"tr",38),e.qZA(),e.TgZ(142,"mat-paginator",39),e.NdJ("page",function(o){return t.getQuestions(o.pageIndex+1)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(2),e.hij(" ",e.lcZ(3,34,"Navbar.QuestionsBank")," "),e.xp6(6),e.hij(" ",e.lcZ(9,36,"labels.QuestionsSearch")," "),e.xp6(2),e.Q6J("queryParams",e.VKq(72,Pa,t.functionId)),e.xp6(1),e.hij(" ",e.lcZ(12,38,"labels.AddQuestion")," "),e.xp6(5),e.Q6J("formGroup",t.myForm),e.xp6(5),e.Oqu(e.lcZ(22,40,"labels.Teacher")),e.xp6(4),e.Oqu(e.lcZ(26,42,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",t.Teachers),e.xp6(4),e.Oqu(e.lcZ(32,44,"labels.Stage")),e.xp6(4),e.Oqu(e.lcZ(36,46,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",t.stages),e.xp6(4),e.Oqu(e.lcZ(42,48,"labels.Year")),e.xp6(4),e.Oqu(e.lcZ(46,50,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",t.years),e.xp6(4),e.Oqu(e.lcZ(52,52,"labels.Subject")),e.xp6(4),e.Oqu(e.lcZ(56,54,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",t.subjects),e.xp6(4),e.Oqu(e.lcZ(62,56,"labels.Unit")),e.xp6(4),e.Oqu(e.lcZ(66,58,"General.Choose")),e.xp6(2),e.Q6J("ngForOf",t.units),e.xp6(4),e.Oqu(e.lcZ(72,60,"labels.Lesson")),e.xp6(4),e.hij(" ",e.lcZ(76,62,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.lessons),e.xp6(4),e.Oqu(e.lcZ(82,64,"labels.Topic")),e.xp6(4),e.hij(" ",e.lcZ(86,66,"General.Choose")," "),e.xp6(2),e.Q6J("ngForOf",t.topics),e.xp6(3),e.hij(" ",e.lcZ(91,68,"General.Search")," "),e.xp6(6),e.hij(" ",e.lcZ(97,70,"labels.Questions"),""),e.xp6(9),e.Q6J("dataSource",t.dataSource),e.xp6(34),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(74,Ga))("length",t.itemsCount)("pageSize",10))},directives:[Z.a8,Z.n5,y.zs,A.yS,Z.dn,m._Y,m.JL,m.sg,C.KE,C.hX,Se.gD,m.JJ,m.u,oe.ey,I.sg,Z.hq,y.lW,j.Nt,g.BZ,Q.YE,g.w1,g.fO,g.Dz,g.as,g.nj,g.Ee,V.NW,g.ge,Q.nU,g.ev,I.O5,Le.gM,g.XQ,g.Gk],pipes:[D.X$],styles:[""]}),n}(),Ba=v(6160),He=v(6002),E=v(8198);function Ha(n,l){1&n&&(e.TgZ(0,"mat-label"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"labels.ExamName")))}function Ra(n,l){1&n&&(e.TgZ(0,"mat-label"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"labels.SurveyName")))}function $a(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function za(n,l){if(1&n&&(e.TgZ(0,"mat-hint",33),e.YNc(1,$a,3,3,"span",11),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.myForm.examNameCtrl||null==a.myForm.examNameCtrl.errors?null:a.myForm.examNameCtrl.errors.required)}}function Wa(n,l){1&n&&(e.TgZ(0,"mat-card-title"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Navbar.Exams"),""))}function Xa(n,l){1&n&&(e.TgZ(0,"mat-card-title"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Navbar.Surveys"),""))}function Ka(n,l){1&n&&(e.TgZ(0,"th",34),e._uU(1,"#"),e.qZA())}function ei(n,l){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){var a=l.index;e.xp6(1),e.Oqu(a+1)}}function ti(n,l){1&n&&(e.TgZ(0,"th",34),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Name")," "))}function ni(n,l){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.Oqu(a.exam_ar_name)}}function ai(n,l){1&n&&(e.TgZ(0,"th",34),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.CourseName")," "))}function ii(n,l){if(1&n&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&n){var a=l.$implicit,t=e.oxw();e.xp6(1),e.hij(" ","ar"==t.curLang?a.course_ar_name:a.course_en_name," ")}}function oi(n,l){1&n&&(e.TgZ(0,"th",34),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.ThePublish")," "))}function li(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e._UZ(3,"i",36),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Published")," "))}function ri(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.UnPublished")," "))}function si(n,l){if(1&n&&(e.TgZ(0,"td",35),e.YNc(1,li,4,3,"span",11),e.YNc(2,ri,3,3,"span",11),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.Q6J("ngIf",null==a?null:a.isPublish),e.xp6(1),e.Q6J("ngIf",!(null!=a&&a.isPublish))}}function ui(n,l){1&n&&e._UZ(0,"th",34)}function mi(n,l){1&n&&(e.TgZ(0,"span"),e._UZ(1,"i",45),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"labels.Publish")," "))}function di(n,l){1&n&&(e.TgZ(0,"span"),e._UZ(1,"i",46),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"labels.Unpublish")," "))}function ci(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"a",44),e.NdJ("click",function(){e.CHM(a);var o=e.oxw(2).$implicit;return e.oxw().onPublishExam(o)}),e.YNc(1,mi,4,3,"span",11),e.YNc(2,di,4,3,"span",11),e.qZA()}if(2&n){var t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",!t.isPublish),e.xp6(1),e.Q6J("ngIf",t.isPublish)}}var pi=function(l,a,t){return{examId:l,functionId:a,parentId:t}};function _i(n,l){if(1&n&&(e.TgZ(0,"a",47),e._UZ(1,"i",48),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n){var a=e.oxw(2).$implicit,t=e.oxw();e.Q6J("queryParams",e.kEZ(4,pi,a.id,t.functionId,t.parentId)),e.xp6(2),e.hij(" ",e.lcZ(3,2,"General.Edit")," ")}}function hi(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"a",44),e.NdJ("click",function(){e.CHM(a);var i=e.oxw(2).$implicit;return e.oxw().openDeleateDialog(i)}),e._UZ(1,"i",49),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.Delete")," "))}var Re=function(l){return{functionId:l}};function gi(n,l){if(1&n&&(e.TgZ(0,"a",50),e._UZ(1,"i",51),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n){var a=e.oxw(2).$implicit,t=e.oxw();e.hYB("routerLink","/dashboard/exams-setup/exam-preview/",a.id,"/",t.type,""),e.Q6J("queryParams",e.VKq(6,Re,t.functionId)),e.xp6(2),e.hij(" ",e.lcZ(3,4,"General.ExamPreview")," ")}}function fi(n,l){if(1&n&&(e.ynx(0),e.YNc(1,ci,3,2,"a",41),e.YNc(2,_i,4,8,"a",42),e.YNc(3,hi,4,3,"a",41),e.YNc(4,gi,4,8,"a",43),e.BQk()),2&n){var a=l.$implicit;e.xp6(1),e.Q6J("ngIf","publish"===a.functionName),e.xp6(1),e.Q6J("ngIf","Edit"===a.functionName),e.xp6(1),e.Q6J("ngIf","Delete"===a.functionName),e.xp6(1),e.Q6J("ngIf","Show"===a.functionName)}}function vi(n,l){if(1&n&&(e.TgZ(0,"td",35),e.TgZ(1,"div",37),e.TgZ(2,"button",38),e._uU(3," actions "),e.qZA(),e.TgZ(4,"div",39),e.YNc(5,fi,5,4,"ng-container",40),e.qZA(),e.qZA(),e.qZA()),2&n){var a=e.oxw();e.xp6(5),e.Q6J("ngForOf",a.rowFunctions)}}function Zi(n,l){1&n&&e._UZ(0,"tr",52)}function Ci(n,l){if(1&n&&e._UZ(0,"tr",53),2&n){var a=l.$implicit;e.ekj("bg-light-info",!(null!=a&&a.isPublish))}}function Ti(n,l){if(1&n&&(e.TgZ(0,"tr",54),e.TgZ(1,"td",55),e._uU(2),e.qZA(),e.qZA()),2&n){e.oxw();var a=e.MAs(39);e.xp6(2),e.hij(' No data matching the filter "',a.value,'" ')}}var Ii=function(l,a){return{functionId:l,parentId:a}},Ai=function(){return[10]},xi=function(){var n=function(){function l(a,t,i,o,r,s,u,d,c,h){var p=this;(0,w.Z)(this,l),this.route=a,this.fb=t,this.authserv=i,this.examService=o,this.msg=r,this.spinner=s,this.generalService=u,this.dialog=d,this.courseser=c,this.translate=h,this.exams=[],this.countries=[],this.stages=[],this.educationYears=[],this.subjects=[],this.exms=[],this.exam=[],this.displayedColumns=["#","name","course","publish","actions"],a.paramMap.subscribe(function(_){p.type=Number(_.get("typeId"))}),a.paramMap.subscribe(function(_){p.subId=Number(_.get("courseId"))}),this.translate.onLangChange.subscribe(function(_){p.curLang=_.lang}),a.queryParamMap.subscribe(function(_){p.functionId=Number(_.get("functionId")),p.parentId=Number(_.get("parentId")),p.functionId&&p.authserv.getUserRowFunctions(p.functionId).subscribe(function(f){f&&(p.rowFunctions=f)})})}return(0,N.Z)(l,[{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.branchId=this.authserv.getBranchId(),this.myForm=this.fb.group({examName:["",m.kI.required]}),this.getAllExams(1)}},{key:"examNameCtrl",get:function(){return this.myForm.get("examName")}},{key:"ngAfterViewInit",value:function(){var t=this;this.authserv.EduCompId.subscribe(function(i){t.EduCompId=i.EduCompId,t.getAllExams(1)}),this.authserv.branchId.subscribe(function(i){t.branchId=i.branchId}),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}},{key:"getAllExams",value:function(t){var o,i=this,r={typeId:this.type,page:t,EduCompId:this.EduCompId,subjectId:this.subId,examName:null===(o=this.examNameCtrl)||void 0===o?void 0:o.value};this.spinner.show(),this.examService.getAllNormalExams(r).subscribe(function(s){s&&(i.dataSource=new g.by(s.examList),i.exams=s.examList,i.totalItems=s.totalCount),i.spinner.hide()})}},{key:"removeExam",value:function(t){var i=this;this.examService.deleteExam(t.id).subscribe(function(o){if(o){var r=i.dataSource.data.findIndex(function(s){return s==t});i.dataSource.data.splice(r,1),i.exams.splice(r,1),i.msg.success("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0625\u0645\u062a\u062d\u0627\u0646")}})}},{key:"openDeleateDialog",value:function(t){var i=this;this.dialog.open(W.F,{data:{msg:t.exam_ar_name,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(o){o&&i.removeExam(t)})}},{key:"onPublishExam",value:function(t){var i=this;this.examService.publishExam(t.id).subscribe(function(o){if(o){var r=i.exams.findIndex(function(s){return s===t});i.exams[r].isPublish=!i.exams[r].isPublish,i.msg.success("Done")}})}},{key:"track",value:function(t,i){return i.Id}}]),l}();return n.\u0275fac=function(a){return new(a||n)(e.Y36(A.gz),e.Y36(m.qu),e.Y36(J.e),e.Y36(ee.R),e.Y36(P._W),e.Y36(S.t2),e.Y36(X.m),e.Y36(F.uw),e.Y36(He.N),e.Y36(D.sK))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-exams-index"]],viewQuery:function(a,t){var i;1&a&&(e.Gf(V.NW,5),e.Gf(Q.YE,5)),2&a&&(e.iGM(i=e.CRH())&&(t.paginator=i.first),e.iGM(i=e.CRH())&&(t.sort=i.first))},decls:61,vars:32,consts:[[1,"row"],[1,"col-12","mb-3"],[1,""],["mat-raised-button","","routerLink","/dashboard/setup/course/sub-course",1,"btn","btn-warning","bg-light-warning","float-right",3,"queryParams"],["mat-raised-button","","routerLink","../add-exam",1,"btn","btn-info","bg-light-info","float-right","mb-2",3,"queryParams"],[1,"fa","fa-plus"],[1,"container-fluid"],[1,"col-12"],[3,"formGroup"],[1,"col-md-12","col-12"],["appearance","legacy"],[4,"ngIf"],["type","text","matInput","","formControlName","examName"],["class","danger",4,"ngIf"],["align","end"],["mat-raised-button","",1,"btn","btn-info","float-right",3,"click"],[1,"fa","fa-search","mr-1"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","course"],["matColumnDef","publish"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"bg-light-info",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","page"],[1,"danger"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["aria-hidden","true",1,"fa","fa-check-circle","success","ml-1"],["ngbDropdown","",1,"d-inline-block"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-outline-primary"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],[4,"ngFor","ngForOf"],["ngbDropdownItem","",3,"click",4,"ngIf"],["ngbDropdownItem","","routerLink","../add-exam",3,"queryParams",4,"ngIf"],["ngbDropdownItem","","target","_blank",3,"routerLink","queryParams",4,"ngIf"],["ngbDropdownItem","",3,"click"],[1,"ft-upload","font-medium-3","mr-2"],[1,"ft-download","font-medium-3","mr-2"],["ngbDropdownItem","","routerLink","../add-exam",3,"queryParams"],[1,"fa","fa-edit","font-medium-3","mr-2"],[1,"fa","fa-times","font-medium-3","mr-2"],["ngbDropdownItem","","target","_blank",3,"routerLink","queryParams"],[1,"fa","fa-video-camera","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(a,t){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card",2),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"a",3),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"a",4),e._UZ(10,"i",5),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.TgZ(13,"mat-card-content",6),e.TgZ(14,"div",0),e.TgZ(15,"div",7),e.TgZ(16,"form",8),e.TgZ(17,"div",0),e.TgZ(18,"div",9),e.TgZ(19,"mat-form-field",10),e.YNc(20,Ha,3,3,"mat-label",11),e.YNc(21,Ra,3,3,"mat-label",11),e._UZ(22,"input",12),e.YNc(23,za,2,1,"mat-hint",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(24,"mat-card-actions",14),e.TgZ(25,"a",15),e.NdJ("click",function(){return t.getAllExams(1)}),e._UZ(26,"i",16),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",0),e.TgZ(30,"div",7),e.TgZ(31,"mat-card"),e.YNc(32,Wa,3,3,"mat-card-title",11),e.YNc(33,Xa,3,3,"mat-card-title",11),e.TgZ(34,"mat-card-content"),e.TgZ(35,"mat-form-field",17),e.TgZ(36,"mat-label"),e._uU(37,"Filter"),e.qZA(),e.TgZ(38,"input",18,19),e.NdJ("keyup",function(o){return t.applyFilter(o)}),e.qZA(),e.qZA(),e.TgZ(40,"div",20),e.TgZ(41,"table",21),e.ynx(42,22),e.YNc(43,Ka,2,0,"th",23),e.YNc(44,ei,2,1,"td",24),e.BQk(),e.ynx(45,25),e.YNc(46,ti,3,3,"th",23),e.YNc(47,ni,2,1,"td",24),e.BQk(),e.ynx(48,26),e.YNc(49,ai,3,3,"th",23),e.YNc(50,ii,2,1,"td",24),e.BQk(),e.ynx(51,27),e.YNc(52,oi,3,3,"th",23),e.YNc(53,si,3,2,"td",24),e.BQk(),e.ynx(54,28),e.YNc(55,ui,1,0,"th",23),e.YNc(56,vi,6,1,"td",24),e.BQk(),e.YNc(57,Zi,1,0,"tr",29),e.YNc(58,Ci,1,2,"tr",30),e.YNc(59,Ti,3,1,"tr",31),e.qZA(),e.TgZ(60,"mat-paginator",32),e.NdJ("page",function(o){return t.getAllExams(o.pageIndex+1)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(4),e.hij(" ",e.lcZ(5,18,"General.Search")," "),e.xp6(2),e.Q6J("queryParams",e.VKq(26,Re,t.parentId)),e.xp6(1),e.hij(" ",e.lcZ(8,20,"General.Back")," "),e.xp6(2),e.Q6J("queryParams",e.WLB(28,Ii,t.functionId,t.parentId)),e.xp6(2),e.hij(" ",e.lcZ(12,22,"General.Add")," "),e.xp6(5),e.Q6J("formGroup",t.myForm),e.xp6(4),e.Q6J("ngIf",3==t.type),e.xp6(1),e.Q6J("ngIf",5==t.type),e.xp6(2),e.Q6J("ngIf",(null==t.examNameCtrl?null:t.examNameCtrl.invalid)&&(null==t.examNameCtrl?null:t.examNameCtrl.touched)),e.xp6(4),e.hij(" ",e.lcZ(28,24,"General.Search")," "),e.xp6(5),e.Q6J("ngIf",3==t.type),e.xp6(1),e.Q6J("ngIf",5==t.type),e.xp6(8),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(31,Ai))("length",t.totalItems)("pageSize",10))},directives:[Z.a8,Z.n5,y.zs,A.yS,Z.dn,m._Y,m.JL,m.sg,C.KE,I.O5,j.Nt,m.Fj,m.JJ,m.u,Z.hq,C.hX,g.BZ,Q.YE,g.w1,g.fO,g.Dz,g.as,g.nj,g.Ee,V.NW,C.bx,g.ge,Q.nU,g.ev,E.jt,E.iD,E.Vi,I.sg,E.TH,g.XQ,g.Gk],pipes:[D.X$],styles:[""]}),n}(),$e=v(5130);function bi(n,l){if(1&n&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.teacherUserId),e.xp6(1),e.hij(" ",a.teacher_ar_name," ")}}function qi(n,l){if(1&n&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function yi(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function Fi(n,l){if(1&n&&(e.TgZ(0,"mat-hint",38),e.YNc(1,yi,3,3,"span",39),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.myForm.stageIdCtrl||null==a.myForm.stageIdCtrl.errors?null:a.myForm.stageIdCtrl.errors.required)}}function Qi(n,l){if(1&n&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text_Ar," ")}}function Ui(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function Ni(n,l){if(1&n&&(e.TgZ(0,"mat-hint",38),e.YNc(1,Ui,3,3,"span",39),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.educationYearIdCtrl||null==a.educationYearIdCtrl.errors?null:a.educationYearIdCtrl.errors.required)}}function wi(n,l){if(1&n&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function ki(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.MustChoosevalue")," "))}function Si(n,l){if(1&n&&(e.TgZ(0,"mat-hint",38),e.YNc(1,ki,3,3,"span",39),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.subjectIdCtrl||null==a.subjectIdCtrl.errors?null:a.subjectIdCtrl.errors.required)}}function Di(n,l){if(1&n&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function Ei(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Li(n,l){if(1&n&&(e.TgZ(0,"mat-hint",38),e.YNc(1,Ei,3,3,"span",39),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.unitIdCtrl||null==a.unitIdCtrl.errors?null:a.unitIdCtrl.errors.required)}}function Yi(n,l){if(1&n&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function Ji(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function ji(n,l){if(1&n&&(e.TgZ(0,"mat-hint",38),e.YNc(1,Ji,3,3,"span",39),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.lessionIdCtrl||null==a.lessionIdCtrl.errors?null:a.lessionIdCtrl.errors.required)}}function Vi(n,l){if(1&n&&(e.TgZ(0,"mat-option",37),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.Value),e.xp6(1),e.hij(" ",a.Text," ")}}function Mi(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Pi(n,l){if(1&n&&(e.TgZ(0,"mat-hint",38),e.YNc(1,Mi,3,3,"span",39),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.lessionIdCtrl||null==a.lessionIdCtrl.errors?null:a.lessionIdCtrl.errors.required)}}function Gi(n,l){1&n&&(e.TgZ(0,"th",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Name")," "))}function Oi(n,l){if(1&n&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.Oqu(a.Name)}}function Bi(n,l){1&n&&(e.TgZ(0,"th",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Materials")," "))}function Hi(n,l){if(1&n&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.Oqu(a.Subject)}}function Ri(n,l){1&n&&(e.TgZ(0,"th",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.EducationalYear")," "))}function $i(n,l){if(1&n&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.Oqu(a.Year)}}function zi(n,l){1&n&&(e.TgZ(0,"th",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Teacher")," "))}function Wi(n,l){if(1&n&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.Oqu(a.Teacher)}}function Xi(n,l){1&n&&(e.TgZ(0,"th",40),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.ThePublish")," "))}function Ki(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e._UZ(3,"i",42),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Published")," "))}function eo(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.UnPublished")," "))}function to(n,l){if(1&n&&(e.TgZ(0,"td",41),e.YNc(1,Ki,4,3,"span",39),e.YNc(2,eo,3,3,"span",39),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.Q6J("ngIf",null==a?null:a.isPublish),e.xp6(1),e.Q6J("ngIf",!(null!=a&&a.isPublish))}}function no(n,l){1&n&&e._UZ(0,"th",40)}function ao(n,l){1&n&&(e.TgZ(0,"span"),e._UZ(1,"i",51),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"labels.Publish")," "))}function io(n,l){1&n&&(e.TgZ(0,"span"),e._UZ(1,"i",52),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"labels.Unpublish")," "))}function oo(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"a",50),e.NdJ("click",function(){e.CHM(a);var o=e.oxw(2).$implicit;return e.oxw().PublishDepublishTemplate(o.Id)}),e.YNc(1,ao,4,3,"span",39),e.YNc(2,io,4,3,"span",39),e.qZA()}if(2&n){var t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",!t.isPublish),e.xp6(1),e.Q6J("ngIf",t.isPublish)}}var lo=function(l,a){return{templateId:l,functionId:a}};function ro(n,l){if(1&n&&(e.TgZ(0,"a",53),e._UZ(1,"i",54),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n){var a=e.oxw(2).$implicit,t=e.oxw();e.Q6J("queryParams",e.WLB(4,lo,a.Id,t.functionId)),e.xp6(2),e.hij(" ",e.lcZ(3,2,"General.Edit")," ")}}function so(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"a",50),e.NdJ("click",function(){e.CHM(a);var i=e.oxw(2).$implicit;return e.oxw().GenerateExamFromTemplate(i.Id)}),e._UZ(1,"i",55),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.ExamPreview")," "))}var ze=function(l){return{functionId:l}};function uo(n,l){if(1&n&&(e.TgZ(0,"a",56),e._UZ(1,"i",57),e._uU(2,"\u0627\u0644\u0646\u0642\u0627\u0637"),e.qZA()),2&n){var a=e.oxw(2).$implicit,t=e.oxw();e.MGl("routerLink","../template-points/",a.Id,""),e.Q6J("queryParams",e.VKq(2,ze,t.functionId))}}function mo(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"a",50),e.NdJ("click",function(){e.CHM(a);var i=e.oxw(2).$implicit;return e.oxw().openDeleateDialog(i)}),e._UZ(1,"i",58),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.Delete")," "))}function co(n,l){if(1&n&&(e.ynx(0),e.YNc(1,oo,3,2,"a",47),e.YNc(2,ro,4,7,"a",48),e.YNc(3,so,4,3,"a",47),e.YNc(4,uo,3,4,"a",49),e.YNc(5,mo,4,3,"a",47),e.BQk()),2&n){var a=l.$implicit;e.xp6(1),e.Q6J("ngIf","Publish"===a.functionName),e.xp6(1),e.Q6J("ngIf","Edit"===a.functionName),e.xp6(1),e.Q6J("ngIf","previewTemplate"===a.functionName),e.xp6(1),e.Q6J("ngIf","Points"===a.functionName),e.xp6(1),e.Q6J("ngIf","Delete"===a.functionName)}}function po(n,l){if(1&n&&(e.TgZ(0,"td",41),e.TgZ(1,"div",43),e.TgZ(2,"button",44),e._uU(3," actions "),e.qZA(),e.TgZ(4,"div",45),e.YNc(5,co,6,5,"ng-container",46),e.qZA(),e.qZA(),e.qZA()),2&n){var a=e.oxw();e.xp6(5),e.Q6J("ngForOf",a.rowFunctions)}}function _o(n,l){1&n&&e._UZ(0,"tr",59)}function ho(n,l){if(1&n&&e._UZ(0,"tr",60),2&n){var a=l.$implicit;e.ekj("bg-light-info",!(null!=a&&a.isPublish))}}function go(n,l){if(1&n&&(e.TgZ(0,"tr",61),e.TgZ(1,"td",62),e._uU(2),e.qZA(),e.qZA()),2&n){e.oxw();var a=e.MAs(106);e.xp6(2),e.hij(' No data matching the filter "',a.value,'" ')}}var fo=function(){return[10]},vo=function(){var n=function(){function l(a,t,i,o,r,s,u,d,c,h,p){var _=this;(0,w.Z)(this,l),this.toastr=a,this.dialog=t,this.route=i,this.router=o,this.GeneralService=r,this.authserv=s,this.fb=u,this.EducationalService=d,this.StudentService=c,this.TemplatesService=h,this.spinner=p,this.Templates=[],this.Teachers=[],this.stages=[],this.years=[],this.educationYears=[],this.subjects=[],this.units=[],this.lessons=[],this.topics=[],this.submitted=!1,this.displayedColumns=["Name","Teacher","Subject","Year","publish","actions"],i.queryParamMap.subscribe(function(f){_.functionId=Number(f.get("functionId")),_.functionId&&_.authserv.getUserRowFunctions(_.functionId).subscribe(function(T){T&&(_.rowFunctions=T)})})}return(0,N.Z)(l,[{key:"stageIdCtrl",get:function(){return this.myForm.get("stageId")}},{key:"teacherUserIdCtrl",get:function(){return this.myForm.get("teacherUserId")}},{key:"educationYearIdCtrl",get:function(){return this.myForm.get("yearId")}},{key:"subjectIdCtrl",get:function(){return this.myForm.get("subjectId")}},{key:"unitIdCtrl",get:function(){return this.myForm.get("unitId")}},{key:"lessonIdCtrl",get:function(){return this.myForm.get("lessonId")}},{key:"topicIdCtrl",get:function(){return this.myForm.get("topicId")}},{key:"page",get:function(){return this.myForm.get("page")}},{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.myForm=this.fb.group({teacherUserId:[""],yearId:[""],stageId:[""],subjectId:[""],unitId:[""],lessonId:[""],topicId:[""],page:[""]}),this.getTeachersByEducompId(),this.getTemplates(1),this.getTeachersByEducompId(),this.stageIdCtrl.disable(),this.educationYearIdCtrl.disable(),this.subjectIdCtrl.disable(),this.unitIdCtrl.disable(),this.lessonIdCtrl.disable(),this.topicIdCtrl.disable()}},{key:"ngAfterViewInit",value:function(){var t=this;this.authserv.EduCompId.subscribe(function(i){t.EduCompId=i.EduCompId,t.getTemplates(1)}),this.authserv.branchId.subscribe(function(i){}),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}},{key:"getTemplates",value:function(t){var o,i=this;this.spinner.show(),null===(o=this.page)||void 0===o||o.setValue(t),this.TemplatesService.getTemplates(this.EduCompId,t,this.myForm.value).subscribe(function(r){i.Templates=r.result,i.dataSource=new g.by(r.result),i.itemsCount=r.TotalItemCount,i.spinner.hide(),i.spinner.hide()})}},{key:"PublishDepublishTemplate",value:function(t){var i=this;this.spinner.show(),this.TemplatesService.PublishDepublishTemplate(t).subscribe(function(o){if("Done"==o.returnString){var s,r=(0,Ye.Z)(i.Templates);try{for(r.s();!(s=r.n()).done;){var u=s.value;if(u.Id===t){u.isPublish=!u.isPublish;break}}}catch(d){r.e(d)}finally{r.f()}}else i.toastr.error(o.returnString);i.spinner.hide()})}},{key:"openDeleateDialog",value:function(t){var i=this;this.dialog.open(W.F,{data:{msg:t.Name,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(o){o&&i.deleteTemplate(t)})}},{key:"deleteTemplate",value:function(t){var i=this;this.TemplatesService.deleteTemplate(t.Id).subscribe(function(o){var r=i.Templates.findIndex(function(s){return s.Id==t.Id});i.Templates.splice(r,1),i.toastr.success(" Deleted"),i.getTemplates(1)})}},{key:"getTeachersByEducompId",value:function(){var t=this;this.GeneralService.getTeachersByEducompId(this.EduCompId).subscribe(function(i){t.Teachers=i.lstTeachers}),this.getStageByTeacherId()}},{key:"getStageByTeacherId",value:function(){var t=this;this.stageIdCtrl.setValue(""),this.educationYearIdCtrl.setValue(""),this.subjectIdCtrl.setValue(""),this.unitIdCtrl.setValue(""),this.lessonIdCtrl.setValue(""),this.topicIdCtrl.setValue(""),""!=this.teacherUserIdCtrl.value?(console.log("teacher",this.teacherUserIdCtrl.value),this.EducationalService.getStageByTeacherId(this.teacherUserIdCtrl.value).subscribe(function(i){console.log(i),t.stages=i,t.stageIdCtrl.enable()})):(this.stageIdCtrl.setValue(""),this.stageIdCtrl.disable(),this.educationYearIdCtrl.disable(),this.subjectIdCtrl.disable(),this.unitIdCtrl.disable(),this.lessonIdCtrl.disable(),this.topicIdCtrl.disable())}},{key:"returnYears",value:function(){var t=this;this.educationYearIdCtrl.setValue(""),this.subjectIdCtrl.setValue(""),this.unitIdCtrl.setValue(""),this.lessonIdCtrl.setValue(""),this.topicIdCtrl.setValue(""),""!=this.stageIdCtrl.value?this.EducationalService.returnYears(this.stageIdCtrl.value).subscribe(function(i){console.log(i),t.years=i,t.educationYearIdCtrl.enable()}):(this.educationYearIdCtrl.setValue(""),this.educationYearIdCtrl.disable(),this.subjectIdCtrl.disable(),this.unitIdCtrl.disable(),this.lessonIdCtrl.disable(),this.topicIdCtrl.disable())}},{key:"returnTeacherSubjects",value:function(){var t=this;if(this.subjectIdCtrl.setValue(""),this.unitIdCtrl.setValue(""),this.lessonIdCtrl.setValue(""),this.topicIdCtrl.setValue(""),""!=this.educationYearIdCtrl.value){var i={yearId:this.educationYearIdCtrl.value,teacherUserId:this.myForm.controls.teacherUserId.value};console.log(i),this.EducationalService.returnTeacherSubjects(i).subscribe(function(o){console.log("subjects",o),t.subjects=o,t.subjectIdCtrl.enable()})}else this.subjectIdCtrl.setValue(""),this.subjectIdCtrl.disable(),this.unitIdCtrl.disable(),this.lessonIdCtrl.disable(),this.topicIdCtrl.disable()}},{key:"GetUnits",value:function(){var t=this;this.unitIdCtrl.setValue(""),this.lessonIdCtrl.setValue(""),this.topicIdCtrl.setValue(""),""!=this.subjectIdCtrl.value?this.EducationalService.GetUnits(this.subjectIdCtrl.value).subscribe(function(i){console.log("unit",i),t.units=i,t.unitIdCtrl.enable()}):(this.unitIdCtrl.setValue(""),this.unitIdCtrl.disable(),this.lessonIdCtrl.disable(),this.topicIdCtrl.disable())}},{key:"GetLessons",value:function(){var t=this;this.lessonIdCtrl.setValue(""),this.topicIdCtrl.setValue(""),""!=this.unitIdCtrl.value?this.EducationalService.GetLessons(this.unitIdCtrl.value).subscribe(function(i){console.log("lesson",i),t.lessons=i,t.lessonIdCtrl.enable()}):(this.lessonIdCtrl.setValue(""),this.lessonIdCtrl.disable(),this.topicIdCtrl.disable())}},{key:"GetTopics",value:function(){var t=this;this.topicIdCtrl.setValue(""),""!=this.lessonIdCtrl.value?this.EducationalService.GetTopics(this.lessonIdCtrl.value).subscribe(function(i){console.log(i),t.topics=i,t.topicIdCtrl.enable()}):(this.topicIdCtrl.setValue(""),this.topicIdCtrl.disable())}},{key:"GenerateExamFromTemplate",value:function(t){var i=this;this.spinner.show(),this.StudentService.GenerateExamFromTemplate(t).subscribe(function(o){if(o.returnValue=o.examId){var r="/dashboard/exams-setup/exam-preview/".concat(o.examId,"?templateId=").concat(t);window.open(r,"_blank")}else i.toastr.error(o.returnString);i.spinner.hide()})}}]),l}();return n.\u0275fac=function(a){return new(a||n)(e.Y36(P._W),e.Y36(F.uw),e.Y36(A.gz),e.Y36(A.F0),e.Y36(X.m),e.Y36(J.e),e.Y36(m.qu),e.Y36(ke.i),e.Y36($e.V),e.Y36(Oe),e.Y36(S.t2))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-templates-index"]],viewQuery:function(a,t){var i;1&a&&(e.Gf(V.NW,5),e.Gf(Q.YE,5)),2&a&&(e.iGM(i=e.CRH())&&(t.paginator=i.first),e.iGM(i=e.CRH())&&(t.sort=i.first))},decls:131,vars:78,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","","routerLink","../add-template",1,"btn","btn-info","bg-light-info","float-right",3,"queryParams"],[1,"fa","fa-plus"],["mat-raised-button","",1,"btn","btn-info","float-right",3,"click"],[1,"fa","fa-search","mr-1"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-4","col-12"],["appearance","legacy"],["formControlName","teacherUserId",3,"selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","stageId",3,"selectionChange"],["class","danger",4,"ngIf"],["formControlName","yearId",3,"selectionChange"],["formControlName","subjectId",3,"selectionChange"],["formControlName","unitId",3,"selectionChange"],["formControlName","lessonId",3,"selectionChange"],["formControlName","topicId"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","Name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Subject"],["matColumnDef","Year"],["matColumnDef","Teacher"],["matColumnDef","publish"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"bg-light-info",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","page"],[3,"value"],[1,"danger"],[4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["aria-hidden","true",1,"fa","fa-check-circle","success","ml-1"],["ngbDropdown","",1,"d-inline-block"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-outline-primary"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],[4,"ngFor","ngForOf"],["ngbDropdownItem","",3,"click",4,"ngIf"],["ngbDropdownItem","","routerLink","../add-template",3,"queryParams",4,"ngIf"],["ngbDropdownItem","",3,"routerLink","queryParams",4,"ngIf"],["ngbDropdownItem","",3,"click"],[1,"ft-upload","font-medium-3","mr-2"],[1,"ft-download","font-medium-3","mr-2"],["ngbDropdownItem","","routerLink","../add-template",3,"queryParams"],[1,"fa","fa-edit","mr-2"],[1,"fa","fa-video-camera","mr-2"],["ngbDropdownItem","",3,"routerLink","queryParams"],[1,"fa","fa-gift","font-medium-3","mr-2"],[1,"fa","fa-times","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(a,t){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"a",2),e._UZ(7,"i",3),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"a",4),e.NdJ("click",function(){return t.getTemplates(1)}),e._UZ(11,"i",5),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.qZA(),e.TgZ(14,"mat-card-content",6),e.TgZ(15,"div",0),e.TgZ(16,"div",1),e.TgZ(17,"form",7),e.TgZ(18,"div",0),e.TgZ(19,"div",8),e.TgZ(20,"mat-form-field",9),e.TgZ(21,"mat-label"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"mat-select",10),e.NdJ("selectionChange",function(){return t.getStageByTeacherId()}),e.TgZ(25,"mat-option",11),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.YNc(28,bi,2,2,"mat-option",12),e.qZA(),e.qZA(),e.qZA(),e.TgZ(29,"div",8),e.TgZ(30,"mat-form-field",9),e.TgZ(31,"mat-label"),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"mat-select",13),e.NdJ("selectionChange",function(){return t.returnYears()}),e.TgZ(35,"mat-option",11),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.YNc(38,qi,2,2,"mat-option",12),e.qZA(),e.YNc(39,Fi,2,1,"mat-hint",14),e.qZA(),e.qZA(),e.TgZ(40,"div",8),e.TgZ(41,"mat-form-field",9),e.TgZ(42,"mat-label"),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.TgZ(45,"mat-select",15),e.NdJ("selectionChange",function(){return t.returnTeacherSubjects()}),e.TgZ(46,"mat-option",11),e._uU(47),e.ALo(48,"translate"),e.qZA(),e.YNc(49,Qi,2,2,"mat-option",12),e.qZA(),e.YNc(50,Ni,2,1,"mat-hint",14),e.qZA(),e.qZA(),e.TgZ(51,"div",8),e.TgZ(52,"mat-form-field",9),e.TgZ(53,"mat-label"),e._uU(54),e.ALo(55,"translate"),e.qZA(),e.TgZ(56,"mat-select",16),e.NdJ("selectionChange",function(){return t.GetUnits()}),e.TgZ(57,"mat-option",11),e._uU(58),e.ALo(59,"translate"),e.qZA(),e.YNc(60,wi,2,2,"mat-option",12),e.qZA(),e.YNc(61,Si,2,1,"mat-hint",14),e.qZA(),e.qZA(),e.TgZ(62,"div",8),e.TgZ(63,"mat-form-field",9),e.TgZ(64,"mat-label"),e._uU(65),e.ALo(66,"translate"),e.qZA(),e.TgZ(67,"mat-select",17),e.NdJ("selectionChange",function(){return t.GetLessons()}),e.TgZ(68,"mat-option",11),e._uU(69),e.ALo(70,"translate"),e.qZA(),e.YNc(71,Di,2,2,"mat-option",12),e.qZA(),e.YNc(72,Li,2,1,"mat-hint",14),e.qZA(),e.qZA(),e.TgZ(73,"div",8),e.TgZ(74,"mat-form-field",9),e.TgZ(75,"mat-label"),e._uU(76),e.ALo(77,"translate"),e.qZA(),e.TgZ(78,"mat-select",18),e.NdJ("selectionChange",function(){return t.GetTopics()}),e.TgZ(79,"mat-option",11),e._uU(80),e.ALo(81,"translate"),e.qZA(),e.YNc(82,Yi,2,2,"mat-option",12),e.qZA(),e.YNc(83,ji,2,1,"mat-hint",14),e.qZA(),e.qZA(),e.TgZ(84,"div",8),e.TgZ(85,"mat-form-field",9),e.TgZ(86,"mat-label"),e._uU(87),e.ALo(88,"translate"),e.qZA(),e.TgZ(89,"mat-select",19),e.TgZ(90,"mat-option",11),e._uU(91),e.ALo(92,"translate"),e.qZA(),e.YNc(93,Vi,2,2,"mat-option",12),e.qZA(),e.YNc(94,Pi,2,1,"mat-hint",14),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(95,"div",0),e.TgZ(96,"div",1),e.TgZ(97,"mat-card"),e.TgZ(98,"mat-card-title"),e._uU(99),e.ALo(100,"translate"),e.qZA(),e.TgZ(101,"mat-card-content"),e.TgZ(102,"mat-form-field",20),e.TgZ(103,"mat-label"),e._uU(104,"Filter"),e.qZA(),e.TgZ(105,"input",21,22),e.NdJ("keyup",function(o){return t.applyFilter(o)}),e.qZA(),e.qZA(),e.TgZ(107,"div",23),e.TgZ(108,"table",24),e.ynx(109,25),e.YNc(110,Gi,3,3,"th",26),e.YNc(111,Oi,2,1,"td",27),e.BQk(),e.ynx(112,28),e.YNc(113,Bi,3,3,"th",26),e.YNc(114,Hi,2,1,"td",27),e.BQk(),e.ynx(115,29),e.YNc(116,Ri,3,3,"th",26),e.YNc(117,$i,2,1,"td",27),e.BQk(),e.ynx(118,30),e.YNc(119,zi,3,3,"th",26),e.YNc(120,Wi,2,1,"td",27),e.BQk(),e.ynx(121,31),e.YNc(122,Xi,3,3,"th",26),e.YNc(123,to,3,2,"td",27),e.BQk(),e.ynx(124,32),e.YNc(125,no,1,0,"th",26),e.YNc(126,po,6,1,"td",27),e.BQk(),e.YNc(127,_o,1,0,"tr",33),e.YNc(128,ho,1,2,"tr",34),e.YNc(129,go,3,1,"tr",35),e.qZA(),e.TgZ(130,"mat-paginator",36),e.NdJ("page",function(o){return t.getTemplates(o.pageIndex+1)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(4),e.hij(" ",e.lcZ(5,39,"General.Search")," "),e.xp6(2),e.Q6J("queryParams",e.VKq(75,ze,t.functionId)),e.xp6(2),e.hij(" ",e.lcZ(9,41,"General.Add")," "),e.xp6(4),e.hij(" ",e.lcZ(13,43,"General.Search")," "),e.xp6(5),e.Q6J("formGroup",t.myForm),e.xp6(5),e.hij(" ",e.lcZ(23,45,"Material.Teacher")," "),e.xp6(4),e.hij(" ",e.lcZ(27,47,"Material.Teacher"),""),e.xp6(2),e.Q6J("ngForOf",t.Teachers),e.xp6(4),e.Oqu(e.lcZ(33,49,"Navbar.EducationalStage")),e.xp6(4),e.Oqu(e.lcZ(37,51,"Navbar.EducationalStage")),e.xp6(2),e.Q6J("ngForOf",t.stages),e.xp6(1),e.Q6J("ngIf",(null==t.stageIdCtrl?null:t.stageIdCtrl.invalid)&&((null==t.stageIdCtrl?null:t.stageIdCtrl.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(44,53,"labels.EducationalYear")),e.xp6(4),e.Oqu(e.lcZ(48,55,"labels.EducationalYear")),e.xp6(2),e.Q6J("ngForOf",t.years),e.xp6(1),e.Q6J("ngIf",(null==t.educationYearIdCtrl?null:t.educationYearIdCtrl.invalid)&&((null==t.educationYearIdCtrl?null:t.educationYearIdCtrl.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(55,57,"Material.Subjects")),e.xp6(4),e.Oqu(e.lcZ(59,59,"Material.Subjects")),e.xp6(2),e.Q6J("ngForOf",t.subjects),e.xp6(1),e.Q6J("ngIf",(null==t.subjectIdCtrl?null:t.subjectIdCtrl.invalid)&&((null==t.subjectIdCtrl?null:t.subjectIdCtrl.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(66,61,"labels.Unit")),e.xp6(4),e.Oqu(e.lcZ(70,63,"labels.Unit")),e.xp6(2),e.Q6J("ngForOf",t.units),e.xp6(1),e.Q6J("ngIf",(null==t.unitIdCtrl?null:t.unitIdCtrl.invalid)&&((null==t.unitIdCtrl?null:t.unitIdCtrl.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(77,65,"labels.Lesson")),e.xp6(4),e.Oqu(e.lcZ(81,67,"labels.Lesson")),e.xp6(2),e.Q6J("ngForOf",t.lessons),e.xp6(1),e.Q6J("ngIf",(null==t.lessonIdCtrl?null:t.lessonIdCtrl.invalid)&&((null==t.lessonIdCtrl?null:t.lessonIdCtrl.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(88,69,"labels.Topic")),e.xp6(4),e.Oqu(e.lcZ(92,71,"labels.Topic")),e.xp6(2),e.Q6J("ngForOf",t.topics),e.xp6(1),e.Q6J("ngIf",(null==t.lessonIdCtrl?null:t.lessonIdCtrl.invalid)&&((null==t.lessonIdCtrl?null:t.lessonIdCtrl.touched)||t.submitted)),e.xp6(5),e.hij(" ",e.lcZ(100,73,"Navbar.Templates")," "),e.xp6(9),e.Q6J("dataSource",t.dataSource),e.xp6(19),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(77,fo))("length",t.itemsCount)("pageSize",10))},directives:[Z.a8,Z.n5,y.zs,A.yS,Z.dn,m._Y,m.JL,m.sg,C.KE,C.hX,Se.gD,m.JJ,m.u,oe.ey,I.sg,I.O5,j.Nt,g.BZ,Q.YE,g.w1,g.fO,g.Dz,g.as,g.nj,g.Ee,V.NW,C.bx,g.ge,Q.nU,g.ev,E.jt,E.iD,E.Vi,E.TH,g.XQ,g.Gk],pipes:[D.X$],styles:[""]}),n}();function Zo(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Co(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function To(n,l){if(1&n&&(e.TgZ(0,"mat-hint",18),e.YNc(1,Zo,3,3,"span",19),e.YNc(2,Co,3,3,"span",19),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.teacherCommentCtrl||null==a.teacherCommentCtrl.errors?null:a.teacherCommentCtrl.errors.required),e.xp6(1),e.Q6J("ngIf",null==a.teacherCommentCtrl||null==a.teacherCommentCtrl.errors?null:a.teacherCommentCtrl.errors.whiteSpace)}}function Io(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Ao(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function xo(n,l){if(1&n&&(e.TgZ(0,"mat-hint",18),e.YNc(1,Io,3,3,"span",19),e.YNc(2,Ao,3,3,"span",19),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.markCtrl||null==a.markCtrl.errors?null:a.markCtrl.errors.required),e.xp6(1),e.Q6J("ngIf",null==a.markCtrl||null==a.markCtrl.errors?null:a.markCtrl.errors.whiteSpace)}}var bo=function(){var n=function(){function l(a,t,i,o,r,s,u,d,c,h){(0,w.Z)(this,l),this.data=a,this.fb=t,this.route=i,this.authserv=o,this.router=r,this.msg=s,this.GeneralService=u,this.examService=d,this.spinner=c,this.dialog=h}return(0,N.Z)(l,[{key:"questionNameCtrl",get:function(){return this.myForm.get("questionName")}},{key:"questionAnswerCtrl",get:function(){return this.myForm.get("studentAnswer")}},{key:"markCtrl",get:function(){return this.myForm.get("mark")}},{key:"teacherCommentCtrl",get:function(){return this.myForm.get("teacherComment")}},{key:"questionIdCtrl",get:function(){return this.myForm.get("questionId")}},{key:"examStudentIdCtrl",get:function(){return this.myForm.get("examStudentId")}},{key:"teacherUserIdCtrl",get:function(){return this.myForm.get("teacherUserId")}},{key:"questionMarkCtrl",get:function(){return this.myForm.get("questionMark")}},{key:"FormCtrl",get:function(){return this.myForm.controls}},{key:"ngOnInit",value:function(){console.log("data",this.data),this.EduCompId=this.authserv.getEduCompId(),this.myForm=this.fb.group({questionName:[""],studentAnswer:[""],questionId:[],examStudentId:[],teacherComment:["",m.kI.required],teacherUserId:[],questionMark:[],mark:[,m.kI.required]}),this.questionNameCtrl.setValue(this.data.msg.questionName),this.questionNameCtrl.disable(),this.questionIdCtrl.setValue(this.data.msg.questionId),this.examStudentIdCtrl.setValue(this.data.msg.examStudentId),this.teacherUserIdCtrl.setValue(this.data.msg.teacherUserId),this.questionMarkCtrl.setValue(this.data.msg.questionMark),this.FormCtrl.studentAnswer.setValue(this.data.msg.studentAnswer)}},{key:"CorrectQuestion",value:function(){var t=this;if(this.myForm.valid){if(console.log("my form",this.myForm.value),this.markCtrl.value>this.questionMarkCtrl.value)return void this.msg.error("\u064a\u062c\u0628 \u0627\u062f\u062e\u0627\u0644 \u0642\u064a\u0645\u0629 \u0627\u0644\u0646\u062a\u064a\u062c\u0629 \u0623\u0642\u0644 \u0645\u0646 \u0627\u0644\u0642\u064a\u0629 \u0627\u0644\u0646\u0647\u0627\u0626\u064a\u0629");this.spinner.show(),this.examService.submitCorrection(this.myForm.value).subscribe(function(o){1==o.returnValue?(t.msg.success("\u062a\u0645 \u062a\u0635\u062d\u064a\u062d \u0627\u0644\u0633\u0624\u0627\u0644"),t.dialog.closeAll()):t.msg.error(o.returnString),t.spinner.hide()})}}}]),l}();return n.\u0275fac=function(a){return new(a||n)(e.Y36(F.WI),e.Y36(m.qu),e.Y36(A.gz),e.Y36(J.e),e.Y36(A.F0),e.Y36(P._W),e.Y36(X.m),e.Y36(ee.R),e.Y36(S.t2),e.Y36(F.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-correction-dialog"]],decls:49,vars:26,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","",1,"btn","btn-danger","float-right",3,"mat-dialog-close"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-12","col-12"],["appearance","legacy"],["matInput","","cols","20","formControlName","questionName","readonly",""],["matInput","","cols","20","formControlName","studentAnswer","readonly",""],[1,"question-img"],["alt","Question Image",1,"img-fluid",3,"src"],[1,"col-md-6","col-12"],["matInput","","formControlName","teacherComment"],["class","danger",4,"ngIf"],["matInput","","type","number","formControlName","mark"],["align","end"],["mat-raised-button","",1,"btn","btn-primary","bg-light-info",3,"click"],[1,"fa","fa-plus"],[1,"danger"],[4,"ngIf"]],template:function(a,t){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"a",2),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.qZA(),e.TgZ(10,"mat-card-content",3),e.TgZ(11,"div",0),e.TgZ(12,"div",1),e.TgZ(13,"form",4),e.TgZ(14,"div",0),e.TgZ(15,"div",5),e.TgZ(16,"mat-form-field",6),e.TgZ(17,"mat-label"),e._uU(18),e.ALo(19,"translate"),e.qZA(),e._UZ(20,"textarea",7),e.qZA(),e.qZA(),e.TgZ(21,"div",5),e.TgZ(22,"mat-form-field",6),e.TgZ(23,"mat-label"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e._UZ(26,"textarea",8),e.qZA(),e.qZA(),e.TgZ(27,"div",5),e.TgZ(28,"div",9),e._UZ(29,"img",10),e.qZA(),e.qZA(),e.TgZ(30,"div",11),e.TgZ(31,"mat-form-field",6),e.TgZ(32,"mat-label"),e._uU(33),e.ALo(34,"translate"),e.qZA(),e._UZ(35,"input",12),e.YNc(36,To,3,2,"mat-hint",13),e.qZA(),e.qZA(),e.TgZ(37,"div",11),e.TgZ(38,"mat-form-field",6),e.TgZ(39,"mat-label"),e._uU(40),e.ALo(41,"translate"),e.qZA(),e._UZ(42,"input",14),e.YNc(43,xo,3,2,"mat-hint",13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(44,"mat-card-actions",15),e.TgZ(45,"button",16),e.NdJ("click",function(){return t.CorrectQuestion()}),e._UZ(46,"i",17),e._uU(47),e.ALo(48,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(5),e.hij(" ",e.lcZ(6,12,"labels.Correct")," "),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(1),e.hij(" ",e.lcZ(9,14,"General.Close")," "),e.xp6(5),e.Q6J("formGroup",t.myForm),e.xp6(5),e.Oqu(e.lcZ(19,16,"labels.\u064eQuestionContent")),e.xp6(6),e.Oqu(e.lcZ(25,18,"labels.\u064eQuestionContent")),e.xp6(5),e.Q6J("src",t.data.imageAttatch,e.LSH),e.xp6(4),e.Oqu(e.lcZ(34,20,"labels.TeacherComment")),e.xp6(3),e.Q6J("ngIf",(null==t.teacherCommentCtrl?null:t.teacherCommentCtrl.invalid)&&((null==t.teacherCommentCtrl?null:t.teacherCommentCtrl.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(41,22,"labels.Mark")),e.xp6(3),e.Q6J("ngIf",(null==t.markCtrl?null:t.markCtrl.invalid)&&((null==t.markCtrl?null:t.markCtrl.touched)||t.submitted)),e.xp6(4),e.hij(" ",e.lcZ(48,24,"General.Add")," "))},directives:[Z.a8,Z.n5,y.zs,F.ZT,Z.dn,m._Y,m.JL,m.sg,C.KE,C.hX,j.Nt,m.Fj,m.JJ,m.u,I.O5,m.wV,Z.hq,y.lW,C.bx],pipes:[D.X$],styles:[".question-img[_ngcontent-%COMP%]{overflow:hidden!important;max-width:100%!important;max-height:156px!important}"]}),n}();function qo(n,l){1&n&&(e.TgZ(0,"th",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.ExamNm")," "))}function yo(n,l){if(1&n&&(e.TgZ(0,"td",26),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.Oqu(a.examName)}}function Fo(n,l){1&n&&(e.TgZ(0,"th",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.\u064eQuestionContent")," "))}function Qo(n,l){if(1&n&&(e.TgZ(0,"td",26),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.Oqu(a.questionName)}}function Uo(n,l){1&n&&(e.TgZ(0,"th",25),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Teacher")," "))}function No(n,l){if(1&n&&(e.TgZ(0,"td",26),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.Oqu(a.teacherName)}}function wo(n,l){1&n&&(e.TgZ(0,"th",25),e._uU(1,"actions"),e.qZA())}function ko(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"td",26),e.TgZ(1,"button",27),e.NdJ("click",function(){var o=e.CHM(a).$implicit;return e.oxw().openCorrectDialog(o)}),e.TgZ(2,"mat-icon"),e._uU(3,"done"),e.qZA(),e.qZA(),e.qZA()}}function So(n,l){1&n&&e._UZ(0,"tr",28)}function Do(n,l){1&n&&e._UZ(0,"tr",29)}function Eo(n,l){if(1&n&&(e.TgZ(0,"tr",30),e.TgZ(1,"td",31),e._uU(2),e.qZA(),e.qZA()),2&n){e.oxw();var a=e.MAs(36);e.xp6(2),e.hij(' No data matching the filter "',a.value,'" ')}}var Lo=function(){return[10]},Yo=function(){var n=function(){function l(a,t,i,o,r,s){var u=this;(0,w.Z)(this,l),this.examService=a,this.route=t,this.authserv=i,this.fb=o,this.spinner=r,this.dialog=s,this.correction=[],this.displayedColumns=["examName","questionName","teacherName","actions"],t.queryParamMap.subscribe(function(d){u.functionId=Number(d.get("functionId")),u.functionId&&u.authserv.getUserRowFunctions(u.functionId).subscribe(function(c){c&&(u.rowFunctions=c)})})}return(0,N.Z)(l,[{key:"page",get:function(){return this.myForm.get("page")}},{key:"CorrectedQuestionsIdCtrl",get:function(){return this.myForm.get("CorrectedQuestions")}},{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.myForm=this.fb.group({page:[""],EduCompId:[this.EduCompId],CorrectedQuestions:[1]}),this.getAllQuestions(1,1)}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}},{key:"getAllQuestions",value:function(t,i){var r,o=this;null===(r=this.myForm.controls.page)||void 0===r||r.setValue(t),this.spinner.show(),this.examService.getQuestionByCorrectionType(t,i).subscribe(function(s){s&&(console.log("quesions not corrected: ",s.examsList),o.correction=s.examsList.examQuestions,console.log("correct list",o.correction),o.dataSource=new g.by(s.examsList),o.itemsCount=s.itemsCount,o.spinner.hide())})}},{key:"openCorrectDialog",value:function(t){this.dialog.open(bo,{data:{msg:t}}).afterClosed().subscribe(function(i){i&&console.log("dialog")})}}]),l}();return n.\u0275fac=function(a){return new(a||n)(e.Y36(ee.R),e.Y36(A.gz),e.Y36(J.e),e.Y36(m.qu),e.Y36(S.t2),e.Y36(F.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-correction-index"]],viewQuery:function(a,t){var i;1&a&&(e.Gf(V.NW,5),e.Gf(Q.YE,5)),2&a&&(e.iGM(i=e.CRH())&&(t.paginator=i.first),e.iGM(i=e.CRH())&&(t.sort=i.first))},decls:55,vars:25,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","",1,"btn","btn-info","float-right"],[1,"fa","fa-search","mr-1"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-12","col-12"],["formControlName","CorrectedQuestions",1,"row"],[1,"col-md-4","col-12"],[3,"value","change"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","examName"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","questionName"],["matColumnDef","teacherName"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","page"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-mini-fab","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(a,t){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"a",2),e._UZ(7,"i",3),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.qZA(),e.TgZ(10,"mat-card-content",4),e.TgZ(11,"div",0),e.TgZ(12,"div",1),e.TgZ(13,"form",5),e.TgZ(14,"div",0),e.TgZ(15,"div",6),e.TgZ(16,"mat-radio-group",7),e.TgZ(17,"div",8),e.TgZ(18,"mat-radio-button",9),e.NdJ("change",function(){return t.getAllQuestions(1,0)}),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.qZA(),e.TgZ(21,"div",8),e.TgZ(22,"mat-radio-button",9),e.NdJ("change",function(){return t.getAllQuestions(1,1)}),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",0),e.TgZ(26,"div",1),e.TgZ(27,"mat-card"),e.TgZ(28,"mat-card-title"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"mat-card-content"),e.TgZ(32,"mat-form-field",10),e.TgZ(33,"mat-label"),e._uU(34,"Filter"),e.qZA(),e.TgZ(35,"input",11,12),e.NdJ("keyup",function(o){return t.applyFilter(o)}),e.qZA(),e.qZA(),e.TgZ(37,"div",13),e.TgZ(38,"table",14),e.ynx(39,15),e.YNc(40,qo,3,3,"th",16),e.YNc(41,yo,2,1,"td",17),e.BQk(),e.ynx(42,18),e.YNc(43,Fo,3,3,"th",16),e.YNc(44,Qo,2,1,"td",17),e.BQk(),e.ynx(45,19),e.YNc(46,Uo,3,3,"th",16),e.YNc(47,No,2,1,"td",17),e.BQk(),e.ynx(48,20),e.YNc(49,wo,2,0,"th",16),e.YNc(50,ko,4,0,"td",17),e.BQk(),e.YNc(51,So,1,0,"tr",21),e.YNc(52,Do,1,0,"tr",22),e.YNc(53,Eo,3,1,"tr",23),e.qZA(),e.TgZ(54,"mat-paginator",24),e.NdJ("page",function(o){return t.getAllQuestions(o.pageIndex+1,t.CorrectedQuestionsIdCtrl.value)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(4),e.hij(" ",e.lcZ(5,14,"labels.ExamsCorrection")," "),e.xp6(4),e.hij(" ",e.lcZ(9,16,"General.Search")," "),e.xp6(5),e.Q6J("formGroup",t.myForm),e.xp6(5),e.Q6J("value",0),e.xp6(1),e.hij(" ",e.lcZ(20,18,"labels.CorrectedQuestions")," "),e.xp6(3),e.Q6J("value",1),e.xp6(1),e.hij(" ",e.lcZ(24,20,"labels.UnCorrectedQuestions")," "),e.xp6(6),e.hij(" ",e.lcZ(30,22,"labels.ExamsCorrection")," "),e.xp6(9),e.Q6J("dataSource",t.dataSource),e.xp6(13),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(24,Lo))("length",0)("pageSize",10))},directives:[Z.a8,Z.n5,y.zs,Z.dn,m._Y,m.JL,m.sg,K.VQ,m.JJ,m.u,K.U0,C.KE,C.hX,j.Nt,g.BZ,Q.YE,g.w1,g.fO,g.Dz,g.as,g.nj,g.Ee,V.NW,g.ge,Q.nU,g.ev,y.lW,be.Hw,g.XQ,g.Gk],pipes:[D.X$],styles:[""]}),n}(),Jo=v(3483),jo=v(8723),We=v(3251),Vo=v(1033);function Mo(n,l){if(1&n&&(e.TgZ(0,"mat-card",11),e.TgZ(1,"mat-card-content"),e.TgZ(2,"div",12),e.TgZ(3,"div",13),e.TgZ(4,"h4",14),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"h5"),e._uU(8),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){var a=e.oxw(3);e.xp6(5),e.hij(" ",e.lcZ(6,2,"labels.TotalMark")," "),e.xp6(3),e.Oqu(a.examTotalMark)}}function Po(n,l){if(1&n&&(e.ynx(0),e.TgZ(1,"div",4),e.YNc(2,Mo,9,4,"mat-card",10),e.qZA(),e.BQk()),2&n){var a=e.oxw(2);e.xp6(2),e.Q6J("ngIf",3==a.type)}}function Go(n,l){if(1&n&&(e._UZ(0,"img",21),e.ALo(1,"sliceExamPic")),2&n){var a=e.oxw().$implicit;e.MGl("src","https://schoolsystem.cloudiax.com",e.lcZ(1,1,null==a.QuestionDetails?null:a.QuestionDetails.questionAttach),"",e.LSH)}}function Oo(n,l){if(1&n&&(e._UZ(0,"img",21),e.ALo(1,"sliceExamPic")),2&n){var a=e.oxw().$implicit;e.MGl("src","https://schoolsystem.cloudiax.com",e.lcZ(1,1,a.MCQAttach),"",e.LSH)}}function Bo(n,l){if(1&n&&(e.TgZ(0,"div",4),e.TgZ(1,"mat-radio-button",22),e.TgZ(2,"span"),e._uU(3),e.YNc(4,Oo,2,3,"img",17),e.qZA(),e.qZA(),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.Q6J("value",a.Id)("disabled",!0),e.xp6(2),e.hij(" ",a.MCQText," "),e.xp6(1),e.Q6J("ngIf",a.MCQAttach)}}function Ho(n,l){if(1&n&&(e.TgZ(0,"form"),e.TgZ(1,"p"),e._uU(2),e.qZA(),e.YNc(3,Go,2,3,"img",17),e.TgZ(4,"div",3),e.TgZ(5,"mat-radio-group",18,19),e.YNc(7,Bo,5,4,"div",20),e.qZA(),e.qZA(),e._UZ(8,"mat-card-actions"),e._UZ(9,"hr"),e.qZA()),2&n){var a=l.$implicit,t=l.index;e.xp6(2),e.AsE(" ",t+1,") ",null==a.QuestionDetails?null:a.QuestionDetails.questionText," "),e.xp6(1),e.Q6J("ngIf",null==a.QuestionDetails?null:a.QuestionDetails.questionAttach),e.xp6(2),e.MGl("id","question-",null==a.QuestionDetails?null:a.QuestionDetails.questionId,""),e.xp6(2),e.Q6J("ngForOf",a.MCQ)}}function Ro(n,l){if(1&n&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-title"),e._uU(2),e.qZA(),e.TgZ(3,"mat-card-content"),e.YNc(4,Ho,10,5,"form",16),e.qZA(),e.qZA()),2&n){var a=l.$implicit;e.xp6(2),e.hij(" ",a.HeadName,""),e.xp6(2),e.Q6J("ngForOf",null==a?null:a.Questions)}}function $o(n,l){if(1&n&&(e.TgZ(0,"mat-tab",15),e.YNc(1,Ro,5,2,"mat-card",16),e.qZA()),2&n){var a=l.$implicit;e.Gre("group-",a.GroupId,""),e.s9C("label",a.GroupName),e.xp6(1),e.Q6J("ngForOf",a.Heads)}}function zo(n,l){if(1&n&&(e.ynx(0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e.TgZ(6,"span",6),e._uU(7),e.qZA(),e.TgZ(8,"span",6),e._uU(9),e.qZA(),e.TgZ(10,"span",6),e._uU(11),e.qZA(),e.qZA(),e.qZA(),e.YNc(12,Po,3,1,"ng-container",0),e.qZA(),e.qZA(),e.TgZ(13,"div",7),e.TgZ(14,"mat-card"),e._UZ(15,"mat-card-title"),e.TgZ(16,"mat-card-content"),e.TgZ(17,"mat-tab-group"),e.YNc(18,$o,2,5,"mat-tab",8),e.qZA(),e.qZA(),e._UZ(19,"mat-card-actions",9),e.qZA(),e.qZA(),e.qZA(),e.BQk()),2&n){var a=e.oxw();e.xp6(7),e.hij(" ",a.ExamName," "),e.xp6(2),e.hij(" ",a.TeacherName," "),e.xp6(2),e.hij(" ",a.SubjectName," "),e.xp6(1),e.Q6J("ngIf",!a.isSolved),e.xp6(6),e.Q6J("ngForOf",a.ExamGroups)}}var Wo=function(){var n=function(){function l(a,t,i,o,r,s){var u=this;(0,w.Z)(this,l),this.studentServ=a,this.toastr=t,this.route=i,this.router=o,this.spinner=r,this.dialog=s,this.ExamDetails=[],this.ExamGroups=null,this.solvedQuestionNumberArr=[],this.AnswerdQuestionsNumber=[],this.IsAvaliable=!0,this.exam_period_minute=0,this.isSolved=!1,this.PickedChoiceId=[],this.route.paramMap.subscribe(function(d){u.examId=d.get("examId"),u.type=Number(d.get("type")),console.log("this.examId",u.examId)})}return(0,N.Z)(l,[{key:"ngOnInit",value:function(){this.returnStudentExam(this.examId)}},{key:"returnStudentExam",value:function(t){var i=this;this.spinner.show(),this.studentServ.returnStudentExam(t).subscribe(function(o){if(console.log("exam: ",o),-5===o.returnValue)return i.spinner.hide(),void i.returnExamResults(o.examId);if(505===o.returnValue)return i.toastr.warning("\u064a\u062c\u0628 \u0634\u0631\u0627\u0621 \u0627\u0644\u0645\u062d\u0627\u0636\u0631\u0629 \u0627\u0648\u0644\u0627"),i.router.navigateByUrl("/home"),void i.spinner.hide();if(200===o.returnValue){i.isSolved=!1,i.ExamGroups=o.exam.groups,i.ExamName=o.exam.details.exam_ar_name,i.IsAvaliable=o.mv.IsAvailable,i.TeacherName=o.teacherName,i.SubjectName=o.mv.subject.subject_ar_name,i.studentUserId=o.mv.exam_student.studentUserId,i.examTotalMark=o.mv.examTotalMark,i.exam_period_minute=o.exam.details.exam_period_minute,i.solvedExamStudent_ID=o.mv.solvedExamStudent_ID,i.student_grade=o.mv.exam_student.student_grade;for(var r=o.exam.groups.length,s=0,u=0;u<r;u++){var d=o.exam.groups[u].Heads.length;if(0!=d)for(var c=0;c<d;c++)s+=o.exam.groups[u].Heads[c].Questions.length;i.questionNumber=s}0!=o.exam.details.exam_period_minute&&null!=o.exam.details.exam_period_minute&&i.timer(o.exam.details.exam_period_minute);var p=new Date,_=p.getHours(),f=p.getMinutes(),T=p.getSeconds();i.ExamStarTime=_+":"+f+":"+T;var x,b=o.exam.groups[0].Heads[0].Questions.length;for(x=0;x<=b;x++)o.exam.groups[0].Heads[0].Questions[x]&&o.exam.groups[0].Heads[0].Questions[x].QuestionDetails&&o.exam.groups[0].Heads[0].Questions[x].QuestionDetails.StudentChoice&&"T"==o.exam.groups[0].Heads[0].Questions[x].QuestionDetails.StudentChoice.RESULT&&i.solvedQuestionNumberArr.push({id:x}),i.spinner.hide();i.spinner.hide()}})}},{key:"returnExamResults",value:function(t){var i=this;this.spinner.show(),this.studentServ.returnStudentExamResults(t).subscribe(function(o){var r;i.isSolved=!0,i.ExamGroups=o.item.groups,i.ExamName=o.item.details.exam_ar_name,i.TeacherName=o.teacherName,i.SubjectName=o.SubjectName,i.examTotalMark=o.ex.total_mark,i.student_grade=null===(r=o.ex.exam_student)||void 0===r?void 0:r.student_grade,i.studentMark=o.ex.exam_result,i.examDuration=o.ex.examDuration,i.examResultDate=o.ex.examResultDate,i.examResultTime=o.ex.examResultTime,i.IsResultAvalable=o.ex.IsResultAvalable,i.isSolviedResultsOff=!o.ex.IsResultAvalable,i.showResult=o.ex.showResult,i.PointsGained=o.ex.PointsGained,i.repeatable=o.ex.repeatable,i.repeatableExam_Count=o.ex.repeatableExam_Count,i.solvidResults=[],i.spinner.hide()})}},{key:"onRadioChange",value:function(t,i){var o={questionId:i,choiceId:t.value},r=this.PickedChoiceId.findIndex(function(s){return s.questionId===i});console.log(r),r>=0?this.PickedChoiceId[r]=o:this.PickedChoiceId.push(o)}},{key:"SingleQuestionForm",value:function(t){var i=this,o=this.PickedChoiceId.find(function(s){return s.questionId===t});null!=(null==o?void 0:o.choiceId)&&null!=(null==o?void 0:o.choiceId)?this.studentServ.SubmitSingleQuestion({examId:this.examId,studentUserId:this.studentUserId,PickedChoiceId:o.choiceId,questionId:t}).subscribe(function(s){if(200==s.returnValue){document.getElementById("alert-".concat(t)).style.display="none";var u=document.querySelector("#btn-"+t);u.classList.remove("btn-primary"),u.classList.add("btn-success"),u.innerHTML="\u062a\u0645 \u062d\u0641\u0638 \u0627\u0644\u0625\u062c\u0627\u0628\u0629";var d=document.getElementById("stu-cho-".concat(t));d.style.display="block",d.innerHTML='\u062a\u0645 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0625\u062c\u0627\u0628\u0629 : ("'.concat(s.returnedChoice,'")'),i.AnswerdQuestionsNumber.find(function(h){return h.questionId===t})||i.AnswerdQuestionsNumber.push({questionId:t})}505==s.returnValue&&(document.querySelector("#alert-"+t).innerHTML="\u0645\u0646 \u0641\u0636\u0644\u0643 \u062a\u0623\u0643\u062f \u0645\u0646 \u0625\u062e\u062a\u064a\u0627\u0631 \u0625\u062c\u0627\u0628\u0647",i.toastr.error("\u0645\u0646 \u0641\u0636\u0644\u0643 \u062a\u0623\u0643\u062f \u0645\u0646 \u0625\u062e\u062a\u064a\u0627\u0631 \u0625\u062c\u0627\u0628\u0647","\u062e\u0637\u0623"))}):this.toastr.warning("\u0645\u0646 \u0641\u0636\u0644\u0643 \u0627\u062e\u062a\u0631 \u0625\u062c\u0627\u0628\u0629")}},{key:"SubmitExam",value:function(){var t=this;this.questionNumber-this.solvedQuestionNumberArr.length>this.AnswerdQuestionsNumber.length?this.toastr.error(' \u0644\u0645 \u064a\u062a\u0645 \u0625\u062c\u0627\u0628\u0629 \u062c\u0645\u064a\u0639 \u0627\u0644\u0627\u0633\u0626\u0644\u0647\u060c \u0639\u062f\u062f \u0627\u0644\u0627\u0633\u0626\u0644\u0647 \u0627\u0644\u062a\u064a \u0644\u0645 \u064a\u062a\u0645 \u0625\u062c\u0627\u0628\u062a\u0647\u0627 "'+(this.questionNumber-this.solvedQuestionNumberArr.length-this.AnswerdQuestionsNumber.length)+'" \u0633\u0624\u0627\u0644'):(this.spinner.show(),this.studentServ.SubmitExam({examId:this.examId,studentUserId:this.studentUserId,solvedExamStudent_ID:this.solvedExamStudent_ID,ExamStarTime:this.ExamStarTime}).subscribe(function(r){0==r.returnValue?(t.toastr.warning(" \u062a\u0645 \u062d\u0644 \u0627\u0644\u0625\u0645\u062a\u062d\u0627\u0646 \u0645\u0646 \u0642\u0628\u0644","\u062e\u0637\u0623"),t.spinner.hide()):(t.solvidResults=r,t.openDialog(r),t.spinner.hide())}))}},{key:"timer",value:function(t){var i=this,o=60*t,r=o;(0,jo.H)(0,1e3).subscribe(function(){r>0?(r==o/2&&i.toastr.warning('\u0628\u0627\u0642\u064a \u0645\u0646 \u0648\u0642\u062a \u0627\u0644\u0625\u0645\u062a\u062d\u0627\u0646  " '+t/2+'" \u062f\u0642\u064a\u0642\u0647'),r==o/4&&i.toastr.warning('\u0628\u0627\u0642\u064a \u0645\u0646 \u0648\u0642\u062a \u0627\u0644\u0625\u0645\u062a\u062d\u0627\u0646  " '+t/4+'" \u062f\u0642\u064a\u0642\u0647'),--r,i.counter=r):0==r&&(i.toastr.error("\u062a\u0645 \u0625\u0646\u062a\u0647\u0627\u0621 \u0627\u0644\u0648\u0642\u062a "),r=null,i.spinner.show(),i.studentServ.SubmitExam({examId:i.examId,studentUserId:i.studentUserId,solvedExamStudent_ID:i.solvedExamStudent_ID,ExamStarTime:i.ExamStarTime}).subscribe(function(p){0==p.returnValue?(i.toastr.error(" \u062a\u0645 \u062d\u0644 \u0627\u0644\u0625\u0645\u062a\u062d\u0627\u0646 \u0645\u0646 \u0642\u0628\u0644","\u062e\u0637\u0623"),i.spinner.hide()):(i.solvidResults=p,i.openDialog(p),i.spinner.hide())}))})}},{key:"openDialog",value:function(t){var i=this;this.dialog.open(Jo.H,{data:{solvidResults:t}}).afterClosed().subscribe(function(r){r?i.refresh():i.router.navigateByUrl("/home")})}},{key:"refresh",value:function(){window.location.reload()}}]),l}();return n.\u0275fac=function(a){return new(a||n)(e.Y36($e.V),e.Y36(P._W),e.Y36(A.gz),e.Y36(A.F0),e.Y36(S.t2),e.Y36(F.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-exam-preview"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"row","exam-container"],[1,"col-md-3","col-12"],[1,"row"],[1,"col-12"],["role","alert",1,"alert","bg-light-primary","mb-2"],[1,"badge","bg-primary","mb-1","mr-2"],[1,"col-md-9","col-12"],[3,"label","class",4,"ngFor","ngForOf"],["align","end"],["class","card card-inverse bg-info",4,"ngIf"],[1,"card","card-inverse","bg-info"],[1,"media"],[1,"media-body","text-left"],[1,"card-text"],[3,"label"],[4,"ngFor","ngForOf"],["class","examimage",3,"src",4,"ngIf"],[1,"exam-radio-group",3,"id"],["choice",""],["class","col-12",4,"ngFor","ngForOf"],[1,"examimage",3,"src"],[3,"value","disabled"]],template:function(a,t){1&a&&e.YNc(0,zo,20,5,"ng-container",0),2&a&&e.Q6J("ngIf",t.ExamGroups)},directives:[I.O5,Z.a8,Z.n5,Z.dn,We.SP,I.sg,Z.hq,We.uX,m._Y,m.JL,K.VQ,K.U0],pipes:[D.X$,Vo.H],styles:[".alert.bg-light-primary[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{color:#fff!important}"]}),n}();function Xo(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1," You must enter a value. "),e.qZA())}function Ko(n,l){if(1&n&&(e.TgZ(0,"mat-hint",18),e.YNc(1,Xo,2,0,"span",5),e.qZA()),2&n){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==a.FormCtrls.from.errors?null:a.FormCtrls.from.errors.required)||(null==a.FormCtrls.from.errors?null:a.FormCtrls.from.errors.minusNum))}}function el(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1," You must enter a value. "),e.qZA())}function tl(n,l){if(1&n&&(e.TgZ(0,"mat-hint",18),e.YNc(1,el,2,0,"span",5),e.qZA()),2&n){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==a.FormCtrls.to.errors?null:a.FormCtrls.to.errors.required)||(null==a.FormCtrls.to.errors?null:a.FormCtrls.to.errors.minusNum))}}function nl(n,l){if(1&n&&(e.ynx(0),e.TgZ(1,"div",6),e.TgZ(2,"mat-form-field",7),e.TgZ(3,"mat-label"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"input",16),e.YNc(7,Ko,2,1,"mat-hint",9),e.qZA(),e.qZA(),e.TgZ(8,"div",6),e.TgZ(9,"mat-form-field",7),e.TgZ(10,"mat-label"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"input",17),e.YNc(14,tl,2,1,"mat-hint",9),e.qZA(),e.qZA(),e.BQk()),2&n){var a=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,4,"labels.From")," "),e.xp6(3),e.Q6J("ngIf",a.FormCtrls.from.invalid&&(a.FormCtrls.from.touched||a.Submitted)),e.xp6(4),e.hij(" ",e.lcZ(12,6,"labels.To")," "),e.xp6(3),e.Q6J("ngIf",a.FormCtrls.to.invalid&&(a.FormCtrls.to.touched||a.Submitted))}}function al(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1," You must enter a value. "),e.qZA())}function il(n,l){if(1&n&&(e.TgZ(0,"mat-hint",18),e.YNc(1,al,2,0,"span",5),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==a.FormCtrls.value.errors?null:a.FormCtrls.value.errors.required)||(null==a.FormCtrls.value.errors?null:a.FormCtrls.value.errors.minusNum))}}function ol(n,l){1&n&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.ByQuestion")," "))}function ll(n,l){1&n&&(e.TgZ(0,"td"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.ByExam")," "))}function rl(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"tr"),e.YNc(1,ol,3,3,"td",5),e.YNc(2,ll,3,3,"td",5),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e.TgZ(10,"button",19),e.NdJ("click",function(){var r=e.CHM(a).$implicit;return e.oxw().openDeleateExamPointDialog(r)}),e.TgZ(11,"mat-icon"),e._uU(12,"delete"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){var t=l.$implicit;e.xp6(1),e.Q6J("ngIf",t.ByQuestion),e.xp6(1),e.Q6J("ngIf",!t.ByQuestion),e.xp6(2),e.Oqu(t.FromValue),e.xp6(2),e.Oqu(t.ToValue),e.xp6(2),e.Oqu(t.Value)}}function sl(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"pagination-controls",20),e.NdJ("pageChange",function(o){e.CHM(a);var r=e.oxw();return r.p=o,r.getExamCustomPoints(o)}),e.qZA()}if(2&n){var t=e.oxw();e.Q6J("maxSize",t.maxSize)}}var ul=function(l){return{functionId:l}},ml=function(l,a){return{itemsPerPage:5,currentPage:l,totalItems:a}},dl=function(){var n=function(){function l(a,t,i,o,r,s,u){var d=this;(0,w.Z)(this,l),this.fb=a,this.toastr=t,this.authserv=i,this.route=o,this.PointsService=r,this.dialog=s,this.spinner=u,this.Submitted=!1,this.p=1,this.maxSize=9,o.paramMap.subscribe(function(c){d.examId=Number(c.get("examId"))}),this.route.queryParamMap.subscribe(function(c){d.functionId=Number(c.get("functionId"))})}return(0,N.Z)(l,[{key:"ngOnInit",value:function(){this.getExamCustomPoints(1),this.myForm=this.fb.group({ByQuestion:[!1,[m.kI.required]],from:["",[m.kI.required,q.D.minusNum]],to:["",[m.kI.required,q.D.minusNum]],value:["",[m.kI.required,q.D.minusNum]]}),this.ByQuestionValidators(!1)}},{key:"FormCtrls",get:function(){return this.myForm.controls}},{key:"addExamCustomPoint",value:function(){var i,o,r,s,t=this;this.Submitted=!0;var u={itemId:this.examId,ByQuestion:null===(i=this.FormCtrls)||void 0===i?void 0:i.ByQuestion.value,from:null===(o=this.FormCtrls)||void 0===o?void 0:o.from.value,to:null===(r=this.FormCtrls)||void 0===r?void 0:r.to.value,value:null===(s=this.FormCtrls)||void 0===s?void 0:s.value.value};this.myForm.valid&&(this.spinner.show(),this.PointsService.addExamCustomPoint(u).subscribe(function(d){var c;1==d.returnValue&&(t.getExamCustomPoints(1),t.toastr.success("\u062a\u0645 \u0625\u0627\u0636\u0627\u0641\u0629 \u0627\u0644\u0646\u0642\u0627\u0637"),t.Submitted=!1,t.myForm.reset(),null===(c=t.FormCtrls)||void 0===c||c.ByQuestion.setValue(!1)),t.spinner.hide()}))}},{key:"getExamCustomPoints",value:function(t){var i=this;this.spinner.show(),this.PointsService.getExamCustomPoints(t,this.examId).subscribe(function(o){1==o.returnValue&&(i.ItemsCount=o.itemsCount,i.Points=o.points),i.spinner.hide()})}},{key:"deleteExamCustomPoint",value:function(t){var i=this;this.spinner.show(),this.PointsService.deleteExamCustomPoint(t.Id).subscribe(function(o){if(1==o.returnValue){var r=i.Points.findIndex(function(s){return s==t});i.Points.splice(r,1),i.toastr.success("\u062a\u0645 \u0627\u0644\u062d\u0630\u0641")}i.spinner.hide()})}},{key:"openDeleateExamPointDialog",value:function(t){var i=this;this.dialog.open(W.F,{data:{msg:"".concat(t.Value,": points"),panelClass:"dialog-radius"}}).afterClosed().subscribe(function(o){o&&i.deleteExamCustomPoint(t)})}},{key:"track",value:function(t,i){return i.Id}},{key:"ByQuestionValidators",value:function(t){1==t?(this.FormCtrls.from.reset(),this.FormCtrls.from.clearValidators(),this.FormCtrls.to.reset(),this.FormCtrls.to.clearValidators()):(this.FormCtrls.from.setValidators([m.kI.required,q.D.minusNum]),this.FormCtrls.to.setValidators([m.kI.required,q.D.bigZero])),this.FormCtrls.from.updateValueAndValidity(),this.FormCtrls.to.updateValueAndValidity()}}]),l}();return n.\u0275fac=function(a){return new(a||n)(e.Y36(m.qu),e.Y36(P._W),e.Y36(J.e),e.Y36(A.gz),e.Y36(Ge.q),e.Y36(F.uw),e.Y36(S.t2))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-exams-custome-points"]],decls:47,vars:39,consts:[[1,"row"],[1,"col-12"],["mat-raised-button","","routerLink","/dashboard/exams-setup/exam/index",1,"btn","btn-warning","bg-light-warning","float-right",3,"queryParams"],[1,"container-fluid"],[3,"formGroup"],[4,"ngIf"],[1,"col-lg-4","col-12"],["appearance","legacy"],["matInput","","type","number","formControlName","value"],["class","text-danger",4,"ngIf"],["align","end"],["mat-raised-button","","type","button",1,"btn","btn-primary","bg-light-info",3,"click"],[1,"fa","fa-plus"],[1,"table"],[4,"ngFor","ngForOf","ngForTrackBy"],["dir","ltr","previousLabel","","nextLabel","",3,"maxSize","pageChange",4,"ngIf"],["matInput","","type","number","formControlName","from"],["matInput","","type","number","formControlName","to"],[1,"text-danger"],["mat-mini-fab","","color","warn",3,"click"],["dir","ltr","previousLabel","","nextLabel","",3,"maxSize","pageChange"]],template:function(a,t){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"a",2),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.TgZ(9,"mat-card-content",3),e.TgZ(10,"form",4),e.TgZ(11,"div",0),e.YNc(12,nl,15,8,"ng-container",5),e.TgZ(13,"div",6),e.TgZ(14,"mat-form-field",7),e.TgZ(15,"mat-label"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e._UZ(18,"input",8),e.YNc(19,il,2,1,"mat-hint",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"mat-card-actions",10),e.TgZ(21,"button",11),e.NdJ("click",function(){return t.addExamCustomPoint()}),e._UZ(22,"i",12),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.qZA(),e.qZA(),e.ynx(25),e.TgZ(26,"table",13),e.TgZ(27,"thead"),e.TgZ(28,"tr"),e.TgZ(29,"th"),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"th"),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"th"),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"th"),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"th"),e._uU(42,"actions"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(43,"tbody"),e.YNc(44,rl,13,5,"tr",14),e.ALo(45,"paginate"),e.qZA(),e.YNc(46,sl,1,1,"pagination-controls",15),e.qZA(),e.BQk(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(4),e.hij(" ",e.lcZ(5,15,"labels.ExamPoints")," "),e.xp6(2),e.Q6J("queryParams",e.VKq(34,ul,t.functionId)),e.xp6(1),e.hij(" ",e.lcZ(8,17,"General.Back")," "),e.xp6(3),e.Q6J("formGroup",t.myForm),e.xp6(2),e.Q6J("ngIf",!1===t.FormCtrls.ByQuestion.value),e.xp6(4),e.hij(" ",e.lcZ(17,19,"labels.pointsNumber")," "),e.xp6(3),e.Q6J("ngIf",t.FormCtrls.value.invalid&&(t.FormCtrls.value.touched||t.Submitted)),e.xp6(4),e.hij(" ",e.lcZ(24,21,"General.Add")," "),e.xp6(7),e.hij(" ",e.lcZ(31,23,"labels.ByQuestion")," "),e.xp6(3),e.hij(" ",e.lcZ(34,25,"labels.From")," "),e.xp6(3),e.hij(" ",e.lcZ(37,27,"labels.To")," "),e.xp6(3),e.hij(" ",e.lcZ(40,29,"labels.pointsNumber")," "),e.xp6(5),e.Q6J("ngForOf",e.xi3(45,31,t.Points,e.WLB(36,ml,t.p,t.ItemsCount)))("ngForTrackBy",t.track),e.xp6(2),e.Q6J("ngIf",(null==t.Points?null:t.Points.length)>5))},directives:[Z.a8,Z.n5,y.zs,A.yS,Z.dn,m._Y,m.JL,m.sg,I.O5,C.KE,C.hX,j.Nt,m.wV,m.Fj,m.JJ,m.u,Z.hq,y.lW,I.sg,C.bx,be.Hw,ie.LS,Ee.Lv],pipes:[D.X$,ie._s],styles:[""]}),n}(),cl=v(9430),pl=v(8657),_l=v(5471);function hl(n,l){1&n&&(e.TgZ(0,"th",31),e._uU(1,"#"),e.qZA())}function gl(n,l){if(1&n&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&n){var a=l.index;e.xp6(1),e.Oqu(a+1)}}function fl(n,l){1&n&&(e.TgZ(0,"th",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Name")," "))}function vl(n,l){if(1&n&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.Oqu(a.exam_ar_name)}}function Zl(n,l){1&n&&(e.TgZ(0,"th",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.CourseName")," "))}function Cl(n,l){if(1&n&&(e.TgZ(0,"td",32),e._uU(1),e.qZA()),2&n){var a=l.$implicit,t=e.oxw();e.xp6(1),e.hij(" ",t.languageService.isArabic?a.course_ar_name:a.course_en_name," ")}}function Tl(n,l){1&n&&(e.TgZ(0,"th",33),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.ThePublish")," "))}function Il(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e._UZ(3,"i",35),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.Published")," "))}function Al(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.UnPublished")," "))}function xl(n,l){if(1&n&&(e.TgZ(0,"td",32),e.YNc(1,Il,4,3,"span",34),e.YNc(2,Al,3,3,"span",34),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.Q6J("ngIf",null==a?null:a.isPublish),e.xp6(1),e.Q6J("ngIf",!(null!=a&&a.isPublish))}}function bl(n,l){1&n&&e._UZ(0,"th",33)}function ql(n,l){1&n&&(e.TgZ(0,"span"),e._UZ(1,"i",44),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"labels.Publish")," "))}function yl(n,l){1&n&&(e.TgZ(0,"span"),e._UZ(1,"i",45),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"labels.Unpublish")," "))}function Fl(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"a",43),e.NdJ("click",function(){e.CHM(a);var o=e.oxw(2).$implicit;return e.oxw().onPublishExam(o)}),e.YNc(1,ql,4,3,"span",34),e.YNc(2,yl,4,3,"span",34),e.qZA()}if(2&n){var t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",!t.isPublish),e.xp6(1),e.Q6J("ngIf",t.isPublish)}}var Ql=function(l,a,t){return{examId:l,functionId:a,parentId:t}};function Ul(n,l){if(1&n&&(e.TgZ(0,"a",46),e._UZ(1,"i",47),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n){var a=e.oxw(2).$implicit,t=e.oxw();e.Q6J("queryParams",e.kEZ(4,Ql,a.id,t.functionId,t.parentId)),e.xp6(2),e.hij(" ",e.lcZ(3,2,"General.Edit")," ")}}function Nl(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"a",43),e.NdJ("click",function(){e.CHM(a);var i=e.oxw(2).$implicit;return e.oxw().openDeleateDialog(i)}),e._UZ(1,"i",48),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.Delete")," "))}var Xe=function(l){return{functionId:l}};function wl(n,l){if(1&n&&(e.TgZ(0,"a",49),e._UZ(1,"i",50),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&n){var a=e.oxw(2).$implicit,t=e.oxw();e.hYB("routerLink","/dashboard/exams-setup/exam-preview/",a.id,"/",t.type,""),e.Q6J("queryParams",e.VKq(6,Xe,t.functionId)),e.xp6(2),e.hij(" ",e.lcZ(3,4,"General.SurveyPreview")," ")}}function kl(n,l){if(1&n&&(e.ynx(0),e.YNc(1,Fl,3,2,"a",40),e.YNc(2,Ul,4,8,"a",41),e.YNc(3,Nl,4,3,"a",40),e.YNc(4,wl,4,8,"a",42),e.BQk()),2&n){var a=l.$implicit;e.xp6(1),e.Q6J("ngIf","publish"===a.functionName),e.xp6(1),e.Q6J("ngIf","Edit"===a.functionName),e.xp6(1),e.Q6J("ngIf","Delete"===a.functionName),e.xp6(1),e.Q6J("ngIf","Show"===a.functionName)}}function Sl(n,l){if(1&n&&(e.TgZ(0,"td",32),e.TgZ(1,"div",36),e.TgZ(2,"button",37),e._uU(3," actions "),e.qZA(),e.TgZ(4,"div",38),e.YNc(5,kl,5,4,"ng-container",39),e.qZA(),e.qZA(),e.qZA()),2&n){var a=e.oxw();e.xp6(5),e.Q6J("ngForOf",a.rowFunctions)}}function Dl(n,l){1&n&&e._UZ(0,"tr",51)}function El(n,l){if(1&n&&e._UZ(0,"tr",52),2&n){var a=l.$implicit;e.ekj("bg-light-info",!(null!=a&&a.isPublish))}}function Ll(n,l){if(1&n&&(e.TgZ(0,"tr",53),e.TgZ(1,"td",54),e._uU(2),e.qZA(),e.qZA()),2&n){e.oxw();var a=e.MAs(37);e.xp6(2),e.hij(' No data matching the filter "',a.value,'" ')}}var Yl=function(l,a){return{functionId:l,parentId:a}},Jl=function(){return[10]},jl=function(){var n=function(){function l(a,t,i,o,r,s,u,d,c,h){var p=this;(0,w.Z)(this,l),this.route=a,this.fb=t,this.authserv=i,this.examService=o,this.toastr=r,this.spinner=s,this.generalService=u,this.dialog=d,this.courseser=c,this.languageService=h,this.exams=[],this.countries=[],this.stages=[],this.educationYears=[],this.subjects=[],this.exms=[],this.exam=[],this.displayedColumns=["#","exam_ar_name","course","isPublish","actions"],this.curPage=1,a.paramMap.subscribe(function(_){p.type=Number(_.get("typeId"))}),a.paramMap.subscribe(function(_){p.subId=Number(_.get("courseId"))}),a.queryParamMap.subscribe(function(_){p.functionId=Number(_.get("functionId")),p.parentId=Number(_.get("parentId")),p.functionId&&p.authserv.getUserRowFunctions(p.functionId).subscribe(function(f){f&&(p.rowFunctions=f)})})}return(0,N.Z)(l,[{key:"ngOnInit",value:function(){this.EduCompId=this.authserv.getEduCompId(),this.branchId=this.authserv.getBranchId(),this.myForm=this.fb.group({examName:["",m.kI.required]}),this.getAllExams(1)}},{key:"examNameCtrl",get:function(){return this.myForm.get("examName")}},{key:"ngAfterViewInit",value:function(){var t=this;this.authserv.EduCompId.subscribe(function(i){t.EduCompId=i.EduCompId,t.getAllExams(1)}),this.authserv.branchId.subscribe(function(i){t.branchId=i.branchId}),this.dataSource.paginator=this.paginator,this.startSortingTable()}},{key:"applyFilter",value:function(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}},{key:"getAllExams",value:function(t){var o,i=this;this.curPage=t,this.spinner.show();var r={typeId:this.type,page:t,EduCompId:this.EduCompId,subjectId:this.subId,examName:null===(o=this.examNameCtrl)||void 0===o?void 0:o.value};this.examService.getAllNormalExams(r).subscribe(function(s){s&&(i.dataSource=new g.by(s.examList),i.exams=s.examList,i.totalItems=s.totalCount,i.startSortingTable()),i.spinner.hide()})}},{key:"removeExam",value:function(t){var i=this;this.examService.deleteExam(t.id).subscribe(function(o){o&&(i.toastr.success("General.DeleteSuccessfully"),1==i.dataSource.data.length&&i.curPage>1?(i.getAllExams(i.curPage-1),i.paginator.pageIndex=i.curPage-1):i.getAllExams(i.curPage))})}},{key:"openDeleateDialog",value:function(t){var i=this;this.dialog.open(W.F,{data:{msg:t.exam_ar_name,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(o){o&&i.removeExam(t)})}},{key:"onPublishExam",value:function(t){var i=this;this.examService.publishExam(t.id).subscribe(function(o){if(o){var r=i.exams.findIndex(function(s){return s===t});i.exams[r].isPublish=!i.exams[r].isPublish,i.toastr.success("General.Done")}})}},{key:"track",value:function(t,i){return i.Id}},{key:"startSortingTable",value:function(){var t=this;this.dataSource.sortingDataAccessor=function(i,o){return"course"===o?t.languageService.isArabic?i.course_ar_name:i.course_en_name:i[o]},this.dataSource.sort=this.sort}}]),l}();return n.\u0275fac=function(a){return new(a||n)(e.Y36(A.gz),e.Y36(m.qu),e.Y36(J.e),e.Y36(ee.R),e.Y36(cl.K),e.Y36(S.t2),e.Y36(X.m),e.Y36(F.uw),e.Y36(He.N),e.Y36(pl.T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-surveys-index"]],viewQuery:function(a,t){var i;1&a&&(e.Gf(V.NW,5),e.Gf(Q.YE,5)),2&a&&(e.iGM(i=e.CRH())&&(t.paginator=i.first),e.iGM(i=e.CRH())&&(t.sort=i.first))},decls:59,vars:34,consts:[[1,"row"],[1,"col-12","mb-3"],[1,""],["mat-raised-button","","routerLink","/dashboard/setup/course/index",1,"btn","btn-warning","bg-light-warning","float-right",3,"queryParams"],["mat-raised-button","","routerLink","../add-survey",1,"btn","btn-info","bg-light-info","float-right","mb-2",3,"queryParams"],[1,"fa","fa-plus"],[1,"container-fluid"],[1,"col-12"],[3,"formGroup"],[1,"col-md-12","col-12"],["label","labels.SurveyName",3,"control"],["align","end"],["mat-raised-button","",1,"btn","btn-info","float-right",3,"click"],[1,"fa","fa-search","mr-1"],["appearance","standard"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","exam_ar_name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","course"],["matColumnDef","isPublish"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"bg-light-info",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions","length","pageSize","page"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","","mat-sort-header",""],[4,"ngIf"],["aria-hidden","true",1,"fa","fa-check-circle","success","ml-1"],["ngbDropdown","",1,"d-inline-block"],["type","button","id","dropdownBasic1","ngbDropdownToggle","",1,"btn","btn-outline-primary"],["ngbDropdownMenu","","aria-labelledby","dropdownBasic1"],[4,"ngFor","ngForOf"],["ngbDropdownItem","",3,"click",4,"ngIf"],["ngbDropdownItem","","routerLink","../add-survey",3,"queryParams",4,"ngIf"],["ngbDropdownItem","","target","_blank",3,"routerLink","queryParams",4,"ngIf"],["ngbDropdownItem","",3,"click"],[1,"ft-upload","font-medium-3","mr-2"],[1,"ft-download","font-medium-3","mr-2"],["ngbDropdownItem","","routerLink","../add-survey",3,"queryParams"],[1,"fa","fa-edit","font-medium-3","mr-2"],[1,"fa","fa-times","font-medium-3","mr-2"],["ngbDropdownItem","","target","_blank",3,"routerLink","queryParams"],[1,"fa","fa-video-camera","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(a,t){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card",2),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"a",3),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"a",4),e._UZ(10,"i",5),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.qZA(),e.TgZ(13,"mat-card-content",6),e.TgZ(14,"div",0),e.TgZ(15,"div",7),e.TgZ(16,"form",8),e.TgZ(17,"div",0),e.TgZ(18,"div",9),e._UZ(19,"app-input",10),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"mat-card-actions",11),e.TgZ(21,"a",12),e.NdJ("click",function(){return t.getAllExams(1)}),e._UZ(22,"i",13),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",0),e.TgZ(26,"div",7),e.TgZ(27,"mat-card"),e.TgZ(28,"mat-card-title"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"mat-card-content"),e.TgZ(32,"mat-form-field",14),e.TgZ(33,"mat-label"),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"input",15,16),e.NdJ("keyup",function(o){return t.applyFilter(o)}),e.qZA(),e.qZA(),e.TgZ(38,"div",17),e.TgZ(39,"table",18),e.ynx(40,19),e.YNc(41,hl,2,0,"th",20),e.YNc(42,gl,2,1,"td",21),e.BQk(),e.ynx(43,22),e.YNc(44,fl,3,3,"th",23),e.YNc(45,vl,2,1,"td",21),e.BQk(),e.ynx(46,24),e.YNc(47,Zl,3,3,"th",23),e.YNc(48,Cl,2,1,"td",21),e.BQk(),e.ynx(49,25),e.YNc(50,Tl,3,3,"th",23),e.YNc(51,xl,3,2,"td",21),e.BQk(),e.ynx(52,26),e.YNc(53,bl,1,0,"th",23),e.YNc(54,Sl,6,1,"td",21),e.BQk(),e.YNc(55,Dl,1,0,"tr",27),e.YNc(56,El,1,2,"tr",28),e.YNc(57,Ll,3,1,"tr",29),e.qZA(),e.TgZ(58,"mat-paginator",30),e.NdJ("page",function(o){return t.getAllExams(o.pageIndex+1)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(4),e.hij(" ",e.lcZ(5,16,"General.Search")," "),e.xp6(2),e.Q6J("queryParams",e.VKq(28,Xe,t.parentId)),e.xp6(1),e.hij(" ",e.lcZ(8,18,"General.Back")," "),e.xp6(2),e.Q6J("queryParams",e.WLB(30,Yl,t.functionId,t.parentId)),e.xp6(2),e.hij(" ",e.lcZ(12,20,"General.Add")," "),e.xp6(5),e.Q6J("formGroup",t.myForm),e.xp6(3),e.Q6J("control",t.examNameCtrl),e.xp6(4),e.hij(" ",e.lcZ(24,22,"General.Search")," "),e.xp6(6),e.hij(" ",e.lcZ(30,24,"Navbar.Surveys"),""),e.xp6(5),e.Oqu(e.lcZ(35,26,"General.Search")),e.xp6(5),e.Q6J("dataSource",t.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(33,Jl))("length",t.totalItems)("pageSize",10))},directives:[Z.a8,Z.n5,y.zs,A.yS,Z.dn,m._Y,m.JL,m.sg,_l.a,Z.hq,C.KE,C.hX,j.Nt,g.BZ,Q.YE,g.w1,g.fO,g.Dz,g.as,g.nj,g.Ee,V.NW,g.ge,g.ev,Q.nU,I.O5,E.jt,E.iD,E.Vi,I.sg,E.TH,g.XQ,g.Gk],pipes:[D.X$],styles:[""]}),n}(),Vl=v(567),Ke=v(1059),et=v(4850),Ml=v(5013);function Pl(n,l){1&n&&(e.TgZ(0,"mat-checkbox",23),e._uU(1," Remove Image "),e.qZA()),2&n&&e.Q6J("value",!0)}function Gl(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Ol(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function Bl(n,l){if(1&n&&(e.TgZ(0,"mat-hint",43),e.YNc(1,Gl,3,3,"span",44),e.YNc(2,Ol,3,3,"span",44),e.qZA()),2&n){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==a.answerOneMarkCtrl.errors?null:a.answerOneMarkCtrl.errors.required),e.xp6(1),e.Q6J("ngIf",null==a.answerOneMarkCtrl.errors?null:a.answerOneMarkCtrl.errors.bigZero)}}function Hl(n,l){1&n&&(e.TgZ(0,"mat-checkbox",45),e._uU(1," Remove Image "),e.qZA()),2&n&&e.Q6J("value",!0)}function Rl(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function $l(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function zl(n,l){if(1&n&&(e.TgZ(0,"mat-hint",43),e.YNc(1,Rl,3,3,"span",44),e.YNc(2,$l,3,3,"span",44),e.qZA()),2&n){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==a.answerTwoMarkCtrl.errors?null:a.answerTwoMarkCtrl.errors.required),e.xp6(1),e.Q6J("ngIf",null==a.answerTwoMarkCtrl.errors?null:a.answerTwoMarkCtrl.errors.bigZero)}}function Wl(n,l){1&n&&(e.TgZ(0,"mat-checkbox",46),e._uU(1," Remove Image "),e.qZA()),2&n&&e.Q6J("value",!0)}function Xl(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Kl(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function er(n,l){if(1&n&&(e.TgZ(0,"mat-hint",43),e.YNc(1,Xl,3,3,"span",44),e.YNc(2,Kl,3,3,"span",44),e.qZA()),2&n){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==a.answerThreeMarkCtrl.errors?null:a.answerThreeMarkCtrl.errors.required),e.xp6(1),e.Q6J("ngIf",null==a.answerThreeMarkCtrl.errors?null:a.answerThreeMarkCtrl.errors.bigZero)}}function tr(n,l){1&n&&(e.TgZ(0,"mat-checkbox",47),e._uU(1," Remove Image "),e.qZA()),2&n&&e.Q6J("value",!0)}function nr(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function ar(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterCorrectValue")," "))}function ir(n,l){if(1&n&&(e.TgZ(0,"mat-hint",43),e.YNc(1,nr,3,3,"span",44),e.YNc(2,ar,3,3,"span",44),e.qZA()),2&n){var a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==a.answerFourMarkCtrl.errors?null:a.answerFourMarkCtrl.errors.required),e.xp6(1),e.Q6J("ngIf",null==a.answerFourMarkCtrl.errors?null:a.answerFourMarkCtrl.errors.bigZero)}}function or(n,l){1&n&&(e.TgZ(0,"mat-checkbox",48),e._uU(1," Remove Image "),e.qZA()),2&n&&e.Q6J("value",!0)}function lr(n,l){if(1&n){var a=e.EpF();e.ynx(0,3),e.TgZ(1,"mat-card"),e.TgZ(2,"mat-card-subtitle"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"mat-card-content"),e.TgZ(6,"div",3),e.TgZ(7,"div",4),e.TgZ(8,"mat-form-field",5),e.TgZ(9,"mat-label"),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"input",24),e.YNc(13,Bl,3,2,"mat-hint",25),e.qZA(),e.qZA(),e.TgZ(14,"div",4),e.TgZ(15,"mat-form-field",5),e.TgZ(16,"mat-label"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"input",26),e.qZA(),e.qZA(),e.TgZ(20,"div",4),e.TgZ(21,"div",3),e.TgZ(22,"div",7),e.TgZ(23,"mat-label"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"label",27),e._UZ(27,"i",28),e.qZA(),e.TgZ(28,"input",29),e.NdJ("change",function(o){return e.CHM(a),e.oxw().importOneFile(o)}),e.qZA(),e.qZA(),e.TgZ(29,"div",9),e.YNc(30,Hl,2,1,"mat-checkbox",30),e.TgZ(31,"div",10),e._UZ(32,"img",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"mat-card"),e.TgZ(34,"mat-card-subtitle"),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"mat-card-content"),e.TgZ(38,"div",3),e.TgZ(39,"div",4),e.TgZ(40,"mat-form-field",5),e.TgZ(41,"mat-label"),e._uU(42),e.ALo(43,"translate"),e.qZA(),e._UZ(44,"input",31),e.YNc(45,zl,3,2,"mat-hint",25),e.qZA(),e.qZA(),e.TgZ(46,"div",4),e.TgZ(47,"mat-form-field",5),e.TgZ(48,"mat-label"),e._uU(49),e.ALo(50,"translate"),e.qZA(),e._UZ(51,"input",32),e.qZA(),e.qZA(),e.TgZ(52,"div",4),e.TgZ(53,"div",3),e.TgZ(54,"div",7),e.TgZ(55,"mat-label"),e._uU(56),e.ALo(57,"translate"),e.qZA(),e.TgZ(58,"label",27),e._UZ(59,"i",28),e.qZA(),e.TgZ(60,"input",33),e.NdJ("change",function(o){return e.CHM(a),e.oxw().importTwoFile(o)}),e.qZA(),e.qZA(),e.TgZ(61,"div",9),e.TgZ(62,"div",10),e.YNc(63,Wl,2,1,"mat-checkbox",34),e._UZ(64,"img",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(65,"mat-card"),e.TgZ(66,"mat-card-subtitle"),e._uU(67),e.ALo(68,"translate"),e.qZA(),e.TgZ(69,"mat-card-content"),e.TgZ(70,"div",3),e.TgZ(71,"div",4),e.TgZ(72,"mat-form-field",5),e.TgZ(73,"mat-label"),e._uU(74),e.ALo(75,"translate"),e.qZA(),e._UZ(76,"input",35),e.YNc(77,er,3,2,"mat-hint",25),e.qZA(),e.qZA(),e.TgZ(78,"div",4),e.TgZ(79,"mat-form-field",5),e.TgZ(80,"mat-label"),e._uU(81),e.ALo(82,"translate"),e.qZA(),e._UZ(83,"input",36),e.qZA(),e.qZA(),e.TgZ(84,"div",4),e.TgZ(85,"div",3),e.TgZ(86,"div",7),e.TgZ(87,"mat-label"),e._uU(88),e.ALo(89,"translate"),e.qZA(),e.TgZ(90,"label",27),e._UZ(91,"i",28),e.qZA(),e.TgZ(92,"input",37),e.NdJ("change",function(o){return e.CHM(a),e.oxw().importThreeFile(o)}),e.qZA(),e.qZA(),e.TgZ(93,"div",9),e.TgZ(94,"div",10),e.YNc(95,tr,2,1,"mat-checkbox",38),e._UZ(96,"img",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(97,"mat-card"),e.TgZ(98,"mat-card-subtitle"),e._uU(99),e.ALo(100,"translate"),e.qZA(),e.TgZ(101,"mat-card-content"),e.TgZ(102,"div",3),e.TgZ(103,"div",4),e.TgZ(104,"mat-form-field",5),e.TgZ(105,"mat-label"),e._uU(106),e.ALo(107,"translate"),e.qZA(),e._UZ(108,"input",39),e.YNc(109,ir,3,2,"mat-hint",25),e.qZA(),e.qZA(),e.TgZ(110,"div",4),e.TgZ(111,"mat-form-field",5),e.TgZ(112,"mat-label"),e._uU(113),e.ALo(114,"translate"),e.qZA(),e._UZ(115,"input",40),e.qZA(),e.qZA(),e.TgZ(116,"div",4),e.TgZ(117,"div",3),e.TgZ(118,"div",7),e.TgZ(119,"mat-label"),e._uU(120),e.ALo(121,"translate"),e.qZA(),e.TgZ(122,"label",27),e._UZ(123,"i",28),e.qZA(),e.TgZ(124,"input",41),e.NdJ("change",function(o){return e.CHM(a),e.oxw().importFourFile(o)}),e.qZA(),e.qZA(),e.TgZ(125,"div",9),e.TgZ(126,"div",10),e.YNc(127,or,2,1,"mat-checkbox",42),e._UZ(128,"img",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&n){var t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,28,"labels.AnswerNumber")," (1) "),e.xp6(7),e.hij(" ",e.lcZ(11,30,"labels.answerMark")," "),e.xp6(3),e.Q6J("ngIf",t.answerOneMarkCtrl.invalid&&(t.answerOneMarkCtrl.touched||t.submitted)),e.xp6(4),e.hij(" ",e.lcZ(18,32,"labels.AnswerText")," (1) "),e.xp6(7),e.hij(" ",e.lcZ(25,34,"labels.AnswerPic")," (1) "),e.xp6(6),e.Q6J("ngIf",t.answerOneImageCtrl.value),e.xp6(2),e.Q6J("src",t.answerOneImageCtrl.value,e.LSH),e.xp6(3),e.hij(" ",e.lcZ(36,36,"labels.AnswerNumber")," (2) "),e.xp6(7),e.hij(" ",e.lcZ(43,38,"labels.answerMark")," "),e.xp6(3),e.Q6J("ngIf",t.answerTwoMarkCtrl.invalid&&(t.answerTwoMarkCtrl.touched||t.submitted)),e.xp6(4),e.hij(" ",e.lcZ(50,40,"labels.AnswerText")," (2) "),e.xp6(7),e.hij(" ",e.lcZ(57,42,"labels.AnswerPic")," (2) "),e.xp6(7),e.Q6J("ngIf",t.answerTwoImageCtrl.value),e.xp6(1),e.Q6J("src",t.answerTwoImageCtrl.value,e.LSH),e.xp6(3),e.hij(" ",e.lcZ(68,44,"labels.AnswerNumber")," (3) "),e.xp6(7),e.hij(" ",e.lcZ(75,46,"labels.answerMark")," "),e.xp6(3),e.Q6J("ngIf",t.answerThreeMarkCtrl.invalid&&(t.answerThreeMarkCtrl.touched||t.submitted)),e.xp6(4),e.hij(" ",e.lcZ(82,48,"labels.AnswerText")," (3) "),e.xp6(7),e.hij(" ",e.lcZ(89,50,"labels.AnswerPic")," (3) "),e.xp6(7),e.Q6J("ngIf",t.answerThreeImageCtrl.value),e.xp6(1),e.Q6J("src",t.answerThreeImageCtrl.value,e.LSH),e.xp6(3),e.hij(" ",e.lcZ(100,52,"labels.AnswerNumber")," (4) "),e.xp6(7),e.hij(" ",e.lcZ(107,54,"labels.answerMark")," "),e.xp6(3),e.Q6J("ngIf",t.answerFourMarkCtrl.invalid&&t.answerFourMarkCtrl.invalid&&(t.answerFourMarkCtrl.touched||t.submitted)),e.xp6(4),e.hij(" ",e.lcZ(114,56,"labels.AnswerText")," (4) "),e.xp6(7),e.hij(" ",e.lcZ(121,58,"labels.AnswerPic")," (4) "),e.xp6(7),e.Q6J("ngIf",t.answerFourImageCtrl.value),e.xp6(1),e.Q6J("src",t.answerFourImageCtrl.value,e.LSH)}}function rr(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"button",49),e.NdJ("click",function(){return e.CHM(a),e.oxw().onSubmit()}),e._UZ(1,"i",50),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.Add")," "))}function sr(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"button",51),e.NdJ("click",function(){return e.CHM(a),e.oxw().onSubmit()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"General.Update")," "))}function ur(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"tr",52),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e.TgZ(8,"button",53),e.NdJ("click",function(){var r=e.CHM(a).$implicit;return e.oxw().getQuestionForEditByID(r.ExamQuestId)}),e.TgZ(9,"mat-icon"),e._uU(10,"edit"),e.qZA(),e.qZA(),e.TgZ(11,"button",54),e.NdJ("click",function(){var r=e.CHM(a).$implicit;return e.oxw().removeExamQuestion(r.ExamQuestId)}),e.TgZ(12,"mat-icon"),e._uU(13,"delete"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){var t=l.$implicit;e.xp6(2),e.Oqu(t.ExamQuestId),e.xp6(2),e.Oqu(t.Text),e.xp6(2),e.Oqu(t.QuestionTypeAr)}}var mr=function(){var n=function(){function l(a,t,i,o,r,s,u){(0,w.Z)(this,l),this.fb=a,this.examService=t,this.authserv=i,this.toastr=o,this.spinner=r,this.fileService=s,this.data=u,this.unitId=0,this.lessonId=0,this.units=[],this.lessions=[],this.questionsInGrid=[],this.questionId=0,this.submitted=!1,this.oneIsCorrect=!1,this.twoIsCorrect=!1,this.threeIsCorrect=!1,this.fourIsCorrect=!1,this.questionFile=null,this.answerOneFile=null,this.answerTwoFile=null,this.answerThreeFile=null,this.answerFourFile=null,this.perfectAnswerAttach_preview=null,this.examId=u.examId,this.examGroupHeaderId=u.examGroupHeaderId,this.subjectId=u.subjectId,0!=this.examGroupHeaderId&&this.getAllQuestionsByHeadId()}return(0,N.Z)(l,[{key:"mainQuestionCtrl",get:function(){return this.myForm.get("mainQuestion")}},{key:"questionTypeIdCtrl",get:function(){return this.myForm.get("questionTypeId")}},{key:"questionImageCtrl",get:function(){return this.myForm.get("questionImage")}},{key:"unitIdCtrl",get:function(){return this.myForm.get("unitId")}},{key:"lessonIdCtrl",get:function(){return this.myForm.get("lessonId")}},{key:"questionTextCtrl",get:function(){return this.myForm.get("exam_question_text")}},{key:"questionPerfectAnswerCtrl",get:function(){return this.myForm.get("questionPerfectAnswer")}},{key:"perfect_answer_attachCtrl",get:function(){return this.myForm.get("perfect_answer_attach")}},{key:"questionMarkCtrl",get:function(){return this.myForm.get("questionMark")}},{key:"answerOneIdCtrl",get:function(){return this.myForm.get("answerOneId")}},{key:"answerOneCtrl",get:function(){return this.myForm.get("answerOne")}},{key:"answerOneIsCorrectCtrl",get:function(){return this.myForm.get("answerOneIsCorrect")}},{key:"answerOneImageCtrl",get:function(){return this.myForm.get("answerOneImage")}},{key:"answerTwoIdCtrl",get:function(){return this.myForm.get("answerTwoId")}},{key:"answerTwoCtrl",get:function(){return this.myForm.get("answerTwo")}},{key:"answerTwoIsCorrectCtrl",get:function(){return this.myForm.get("answerTwoIsCorrect")}},{key:"answerTwoImageCtrl",get:function(){return this.myForm.get("answerTwoImage")}},{key:"answerThreeIdCtrl",get:function(){return this.myForm.get("answerThreeId")}},{key:"answerThreeCtrl",get:function(){return this.myForm.get("answerThree")}},{key:"answerThreeIsCorrectCtrl",get:function(){return this.myForm.get("answerThreeIsCorrect")}},{key:"answerThreeImageCtrl",get:function(){return this.myForm.get("answerThreeImage")}},{key:"answerFourIdCtrl",get:function(){return this.myForm.get("answerFourId")}},{key:"answerFourCtrl",get:function(){return this.myForm.get("answerFour")}},{key:"answerFourIsCorrectCtrl",get:function(){return this.myForm.get("answerFourIsCorrect")}},{key:"answerFourImageCtrl",get:function(){return this.myForm.get("answerFourImage")}},{key:"answerOneRemove_imageCtrl",get:function(){return this.myForm.get("answerOneRemove_image")}},{key:"answerTwoRemove_imageCtrl",get:function(){return this.myForm.get("answerTwoRemove_image")}},{key:"answerThreeRemove_imageCtrl",get:function(){return this.myForm.get("answerThreeRemove_image")}},{key:"answerFourRemove_imageCtrl",get:function(){return this.myForm.get("answerFourRemove_image")}},{key:"questionImageRemove_imageCtrl",get:function(){return this.myForm.get("remove_image")}},{key:"answerOneMarkCtrl",get:function(){return this.myForm.get("answerOneMark")}},{key:"answerTwoMarkCtrl",get:function(){return this.myForm.get("answerTwoMark")}},{key:"answerThreeMarkCtrl",get:function(){return this.myForm.get("answerThreeMark")}},{key:"answerFourMarkCtrl",get:function(){return this.myForm.get("answerFourMark")}},{key:"ngOnInit",value:function(){this.myForm=this.fb.group({mainQuestion:[null],questionTypeId:[2,m.kI.required],questionImage:[null],remove_image:[!1],unitId:[null],lessionId:[null],exam_question_text:[null],questionPerfectAnswer:[null],perfect_answer_attach:[null],questionMark:[0],answerOneId:[null],answerOne:[null],answerOneMark:[null],answerTwoMark:[null],answerThreeMark:[null],answerFourMark:[null],answerOneIsCorrect:[],answerOneImage:[null],answerTwoId:[null],answerTwo:[null],answerTwoIsCorrect:[],answerTwoImage:[null],answerThreeId:[null],answerThree:[null],answerThreeIsCorrect:[],answerThreeImage:[null],answerFourId:[null],answerFour:[null],answerFourIsCorrect:[],answerFourImage:[null],answerOneRemove_image:[!1],answerTwoRemove_image:[!1],answerThreeRemove_image:[!1],answerFourRemove_image:[!1]}),this.educationCompanyId=this.authserv.getEduCompId()}},{key:"getAllQuestionsByHeadId",value:function(){var t=this;this.spinner.show(),this.examService.getAllQuestionsByHeadId(this.examGroupHeaderId).subscribe(function(i){i&&(console.log("getAllQuestionsByHeadId",i),t.questionsInGrid=[],t.questionsInGrid=i,t.spinner.hide())})}},{key:"onSubmit",value:function(){var i,o,r,s,u,d,c,h,p,_,f,T,b,x,k,L,Y,G,O,te,M,B,H,R,U,le,re,se,ue,me,de,ce,pe,_e,t=this;if(this.submitted=!0,2==(null===(i=this.questionTypeIdCtrl)||void 0===i?void 0:i.value)){var ne={choice_id:null!==(r=null===(o=this.answerOneIdCtrl)||void 0===o?void 0:o.value)&&void 0!==r?r:0,choice_text:null===(s=this.answerOneCtrl)||void 0===s?void 0:s.value,mark:null===(u=this.answerOneMarkCtrl)||void 0===u?void 0:u.value,is_correct:0===this.answerOneIsCorrectCtrl.value,choice_image:this.answerOneFile||null,remove_image:null===(d=this.answerOneRemove_imageCtrl)||void 0===d?void 0:d.value,path:null===(c=this.answerOneImageCtrl)||void 0===c?void 0:c.value},ae={choice_id:null!==(p=null===(h=this.answerTwoIdCtrl)||void 0===h?void 0:h.value)&&void 0!==p?p:0,choice_text:null===(_=this.answerTwoCtrl)||void 0===_?void 0:_.value,mark:null===(f=this.answerTwoMarkCtrl)||void 0===f?void 0:f.value,is_correct:!!(null===(T=this.answerTwoIsCorrectCtrl)||void 0===T?void 0:T.value),choice_image:this.answerTwoFile||null,remove_image:null===(b=this.answerTwoRemove_imageCtrl)||void 0===b?void 0:b.value,path:null===(x=this.answerTwoImageCtrl)||void 0===x?void 0:x.value},Ue={choice_id:null!==(L=null===(k=this.answerThreeIdCtrl)||void 0===k?void 0:k.value)&&void 0!==L?L:0,choice_text:null===(Y=this.answerThreeCtrl)||void 0===Y?void 0:Y.value,mark:null===(G=this.answerThreeMarkCtrl)||void 0===G?void 0:G.value,is_correct:!!(null===(O=this.answerThreeIsCorrectCtrl)||void 0===O?void 0:O.value),choice_image:this.answerThreeFile||null,remove_image:null===(te=this.answerThreeRemove_imageCtrl)||void 0===te?void 0:te.value,path:null===(M=this.answerThreeImageCtrl)||void 0===M?void 0:M.value},we={choice_id:null!==(H=null===(B=this.answerFourIdCtrl)||void 0===B?void 0:B.value)&&void 0!==H?H:0,choice_text:null===(R=this.answerFourCtrl)||void 0===R?void 0:R.value,mark:null===(U=this.answerFourMarkCtrl)||void 0===U?void 0:U.value,is_correct:!!(null===(le=this.answerFourIsCorrectCtrl)||void 0===le?void 0:le.value),choice_image:this.answerFourFile||null,remove_image:null===(re=this.answerFourRemove_imageCtrl)||void 0===re?void 0:re.value,path:null===(se=this.answerFourImageCtrl)||void 0===se?void 0:se.value},$={exam_question_main_question:null===(ue=this.mainQuestionCtrl)||void 0===ue?void 0:ue.value,exam_question_mark:null===(me=this.questionMarkCtrl)||void 0===me?void 0:me.value,exam_question_perfect_answer:null===(de=this.questionPerfectAnswerCtrl)||void 0===de?void 0:de.value,exam_question_text:null===(ce=this.questionTextCtrl)||void 0===ce?void 0:ce.value,exam_question_type_id:null===(pe=this.questionTypeIdCtrl)||void 0===pe?void 0:pe.value,exam_selected_question_head_id:this.examGroupHeaderId,exam_selected_subject_id:this.subjectId,exam_question_image:this.questionFile||null,remove_image:null===(_e=this.questionImageRemove_imageCtrl)||void 0===_e?void 0:_e.value,exam_question_id:this.questionId,mcq_choices:[ne,ae,Ue,we]};if(null==$.exam_question_text&&null==$.exam_question_image)return void this.toastr.warning("\u064a\u062c\u0628 \u0627\u062f\u062e\u0627\u0644 \u0646\u0635 \u0627\u0644\u0633\u0624\u0627\u0644 \u0627\u0648 \u0627\u062e\u062a\u064a\u0627\u0631 \u0635\u0648\u0631\u0647 \u0627\u0644\u0633\u0624\u0627\u0644");if(null===ne.choice_text&&null===ne.choice_image&&null==ne.path)return void this.toastr.warning("\u064a\u062c\u0628 \u0627\u062f\u062e\u0627\u0644 \u0646\u0635 \u0627\u0644\u0633\u0624\u0627\u0644 \u0627\u0644\u0623\u0648\u0644 \u0627\u0648 \u0627\u062e\u062a\u064a\u0627\u0631 \u0635\u0648\u0631\u0629 ");if(null===ae.choice_text&&null===ae.choice_image&&null==ae.path)return void this.toastr.warning("\u064a\u062c\u0628 \u0627\u062f\u062e\u0627\u0644 \u0646\u0635 \u0627\u0644\u0633\u0624\u0627\u0644 \u0627\u0644\u062b\u0627\u0646\u064a \u0627\u0648 \u0627\u062e\u062a\u064a\u0627\u0631 \u0635\u0648\u0631\u0629 ");var he=!0,ge=!0,fe=!0,ve=!0;$.mcq_choices.forEach(function(Ze,z){var Ce,Te,Ie,Ae,Je,je,Ve,Me;if((null!=Ze.choice_text||null!=Ze.choice_image)&&null==Ze.mark)return t.toastr.warning("pleace enter mark for mcq: "+(z+1)),0==z?(he=!1,null===(Ce=t.answerOneMarkCtrl)||void 0===Ce||Ce.setValidators([m.kI.required])):(he=!0,null===(Te=t.answerOneMarkCtrl)||void 0===Te||Te.clearValidators()),1==z?(ge=!1,null===(Ie=t.answerTwoMarkCtrl)||void 0===Ie||Ie.setValidators([m.kI.required])):(ge=!0,null===(Ae=t.answerTwoMarkCtrl)||void 0===Ae||Ae.clearValidators()),2==z?(fe=!1,null===(Je=t.answerThreeMarkCtrl)||void 0===Je||Je.setValidators([m.kI.required])):(fe=!0,null===(je=t.answerThreeMarkCtrl)||void 0===je||je.clearValidators()),void(3==z?(ve=!1,null===(Ve=t.answerFourMarkCtrl)||void 0===Ve||Ve.setValidators([m.kI.required])):(ve=!0,null===(Me=t.answerFourMarkCtrl)||void 0===Me||Me.clearValidators()))}),he&&ge&&fe&&ve&&(this.questionId>0?this.editMcqQuestion($):this.addMcqQuestion($))}}},{key:"addMcqQuestion",value:function(t){var i=this;this.myForm.valid&&(this.spinner.show(),this.examService.addSurveyQuestion(t).subscribe(function(o){var r,s,u,d,c,h,p,_,f;200==o.returnValue?(i.getAllQuestionsByHeadId(),null===(r=i.mainQuestionCtrl)||void 0===r||r.setValue(null),null===(s=i.questionMarkCtrl)||void 0===s||s.setValue(null),null===(u=i.questionTypeIdCtrl)||void 0===u||u.setValue(null),null===(d=i.questionImageCtrl)||void 0===d||d.setValue(null),null===(c=i.questionTextCtrl)||void 0===c||c.setValue(null),null===(h=i.questionPerfectAnswerCtrl)||void 0===h||h.setValue(null),null===(p=i.perfect_answer_attachCtrl)||void 0===p||p.setValue(null),null===(_=i.unitIdCtrl)||void 0===_||_.setValue(null),null===(f=i.lessonIdCtrl)||void 0===f||f.setValue(null),i.myForm.reset(),i.questionTypeIdCtrl.setValue(2),i.resetFileInputs(),i.submitted=!1):i.toastr.error(o.returnString),i.spinner.hide()}))}},{key:"editMcqQuestion",value:function(t){var i=this;this.myForm.valid&&(this.spinner.show(),this.examService.editSurveyQuestion(t).subscribe(function(o){var r,s,u,d,c,h,p,_,f;o&&(i.getAllQuestionsByHeadId(),null===(r=i.mainQuestionCtrl)||void 0===r||r.setValue(null),null===(s=i.questionMarkCtrl)||void 0===s||s.setValue(null),null===(u=i.questionTypeIdCtrl)||void 0===u||u.setValue(null),null===(d=i.questionImageCtrl)||void 0===d||d.setValue(null),null===(c=i.questionTextCtrl)||void 0===c||c.setValue(null),null===(h=i.questionPerfectAnswerCtrl)||void 0===h||h.setValue(null),null===(p=i.perfect_answer_attachCtrl)||void 0===p||p.setValue(null),null===(_=i.unitIdCtrl)||void 0===_||_.setValue(null),null===(f=i.lessonIdCtrl)||void 0===f||f.setValue(null),i.myForm.reset(),i.questionTypeIdCtrl.setValue(2),i.resetFileInputs(),i.submitted=!1,i.questionId=0),i.spinner.hide()}))}},{key:"getQuestionForEditByID",value:function(t){var i=this;this.spinner.show(),this.examService.getQuestionForEditByID(t).subscribe(function(o){var r,s,u,d,c,h,p,_,f,T,b,x,k,L,Y,G,O,te,M,B,H,R,U,le,re,se,ue,me,de,ce,pe,_e,qe,De,ye,ne,Fe,ae,Qe,Ue,Ne,we,$,he,ge,fe,ve,Ze,z,Ce,Te,Ie,Ae;o&&(null===(r=i.mainQuestionCtrl)||void 0===r||r.setValue(o.main_question),null===(s=i.questionMarkCtrl)||void 0===s||s.setValue(o.mark),null===(u=i.questionTextCtrl)||void 0===u||u.setValue(o.question_text),null===(d=i.questionImageCtrl)||void 0===d||d.setValue(null!=(null==o?void 0:o.attach_path)?i.fileService.previewPicture(null==o?void 0:o.attach_path):null),null===(c=i.questionTypeIdCtrl)||void 0===c||c.setValue(o.question_type_id),i.questionId=t,2==o.question_type_id&&(null===(h=i.answerOneIdCtrl)||void 0===h||h.setValue(null===(p=o.MCQ_Choices[0])||void 0===p?void 0:p.Id),null===(_=i.answerOneCtrl)||void 0===_||_.setValue(null===(f=o.MCQ_Choices[0])||void 0===f?void 0:f.Text),null===(T=i.answerOneMarkCtrl)||void 0===T||T.setValue(null===(b=o.MCQ_Choices[0])||void 0===b?void 0:b.Mark),null===(x=i.answerOneImageCtrl)||void 0===x||x.setValue(null!=(null===(k=null==o?void 0:o.MCQ_Choices[0])||void 0===k?void 0:k.Image)?i.fileService.previewPicture(null===(L=null==o?void 0:o.MCQ_Choices[0])||void 0===L?void 0:L.Image):null),null===(Y=i.answerOneIsCorrectCtrl)||void 0===Y||Y.setValue(null===(G=o.MCQ_Choices[0])||void 0===G?void 0:G.Is_Correct),i.oneIsCorrect=null===(O=o.MCQ_Choices[0])||void 0===O?void 0:O.Is_Correct,null===(te=i.answerTwoIdCtrl)||void 0===te||te.setValue(null===(M=o.MCQ_Choices[1])||void 0===M?void 0:M.Id),null===(B=i.answerTwoCtrl)||void 0===B||B.setValue(null===(H=o.MCQ_Choices[1])||void 0===H?void 0:H.Text),null===(R=i.answerTwoMarkCtrl)||void 0===R||R.setValue(null===(U=o.MCQ_Choices[1])||void 0===U?void 0:U.Mark),null===(le=i.answerTwoImageCtrl)||void 0===le||le.setValue(null!=(null===(re=null==o?void 0:o.MCQ_Choices[1])||void 0===re?void 0:re.Image)?i.fileService.previewPicture(null===(se=null==o?void 0:o.MCQ_Choices[1])||void 0===se?void 0:se.Image):null),null===(ue=i.answerTwoIsCorrectCtrl)||void 0===ue||ue.setValue(null===(me=o.MCQ_Choices[1])||void 0===me?void 0:me.Is_Correct),i.twoIsCorrect=null===(de=o.MCQ_Choices[1])||void 0===de?void 0:de.Is_Correct,null===(ce=i.answerThreeIdCtrl)||void 0===ce||ce.setValue(null===(pe=o.MCQ_Choices[2])||void 0===pe?void 0:pe.Id),null===(_e=i.answerThreeCtrl)||void 0===_e||_e.setValue(null===(qe=o.MCQ_Choices[2])||void 0===qe?void 0:qe.Text),null===(De=i.answerThreeMarkCtrl)||void 0===De||De.setValue(null===(ye=o.MCQ_Choices[2])||void 0===ye?void 0:ye.Mark),null===(ne=i.answerThreeImageCtrl)||void 0===ne||ne.setValue(null!=(null===(Fe=null==o?void 0:o.MCQ_Choices[2])||void 0===Fe?void 0:Fe.Image)?i.fileService.previewPicture(null===(ae=null==o?void 0:o.MCQ_Choices[2])||void 0===ae?void 0:ae.Image):null),null===(Qe=i.answerThreeIsCorrectCtrl)||void 0===Qe||Qe.setValue(null===(Ue=o.MCQ_Choices[2])||void 0===Ue?void 0:Ue.Is_Correct),i.threeIsCorrect=null===(Ne=o.MCQ_Choices[2])||void 0===Ne?void 0:Ne.Is_Correct,null===(we=i.answerFourIdCtrl)||void 0===we||we.setValue(null===($=o.MCQ_Choices[3])||void 0===$?void 0:$.Id),null===(he=i.answerFourCtrl)||void 0===he||he.setValue(null===(ge=o.MCQ_Choices[3])||void 0===ge?void 0:ge.Text),null===(fe=i.answerFourMarkCtrl)||void 0===fe||fe.setValue(null===(ve=o.MCQ_Choices[3])||void 0===ve?void 0:ve.Mark),null===(Ze=i.answerFourImageCtrl)||void 0===Ze||Ze.setValue(null!=(null===(z=null==o?void 0:o.MCQ_Choices[3])||void 0===z?void 0:z.Image)?i.fileService.previewPicture(null===(Ce=null==o?void 0:o.MCQ_Choices[3])||void 0===Ce?void 0:Ce.Image):null),null===(Te=i.answerFourIsCorrectCtrl)||void 0===Te||Te.setValue(null===(Ie=o.MCQ_Choices[3])||void 0===Ie?void 0:Ie.Is_Correct),i.fourIsCorrect=null===(Ae=o.MCQ_Choices[3])||void 0===Ae?void 0:Ae.Is_Correct)),i.spinner.hide()})}},{key:"removeExamQuestion",value:function(t){var i=this;confirm("\u0647\u0644 \u0627\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u0627\u0644\u062d\u0630\u0641")&&(this.spinner.show(),this.examService.deleteExamQuestion(t).subscribe(function(r){if("Done"===r.returnString){var s=i.questionsInGrid.findIndex(function(u){return u.Id==t});i.questionsInGrid.splice(s,1)}else i.toastr.info(r.returnString);i.spinner.hide()}))}},{key:"importFile",value:function(t){var i=this,o=t.target.files[0].name,r=t.target.files[0].size,s=t.target.files[0].type,u=t.target.files[0].lastModified,d=t.target.files[0].lastModifiedDate;if(t.target.files){var c=new FileReader;c.readAsDataURL(t.target.files[0]),c.onload=function(h){var p=h.target.result,_={FileAsBase64:p,name:o,size:r,type:s,LastModified:u,LastModifiedDate:d};i.questionImageCtrl.setValue(p),i.questionFile=_}}}},{key:"importOneFile",value:function(t){var i=this,o=t.target.files[0].name,r=t.target.files[0].size,s=t.target.files[0].type,u=t.target.files[0].lastModified,d=t.target.files[0].lastModifiedDate;if(t.target.files){var c=new FileReader;c.readAsDataURL(t.target.files[0]),c.onload=function(h){var p=h.target.result;i.answerOneFile={FileAsBase64:p,name:o,size:r,type:s,LastModified:u,LastModifiedDate:d},i.answerOneImageCtrl.setValue(p)}}}},{key:"importTwoFile",value:function(t){var i=this,o=t.target.files[0].name,r=t.target.files[0].size,s=t.target.files[0].type,u=t.target.files[0].lastModified,d=t.target.files[0].lastModifiedDate;if(t.target.files){var c=new FileReader;c.readAsDataURL(t.target.files[0]),c.onload=function(h){var p=h.target.result;i.answerTwoFile={FileAsBase64:p,name:o,size:r,type:s,LastModified:u,LastModifiedDate:d},i.answerTwoImageCtrl.setValue(p)}}}},{key:"importThreeFile",value:function(t){var i=this,o=t.target.files[0].name,r=t.target.files[0].size,s=t.target.files[0].type,u=t.target.files[0].lastModified,d=t.target.files[0].lastModifiedDate;if(t.target.files){var c=new FileReader;c.readAsDataURL(t.target.files[0]),c.onload=function(h){var p=h.target.result;i.answerThreeFile={FileAsBase64:p,name:o,size:r,type:s,LastModified:u,LastModifiedDate:d},i.answerThreeImageCtrl.setValue(p)}}}},{key:"importFourFile",value:function(t){var i=this,o=t.target.files[0].name,r=t.target.files[0].size,s=t.target.files[0].type,u=t.target.files[0].lastModified,d=t.target.files[0].lastModifiedDate;if(t.target.files){var c=new FileReader;c.readAsDataURL(t.target.files[0]),c.onload=function(h){var p=h.target.result;i.answerFourFile={FileAsBase64:p,name:o,size:r,type:s,LastModified:u,LastModifiedDate:d},i.answerFourImageCtrl.setValue(p)}}}},{key:"resetFileInputs",value:function(){document.querySelectorAll('input[type="file"]').forEach(function(i){i.value=null})}}]),l}();return n.\u0275fac=function(a){return new(a||n)(e.Y36(m.qu),e.Y36(ee.R),e.Y36(J.e),e.Y36(P._W),e.Y36(S.t2),e.Y36(Ml.f),e.Y36(F.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-sub-question"]],decls:48,vars:22,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"exam-model-box"],[1,"container-fluid",3,"formGroup"],[1,"row"],[1,"col-12"],["appearance","legacy"],["matInput","","type","text","formControlName","exam_question_text"],[1,"col-md-4","col-12"],["type","file","name","questionImage","accept","image/*",1,"form-control","font-dro","clearInputs",3,"change"],[1,"col-md-8","col-12"],[1,"question-img"],["formControlName","remove_image","class","remove_image",3,"value",4,"ngIf"],[1,"img-fluid",3,"src"],["class","row",4,"ngIf"],["mat-raised-button","","id","examQuestionsButton","class","btn btn-primary bg-light-info",3,"click",4,"ngIf"],["mat-raised-button","","id","editQuestionButton","class","btn btn-primary",3,"click",4,"ngIf"],[1,"col-md-12"],[1,"full-wid-table",2,"overflow","hidden !important"],["id","sotbmod",1,"table","table-striped","table-hover","table-full-width","rtl"],["id","addedExamQuestionsHolder"],["id","ExamQuestion-2626853",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-raised-button","","mat-dialog-close","",1,"btn-danger"],["formControlName","remove_image",1,"remove_image",3,"value"],["matInput","","type","number","formControlName","answerOneMark"],["class","text-danger",4,"ngIf"],["matInput","","type","text","formControlName","answerOne"],["for","radio-0"],[1,"icon","icon_radio"],["type","file","accept","image/*","name","answerOneImage",1,"form-control","font-dro","clearInputs",3,"change"],["formControlName","answerOneRemove_image","class","remove_image",3,"value",4,"ngIf"],["matInput","","type","number","formControlName","answerTwoMark"],["matInput","","type","text","formControlName","answerTwo"],["type","file","accept","image/*","name","answerTwoImage",1,"form-control","font-dro","clearInputs",3,"change"],["formControlName","answerTwoRemove_image","class","remove_image",3,"value",4,"ngIf"],["matInput","","type","number","formControlName","answerThreeMark"],["matInput","","type","text","formControlName","answerThree"],["type","file","accept","image/*","name","answerThreeImage",1,"form-control","font-dro","clearInputs",3,"change"],["formControlName","answerThreeRemove_image","class","remove_image",3,"value",4,"ngIf"],["matInput","","type","number","formControlName","answerFourMark"],["matInput","","type","text","formControlName","answerFour"],["type","file","accept","image/*","name","answerFourImage",1,"form-control","font-dro","clearInputs",3,"change"],["formControlName","answerFourRemove_image","class","remove_image",3,"value",4,"ngIf"],[1,"text-danger"],[4,"ngIf"],["formControlName","answerOneRemove_image",1,"remove_image",3,"value"],["formControlName","answerTwoRemove_image",1,"remove_image",3,"value"],["formControlName","answerThreeRemove_image",1,"remove_image",3,"value"],["formControlName","answerFourRemove_image",1,"remove_image",3,"value"],["mat-raised-button","","id","examQuestionsButton",1,"btn","btn-primary","bg-light-info",3,"click"],[1,"fa","fa-plus"],["mat-raised-button","","id","editQuestionButton",1,"btn","btn-primary",3,"click"],["id","ExamQuestion-2626853"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","","color","warn",3,"click"]],template:function(a,t){1&a&&(e.TgZ(0,"h1",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"form",2),e.TgZ(5,"div",3),e.TgZ(6,"div",4),e.TgZ(7,"mat-form-field",5),e.TgZ(8,"mat-label"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e._UZ(11,"textarea",6),e.qZA(),e.qZA(),e.TgZ(12,"div",4),e.TgZ(13,"div",3),e.TgZ(14,"div",7),e.TgZ(15,"mat-label"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"input",8),e.NdJ("change",function(o){return t.importFile(o)}),e.qZA(),e.qZA(),e.TgZ(19,"div",9),e.TgZ(20,"div",10),e.YNc(21,Pl,2,1,"mat-checkbox",11),e._UZ(22,"img",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(23,"hr"),e.YNc(24,lr,129,60,"ng-container",13),e.TgZ(25,"mat-card-actions",4),e.YNc(26,rr,4,3,"button",14),e.YNc(27,sr,3,3,"button",15),e.qZA(),e.TgZ(28,"div",16),e.TgZ(29,"div",17),e.TgZ(30,"table",18),e.TgZ(31,"thead"),e.TgZ(32,"tr"),e.TgZ(33,"th"),e._uU(34,"#"),e.qZA(),e.TgZ(35,"th"),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"th"),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"th"),e._uU(42,"\xad"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(43,"tbody",19),e.YNc(44,ur,14,3,"tr",20),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(45,"div",21),e.TgZ(46,"button",22),e._uU(47,"Close"),e.qZA(),e.qZA()),2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,12,"labels.addSubQuestion")),e.xp6(3),e.Q6J("formGroup",t.myForm),e.xp6(5),e.hij("",e.lcZ(10,14,"labels.question_ar_text")," "),e.xp6(7),e.hij(" ",e.lcZ(17,16,"labels.QuestionImage")," "),e.xp6(5),e.Q6J("ngIf",t.questionImageCtrl.value),e.xp6(1),e.Q6J("src",null==t.questionImageCtrl?null:t.questionImageCtrl.value,e.LSH),e.xp6(2),e.Q6J("ngIf",2==(null==t.questionTypeIdCtrl?null:t.questionTypeIdCtrl.value)),e.xp6(2),e.Q6J("ngIf",0==t.questionId),e.xp6(1),e.Q6J("ngIf",t.questionId>0),e.xp6(9),e.Oqu(e.lcZ(37,18,"labels.question_ar_text")),e.xp6(3),e.Oqu(e.lcZ(40,20,"labels.QuestionType")),e.xp6(5),e.Q6J("ngForOf",t.questionsInGrid))},directives:[F.uh,F.xY,m._Y,m.JL,m.sg,C.KE,C.hX,j.Nt,m.Fj,m.JJ,m.u,I.O5,Z.hq,I.sg,F.H8,y.lW,F.ZT,Be.oG,Z.a8,Z.$j,Z.dn,m.wV,C.bx,be.Hw],pipes:[D.X$],styles:[".mat-dialog-content[_ngcontent-%COMP%]{max-height:80vh}.mat-card-subtitle[_ngcontent-%COMP%]{margin-top:5px!important}.question-img[_ngcontent-%COMP%]{overflow:hidden!important;max-width:100%!important;max-height:156px!important}.remove_image[_ngcontent-%COMP%]{display:block}"]}),n}(),tt=v(1079);function dr(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"Navbar.newesurvay")," "))}function cr(n,l){if(1&n&&(e.TgZ(0,"span"),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._uU(4),e.qZA()),2&n){var a=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,2,"labels.EditSurvey")),e.xp6(2),e.hij(" - ",a.exam_ar_name," ")}}function pr(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function _r(n,l){if(1&n&&(e.TgZ(0,"mat-hint",32),e.YNc(1,pr,3,3,"span",2),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==a.examNameCtrl||null==a.examNameCtrl.errors?null:a.examNameCtrl.errors.required)||(null==a.examNameCtrl||null==a.examNameCtrl.errors?null:a.examNameCtrl.errors.whiteSpace))}}function hr(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function gr(n,l){if(1&n&&(e.TgZ(0,"mat-hint",32),e.YNc(1,hr,3,3,"span",2),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.examHoursCtrl||null==a.examHoursCtrl.errors?null:a.examHoursCtrl.errors.required)}}function fr(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function vr(n,l){if(1&n&&(e.TgZ(0,"mat-hint",32),e.YNc(1,fr,3,3,"span",2),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.examMinutesCtrl||null==a.examMinutesCtrl.errors?null:a.examMinutesCtrl.errors.required)}}function Zr(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){return e.CHM(a),e.oxw(2).onSubmit()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"General.Update")," "))}function Cr(n,l){if(1&n&&(e.TgZ(0,"mat-card-actions",28),e.YNc(1,Zr,3,3,"button",30),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",a.examId>0)}}function Tr(n,l){if(1&n&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.question_group_ar_name),e.xp6(1),e.hij(" ",a.question_group_ar_name," ")}}function Ir(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function Ar(n,l){if(1&n&&(e.TgZ(0,"mat-hint",32),e.YNc(1,Ir,3,3,"span",2),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.examGroupCtrl||null==a.examGroupCtrl.errors?null:a.examGroupCtrl.errors.required)}}function xr(n,l){if(1&n&&(e.TgZ(0,"mat-option",34),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.Q6J("value",a.question_head_ar_name),e.xp6(1),e.hij(" ",a.question_head_ar_name," ")}}function br(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.mustEnterValue")," "))}function qr(n,l){if(1&n&&(e.TgZ(0,"mat-hint",32),e.YNc(1,br,3,3,"span",2),e.qZA()),2&n){var a=e.oxw();e.xp6(1),e.Q6J("ngIf",null==a.examHeaderCtrl||null==a.examHeaderCtrl.errors?null:a.examHeaderCtrl.errors.required)}}function yr(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"button",35),e.NdJ("click",function(){return e.CHM(a),e.oxw().onSubmit()}),e._UZ(1,"i",36),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"General.Add")," "))}function Fr(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){return e.CHM(a),e.oxw().onAddExamGroupHeader()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.AddQuestion")," "))}function Qr(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){return e.CHM(a),e.oxw().editExamGroupHead()}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.UpdateQuestion")," "))}function Ur(n,l){1&n&&(e.TgZ(0,"th",50),e._uU(1,"#"),e.qZA())}function Nr(n,l){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){var a=l.index;e.xp6(1),e.hij(" ",a+1," ")}}function wr(n,l){1&n&&(e.TgZ(0,"th",50),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.\u064eQuestionNumber")," "))}function kr(n,l){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.hij(" ",a.questionNumber," ")}}function Sr(n,l){1&n&&(e.TgZ(0,"th",50),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.QuestionHeader")," "))}function Dr(n,l){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.hij(" ",a.questionType," ")}}function Er(n,l){1&n&&(e.TgZ(0,"th",50),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"labels.\u064eQuestionContent")," "))}function Lr(n,l){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){var a=l.$implicit;e.xp6(1),e.hij(" ",a.question_title," ")}}function Yr(n,l){1&n&&(e.TgZ(0,"th",50),e._uU(1," actions "),e.qZA())}function Jr(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"a",56),e.NdJ("click",function(){e.CHM(a);var i=e.oxw(2).$implicit;return e.oxw(2).getExamHeadById(i)}),e.ALo(1,"translate"),e._UZ(2,"i",57),e.qZA()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"General.Edit"))}function jr(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"a",58),e.NdJ("click",function(){e.CHM(a);var i=e.oxw(2).$implicit;return e.oxw(2).openDeleateDialog(i)}),e.ALo(1,"translate"),e._UZ(2,"i",59),e.qZA()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"General.Delete"))}function Vr(n,l){if(1&n){var a=e.EpF();e.TgZ(0,"a",60),e.NdJ("click",function(){e.CHM(a);var i=e.oxw(2).$implicit;return e.oxw(2).addSubQuestionDialog(i)}),e._UZ(1,"i",61),e.qZA()}}function Mr(n,l){if(1&n&&(e.ynx(0),e.YNc(1,Jr,3,3,"a",53),e.YNc(2,jr,3,3,"a",54),e.YNc(3,Vr,2,0,"a",55),e.BQk()),2&n){var a=l.$implicit;e.xp6(1),e.Q6J("ngIf","EditGroup"===a.functionName),e.xp6(1),e.Q6J("ngIf","DeleteGroup"===a.functionName),e.xp6(1),e.Q6J("ngIf","addSubQuestion"===a.functionName)}}function Pr(n,l){if(1&n&&(e.TgZ(0,"td",51),e.YNc(1,Mr,4,3,"ng-container",52),e.qZA()),2&n){var a=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",a.rowFunctions)}}function Gr(n,l){1&n&&e._UZ(0,"tr",62)}function Or(n,l){1&n&&e._UZ(0,"tr",63)}function Br(n,l){if(1&n&&(e.TgZ(0,"tr",64),e.TgZ(1,"td",65),e._uU(2),e.qZA(),e.qZA()),2&n){var a=e.oxw(2);e.xp6(2),e.hij(' No data matching the filter "',a.input.value,'" ')}}var Hr=function(){return[10]};function Rr(n,l){if(1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"mat-card-content",4),e.TgZ(7,"div",0),e.TgZ(8,"div",1),e.TgZ(9,"div",37),e.TgZ(10,"table",38),e.ynx(11,39),e.YNc(12,Ur,2,0,"th",40),e.YNc(13,Nr,2,1,"td",41),e.BQk(),e.ynx(14,42),e.YNc(15,wr,3,3,"th",40),e.YNc(16,kr,2,1,"td",41),e.BQk(),e.ynx(17,43),e.YNc(18,Sr,3,3,"th",40),e.YNc(19,Dr,2,1,"td",41),e.BQk(),e.ynx(20,44),e.YNc(21,Er,3,3,"th",40),e.YNc(22,Lr,2,1,"td",41),e.BQk(),e.ynx(23,45),e.YNc(24,Yr,2,0,"th",40),e.YNc(25,Pr,2,1,"td",41),e.BQk(),e.YNc(26,Gr,1,0,"tr",46),e.YNc(27,Or,1,0,"tr",47),e.YNc(28,Br,3,1,"tr",48),e.qZA(),e._UZ(29,"mat-paginator",49),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){var a=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,5,"labels.QuestionsGroup"),""),e.xp6(6),e.Q6J("dataSource",a.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",a.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns),e.xp6(2),e.Q6J("pageSizeOptions",e.DdM(7,Hr))}}var $r=function(l,a){return{functionId:l,parentId:a}},Wr=[{path:"",redirectTo:"exam",pathMatch:"full"},{path:"exam-preview/:examId/:type",component:Wo},{path:"exam/:courseId/:typeId",children:[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:xi},{path:"add-exam",component:Ba.M},{path:"exam-points/:examId",component:dl}]},{path:"survey/:courseId/:typeId",data:{breadcrumb:"Navbar.Surveys",view:"survey"},children:[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:jl,data:{breadcrumb:"Navbar.SurveyList",view:"survey-index"}},{path:"add-survey",component:function(){var n=function(){function l(a,t,i,o,r,s,u,d,c,h,p){var _=this;(0,w.Z)(this,l),this.location=a,this.fb=t,this.authserv=i,this.examService=o,this.route=r,this.router=s,this.msg=u,this.generalService=d,this.dialog=c,this.datePipe=h,this.spinner=p,this.countries=[],this.stages=[],this.educationYears=[],this.subjects=[],this.examTypes=[],this.units=[],this.lessions=[],this.discountTypes=[],this.examGroups=[],this.examHeaders=[],this.GroupsHeadersList=[],this.examGroupHeaderIdToEdit=0,this.displayedColumns=["#","questionNumber","questionType","question_title","actions"],this.submitted=!1,this.GroupHeadsubmitted=!1,this.examId=0,this.editGroupHeaderMode=!1,this.isRepeatableExam=!1,this.isSendWhats=!1,this.examGroupHeaderId=0,r.paramMap.subscribe(function(f){_.type=Number(f.get("typeId"))}),r.paramMap.subscribe(function(f){_.subId=Number(f.get("courseId"))}),this.route.queryParamMap.subscribe(function(f){_.examId=Number(f.get("examId")),_.examId>0&&(_.getExamById(),_.getAllGroupHeaderByExamId()),_.functionId=Number(f.get("functionId")),_.parentId=Number(f.get("parentId")),_.functionId&&_.authserv.getUserRowFunctions(_.functionId).subscribe(function(T){T&&(_.rowFunctions=T)})})}return(0,N.Z)(l,[{key:"countryIdCtrl",get:function(){return this.myForm.get("countryId")}},{key:"stageIdCtrl",get:function(){return this.myForm.get("stageId")}},{key:"educationYearIdCtrl",get:function(){return this.myForm.get("educationYearId")}},{key:"subjectIdCtrl",get:function(){return this.myForm.get("subjectId")}},{key:"teacherUserIdCtrl",get:function(){return this.myForm.get("teacherUserId")}},{key:"examTypeIdCtrl",get:function(){return this.myForm.get("examTypeId")}},{key:"unitIdCtrl",get:function(){return this.myForm.get("unitId")}},{key:"lessionIdCtrl",get:function(){return this.myForm.get("lessionId")}},{key:"examNameCtrl",get:function(){return this.myForm.get("examName")}},{key:"examHoursCtrl",get:function(){return this.myForm.get("examHours")}},{key:"examMinutesCtrl",get:function(){return this.myForm.get("examMinutes")}},{key:"examPriceCtrl",get:function(){return this.myForm.get("examPrice")}},{key:"discountCtrl",get:function(){return this.myForm.get("discount")}},{key:"discountTypeCtrl",get:function(){return this.myForm.get("discountType")}},{key:"fromDateCtrl",get:function(){return this.myForm.get("fromDate")}},{key:"toDateCtrl",get:function(){return this.myForm.get("toDate")}},{key:"formHourCtrl",get:function(){return this.myForm.get("formHour")}},{key:"toHoursCtrl",get:function(){return this.myForm.get("toHours")}},{key:"resualtDateCtrl",get:function(){return this.myForm.get("resualtDate")}},{key:"resualtTimeCtrl",get:function(){return this.myForm.get("resualtTime")}},{key:"canSellIndividuallyCtrl",get:function(){return this.myForm.get("canSellIndividually")}},{key:"isRepeatableCtrl",get:function(){return this.myForm.get("isRepeatable")}},{key:"repeatNumbersCtrl",get:function(){return this.myForm.get("repeatNumbers")}},{key:"repeatingPriceCtrl",get:function(){return this.myForm.get("repeatingPrice")}},{key:"hasCustomDiscountCtrl",get:function(){return this.myForm.get("hasCustomDiscount")}},{key:"sendWhatsAppMsgCtrl",get:function(){return this.myForm.get("sendWhatsAppMsg")}},{key:"examGroupCtrl",get:function(){return this.GroupHeadersForm.get("examGroup")}},{key:"examHeaderCtrl",get:function(){return this.GroupHeadersForm.get("examHeader")}},{key:"examContentCtrl",get:function(){return this.GroupHeadersForm.get("examContent")}},{key:"isPublishCtrl",get:function(){return this.myForm.get("isPublish")}},{key:"ngOnInit",value:function(){var t,i,o,r,s,u;this.myForm=this.fb.group({examName:["",[m.kI.required,q.D.whiteSpace]],examHours:["",[m.kI.required,q.D.minusNum]],examMinutes:["",[m.kI.required,q.D.minusNum]],fromDate:[""],toDate:[""],formHour:[""],toHours:[""]}),this.GroupHeadersForm=this.fb.group({examGroup:["",m.kI.required],examHeader:["",m.kI.required],examContent:[""]}),this.EduCompId=this.authserv.getEduCompId(),this.branchId=this.authserv.getBranchId(),null===(t=this.stageIdCtrl)||void 0===t||t.disable(),null===(i=this.educationYearIdCtrl)||void 0===i||i.disable(),null===(o=this.subjectIdCtrl)||void 0===o||o.disable(),null===(r=this.teacherUserIdCtrl)||void 0===r||r.disable(),null===(s=this.unitIdCtrl)||void 0===s||s.disable(),null===(u=this.lessionIdCtrl)||void 0===u||u.disable(),this.getAllCountieres(),this.getAllExamTypes(),this.getAllQuestionGroups(),this.getAllQuestionHeaders(),this.examTypeValidator(),this.RepeatableValidator()}},{key:"FormCtrl",get:function(){return this.myForm.controls}},{key:"ngAfterViewInit",value:function(){var t=this;this.authserv.EduCompId.subscribe(function(i){t.EduCompId=i.EduCompId}),this.authserv.branchId.subscribe(function(i){t.branchId=i.branchId}),this.examId>0&&this.getExamById(),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}},{key:"filter_question_group",value:function(t){var i=t.toLowerCase();return this.examGroups.filter(function(o){return o.question_group_ar_name.toLowerCase().includes(i)})}},{key:"filter_question_header",value:function(t){var i=t.toLowerCase();return this.examHeaders.filter(function(o){return o.question_head_ar_name.toLowerCase().includes(i)})}},{key:"getExamById",value:function(){var t=this;this.spinner.show(),this.examService.getExamById(this.examId).subscribe(function(i){var o,r,s,u,d,c,h,p,_;if(i){null===(o=t.toHoursCtrl)||void 0===o||o.setValue(null==i?void 0:i.toHour),null===(r=t.examNameCtrl)||void 0===r||r.setValue(null==i?void 0:i.exam_ar_name),t.exam_ar_name=null==i?void 0:i.exam_ar_name,null===(s=t.formHourCtrl)||void 0===s||s.setValue(null==i?void 0:i.fromHour),null===(u=t.canSellIndividuallyCtrl)||void 0===u||u.setValue(null==i?void 0:i.Individually_Purchased);var f=i.exam_period_minute%60,T=(i.exam_period_minute-f)/60;null===(d=t.examMinutesCtrl)||void 0===d||d.setValue(f),null===(c=t.examHoursCtrl)||void 0===c||c.setValue(T),null!=(null==i?void 0:i.Subject_ID)&&null==(null==i?void 0:i.Subject_ID)&&1==i.quiz&&(null===(h=t.examTypeIdCtrl)||void 0===h||h.setValue(4)),null===(p=t.fromDateCtrl)||void 0===p||p.setValue(i.Avilable_Date_From),null===(_=t.toDateCtrl)||void 0===_||_.setValue(i.Avilable_Date_To)}t.spinner.hide()})}},{key:"getAllGroupHeaderByExamId",value:function(){var t=this;this.examService.getAllGroupHeaderByExamId(this.examId).subscribe(function(i){i&&(t.GroupsHeadersList=i,t.dataSource=new g.by(i),t.itemsCount=i.length)})}},{key:"getAllQuestionGroups",value:function(){var t=this;this.examService.getAllQuestionGroups().subscribe(function(i){i&&(t.examGroups=i,t.filteredExamGroups=t.examGroupCtrl.valueChanges.pipe((0,Ke.O)(""),(0,et.U)(function(o){return t.filter_question_group(o||"")})))})}},{key:"getAllQuestionHeaders",value:function(){var t=this;this.examService.getAllQuestionHeaders().subscribe(function(i){i&&(t.examHeaders=i,t.filteredExamHeaders=t.examHeaderCtrl.valueChanges.pipe((0,Ke.O)(""),(0,et.U)(function(o){return t.filter_question_header(o||"")})))})}},{key:"onSubmit",value:function(){var t,i,o,r,s,u,d={id:this.examId,Avilable_Date_From:this.datePipe.transform(null===(t=this.fromDateCtrl)||void 0===t?void 0:t.value),Avilable_Date_To:this.datePipe.transform(this.toDateCtrl.value),EduCompId:this.EduCompId,exam_ar_name:null===(i=this.examNameCtrl)||void 0===i?void 0:i.value,fromHour:null===(o=this.formHourCtrl)||void 0===o?void 0:o.value,Subject_ID:this.subId,toHour:null===(r=this.toHoursCtrl)||void 0===r?void 0:r.value,exam_type_id:this.type},c={exam_hour:null===(s=this.examHoursCtrl)||void 0===s?void 0:s.value,exam_minute:null===(u=this.examMinutesCtrl)||void 0===u?void 0:u.value,exam:d};console.log("toAdd ",c),this.addExam(c)}},{key:"addExam",value:function(t){var i=this,o=this.GroupHeadersForm.valid;this.submitted=!0,0!=this.examId||o?this.myForm.valid?(this.spinner.show(),this.examService.addExam(t).subscribe(function(r){1==r.returnValue&&r.examId>0&&(console.log("addExam",r),i.examId=r.examId,i.router.navigate([],{queryParams:{examId:r.examId},queryParamsHandling:"merge"}),i.onAddExamGroupHeader(),i.msg.success("Done"),i.submitted=!1),i.spinner.hide()})):this.msg.error("Check your inputs"):this.GroupHeadsubmitted=!0}},{key:"onAddExamGroupHeader",value:function(){var i,o,r,s,u,t=this;if(null===(o=null===(i=this.dataSource)||void 0===i?void 0:i.data)||void 0===o?void 0:o.find(function(p){var _,f;return p.group_name==(null===(_=t.examGroupCtrl)||void 0===_?void 0:_.value)&&p.head_name==(null===(f=t.examHeaderCtrl)||void 0===f?void 0:f.value)}))this.msg.info("Cannot add the same header with same group");else{var h={exam_question_group_text:null===(r=this.examGroupCtrl)||void 0===r?void 0:r.value,exam_question_head_title:null===(s=this.examContentCtrl)||void 0===s?void 0:s.value,exam_question_head_text:null===(u=this.examHeaderCtrl)||void 0===u?void 0:u.value,exam:{id:this.examId}};this.GroupHeadersForm.valid?(this.spinner.show(),this.examService.addExamGroupHeader(h).subscribe(function(p){var b;p&&(t.getAllGroupHeaderByExamId(),t.examGroupCtrl,t.examHeaderCtrl,t.examContentCtrl,null===(b=t.examContentCtrl)||void 0===b||b.setValue(null),t.spinner.hide())})):0==this.examId&&this.msg.error("Check your inputs")}}},{key:"getExamHeadById",value:function(t){var i,o,r;this.editGroupHeaderMode=!0,this.examGroupHeaderIdToEdit=t.id,null===(i=this.examGroupCtrl)||void 0===i||i.setValue(null==t?void 0:t.questionNumber),null===(o=this.examContentCtrl)||void 0===o||o.setValue(null==t?void 0:t.question_title),null===(r=this.examHeaderCtrl)||void 0===r||r.setValue(null==t?void 0:t.questionType)}},{key:"editExamGroupHead",value:function(){var i,o,r,t=this,s={exam_question_head_id:this.examGroupHeaderIdToEdit,group:null===(i=this.examGroupCtrl)||void 0===i?void 0:i.value,head:null===(o=this.examHeaderCtrl)||void 0===o?void 0:o.value,title:null===(r=this.examContentCtrl)||void 0===r?void 0:r.value};this.spinner.show(),this.examService.editExamGroupHeader(s).subscribe(function(u){var d,c;if(u){var h=t.dataSource.data.find(function(p){return p.id==t.examGroupHeaderIdToEdit});h&&(h.questionNumber=s.group,h.questionType=s.head,h.question_title=null===(d=t.examContentCtrl)||void 0===d?void 0:d.value),t.editGroupHeaderMode=!1,null===(c=t.examContentCtrl)||void 0===c||c.setValue(null),t.msg.success("\u062a\u0645 \u0627\u0644\u062a\u0639\u062f\u064a\u0644 \u0628\u0646\u062c\u0627\u062d")}t.spinner.hide()})}},{key:"removeExamGroupHead",value:function(t){var i=this;this.spinner.show(),this.examService.deleteExamGroupHeader(t.id).subscribe(function(o){if(1==o.returnValue){var r=i.dataSource.data.findIndex(function(s){return s==t});i.dataSource.data.splice(r,1),i.dataSource.paginator=i.paginator,i.msg.success("\u062a\u0645 \u0627\u0644\u062d\u0630\u0641")}else i.msg.error(o.returnString);i.spinner.hide()})}},{key:"openDeleateDialog",value:function(t){var i=this;this.dialog.open(W.F,{data:{msg:t.questionNumber,panelClass:"dialog-radius"}}).afterClosed().subscribe(function(o){o&&i.removeExamGroupHead(t)})}},{key:"addSubQuestionDialog",value:function(t){console.log(t),this.dialog.open(mr,{data:{examId:this.examId,examGroupHeaderId:t.id,subjectId:this.subId}}).afterClosed().subscribe(function(i){})}},{key:"addSubQuestion",value:function(t){this.examGroupHeaderId=t}},{key:"getAllExamTypes",value:function(){var t=this;this.examService.getAllExamType().subscribe(function(i){i&&(t.examTypes=i)})}},{key:"onSelectExamType",value:function(){var t,i,o,r,s,u,d,c;1==(null===(t=this.examTypeIdCtrl)||void 0===t?void 0:t.value)?(null===(i=this.unitIdCtrl)||void 0===i||i.enable(),null===(o=this.lessionIdCtrl)||void 0===o||o.enable()):2==(null===(r=this.examTypeIdCtrl)||void 0===r?void 0:r.value)?(null===(s=this.unitIdCtrl)||void 0===s||s.enable(),null===(u=this.lessionIdCtrl)||void 0===u||u.disable()):(null===(d=this.unitIdCtrl)||void 0===d||d.disable(),null===(c=this.lessionIdCtrl)||void 0===c||c.disable())}},{key:"getAllCountieres",value:function(){var t=this;this.examService.getAllCountries().subscribe(function(i){i&&(t.countries=i)})}},{key:"onSelectCountry",value:function(){var i,o,r,s,u,d,t=this;(null===(i=this.countryIdCtrl)||void 0===i?void 0:i.value)?this.examService.getAllStages(null===(o=this.countryIdCtrl)||void 0===o?void 0:o.value).subscribe(function(c){var h;c&&(t.stages=c,null===(h=t.stageIdCtrl)||void 0===h||h.enable())}):(null===(r=this.stageIdCtrl)||void 0===r||r.disable(),null===(s=this.educationYearIdCtrl)||void 0===s||s.disable(),null===(u=this.subjectIdCtrl)||void 0===u||u.disable(),null===(d=this.teacherUserIdCtrl)||void 0===d||d.disable())}},{key:"onSelectStages",value:function(){var i,o,r,s,u,d,c,h,t=this;null===(i=this.educationYearIdCtrl)||void 0===i||i.setValue(""),null===(o=this.subjectIdCtrl)||void 0===o||o.setValue(""),null===(r=this.teacherUserIdCtrl)||void 0===r||r.setValue(""),(null===(s=this.stageIdCtrl)||void 0===s?void 0:s.value)?this.examService.getAllEducationYears(null===(u=this.stageIdCtrl)||void 0===u?void 0:u.value).subscribe(function(p){var _;p&&(t.educationYears=p,null===(_=t.educationYearIdCtrl)||void 0===_||_.enable())}):(null===(d=this.educationYearIdCtrl)||void 0===d||d.disable(),null===(c=this.subjectIdCtrl)||void 0===c||c.disable(),null===(h=this.teacherUserIdCtrl)||void 0===h||h.disable())}},{key:"onSelectEducationYears",value:function(){var i,o,r,s,u,d,t=this;null===(i=this.subjectIdCtrl)||void 0===i||i.setValue(""),null===(o=this.teacherUserIdCtrl)||void 0===o||o.setValue(""),(null===(r=this.educationYearIdCtrl)||void 0===r?void 0:r.value)?this.examService.getAllSubjects(null===(s=this.educationYearIdCtrl)||void 0===s?void 0:s.value).subscribe(function(c){var h;c&&(t.subjects=c,null===(h=t.subjectIdCtrl)||void 0===h||h.enable())}):(null===(u=this.subjectIdCtrl)||void 0===u||u.disable(),null===(d=this.teacherUserIdCtrl)||void 0===d||d.disable())}},{key:"onSelectSubjects",value:function(){var i,o,r,s,t=this;(null===(i=this.subjectIdCtrl)||void 0===i?void 0:i.value)?(0,Vl.D)([this.generalService.getTeacherBySubjectAndEduCompId(this.EduCompId,null===(o=this.subjectIdCtrl)||void 0===o?void 0:o.value),this.examService.getAllUnitsBySublectId(null===(r=this.subjectIdCtrl)||void 0===r?void 0:r.value)]).subscribe(function(u){var d;t.teachers=u[0].teachers,t.units=u[1],null===(d=t.teacherUserIdCtrl)||void 0===d||d.enable()}):null===(s=this.teacherUserIdCtrl)||void 0===s||s.disable()}},{key:"onSelectUnit",value:function(){var i,o,t=this;null!=(null===(i=this.unitIdCtrl)||void 0===i?void 0:i.value)&&this.examService.getAllLessonsByUnitId(null===(o=this.unitIdCtrl)||void 0===o?void 0:o.value).subscribe(function(r){r&&(t.lessions=r)})}},{key:"examTypeValidator",value:function(){var t,i,o,r,s,u,d,c,h,p,_,f,T=null===(t=this.examTypeIdCtrl)||void 0===t?void 0:t.value;1==T?(null===(i=this.unitIdCtrl)||void 0===i||i.setValidators([m.kI.required]),null===(o=this.lessionIdCtrl)||void 0===o||o.setValidators([m.kI.required])):2==T?(null===(r=this.unitIdCtrl)||void 0===r||r.setValidators([m.kI.required]),null===(s=this.lessionIdCtrl)||void 0===s||s.clearValidators(),null===(u=this.lessionIdCtrl)||void 0===u||u.reset()):(null===(d=this.unitIdCtrl)||void 0===d||d.clearValidators(),null===(c=this.unitIdCtrl)||void 0===c||c.reset(),null===(h=this.lessionIdCtrl)||void 0===h||h.clearValidators(),null===(p=this.lessionIdCtrl)||void 0===p||p.reset()),null===(_=this.unitIdCtrl)||void 0===_||_.updateValueAndValidity(),null===(f=this.lessionIdCtrl)||void 0===f||f.updateValueAndValidity()}},{key:"RepeatableValidator",value:function(){var t,i,o,r,s,u,d,c,h,p=null===(t=this.hasCustomDiscountCtrl)||void 0===t?void 0:t.value;1==p?(null===(i=this.repeatNumbersCtrl)||void 0===i||i.setValidators([m.kI.required]),null===(o=this.repeatingPriceCtrl)||void 0===o||o.setValidators([m.kI.required])):0==p&&(null===(r=this.repeatNumbersCtrl)||void 0===r||r.clearValidators(),null===(s=this.repeatingPriceCtrl)||void 0===s||s.clearValidators(),null===(u=this.repeatNumbersCtrl)||void 0===u||u.reset(),null===(d=this.repeatingPriceCtrl)||void 0===d||d.reset()),null===(c=this.repeatNumbersCtrl)||void 0===c||c.updateValueAndValidity(),null===(h=this.repeatingPriceCtrl)||void 0===h||h.updateValueAndValidity()}}]),l}();return n.\u0275fac=function(a){return new(a||n)(e.Y36(I.Ye),e.Y36(m.qu),e.Y36(J.e),e.Y36(ee.R),e.Y36(A.gz),e.Y36(A.F0),e.Y36(P._W),e.Y36(X.m),e.Y36(F.uw),e.Y36(I.uU),e.Y36(S.t2))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-survey"]],viewQuery:function(a,t){var i;1&a&&(e.Gf(V.NW,5),e.Gf(Q.YE,5)),2&a&&(e.iGM(i=e.CRH())&&(t.paginator=i.first),e.iGM(i=e.CRH())&&(t.sort=i.first))},decls:109,vars:66,consts:[[1,"row"],[1,"col-12"],[4,"ngIf"],["mat-raised-button","","routerLink","../",1,"btn","btn-warning","bg-light-warning","float-right",3,"queryParams"],[1,"container-fluid"],[3,"formGroup"],[1,"col-md-3","col-12"],["appearance","legacy"],["matInput","","formControlName","examName"],["class","danger",4,"ngIf"],["matInput","","type","number","formControlName","examHours"],["matInput","","type","number","formControlName","examMinutes"],["matInput","","formControlName","fromDate",3,"matDatepicker"],["matSuffix","",3,"for"],["fromDate",""],["matInput","","formControlName","toDate",3,"matDatepicker"],["toDate",""],["matInput","","type","time","formControlName","formHour"],["matInput","","type","time","formControlName","toHours"],["align","end",4,"ngIf"],[1,"form-horizontal",3,"formGroup"],[1,"col-md-6","col-12"],["type","text","matInput","","formControlName","examGroup",3,"matAutocomplete"],["autoExamGroup","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","text","matInput","","formControlName","examHeader",3,"matAutocomplete"],["autoExamHeader","matAutocomplete"],["matInput","","formControlName","examContent","cols","20"],["align","end"],["mat-raised-button","","class","btn btn-primary bg-light-info",3,"click",4,"ngIf"],["mat-raised-button","","class","btn btn-primary",3,"click",4,"ngIf"],["class","row",4,"ngIf"],[1,"danger"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],[3,"value"],["mat-raised-button","",1,"btn","btn-primary","bg-light-info",3,"click"],[1,"fa","fa-plus"],[1,"mat-elevation-z8","f-w"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","#"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","questionNumber"],["matColumnDef","questionType"],["matColumnDef","question_title"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["showFirstLastButtons","","aria-label","Select page of users",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[4,"ngFor","ngForOf"],["class","success p-0",3,"matTooltip","click",4,"ngIf"],["class","danger p-0",3,"matTooltip","click",4,"ngIf"],["class","info p-0","matTooltip","Add sub question",3,"click",4,"ngIf"],[1,"success","p-0",3,"matTooltip","click"],[1,"ft-edit-2","font-medium-3","mr-2"],[1,"danger","p-0",3,"matTooltip","click"],[1,"ft-trash","font-medium-3","mr-2"],["matTooltip","Add sub question",1,"info","p-0",3,"click"],[1,"ft-git-branch","font-medium-3","mr-2"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(a,t){if(1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-card"),e.TgZ(3,"mat-card-title"),e.YNc(4,dr,3,3,"span",2),e.YNc(5,cr,5,4,"span",2),e.TgZ(6,"a",3),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.qZA(),e.TgZ(9,"mat-card-content",4),e.TgZ(10,"div",0),e.TgZ(11,"div",1),e.TgZ(12,"form",5),e.TgZ(13,"div",0),e.TgZ(14,"div",6),e.TgZ(15,"mat-form-field",7),e.TgZ(16,"mat-label"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e._UZ(19,"input",8),e.YNc(20,_r,2,1,"mat-hint",9),e.qZA(),e.qZA(),e.TgZ(21,"div",6),e.TgZ(22,"mat-form-field",7),e.TgZ(23,"mat-label"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e._UZ(26,"input",10),e.YNc(27,gr,2,1,"mat-hint",9),e.qZA(),e.qZA(),e.TgZ(28,"div",6),e.TgZ(29,"mat-form-field",7),e.TgZ(30,"mat-label"),e._uU(31),e.ALo(32,"translate"),e.qZA(),e._UZ(33,"input",11),e.YNc(34,vr,2,1,"mat-hint",9),e.qZA(),e.qZA(),e.TgZ(35,"div",6),e.TgZ(36,"mat-form-field",7),e.TgZ(37,"mat-label"),e._uU(38),e.ALo(39,"translate"),e.qZA(),e._UZ(40,"input",12),e._UZ(41,"mat-datepicker-toggle",13),e._UZ(42,"mat-datepicker",null,14),e.qZA(),e.qZA(),e.TgZ(44,"div",6),e.TgZ(45,"mat-form-field",7),e.TgZ(46,"mat-label"),e._uU(47),e.ALo(48,"translate"),e.qZA(),e._UZ(49,"input",15),e._UZ(50,"mat-datepicker-toggle",13),e._UZ(51,"mat-datepicker",null,16),e.qZA(),e.qZA(),e.TgZ(53,"div",6),e.TgZ(54,"mat-form-field",7),e.TgZ(55,"mat-label"),e._uU(56),e.ALo(57,"translate"),e.qZA(),e._UZ(58,"input",17),e.qZA(),e.qZA(),e.TgZ(59,"div",6),e.TgZ(60,"mat-form-field",7),e.TgZ(61,"mat-label"),e._uU(62),e.ALo(63,"translate"),e.qZA(),e._UZ(64,"input",18),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(65,Cr,2,1,"mat-card-actions",19),e.qZA(),e.qZA(),e.qZA(),e.TgZ(66,"div",0),e.TgZ(67,"div",1),e.TgZ(68,"mat-card"),e.TgZ(69,"mat-card-title"),e.TgZ(70,"span"),e._uU(71),e.ALo(72,"translate"),e.qZA(),e.qZA(),e.TgZ(73,"mat-card-content",4),e.TgZ(74,"form",20),e.TgZ(75,"div",0),e.TgZ(76,"div",21),e.TgZ(77,"mat-form-field",7),e.TgZ(78,"mat-label"),e._uU(79),e.ALo(80,"translate"),e.qZA(),e._UZ(81,"input",22),e.TgZ(82,"mat-autocomplete",null,23),e.YNc(84,Tr,2,2,"mat-option",24),e.ALo(85,"async"),e.qZA(),e.YNc(86,Ar,2,1,"mat-hint",9),e.qZA(),e.qZA(),e.TgZ(87,"div",21),e.TgZ(88,"mat-form-field",7),e.TgZ(89,"mat-label"),e._uU(90),e.ALo(91,"translate"),e.qZA(),e._UZ(92,"input",25),e.TgZ(93,"mat-autocomplete",null,26),e.YNc(95,xr,2,2,"mat-option",24),e.ALo(96,"async"),e.qZA(),e.YNc(97,qr,2,1,"mat-hint",9),e.qZA(),e.qZA(),e.TgZ(98,"div",1),e.TgZ(99,"mat-form-field",7),e.TgZ(100,"mat-label"),e._uU(101),e.ALo(102,"translate"),e.qZA(),e._UZ(103,"textarea",27),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(104,"mat-card-actions",28),e.YNc(105,yr,4,3,"button",29),e.YNc(106,Fr,3,3,"button",30),e.YNc(107,Qr,3,3,"button",30),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(108,Rr,30,8,"div",31)),2&a){var i=e.MAs(43),o=e.MAs(52),r=e.MAs(83),s=e.MAs(94);e.xp6(4),e.Q6J("ngIf",0==t.examId),e.xp6(1),e.Q6J("ngIf",t.examId>0),e.xp6(1),e.Q6J("queryParams",e.WLB(63,$r,t.functionId,t.parentId)),e.xp6(1),e.hij(" ",e.lcZ(8,35,"General.Back")," "),e.xp6(5),e.Q6J("formGroup",t.myForm),e.xp6(5),e.Oqu(e.lcZ(18,37,"labels.SurveyName")),e.xp6(3),e.Q6J("ngIf",(null==t.examNameCtrl?null:t.examNameCtrl.invalid)&&((null==t.examNameCtrl?null:t.examNameCtrl.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(25,39,"labels.SurveyHours")),e.xp6(3),e.Q6J("ngIf",(null==t.examHoursCtrl?null:t.examHoursCtrl.invalid)&&((null==t.examHoursCtrl?null:t.examHoursCtrl.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(32,41,"labels.SurveyMinute")),e.xp6(3),e.Q6J("ngIf",(null==t.examMinutesCtrl?null:t.examMinutesCtrl.invalid)&&((null==t.examMinutesCtrl?null:t.examMinutesCtrl.touched)||t.submitted)),e.xp6(4),e.hij(" ",e.lcZ(39,43,"labels.FromDate"),""),e.xp6(2),e.Q6J("matDatepicker",i),e.xp6(1),e.Q6J("for",i),e.xp6(6),e.hij(" ",e.lcZ(48,45,"labels.ToDate"),""),e.xp6(2),e.Q6J("matDatepicker",o),e.xp6(1),e.Q6J("for",o),e.xp6(6),e.Oqu(e.lcZ(57,47,"labels.FromTime")),e.xp6(6),e.Oqu(e.lcZ(63,49,"labels.ToTime")),e.xp6(3),e.Q6J("ngIf",t.examId>0),e.xp6(6),e.Oqu(e.lcZ(72,51,"labels.addGxamGroups")),e.xp6(3),e.Q6J("formGroup",t.GroupHeadersForm),e.xp6(5),e.hij(" ",e.lcZ(80,53,"labels.\u064eQuestionNumber")," "),e.xp6(2),e.Q6J("matAutocomplete",r),e.xp6(3),e.Q6J("ngForOf",e.lcZ(85,55,t.filteredExamGroups)),e.xp6(2),e.Q6J("ngIf",(null==t.examGroupCtrl?null:t.examGroupCtrl.invalid)&&((null==t.examGroupCtrl?null:t.examGroupCtrl.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(91,57,"labels.QuestionHeader")),e.xp6(2),e.Q6J("matAutocomplete",s),e.xp6(3),e.Q6J("ngForOf",e.lcZ(96,59,t.filteredExamHeaders)),e.xp6(2),e.Q6J("ngIf",(null==t.examHeaderCtrl?null:t.examHeaderCtrl.invalid)&&((null==t.examHeaderCtrl?null:t.examHeaderCtrl.touched)||t.submitted)),e.xp6(4),e.Oqu(e.lcZ(102,61,"labels.\u064eQuestionContent")),e.xp6(4),e.Q6J("ngIf",0==t.examId),e.xp6(1),e.Q6J("ngIf",t.GroupsHeadersList.length>0&&!t.editGroupHeaderMode&&t.examId>0),e.xp6(1),e.Q6J("ngIf",t.editGroupHeaderMode),e.xp6(1),e.Q6J("ngIf",t.GroupsHeadersList.length>0)}},directives:[Z.a8,Z.n5,I.O5,y.zs,A.yS,Z.dn,m._Y,m.JL,m.sg,C.KE,C.hX,j.Nt,m.Fj,m.JJ,m.u,m.wV,xe.hl,xe.nW,C.R9,xe.Mq,tt.ZL,tt.XC,I.sg,Z.hq,C.bx,y.lW,oe.ey,g.BZ,Q.YE,g.w1,g.fO,g.Dz,g.as,g.nj,g.Ee,V.NW,g.ge,Q.nU,g.ev,Le.gM,g.XQ,g.Gk],pipes:[D.X$,I.Ov],styles:[""]}),n}(),data:{breadcrumb:"Navbar.newesurvay",view:"add-survey"}}]},{path:"question-bank",children:[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:Oa},{path:"add-question",component:la}]},{path:"templates",children:[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:vo},{path:"add-template",component:kn},{path:"template-points/:templateId",component:gt}]},{path:"exam-correction",children:[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:Yo}]}],Xr=function(){var n=(0,N.Z)(function l(){(0,w.Z)(this,l)});return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[A.Bz.forChild(Wr)],A.Bz]}),n}(),Kr=v(8109),es=v(5568),nt=v(9778),ts=function(){var n=(0,N.Z)(function l(){(0,w.Z)(this,l)});return n.\u0275fac=function(a){return new(a||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[{provide:oe._A,useClass:nt.B},{provide:oe.sG,useValue:nt.F}],imports:[[Xr,I.ez,m.UX,Kr.m,es.q,E.IJ,S.ef,ie.JX]]}),n}()}}]);